System.register(["@angular/core","@angular/material/sort","@angular/material/table","@angular/material/paginator","@shared/public-api","@angular/common","@angular/forms","rxjs","rxjs/operators","@core/public-api","@angular/material/dialog","tslib","@angular/material/tooltip","@ngx-translate/core","@angular/cdk/collections","@ngrx/store","@angular/router","@home/components/public-api","@angular/platform-browser","@home/components/widget/widget.component","@shared/components/dialog/json-object-edit-dialog.component","@shared/import-export/import-export.service","@shared/components/popover.component","@shared/components/popover.service","@shared/decorators/coercion","@angular/material/core"],(function(e){"use strict";var t,n,a,i,r,o,s,l,p,c,d,u,m,h,g,f,y,v,b,x,w,S,C,_,T,I,E,M,k,P,D,O,A,F,R,B,N,L,V,q,G,z,U,j,H,W,$,K,Y,X,Z,Q,J,ee,te,ne,ae,ie,re,oe,se,le,pe,ce,de,ue,me,he,ge,fe,ye,ve,be,xe,we,Se,Ce,_e,Te,Ie,Ee,Me,ke,Pe,De,Oe,Ae,Fe,Re,Be,Ne,Le,Ve,qe,Ge,ze,Ue,je,He,We,$e,Ke,Ye,Xe,Ze,Qe,Je,et,tt,nt,at,it,rt,ot;return{setters:[function(e){t=e,n=e.assertInInjectionContext,a=e.inject,i=e.DestroyRef,e.ɵRuntimeError,e.ɵgetOutputDestroyRef,r=e.Injector,o=e.effect,s=e.untracked,e.assertNotInReactiveContext,e.signal,e.computed,l=e.input,p=e.output,c=e.forwardRef,d=e.ChangeDetectionStrategy,u=e.EventEmitter,m=e.booleanAttribute,h=e.ChangeDetectorRef,g=e.SecurityContext,f=e.KeyValueDiffers,y=e.ɵNG_COMP_DEF},function(e){v=e.MatSort},function(e){b=e.MatTableDataSource},function(e){x=e.MatPaginator},function(e){w=e.Direction,S=e.PageLink,C=e.DataKeyType,_=e.SharedModule,T=e,I=e.coerceBoolean,E=e.emptyPageData,M=e.isClientSideTelemetryType,k=e.TelemetrySubscriber,P=e.coerceNumber,D=e.AttributeScope,O=e.helpBaseUrl,A=e.DialogComponent,F=e.defaultLegendConfig,R=e.widgetType,B=e.NULL_UUID,N=e.DatasourceType,L=e.EntityType,V=e.ContentType,q=e.PageComponent,G=e.TbTableDatasource,z=e.HOUR,U=e.DeviceCredentialsType},function(e){j=e.CommonModule},function(e){H=e,W=e.NG_VALUE_ACCESSOR,$=e.Validators,K=e.NG_VALIDATORS,Y=e.FormBuilder,X=e.FormControl},function(e){Z=e.Observable,Q=e.ReplaySubject,J=e.shareReplay,ee=e.combineLatest,te=e.Subject,ne=e.fromEvent,ae=e.BehaviorSubject,ie=e.of,re=e.zip,oe=e.forkJoin,se=e.merge},function(e){le=e.takeUntil,pe=e.map,ce=e.distinctUntilChanged,de=e.debounceTime,ue=e.filter,me=e.tap,he=e.catchError,ge=e.publishReplay,fe=e.refCount,ye=e.take,ve=e.takeWhile,be=e.switchMap,xe=e.startWith,we=e.mergeMap},function(e){Se=e.isEqual,Ce=e.WINDOW,_e=e,Te=e.deleteNullProperties,Ie=e.DialogService,Ee=e.isNumber,Me=e.isString,ke=e.isDefinedAndNotNull,Pe=e.formatValue,De=e.isLiteralObject,Oe=e.deepClone,Ae=e.isUndefinedOrNull,Fe=e.isObject,Re=e.generateSecret,Be=e.camelCase,Ne=e.deepTrim},function(e){Le=e.MatDialog,Ve=e.MAT_DIALOG_DATA,qe=e},function(e){Ge=e.__decorate,ze=e.__extends},function(e){Ue=e,je=e.MatTooltip},function(e){He=e,We=e.TranslateService,$e=e.TranslateModule},function(e){Ke=e.SelectionModel},function(e){Ye=e},function(e){Xe=e},function(e){Ze=e.calculateAxisSize,Qe=e.measureAxisNameSize},function(e){Je=e},function(e){et=e},function(e){tt=e.JsonObjectEditDialogComponent},function(e){nt=e},function(e){at=e},function(e){it=e},function(e){rt=e.coerceBoolean},function(e){ot=e.ErrorStateMatcher}],execute:function(){e("getDefaultConfig",Ht);const st=e("jsonRequired",(e=>e.value?null:{required:!0}));var lt,pt,ct;e("GatewayLogLevel",lt),function(e){e.NONE="NONE",e.CRITICAL="CRITICAL",e.ERROR="ERROR",e.WARNING="WARNING",e.INFO="INFO",e.DEBUG="DEBUG",e.TRACE="TRACE"}(lt||e("GatewayLogLevel",lt={})),e("GatewayVersion",pt),function(e){e.v3_7_4="3.7.4",e.v3_7_3="3.7.3",e.v3_7_2="3.7.2",e.v3_7_0="3.7",e.v3_6_3="3.6.3",e.v3_6_2="3.6.2",e.v3_6_0="3.6",e.v3_5_2="3.5.2",e.Legacy="legacy"}(pt||e("GatewayVersion",pt={})),e("ConnectorType",ct),function(e){e.MQTT="mqtt",e.MODBUS="modbus",e.GRPC="grpc",e.OPCUA="opcua",e.BLE="ble",e.REQUEST="request",e.CAN="can",e.BACNET="bacnet",e.ODBC="odbc",e.REST="rest",e.SNMP="snmp",e.FTP="ftp",e.SOCKET="socket",e.XMPP="xmpp",e.OCPP="ocpp",e.CUSTOM="custom",e.KNX="knx"}(ct||e("ConnectorType",ct={}));const dt=e("GatewayConnectorDefaultTypesTranslatesMap",new Map([[ct.MQTT,"MQTT"],[ct.MODBUS,"MODBUS"],[ct.GRPC,"GRPC"],[ct.OPCUA,"OPCUA"],[ct.BLE,"BLE"],[ct.REQUEST,"REQUEST"],[ct.CAN,"CAN"],[ct.BACNET,"BACNET"],[ct.ODBC,"ODBC"],[ct.REST,"REST"],[ct.SNMP,"SNMP"],[ct.FTP,"FTP"],[ct.SOCKET,"SOCKET"],[ct.XMPP,"XMPP"],[ct.OCPP,"OCPP"],[ct.CUSTOM,"CUSTOM"],[ct.KNX,"KNX"]])),ut=e("ConnectorsTypesByVersion",new Map([[pt.v3_7_0,Object.values(ct)],[pt.Legacy,Object.values(ct).filter((e=>e!==ct.KNX))]]));var mt,ht;e("SocketEncoding",mt),function(e){e.UTF8="utf-8",e.HEX="hex",e.UTF16="utf-16",e.UTF32="utf-32",e.UTF16BE="utf-16-be",e.UTF16LE="utf-16-le",e.UTF32BE="utf-32-be",e.UTF32LE="utf-32-le"}(mt||e("SocketEncoding",mt={})),e("HTTPMethods",ht),function(e){e.DELETE="DELETE",e.GET="GET",e.HEAD="HEAD",e.OPTIONS="OPTIONS",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT"}(ht||e("HTTPMethods",ht={}));var gt={gateway:{active:"Active",address:"Address","address-required":"Address required","add-entry":"Add configuration","add-attribute":"Add attribute","add-attribute-update":"Add attribute update","add-attribute-request":"Add attribute request","add-key":"Add key","add-timeseries":"Add time series","add-mapping":"Add mapping","add-slave":"Add Slave",arguments:"Arguments","add-rpc-method":"Add method","add-rpc-request":"Add request","add-value":"Add argument","advanced-settings":"Advanced settings",application:"Application",bacnet:{"device-timeout":"Discovery timeout","network-number":"Network number","alt-responses-address":"Alternative responses address","apdu-length":"APDU Length","object-name":"Object Name","object-type":{"analog-input":"Analog Input","analog-output":"Analog Output","analog-value":"Analog Value","binary-input":"Binary Input","binary-output":"Binary Output","binary-value":"Binary Value"},"request-type":{label:"Request Type",write:"Write Property",read:"Read Property"},"property-id":{"present-value":"Present Value","status-flags":"Status Flags","cov-increment":"COV Increment","event-state":"Event State","out-of-service":"Out of Service",polarity:"Polarity","priority-array":"Priority Array","relinquish-default":"Relinquish Default","current-command-priority":"Current Command Priority","event-message-texts":"Event Message Texts","event-message-texts-config":"Event Message Texts Config","event-algorithm-inhibit-reference":"Event Algorithm Inhibit Reference","time-delay-normal":"Time Delay Normal"},segmentation:{label:"Segmentation",no:"None",both:"Both",transmit:"Transmit",receive:"Receive"}},baudrate:"Baudrate","buffer-size":"Buffer size","buffer-size-required":"Buffer size is required","buffer-size-range":"Buffer size should be greater than 0",bytesize:"Bytesize",boolean:"Boolean",bit:"Bit","bit-target-type":"Bit target type","delete-value":"Delete value","delete-argument":"Delete argument","delete-rpc-method":"Delete method","delete-rpc-request":"Delete request","delete-attribute-update":"Delete attribute update","delete-attribute-request":"Delete attribute request",advanced:"Advanced","add-device":"Add device","address-filter":"Address filter","address-filter-required":"Address filter is required","advanced-connection-settings":"Advanced connection settings","advanced-configuration-settings":"Advanced configuration settings",attributes:"Attributes","attribute-updates":"Attribute updates","attribute-on-platform":"Attribute on platform","attribute-requests":"Attribute requests","attribute-filter":"Attribute filter","attribute-filter-hint":"Filter for incoming attribute name from platform, supports regular expression.","attribute-filter-required":"Attribute filter required.","attribute-filter-pattern":"Attribute filter is not valid.","attribute-name-expression":"Attribute name expression","attribute-name-expression-required":"Attribute name expression required.","attribute-name-expression-hint":"Hint for Attribute name expression",basic:"Basic","byte-order":"Byte order","word-order":"Word order",broker:{connection:"Connection to broker",name:"Broker name","name-required":"Broker name required.","security-types":{anonymous:"Anonymous",basic:"Basic",certificates:"Certificates"}},certificate:"Certificate","CA-certificate-path":"Path to CA certificate file","path-to-CA-cert-required":"Path to CA certificate file is required.","change-connector-title":"Confirm connector change","change-connector-text":"Switching connectors will discard any unsaved changes. Continue?","checking-device-activity":"Checking device activity",command:"Docker commands","command-copied-message":"Docker command has been copied to clipboard",configuration:"Configuration","add-connector":"Add connector","connector-add":"Add new connector","connector-enabled":"Enable connector","connector-name":"Connector name","connector-name-required":"Connector name is required.","connector-type":"Connector type","connector-type-required":"Connector type is required.",connectors:"Connectors","connectors-config":"Connectors configuration","connectors-table-enabled":"Enabled","connectors-table-name":"Name","connectors-table-type":"Type","connectors-table-status":"Status","connectors-table-actions":"Actions","connectors-table-key":"Key","connectors-table-class":"Class","connection-timeout":"Connection timeout (s)","connect-attempt-time":"Connect attempt time (ms)","connect-attempt-count":"Connect attempt count","copy-username":"Copy username","copy-password":"Copy password","copy-client-id":"Copy client ID","connector-created":"Connector created","connector-updated":"Connector updated","create-new-one":"Create new one!","rpc-command-save-template":"Save Template","rpc-command-send":"Send","rpc-command-result":"Response","rpc-command-edit-params":"Edit parameters","gateway-configuration":"General Configuration","docker-label":"Use the following instruction to run IoT Gateway in Docker compose with credentials for selected device","install-docker-compose":"Use the instructions to download, install and setup docker compose",integer:"Integer",inactive:"Inactive",device:"Device",devices:"Devices","device-profile":"Device profile","device-info-settings":"Device info settings","device-info":{"entity-field":"Entity field",source:"Source",expression:"Value / Expression","expression-hint":"Show help",name:"Name","profile-name":"Profile name","device-name-expression":"Device name expression","device-name-expression-required":"Device name expression is required.","device-profile-expression-required":"Device profile expression is required."},"device-name-filter":"Device name filter","device-name-filter-hint":"This field supports regular expressions to filter incoming data by device name.","device-name-filter-required":"Device name filter is required.",details:"Details","delete-mapping-title":"Are you sure you want to delete the mapping related with '{{name}}'?","delete-mapping-description":"Be careful, after the confirmation mapping configuration and all related data will become unrecoverable.","delete-slave-title":"Are you sure you want to delete the server '{{name}}'?","delete-slave-description":"Be careful, after the confirmation server configuration and all related data will become unrecoverable.","delete-device-title":"Are you sure you want to delete the device '{{name}}'?","delete-device-description":"Be careful, after the confirmation the device configuration and all related data will become unrecoverable.",divider:"Divider","download-configuration-file":"Download configuration file","download-docker-compose":"Download docker-compose.yml for your gateway","enable-remote-logging":"Enable remote logging","ellipsis-chips-text":"+ {{count}} more","launch-gateway":"Launch gateway","launch-docker-compose":"Start the gateway using the following command in the terminal from folder with docker-compose.yml file","logs-configuration":"Logs configuration","create-new-gateway":"Create a new gateway","create-new-gateway-text":"Are you sure you want create a new gateway with name: '{{gatewayName}}'?","created-time":"Created time","configuration-delete-dialog-header":"Configurations will be deleted","configuration-delete-dialog-body":"Turning off Remote Configuration is possible only if there is physical access to the Gateway. All previous configurations will be deleted.<br><br> \nTo turn off configuration, enter gateway name below","configuration-delete-dialog-input":"Gateway name","configuration-delete-dialog-input-required":"Gateway name is mandatory","configuration-delete-dialog-confirm":"Turn Off","connector-duplicate-name":"Connector with such name already exists.","connection-type":"Connection type","connector-side":"Connector side","payload-type":"Payload type","platform-side":"Platform side",JSON:"JSON","JSON-hint":"Converter for this payload type processes MQTT messages in JSON format. It uses JSON Path expressions to extract vital details such as device names, device profile names, attributes, and time series from the message. And regular expressions to get device details from topics.",byte:"Byte",bytes:"Bytes","bytes-hint":"Converter for this payload type designed for binary MQTT payloads, this converter directly interprets binary data to retrieve device names and device profile names, along with attributes and time series, using specific byte positions for data extraction.",custom:"Custom","custom-hint":"This option allows you to use a custom converter for specific data tasks. You need to add your custom converter to the extension folder and enter its class name in the UI settings. Any keys you provide will be sent as configuration to your custom converter.","client-cert-path":"Path to client certificate file","path-to-client-cert-required":"Path to client certificate file is required.","client-id":"Client ID","data-conversion":"Data conversion","data-mapping":"Data mapping","data-mapping-hint":"Data mapping provides the capability to parse and convert the data received from a MQTT client in incoming messages into specific attributes and time series data keys.","opcua-data-mapping-hint":"Data mapping provides the capability to parse and convert the data received from a OPCUA server into specific data keys.",delete:"Delete configuration","delete-attribute":"Delete attribute","delete-key":"Delete key","delete-timeseries":"Delete time series",default:"Default","device-node":"Device node","device-node-required":"Device node required.","device-node-hint":"Path or identifier for device node on OPC UA server. Relative paths from it for attributes and time series can be used.","device-name":"Device name","device-profile-label":"Device profile","device-name-required":"Device name required","device-profile-required":"Device profile required","download-tip":"Download configuration file","drop-file":"Drop file here or",enable:"Enable",encoding:"Encoding","enable-subscription":"Enable subscription",extension:"Extension","extension-hint":"Put your converter classname in the field. Custom converter with such class should be in extension/mqtt folder.","extension-required":"Extension is required.","extension-configuration":"Extension configuration","extension-configuration-hint":"Configuration for converter. These arguments will be passed as a config to convert function.","fill-connector-defaults":"Fill configuration with default values","fill-connector-defaults-hint":"This property allows to fill connector configuration with default values on it's creation.","from-device-request-settings":"Input request parsing","from-device-request-settings-hint":"These fields support JSONPath expressions to extract a name from incoming message.","function-code":"Function code","function-codes":{"read-coils":"01 - Read Coils","read-discrete-inputs":"02 - Read Discrete Inputs","read-multiple-holding-registers":"03 - Read Multiple Holding Registers","read-input-registers":"04 - Read Input Registers","write-single-coil":"05 - Write Single Coil","write-single-holding-register":"06 - Write Single Holding Register","write-multiple-coils":"15 - Write Multiple Coils","write-multiple-holding-registers":"16 - Write Multiple Holding Registers"},ftp:{"tls-support":"TLS support",paths:"Paths","add-path":"Add path","pattern-type":"Pattern type","pattern-name":"Pattern name",path:"Path","delete-path-title":"Are you sure you want to delete the path - '{{name}}'?","delete-path-description":"Be careful, after the confirmation path configuration and all related data will become unrecoverable.","device-name-pattern":"Device name pattern","device-type-pattern":"Device type pattern","path-expression":"Path expression","file-data-view":"File data view","poll-period":"Poll period","read-mode":"Read mode","max-file-size":"Max file size",delimiter:"Delimiter","sorting-files":"Sorting files","writing-mode":"Writing mode","path-required":"Path is required.","path-pattern":"Path is invalid."},"to-device-response-settings":"Output request processing","to-device-response-settings-hint":"For these fields you can use the following variables and they will be replaced with actual values: ${deviceName}, ${attributeKey}, ${attributeValue}",gateway:"Gateway","gateway-exists":"Device with same name is already exists.","gateway-status":"Gateway status","gateway-name":"Gateway name","gateway-name-required":"Gateway name is required.","gateway-saved":"Gateway configuration successfully saved.","generate-client-id":"Generate Client ID",grpc:"GRPC","grpc-keep-alive-timeout":"Keep alive timeout (in ms)","grpc-keep-alive-timeout-required":"Keep alive timeout is required","grpc-keep-alive-timeout-min":"Keep alive timeout can not be less then 1","grpc-keep-alive-timeout-pattern":"Keep alive timeout is not valid","grpc-keep-alive":"Keep alive (in ms)","grpc-keep-alive-required":"Keep alive is required","grpc-keep-alive-min":"Keep alive can not be less then 1","grpc-keep-alive-pattern":"Keep alive is not valid","grpc-min-time-between-pings":"Min time between pings (in ms)","grpc-min-time-between-pings-required":"Min time between pings is required","grpc-min-time-between-pings-min":"Min time between pings can not be less then 1","grpc-min-time-between-pings-pattern":"Min time between pings is not valid","grpc-min-ping-interval-without-data":"Min ping interval without data (in ms)","grpc-min-ping-interval-without-data-required":"Min ping interval without data is required","grpc-min-ping-interval-without-data-min":"Min ping interval without data can not be less then 1","grpc-min-ping-interval-without-data-pattern":"Min ping interval without data is not valid","grpc-max-pings-without-data":"Max pings without data","grpc-max-pings-without-data-required":"Max pings without data is required","grpc-max-pings-without-data-min":"Max pings without data can not be less then 1","grpc-max-pings-without-data-pattern":"Max pings without data is not valid",info:"Info",identity:"Identity","inactivity-check-period-seconds":"Inactivity check period (in sec)","inactivity-check-period-seconds-required":"Inactivity check period is required","inactivity-check-period-seconds-min":"Inactivity check period can not be less then 1","inactivity-check-period-seconds-pattern":"Inactivity check period is not valid","inactivity-timeout-seconds":"Inactivity timeout (in sec)","inactivity-timeout-seconds-required":"Inactivity timeout is required","inactivity-timeout-seconds-min":"Inactivity timeout can not be less then 1","inactivity-timeout-seconds-pattern":"Inactivity timeout is not valid","unit-id":"Unit ID",host:"Host","host-required":"Host is required.",holding_registers:"Holding registers",coils_initializer:"Coils initializer",input_registers:"Input registers",discrete_inputs:"Discrete inputs","json-parse":"Not valid JSON.","json-required":"Field cannot be empty.","JSONPath-hint":"Supports constants and JSONPath expressions to extract data.",logs:{logs:"Logs",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds","date-format":"Date format","date-format-required":"Date format required","log-format":"Log format","log-type":"Log type","log-format-required":"Log format required",remote:"Remote logging","remote-logs":"Remote logs",local:"Local logging",level:"Log level","file-path":"File path","file-path-required":"File path required","saving-period":"Log saving period","saving-period-min":"Log saving period can not be less then 1","saving-period-required":"Log saving period required","backup-count":"Backup count","backup-count-min":"Backup count can not be less then 1","backup-count-required":"Backup count required"},"max-number-of-workers":"Max number of workers","max-number-of-workers-hint":"Maximal number of workers threads for converters \n(The amount of workers changes dynamically, depending on load) \nRecommended amount 50-150.","max-number-of-workers-required":"Max number of workers is required.","max-messages-queue-for-worker":"Max messages queue per worker","max-messages-queue-for-worker-hint":"Maximal messages count that will be in the queue \nfor each converter worker.","max-messages-queue-for-worker-required":"Max messages queue per worker is required.",method:"Method","method-name":"Method name","method-required":"Method name is required.","min-pack-send-delay":"Min pack send delay (in ms)","min-pack-send-delay-required":"Min pack send delay is required","min-pack-send-delay-min":"Min pack send delay can not be less then 10","min-pack-send-delay-pattern":"Min pack send delay is not valid",multiplier:"Multiplier",mode:"Mode","model-name":"Model name",modifier:"Modifier","modifier-invalid":"Modifier is not valid","mqtt-version":"MQTT version",name:"Name","name-required":"Name is required.","network-mask":"Network mask","no-attributes":"No attributes","no-attribute-updates":"No attribute updates","no-attribute-requests":"No attribute requests","no-connectors":"No connectors","no-data":"No configurations","no-gateway-found":"No gateway found.","no-gateway-matching":" '{{item}}' not found.","no-timeseries":"No time series","no-keys":"No keys","no-value":"No arguments","no-rpc-methods":"No RPC methods","no-rpc-requests":"No RPC requests","path-hint":"The path is local to the gateway file system","path-logs":"Path to log files","path-logs-required":"Path is required.",password:"Password","password-required":"Password is required.",parameters:"Parameters","permit-without-calls":"Keep alive permit without calls","property-id":"Property ID","poll-period":"Poll period (ms)","poll-period-error":"Poll period should be at least {{min}} (ms).",port:"Port","port-required":"Port is required.","port-limits-error":"Port should be number from {{min}} to {{max}}.","private-key-path":"Path to private key file","path-to-private-key-required":"Path to private key file is required.",parity:"Parity","product-code":"Product code","product-name":"Product name",raw:"Raw",retain:"Retain","retain-hint":"This flag tells the broker to store the message for a topic\nand ensures any new client subscribing to that topic\nwill receive the stored message.",remote:"Remote configuration","remote-logging-level":"Logging level","remove-entry":"Remove configuration","remote-shell":"Remote shell","remote-configuration":"Remote Configuration","request-expression":"Request expression","request-expression-required":"Request expression is required",retries:"Retries","retries-on-empty":"Retries on empty","retries-on-invalid":"Retries on invalid",response:"Response",rest:{"add-http-header":"Add HTTP header","no-http-headers":"No HTTP headers","delete-http-header":"Delete HTTP header","ssl-verify":"SSL verify",endpoint:"Endpoint","http-methods":"HTTP methods","http-method":"HTTP method","on-error":"On error","on-success":"On success",tries:"Tries","http-headers":"HTTP headers","allow-redirects":"Allow redirects","request-url-expression":"Request URL expression","response-attribute":"Response attribute","response-expected":"Expected","response-type":{default:"Default",const:"Constant",advanced:"Advanced"}},rpc:{title:"{{type}} Connector RPC parameters","templates-title":"Connector RPC Templates",methodFilter:"Method filter","method-name":"Method name",requestTopicExpression:"Request topic expression",responseTopicExpression:"Response topic expression",responseTimeout:"Response timeout",valueExpression:"Value expression",tag:"Tag",type:"Type",functionCode:"Function Code",objectsCount:"Objects Count",address:"Address",method:"Method",requestType:"Request Type",requestTimeout:"Request Timeout",objectType:"Object type",identifier:"Identifier",propertyId:"Property ID",methodRPC:"Method RPC name",withResponse:"With Response",characteristicUUID:"Characteristic UUID",methodProcessing:"Method Processing",nodeID:"Node ID",isExtendedID:"Is Extended ID",isFD:"Is FD",bitrateSwitch:"Bitrate Switch",dataInHEX:"Data In HEX",dataLength:"Data Length",dataByteorder:"Data Byte Order",dataBefore:"Data Before",dataAfter:"Data After",dataExpression:"Data Expression",oid:"OID","add-oid":"Add OID","add-header":"Add header","add-security":"Add security",remove:"Remove",requestFilter:"Request Filter",requestUrlExpression:"Request URL Expression",httpMethod:"HTTP Method",timeout:"Timeout",tries:"Tries",httpHeaders:"HTTP Headers","header-name":"Header name",hint:{"modbus-response-reading":"RPC response will return all subtracted values from all connected devices when the reading functions are selected.","modbus-writing-functions":"RPC will write a filled value to all connected devices when the writing functions are selected.","opc-method":"A filled method name is the OPC-UA method that will processed on the server side (make sure your node has the requested method)."},"security-name":"Security name",value:"Value",security:"Security",responseValueExpression:"Response Value Expression",requestValueExpression:"Request Value Expression",arguments:"Arguments","add-argument":"Add argument","write-property":"Write property","read-property":"Read property","analog-output":"Analog output","analog-input":"Analog input","binary-output":"Binary output","binary-input":"Binary input","binary-value":"Binary value","analog-value":"Analog value",write:"Write",read:"Read",scan:"Scan",oids:"OIDS",set:"Set",multiset:"Multiset",get:"Get","bulk-walk":"Bulk walk",table:"Table","multi-get":"Multiget","get-next":"Get next","bulk-get":"Bulk get",walk:"Walk","save-template":"Save template","template-name":"Template name","template-name-required":"Template name is required.","template-name-duplicate":"Template with such name already exists, it will be updated.",command:"Command",params:"Params","json-value-invalid":"JSON value has an invalid format"},"rpc-methods":"RPC methods","rpc-requests":"RPC requests",request:{"connect-request":"Connect request","disconnect-request":"Disconnect request","attribute-request":"Attribute request","attribute-update":"Attribute update","rpc-connection":"RPC command"},"request-type":"Request type","request-timeout":"Request timeout (ms)","requests-mapping":"Requests mapping","requests-mapping-hint":"MQTT Connector requests allows you to connect, disconnect, process attribute requests from the device, handle attribute updates on the server and RPC processing configuration.","request-topic-expression":"Request topic expression","request-client-certificate":"Request client certificate","request-topic-expression-required":"Request topic expression is required.","response-timeout":"Response timeout","response-timeout-required":"Response timeout is required.","response-timeout-limits-error":"Timeout must be more then {{min}} ms.","response-topic-Qos":"Response topic QoS","response-topic-Qos-hint":"MQTT Quality of Service (QoS) is an agreement between the message sender and receiver that defines the level of delivery guarantee for a specific message.","response-topic-expression":"Response topic expression","response-topic-expression-required":"Response topic expression is required.","response-value-expression":"Response value expression","response-value-expression-required":"Response value expression is required.","vendor-name":"Vendor name","vendor-url":"Vendor URL",value:"Value",values:"Values","value-required":"Value is required.","value-expression":"Value expression","value-expression-required":"Value expression is required.","value-expression-pattern":"Value expression is not valid.","with-response":"With response","without-response":"Without response",other:"Other",socket:"Socket","save-tip":"Save configuration file","scan-period":"Scan period (ms)","scan-period-error":"Scan period should be at least {{min}} (ms).","sub-check-period":"Subscription check period (ms)","sub-check-period-error":"Subscription check period should be at least {{min}} (ms).",security:"Security","security-policy":"Security policy","security-type":"Security type","security-types":{"access-token":"Access Token","username-password":"Username and Password",tls:"TLS","tls-access-token":"TLS + Access Token","tls-private-key":"TLS + Private Key"},"select-connector":"Select connector to display config","send-change-data":"Send data only on change","send-data-to-platform":"Send data to platform","send-data-on-change":"Send data only on change","send-change-data-hint":"The values will be saved to the database only if they are different from the corresponding values in the previous converted message. This functionality applies to both attributes and time series in the converter output.",server:"Server","server-hostname":"Server hostname","server-slave":"Server (Slave)","servers-slaves":"Servers (Slaves)","server-port":"Server port","server-url":"Server endpoint url","server-connection":"Server Connection","server-config":"Server configuration","server-slave-config":"Server (Slave) configuration","server-url-required":"Server endpoint url is required.",stopbits:"Stopbits",strict:"Strict",set:"Set","show-map":"Show map",statistics:{entry:"Statistic entry","custom-send-period":"Custom send period (in sec)","custom-send-period-pattern":"Custom send period is not valid","custom-send-period-min":"Custom send period can not be less then 60","custom-send-period-required":"Custom send period is required","create-command":"Create command",attributes:"Attributes","name-already-exists":"Attribute name already exists.",telemetry:"Telemetry","storage-message-count":"Storage message count","messages-from-platform":"Messages from platform","pushed-datapoints":"Pushed datapoints","messages-pulled-from-storage":"Messages pulled from storage","messages-pushed-to-platform":"Messages pushed to platform","messages-sent-to-platform":"Messages sent to platform","process-cpu-usage":"Gateway process CPU usage",memory:"Gateway process memory usage","machine-resources":"Machine resources","free-disk":"Free disk",statistic:"Statistic",statistics:"Statistics","general-statistics":"General statistics","custom-statistics":"Custom statistics","copy-message":"Copy message","statistic-commands-empty":'No configured statistic keys found. You can configure them in "Statistics" tab in general configuration.',"statistics-button":"Go to configuration",commands:"Commands",name:"Time series name","time-series-name-already-exists":"Time series name already exists.","send-period":"Statistic send period (in sec)","send-period-required":"Statistic send period is required","send-period-min":"Statistic send period can not be less then 60","send-period-pattern":"Statistic send period is not valid","check-connectors-configuration":"Check connectors configuration (in sec)",messages:"Messages","max-payload-size-bytes":"Max payload size in bytes","max-payload-size-bytes-required":"Max payload size in bytes is required","max-payload-size-bytes-min":"Max payload size in bytes can not be less then 100","max-payload-size-bytes-pattern":"Max payload size in bytes is not valid","min-pack-size-to-send":"Min packet size to send","min-pack-size-to-send-required":"Min packet size to send is required","min-pack-size-to-send-min":"Min packet size to send can not be less then 100","min-pack-size-to-send-pattern":"Min packet size to send is not valid","no-config-commands-found":"No configuration commands found","delete-command":"Delete command '{{command}}'?","delete-command-data":"All command data will be deleted.","edit-command":"Edit command","change-command-title":"Discard command change","change-command-text":"Cancelling command edit will discard any unsaved changes. Continue?","no-command-found":"No command found","no-commands-matching":"No command matching '{{command}}' were found.","check-connectors-configuration-required":"Check connectors configuration is required","check-connectors-configuration-min":"Check connectors configuration can not be less then 1","check-connectors-configuration-pattern":"Check connectors configuration is not valid","install-cmd":"Install command",add:"Add command",timeout:"Timeout (in sec)","timeout-required":"Timeout is required","timeout-min":"Timeout can not be less then 1","timeout-pattern":"Timeout is not valid","time-series-name-required":"Time series name is required","time-series-name-pattern":"Time series name is not valid",command:"Command","command-required":"Command is required","command-pattern":"Command is not valid",remove:"Remove command"},storage:"Storage","storage-max-files":"Maximum number of files","storage-max-files-min":"Minimum number is 1.","storage-max-files-pattern":"Number is not valid.","storage-max-files-required":"Number is required.","storage-max-records":"Maximum records in storage","storage-max-records-min":"Minimum number of records is 1.","storage-max-records-pattern":"Number is not valid.","storage-max-records-required":"Maximum records is required.","storage-read-record-count":"Read record count in storage","storage-read-record-count-min":"Minimum number of records is 1.","storage-read-record-count-pattern":"Number is not valid.","storage-read-record-count-required":"Read record count is required.","storage-max-read-record-count":"Max read record count in storage","storage-max-read-record-count-min":"Minimum number of records is 1.","storage-max-read-record-count-pattern":"Number is not valid.","storage-max-read-record-count-required":"Max Read record count is required.","storage-data-folder-path":"Data folder path","storage-data-folder-path-required":"Data folder path is required.","storage-pack-size":"Maximum event pack size","storage-pack-size-min":"Minimum number is 1.","storage-pack-size-pattern":"Number is not valid.","storage-pack-size-required":"Maximum event pack size is required.","storage-path":"Storage path","storage-path-required":"Storage path is required.","storage-type":"Storage type","storage-types":{"file-storage":"File storage","memory-storage":"Memory storage",sqlite:"SQLITE"},suffix:{s:"s",ms:"ms",mb:"MB"},"report-strategy":{label:"Report strategy","on-change":"On value change","on-report-period":"On report period","on-change-or-report-period":"On value change or report period","report-period":"Report period","on-received":"On received"},"source-type":{msg:"Message",topic:"Topic",const:"Constant",identifier:"Identifier",path:"Path",expression:"Expression",request:"From request"},"workers-settings":"Workers settings",thingsboard:"ThingsBoard",general:"General",timeseries:"Time series",key:"Key",keys:"Keys","key-required":"Key is required.","thingsboard-host":"Platform host","thingsboard-host-required":"Host is required.","thingsboard-port":"Platform port","thingsboard-port-max":"Maximum port number is 65535.","thingsboard-port-min":"Minimum port number is 1.","thingsboard-port-pattern":"Port is not valid.","thingsboard-port-required":"Port is required.",tidy:"Tidy","tidy-tip":"Tidy config JSON",timeout:"Timeout","timeout-error":"Timeout should be at least {{min}} (ms).","title-connectors-json":"Connector {{typeName}} configuration",type:"Type","topic-filter":"Topic filter","topic-required":"Topic filter is required.","tls-path-ca-certificate":"Path to CA certificate on gateway","tls-path-client-certificate":"Path to client certificate on gateway","tls-connection":"TLS Connection","master-connections":"Master Connections","method-filter":"Method filter","method-filter-hint":"Regular expression to filter incoming RPC method from platform.","method-filter-required":"Method filter is required.","messages-ttl-check-in-hours":"Messages TTL check in hours","messages-ttl-check-in-hours-required":"Messages TTL check in hours is required.","messages-ttl-check-in-hours-min":"Min number is 1.","messages-ttl-check-in-hours-pattern":"Number is not valid.","messages-ttl-in-days":"Messages TTL in days","messages-ttl-in-days-required":"Messages TTL in days is required.","messages-ttl-in-days-min":"Min number is 1.","messages-ttl-in-days-pattern":"Number is not valid.","mqtt-qos":"QoS","mqtt-qos-required":"QoS is required","mqtt-qos-range":"QoS values range is from 0 to 1",qos:{"at-most-once":"0 - At most once","at-least-once":"1 - At least once","exactly-once":"2 - Exactly once"},"objects-count":"Objects count","object-id":"Object ID","objects-count-required":"Objects count is required","wait-after-failed-attempts":"Wait after failed attempts (ms)","tls-path-private-key":"Path to private key on gateway","toggle-fullscreen":"Toggle fullscreen","transformer-json-config":"Configuration JSON*","update-config":"Add/update configuration JSON",username:"Username","username-required":"Username is required.","unit-id-required":"Unit ID is required.","vendor-id":"Vendor ID","write-coil":"Write Coil","write-coils":"Write Coils","write-register":"Write Register","write-registers":"Write Registers",hints:{"enable-general-statistics":"Enables gateway statistics (machine, storage, connectors).","enable-custom-statistics":"Enables collecting statistics using custom commands.","buffer-size":"Buffer size for received data blocks.",encoding:"Encoding used for writing received string data to storage.",method:"Name for method on a platform.","modbus-master":"Configuration sections for connecting to Modbus servers and reading data from them.","modbus-server":"Configuration section for the Modbus server, storing data and sending updates to the platform when changes occur or at fixed intervals.","remote-configuration":"Enables remote configuration and management of the gateway","remote-shell":"Enables remote control of the operating system with the gateway from the Remote Shell widget",host:"Hostname or IP address of platform server",port:"Port of MQTT service on platform server",token:"Access token for the gateway from platform server","client-id":"MQTT client id for the gateway form platform server",username:"MQTT username for the gateway form platform server",password:"MQTT password for the gateway form platform server","ca-cert":"Path to CA certificate file","date-form":"Date format in log message","object-id-required":"Object ID is required","vendor-id-required":"Vendor ID is required","data-folder":"Path to the folder that will contain data (Relative or Absolute)","log-format":"Log message format","remote-log":"Enables remote logging and logs reading from the gateway","backup-count":"If backup count is > 0, when a rollover is done, no more than backup count files are kept - the oldest ones are deleted",storage:"Provides configuration for saving incoming data before it is sent to the platform","max-file-count":"Maximum number of files that will be created","max-read-count":"Number of messages to retrieve from the storage and send to platform","max-records":"Maximum count of records that will be stored in one file","read-record-count":"Number of messages to retrieve from the storage and send to platform","max-records-count":"Maximum number of data entries in storage before sending to platform","ttl-check-hour":"How often will the Gateway check data for obsolescence","ttl-messages-day":"Maximum number of days that the storage will retain data","username-required-with-password":"Username required if password is specified",commands:"Commands for collecting additional statistic",attribute:"Statistic telemetry key",timeout:"Timeout for command executing",command:"The result of the command execution, will be used as the value for telemetry","check-device-activity":"Enables monitor the activity of each connected device","inactivity-timeout":"Time after whose the gateway will disconnect device","inactivity-period":"Periodicity of device activity check","minimal-pack-delay":"Delay between sending packs of messages (Decreasing this setting results in increased CPU usage)",qos:"Quality of Service in MQTT messaging (0 - at most once, 1 - at least once)","server-port":"Network port on which GRPC server will listen for incoming connections.","grpc-keep-alive-timeout":"Maximum time the server should wait for a keepalive ping response before considering the connection dead.","grpc-keep-alive":"Duration between two successive keepalive ping messages when there is no active RPC call.","grpc-min-time-between-pings":"Minimum amount of time the server should wait between sending keepalive ping messages","grpc-max-pings-without-data":"Maximum number of keepalive ping messages that the server can send without receiving any data before it considers the connection dead.","grpc-min-ping-interval-without-data":"Minimum amount of time the server should wait between sending keepalive ping messages when there is no data being sent or received.","permit-without-calls":"Allow server to keep the GRPC connection alive even when there are no active RPC calls.","path-in-os":"Path in gateway os.",memory:"Your data will be stored in the in-memory queue, it is a fastest but no persistence guarantee.",file:"Your data will be stored in separated files and will be saved even after the gateway restart.",sqlite:"Your data will be stored in file based database. And will be saved even after the gateway restart.","opc-timeout":"Timeout in milliseconds for connecting to OPC-UA server.","security-policy":"Security Policy defines the security mechanisms to be applied.","install-cmd":"Packages that will be installed for command executing.","scan-period":"Period in milliseconds to rescan the server.","sub-check-period":"Period to check the subscriptions in the OPC-UA server.","enable-subscription":"If true - the gateway will subscribe to interesting nodes and wait for data update and if false - the gateway will rescan OPC-UA server every scanPeriodInMillis.","show-map":"Show nodes on scanning.","method-name":"Name of method on OPC-UA server.",arguments:"Arguments for the method (will be overwritten by arguments from the RPC request).","min-pack-size-to-send":"Minimum package size for sending.","max-payload-size-bytes":"Maximum package size in bytes","poll-period":"Period in milliseconds to read data from nodes.","poll-period-required":"Poll period is required.","report-period-required":"Report period is required.","report-period-range":"Report period must be greater than 100.","timeout-pattern":"Timeout is not valid",ftp:{delimiter:"Delimiter is used for csv and txt files.","file-data-view":"Will be used to identify data format in  csv or txt files.","read-mode":"Will be used for txt and csv files.","device-name-pattern-required":"Device name pattern is required.","device-type-pattern-required":"Device type pattern is required.","path-expression-required":"Path expression is required.","tls-support":"Verify whether TLS support is available on the server.","max-file-size":"The max file size in MB that will be read (if file size is more than 5 MB, it will be skipped).","sorting-files":"This is how the found files in path will be appended to the array.","path-expression":"JSON-path expression that is used for finding specific files.","path-required":"Path is required.","path-pattern":"Path is not valid."},rest:{"endpoint-required":"Endpoint is required.","endpoint-pattern":"Endpoint is not valid.","device-name-filter-required":"Device name filter is required.","device-name-filter-pattern":"Device name filter is not valid.","request-url-expression-required":"Request URL expression is required.","request-url-expression-pattern":"Request URL expression is not valid.","value-expression-required":"Value expression is required.","value-expression-pattern":"Value expression is not valid.","method-filter-required":"Method filter is required.","method-filter-pattern":"Method filter is not valid.","scope-type":"Attribute scope on platform.","tries-min":"Request tries number should be greater than 0.","tries-pattern":"Request tries is invalid.","http-methods-required":"HTTP methods are required.",host:"Domain or IP address of the server.",port:"Port on the server for listening clients connection.","ssl-verify":"Enable SSL certificate verification.",cert:"Path to the certificate file.",key:"Path to the private key file",endpoint:"Endpoint path on the server.","http-methods":"HTTP methods allowed for endpoint.","http-method":"Request to external URL HTTP method.",JSON:"Converter for this payload type processes REST messages in JSON format. It uses JSON Path expressions to extract vital details such as device names, device profile names, attributes, and time series from the request body.",extension:"Custom converter classname. File with this class should be in extension/rest folder.","response-attribute-required":"Response attribute is required.","response-attribute-pattern":"Response attribute is not valid.","update-ssl":"Verify SSL certificate on the external server.","attribute-filter":"Filter for incoming attribute name from platform, support regular expression.","value-expression":"Used to create request body for request to external server. Supports ${deviceName}, ${deviceType}, ${attributeName}, ${attributeValue} variables.","attribute-url-expression":"Used to create request URL for request to external server. Supports ${deviceName}, ${deviceType}, ${attributeName}, ${attributeValue} variables.","method-filter":"Filter for RPC requests from the platform based on the method name. Supports regular expressions.","attribute-name-expression-required":"Attribute name expression is required.","attribute-name-expression-pattern":"Attribute name expression is not valid.","attribute-filter-required":"Attribute filter is required.","attribute-filter-pattern":"Attribute filter is not valid."},socket:{"attribute-on-platform-required":"Attribute on platform is required","attribute-requests-type":"The type of requested attribute can be “shared” or “client.“","with-response":"Boolean flag that specifies whether to send a response back to platform.","key-telemetry":"Name for telemetry on platform.","key-attribute":"Name for attribute on platform."},modbus:{"bit-target-type":"The response type can be either an integer (1/0) or a boolean (True/False).",bit:"Specify the index of the bit to read from the array, or leave it blank to read the entire array.","max-bit":"The bit value must not exceed the objects count.","framer-type":"Type of a framer (Socket, RTU, or ASCII), if needed.",host:"Hostname or IP address of Modbus server.",port:"Modbus server port for connection.","unit-id":"Modbus slave ID.","connection-timeout":"Connection timeout (in seconds) for the Modbus server.","byte-order":"Byte order for reading data.","word-order":"Word order when reading multiple registers.",retries:"Retrying data transmission to the master. Acceptable values: true or false.","retries-on-empty":"Retry sending data to the master if the data is empty.","retries-on-invalid":"Retry sending data to the master if it fails.","poll-period":"Period in milliseconds to check attributes and telemetry on the slave.","connect-attempt-time":"A waiting period in milliseconds before establishing a connection to the master.","connect-attempt-count":"The number of connection attempts made through the gateway.","wait-after-failed-attempts":"A waiting period in milliseconds before attempting to send data to the master.","serial-port":"Serial port for connection.",baudrate:"Baud rate for the serial device.",stopbits:"The number of stop bits sent after each character in a message to indicate the end of the byte.",bytesize:"The number of bits in a byte of serial data. This can be one of 5, 6, 7, or 8.",parity:"The type of checksum used to verify data integrity. Options: (E)ven, (O)dd, (N)one.",strict:"Use inter-character timeout for baudrates ≤ 19200.","objects-count":"Depends on the selected type.",address:"Register address to verify.",key:"Key to be used as the attribute key for the platform instance.",method:"Method name to be used for the platform instance.","data-keys":"For more information about function codes and data types click on help icon",modifier:"The retrieved value will be adjusted (by multiplying or dividing it) based on the specified modifier value."},bacnet:{"object-id":"The gateway object identifier in the BACnet network.","vendor-id":"The gateway vendor identifier in the BACnet network","apdu-length":"Maximal length of the APDU.",segmentation:"Segmentation type for transmitting large BACnet messages.","key-object-id":"Object id in the BACnet device.","property-id":"Property id in the BACnet device.","request-type":"“writeProperty” to write data and “readProperty” to read data.","request-timeout":"Timeout to wait the response from the BACnet device, milliseconds.","device-timeout":"Period of time when the connector will try to discover BACnet devices.","network-number":"Identifier of the network segment."}}}},ft={"add-entry":"إضافة تكوين",advanced:"متقدم","checking-device-activity":"فحص نشاط الجهاز",command:"أوامر Docker","command-copied-message":"تم نسخ أمر Docker إلى الحافظة",configuration:"التكوين","connector-add":"إضافة موصل جديد","connector-enabled":"تمكين الموصل","connector-name":"اسم الموصل","connector-name-required":"اسم الموصل مطلوب.","connector-type":"نوع الموصل","connector-type-required":"نوع الموصل مطلوب.",connectors:"الموصلات","connectors-config":"تكوينات الموصلات","connectors-table-enabled":"ممكّن","connectors-table-name":"الاسم","connectors-table-type":"النوع","connectors-table-status":"الحالة","connectors-table-actions":"الإجراءات","connectors-table-key":"المفتاح","connectors-table-class":"الفئة","rpc-command-send":"إرسال","rpc-command-result":"الاستجابة","rpc-command-edit-params":"تحرير المعلمات","gateway-configuration":"تكوين عام","docker-label":"استخدم التعليمات التالية لتشغيل IoT Gateway في Docker compose مع بيانات اعتماد للجهاز المحدد","install-docker-compose":"استخدم التعليمات لتنزيل وتثبيت وإعداد docker compose","download-configuration-file":"تنزيل ملف التكوين","download-docker-compose":"تنزيل docker-compose.yml لبوابتك","launch-gateway":"تشغيل البوابة","launch-docker-compose":"بدء تشغيل البوابة باستخدام الأمر التالي في الطرفية من المجلد الذي يحتوي على ملف docker-compose.yml","create-new-gateway":"إنشاء بوابة جديدة","create-new-gateway-text":"هل أنت متأكد أنك تريد إنشاء بوابة جديدة باسم: '{{gatewayName}}'؟","created-time":"وقت الإنشاء","configuration-delete-dialog-header":"سيتم حذف التكوينات","configuration-delete-dialog-body":"يمكن تعطيل التكوين عن بُعد فقط إذا كان هناك وصول جسدي إلى البوابة. ستتم حذف جميع التكوينات السابقة.<br><br> \n لتعطيل التكوين، أدخل اسم البوابة أدناه","configuration-delete-dialog-input":"اسم البوابة","configuration-delete-dialog-input-required":"اسم البوابة إلزامي","configuration-delete-dialog-confirm":"إيقاف التشغيل",delete:"حذف التكوين","download-tip":"تنزيل ملف التكوين","drop-file":"أفلق الملف هنا أو",gateway:"البوابة","gateway-exists":"الجهاز بنفس الاسم موجود بالفعل.","gateway-name":"اسم البوابة","gateway-name-required":"اسم البوابة مطلوب.","gateway-saved":"تم حفظ تكوين البوابة بنجاح.",grpc:"GRPC","grpc-keep-alive-timeout":"مهلة البقاء على قيد الحياة (بالمللي ثانية)","grpc-keep-alive-timeout-required":"مهلة البقاء على قيد الحياة مطلوبة","grpc-keep-alive-timeout-min":"مهلة البقاء على قيد الحياة لا يمكن أن تكون أقل من 1","grpc-keep-alive-timeout-pattern":"مهلة البقاء على قيد الحياة غير صالحة","grpc-keep-alive":"البقاء على قيد الحياة (بالمللي ثانية)","grpc-keep-alive-required":"البقاء على قيد الحياة مطلوب","grpc-keep-alive-min":"البقاء على قيد الحياة لا يمكن أن يكون أقل من 1","grpc-keep-alive-pattern":"البقاء على قيد الحياة غير صالح","grpc-min-time-between-pings":"الحد الأدنى للوقت بين البينغات (بالمللي ثانية)","grpc-min-time-between-pings-required":"الحد الأدنى للوقت بين البينغات مطلوب","grpc-min-time-between-pings-min":"الحد الأدنى للوقت بين البينغات لا يمكن أن يكون أقل من 1","grpc-min-time-between-pings-pattern":"الحد الأدنى للوقت بين البينغات غير صالح","grpc-min-ping-interval-without-data":"الحد الأدنى لفاصل البينغ بدون بيانات (بالمللي ثانية)","grpc-min-ping-interval-without-data-required":"الحد الأدنى لفاصل البينغ بدون بيانات مطلوب","grpc-min-ping-interval-without-data-min":"الحد الأدنى لفاصل البينغ بدون بيانات لا يمكن أن يكون أقل من 1","grpc-min-ping-interval-without-data-pattern":"الحد الأدنى لفاصل البينغ بدون بيانات غير صالح","grpc-max-pings-without-data":"الحد الأقصى لعدد البينغات بدون بيانات","grpc-max-pings-without-data-required":"الحد الأقصى لعدد البينغات بدون بيانات مطلوب","grpc-max-pings-without-data-min":"الحد الأقصى لعدد البينغات بدون بيانات لا يمكن أن يكون أقل من 1","grpc-max-pings-without-data-pattern":"الحد الأقصى لعدد البينغات بدون بيانات غير صالح","inactivity-check-period-seconds":"فترة فحص الخمول (بالثواني)","inactivity-check-period-seconds-required":"فترة فحص الخمول مطلوبة","inactivity-check-period-seconds-min":"فترة فحص الخمول لا يمكن أن تكون أقل من 1","inactivity-check-period-seconds-pattern":"فترة فحص الخمول غير صالحة","inactivity-timeout-seconds":"فترة الخمول (بالثواني)","inactivity-timeout-seconds-required":"فترة الخمول مطلوبة","inactivity-timeout-seconds-min":"فترة الخمول لا يمكن أن تكون أقل من 1","inactivity-timeout-seconds-pattern":"فترة الخمول غير صالحة","json-parse":"JSON غير صالح.","json-required":"الحقل لا يمكن أن يكون فارغًا.",logs:{logs:"السجلات",days:"أيام",hours:"ساعات",minutes:"دقائق",seconds:"ثواني","date-format":"تنسيق التاريخ","date-format-required":"تنسيق التاريخ مطلوب","log-format":"تنسيق السجل","log-type":"نوع السجل","log-format-required":"تنسيق السجل مطلوب",remote:"التسجيل عن بُعد","remote-logs":"السجلات عن بُعد",local:"التسجيل المحلي",level:"مستوى السجل","file-path":"مسار الملف","file-path-required":"مسار الملف مطلوب","saving-period":"فترة حفظ السجل","saving-period-min":"فترة حفظ السجل لا يمكن أن تكون أقل من 1","saving-period-required":"فترة حفظ السجل مطلوبة","backup-count":"عدد النسخ الاحتياطية","backup-count-min":"عدد النسخ الاحتياطية لا يمكن أن يكون أقل من 1","backup-count-required":"عدد النسخ الاحتياطية مطلوب"},"min-pack-send-delay":"الحد الأدنى لتأخير إرسال الحزمة (بالمللي ثانية)","min-pack-send-delay-required":"الحد الأدنى لتأخير إرسال الحزمة مطلوب","min-pack-send-delay-min":"لا يمكن أن يكون الحد الأدنى لتأخير إرسال الحزمة أقل من 0","no-connectors":"لا توجد موصلات","no-data":"لا توجد تكوينات","no-gateway-found":"لم يتم العثور على بوابة.","no-gateway-matching":"'{{item}}' غير موجود.","path-logs":"مسار إلى ملفات السجل","path-logs-required":"المسار مطلوب.","permit-without-calls":"البقاء على الحياة يسمح بدون مكالمات",remote:"التكوين عن بُعد","remote-logging-level":"مستوى التسجيل","remove-entry":"إزالة التكوين","remote-shell":"قشرة عن بُعد","remote-configuration":"التكوين عن بُعد",other:"آخر","save-tip":"حفظ ملف التكوين","security-type":"نوع الأمان","security-types":{"access-token":"رمز الوصول","username-password":"اسم المستخدم وكلمة المرور",tls:"TLS","tls-access-token":"TLS + رمز الوصول","tls-private-key":"TLS + المفتاح الخاص"},"server-port":"منفذ الخادم",statistics:{statistic:"إحصائية",statistics:"الإحصائيات","statistic-commands-empty":"لا تتوفر إحصائيات",commands:"الأوامر","send-period":"فترة إرسال الإحصائيات (بالثواني)","send-period-required":"فترة إرسال الإحصائيات مطلوبة","send-period-min":"لا يمكن أن تكون فترة إرسال الإحصائيات أقل من 60","send-period-pattern":"فترة إرسال الإحصائيات غير صالحة","check-connectors-configuration":"فترة فحص تكوين الموصلات (بالثواني)","check-connectors-configuration-required":"فترة فحص تكوين الموصلات مطلوبة","check-connectors-configuration-min":"لا يمكن أن تكون فترة فحص تكوين الموصلات أقل من 1","check-connectors-configuration-pattern":"فترة فحص تكوين الموصلات غير صالحة",add:"إضافة أمر",timeout:"المهلة","timeout-required":"المهلة مطلوبة","timeout-min":"لا يمكن أن تكون المهلة أقل من 1","timeout-pattern":"المهلة غير صالحة","attribute-name":"اسم السمة","attribute-name-required":"اسم السمة مطلوب",command:"الأمر","command-required":"الأمر مطلوب","command-pattern":"الأمر غير صالح",remove:"إزالة الأمر"},storage:"التخزين","storage-max-file-records":"السجلات القصوى في الملف","storage-max-files":"الحد الأقصى لعدد الملفات","storage-max-files-min":"الحد الأدنى هو 1.","storage-max-files-pattern":"العدد غير صالح.","storage-max-files-required":"العدد مطلوب.","storage-max-records":"السجلات القصوى في التخزين","storage-max-records-min":"الحد الأدنى لعدد السجلات هو 1.","storage-max-records-pattern":"العدد غير صالح.","storage-max-records-required":"السجلات القصوى مطلوبة.","storage-read-record-count":"عدد قراءة السجلات في التخزين","storage-read-record-count-min":"الحد الأدنى لعدد السجلات هو 1.","storage-read-record-count-pattern":"العدد غير صالح.","storage-read-record-count-required":"عدد قراءة السجلات مطلوب.","storage-max-read-record-count":"الحد الأقصى لعدد قراءة السجلات في التخزين","storage-max-read-record-count-min":"الحد الأدنى لعدد السجلات هو 1.","storage-max-read-record-count-pattern":"العدد غير صالح.","storage-max-read-record-count-required":"عدد القراءة القصوى مطلوب.","storage-data-folder-path":"مسار مجلد البيانات","storage-data-folder-path-required":"مسار مجلد البيانات مطلوب.","storage-pack-size":"الحد الأقصى لحجم حزمة الحدث","storage-pack-size-min":"الحد الأدنى هو 1.","storage-pack-size-pattern":"العدد غير صالح.","storage-pack-size-required":"الحجم الأقصى لحزمة الحدث مطلوب.","storage-path":"مسار التخزين","storage-path-required":"مسار التخزين مطلوب.","storage-type":"نوع التخزين","storage-types":{"file-storage":"تخزين الملفات","memory-storage":"تخزين الذاكرة",sqlite:"SQLITE"},thingsboard:"ثينغزبورد",general:"عام","thingsboard-host":"مضيف ثينغزبورد","thingsboard-host-required":"المضيف مطلوب.","thingsboard-port":"منفذ ثينغزبورد","thingsboard-port-max":"الحد الأقصى لرقم المنفذ هو 65535.","thingsboard-port-min":"الحد الأدنى لرقم المنفذ هو 1.","thingsboard-port-pattern":"المنفذ غير صالح.","thingsboard-port-required":"المنفذ مطلوب.",tidy:"ترتيب","tidy-tip":"ترتيب تكوين JSON","title-connectors-json":"تكوين موصل {{typeName}}","tls-path-ca-certificate":"المسار إلى شهادة CA على البوابة","tls-path-client-certificate":"المسار إلى شهادة العميل على البوابة","messages-ttl-check-in-hours":"فحص TTL الرسائل بالساعات","messages-ttl-check-in-hours-required":"يجب تحديد فحص TTL الرسائل بالساعات.","messages-ttl-check-in-hours-min":"الحد الأدنى هو 1.","messages-ttl-check-in-hours-pattern":"الرقم غير صالح.","messages-ttl-in-days":"TTL الرسائل بالأيام","messages-ttl-in-days-required":"يجب تحديد TTL الرسائل بالأيام.","messages-ttl-in-days-min":"الحد الأدنى هو 1.","messages-ttl-in-days-pattern":"الرقم غير صالح.","mqtt-qos":"جودة الخدمة (QoS)","mqtt-qos-required":"جودة الخدمة (QoS) مطلوبة","mqtt-qos-range":"تتراوح قيم جودة الخدمة (QoS) من 0 إلى 1","tls-path-private-key":"المسار إلى المفتاح الخاص على البوابة","toggle-fullscreen":"تبديل وضع ملء الشاشة","transformer-json-config":"تكوين JSON*","update-config":"إضافة/تحديث تكوين JSON",hints:{"remote-configuration":"يمكنك تمكين التكوين وإدارة البوابة عن بُعد","remote-shell":"يمكنك تمكين التحكم البعيد في نظام التشغيل مع البوابة من عنصر واجهة المستخدم قشرة عن بُعد",host:"اسم المضيف أو عنوان IP لخادم ثينغزبورد",port:"منفذ خدمة MQTT على خادم ثينغزبورد",token:"رمز الوصول للبوابة من خادم ثينغزبورد","client-id":"معرف عميل MQTT للبوابة من خادم ثينغزبورد",username:"اسم المستخدم MQTT للبوابة من خادم ثينغزبورد",password:"كلمة المرور MQTT للبوابة من خادم ثينغزبورد","ca-cert":"المسار إلى ملف شهادة CA","date-form":"تنسيق التاريخ في رسالة السجل","data-folder":"المسار إلى المجلد الذي سيحتوي على البيانات (نسبي أو مطلق)","log-format":"تنسيق رسالة السجل","remote-log":"يمكنك تمكين التسجيل البعيد وقراءة السجلات من البوابة","backup-count":"إذا كان عدد النسخ الاحتياطية > 0، عند عملية تدوير، لا يتم الاحتفاظ بأكثر من عدد النسخ الاحتياطية المحددة - يتم حذف الأقدم",storage:"يوفر تكوينًا لحفظ البيانات الواردة قبل إرسالها إلى المنصة","max-file-count":"العدد الأقصى لعدد الملفات التي سيتم إنشاؤها","max-read-count":"عدد الرسائل للحصول عليها من التخزين وإرسالها إلى ثينغزبورد","max-records":"العدد الأقصى للسجلات التي ستخزن في ملف واحد","read-record-count":"عدد الرسائل للحصول عليها من التخزين وإرسالها إلى ثينغزبورد","max-records-count":"العدد الأقصى للبيانات في التخزين قبل إرسالها إلى ثينغزبورد","ttl-check-hour":"كم مرة سيتحقق البوابة من البيانات القديمة","ttl-messages-day":"الحد الأقصى لعدد الأيام التي ستحتفظ فيها التخزين بالبيانات",commands:"الأوامر لجمع الإحصائيات الإضافية",attribute:"مفتاح تلقي الإحصائيات",timeout:"مهلة زمنية لتنفيذ الأمر",command:"سيتم استخدام نتيجة تنفيذ الأمر كقيمة لتلقي الإحصائيات","check-device-activity":"يمكنك تمكين مراقبة نشاط كل جهاز متصل","inactivity-timeout":"الوقت بعد الذي ستفصل البوابة الجهاز","inactivity-period":"تكرار فحص نشاط الجهاز","minimal-pack-delay":"التأخير بين إرسال حزم الرسائل (يؤدي تقليل هذا الإعداد إلى زيادة استخدام وحدة المعالجة المركزية)",qos:"جودة الخدمة في رسائل MQTT (0 - على الأكثر مرة واحدة، 1 - على الأقل مرة واحدة)","server-port":"منفذ الشبكة الذي سيستمع فيه خادم GRPC للاستفسارات الواردة.","grpc-keep-alive-timeout":"الحد الأقصى للوقت الذي يجب أن ينتظره الخادم لاستجابة رسالة الحفاظ على الاتصال قبل اعتبار الاتصال ميتًا.","grpc-keep-alive":"المدة بين رسائل حفظ الاتصال المتعاقبة عند عدم وجود استدعاء RPC نشط.","grpc-min-time-between-pings":"الحد الأدنى للوقت الذي يجب فيه أن ينتظر الخادم بين إرسال رسائل حفظ الاتصال","grpc-max-pings-without-data":"الحد الأقصى لعدد رسائل حفظ الاتصال التي يمكن للخادم إرسالها دون تلقي أي بيانات قبل اعتبار الاتصال ميتًا.","grpc-min-ping-interval-without-data":"الحد الأدنى للوقت الذي يجب فيه أن ينتظر الخادم بين إرسال رسائل حفظ الاتصال عند عدم إرسال أو استلام بيانات.","permit-without-calls":"السماح للخادم بإبقاء اتصال GRPC حيًا حتى عندما لا تكون هناك استدعاءات RPC نشطة."}},yt={"add-entry":"Afegir configuració","connector-add":"Afegir conector","connector-enabled":"Activar conector","connector-name":"Nom conector","connector-name-required":"Cal nom conector.","connector-type":"Tipus conector","connector-type-required":"Cal tipus conector.",connectors:"Configuració de conectors","create-new-gateway":"Crear un gateway nou","create-new-gateway-text":"Crear un nou gateway amb el nom: '{{gatewayName}}'?",delete:"Esborrar configuració","download-tip":"Descarregar fitxer de configuració",gateway:"Gateway","gateway-exists":"Ja existeix un dispositiu amb el mateix nom.","gateway-name":"Nom de Gateway","gateway-name-required":"Cal un nom de gateway.","gateway-saved":"Configuració de gateway gravada satisfactòriament.","json-parse":"JSON no vàlid.","json-required":"El camp no pot ser buit.","no-connectors":"No hi ha conectors","no-data":"No hi ha configuracions","no-gateway-found":"No s'ha trobat cap gateway.","no-gateway-matching":" '{{item}}' no trobat.","path-logs":"Ruta als fitxers de log","path-logs-required":"Cal ruta.",remote:"Configuració remota","remote-logging-level":"Nivel de logging","remove-entry":"Esborrar configuració","save-tip":"Gravar fitxer de configuració","security-type":"Tipus de seguretat","security-types":{"access-token":"Token d'accés",tls:"TLS"},storage:"Grabació","storage-max-file-records":"Número màxim de registres en fitxer","storage-max-files":"Número màxim de fitxers","storage-max-files-min":"El número mínim és 1.","storage-max-files-pattern":"Número no vàlid.","storage-max-files-required":"Cal número.","storage-max-records":"Màxim de registres en el magatzem","storage-max-records-min":"El número mínim és 1.","storage-max-records-pattern":"Número no vàlid.","storage-max-records-required":"Cal número.","storage-pack-size":"Mida màxim de esdeveniments","storage-pack-size-min":"El número mínim és 1.","storage-pack-size-pattern":"Número no vàlid.","storage-pack-size-required":"Cal número.","storage-path":"Ruta de magatzem","storage-path-required":"Cal ruta de magatzem.","storage-type":"Tipus de magatzem","storage-types":{"file-storage":"Magatzem fitxer","memory-storage":"Magatzem en memoria"},thingsboard:"ThingsBoard","thingsboard-host":"Host ThingsBoard","thingsboard-host-required":"Cal Host.","thingsboard-port":"Port ThingsBoard","thingsboard-port-max":"El port màxim és 65535.","thingsboard-port-min":"El port mínim és 1.","thingsboard-port-pattern":"Port no vàlid.","thingsboard-port-required":"Cal port.",tidy:"Endreçat","tidy-tip":"Endreçat JSON","title-connectors-json":"Configuració conector {{typeName}}","tls-path-ca-certificate":"Ruta al certificat CA al gateway","tls-path-client-certificate":"Ruta al certificat client al gateway","tls-path-private-key":"Ruta a la clau privada al gateway","toggle-fullscreen":"Pantalla completa fullscreen","transformer-json-config":"Configuració JSON*","update-config":"Afegir/actualizar configuració JSON"},vt={"add-entry":"Přidat konfiguraci","connector-add":"Přidat nový konektor","connector-enabled":"Povolit konektor","connector-name":"Název konektoru","connector-name-required":"Název konektoru je povinný.","connector-type":"Typ konektoru","connector-type-required":"Typ konektoru je povinný.",connectors:"Konfigurace konektoru","create-new-gateway":"Vytvořit novou bránu","create-new-gateway-text":"Jste si jisti, že chcete vytvořit novou bránu s názvem: '{{gatewayName}}'?",delete:"Smazat konfiguraci","download-tip":"Stáhnout soubor konfigurace",gateway:"Brána","gateway-exists":"Zařízení se shodným názvem již existuje.","gateway-name":"Název brány","gateway-name-required":"Název brány je povinný.","gateway-saved":"Konfigurace brány byla úspěšně uložena.","json-parse":"Neplatný JSON.","json-required":"Pole nemůže být prázdné.","no-connectors":"Žádné konektory","no-data":"Žádné konfigurace","no-gateway-found":"Žádné brány nebyly nalezeny.","no-gateway-matching":" '{{item}}' nenalezena.","path-logs":"Cesta k souborům logu","path-logs-required":"Cesta je povinná.",remote:"Vzdálená konfigurace","remote-logging-level":"Úroveň logování","remove-entry":"Odstranit konfiguraci","save-tip":"Uložit soubor konfigurace","security-type":"Typ zabezpečení","security-types":{"access-token":"Přístupový token",tls:"TLS"},storage:"Úložiště","storage-max-file-records":"Maximální počet záznamů v souboru","storage-max-files":"Maximální počet souborů","storage-max-files-min":"Minimální počet je 1.","storage-max-files-pattern":"Počet není platný.","storage-max-files-required":"Počet je povinný.","storage-max-records":"Maximální počet záznamů v úložišti","storage-max-records-min":"Minimální počet záznamů je 1.","storage-max-records-pattern":"Počet není platný.","storage-max-records-required":"Maximální počet záznamů je povinný.","storage-pack-size":"Maximální velikost souboru událostí","storage-pack-size-min":"Minimální počet je 1.","storage-pack-size-pattern":"Počet není platný.","storage-pack-size-required":"Maximální velikost souboru událostí je povinná.","storage-path":"Cesta k úložišti","storage-path-required":"Cesta k úložišti je povinná.","storage-type":"Typ úložiště","storage-types":{"file-storage":"Soubor","memory-storage":"Paměť"},thingsboard:"ThingsBoard","thingsboard-host":"Host ThingsBoard","thingsboard-host-required":"Host je povinný.","thingsboard-port":"Port ThingsBoard","thingsboard-port-max":"Maximální číslo portu je 65535.","thingsboard-port-min":"Minimální číslo portu je 1.","thingsboard-port-pattern":"Port není platný.","thingsboard-port-required":"Port je povinný.",tidy:"Uspořádat","tidy-tip":"Uspořádat JSON konfiguraci","title-connectors-json":"Konfigurace {{typeName}} konektoru","tls-path-ca-certificate":"Cesta k certifikátu CA brány","tls-path-client-certificate":"Cesta k certifikátu klienta brány","tls-path-private-key":"Cesta k privátnímu klíči brány","toggle-fullscreen":"Přepnout do režimu celé obrazovky","transformer-json-config":"JSON* konfigurace","update-config":"Přidat/editovat JSON konfiguraci"},bt={"add-entry":"Tilføj konfiguration","connector-add":"Tilføj ny stikforbindelse","connector-enabled":"Aktivér stikforbindelse","connector-name":"Navn på stikforbindelse","connector-name-required":"Navn på stikforbindelse er påkrævet.","connector-type":"Stikforbindelsestype","connector-type-required":"Stikforbindelsestype er påkrævet.",connectors:"Konfiguration af stikforbindelser","create-new-gateway":"Opret en ny gateway","create-new-gateway-text":"",delete:"Slet konfiguration","download-tip":"Download konfigurationsfil",gateway:"Gateway","gateway-exists":"Enhed med samme navn findes allerede.","gateway-name":"Gateway-navn","gateway-name-required":"Gateway-navn er påkrævet.","gateway-saved":"Gateway-konfigurationen blev gemt.","json-parse":"Ikke gyldig JSON.","json-required":"Feltet må ikke være tomt.","no-connectors":"Ingen stikforbindelser","no-data":"Ingen konfigurationer","no-gateway-found":"Ingen gateway fundet.","no-gateway-matching":"","path-logs":"Sti til logfiler","path-logs-required":"Sti er påkrævet.",remote:"Fjernkonfiguration","remote-logging-level":"Logføringsniveau","remove-entry":"Fjern konfiguration","save-tip":"Gem konfigurationsfil","security-type":"Sikkerhedstype","security-types":{"access-token":"Adgangstoken",tls:"TLS"},storage:"Lagring","storage-max-file-records":"Maks. antal poster i fil","storage-max-files":"Maks. antal filer","storage-max-files-min":"Min. antal er 1.","storage-max-files-pattern":"Antal er ikke gyldigt.","storage-max-files-required":"Antal er påkrævet.","storage-max-records":"Maks. antal poster i lagring","storage-max-records-min":"Min. antal poster er 1.","storage-max-records-pattern":"Antal er ikke gyldigt.","storage-max-records-required":"Maks. antal poster er påkrævet.","storage-pack-size":"Maks. antal pakkestørrelse for begivenhed","storage-pack-size-min":"Min. antal er 1.","storage-pack-size-pattern":"Antal er ikke gyldigt.","storage-pack-size-required":"Maks. antal pakkestørrelse for begivenhed er påkrævet.","storage-path":"Lagringssti","storage-path-required":"Lagringssti er påkrævet.","storage-type":"Lagringstype","storage-types":{"file-storage":"Lagring af filter","memory-storage":"Lagring af hukommelse"},thingsboard:"ThingsBoard","thingsboard-host":"ThingsBoard-vært","thingsboard-host-required":"Vært er påkrævet.","thingsboard-port":"ThingsBoard-port","thingsboard-port-max":"Maks. portnummer er 65535.","thingsboard-port-min":"Min. portnummer er 1.","thingsboard-port-pattern":"Port er ikke gyldig.","thingsboard-port-required":"Port er påkrævet.",tidy:"Tidy","tidy-tip":"Tidy konfig. JSON","title-connectors-json":"","tls-path-ca-certificate":"Sti til CA-certifikat på gateway","tls-path-client-certificate":"Sti til klientcertifikat på gateway","tls-path-private-key":"Sti til privat nøgle på gateway","toggle-fullscreen":"Skift til fuld skærm","transformer-json-config":"Konfiguration JSON*","update-config":"Tilføj/opdater konfiguration JSON"},xt={"add-entry":"Añadir configuración",advanced:"Avanzado","checking-device-activity":"Probando actividad de dispositivo",command:"Comandos Docker","command-copied-message":"Se han copiado los comandos al portapapeles",configuration:"Configuración","connector-add":"Añadir conector","connector-enabled":"Activar conector","connector-name":"Nombre conector","connector-name-required":"Se requiere nombre conector.","connector-type":"Tipo conector","connector-type-required":"Se requiere tipo conector.",connectors:"Conectores","connectors-config":"Configuración de conectores","connectors-table-enabled":"Enabled","connectors-table-name":"Nombre","connectors-table-type":"Tipo","connectors-table-status":"Estado","connectors-table-actions":"Acciones","connectors-table-key":"Clave","connectors-table-class":"Clase","rpc-command-send":"Enviar","rpc-command-result":"Resultado","rpc-command-edit-params":"Editar parametros","gateway-configuration":"Configuración General","create-new-gateway":"Crear un gateway nuevo","create-new-gateway-text":"Crear un nuevo gateway con el nombre: '{{gatewayName}}'?","created-time":"Hora de creación","configuration-delete-dialog-header":"Las configuraciones se borrarán","configuration-delete-dialog-body":"Sólo es posible desactivar la configuración remota, si hay acceso físico al gateway. Se borrarán todas las configuraciones previas.<br><br> \nPara desactivar la configuración, introduce el nombre del gateway aquí","configuration-delete-dialog-input":"Nombre Gateway","configuration-delete-dialog-input-required":"Se requiere nombre de gateway","configuration-delete-dialog-confirm":"Desactivar",delete:"Borrar configuración","download-tip":"Descargar fichero de configuración","drop-file":"Arrastra un fichero o",gateway:"Gateway","gateway-exists":"Ya existe un dispositivo con el mismo nombre.","gateway-name":"Nombre de Gateway","gateway-name-required":"Se requiere un nombre de gateway.","gateway-saved":"Configuración de gateway grabada satisfactoriamente.",grpc:"GRPC","grpc-keep-alive-timeout":"Timeout Keep alive (en ms)","grpc-keep-alive-timeout-required":"Se requiere Timeout Keep alive","grpc-keep-alive-timeout-min":"El valor no puede ser menor de 1","grpc-keep-alive-timeout-pattern":"El valor no es válido","grpc-keep-alive":"Keep alive (en ms)","grpc-keep-alive-required":"Se requiere keep alive","grpc-keep-alive-min":"El valor no puede ser menor de 1","grpc-keep-alive-pattern":"El valor keep alive no es válido","grpc-min-time-between-pings":"Tiempo mínimo entre pings (en ms)","grpc-min-time-between-pings-required":"Se requiere tiempo mínimo entre pings","grpc-min-time-between-pings-min":"El valor no puede ser menor de 1","grpc-min-time-between-pings-pattern":"El valor de tiempo mínimo entre pings no es válido","grpc-min-ping-interval-without-data":"Intervalo mínimo sin datos (en ms)","grpc-min-ping-interval-without-data-required":"Se requiere intervalo","grpc-min-ping-interval-without-data-min":"El valor no puede ser menor de 1","grpc-min-ping-interval-without-data-pattern":"El valor de intervalo no es válido","grpc-max-pings-without-data":"Intervalo máximo sin datos","grpc-max-pings-without-data-required":"Se requiere intervalo","grpc-max-pings-without-data-min":"El valor no puede ser menor de 1","grpc-max-pings-without-data-pattern":"El valor de intervalo no es válido","inactivity-check-period-seconds":"Periodo de control de inactividad (en segundos)","inactivity-check-period-seconds-required":"Se requiere periodo","inactivity-check-period-seconds-min":"El valor no puede ser menor de 1","inactivity-check-period-seconds-pattern":"El valor del periodo no es válido","inactivity-timeout-seconds":"Timeout de inactividad (en segundos)","inactivity-timeout-seconds-required":"Se requiere timeout de inactividad","inactivity-timeout-seconds-min":"El valor no puede ser menor de 1","inactivity-timeout-seconds-pattern":"El valor de inactividad no es válido","json-parse":"JSON no válido.","json-required":"El campo no puede estar vacío.",logs:{logs:"Registros",days:"días",hours:"horas",minutes:"minutos",seconds:"segundos","date-format":"Formato de fecha","date-format-required":"Se requiere formato de fecha","log-format":"Formato de registro","log-type":"Tipo de registro","log-format-required":"Se requiere tipo de registro",remote:"Registro remoto","remote-logs":"Registro remoto",local:"Registro local",level:"Nivel de registro","file-path":"Ruta de fichero","file-path-required":"Se requiere ruta de fichero","saving-period":"Periodo de guardado de registros","saving-period-min":"El periodo no puede ser menor que 1","saving-period-required":"Se requiere periodo de guardado","backup-count":"Número de backups","backup-count-min":"El número de backups no puede ser menor que 1","backup-count-required":"Se requiere número de backups"},"min-pack-send-delay":"Tiempo de espera, envío de paquetes (en ms)","min-pack-send-delay-required":"Se requiere tiempo de espera","min-pack-send-delay-min":"El tiempo de espera no puede ser menor que 0","no-connectors":"No hay conectores","no-data":"No hay configuraciones","no-gateway-found":"No se ha encontrado ningún gateway.","no-gateway-matching":" '{{item}}' no encontrado.","path-logs":"Ruta a los archivos de log","path-logs-required":"Ruta requerida.","permit-without-calls":"Permitir Keep alive si llamadas",remote:"Configuración remota","remote-logging-level":"Nivel de logging","remove-entry":"Borrar configuración","remote-shell":"Consola remota","remote-configuration":"Configuración remota",other:"otros","save-tip":"Grabar fichero de configuración","security-type":"Tipo de seguridad","security-types":{"access-token":"Tóken de acceso","username-password":"Usuario y contraseña",tls:"TLS","tls-access-token":"TLS + Tóken de acceso","tls-private-key":"TLS + Clave privada"},"server-port":"Puerto del servidor",statistics:{statistic:"Estadística",statistics:"Estadísticas","statistic-commands-empty":"No hay estadísticas",commands:"Comandos","send-period":"Periodo de envío de estadísticas (en segundos)","send-period-required":"Se requiere periodo de envío","send-period-min":"El periodo de envío no puede ser menor de 60","send-period-pattern":"El periodo de envío no es válido","check-connectors-configuration":"Revisar configuración de conectores (en segundos)","check-connectors-configuration-required":"Se requiere un valor","check-connectors-configuration-min":"El valor no puede ser menor de 1","check-connectors-configuration-pattern":"La configuración no es válida",add:"Añadir comando",timeout:"Timeout","timeout-required":"Se requiere timeout","timeout-min":"El timeout no puede ser menor de 1","timeout-pattern":"El timeout no es válido","attribute-name":"Nombre de atributo","attribute-name-required":"Se requiere nombre de atributo",command:"Comando","command-required":"Se requiere comando",remove:"Borrar comando"},storage:"Grabación","storage-max-file-records":"Número máximo de registros en fichero","storage-max-files":"Número máximo de ficheros","storage-max-files-min":"El número mínimo es 1.","storage-max-files-pattern":"Número no válido.","storage-max-files-required":"Se requiere número.","storage-max-records":"Máximo de registros en el almacén","storage-max-records-min":"El número mínimo es 1.","storage-max-records-pattern":"Número no válido.","storage-max-records-required":"Se requiere número.","storage-read-record-count":"Leer número de entradas en almacén","storage-read-record-count-min":"El número mínimo de entradas es 1.","storage-read-record-count-pattern":"El número no es válido.","storage-read-record-count-required":"Se requiere número de entradas.","storage-max-read-record-count":"Número máximo de entradas en el almacén","storage-max-read-record-count-min":"El número mínimo es 1.","storage-max-read-record-count-pattern":"El número no es válido","storage-max-read-record-count-required":"Se requiere número máximo de entradas.","storage-data-folder-path":"Ruta de carpeta de datos","storage-data-folder-path-required":"Se requiere ruta.","storage-pack-size":"Tamaño máximo de eventos","storage-pack-size-min":"El número mínimo es 1.","storage-pack-size-pattern":"Número no válido.","storage-pack-size-required":"Se requiere número.","storage-path":"Ruta de almacén","storage-path-required":"Se requiere ruta de almacén.","storage-type":"Tipo de almacén","storage-types":{"file-storage":"Almacén en fichero","memory-storage":"Almacén en memoria",sqlite:"SQLITE"},thingsboard:"ThingsBoard",general:"General","thingsboard-host":"Host ThingsBoard","thingsboard-host-required":"Se requiere Host.","thingsboard-port":"Puerto ThingsBoard","thingsboard-port-max":"El puerto máximo es 65535.","thingsboard-port-min":"El puerto mínimo es 1.","thingsboard-port-pattern":"Puerto no válido.","thingsboard-port-required":"Se requiere puerto.",tidy:"Tidy","tidy-tip":"Tidy JSON","title-connectors-json":"Configuración conector {{typeName}}","tls-path-ca-certificate":"Ruta al certificado CA en el gateway","tls-path-client-certificate":"Ruta al certificado cliente en el gateway","messages-ttl-check-in-hours":"Comprobación de TTL de mensajes en horas","messages-ttl-check-in-hours-required":"Campo requerido.","messages-ttl-check-in-hours-min":"El mínimo es 1.","messages-ttl-check-in-hours-pattern":"El número no es válido.","messages-ttl-in-days":"TTL (Time to live) de mensages en días","messages-ttl-in-days-required":"Se requiere TTL de mensajes.","messages-ttl-in-days-min":"El número mínimo es 1.","messages-ttl-in-days-pattern":"El número no es válido.","mqtt-qos":"QoS","mqtt-qos-required":"Se requiere QoS","mqtt-qos-range":"El rango de valores es desde 0 a 1","tls-path-private-key":"Ruta a la clave privada en el gateway","toggle-fullscreen":"Pantalla completa fullscreen","transformer-json-config":"Configuración JSON*","update-config":"Añadir/actualizar configuración JSON",hints:{"remote-configuration":"Habilita la administración y configuración remota del gateway","remote-shell":"Habilita el control remoto del sistema operativo del gateway desde el widget terminal remoto",host:"Hostname o dirección IP del servidor Thingsboard",port:"Puerto del servicio MQTT en el servidor Thingsboard",token:"Access token para el gateway","client-id":"ID de cliente MQTT para el gateway",username:"Usuario MQTT para el gateway",password:"Contraseña MQTT para el gateway","ca-cert":"Ruta al fichero del certificado CA","date-form":"Formato de fecha en los mensajes de registro","data-folder":"Ruta a la carpeta que contendrá los datos (Relativa o absoluta)","log-format":"Formato de mensajes en registro","remote-log":"Habilita el registro remoto y la posterior lectura desde el gateway","backup-count":"Si el contaje de copias de seguridad es mayor que 0, cuando se realice una renovación, no se conservan más que los archivos de recuento de copias de seguridad, los más antíguos se eliminarán",storage:"Provee la configuración para el grabado de datos entrantes antes de que se envíen a la plataforma","max-file-count":"Número máximo de ficheros que se crearán","max-read-count":"Númeo máximo de mensajes a obtener desde el disco y enviados a la plataforma","max-records":"Número máximo de registros que se guardarán en un solo fichero","read-record-count":"Número de mensages a obtener desde el almacenamiento y enviados a la plataforma","max-records-count":"Número máximo de datos en almacenamiento antes de enviar a la plataforma","ttl-check-hour":"Con qué frecuencia el gateway comprobará si los datos están obsoletos","ttl-messages-day":"Número máximo de días para la retención de datos en el almacén",commands:"Comandos para recoger estadísticas adicionales",attribute:"Clave de telemetría para estadísticas",timeout:"Timeout para la ejecución de comandos",command:"El resultado de la ejecución del comando, se usará como valor para la telemetría","check-device-activity":"Habilita la monitorización de cada uno de los dispositivos conectados","inactivity-timeout":"Tiempo tras que el gateway desconectará el dispositivo","inactivity-period":"Periodo de monitorización de actividad en el dispositivo","minimal-pack-delay":"Tiempo de espera entre envío de paquetes de mensajes (Un valor muy bajo, resultará en un aumento de uso de la CPU en el gateway)",qos:"Quality of Service en los mensajes MQTT (0 - at most once, 1 - at least once)","server-port":"Puerto de red en el cual el servidor GRPC escuchará conexiones entrantes.","grpc-keep-alive-timeout":"Tiempo máximo, el cual el servidor esperara un ping keepalive antes de considerar la conexión terminada.","grpc-keep-alive":"Duración entre dos pings keepalive cuando no haya llamada RPC activa.","grpc-min-time-between-pings":"Mínimo tiempo que el servidor debe esperar entre envíos de mensajes de ping","grpc-max-pings-without-data":"Número máximo de pings keepalive que el servidor puede enviar sin recibir ningún dato antes de considerar la conexión terminada.","grpc-min-ping-interval-without-data":"Mínimo tiempo que el servidor debe esperar entre envíos de ping keepalive cuando no haya ningún dato en envío o recepción.","permit-without-calls":"Permitir al servidor mantener la conexión GRPC abierta, cuando no haya llamadas RPC activas."}},wt={"add-entry":"설정 추가","connector-add":"새로운 연결자 추가","connector-enabled":"Enable connector","connector-name":"Connector name","connector-name-required":"Connector name is required.","connector-type":"Connector type","connector-type-required":"Connector type is required.",connectors:"Connectors configuration","create-new-gateway":"Create a new gateway","create-new-gateway-text":"Are you sure you want create a new gateway with name: '{{gatewayName}}'?",delete:"Delete configuration","download-tip":"Download configuration file",gateway:"Gateway","gateway-exists":"Device with same name is already exists.","gateway-name":"Gateway name","gateway-name-required":"Gateway name is required.","gateway-saved":"Gateway configuration successfully saved.","json-parse":"Not valid JSON.","json-required":"Field cannot be empty.","no-connectors":"No connectors","no-data":"No configurations","no-gateway-found":"No gateway found.","no-gateway-matching":" '{{item}}' not found.","path-logs":"Path to log files","path-logs-required":"Path is required.",remote:"Remote configuration","remote-logging-level":"Logging level","remove-entry":"Remove configuration","save-tip":"Save configuration file","security-type":"Security type","security-types":{"access-token":"Access Token",tls:"TLS"},storage:"Storage","storage-max-file-records":"Maximum records in file","storage-max-files":"Maximum number of files","storage-max-files-min":"Minimum number is 1.","storage-max-files-pattern":"Number is not valid.","storage-max-files-required":"Number is required.","storage-max-records":"Maximum records in storage","storage-max-records-min":"Minimum number of records is 1.","storage-max-records-pattern":"Number is not valid.","storage-max-records-required":"Maximum records is required.","storage-pack-size":"Maximum event pack size","storage-pack-size-min":"Minimum number is 1.","storage-pack-size-pattern":"Number is not valid.","storage-pack-size-required":"Maximum event pack size is required.","storage-path":"Storage path","storage-path-required":"Storage path is required.","storage-type":"Storage type","storage-types":{"file-storage":"File storage","memory-storage":"Memory storage"},thingsboard:"ThingsBoard","thingsboard-host":"ThingsBoard host","thingsboard-host-required":"Host is required.","thingsboard-port":"ThingsBoard port","thingsboard-port-max":"Maximum port number is 65535.","thingsboard-port-min":"Minimum port number is 1.","thingsboard-port-pattern":"Port is not valid.","thingsboard-port-required":"Port is required.",tidy:"Tidy","tidy-tip":"Tidy config JSON","title-connectors-json":"Connector {{typeName}} configuration","tls-path-ca-certificate":"Path to CA certificate on gateway","tls-path-client-certificate":"Path to client certificate on gateway","tls-path-private-key":"Path to private key on gateway","toggle-fullscreen":"Toggle fullscreen","transformer-json-config":"Configuration JSON*","update-config":"Add/update configuration JSON"},St={"add-entry":"Add configuration",advanced:"Advanced","checking-device-activity":"Checking device activity",command:"Docker commands","command-copied-message":"Docker command has been copied to clipboard",configuration:"Configuration","connector-add":"Add new connector","connector-enabled":"Enable connector","connector-name":"Connector name","connector-name-required":"Connector name is required.","connector-type":"Connector type","connector-type-required":"Connector type is required.",connectors:"Connectors","connectors-config":"Connectors configuration","connectors-table-enabled":"Enabled","connectors-table-name":"Name","connectors-table-type":"Type","connectors-table-status":"Status","connectors-table-actions":"Actions","connectors-table-key":"Key","connectors-table-class":"Class","rpc-command-send":"Send","rpc-command-result":"Result","rpc-command-edit-params":"Edit parameters","gateway-configuration":"General Configuration","docker-label":"In order to run ThingsBoard IoT gateway in docker with credentials for this device you can use the following commands.","create-new-gateway":"Create a new gateway","create-new-gateway-text":"Are you sure you want create a new gateway with name: '{{gatewayName}}'?","created-time":"Created time","configuration-delete-dialog-header":"Configurations will be deleted","configuration-delete-dialog-body":"Turning off Remote Configuration is possible only if there is physical access to the Gateway. All previous configurations will be deleted.<br><br> \nTo turn off configuration, enter gateway name below","configuration-delete-dialog-input":"Gateway name","configuration-delete-dialog-input-required":"Gateway name is mandatory","configuration-delete-dialog-confirm":"Turn Off",delete:"Delete configuration","download-tip":"Download configuration file","drop-file":"Drop file here or",gateway:"Gateway","gateway-exists":"Device with same name is already exists.","gateway-name":"Gateway name","gateway-name-required":"Gateway name is required.","gateway-saved":"Gateway configuration successfully saved.",grpc:"GRPC","grpc-keep-alive-timeout":"Keep alive timeout (in ms)","grpc-keep-alive-timeout-required":"Keep alive timeout is required","grpc-keep-alive-timeout-min":"Keep alive timeout can not be less then 1","grpc-keep-alive-timeout-pattern":"Keep alive timeout is not valid","grpc-keep-alive":"Keep alive (in ms)","grpc-keep-alive-required":"Keep alive is required","grpc-keep-alive-min":"Keep alive can not be less then 1","grpc-keep-alive-pattern":"Keep alive is not valid","grpc-min-time-between-pings":"Min time between pings (in ms)","grpc-min-time-between-pings-required":"Min time between pings is required","grpc-min-time-between-pings-min":"Min time between pings can not be less then 1","grpc-min-time-between-pings-pattern":"Min time between pings is not valid","grpc-min-ping-interval-without-data":"Min ping interval without data (in ms)","grpc-min-ping-interval-without-data-required":"Min ping interval without data is required","grpc-min-ping-interval-without-data-min":"Min ping interval without data can not be less then 1","grpc-min-ping-interval-without-data-pattern":"Min ping interval without data is not valid","grpc-max-pings-without-data":"Max pings without data","grpc-max-pings-without-data-required":"Max pings without data is required","grpc-max-pings-without-data-min":"Max pings without data can not be less then 1","grpc-max-pings-without-data-pattern":"Max pings without data is not valid","inactivity-check-period-seconds":"Inactivity check period (in sec)","inactivity-check-period-seconds-required":"Inactivity check period is required","inactivity-check-period-seconds-min":"Inactivity check period can not be less then 1","inactivity-check-period-seconds-pattern":"Inactivity check period is not valid","inactivity-timeout-seconds":"Inactivity timeout (in sec)","inactivity-timeout-seconds-required":"Inactivity timeout is required","inactivity-timeout-seconds-min":"Inactivity timeout can not be less then 1","inactivity-timeout-seconds-pattern":"Inactivity timeout is not valid","json-parse":"Not valid JSON.","json-required":"Field cannot be empty.",logs:{logs:"Logs",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds","date-format":"Date format","date-format-required":"Date format required","log-format":"Log format","log-type":"Log type","log-format-required":"Log format required",remote:"Remote logging","remote-logs":"Remote logs",local:"Local logging",level:"Log level","file-path":"File path","file-path-required":"File path required","saving-period":"Log saving period","saving-period-min":"Log saving period can not be less then 1","saving-period-required":"Log saving period required","backup-count":"Backup count","backup-count-min":"Backup count can not be less then 1","backup-count-required":"Backup count required"},"min-pack-send-delay":"Min pack send delay (in ms)","min-pack-send-delay-required":"Min pack send delay is required","min-pack-send-delay-min":"Min pack send delay can not be less then 0","no-connectors":"No connectors","no-data":"No configurations","no-gateway-found":"No gateway found.","no-gateway-matching":" '{{item}}' not found.","path-logs":"Path to log files","path-logs-required":"Path is required.","permit-without-calls":"Keep alive permit without calls",remote:"Remote configuration","remote-logging-level":"Logging level","remove-entry":"Remove configuration","remote-shell":"Remote shell","remote-configuration":"Remote Configuration",other:"Other","save-tip":"Save configuration file","security-type":"Security type","security-types":{"access-token":"Access Token","username-password":"Username and Password",tls:"TLS","tls-access-token":"TLS + Access Token","tls-private-key":"TLS + Private Key"},"server-port":"Server port",statistics:{statistic:"Statistic",statistics:"Statistics","statistic-commands-empty":"No statistics available",commands:"Commands","send-period":"Statistic send period (in sec)","send-period-required":"Statistic send period is required","send-period-min":"Statistic send period can not be less then 60","send-period-pattern":"Statistic send period is not valid","check-connectors-configuration":"Check connectors configuration (in sec)","check-connectors-configuration-required":"Check connectors configuration is required","check-connectors-configuration-min":"Check connectors configuration can not be less then 1","check-connectors-configuration-pattern":"Check connectors configuration is not valid",add:"Add command",timeout:"Timeout","timeout-required":"Timeout is required","timeout-min":"Timeout can not be less then 1","timeout-pattern":"Timeout is not valid","attribute-name":"Attribute name","attribute-name-required":"Attribute name is required",command:"Command","command-required":"Command is required",remove:"Remove command"},storage:"Storage","storage-max-file-records":"Maximum records in file","storage-max-files":"Maximum number of files","storage-max-files-min":"Minimum number is 1.","storage-max-files-pattern":"Number is not valid.","storage-max-files-required":"Number is required.","storage-max-records":"Maximum records in storage","storage-max-records-min":"Minimum number of records is 1.","storage-max-records-pattern":"Number is not valid.","storage-max-records-required":"Maximum records is required.","storage-read-record-count":"Read record count in storage","storage-read-record-count-min":"Minimum number of records is 1.","storage-read-record-count-pattern":"Number is not valid.","storage-read-record-count-required":"Read record count is required.","storage-max-read-record-count":"Max read record count in storage","storage-max-read-record-count-min":"Minimum number of records is 1.","storage-max-read-record-count-pattern":"Number is not valid.","storage-max-read-record-count-required":"Max Read record count is required.","storage-data-folder-path":"Data folder path","storage-data-folder-path-required":"Data folder path is required.","storage-pack-size":"Maximum event pack size","storage-pack-size-min":"Minimum number is 1.","storage-pack-size-pattern":"Number is not valid.","storage-pack-size-required":"Maximum event pack size is required.","storage-path":"Storage path","storage-path-required":"Storage path is required.","storage-type":"Storage type","storage-types":{"file-storage":"File storage","memory-storage":"Memory storage",sqlite:"SQLITE"},thingsboard:"ThingsBoard",general:"General","thingsboard-host":"ThingsBoard host","thingsboard-host-required":"Host is required.","thingsboard-port":"ThingsBoard port","thingsboard-port-max":"Maximum port number is 65535.","thingsboard-port-min":"Minimum port number is 1.","thingsboard-port-pattern":"Port is not valid.","thingsboard-port-required":"Port is required.",tidy:"Tidy","tidy-tip":"Tidy config JSON","title-connectors-json":"Connector {{typeName}} configuration","tls-path-ca-certificate":"Path to CA certificate on gateway","tls-path-client-certificate":"Path to client certificate on gateway","messages-ttl-check-in-hours":"Messages TTL check in hours","messages-ttl-check-in-hours-required":"Messages TTL check in hours is required.","messages-ttl-check-in-hours-min":"Min number is 1.","messages-ttl-check-in-hours-pattern":"Number is not valid.","messages-ttl-in-days":"Messages TTL in days","messages-ttl-in-days-required":"Messages TTL in days is required.","messages-ttl-in-days-min":"Min number is 1.","messages-ttl-in-days-pattern":"Number is not valid.","mqtt-qos":"QoS","mqtt-qos-required":"QoS is required","mqtt-qos-range":"QoS values range is from 0 to 1","tls-path-private-key":"Path to private key on gateway","toggle-fullscreen":"Toggle fullscreen","transformer-json-config":"Configuration JSON*","update-config":"Add/update configuration JSON",hints:{"remote-configuration":"Enables remote configuration and management of the gateway","remote-shell":"Enables remote control of the operating system with the gateway from the Remote Shell widget",host:"Hostname or IP address of ThingsBoard server",port:"Port of MQTT service on ThingsBoard server",token:"Access token for the gateway from ThingsBoard server","client-id":"MQTT client id for the gateway form ThingsBoard server",username:"MQTT username for the gateway form ThingsBoard server",password:"MQTT password for the gateway form ThingsBoard server","ca-cert":"Path to CA certificate file","date-form":"Date format in log message","data-folder":"Path to folder, that will contains data (Relative or Absolute)","log-format":"Log message format","remote-log":"Enables remote logging and logs reading from the gateway","backup-count":"If backup count is > 0, when a rollover is done, no more than backup count files are kept - the oldest ones are deleted",storage:"Provides configuration for saving incoming data before it is sent to the platform","max-file-count":"Maximum count of file that will be created","max-read-count":"Count of messages to get from storage and send to ThingsBoard","max-records":"Maximum count of records that will be stored in one file","read-record-count":"Count of messages to get from storage and send to ThingsBoard","max-records-count":"Maximum count of data in storage before send to ThingsBoard","ttl-check-hour":"How often will Gateway check data for obsolescence","ttl-messages-day":"Maximum days that storage will save data",commands:"Commands for collecting additional statistic",attribute:"Statistic telemetry key",timeout:"Timeout for command executing",command:"The result of the command execution, will be used as the value for telemetry","check-device-activity":"Enables monitor the activity of each connected device","inactivity-timeout":"Time after whose the gateway will disconnect device","inactivity-period":"Periodicity of device activity check","minimal-pack-delay":"Delay between sending packs of messages (Decreasing this setting results in increased CPU usage)",qos:"Quality of Service in MQTT messaging (0 - at most once, 1 - at least once)","server-port":"Network port on which GRPC server will listen for incoming connections.","grpc-keep-alive-timeout":"Maximum time the server should wait for a keepalive ping response before considering the connection dead.","grpc-keep-alive":"Duration between two successive keepalive ping messages when there is no active RPC call.","grpc-min-time-between-pings":"Minimum amount of time the server should wait between sending keepalive ping messages","grpc-max-pings-without-data":"Maximum number of keepalive ping messages that the server can send without receiving any data before it considers the connection dead.","grpc-min-ping-interval-without-data":"Minimum amount of time the server should wait between sending keepalive ping messages when there is no data being sent or received.","permit-without-calls":"Allow server to keep the GRPC connection alive even when there are no active RPC calls."}},Ct={"add-entry":"Configuratie toevoegen","connector-add":"Nieuwe connector toevoegen","connector-enabled":"Connector inschakelen","connector-name":"Naam van de connector","connector-name-required":"De naam van de connector is vereist.","connector-type":"Type aansluiting","connector-type-required":"Het type connector is vereist.",connectors:"Configuratie van connectoren","create-new-gateway":"Een nieuwe gateway maken","create-new-gateway-text":"Weet u zeker dat u een nieuwe gateway wilt maken met de naam: '{{gatewayName}}'?",delete:"Configuratie verwijderen","download-tip":"Configuratiebestand downloaden",gateway:"Gateway","gateway-exists":"Device met dezelfde naam bestaat al.","gateway-name":"Naam van de gateway","gateway-name-required":"De naam van de gateway is vereist.","gateway-saved":"Gatewayconfiguratie succesvol opgeslagen.","json-parse":"Ongeldige JSON.","json-required":"Het veld mag niet leeg zijn.","no-connectors":"Geen connectoren","no-data":"Geen configuraties","no-gateway-found":"Geen gateway gevonden.","no-gateway-matching":"'{{item}}' niet gevonden.","path-logs":"Pad naar logbestanden","path-logs-required":"Pad is vereist.",remote:"Configuratie op afstand","remote-logging-level":"Registratie niveau","remove-entry":"Configuratie verwijderen","save-tip":"Configuratiebestand opslaan","security-type":"Soort beveiliging","security-types":{"access-token":"Toegang tot token",tls:"TLS (TLS)"},storage:"Opslag","storage-max-file-records":"Maximum aantal records in bestand","storage-max-files":"Maximaal aantal bestanden","storage-max-files-min":"Minimum aantal is 1.","storage-max-files-pattern":"Nummer is niet geldig.","storage-max-files-required":"Nummer is vereist.","storage-max-records":"Maximum aantal records in opslag","storage-max-records-min":"Minimum aantal records is 1.","storage-max-records-pattern":"Nummer is niet geldig.","storage-max-records-required":"Maximale records zijn vereist.","storage-pack-size":"Maximale pakketgrootte voor events","storage-pack-size-min":"Minimum aantal is 1.","storage-pack-size-pattern":"Nummer is niet geldig.","storage-pack-size-required":"De maximale pakketgrootte van het event is vereist.","storage-path":"Opslag pad","storage-path-required":"Opslagpad is vereist.","storage-type":"Type opslag","storage-types":{"file-storage":"Opslag van bestanden","memory-storage":"Geheugen opslag"},thingsboard:"Dingen Bord","thingsboard-host":"ThingsBoard-gastheer","thingsboard-host-required":"Server host is vereist.","thingsboard-port":"ThingsBoard-poort","thingsboard-port-max":"Het maximale poortnummer is 65535.","thingsboard-port-min":"Het minimale poortnummer is 1.","thingsboard-port-pattern":"Poort is niet geldig.","thingsboard-port-required":"Poort is vereist.",tidy:"Ordelijk","tidy-tip":"Opgeruimde configuratie JSON","title-connectors-json":"Configuratie van connector {{typeName}}","tls-path-ca-certificate":"Pad naar CA-certificaat op gateway","tls-path-client-certificate":"Pad naar clientcertificaat op gateway","tls-path-private-key":"Pad naar privésleutel op gateway","toggle-fullscreen":"Volledig scherm in- en uitschakelen","transformer-json-config":"Configuratie JSON*","update-config":"Configuratie JSON toevoegen/bijwerken"},_t={"add-entry":"Dodaj konfigurację",advanced:"Advanced","checking-device-activity":"Checking device activity",command:"Docker commands","command-copied-message":"Docker command has been copied to clipboard",configuration:"Configuration","connector-add":"Dodaj nowe złącze","connector-enabled":"Włącz złącze","connector-name":"Nazwa złącza","connector-name-required":"Nazwa złącza jest wymagana.","connector-type":"Typ złącza","connector-type-required":"Typ złącza jest wymagany.",connectors:"Konfiguracja złączy","connectors-config":"Connectors configuration","connectors-table-enabled":"Enabled","connectors-table-name":"Name","connectors-table-type":"Type","connectors-table-status":"Status","connectors-table-actions":"Actions","connectors-table-key":"Key","connectors-table-class":"Class","rpc-command-send":"Send","rpc-command-result":"Result","rpc-command-edit-params":"Edit parameters","gateway-configuration":"General Configuration","docker-label":"In order to run ThingsBoard IoT gateway in docker with credentials for this device you can use the following commands.","create-new-gateway":"Utwórz nowy gateway","create-new-gateway-text":"Czy na pewno chcesz utworzyć nowy gateway o nazwie: '{{gatewayName}}'?","created-time":"Created time","configuration-delete-dialog-header":"Configurations will be deleted","configuration-delete-dialog-body":"Turning off Remote Configuration is possible only if there is physical access to the Gateway. All previous configurations will be deleted.<br><br> \nTo turn off configuration, enter gateway name below","configuration-delete-dialog-input":"Gateway name","configuration-delete-dialog-input-required":"Gateway name is mandatory","configuration-delete-dialog-confirm":"Turn Off",delete:"Usuń konfigurację","download-tip":"Pobierz plik konfiguracyjny","drop-file":"Drop file here or",gateway:"Wejście","gateway-exists":"Urządzenie o tej samej nazwie już istnieje.","gateway-name":"Nazwa Gateway","gateway-name-required":"Nazwa Gateway'a jest wymagana.","gateway-saved":"Konfiguracja Gatewey'a została pomyślnie zapisana.",grpc:"GRPC","grpc-keep-alive-timeout":"Keep alive timeout (in ms)","grpc-keep-alive-timeout-required":"Keep alive timeout is required","grpc-keep-alive-timeout-min":"Keep alive timeout can not be less then 1","grpc-keep-alive-timeout-pattern":"Keep alive timeout is not valid","grpc-keep-alive":"Keep alive (in ms)","grpc-keep-alive-required":"Keep alive is required","grpc-keep-alive-min":"Keep alive can not be less then 1","grpc-keep-alive-pattern":"Keep alive is not valid","grpc-min-time-between-pings":"Min time between pings (in ms)","grpc-min-time-between-pings-required":"Min time between pings is required","grpc-min-time-between-pings-min":"Min time between pings can not be less then 1","grpc-min-time-between-pings-pattern":"Min time between pings is not valid","grpc-min-ping-interval-without-data":"Min ping interval without data (in ms)","grpc-min-ping-interval-without-data-required":"Min ping interval without data is required","grpc-min-ping-interval-without-data-min":"Min ping interval without data can not be less then 1","grpc-min-ping-interval-without-data-pattern":"Min ping interval without data is not valid","grpc-max-pings-without-data":"Max pings without data","grpc-max-pings-without-data-required":"Max pings without data is required","grpc-max-pings-without-data-min":"Max pings without data can not be less then 1","grpc-max-pings-without-data-pattern":"Max pings without data is not valid","inactivity-check-period-seconds":"Inactivity check period (in sec)","inactivity-check-period-seconds-required":"Inactivity check period is required","inactivity-check-period-seconds-min":"Inactivity check period can not be less then 1","inactivity-check-period-seconds-pattern":"Inactivity check period is not valid","inactivity-timeout-seconds":"Inactivity timeout (in sec)","inactivity-timeout-seconds-required":"Inactivity timeout is required","inactivity-timeout-seconds-min":"Inactivity timeout can not be less then 1","inactivity-timeout-seconds-pattern":"Inactivity timeout is not valid","json-parse":"Nieprawidłowy JSON.","json-required":"Pole nie może być puste.",logs:{logs:"Logs",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds","date-format":"Date format","date-format-required":"Date format required","log-format":"Log format","log-type":"Log type","log-format-required":"Log format required",remote:"Remote logging","remote-logs":"Remote logs",local:"Local logging",level:"Log level","file-path":"File path","file-path-required":"File path required","saving-period":"Log saving period","saving-period-min":"Log saving period can not be less then 1","saving-period-required":"Log saving period required","backup-count":"Backup count","backup-count-min":"Backup count can not be less then 1","backup-count-required":"Backup count required"},"min-pack-send-delay":"Min pack send delay (in ms)","min-pack-send-delay-required":"Min pack send delay is required","min-pack-send-delay-min":"Min pack send delay can not be less then 0","no-connectors":"Brak złączy","no-data":"Brak konfiguracji","no-gateway-found":"Nie znaleziono gateway'a.","no-gateway-matching":" '{{item}}' nie znaleziono.","path-logs":"Ścieżka do plików dziennika","path-logs-required":"Ścieżka jest wymagana.","permit-without-calls":"Keep alive permit without calls",remote:"Zdalna konfiguracja","remote-logging-level":"Poziom logowania","remove-entry":"Usuń konfigurację","remote-shell":"Remote shell","remote-configuration":"Remote Configuration",other:"Other","save-tip":"Zapisz plik konfiguracyjny","security-type":"Rodzaj zabezpieczenia","security-types":{"access-token":"Token dostępu","username-password":"Username and Password",tls:"TLS","tls-access-token":"TLS + Access Token","tls-private-key":"TLS + Private Key"},"server-port":"Server port",statistics:{statistic:"Statistic",statistics:"Statistics","statistic-commands-empty":"No statistics available",commands:"Commands","send-period":"Statistic send period (in sec)","send-period-required":"Statistic send period is required","send-period-min":"Statistic send period can not be less then 60","send-period-pattern":"Statistic send period is not valid","check-connectors-configuration":"Check connectors configuration (in sec)","check-connectors-configuration-required":"Check connectors configuration is required","check-connectors-configuration-min":"Check connectors configuration can not be less then 1","check-connectors-configuration-pattern":"Check connectors configuration is not valid",add:"Add command",timeout:"Timeout","timeout-required":"Timeout is required","timeout-min":"Timeout can not be less then 1","timeout-pattern":"Timeout is not valid","attribute-name":"Attribute name","attribute-name-required":"Attribute name is required",command:"Command","command-required":"Command is required",remove:"Remove command"},storage:"Składowanie","storage-max-file-records":"Maksymalna liczba rekordów w pliku","storage-max-files":"Maksymalna liczba plików","storage-max-files-min":"Minimalna liczba to 1.","storage-max-files-pattern":"Numer jest nieprawidłowy.","storage-max-files-required":"Numer jest wymagany.","storage-max-records":"Maksymalna liczba rekordów w pamięci","storage-max-records-min":"Minimalna liczba rekordów to 1.","storage-max-records-pattern":"Numer jest nieprawidłowy.","storage-max-records-required":"Maksymalna liczba rekordów jest wymagana.","storage-read-record-count":"Read record count in storage","storage-read-record-count-min":"Minimum number of records is 1.","storage-read-record-count-pattern":"Number is not valid.","storage-read-record-count-required":"Read record count is required.","storage-max-read-record-count":"Max read record count in storage","storage-max-read-record-count-min":"Minimum number of records is 1.","storage-max-read-record-count-pattern":"Number is not valid.","storage-max-read-record-count-required":"Max Read record count is required.","storage-data-folder-path":"Data folder path","storage-data-folder-path-required":"Data folder path is required.","storage-pack-size":"Maksymalny rozmiar pakietu wydarzeń","storage-pack-size-min":"Minimalna liczba to 1.","storage-pack-size-pattern":"Numer jest nieprawidłowy.","storage-pack-size-required":"Maksymalny rozmiar pakietu wydarzeń jest wymagany.","storage-path":"Ścieżka przechowywania","storage-path-required":"Ścieżka do przechowywania jest wymagana.","storage-type":"Typ składowania","storage-types":{"file-storage":"Nośnik danych","memory-storage":"Przechowywanie pamięci",sqlite:"SQLITE"},thingsboard:"ThingsBoard",general:"General","thingsboard-host":"Gospodarz ThingsBoard","thingsboard-host-required":"Host jest wymagany.","thingsboard-port":"Port ThingsBoard","thingsboard-port-max":"Maksymalny numer portu to 65535.","thingsboard-port-min":"Minimalny numer portu to 1.","thingsboard-port-pattern":"Port jest nieprawidłowy.","thingsboard-port-required":"Port jest wymagany.",tidy:"Uporządkuj","tidy-tip":"Uporządkowana konfiguracja JSON","title-connectors-json":"Złącze {{typeName}} konfiguracja","tls-path-ca-certificate":"Ścieżka do certyfikatu CA na gateway","tls-path-client-certificate":"Ścieżka do certyfikatu klienta na gateway","messages-ttl-check-in-hours":"Messages TTL check in hours","messages-ttl-check-in-hours-required":"Messages TTL check in hours is required.","messages-ttl-check-in-hours-min":"Min number is 1.","messages-ttl-check-in-hours-pattern":"Number is not valid.","messages-ttl-in-days":"Messages TTL in days","messages-ttl-in-days-required":"Messages TTL in days is required.","messages-ttl-in-days-min":"Min number is 1.","messages-ttl-in-days-pattern":"Number is not valid.","mqtt-qos":"QoS","mqtt-qos-required":"QoS is required","mqtt-qos-range":"QoS values range is from 0 to 1","tls-path-private-key":"Ścieżka do klucza prywatnego na bramce","toggle-fullscreen":"Przełącz tryb pełnoekranowy","transformer-json-config":"Konfiguracja JSON*","update-config":"Dodaj/zaktualizuj konfigurację JSON",hints:{"remote-configuration":"Enables remote configuration and management of the gateway","remote-shell":"Enables remote control of the operating system with the gateway from the Remote Shell widget",host:"Hostname or IP address of ThingsBoard server",port:"Port of MQTT service on ThingsBoard server",token:"Access token for the gateway from ThingsBoard server","client-id":"MQTT client id for the gateway form ThingsBoard server",username:"MQTT username for the gateway form ThingsBoard server",password:"MQTT password for the gateway form ThingsBoard server","ca-cert":"Path to CA certificate file","date-form":"Date format in log message","data-folder":"Path to folder, that will contains data (Relative or Absolute)","log-format":"Log message format","remote-log":"Enables remote logging and logs reading from the gateway","backup-count":"If backup count is > 0, when a rollover is done, no more than backup count files are kept - the oldest ones are deleted",storage:"Provides configuration for saving incoming data before it is sent to the platform","max-file-count":"Maximum count of file that will be created","max-read-count":"Count of messages to get from storage and send to ThingsBoard","max-records":"Maximum count of records that will be stored in one file","read-record-count":"Count of messages to get from storage and send to ThingsBoard","max-records-count":"Maximum count of data in storage before send to ThingsBoard","ttl-check-hour":"How often will Gateway check data for obsolescence","ttl-messages-day":"Maximum days that storage will save data",commands:"Commands for collecting additional statistic",attribute:"Statistic telemetry key",timeout:"Timeout for command executing",command:"The result of the command execution, will be used as the value for telemetry","check-device-activity":"Enables monitor the activity of each connected device","inactivity-timeout":"Time after whose the gateway will disconnect device","inactivity-period":"Periodicity of device activity check","minimal-pack-delay":"Delay between sending packs of messages (Decreasing this setting results in increased CPU usage)",qos:"Quality of Service in MQTT messaging (0 - at most once, 1 - at least once)","server-port":"Network port on which GRPC server will listen for incoming connections.","grpc-keep-alive-timeout":"Maximum time the server should wait for a keepalive ping response before considering the connection dead.","grpc-keep-alive":"Duration between two successive keepalive ping messages when there is no active RPC call.","grpc-min-time-between-pings":"Minimum amount of time the server should wait between sending keepalive ping messages","grpc-max-pings-without-data":"Maximum number of keepalive ping messages that the server can send without receiving any data before it considers the connection dead.","grpc-min-ping-interval-without-data":"Minimum amount of time the server should wait between sending keepalive ping messages when there is no data being sent or received.","permit-without-calls":"Allow server to keep the GRPC connection alive even when there are no active RPC calls."}},Tt={"add-entry":"Adicionar configuração","connector-add":"Adicionar novo conector","connector-enabled":"Habilitar conector","connector-name":"Nome do conector","connector-name-required":"O nome do conector é obrigatório.","connector-type":"Tipo de conector","connector-type-required":"O tipo de conector é obrigatório.",connectors:"Configuração de conectores","create-new-gateway":"Criar um novo gateway","create-new-gateway-text":"Tem certeza de que deseja criar um novo gateway com o nome: '{{gatewayName}}'?",delete:"Excluir configuração","download-tip":"Download de arquivo de configuração",gateway:"Gateway","gateway-exists":"Já existe um dispositivo com o mesmo nome.","gateway-name":"Nome do gateway","gateway-name-required":"O nome do gateway é obrigatório.","gateway-saved":"A configuração do gateway foi salva corretamente.","json-parse":"JSON inválido.","json-required":"O campo não pode estar em branco.","no-connectors":"Sem conectores","no-data":"Sem configurações","no-gateway-found":"Nenhum gateway encontrado.","no-gateway-matching":" '{{item}}' não encontrado.","path-logs":"Caminho para arquivos de log","path-logs-required":"O caminho é obrigatório",remote:"Configuração remota","remote-logging-level":"Nível de registro em log","remove-entry":"Remover configuração","save-tip":"Salvar arquivo de configuração","security-type":"Tipo de segurança","security-types":{"access-token":"Token de Acesso",tls:"TLS"},storage:"Armazenamento","storage-max-file-records":"Número máximo de registros em arquivo","storage-max-files":"Número máximo de arquivos","storage-max-files-min":"O número mínimo é 1.","storage-max-files-pattern":"O número não é válido.","storage-max-files-required":"O número é obrigatório.","storage-max-records":"Número máximo de registros em armazenamento","storage-max-records-min":"O número mínimo de registros é 1.","storage-max-records-pattern":"O número não é válido.","storage-max-records-required":"O número máximo de registros é obrigatório.","storage-pack-size":"Tamanho máximo de pacote de eventos","storage-pack-size-min":"O número mínimo é 1.","storage-pack-size-pattern":"O número não é válido.","storage-pack-size-required":"O tamanho máximo de pacote de eventos é obrigatório.","storage-path":"Caminho de armazenamento","storage-path-required":"O caminho de armazenamento é obrigatório.","storage-type":"Tipo de armazenamento","storage-types":{"file-storage":"Armazenamento de arquivo","memory-storage":"Armazenamento de memória"},thingsboard:"ThingsBoard","thingsboard-host":"Host ThingsBoard","thingsboard-host-required":"O host é obrigatório.","thingsboard-port":"Porta ThingsBoard","thingsboard-port-max":"O número máximo de portas é 65535.","thingsboard-port-min":"O número mínimo de portas é 1.","thingsboard-port-pattern":"A porta não é válida.","thingsboard-port-required":"A porta é obrigatória.",tidy:"Tidy","tidy-tip":"Config Tidy JSON","title-connectors-json":"Configuração do conector {{typeName}}","tls-path-ca-certificate":"Caminho para certificado de Autoridade de Certificação no gateway","tls-path-client-certificate":"Caminho para certificado de cliente no gateway","tls-path-private-key":"Caminho para chave privada no gateway","toggle-fullscreen":"Alternar tela inteira","transformer-json-config":"Configuração JSON*","update-config":"Adicionar/atualizar configuração de JSON"},It={"add-entry":"Dodaj konfiguracijo","connector-add":"Dodaj nov priključek","connector-enabled":"Omogoči priključek","connector-name":"Ime priključka","connector-name-required":"Ime priključka je obvezno.","connector-type":"Vrsta priključka","connector-type-required":"Zahteva se vrsta priključka.",connectors:"Konfiguracija priključkov","create-new-gateway":"Ustvari nov prehod","create-new-gateway-text":"Ali ste prepričani, da želite ustvariti nov prehod z imenom: '{{gatewayName}}'?",delete:"Izbriši konfiguracijo","download-tip":"Prenos konfiguracijske datoteke",gateway:"Prehod","gateway-exists":"Naprava z istim imenom že obstaja.","gateway-name":"Ime prehoda","gateway-name-required":"Ime prehoda je obvezno.","gateway-saved":"Konfiguracija prehoda je uspešno shranjena.","json-parse":"Neveljaven JSON.","json-required":"Polje ne sme biti prazno.","no-connectors":"Ni priključkov","no-data":"Brez konfiguracij","no-gateway-found":"Prehod ni najden.","no-gateway-matching":" '{{item}}' ni mogoče najti.","path-logs":"Pot do dnevniških datotek","path-logs-required":"Pot je obvezna.",remote:"Oddaljena konfiguracija","remote-logging-level":"Raven beleženja","remove-entry":"Odstrani konfiguracijo","save-tip":"Shrani konfiguracijsko datoteko","security-type":"Vrsta zaščite","security-types":{"access-token":"Dostopni žeton",tls:"TLS"},storage:"Shramba","storage-max-file-records":"Največ zapisov v datoteki","storage-max-files":"Največje število datotek","storage-max-files-min":"Najmanjše število je 1.","storage-max-files-pattern":"Številka ni veljavna.","storage-max-files-required":"Številka je obvezna.","storage-max-records":"Največ zapisov v pomnilniku","storage-max-records-min":"Najmanjše število zapisov je 1.","storage-max-records-pattern":"Številka ni veljavna.","storage-max-records-required":"Zahtevan je največ zapisov.","storage-pack-size":"Največja velikost paketa dogodkov","storage-pack-size-min":"Najmanjše število je 1.","storage-pack-size-pattern":"Številka ni veljavna.","storage-pack-size-required":"Zahtevana je največja velikost paketa dogodkov.","storage-path":"Pot pomnilnika","storage-path-required":"Zahtevana je pot do pomnilnika.","storage-type":"Vrsta pomnilnika","storage-types":{"file-storage":"Shramba datotek","memory-storage":"Spomin pomnilnika"},thingsboard:"ThingsBoard","thingsboard-host":"Gostitelj ThingsBoard","thingsboard-host-required":"Potreben je gostitelj.","thingsboard-port":"Vrata ThingsBoard","thingsboard-port-max":"Največja številka vrat je 65535.","thingsboard-port-min":"Najmanjša številka vrat je 1.","thingsboard-port-pattern":"Vrata niso veljavna.","thingsboard-port-required":"Potrebna so vrata.",tidy:"Urejeno","tidy-tip":"Urejena konfiguracija JSON","title-connectors-json":"Konfiguracija konektorja {{typeName}}","tls-path-ca-certificate":"Pot do potrdila CA na prehodu","tls-path-client-certificate":"Pot do potrdila stranke na prehodu","tls-path-private-key":"Pot do zasebnega ključa na prehodu","toggle-fullscreen":"Preklop na celozaslonski način","transformer-json-config":"Konfiguracija JSON *","update-config":"Dodaj / posodobi konfiguracijo JSON"},Et={"add-entry":"Yapılandırma ekle","connector-add":"Yeni bağlayıcı ekle","connector-enabled":"Bağlayıcıyı etkinleştir","connector-name":"Bağlayıcı adı","connector-name-required":"Bağlayıcı adı gerekli.","connector-type":"Bağlayıcı tipi","connector-type-required":"Bağlayıcı türü gerekli.",connectors:"Bağlayıcıların yapılandırması","create-new-gateway":"Yeni bir ağ geçidi oluştur","create-new-gateway-text":"'{{gatewayName}}' adında yeni bir ağ geçidi oluşturmak istediğinizden emin misiniz?",delete:"Yapılandırmayı sil","download-tip":"Yapılandırma dosyasını indirin",gateway:"Ağ geçidi","gateway-exists":"Aynı ada sahip cihaz zaten var.","gateway-name":"Ağ geçidi adı","gateway-name-required":"Ağ geçidi adı gerekli.","gateway-saved":"Ağ geçidi yapılandırması başarıyla kaydedildi.","json-parse":"Geçerli bir JSON değil.","json-required":"Alan boş olamaz.","no-connectors":"Bağlayıcı yok","no-data":"Yapılandırma yok","no-gateway-found":"Ağ geçidi bulunamadı.","no-gateway-matching":" '{{item}}' bulunamadı.","path-logs":"Log dosyaları yolu","path-logs-required":"Log dosyaları dizini gerekli.",remote:"Uzaktan yapılandırma","remote-logging-level":"Loglama seviyesi","remove-entry":"Yapılandırmayı kaldır","save-tip":"Yapılandırma dosyasını kaydet","security-type":"Güvenlik türü","security-types":{"access-token":"Access Token",tls:"TLS"},storage:"Depolama","storage-max-file-records":"Dosyadaki maksimum kayıt","storage-max-files":"Maksimum dosya sayısı","storage-max-files-min":"Minimum sayı 1'dir.","storage-max-files-pattern":"Sayı geçerli değil.","storage-max-files-required":"Sayı gerekli.","storage-max-records":"Depodaki maksimum kayıt","storage-max-records-min":"Minimum kayıt sayısı 1'dir.","storage-max-records-pattern":"Sayı geçerli değil.","storage-max-records-required":"Maksimum kayıt gerekli.","storage-pack-size":"Maksimum etkinlik paketi boyutu","storage-pack-size-min":"Minimum sayı 1'dir.","storage-pack-size-pattern":"Sayı geçerli değil.","storage-pack-size-required":"Maksimum etkinlik paketi boyutu gerekli.","storage-path":"Depolama yolu","storage-path-required":"Depolama yolu gerekli.","storage-type":"Depolama türü","storage-types":{"file-storage":"Dosya depolama","memory-storage":"Bellek depolama"},thingsboard:"ThingsBoard","thingsboard-host":"ThingsBoard host","thingsboard-host-required":"Host gerekli.","thingsboard-port":"ThingsBoard port","thingsboard-port-max":"Maksimum port numarası 65535.","thingsboard-port-min":"Minimum port numarası 1'dir.","thingsboard-port-pattern":"Port geçerli değil.","thingsboard-port-required":"Port gerekli.",tidy:"Tidy","tidy-tip":"Tidy config JSON","title-connectors-json":"Connector {{typeName}} configuration","tls-path-ca-certificate":"Path to CA certificate on gateway","tls-path-client-certificate":"Path to client certificate on gateway","tls-path-private-key":"Path to private key on gateway","toggle-fullscreen":"Toggle fullscreen","transformer-json-config":"Configuration JSON*","update-config":"Add/update configuration JSON"},Mt={"add-entry":"添加配置",advanced:"高级","checking-device-activity":"检查设备活动",command:"Docker命令","command-copied-message":"Docker命令已复制到剪贴板",configuration:"配置","connector-add":"添加连接器","connector-enabled":"启用连接器","connector-name":"连接器名称","connector-name-required":"连接器名称必填。","connector-type":"连接器类型","connector-type-required":"连接器类型必填。",connectors:"连接器配置","connectors-config":"连接器配置","connectors-table-enabled":"已启用","connectors-table-name":"名称","connectors-table-type":"类型","connectors-table-status":"状态","connectors-table-actions":"操作","connectors-table-key":"键","connectors-table-class":"类","rpc-command-send":"发送","rpc-command-result":"结果","rpc-command-edit-params":"编辑参数","gateway-configuration":"通用配置","create-new-gateway":"创建网关","create-new-gateway-text":"确定要创建名为 '{{gatewayName}}' 的新网关？","created-time":"创建时间","configuration-delete-dialog-header":"配置将被删除","configuration-delete-dialog-body":"只有对网关进行物理访问时，才有可能关闭远程配置。所有先前的配置都将被删除。<br><br>\n要关闭配置，请在下面输入网关名称","configuration-delete-dialog-input":"网关名称","configuration-delete-dialog-input-required":"网关名称是必需的","configuration-delete-dialog-confirm":"关闭",delete:"删除配置","download-tip":"下载配置","drop-file":"将文件拖放到此处或",gateway:"网关","gateway-exists":"同名设备已存在。","gateway-name":"网关名称","gateway-name-required":"网关名称必填。","gateway-saved":"已成功保存网关配置。",grpc:"GRPC","grpc-keep-alive-timeout":"保持连接超时（毫秒）","grpc-keep-alive-timeout-required":"需要保持连接超时","grpc-keep-alive-timeout-min":"保持连接超时不能小于1","grpc-keep-alive-timeout-pattern":"保持连接超时无效","grpc-keep-alive":"保持连接（毫秒）","grpc-keep-alive-required":"需要保持连接","grpc-keep-alive-min":"保持连接不能小于1","grpc-keep-alive-pattern":"保持连接无效","grpc-min-time-between-pings":"最小Ping间隔（毫秒）","grpc-min-time-between-pings-required":"需要最小Ping间隔","grpc-min-time-between-pings-min":"最小Ping间隔不能小于1","grpc-min-time-between-pings-pattern":"最小Ping间隔无效","grpc-min-ping-interval-without-data":"无数据时的最小Ping间隔（毫秒）","grpc-min-ping-interval-without-data-required":"需要无数据时的最小Ping间隔","grpc-min-ping-interval-without-data-min":"无数据时的最小Ping间隔不能小于1","grpc-min-ping-interval-without-data-pattern":"无数据时的最小Ping间隔无效","grpc-max-pings-without-data":"无数据时的最大Ping数","grpc-max-pings-without-data-required":"需要无数据时的最大Ping数","grpc-max-pings-without-data-min":"无数据时的最大Ping数不能小于1","grpc-max-pings-without-data-pattern":"无数据时的最大Ping数无效","inactivity-check-period-seconds":"不活跃检查期（秒）","inactivity-check-period-seconds-required":"需要不活跃检查期","inactivity-check-period-seconds-min":"不活跃检查期不能小于1","inactivity-check-period-seconds-pattern":"不活跃检查期无效","inactivity-timeout-seconds":"不活跃超时（秒）","inactivity-timeout-seconds-required":"需要不活跃超时","inactivity-timeout-seconds-min":"不活跃超时不能小于1","inactivity-timeout-seconds-pattern":"不活跃超时无效","json-parse":"无效的JSON。","json-required":"字段不能为空。",logs:{logs:"日志",days:"天",hours:"小时",minutes:"分钟",seconds:"秒","date-format":"日期格式","date-format-required":"需要日期格式","log-format":"日志格式","log-type":"日志类型","log-format-required":"需要日志格式",remote:"远程日志记录","remote-logs":"远程日志",local:"本地日志记录",level:"日志级别","file-path":"文件路径","file-path-required":"需要文件路径","saving-period":"日志保存期限","saving-period-min":"日志保存期限不能小于1","saving-period-required":"需要日志保存期限","backup-count":"备份数量","backup-count-min":"备份数量不能小于1","backup-count-required":"需要备份数量"},"min-pack-send-delay":"最小包发送延迟（毫秒）","min-pack-send-delay-required":"最小包发送延迟是必需的","min-pack-send-delay-min":"最小包发送延迟不能小于0","no-connectors":"无连接器","no-data":"没有配置","no-gateway-found":"未找到网关。","no-gateway-matching":"未找到 '{{item}}' 。","path-logs":"日志文件的路径","path-logs-required":"路径是必需的。","permit-without-calls":"保持连接许可，无需响应",remote:"远程配置","remote-logging-level":"日志记录级别","remove-entry":"删除配置","remote-shell":"远程Shell","remote-configuration":"远程配置",other:"其他","save-tip":"保存配置","security-type":"安全类型","security-types":{"access-token":"访问令牌","username-password":"用户名和密码",tls:"TLS","tls-access-token":"TLS + 访问令牌","tls-private-key":"TLS + 私钥"},"server-port":"服务器端口",statistics:{statistic:"统计信息",statistics:"统计信息","statistic-commands-empty":"无可用统计信息",commands:"命令","send-period":"统计信息发送周期（秒）","send-period-required":"统计信息发送周期是必需的","send-period-min":"统计信息发送周期不能小于60","send-period-pattern":"统计信息发送周期无效","check-connectors-configuration":"检查连接器配置（秒）","check-connectors-configuration-required":"检查连接器配置是必需的","check-connectors-configuration-min":"检查连接器配置不能小于1","check-connectors-configuration-pattern":"检查连接器配置无效",add:"添加命令",timeout:"超时时间","timeout-required":"超时时间是必需的","timeout-min":"超时时间不能小于1","timeout-pattern":"超时时间无效","attribute-name":"属性名称","attribute-name-required":"属性名称是必需的",command:"命令","command-required":"命令是必需的","command-pattern":"命令无效",remove:"删除命令"},storage:"存储","storage-max-file-records":"文件中的最大记录数","storage-max-files":"最大文件数","storage-max-files-min":"最小值为1。","storage-max-files-pattern":"数字无效。","storage-max-files-required":"数字是必需的。","storage-max-records":"存储中的最大记录数","storage-max-records-min":"最小记录数为1。","storage-max-records-pattern":"数字无效。","storage-max-records-required":"最大记录项必填。","storage-read-record-count":"存储中的读取记录数","storage-read-record-count-min":"最小记录数为1。","storage-read-record-count-pattern":"数字不合法。","storage-read-record-count-required":"需要读取记录数。","storage-max-read-record-count":"存储中的最大读取记录数","storage-max-read-record-count-min":"最小记录数为1。","storage-max-read-record-count-pattern":"数字不合法。","storage-max-read-record-count-required":"最大读取记录数必需。","storage-data-folder-path":"数据文件夹路径","storage-data-folder-path-required":"需要数据文件夹路径。","storage-pack-size":"最大事件包大小","storage-pack-size-min":"最小值为1。","storage-pack-size-pattern":"数字无效。","storage-pack-size-required":"最大事件包大小必填。","storage-path":"存储路径","storage-path-required":"存储路径必填。","storage-type":"存储类型","storage-types":{"file-storage":"文件存储","memory-storage":"内存存储",sqlite:"SQLITE"},thingsboard:"ThingsBoard",general:"常规","thingsboard-host":"ThingsBoard主机","thingsboard-host-required":"主机必填。","thingsboard-port":"ThingsBoard端口","thingsboard-port-max":"最大端口号为65535。","thingsboard-port-min":"最小端口号为1。","thingsboard-port-pattern":"端口无效。","thingsboard-port-required":"端口必填。",tidy:"整理","tidy-tip":"整理配置JSON","title-connectors-json":"连接器 {{typeName}} 配置","tls-path-ca-certificate":"网关上CA证书的路径","tls-path-client-certificate":"网关上客户端证书的路径","messages-ttl-check-in-hours":"消息TTL检查小时数","messages-ttl-check-in-hours-required":"需要提供消息TTL检查小时数。","messages-ttl-check-in-hours-min":"最小值为1。","messages-ttl-check-in-hours-pattern":"数字无效。","messages-ttl-in-days":"消息TTL天数","messages-ttl-in-days-required":"需要提供消息TTL天数。","messages-ttl-in-days-min":"最小值为1。","messages-ttl-in-days-pattern":"数字无效。","mqtt-qos":"QoS","mqtt-qos-required":"需要提供QoS","mqtt-qos-range":"QoS值的范围是从0到1","tls-path-private-key":"网关上私钥的路径","toggle-fullscreen":"切换全屏","transformer-json-config":"配置JSON*","update-config":"添加/更新配置JSON",hints:{"remote-configuration":"启用对网关的远程配置和管理","remote-shell":"通过远程Shell小部件启用对网关操作系统的远程控制",host:"ThingsBoard 主机名或IP地址",port:"ThingsBoard MQTT服务端口",token:"ThingsBoard 网关访问令牌","client-id":"ThingsBoard 网关MQTT客户端ID",username:"ThingsBoard 网关MQTT用户名",password:"ThingsBoard 网关MQTT密码","ca-cert":"CA证书文件的路径","date-form":"日志消息中的日期格式","data-folder":"包含数据的文件夹的路径（相对或绝对路径）","log-format":"日志消息格式","remote-log":"启用对网关的远程日志记录和日志读取","backup-count":"如果备份计数大于0，则在执行轮换时，最多保留备份计数个文件-最旧的文件将被删除",storage:"提供将数据发送到平台之前保存传入数据的配置","max-file-count":"将创建的文件的最大数量","max-read-count":"从存储中获取的消息计数并发送到ThingsBoard","max-records":"一个文件中存储的最大记录数","read-record-count":"从存储中获取的消息计数并发送到ThingsBoard","max-records-count":"在将数据发送到ThingsBoard之前，存储中的最大数据计数","ttl-check-hour":"网关多久检查一次数据是否过时","ttl-messages-day":"存储将保存数据的最大天数",commands:"用于收集附加统计信息的命令",attribute:"统计遥测键",timeout:"命令执行的超时时间",command:"命令执行的结果，将用作遥测的值","check-device-activity":"启用监视每个连接设备的活动","inactivity-timeout":"在此时间后，网关将断开设备的连接","inactivity-period":"设备活动检查的周期","minimal-pack-delay":"发送消息包之间的延迟（减小此设置会导致增加CPU使用率）",qos:"MQTT消息传递的服务质量（0-至多一次，1-至少一次）","server-port":"GRPC服务器侦听传入连接的网络端口","grpc-keep-alive-timeout":"在考虑连接死亡之前，服务器等待keepalive ping响应的最长时间","grpc-keep-alive":"没有活动RPC调用时两个连续keepalive ping消息之间的持续时间","grpc-min-time-between-pings":"服务器在发送keepalive ping消息之间应等待的最小时间量","grpc-max-pings-without-data":"在没有接收到任何数据之前，服务器可以发送的keepalive ping消息的最大数量，然后将连接视为死亡","grpc-min-ping-interval-without-data":"在没有发送或接收数据时，服务器在发送keepalive ping消息之间应等待的最小时间量","permit-without-calls":"允许服务器在没有活动RPC调用时保持GRPC连接活动"},"docker-label":"使用以下指令在 Docker compose 中运行 IoT 网关，并为选定的设备提供凭据","install-docker-compose":"使用以下说明下载、安装和设置 Docker Compose","download-configuration-file":"下载配置文件","download-docker-compose":"下载您的网关的 docker-compose.yml 文件","launch-gateway":"启动网关","launch-docker-compose":"在包含 docker-compose.yml 文件的文件夹中，使用以下命令在终端中启动网关"},kt={"add-entry":"增加配置","connector-add":"增加新連接器","connector-enabled":"啟用連接器","connector-name":"連接器名稱","connector-name-required":"需要連接器名稱。","connector-type":"連接器類型","connector-type-required":"需要連接器類型。",connectors:"連接器配置","create-new-gateway":"建立新閘道","create-new-gateway-text":"您確定要建立一個名稱為：'{{gatewayName}}'的新閘道嗎？",delete:"刪除配置","download-tip":"下載配置文件",gateway:"閘道","gateway-exists":"同名設備已存在。","gateway-name":"閘道名稱","gateway-name-required":"需要閘道名稱。","gateway-saved":"閘道配置已成功保存。","json-parse":"無效的JSON","json-required":"欄位不能為空。","no-connectors":"無連接器","no-data":"無配置","no-gateway-found":"未找到閘道。","no-gateway-matching":" 未找到'{{item}}'。","path-logs":"日誌文件的路徑","path-logs-required":"需要路徑。",remote:"移除配置","remote-logging-level":"日誌記錄級別","remove-entry":"移除配置","save-tip":"保存配置文件","security-type":"安全類型","security-types":{"access-token":"訪問Token",tls:"TLS"},storage:"貯存","storage-max-file-records":"文件中的最大紀錄","storage-max-files":"最大文件數","storage-max-files-min":"最小數量為1。","storage-max-files-pattern":"號碼無效。","storage-max-files-required":"需要號碼。","storage-max-records":"存儲中的最大紀錄","storage-max-records-min":"最小紀錄數為1。","storage-max-records-pattern":"號碼無效。","storage-max-records-required":"需要最大紀錄數","storage-pack-size":"最大事件包大小","storage-pack-size-min":"最小數量為1。","storage-pack-size-pattern":"號碼無效．","storage-pack-size-required":"需要最大事件包大小","storage-path":"存儲路徑","storage-path-required":"需要存儲路徑。","storage-type":"存儲類型","storage-types":{"file-storage":"文件存儲","memory-storage":"記憶體存儲"},thingsboard:"ThingsBoard","thingsboard-host":"ThingsBoard主機","thingsboard-host-required":"需要主機。","thingsboard-port":"ThingsBoard連接埠","thingsboard-port-max":"最大埠號為 65535。","thingsboard-port-min":"最小埠號為1。","thingsboard-port-pattern":"連接埠無效。","thingsboard-port-required":"需要連接埠。",tidy:"整理","tidy-tip":"整理配置JSON","title-connectors-json":"連接器{{typeName}}配置","tls-path-ca-certificate":"閘道上CA證書的路徑","tls-path-client-certificate":"閘道上用戶端憑據的路徑","tls-path-private-key":"閘道上的私鑰路徑","toggle-fullscreen":"切換全螢幕","transformer-json-config":"配置JSON*","update-config":"增加/更新配置JSON"};var Pt={3.6:{socket:{type:"TCP",address:"127.0.0.1",port:5e4,bufferSize:1024},devices:[{address:"*:*",deviceName:"Device Example",deviceType:"default",encoding:"utf-8",telemetry:[{key:"temp",byteFrom:0,byteTo:-1},{key:"hum",byteFrom:0,byteTo:2}],attributes:[{key:"name",byteFrom:0,byteTo:-1},{key:"num",byteFrom:2,byteTo:4}],attributeRequests:[{type:"shared",requestExpressionSource:"constant",attributeNameExpressionSource:"constant",requestExpression:"${[0:3]==atr}",attributeNameExpression:"[3:]"}],attributeUpdates:[{encoding:"utf-16",attributeOnThingsBoard:"sharedName"}],serverSideRpc:[{methodRPC:"rpcMethod1",withResponse:!0,encoding:"utf-8"}]}]},legacy:{type:"TCP",address:"127.0.0.1",port:5e4,bufferSize:1024,devices:[{address:"*:*",deviceName:"Device Example",deviceType:"default",encoding:"utf-8",telemetry:[{key:"temp",byteFrom:0,byteTo:-1},{key:"hum",byteFrom:0,byteTo:2}],attributes:[{key:"name",byteFrom:0,byteTo:-1},{key:"num",byteFrom:2,byteTo:4}],attributeRequests:[{type:"shared",requestExpression:"${[0:3]==atr}",attributeNameExpression:"[3:]"}],attributeUpdates:[{encoding:"utf-16",attributeOnThingsBoard:"sharedName"}],serverSideRpc:[{methodRPC:"rpcMethod1",withResponse:!0,methodProcessing:"write",encoding:"utf-8"}]}]}},Dt={"3.5.2":{broker:{host:"127.0.0.1",port:1883,clientId:"ThingsBoard_gateway",version:5,maxMessageNumberPerWorker:10,maxNumberOfWorkers:100,sendDataOnlyOnChange:!1,security:{type:"anonymous"}},mapping:[{topicFilter:"sensor/data",subscriptionQos:1,converter:{type:"json",deviceInfo:{deviceNameExpressionSource:"message",deviceNameExpression:"${serialNumber}",deviceProfileExpressionSource:"message",deviceProfileExpression:"${sensorType}"},sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"string",key:"model",value:"${sensorModel}"},{type:"string",key:"${sensorModel}",value:"on"}],timeseries:[{type:"string",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"},{type:"string",key:"combine",value:"${hum}:${temp}"}]}},{topicFilter:"sensor/+/data",subscriptionQos:1,converter:{type:"json",deviceInfo:{deviceNameExpressionSource:"topic",deviceNameExpression:"(?<=sensor/)(.*?)(?=/data)",deviceProfileExpressionSource:"constant",deviceProfileExpression:"Thermometer"},sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"string",key:"model",value:"${sensorModel}"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"string",key:"humidity",value:"${hum}"}]}},{topicFilter:"sensor/raw_data",subscriptionQos:1,converter:{type:"bytes",deviceInfo:{deviceNameExpressionSource:"message",deviceNameExpression:"[0:4]",deviceProfileExpressionSource:"constant",deviceProfileExpression:"default"},sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"raw",key:"rawData",value:"[:]"}],timeseries:[{type:"raw",key:"temp",value:"[4:]"}]}},{topicFilter:"custom/sensors/+",subscriptionQos:1,converter:{type:"custom",extension:"CustomMqttUplinkConverter",cached:!0,extensionConfig:{temperature:2,humidity:2,batteryLevel:1}}}],requestsMapping:{connectRequests:[{topicFilter:"sensor/connect",deviceInfo:{deviceNameExpressionSource:"message",deviceNameExpression:"${serialNumber}",deviceProfileExpressionSource:"constant",deviceProfileExpression:"Thermometer"}},{topicFilter:"sensor/+/connect",deviceInfo:{deviceNameExpressionSource:"topic",deviceNameExpression:"(?<=sensor/)(.*?)(?=/connect)",deviceProfileExpressionSource:"constant",deviceProfileExpression:"Thermometer"}}],disconnectRequests:[{topicFilter:"sensor/disconnect",deviceInfo:{deviceNameExpressionSource:"message",deviceNameExpression:"${serialNumber}"}},{topicFilter:"sensor/+/disconnect",deviceInfo:{deviceNameExpressionSource:"topic",deviceNameExpression:"(?<=sensor/)(.*?)(?=/connect)"}}],attributeRequests:[{retain:!1,topicFilter:"v1/devices/me/attributes/request",deviceInfo:{deviceNameExpressionSource:"message",deviceNameExpression:"${serialNumber}"},attributeNameExpressionSource:"message",attributeNameExpression:"${versionAttribute}, ${pduAttribute}",topicExpression:"devices/${deviceName}/attrs",valueExpression:"${attributeKey}: ${attributeValue}"}],attributeUpdates:[{retain:!0,deviceNameFilter:".*",attributeFilter:"firmwareVersion",topicExpression:"sensor/${deviceName}/${attributeKey}",valueExpression:'{"${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{type:"twoWay",deviceNameFilter:".*",methodFilter:"echo",requestTopicExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",responseTopicExpression:"sensor/${deviceName}/response/${methodName}/${requestId}",responseTopicQoS:1,responseTimeout:1e4,valueExpression:"${params}"},{type:"oneWay",deviceNameFilter:".*",methodFilter:"no-reply",requestTopicExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",valueExpression:"${params}"}]}},legacy:{broker:{name:"Default Local Broker",host:"127.0.0.1",port:1883,clientId:"ThingsBoard_gateway",version:5,maxMessageNumberPerWorker:10,maxNumberOfWorkers:100,sendDataOnlyOnChange:!1,security:{type:"basic",username:"user",password:"password"}},mapping:[{topicFilter:"sensor/data",converter:{type:"json",deviceNameJsonExpression:"${serialNumber}",deviceTypeJsonExpression:"${sensorType}",sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"string",key:"model",value:"${sensorModel}"},{type:"string",key:"${sensorModel}",value:"on"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"},{type:"string",key:"combine",value:"${hum}:${temp}"}]}},{topicFilter:"sensor/+/data",converter:{type:"json",deviceNameTopicExpression:"(?<=sensor/)(.*?)(?=/data)",deviceTypeTopicExpression:"Thermometer",sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"string",key:"model",value:"${sensorModel}"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"}]}},{topicFilter:"sensor/raw_data",converter:{type:"bytes",deviceNameExpression:"[0:4]",deviceTypeExpression:"default",sendDataOnlyOnChange:!1,timeout:6e4,attributes:[{type:"raw",key:"rawData",value:"[:]"}],timeseries:[{type:"raw",key:"temp",value:"[4:]"}]}},{topicFilter:"custom/sensors/+",converter:{type:"custom",extension:"CustomMqttUplinkConverter",cached:!0,"extension-config":{temperatureBytes:2,humidityBytes:2,batteryLevelBytes:1}}}],connectRequests:[{topicFilter:"sensor/connect",deviceNameJsonExpression:"${serialNumber}"},{topicFilter:"sensor/+/connect",deviceNameTopicExpression:"(?<=sensor/)(.*?)(?=/connect)"}],disconnectRequests:[{topicFilter:"sensor/disconnect",deviceNameJsonExpression:"${serialNumber}"},{topicFilter:"sensor/+/disconnect",deviceNameTopicExpression:"(?<=sensor/)(.*?)(?=/disconnect)"}],attributeRequests:[{retain:!1,topicFilter:"v1/devices/me/attributes/request",deviceNameJsonExpression:"${serialNumber}",attributeNameJsonExpression:"${versionAttribute}, ${pduAttribute}",topicExpression:"devices/${deviceName}/attrs",valueExpression:"${attributeKey}: ${attributeValue}"}],attributeUpdates:[{retain:!0,deviceNameFilter:".*",attributeFilter:"firmwareVersion",topicExpression:"sensor/${deviceName}/${attributeKey}",valueExpression:'{"${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"echo",requestTopicExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",responseTopicExpression:"sensor/${deviceName}/response/${methodName}/${requestId}",responseTimeout:1e4,valueExpression:"${params}"},{deviceNameFilter:".*",methodFilter:"no-reply",requestTopicExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",valueExpression:"${params}"}]}},Ot={"3.5.2":{master:{slaves:[{host:"127.0.0.1",port:5021,type:"tcp",method:"socket",timeout:35,byteOrder:"LITTLE",wordOrder:"LITTLE",retries:!0,retryOnEmpty:!0,retryOnInvalid:!0,pollPeriod:5e3,unitId:1,deviceName:"Temp Sensor",deviceType:"default",connectAttemptTimeMs:5e3,connectAttemptCount:5,waitAfterFailedAttemptsMs:3e5,reportStrategy:{type:"ON_REPORT_PERIOD",reportPeriod:3e4},attributes:[{tag:"string_read",type:"string",functionCode:4,objectsCount:4,address:1,reportStrategy:{type:"ON_REPORT_PERIOD",reportPeriod:15e3}},{tag:"bits_read",type:"bits",functionCode:4,objectsCount:1,address:5},{tag:"8int_read",type:"8int",functionCode:4,objectsCount:1,address:6},{tag:"16int_read",type:"16int",functionCode:4,objectsCount:1,address:7},{tag:"32int_read_divider",type:"32int",functionCode:4,objectsCount:2,address:8,divider:10},{tag:"8int_read_multiplier",type:"8int",functionCode:4,objectsCount:1,address:10,multiplier:10},{tag:"32int_read",type:"32int",functionCode:4,objectsCount:2,address:11},{tag:"64int_read",type:"64int",functionCode:4,objectsCount:4,address:13}],timeseries:[{tag:"8uint_read",type:"8uint",functionCode:4,objectsCount:1,address:17,reportStrategy:{type:"ON_REPORT_PERIOD",reportPeriod:15e3}},{tag:"16uint_read",type:"16uint",functionCode:4,objectsCount:2,address:18},{tag:"32uint_read",type:"32uint",functionCode:4,objectsCount:4,address:20},{tag:"64uint_read",type:"64uint",functionCode:4,objectsCount:1,address:24},{tag:"16float_read",type:"16float",functionCode:4,objectsCount:1,address:25},{tag:"32float_read",type:"32float",functionCode:4,objectsCount:2,address:26},{tag:"64float_read",type:"64float",functionCode:4,objectsCount:4,address:28}],attributeUpdates:[{tag:"shared_attribute_write",type:"32int",functionCode:6,objectsCount:2,address:29}],rpc:[{tag:"setValue",type:"bits",functionCode:5,objectsCount:1,address:31},{tag:"getValue",type:"bits",functionCode:1,objectsCount:1,address:31},{tag:"setCPUFanSpeed",type:"32int",functionCode:16,objectsCount:2,address:33},{tag:"getCPULoad",type:"32int",functionCode:4,objectsCount:2,address:35}]}]},slave:{type:"tcp",host:"127.0.0.1",port:5026,method:"socket",deviceName:"Modbus Slave Example",deviceType:"default",pollPeriod:5e3,sendDataToThingsBoard:!1,byteOrder:"LITTLE",wordOrder:"LITTLE",unitId:0,values:{holding_registers:{attributes:[{address:1,type:"string",tag:"sm",objectsCount:1,value:"ON"}],timeseries:[{address:2,type:"8int",tag:"smm",objectsCount:1,value:"12334"}],attributeUpdates:[{tag:"shared_attribute_write",type:"32int",functionCode:6,objectsCount:2,address:29,value:1243}],rpc:[{tag:"setValue",type:"bits",functionCode:5,objectsCount:1,address:31,value:1}]},coils_initializer:{attributes:[{address:5,type:"8int",tag:"coil",objectsCount:1,value:0}],timeseries:[],attributeUpdates:[],rpc:[]}}}},legacy:{master:{slaves:[{host:"127.0.0.1",port:5021,type:"tcp",method:"socket",timeout:35,byteOrder:"LITTLE",wordOrder:"LITTLE",retries:!0,retryOnEmpty:!0,retryOnInvalid:!0,pollPeriod:5e3,unitId:1,deviceName:"Temp Sensor",deviceType:"default",sendDataOnlyOnChange:!0,connectAttemptTimeMs:5e3,connectAttemptCount:5,waitAfterFailedAttemptsMs:3e5,attributes:[{tag:"string_read",type:"string",functionCode:4,objectsCount:4,address:1},{tag:"bits_read",type:"bits",functionCode:4,objectsCount:1,address:5},{tag:"16int_read",type:"16int",functionCode:4,objectsCount:1,address:7},{tag:"32int_read_divider",type:"32int",functionCode:4,objectsCount:2,address:8,divider:10},{tag:"32int_read",type:"32int",functionCode:4,objectsCount:2,address:11},{tag:"64int_read",type:"64int",functionCode:4,objectsCount:4,address:13}],timeseries:[{tag:"16uint_read",type:"16uint",functionCode:4,objectsCount:2,address:18},{tag:"32uint_read",type:"32uint",functionCode:4,objectsCount:4,address:20},{tag:"64uint_read",type:"64uint",functionCode:4,objectsCount:1,address:24},{tag:"16float_read",type:"16float",functionCode:4,objectsCount:1,address:25},{tag:"32float_read",type:"32float",functionCode:4,objectsCount:2,address:26},{tag:"64float_read",type:"64float",functionCode:4,objectsCount:4,address:28}],attributeUpdates:[{tag:"shared_attribute_write",type:"32int",functionCode:6,objectsCount:2,address:29}],rpc:[{tag:"setValue",type:"bits",functionCode:5,objectsCount:1,address:31},{tag:"getValue",type:"bits",functionCode:1,objectsCount:1,address:31},{tag:"setCPUFanSpeed",type:"32int",functionCode:16,objectsCount:2,address:33},{tag:"getCPULoad",type:"32int",functionCode:4,objectsCount:2,address:35}]}]},slave:{type:"tcp",host:"127.0.0.1",port:5026,method:"socket",deviceName:"Modbus Slave Example",deviceType:"default",pollPeriod:5e3,sendDataToThingsBoard:!1,byteOrder:"LITTLE",wordOrder:"LITTLE",unitId:0,values:{holding_registers:[{attributes:[{address:1,type:"string",tag:"sm",objectsCount:1,value:"ON"}],timeseries:[{address:2,type:"int",tag:"smm",objectsCount:1,value:"12334"}],attributeUpdates:[{tag:"shared_attribute_write",type:"32int",functionCode:6,objectsCount:2,address:29,value:1243}],rpc:[{tag:"setValue",type:"bits",functionCode:5,objectsCount:1,address:31,value:1}]}],coils_initializer:[{attributes:[{address:5,type:"string",tag:"sm",objectsCount:1,value:"12"}],timeseries:[],attributeUpdates:[],rpc:[]}]}}}},At={"3.5.2":{server:{url:"localhost:4840/freeopcua/server/",timeoutInMillis:5e3,scanPeriodInMillis:36e5,pollPeriodInMillis:5e3,enableSubscriptions:!0,subCheckPeriodInMillis:100,showMap:!1,security:"Basic128Rsa15",identity:{type:"anonymous"}},mapping:[{deviceNodePattern:"Root\\.Objects\\.Device1",deviceNodeSource:"path",deviceInfo:{deviceNameExpression:"Device ${Root\\.Objects\\.Device1\\.serialNumber}",deviceNameExpressionSource:"path",deviceProfileExpression:"Device",deviceProfileExpressionSource:"constant"},attributes:[{key:"temperature °C",type:"path",value:"${ns=2;i=5}"}],timeseries:[{key:"humidity",type:"path",value:"${Root\\.Objects\\.Device1\\.TemperatureAndHumiditySensor\\.Humidity}"},{key:"batteryLevel",type:"path",value:"${Battery\\.batteryLevel}"}],rpc_methods:[{method:"multiply",arguments:[{type:"integer",value:2},{type:"integer",value:4}]}],attributes_updates:[{key:"deviceName",type:"path",value:"Root\\.Objects\\.Device1\\.serialNumber"}]}]},legacy:{server:{name:"OPC-UA Default Server",url:"localhost:4840/freeopcua/server/",timeoutInMillis:5e3,scanPeriodInMillis:5e3,disableSubscriptions:!1,subCheckPeriodInMillis:100,showMap:!1,security:"Basic128Rsa15",identity:{type:"anonymous"},mapping:[{deviceNodePattern:"Root\\.Objects\\.Device1",deviceNamePattern:"Device ${Root\\.Objects\\.Device1\\.serialNumber}",attributes:[{key:"temperature °C",path:"${ns=2;i=5}"}],timeseries:[{key:"humidity",path:"${Root\\.Objects\\.Device1\\.TemperatureAndHumiditySensor\\.Humidity}"},{key:"batteryLevel",path:"${Battery\\.batteryLevel}"}],rpc_methods:[{method:"multiply",arguments:[2,4]}],attributes_updates:[{attributeOnThingsBoard:"deviceName",attributeOnDevice:"Root\\.Objects\\.Device1\\.serialNumber"}]}]}}},Ft={passiveScanMode:!0,showMap:!1,scanner:{timeout:1e4,deviceName:"Device name"},devices:[{name:"Temperature and humidity sensor",MACAddress:"4C:65:A8:DF:85:C0",pollPeriod:5e5,showMap:!1,timeout:1e4,connectRetry:5,connectRetryInSeconds:0,waitAfterConnectRetries:10,telemetry:[{key:"temperature",method:"notify",characteristicUUID:"226CAA55-6476-4566-7562-66734470666D",valueExpression:"[2]"},{key:"humidity",method:"notify",characteristicUUID:"226CAA55-6476-4566-7562-66734470666D",valueExpression:"[0]"}],attributes:[{key:"name",method:"read",characteristicUUID:"00002A00-0000-1000-8000-00805F9B34FB",valueExpression:"[0:2]cm [2:]A"},{key:"values",method:"read",characteristicUUID:"00002A00-0000-1000-8000-00805F9B34FB",valueExpression:"All values: [:]"}],attributeUpdates:[{attributeOnThingsBoard:"sharedName",characteristicUUID:"00002A00-0000-1000-8000-00805F9B34FB"}],serverSideRpc:[{methodRPC:"rpcMethod1",withResponse:!0,characteristicUUID:"00002A00-0000-1000-8000-00805F9B34FB",methodProcessing:"read"},{methodRPC:"rpcMethod2",withResponse:!0,characteristicUUID:"00002A00-0000-1000-8000-00805F9B34FB",methodProcessing:"write"},{methodRPC:"rpcMethod3",withResponse:!0,methodProcessing:"scan"}]}]},Rt={host:"http://127.0.0.1:5000",SSLVerify:!0,security:{type:"basic",username:"user",password:"password"},mapping:[{url:"getdata",httpMethod:"GET",httpHeaders:{ACCEPT:"application/json"},content:{name:"morpheus",job:"leader"},allowRedirects:!0,timeout:.5,scanPeriod:5,converter:{type:"json",deviceNameJsonExpression:"SD8500",deviceTypeJsonExpression:"SD",attributes:[{key:"serialNumber",type:"string",value:"${serial}"}],telemetry:[{key:"Maintainer",type:"string",value:"${Developer}"},{key:"combine",type:"string",value:"${Developer}:${hum}"}]}},{url:"get_info",httpMethod:"GET",httpHeaders:{ACCEPT:"application/json"},allowRedirects:!0,timeout:.5,scanPeriod:100,converter:{type:"custom",deviceNameJsonExpression:"SD8500",deviceTypeJsonExpression:"SD",extension:"CustomRequestUplinkConverter","extension-config":[{key:"Totaliser",type:"float",fromByte:0,toByte:4,byteorder:"big",signed:!0,multiplier:1},{key:"Flow",type:"int",fromByte:4,toByte:6,byteorder:"big",signed:!0,multiplier:.01},{key:"Temperature",type:"int",fromByte:8,toByte:10,byteorder:"big",signed:!0,multiplier:.01},{key:"Pressure",type:"int",fromByte:12,toByte:14,byteorder:"big",signed:!0,multiplier:.01},{key:"deviceStatus",type:"int",byteAddress:15,fromBit:4,toBit:8,byteorder:"big",signed:!1},{key:"OUT2",type:"int",byteAddress:15,fromBit:1,toBit:2,byteorder:"big"},{key:"OUT1",type:"int",byteAddress:15,fromBit:0,toBit:1,byteorder:"big"}]}}],attributeUpdates:[{httpMethod:"POST",httpHeaders:{"CONTENT-TYPE":"application/json"},timeout:.5,tries:3,allowRedirects:!0,deviceNameFilter:"SD.*",attributeFilter:"send_data",requestUrlExpression:"sensor/${deviceName}/${attributeKey}",requestValueExpression:'{"${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"echo",requestUrlExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",responseTimeout:1,httpMethod:"GET",requestValueExpression:"${params}",responseValueExpression:"${temp}",timeout:.5,tries:3,httpHeaders:{"Content-Type":"application/json"}},{deviceNameFilter:".*",methodFilter:"no-reply",requestUrlExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",httpMethod:"POST",requestValueExpression:"${params}",httpHeaders:{"Content-Type":"application/json"}}]},Bt={interface:"socketcan",channel:"vcan0",backend:{fd:!0},reconnectPeriod:5,devices:[{name:"Car",sendDataOnlyOnChange:!1,enableUnknownRpc:!0,strictEval:!1,attributes:[{key:"isDriverDoorOpened",nodeId:41,command:"2:2:big:8717",value:"4:1:int",expression:"bool(value & 0b00000100)",polling:{type:"once",dataInHex:"AB CD AB CD"}}],timeseries:[{key:"rpm",nodeId:1918,isExtendedId:!0,command:"2:2:big:48059",value:"4:2:big:int",expression:"value / 4",polling:{type:"always",period:5,dataInHex:"aaaa bbbb aaaa bbbb"}},{key:"milliage",nodeId:1918,isExtendedId:!0,value:"4:2:little:int",expression:"value * 10",polling:{type:"always",period:30,dataInHex:"aa bb cc dd ee ff aa bb"}}],attributeUpdates:[{attributeOnThingsBoard:"softwareVersion",nodeId:64,isExtendedId:!0,dataLength:4,dataExpression:"value + 5",dataByteorder:"little"}],serverSideRpc:[{method:"sendSameData",nodeId:4,isExtendedId:!0,isFd:!0,bitrateSwitch:!0,dataInHex:"aa bb cc dd ee ff    aa bb aa bb cc d ee ff"},{method:"setLightLevel",nodeId:5,dataLength:2,dataByteorder:"little",dataBefore:"00AA"},{method:"setSpeed",nodeId:16,dataAfter:"0102",dataExpression:"userSpeed if maxAllowedSpeed > userSpeed else maxAllowedSpeed"}]}]},Nt={"3.6.2":{application:{objectName:"TB_gateway",host:"0.0.0.0",port:"47808",objectIdentifier:599,maxApduLengthAccepted:1476,segmentationSupported:"segmentedBoth",vendorIdentifier:15},devices:[{deviceInfo:{deviceNameExpression:"BACnet Device ${objectName}",deviceProfileExpression:"default",deviceNameExpressionSource:"expression",deviceProfileExpressionSource:"constant"},host:"192.168.2.110",port:"47808",pollPeriod:1e4,attributes:[{key:"temperature",objectType:"analogOutput",objectId:"1",propertyId:"presentValue"}],timeseries:[{key:"state",objectType:"binaryValue",objectId:"1",propertyId:"presentValue"}],attributeUpdates:[{key:"brightness",objectType:"analogOutput",objectId:"1",propertyId:"presentValue"}],serverSideRpc:[{method:"set_state",requestType:"writeProperty",requestTimeout:1e4,objectType:"binaryOutput",objectId:"1",propertyId:"presentValue"},{method:"get_state",requestType:"readProperty",requestTimeout:1e4,objectType:"binaryOutput",objectId:"1",propertyId:"presentValue"}]}]},legacy:{general:{objectName:"TB_gateway",address:"0.0.0.0:47808",objectIdentifier:599,maxApduLengthAccepted:1476,segmentationSupported:"segmentedBoth",vendorIdentifier:15},devices:[{deviceName:"BACnet Device ${objectName}",deviceType:"default",address:"192.168.2.110:47808",pollPeriod:1e4,attributes:[{key:"temperature",type:"string",objectId:"analogOutput:1",propertyId:"presentValue"}],timeseries:[{key:"state",type:"bool",objectId:"binaryValue:1",propertyId:"presentValue"}],attributeUpdates:[{key:"brightness",requestType:"writeProperty",objectId:"analogOutput:1",propertyId:"presentValue"}],serverSideRpc:[{method:"set_state",requestType:"writeProperty",requestTimeout:1e4,objectId:"binaryOutput:1",propertyId:"presentValue"},{method:"get_state",requestType:"readProperty",requestTimeout:1e4,objectId:"binaryOutput:1",propertyId:"presentValue"}]}]}},Lt={connection:{str:"Driver={PostgreSQL};Server=localhost;Port=5432;Database=thingsboard;Uid=postgres;Pwd=postgres;",attributes:{autocommit:!0,timeout:0},encoding:"utf-8",decoding:{char:"utf-8",wchar:"utf-8",metadata:"utf-16le"},reconnect:!0,reconnectPeriod:60},pyodbc:{pooling:!1},polling:{query:"SELECT bool_v, str_v, dbl_v, long_v, entity_id, ts FROM ts_kv WHERE ts > ? ORDER BY ts ASC LIMIT 10",period:10,iterator:{column:"ts",query:"SELECT MIN(ts) - 1 FROM ts_kv",persistent:!1}},mapping:{device:{type:"postgres",name:"'ODBC ' + entity_id"},sendDataOnlyOnChange:!1,attributes:"*",timeseries:[{name:"value",value:"[i for i in [str_v, long_v, dbl_v,bool_v] if i is not None][0]"}]},serverSideRpc:{enableUnknownRpc:!1,overrideRpcConfig:!0,methods:["procedureOne",{name:"procedureTwo",args:["One",2,3]}]}},Vt={"3.7.2":{server:{host:"127.0.0.1",port:"5000",SSL:!1,security:{cert:"~/ssl/cert.pem",key:"~/ssl/key.pem"}},mapping:[{endpoint:"/my_devices",HTTPMethods:["POST"],security:{type:"anonymous"},converter:{type:"json",deviceInfo:{deviceNameExpressionSource:"request",deviceNameExpression:"${sensorName}",deviceProfileExpressionSource:"request",deviceProfileExpression:"${sensorType}"},attributes:[{type:"string",key:"model",value:"${sensorModel}"},{type:"string",key:"certificateNumber",value:"${certificateNumber}"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"}]}},{endpoint:"/anon1",HTTPMethods:["GET","POST"],security:{type:"anonymous"},converter:{type:"json",deviceInfo:{deviceNameExpressionSource:"constant",deviceNameExpression:"Device 2",deviceProfileExpressionSource:"constant",deviceProfileExpression:"default"},attributes:[{type:"string",key:"model",value:"Model2"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"}]}},{endpoint:"/anon2",HTTPMethods:["POST"],security:{type:"anonymous"},converter:{type:"custom",deviceInfo:{deviceNameExpressionSource:"constant",deviceNameExpression:"SuperAnonDevice",deviceProfileExpressionSource:"constant",deviceProfileExpression:"default"},extension:"CustomRestUplinkConverter",extensionConfig:{key:"Totaliser",datatype:"float",fromByte:0,toByte:4,byteorder:"big",signed:!0,multiplier:1}}}],requestsMapping:{attributeRequests:[{endpoint:"/sharedAttributes",type:"shared",HTTPMethods:["POST"],security:{type:"anonymous"},timeout:10,deviceNameExpression:"${deviceName}",attributeNameExpression:"${attribute}${attribute1}"}],attributeUpdates:[{HTTPMethod:"POST",SSLVerify:!1,httpHeaders:{"CONTENT-TYPE":"application/json"},security:{type:"anonymous"},timeout:.5,tries:3,allowRedirects:!0,deviceNameFilter:"SN.*",attributeFilter:".*",requestUrlExpression:"http://127.0.0.1:5001/",valueExpression:'{"deviceName":"${deviceName}","${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"echo",requestUrlExpression:"http://127.0.0.1:5001/${deviceName}",responseTimeout:1,HTTPMethod:"GET",valueExpression:"${params}",timeout:10,tries:3,httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}},{deviceNameFilter:"SN.*",methodFilter:"post_attributes",requestUrlExpression:"http://127.0.0.1:5000/my_devices",responseTimeout:1,HTTPMethod:"POST",valueExpression:'{"sensorName":"${deviceName}", "sensorModel":"${params.sensorModel}", "certificateNumber":"${params.certificateNumber}", "temp":"${params.temp}", "hum":"${params.hum}"}',timeout:10,tries:3,httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}},{deviceNameFilter:".*",methodFilter:"no-reply",requestUrlExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",HTTPMethod:"POST",valueExpression:"${params}",httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}}]}},legacy:{host:"127.0.0.1",port:"5000",SSL:!1,security:{cert:"~/ssl/cert.pem",key:"~/ssl/key.pem"},mapping:[{endpoint:"/my_devices",HTTPMethods:["POST"],security:{type:"anonymous"},converter:{type:"json",deviceNameExpression:"${sensorName}",deviceTypeExpression:"${sensorType}",attributes:[{type:"string",key:"model",value:"${sensorModel}"},{type:"string",key:"certificateNumber",value:"${certificateNumber}"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"}]}},{endpoint:"/anon1",HTTPMethods:["GET","POST"],security:{type:"anonymous"},converter:{type:"json",deviceNameExpression:"Device 2",deviceTypeExpression:"default",attributes:[{type:"string",key:"model",value:"Model2"}],timeseries:[{type:"double",key:"temperature",value:"${temp}"},{type:"double",key:"humidity",value:"${hum}"}]}},{endpoint:"/anon2",HTTPMethods:["POST"],security:{type:"anonymous"},converter:{type:"custom",deviceNameExpression:"SuperAnonDevice",deviceTypeExpression:"default",extension:"CustomRestUplinkConverter","extension-config":{key:"Totaliser",datatype:"float",fromByte:0,toByte:4,byteorder:"big",signed:!0,multiplier:1}}}],attributeRequests:[{endpoint:"/sharedAttributes",type:"shared",HTTPMethods:["POST"],security:{type:"anonymous"},timeout:10,deviceNameExpression:"${deviceName}",attributeNameExpression:"${attribute}${attribute1}"}],attributeUpdates:[{HTTPMethod:"POST",SSLVerify:!1,httpHeaders:{"CONTENT-TYPE":"application/json"},security:{type:"anonymous"},timeout:.5,tries:3,allowRedirects:!0,deviceNameFilter:"SN.*",attributeFilter:".*",requestUrlExpression:"http://127.0.0.1:5001/",valueExpression:'{"deviceName":"${deviceName}","${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"echo",requestUrlExpression:"http://127.0.0.1:5001/${deviceName}",responseTimeout:1,HTTPMethod:"GET",valueExpression:"${params}",timeout:10,tries:3,httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}},{deviceNameFilter:"SN.*",methodFilter:"post_attributes",requestUrlExpression:"http://127.0.0.1:5000/my_devices",responseTimeout:1,HTTPMethod:"POST",valueExpression:'{"sensorName":"${deviceName}", "sensorModel":"${params.sensorModel}", "certificateNumber":"${params.certificateNumber}", "temp":"${params.temp}", "hum":"${params.hum}"}',timeout:10,tries:3,httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}},{deviceNameFilter:".*",methodFilter:"no-reply",requestUrlExpression:"sensor/${deviceName}/request/${methodName}/${requestId}",HTTPMethod:"POST",valueExpression:"${params}",httpHeaders:{"Content-Type":"application/json"},security:{type:"anonymous"}}]}},qt={devices:[{deviceName:"SNMP router",deviceType:"snmp",ip:"snmp.live.gambitcommunications.com",port:161,pollPeriod:5e3,community:"public",attributes:[{key:"ReceivedFromGet",method:"get",oid:"1.3.6.1.2.1.1.1.0",timeout:6},{key:"ReceivedFromMultiGet",method:"multiget",oid:["1.3.6.1.2.1.1.1.0","1.3.6.1.2.1.1.2.0"],timeout:6},{key:"ReceivedFromGetNext",method:"getnext",oid:"1.3.6.1.2.1.1.1.0",timeout:6},{key:"ReceivedFromMultiWalk",method:"multiwalk",oid:["1.3.6.1.2.1.1.1.0","1.3.6.0.1.2.1"]},{key:"ReceivedFromBulkWalk",method:"bulkwalk",oid:["1.3.6.1.2.1.1.1.0","1.3.6.1.2.1.1.2.0"]},{key:"ReceivedFromBulkGet",method:"bulkget",scalarOid:["1.3.6.1.2.1.1.1.0","1.3.6.1.2.1.1.2.0"],repeatingOid:["1.3.6.1.2.1.1.1.0","1.3.6.1.2.1.1.2.0"],maxListSize:10}],telemetry:[{key:"ReceivedFromWalk",community:"private",method:"walk",oid:"1.3.6.1.2.1.1.1.0"},{key:"ReceivedFromTable",method:"table",oid:"1.3.6.1.2.1.1"}],attributeUpdateRequests:[{attributeFilter:"dataToSet",method:"set",oid:"1.3.6.1.2.1.1.1.0"},{attributeFilter:"dataToMultiSet",method:"multiset",mappings:{"1.2.3":"10","2.3.4":"${attribute}"}}],serverSideRpcRequests:[{requestFilter:"setData",method:"set",oid:"1.3.6.1.2.1.1.1.0"},{requestFilter:"multiSetData",method:"multiset"},{requestFilter:"getData",method:"get",oid:"1.3.6.1.2.1.1.1.0"},{requestFilter:"runBulkWalk",method:"bulkwalk",oid:["1.3.6.1.2.1.1.1.0","1.3.6.1.2.1.1.2.0"]}]},{deviceName:"SNMP router",deviceType:"snmp",ip:"127.0.0.1",pollPeriod:5e3,community:"public",converter:"CustomSNMPConverter",attributes:[{key:"ReceivedFromGetWithCustomConverter",method:"get",oid:"1.3.6.1.2.1.1.1.0"}],telemetry:[{key:"ReceivedFromTableWithCustomConverter",method:"table",oid:"1.3.6.1.2.1.1.1.0"}]}]},Gt={"3.7.4":{parameters:{host:"0.0.0.0",port:21,TLSSupport:!1,security:{type:"basic",username:"admin",password:"admin"}},paths:[{devicePatternName:"asd",devicePatternType:"Device",delimiter:",",path:"fol/*_hello*.txt",readMode:"FULL",maxFileSize:5,pollPeriod:5,txtFileDataView:"SLICED",withSortingFiles:!0,attributes:[{type:"string",key:"temp",value:"[1:]"},{type:"string",key:"tmp",value:"[0:1]"}],timeseries:[{type:"integer",key:"[0:1]",value:"[0:1]"},{type:"integer",key:"temp",value:"[1:]"}]}],requestsMapping:{attributeUpdates:[{path:"fol/hello.json",deviceNameFilter:".*",writingMode:"WRITE",valueExpression:"{'${attributeKey}':'${attributeValue}'}"}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"read",valueExpression:"${params}"},{deviceNameFilter:".*",methodFilter:"write",valueExpression:"${params}"}]}},legacy:{host:"0.0.0.0",port:21,TLSSupport:!1,security:{type:"basic",username:"admin",password:"admin"},paths:[{devicePatternName:"asd",devicePatternType:"Device",delimiter:",",path:"fol/*_hello*.txt",readMode:"FULL",maxFileSize:5,pollPeriod:5,txtFileDataView:"SLICED",withSortingFiles:!0,attributes:[{key:"temp",value:"[1:]"},{key:"tmp",value:"[0:1]"}],timeseries:[{type:"int",key:"[0:1]",value:"[0:1]"},{type:"int",key:"temp",value:"[1:]"}]}],attributeUpdates:[{path:"fol/hello.json",deviceNameFilter:".*",writingMode:"WRITE",valueExpression:"{'${attributeKey}':'${attributeValue}'}"}],serverSideRpc:[{deviceNameFilter:".*",methodFilter:"read",valueExpression:"${params}"},{deviceNameFilter:".*",methodFilter:"write",valueExpression:"${params}"}]}},zt={server:{jid:"gateway@localhost",password:"password",host:"localhost",port:5222,use_ssl:!1,disable_starttls:!1,force_starttls:!0,timeout:1e4,plugins:["xep_0030","xep_0323","xep_0325"]},devices:[{jid:"device@localhost/TMP_1101",deviceNameExpression:"${serialNumber}",deviceTypeExpression:"default",attributes:[{key:"temperature",value:"${temp}"}],timeseries:[{key:"humidity",value:"${hum}"},{key:"combination",value:"${temp}:${hum}"}],attributeUpdates:[{attributeOnThingsBoard:"shared",valueExpression:'{"${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{methodRPC:"rpc1",withResponse:!0,valueExpression:"${params}"}]}]},Ut={centralSystem:{name:"Central System",host:"127.0.0.1",port:9e3,connection:{type:"insecure"},security:[{type:"token",tokens:["Bearer ACCESS_TOKEN"]},{type:"basic",credentials:[{username:"admin",password:"admin"}]}]},chargePoints:[{idRegexpPattern:"bidon/hello/CP_1",deviceNameExpression:"${Vendor} ${Model}",deviceTypeExpression:"default",attributes:[{messageTypeFilter:"MeterValues,",key:"temp1",value:"${meter_value[:].sampled_value[:].value}"},{messageTypeFilter:"MeterValues,",key:"vendorId",value:"${connector_id}"}],timeseries:[{messageTypeFilter:"DataTransfer,",key:"temp",value:"${data.temp}"}],attributeUpdates:[{attributeOnThingsBoard:"shared",valueExpression:'{"${attributeKey}":"${attributeValue}"}'}],serverSideRpc:[{methodRPC:"rpc1",withResponse:!0,valueExpression:"${params}"}]}]};const jt=e("connectorConfigs",{[ct.MQTT]:Dt,[ct.MODBUS]:Ot,[ct.OPCUA]:At,[ct.BLE]:Ft,[ct.REQUEST]:Rt,[ct.CAN]:Bt,[ct.BACNET]:Nt,[ct.ODBC]:Lt,[ct.REST]:Vt,[ct.SNMP]:qt,[ct.FTP]:Gt,[ct.SOCKET]:Pt,[ct.XMPP]:zt,[ct.OCPP]:Ut,[ct.KNX]:{3.7:{logLevel:"INFO",client:{type:"AUTOMATIC",addressFormat:"LONG",gatewayIP:"127.0.0.1",gatewayPort:3671,autoReconnect:!0,autoReconnectWait:3,gatewaysScanner:{enabled:!0,scanPeriod:3,stopOnFound:!1}},devices:[{deviceInfo:{deviceNameDataType:"string",deviceNameExpressionSource:"expression",deviceNameExpression:"Device ${1/0/5}",deviceProfileDataType:"none",deviceProfileExpressionSource:"constant",deviceProfileNameExpression:"default"},pollPeriod:5e3,attributes:[{type:"temperature",key:"temperature",groupAddress:"1/0/6"}],timeseries:[{type:"humidity",key:"humidity",groupAddress:"1/0/7"}]}],attributeUpdates:[{deviceNameFilter:".*",dataType:"precent_U8",groupAddress:"1/0/9",key:"brightness"}],serverSideRpc:[{requestType:"read",deviceNameFilter:".*",method:"get_name",dataType:"string",groupAddress:"1/0/5"},{requestType:"write",deviceNameFilter:".*",method:"set_name",dataType:"string",groupAddress:"1/0/5"}]}}});function Ht(e){const t=jt[e];if(!t)throw new Error("No default config found");return t}var Wt;e("ModbusDataType",Wt),function(e){e.STRING="string",e.BYTES="bytes",e.BITS="bits",e.INT8="8int",e.UINT8="8uint",e.INT16="16int",e.UINT16="16uint",e.FLOAT16="16float",e.INT32="32int",e.UINT32="32uint",e.FLOAT32="32float",e.INT64="64int",e.UINT64="64uint",e.FLOAT64="64float"}(Wt||e("ModbusDataType",Wt={}));const $t=e("ModbusEditableDataTypes",[Wt.BYTES,Wt.BITS,Wt.STRING]);var Kt,Yt;e("ModbusObjectCountByDataType",Kt),function(e){e[e["8int"]=1]="8int",e[e["8uint"]=1]="8uint",e[e["16int"]=1]="16int",e[e["16uint"]=1]="16uint",e[e["16float"]=1]="16float",e[e["32int"]=2]="32int",e[e["32uint"]=2]="32uint",e[e["32float"]=2]="32float",e[e["64int"]=4]="64int",e[e["64uint"]=4]="64uint",e[e["64float"]=4]="64float"}(Kt||e("ModbusObjectCountByDataType",Kt={})),e("MappingValueType",Yt),function(e){e.STRING="string",e.INTEGER="integer",e.DOUBLE="double",e.BOOLEAN="boolean"}(Yt||e("MappingValueType",Yt={}));const Xt=e("mappingValueTypesMap",new Map([[Yt.STRING,{name:"value.string",icon:"mdi:format-text"}],[Yt.INTEGER,{name:"value.integer",icon:"mdi:numeric"}],[Yt.DOUBLE,{name:"value.double",icon:"mdi:numeric"}],[Yt.BOOLEAN,{name:"value.boolean",icon:"mdi:checkbox-marked-outline"}]])),Zt=e("ModbusFunctionCodeTranslationsMap",new Map([[1,"gateway.function-codes.read-coils"],[2,"gateway.function-codes.read-discrete-inputs"],[3,"gateway.function-codes.read-multiple-holding-registers"],[4,"gateway.function-codes.read-input-registers"],[5,"gateway.function-codes.write-single-coil"],[6,"gateway.function-codes.write-single-holding-register"],[15,"gateway.function-codes.write-multiple-coils"],[16,"gateway.function-codes.write-multiple-holding-registers"]]));var Qt,Jt,en;e("ConfigurationModes",Qt),function(e){e.BASIC="basic",e.ADVANCED="advanced"}(Qt||e("ConfigurationModes",Qt={})),e("ReportStrategyType",Jt),function(e){e.OnChange="ON_CHANGE",e.OnReportPeriod="ON_REPORT_PERIOD",e.OnChangeOrReportPeriod="ON_CHANGE_OR_REPORT_PERIOD",e.OnReceived="ON_RECEIVED"}(Jt||e("ReportStrategyType",Jt={})),e("ReportStrategyDefaultValue",en),function(e){e[e.Gateway=6e4]="Gateway",e[e.Connector=6e4]="Connector",e[e.Device=3e4]="Device",e[e.Key=15e3]="Key"}(en||e("ReportStrategyDefaultValue",en={}));const tn=e("ReportStrategyTypeTranslationsMap",new Map([[Jt.OnChange,"gateway.report-strategy.on-change"],[Jt.OnReportPeriod,"gateway.report-strategy.on-report-period"],[Jt.OnChangeOrReportPeriod,"gateway.report-strategy.on-change-or-report-period"],[Jt.OnReceived,"gateway.report-strategy.on-received"]])),nn=e("numberInputPattern",new RegExp(/^\d{1,15}(\.\d{1,15})?$/)),an=e("noLeadTrailSpacesRegex",/^\S+(?: \S+)*$/),rn=e("integerRegex",/^[-+]?\d+$/),on=e("nonZeroFloat",/^-?(?!0(\.0+)?$)\d+(\.\d+)?$/);var sn;!function(e){e.EXCEPTION="EXCEPTION"}(sn||(sn={}));const ln={...lt,...sn},pn=()=>[10,20,30];function cn(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",19),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).$implicit,a=t.ɵɵnextContext();return t.ɵɵresetView(a.onTabChanged(n))})),t.ɵɵtext(1),t.ɵɵelementEnd()}if(2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("active",a.activeLink.name===e.name),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.name," ")}}function dn(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",20),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"widgets.gateway.created-time")))}function un(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtext(1),t.ɵɵpipe(2,"date"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind2(2,1,e.ts,"yyyy-MM-dd HH:mm:ss")," ")}}function mn(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",21),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"widgets.gateway.level")))}function hn(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell")(1,"span"),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵclassMap(a.statusClass(e.status)),t.ɵɵadvance(),t.ɵɵtextInterpolate(e.status)}}function gn(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",22),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"widgets.gateway.message")))}function fn(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵclassMap(a.statusClassMsg(e.status)),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.message," ")}}function yn(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",23)}function vn(e,n){1&e&&t.ɵɵelement(0,"mat-row",23)}class bn{constructor(){this.displayedColumns=["ts","status","message"],this.gatewayLogLinks=[{name:"General",key:"LOGS"},{name:"Service",key:"SERVICE_LOGS"},{name:"Connection",key:"CONNECTION_LOGS"},{name:"Storage",key:"STORAGE_LOGS"},{key:"EXTENSIONS_LOGS",name:"Extension"}];const e={property:"ts",direction:w.DESC};this.pageLink=new S(10,0,null,e),this.dataSource=new b([])}ngOnInit(){this.updateWidgetTitle()}ngAfterViewInit(){if(this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.ctx.defaultSubscription.onTimewindowChangeFunction=e=>(this.ctx.defaultSubscription.options.timeWindowConfig=e,this.ctx.defaultSubscription.updateDataSubscriptions(),e),this.ctx.settings.isConnectorLog&&this.ctx.settings.connectorLogState){const e=this.ctx.stateController.getStateParams()[this.ctx.settings.connectorLogState];this.logLinks=[{key:`${e.key}_LOGS`,name:"Connector",filterFn:e=>!e.message.includes("_converter.py")},{key:`${e.key}_converter_LOGS`,name:"Converter",filterFn:e=>e.message.includes("_converter.py")}]}else this.logLinks=this.gatewayLogLinks;this.activeLink=this.logLinks[0],this.changeSubscription()}updateWidgetTitle(){if(this.ctx.settings.isConnectorLog&&this.ctx.settings.connectorLogState){const e=this.ctx.widgetConfig.title,t="${connectorName}";if(e.includes(t)){const n=this.ctx.stateController.getStateParams()[this.ctx.settings.connectorLogState];this.ctx.widgetTitle=e.replace(t,n.key)}}}updateData(){if(this.ctx.defaultSubscription.data.length&&this.ctx.defaultSubscription.data[0]){let e=this.ctx.defaultSubscription.data[0].data.map((e=>{const t={ts:e[0],key:this.activeLink.key,message:e[1],status:"INVALID LOG FORMAT"};try{t.message=/\[(.*)/.exec(e[1])[0]}catch(n){t.message=e[1]}try{t.status=e[1].match(/\|(\w+)\|/)[1]}catch(e){t.status="INVALID LOG FORMAT"}return t}));this.activeLink.filterFn&&(e=e.filter((e=>this.activeLink.filterFn(e)))),this.dataSource.data=e}}onTabChanged(e){this.activeLink=e,this.changeSubscription()}statusClass(e){switch(e){case ln.DEBUG:return"status status-debug";case ln.WARNING:return"status status-warning";case ln.ERROR:case ln.EXCEPTION:return"status status-error";default:return"status status-info"}}statusClassMsg(e){if(e===ln.EXCEPTION)return"msg-status-exception"}trackByLogTs(e,t){return t.ts}changeSubscription(){this.ctx.datasources&&this.ctx.datasources[0].entity&&this.ctx.defaultSubscription.options.datasources&&(this.ctx.defaultSubscription.options.datasources[0].dataKeys=[{name:this.activeLink.key,type:C.timeseries,settings:{}}],this.ctx.defaultSubscription.unsubscribe(),this.ctx.defaultSubscription.updateDataSubscriptions(),this.ctx.defaultSubscription.callbacks.onDataUpdated=()=>{this.updateData()})}static{this.ɵfac=function(e){return new(e||bn)}}static{this.ɵcmp=t.ɵɵdefineComponent({type:bn,selectors:[["tb-gateway-logs"]],viewQuery:function(e,n){if(1&e&&(t.ɵɵviewQuery(v,5),t.ɵɵviewQuery(x,5)),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.sort=e.first),t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.paginator=e.first)}},inputs:{ctx:"ctx",dialogRef:"dialogRef"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:23,vars:21,consts:[["tabPanel",""],[1,"flex","h-full","flex-col"],["mat-tab-nav-bar","",3,"tabPanel"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],[1,"flex-1","overflow-auto"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","ts"],["mat-sort-header","","style","width: 20%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","status"],["mat-sort-header","","style","width: 10%",4,"matHeaderCellDef"],["matColumnDef","message"],["mat-sort-header","","style","width: 70%",4,"matHeaderCellDef"],[3,"class",4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",4,"matRowDef","matRowDefColumns"],[1,"no-data-found","flex-1","items-center","justify-center"],[1,"flex-1"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-tab-link","",3,"click","active"],["mat-sort-header","",2,"width","20%"],["mat-sort-header","",2,"width","10%"],["mat-sort-header","",2,"width","70%"],[1,"mat-row-select"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1)(1,"nav",2),t.ɵɵtemplate(2,cn,2,2,"a",3),t.ɵɵelementEnd(),t.ɵɵelement(3,"mat-tab-nav-panel",null,0),t.ɵɵelementStart(5,"div",4)(6,"table",5),t.ɵɵelementContainerStart(7,6),t.ɵɵtemplate(8,dn,3,3,"mat-header-cell",7)(9,un,3,4,"mat-cell",8),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(10,9),t.ɵɵtemplate(11,mn,3,3,"mat-header-cell",10)(12,hn,3,3,"mat-cell",8),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(13,11),t.ɵɵtemplate(14,gn,3,3,"mat-header-cell",12)(15,fn,2,3,"mat-cell",13),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(16,yn,1,0,"mat-header-row",14)(17,vn,1,0,"mat-row",15),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"span",16),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(21,"span",17),t.ɵɵelementEnd(),t.ɵɵelement(22,"mat-paginator",18),t.ɵɵelementEnd()),2&e){const e=t.ɵɵreference(4);t.ɵɵadvance(),t.ɵɵproperty("tabPanel",e),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.logLinks),t.ɵɵadvance(4),t.ɵɵproperty("dataSource",n.dataSource)("trackBy",n.trackByLogTs)("matSortActive",n.pageLink.sortOrder.property)("matSortDirection",n.pageLink.sortDirection()),t.ɵɵadvance(10),t.ɵɵproperty("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",n.displayedColumns),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",0!==n.dataSource.data.length),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(20,18,"attribute.no-telemetry-text")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",0===n.dataSource.data.length),t.ɵɵadvance(),t.ɵɵproperty("length",n.dataSource.data.length)("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",t.ɵɵpureFunction0(20,pn))}},dependencies:t.ɵɵgetComponentDepsFactory(bn,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-x:auto;padding:0}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{border-radius:20px;font-weight:500;padding:5px 15px}[_nghost-%COMP%]   .status-debug[_ngcontent-%COMP%]{color:green;background:#0080001a}[_nghost-%COMP%]   .status-warning[_ngcontent-%COMP%]{color:orange;background:#ffa5001a}[_nghost-%COMP%]   .status-error[_ngcontent-%COMP%]{color:red;background:#ff00001a}[_nghost-%COMP%]   .status-info[_ngcontent-%COMP%]{color:#00f;background:#0000801a}[_nghost-%COMP%]   .msg-status-exception[_ngcontent-%COMP%]{color:red}']})}}
/**
 * @license Angular v18.2.6
 * (c) 2010-2024 Google LLC. https://angular.io/
 * License: MIT
 */
function xn(e){e||(n(xn),e=a(i));const t=new Z((t=>e.onDestroy(t.next.bind(t))));return e=>e.pipe(le(t))}e("GatewayLogsComponent",bn);function wn(e,t){!t?.injector&&n(wn);const l=t?.injector??a(r),p=new Q(1),c=o((()=>{let t;try{t=e()}catch(e){return void s((()=>p.error(e)))}s((()=>p.next(t)))}),{injector:l,manualCleanup:!0});return l.get(i).onDestroy((()=>{c.destroy(),p.complete()})),p.asObservable()}const Sn=["commandInput"],Cn=(e,t)=>t.attributeOnGateway,_n=e=>({command:e});function Tn(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",10),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.clear())})),t.ɵɵelementStart(2,"mat-icon",11),t.ɵɵtext(3,"close"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"action.clear"))}function In(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",12),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.onCreateNewClick(n))})),t.ɵɵelementStart(1,"span",13),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"notification.create-new")))}function En(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",8),t.ɵɵelement(1,"span",14),t.ɵɵpipe(2,"async"),t.ɵɵpipe(3,"highlight"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(3,4,e.attributeOnGateway,t.ɵɵpipeBind1(2,2,a.searchText$)),t.ɵɵsanitizeHtml)}}function Mn(e,n){if(1&e&&(t.ɵɵtext(0),t.ɵɵpipe(1,"async"),t.ɵɵpipe(2,"translate")),2&e){const e=t.ɵɵnextContext(2);t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind2(2,3,"gateway.statistics.no-commands-matching",t.ɵɵpureFunction1(6,_n,e.truncate.transform(t.ɵɵpipeBind1(1,1,e.searchText$),!0,6,"...")))," ")}}function kn(e,n){1&e&&(t.ɵɵtext(0),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(1,1,"gateway.statistics.no-command-found")," ")}function Pn(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-option",9)(1,"div",15),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(2,"span"),t.ɵɵtemplate(3,Mn,3,8),t.ɵɵpipe(4,"async"),t.ɵɵtemplate(5,kn,2,3),t.ɵɵelementStart(6,"a",16),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.onCreateNewClick(n))})),t.ɵɵtext(7,"gateway.create-new-one"),t.ɵɵelementEnd()()()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("value",null),t.ɵɵadvance(3),t.ɵɵconditional(t.ɵɵpipeBind1(4,2,e.searchText$)?3:5)}}class Dn{constructor(e,t){this.truncate=e,this.fb=t,this.commands=l(),this.onCreateNewClicked=p(),this.selectStatisticsCommandControl=this.fb.control({}),this.searchText$=this.selectStatisticsCommandControl.valueChanges.pipe(pe((e=>e?"string"==typeof e?e:e?.attributeOnGateway:"")),ce(),J(1)),this.filteredCommands$=ee([this.searchText$,wn(this.commands)]).pipe(de(150),pe((([e,t])=>{const n=t.find((t=>t.attributeOnGateway===e))??null,a=this.selectStatisticsCommandControl.value;return"string"==typeof a&&n?.attributeOnGateway!==e||this.selectStatisticsCommandControl.patchValue(n,{emitEvent:!Se(n,a)}),t.filter((t=>t.attributeOnGateway.toLowerCase().includes(e?.toLowerCase()??"")))})),J(1)),this.onChanges=e=>{},this.selectStatisticsCommandControl.valueChanges.pipe(xn()).subscribe((e=>this.onChanges(e)))}registerOnChange(e){this.onChanges=e}registerOnTouched(e){}writeValue(e){this.selectStatisticsCommandControl.patchValue(e)}displayCommandFn(e){return e?e.attributeOnGateway:null}clear(){this.selectStatisticsCommandControl.patchValue(null,{emitEvent:!0}),setTimeout((()=>{this.commandInput.nativeElement.blur(),this.commandInput.nativeElement.focus()}),0)}onCreateNewClick(e){e.stopPropagation(),this.onCreateNewClicked.emit()}static{this.ɵfac=function(e){return new(e||Dn)(t.ɵɵdirectiveInject(T.TruncatePipe),t.ɵɵdirectiveInject(H.UntypedFormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Dn,selectors:[["tb-statistics-commands-autocomplete"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(Sn,7),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.commandInput=e.first)}},inputs:{commands:[1,"commands"]},outputs:{onCreateNewClicked:"onCreateNewClicked"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>Dn)),multi:!0}]),t.ɵɵStandaloneFeature],decls:14,vars:10,consts:[["commandInput",""],["commandAutocomplete","matAutocomplete"],["appearance","outline",1,"mat-block"],["translate",""],["matInput","","type","text",3,"formControl","matAutocomplete"],["type","button","matTooltipPosition","above","matSuffix","","mat-icon-button","","aria-label","Clear",1,"action-button",3,"matTooltip"],["mat-button","","color","primary","matSuffix","",1,"mr-2"],[1,"tb-autocomplete",3,"displayWith"],[3,"value"],[1,"tb-not-found",3,"value"],["type","button","matTooltipPosition","above","matSuffix","","mat-icon-button","","aria-label","Clear",1,"action-button",3,"click","matTooltip"],[1,"material-icons"],["mat-button","","color","primary","matSuffix","",1,"mr-2",3,"click"],[1,"whitespace-nowrap"],[3,"innerHTML"],[1,"tb-not-found-content",3,"click"],["translate","",3,"click"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field",2)(1,"mat-label",3),t.ɵɵtext(2,"gateway.statistics.name"),t.ɵɵelementEnd(),t.ɵɵelement(3,"input",4,0),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,Tn,4,3,"button",5)(7,In,4,3,"button",6),t.ɵɵelementStart(8,"mat-autocomplete",7,1),t.ɵɵrepeaterCreate(10,En,4,7,"mat-option",8,Cn,!1,Pn,8,4,"mat-option",9),t.ɵɵpipe(13,"async"),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵreference(9);t.ɵɵadvance(3),t.ɵɵproperty("formControl",n.selectStatisticsCommandControl)("matAutocomplete",e),t.ɵɵattribute("aria-label",t.ɵɵpipeBind1(5,6,"gateway.statistics.command")),t.ɵɵadvance(3),t.ɵɵconditional(n.selectStatisticsCommandControl.value?6:7),t.ɵɵadvance(2),t.ɵɵproperty("displayWith",n.displayCommandFn),t.ɵɵadvance(2),t.ɵɵrepeater(t.ɵɵpipeBind1(13,8,n.filteredCommands$))}},dependencies:t.ɵɵgetComponentDepsFactory(Dn,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none;color:inherit}[_nghost-%COMP%]   .action-button[_ngcontent-%COMP%]{opacity:.7}']})}}const On=()=>["createdTime","message"];function An(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",12),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"widgets.gateway.created-time")))}function Fn(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",13),t.ɵɵtext(1),t.ɵɵpipe(2,"date"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(2,1,e[0],"yyyy-MM-dd HH:mm:ss"))}}function Rn(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",14),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"widgets.gateway.message")," "))}function Bn(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell")(1,"div",15),t.ɵɵtext(2),t.ɵɵelement(3,"tb-copy-button",16),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",e[1]," "),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tooltipText",t.ɵɵpipeBind1(4,3,"gateway.statistics.copy-message")),t.ɵɵproperty("copyText",e[1])}}function Nn(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",17)}function Ln(e,n){1&e&&t.ɵɵelement(0,"mat-row",17)}class Vn{constructor(){this.data=l([]),this.defaultPageSizes=[10,20,30],this.defaultSortOrder={property:"0",direction:w.DESC},this.pageLink=new S(this.defaultPageSizes[0],0,null,this.defaultSortOrder),this.dataSource=new b([]),o((()=>{this.dataSource.data=this.data()}))}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.sortingDataAccessor=e=>e[Number(this.sort?.active)||0]}static{this.ɵfac=function(e){return new(e||Vn)}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Vn,selectors:[["tb-custom-statistics-table"]],viewQuery:function(e,n){if(1&e&&(t.ɵɵviewQuery(v,5),t.ɵɵviewQuery(x,5)),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.sort=e.first),t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.paginator=e.first)}},inputs:{data:[1,"data"]},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:12,vars:13,consts:[[1,"flex","h-full","flex-col"],[1,"flex-1","overflow-auto"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","createdTime"],["mat-sort-header","","class","w-1/5",4,"matHeaderCellDef"],["class","!w-1/5",4,"matCellDef"],["matColumnDef","message"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["mat-sort-header","",1,"w-1/5"],[1,"!w-1/5"],["mat-sort-header",""],[1,"flex","items-center","justify-between"],["tooltipPosition","above","icon","content_copy",1,"copy-content",3,"copyText","tooltipText"],[1,"mat-row-select"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"table",2),t.ɵɵelementContainerStart(3,3),t.ɵɵtemplate(4,An,3,3,"mat-header-cell",4)(5,Fn,3,4,"mat-cell",5),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(6,6),t.ɵɵtemplate(7,Rn,3,3,"mat-header-cell",7)(8,Bn,5,5,"mat-cell",8),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(9,Nn,1,0,"mat-header-row",9)(10,Ln,1,0,"mat-row",10),t.ɵɵelementEnd()(),t.ɵɵelement(11,"mat-paginator",11),t.ɵɵelementEnd()),2&e){let e;t.ɵɵadvance(2),t.ɵɵproperty("dataSource",n.dataSource)("matSortActive",n.pageLink.sortOrder.property)("matSortDirection",n.pageLink.sortDirection()),t.ɵɵadvance(7),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(11,On))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(12,On)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",!n.dataSource.data.length),t.ɵɵproperty("length",null!==(e=null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length)&&void 0!==e?e:0)("pageSize",n.defaultPageSizes[0])("pageSizeOptions",n.defaultPageSizes)}},dependencies:t.ɵɵgetComponentDepsFactory(Vn,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]  .copy-content .mat-icon{padding:4px;font-size:18px}']})}}class qn{constructor(e,t,n){this.elementRef=e,this.renderer=t,this.tooltip=n,this.tooltipEnabled=!0,this.position="above",this.destroy$=new te}ngOnInit(){this.observeMouseEvents(),this.applyTruncationStyles()}ngAfterViewInit(){this.tooltip.position=this.position}ngOnDestroy(){this.tooltip._isTooltipVisible()&&this.hideTooltip(),this.destroy$.next(),this.destroy$.complete()}observeMouseEvents(){ne(this.elementRef.nativeElement,"mouseenter").pipe(ue((()=>this.tooltipEnabled)),ue((()=>this.isOverflown(this.elementRef.nativeElement))),me((()=>this.showTooltip())),le(this.destroy$)).subscribe(),ne(this.elementRef.nativeElement,"mouseleave").pipe(ue((()=>this.tooltipEnabled)),ue((()=>this.tooltip._isTooltipVisible())),me((()=>this.hideTooltip())),le(this.destroy$)).subscribe()}applyTruncationStyles(){this.renderer.setStyle(this.elementRef.nativeElement,"white-space","nowrap"),this.renderer.setStyle(this.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.elementRef.nativeElement,"text-overflow","ellipsis")}isOverflown(e){return e.clientWidth<e.scrollWidth}showTooltip(){this.tooltip.message=this.text||this.elementRef.nativeElement.innerText,this.tooltip.show()}hideTooltip(){this.tooltip.hide()}static{this.ɵfac=function(e){return new(e||qn)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(Ue.MatTooltip))}}static{this.ɵdir=t.ɵɵdefineDirective({type:qn,selectors:[["","tbTruncateWithTooltip",""]],inputs:{text:[0,"tbTruncateWithTooltip","text"],tooltipEnabled:"tooltipEnabled",position:"position"},standalone:!0,features:[t.ɵɵProvidersFeature([je])]})}}e("TruncateWithTooltipDirective",qn),Ge([I()],qn.prototype,"tooltipEnabled",void 0);class Gn{set chips(e){Se(this.chipsValue,e)||(this.chipsValue=e,setTimeout((()=>{this.adjustChips()}),0))}constructor(e,t,n,a){this.el=e,this.renderer=t,this.translate=n,this.window=a,this.destroy$=new te,this.renderer.setStyle(this.el.nativeElement,"max-height","48px"),this.renderer.setStyle(this.el.nativeElement,"overflow","auto"),ne(a,"resize").pipe(le(this.destroy$)).subscribe((()=>{this.adjustChips()})),this.observeIntersection()}observeIntersection(){this.intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&this.adjustChips()}))})),this.intersectionObserver.observe(this.el.nativeElement)}adjustChips(){const e=this.el.nativeElement,t=this.el.nativeElement.querySelector(".ellipsis-chip"),n=parseFloat(this.window.getComputedStyle(t).marginLeft)||0,a=e.querySelectorAll("mat-chip:not(.ellipsis-chip)");if(this.chipsValue.length>1){const i=this.el.nativeElement.querySelector(".ellipsis-text");this.renderer.setStyle(t,"display","inline-flex"),i.innerHTML=this.translate.instant("gateway.ellipsis-chips-text",{count:this.chipsValue.length});const r=e.offsetWidth-(t.offsetWidth+n);let o=0,s=0;a.forEach((e=>{this.renderer.setStyle(e,"display","inline-flex");const t=e.querySelector(".mdc-evolution-chip__text-label");this.applyMaxChipTextWidth(t,r/3),o+(e.offsetWidth+n)<=r&&s<this.chipsValue.length?(s++,o+=e.offsetWidth+n):this.renderer.setStyle(e,"display","none")})),i.innerHTML=this.translate.instant("gateway.ellipsis-chips-text",{count:this.chipsValue.length-s}),s===this.chipsValue?.length&&this.renderer.setStyle(t,"display","none")}else if(1===this.chipsValue.length){const i=a[0].querySelector(".mdc-evolution-chip__action"),r=i.querySelector(".mdc-evolution-chip__text-label"),o=parseFloat(this.window.getComputedStyle(i).paddingLeft)||0,s=parseFloat(this.window.getComputedStyle(i).paddingRight)||0,l=e.offsetWidth-n-(o+s);this.renderer.setStyle(t,"display","none"),this.renderer.setStyle(a[0],"display","inline-flex"),this.applyMaxChipTextWidth(r,l)}else this.renderer.setStyle(t,"display","none")}applyMaxChipTextWidth(e,t){this.renderer.setStyle(e,"max-width",t+"px"),this.renderer.setStyle(e,"overflow","hidden"),this.renderer.setStyle(e,"text-overflow","ellipsis"),this.renderer.setStyle(e,"white-space","nowrap")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.intersectionObserver.disconnect()}static{this.ɵfac=function(e){return new(e||Gn)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(Ce))}}static{this.ɵdir=t.ɵɵdefineDirective({type:Gn,selectors:[["","tbEllipsisChipList",""]],inputs:{chips:[0,"tbEllipsisChipList","chips"]},standalone:!0})}}e("EllipsisChipListDirective",Gn);class zn{constructor(e,t,n,a){this.attributeService=e,this.telemetryWsService=t,this.zone=n,this.translate=a,this.attributesSubject=new ae([]),this.pageDataSubject=new ae(E()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new Ke(!0,[])}connect(e){return this.attributesSubject.asObservable()}disconnect(e){this.attributesSubject.complete(),this.pageDataSubject.complete(),this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)}loadAttributes(e,t,n,a=!1){a&&(this.allAttributes=null,this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)),this.selection.clear();const i=new Q;return this.fetchAttributes(e,t,n).pipe(he((()=>ie(E())))).subscribe((e=>{this.attributesSubject.next(e.data),this.pageDataSubject.next(e),i.next(e)})),i}fetchAttributes(e,t,n){return this.getAllAttributes(e,t).pipe(pe((e=>{const t=e.filter((e=>0!==e.lastUpdateTs));return n.filterData(t)})))}getAllAttributes(e,t){if(!this.allAttributes){let n;M.get(t)?(this.telemetrySubscriber=k.createEntityAttributesSubscription(this.telemetryWsService,e,t,this.zone),this.telemetrySubscriber.subscribe(),n=this.telemetrySubscriber.attributeData$()):n=this.attributeService.getEntityAttributes(e,t),this.allAttributes=n.pipe(ge(1),fe())}return this.allAttributes}isAllSelected(){const e=this.selection.selected.length;return this.attributesSubject.pipe(pe((t=>e===t.length)))}isEmpty(){return this.attributesSubject.pipe(pe((e=>!e.length)))}total(){return this.pageDataSubject.pipe(pe((e=>e.totalElements)))}masterToggle(){this.attributesSubject.pipe(me((e=>{this.selection.selected.length===e.length?this.selection.clear():e.forEach((e=>{this.selection.select(e)}))})),ye(1)).subscribe()}}e("AttributeDatasource",zn);const Un=()=>({maxWidth:"970px"});function jn(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-expansion-panel",4)(1,"mat-expansion-panel-header",5)(2,"mat-panel-title")(3,"mat-slide-toggle",6),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(4,"mat-label"),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementContainer(7,7),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(),n=t.ɵɵreference(5);t.ɵɵproperty("expanded",e.showStrategyControl.value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",e.showStrategyControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,4,"gateway.report-strategy.label")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n)}}function Hn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",8),t.ɵɵtext(1,"gateway.report-strategy.label"),t.ɵɵelementEnd(),t.ɵɵelementContainer(2,7)),2&e){t.ɵɵnextContext();const e=t.ɵɵreference(5);t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",e)}}function Wn(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",16),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.ReportTypeTranslateMap.get(e)))}}function $n(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",19),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(3);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.reportStrategyFormGroup.get("reportPeriod").hasError("min")?"gateway.hints.report-period-range":"gateway.hints.report-period-required"))}}function Kn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",17),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",12),t.ɵɵelement(5,"input",18),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,$n,3,3,"mat-icon",19),t.ɵɵelementStart(8,"span",20),t.ɵɵtext(9,"gateway.suffix.ms"),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,"gateway.report-strategy.report-period")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.reportStrategyFormGroup.get("reportPeriod").hasError("required")||e.reportStrategyFormGroup.get("reportPeriod").hasError("min")&&e.reportStrategyFormGroup.get("reportPeriod").touched?7:-1)}}function Yn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",10),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelement(4,"div",11),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",12)(6,"mat-select",13),t.ɵɵtemplate(7,Wn,3,4,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵtemplate(8,Kn,10,7,"div",15)),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,5,"gateway.type")," "),t.ɵɵadvance(2),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/report-strategy_fn")("tb-help-popup-style",t.ɵɵpureFunction0(7,Un)),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.reportStrategyTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.reportStrategyFormGroup.get("type").value!==e.ReportStrategyType.OnChange&&e.reportStrategyFormGroup.get("type").value!==e.ReportStrategyType.OnReceived)}}class Xn{constructor(e){this.fb=e,this.isExpansionMode=!1,this.defaultValue=en.Key,this.reportStrategyTypes=Object.values(Jt),this.ReportTypeTranslateMap=tn,this.ReportStrategyType=Jt,this.destroy$=new te,this.showStrategyControl=this.fb.control(!1),this.reportStrategyFormGroup=this.fb.group({type:[{value:Jt.OnReportPeriod,disabled:!0},[]],reportPeriod:[{value:this.defaultValue,disabled:!0},[$.required,$.min(100)]]}),this.observeStrategyFormChange(),this.observeStrategyToggle()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(e){this.isExpansionMode&&this.showStrategyControl.setValue(!!e,{emitEvent:!1}),e&&this.reportStrategyFormGroup.enable({emitEvent:!1});const{type:t=Jt.OnReportPeriod,reportPeriod:n=this.defaultValue}=e??{};this.reportStrategyFormGroup.setValue({type:t,reportPeriod:n},{emitEvent:!1}),this.onTypeChange(t)}validate(){return this.reportStrategyFormGroup.valid||this.reportStrategyFormGroup.disabled?null:{reportStrategyForm:{valid:!1}}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}observeStrategyFormChange(){this.reportStrategyFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()})),this.reportStrategyFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.onTypeChange(e)))}observeStrategyToggle(){this.showStrategyControl.valueChanges.pipe(le(this.destroy$),ue((()=>this.isExpansionMode))).subscribe((e=>{e?(this.reportStrategyFormGroup.enable({emitEvent:!1}),this.reportStrategyFormGroup.get("reportPeriod").addValidators($.required),this.onChange(this.reportStrategyFormGroup.value)):(this.reportStrategyFormGroup.disable({emitEvent:!1}),this.reportStrategyFormGroup.get("reportPeriod").removeValidators($.required),this.onChange(null)),this.reportStrategyFormGroup.updateValueAndValidity({emitEvent:!1})}))}onTypeChange(e){const t=this.reportStrategyFormGroup.get("reportPeriod");e===Jt.OnChange||e===Jt.OnReceived?t.disable({emitEvent:!1}):this.isExpansionMode&&!this.showStrategyControl.value||t.enable({emitEvent:!1})}static{this.ɵfac=function(e){return new(e||Xn)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Xn,selectors:[["tb-report-strategy"]],inputs:{isExpansionMode:"isExpansionMode",defaultValue:"defaultValue"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>Xn)),multi:!0},{provide:K,useExisting:c((()=>Xn)),multi:!0}]),t.ɵɵStandaloneFeature],decls:6,vars:3,consts:[["defaultMode",""],["strategyFields",""],[3,"formGroup"],["class","tb-settings",3,"expanded",4,"ngIf","ngIfElse"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"mat-slide",3,"click","formControl"],[3,"ngTemplateOutlet"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width","flex","items-center","gap-2"],["matSuffix","","tb-help-popup-placement","right",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-row column-xs",4,"ngIf"],[3,"value"],["tbTruncateWithTooltip","",1,"fixed-title-width","tb-required"],["matInput","","type","number","min","100","name","value","formControlName","reportPeriod",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["translate","","matSuffix","",1,"block","pr-2"]],template:function(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,2),t.ɵɵtemplate(1,jn,8,6,"mat-expansion-panel",3)(2,Hn,3,1,"ng-template",null,0,t.ɵɵtemplateRefExtractor)(4,Yn,9,8,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(3);t.ɵɵproperty("formGroup",n.reportStrategyFormGroup),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.isExpansionMode)("ngIfElse",e)}},dependencies:t.ɵɵgetComponentDepsFactory(Xn,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}e("ReportStrategyComponent",Xn),Ge([I()],Xn.prototype,"isExpansionMode",void 0),Ge([P()],Xn.prototype,"defaultValue",void 0);class Zn{constructor(e,t){this.attributeService=e,this.cd=t,this.isGatewayActive=!1}ngAfterViewInit(){this.ctx.$scope.gatewayStatus=this,this.loadGatewayState()}loadGatewayState(){this.attributeService.getEntityAttributes(this.deviceId,D.SERVER_SCOPE,["active","lastDisconnectTime","lastConnectTime"]).subscribe((e=>{const t=e.find((e=>"active"===e.key)).value,n=e.find((e=>"lastDisconnectTime"===e.key))?.value,a=e.find((e=>"lastConnectTime"===e.key))?.value;this.isGatewayActive=this.getGatewayStatus(t,a,n),this.cd.detectChanges()}))}getGatewayStatus(e,t,n){return!!e&&(!n||t>n)}onDataUpdated(){const e=this.ctx.defaultSubscription.data,t=e.find((e=>"active"===e.dataKey.name)).data[0][1],n=e.find((e=>"lastDisconnectTime"===e.dataKey.name)).data[0][1],a=e.find((e=>"lastConnectTime"===e.dataKey.name)).data[0][1];this.isGatewayActive=this.getGatewayStatus(t,a,n),this.cd.detectChanges()}static{this.ɵfac=function(e){return new(e||Zn)(t.ɵɵdirectiveInject(_e.AttributeService),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Zn,selectors:[["tb-gateway-status"]],inputs:{ctx:"ctx",deviceId:"deviceId"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:9,vars:10,consts:[[1,"flex","min-h-10","flex-1","justify-center"],[1,"divider"],[1,"whitespace-nowrap"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-card",0),t.ɵɵelement(1,"div",1),t.ɵɵelementStart(2,"mat-card-header")(3,"mat-card-subtitle",2),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(6,"mat-card-content"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵclassProp("divider-red",!n.isGatewayActive)("divider-green",n.isGatewayActive),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,6,"gateway.gateway-status")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,8,n.isGatewayActive?"gateway.active":"gateway.inactive")))},dependencies:t.ɵɵgetComponentDepsFactory(Zn,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{position:absolute;width:3px;top:12px;border-radius:2px;bottom:4px;left:10px}[_nghost-%COMP%]   .divider-green[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:1px solid rgb(25,128,56);background-color:#198038}[_nghost-%COMP%]   .divider-green[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{color:#198038}[_nghost-%COMP%]   .divider-red[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:1px solid rgb(203,37,48);background-color:#cb2530}[_nghost-%COMP%]   .divider-red[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{color:#cb2530}.mdc-card[_ngcontent-%COMP%]{position:relative;padding-left:10px;box-shadow:none}.mat-mdc-card-subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:12px}.mat-mdc-card-header[_ngcontent-%COMP%]{padding:8px 16px 0}.mat-mdc-card-content[_ngcontent-%COMP%]:last-child{padding-bottom:8px;font-size:16px}'],changeDetection:d.OnPush})}}e("GatewayStatusComponent",Zn);class Qn{constructor(){this.tooltipText=""}static{this.ɵfac=function(e){return new(e||Qn)}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Qn,selectors:[["tb-error-icon"]],inputs:{tooltipText:"tooltipText"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:2,vars:1,consts:[["matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",0),t.ɵɵtext(1," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",n.tooltipText)},dependencies:t.ɵɵgetComponentDepsFactory(Qn,[_,j]),styles:["[_nghost-%COMP%]{display:flex;width:40px;height:40px;padding:10px}mat-icon[_ngcontent-%COMP%]{font-size:20px}"]})}}var Jn,ea;e("ErrorTooltipIconComponent",Qn),e("MqttConverterType",Jn),function(e){e.JSON="json",e.BYTES="bytes",e.CUSTOM="custom"}(Jn||e("MqttConverterType",Jn={})),e("MQTTSourceType",ea),function(e){e.MSG="message",e.TOPIC="topic",e.CONST="constant"}(ea||e("MQTTSourceType",ea={}));const ta=e("MqttVersions",[{name:3.1,value:3},{name:3.11,value:4},{name:5,value:5}]),na=e("QualityTypeTranslationsMap",new Map([[0,"gateway.qos.at-most-once"],[1,"gateway.qos.at-least-once"],[2,"gateway.qos.exactly-once"]])),aa=e("ConvertorTypeTranslationsMap",new Map([[Jn.JSON,"gateway.JSON"],[Jn.BYTES,"gateway.bytes"],[Jn.CUSTOM,"gateway.custom"]]));var ia;e("RequestType",ia),function(e){e.CONNECT_REQUEST="connectRequests",e.DISCONNECT_REQUEST="disconnectRequests",e.ATTRIBUTE_REQUEST="attributeRequests",e.ATTRIBUTE_UPDATE="attributeUpdates",e.SERVER_SIDE_RPC="serverSideRpc"}(ia||e("RequestType",ia={}));const ra=e("RequestTypesTranslationsMap",new Map([[ia.CONNECT_REQUEST,"gateway.request.connect-request"],[ia.DISCONNECT_REQUEST,"gateway.request.disconnect-request"],[ia.ATTRIBUTE_REQUEST,"gateway.request.attribute-request"],[ia.ATTRIBUTE_UPDATE,"gateway.request.attribute-update"],[ia.SERVER_SIDE_RPC,"gateway.request.rpc-connection"]])),oa=e("DataConversionTranslationsMap",new Map([[Jn.JSON,"gateway.JSON-hint"],[Jn.BYTES,"gateway.bytes-hint"],[Jn.CUSTOM,"gateway.custom-hint"]]));var sa,la;e("SocketType",sa),function(e){e.TCP="TCP",e.UDP="UDP"}(sa||e("SocketType",sa={})),e("SocketValueKey",la),function(e){e.TIMESERIES="telemetry",e.ATTRIBUTES="attributes",e.ATTRIBUTES_REQUESTS="attributeRequests",e.ATTRIBUTES_UPDATES="attributeUpdates",e.RPC_METHODS="serverSideRpc"}(la||e("SocketValueKey",la={}));const pa=e("SocketKeysPanelTitleTranslationsMap",new Map([[la.ATTRIBUTES,"gateway.attributes"],[la.TIMESERIES,"gateway.timeseries"],[la.ATTRIBUTES_REQUESTS,"gateway.attribute-requests"],[la.ATTRIBUTES_UPDATES,"gateway.attribute-updates"],[la.RPC_METHODS,"gateway.rpc-methods"]]));var ca,da;e("RequestsType",ca),function(e){e.Shared="shared",e.Client="client"}(ca||e("RequestsType",ca={})),e("ExpressionType",da),function(e){e.Constant="constant",e.Expression="expression"}(da||e("ExpressionType",da={}));const ua=e("SocketKeysAddKeyTranslationsMap",new Map([[la.ATTRIBUTES,"gateway.add-attribute"],[la.TIMESERIES,"gateway.add-timeseries"],[la.ATTRIBUTES_REQUESTS,"gateway.add-attribute-request"],[la.ATTRIBUTES_UPDATES,"gateway.add-attribute-update"],[la.RPC_METHODS,"gateway.add-rpc-method"]])),ma=e("SocketKeysDeleteKeyTranslationsMap",new Map([[la.ATTRIBUTES,"gateway.delete-attribute"],[la.TIMESERIES,"gateway.delete-timeseries"],[la.ATTRIBUTES_REQUESTS,"gateway.delete-attribute-request"],[la.ATTRIBUTES_UPDATES,"gateway.delete-attribute-update"],[la.RPC_METHODS,"gateway.delete-rpc-method"]])),ha=e("SocketKeysNoKeysTextTranslationsMap",new Map([[la.ATTRIBUTES,"gateway.no-attributes"],[la.TIMESERIES,"gateway.no-timeseries"],[la.ATTRIBUTES_REQUESTS,"gateway.no-attribute-requests"],[la.ATTRIBUTES_UPDATES,"gateway.no-attribute-updates"],[la.RPC_METHODS,"gateway.no-rpc-methods"]]));var ga,fa,ya,va;e("RestConverterType",ga),function(e){e.JSON="json",e.CUSTOM="custom"}(ga||e("RestConverterType",ga={})),e("RestSourceType",fa),function(e){e.REQUEST="request",e.CONST="constant"}(fa||e("RestSourceType",fa={})),e("ResponseType",ya),function(e){e.DEFAULT="default",e.CONST="constant",e.ADVANCED="advanced"}(ya||e("ResponseType",ya={})),e("ResponseStatus",va),function(e){e.OK="OK",e.ERROR="Error"}(va||e("ResponseStatus",va={}));const ba=e("ResponseTypeTranslationsMap",new Map([[ya.DEFAULT,"gateway.rest.response-type.default"],[ya.CONST,"gateway.rest.response-type.const"],[ya.ADVANCED,"gateway.rest.response-type.advanced"]]));var xa;e("RestRequestType",xa),function(e){e.ATTRIBUTE_REQUEST="attributeRequests",e.ATTRIBUTE_UPDATE="attributeUpdates",e.SERVER_SIDE_RPC="serverSideRpc"}(xa||e("RestRequestType",xa={}));const wa=e("RestRequestTypesTranslationsMap",new Map([[xa.ATTRIBUTE_REQUEST,"gateway.request.attribute-request"],[xa.ATTRIBUTE_UPDATE,"gateway.request.attribute-update"],[xa.SERVER_SIDE_RPC,"gateway.request.rpc-connection"]]));var Sa;e("RestRequestsScopeType",Sa),function(e){e.Shared="shared",e.Client="client"}(Sa||e("RestRequestsScopeType",Sa={}));const Ca=e("RestRequestTypeFieldsMap",new Map([[xa.ATTRIBUTE_REQUEST,["HTTPMethods","endpoint","type","deviceNameExpression","attributeNameExpression"]],[xa.ATTRIBUTE_UPDATE,["HTTPMethod","SSLVerify","deviceNameFilter","attributeFilter","requestUrlExpression","valueExpression","httpHeaders","tries","allowRedirects"]],[xa.SERVER_SIDE_RPC,["HTTPMethod","deviceNameFilter","methodFilter","requestUrlExpression","valueExpression","responseTimeout","httpHeaders","tries"]],["all",["requestType","timeout","security"]]])),_a=e("RestConvertorTypeTranslationsMap",new Map([[ga.JSON,"gateway.JSON"],[ga.CUSTOM,"gateway.custom"]])),Ta=e("RestDataConversionTranslationsMap",new Map([[ga.JSON,"gateway.hints.rest.JSON"],[ga.CUSTOM,"gateway.custom-hint"]]));var Ia;e("PortLimits",Ia),function(e){e[e.MIN=1]="MIN",e[e.MAX=65535]="MAX"}(Ia||e("PortLimits",Ia={}));const Ea=e("GatewayConnectorConfigVersionMap",new Map([[ct.FTP,pt.v3_7_4],[ct.REST,pt.v3_7_2],[ct.KNX,pt.v3_7_0],[ct.BACNET,pt.v3_6_2],[ct.SOCKET,pt.v3_6_0],[ct.MQTT,pt.v3_5_2],[ct.OPCUA,pt.v3_5_2],[ct.MODBUS,pt.v3_5_2]]));var Ma,ka,Pa,Da;e("OPCUaSourceType",Ma),function(e){e.PATH="path",e.IDENTIFIER="identifier",e.CONST="constant"}(Ma||e("OPCUaSourceType",Ma={})),e("SecurityType",ka),function(e){e.ANONYMOUS="anonymous",e.BASIC="basic",e.CERTIFICATES="certificates"}(ka||e("SecurityType",ka={})),e("ModeType",Pa),function(e){e.NONE="None",e.SIGN="Sign",e.SIGNANDENCRYPT="SignAndEncrypt"}(Pa||e("ModeType",Pa={})),e("MappingType",Da),function(e){e.DATA="data",e.REQUESTS="requests",e.OPCUA="OPCua"}(Da||e("MappingType",Da={}));const Oa=e("MappingTypeTranslationsMap",new Map([[Da.DATA,"gateway.data-mapping"],[Da.REQUESTS,"gateway.requests-mapping"],[Da.OPCUA,"gateway.data-mapping"]]));var Aa;e("SecurityPolicy",Aa),function(e){e.BASIC128="Basic128Rsa15",e.BASIC256="Basic256",e.BASIC256SHA="Basic256Sha256"}(Aa||e("SecurityPolicy",Aa={}));const Fa=e("SecurityPolicyTypes",[{value:Aa.BASIC128,name:"Basic128RSA15"},{value:Aa.BASIC256,name:"Basic256"},{value:Aa.BASIC256SHA,name:"Basic256SHA256"}]),Ra=e("SecurityTypeTranslationsMap",new Map([[ka.ANONYMOUS,"gateway.broker.security-types.anonymous"],[ka.BASIC,"gateway.broker.security-types.basic"],[ka.CERTIFICATES,"gateway.broker.security-types.certificates"]])),Ba=e("SourceTypeTranslationsMap",new Map([[ea.MSG,"gateway.source-type.msg"],[ea.TOPIC,"gateway.source-type.topic"],[ea.CONST,"gateway.source-type.const"],[Ma.PATH,"gateway.source-type.path"],[Ma.IDENTIFIER,"gateway.source-type.identifier"],[Ma.CONST,"gateway.source-type.const"],[da.Expression,"gateway.source-type.expression"],[fa.REQUEST,"gateway.source-type.request"]]));var Na;e("MappingKeysType",Na),function(e){e.ATTRIBUTES="attributes",e.TIMESERIES="timeseries",e.CUSTOM="extensionConfig",e.RPC_METHODS="rpc_methods",e.ATTRIBUTES_UPDATES="attributes_updates"}(Na||e("MappingKeysType",Na={}));const La=e("MappingKeysPanelTitleTranslationsMap",new Map([[Na.ATTRIBUTES,"gateway.attributes"],[Na.TIMESERIES,"gateway.timeseries"],[Na.CUSTOM,"gateway.keys"],[Na.ATTRIBUTES_UPDATES,"gateway.attribute-updates"],[Na.RPC_METHODS,"gateway.rpc-methods"]])),Va=e("MappingKeysAddKeyTranslationsMap",new Map([[Na.ATTRIBUTES,"gateway.add-attribute"],[Na.TIMESERIES,"gateway.add-timeseries"],[Na.CUSTOM,"gateway.add-key"],[Na.ATTRIBUTES_UPDATES,"gateway.add-attribute-update"],[Na.RPC_METHODS,"gateway.add-rpc-method"]])),qa=e("MappingKeysDeleteKeyTranslationsMap",new Map([[Na.ATTRIBUTES,"gateway.delete-attribute"],[Na.TIMESERIES,"gateway.delete-timeseries"],[Na.CUSTOM,"gateway.delete-key"],[Na.ATTRIBUTES_UPDATES,"gateway.delete-attribute-update"],[Na.RPC_METHODS,"gateway.delete-rpc-method"]])),Ga=e("MappingKeysNoKeysTextTranslationsMap",new Map([[Na.ATTRIBUTES,"gateway.no-attributes"],[Na.TIMESERIES,"gateway.no-timeseries"],[Na.CUSTOM,"gateway.no-keys"],[Na.ATTRIBUTES_UPDATES,"gateway.no-attribute-updates"],[Na.RPC_METHODS,"gateway.no-rpc-methods"]])),za=e("QualityTypes",[0,1,2]);var Ua;e("ServerSideRpcType",Ua),function(e){e.WithResponse="twoWay",e.WithoutResponse="oneWay"}(Ua||e("ServerSideRpcType",Ua={}));const ja=e("HelpLinkByMappingTypeMap",new Map([[Da.DATA,O+"/docs/iot-gateway/config/mqtt/#section-mapping"],[Da.OPCUA,O+"/docs/iot-gateway/config/opc-ua/#section-mapping"],[Da.REQUESTS,O+"/docs/iot-gateway/config/mqtt/#requests-mapping"]])),Ha=e("MappingHintTranslationsMap",new Map([[Da.DATA,"gateway.data-mapping-hint"],[Da.OPCUA,"gateway.opcua-data-mapping-hint"],[Da.REQUESTS,"gateway.requests-mapping-hint"]]));var Wa,$a,Ka,Ya,Xa,Za,Qa,Ja,ei;e("ServerSideRPCType",Wa),function(e){e.ONE_WAY="oneWay",e.TWO_WAY="twoWay"}(Wa||e("ServerSideRPCType",Wa={})),e("SecurityMode",$a),function(e){e.basic="basic",e.certificates="certificates",e.extendedCertificates="extendedCertificates"}($a||e("SecurityMode",$a={})),e("ModbusProtocolType",Ka),function(e){e.TCP="tcp",e.UDP="udp",e.Serial="serial"}(Ka||e("ModbusProtocolType",Ka={})),e("ModbusMethodType",Ya),function(e){e.SOCKET="socket",e.RTU="rtu"}(Ya||e("ModbusMethodType",Ya={})),e("ModbusSerialMethodType",Xa),function(e){e.RTU="rtu",e.ASCII="ascii"}(Xa||e("ModbusSerialMethodType",Xa={})),e("ModbusParity",Za),function(e){e.Even="E",e.Odd="O",e.None="N"}(Za||e("ModbusParity",Za={})),e("ModbusOrderType",Qa),function(e){e.BIG="BIG",e.LITTLE="LITTLE"}(Qa||e("ModbusOrderType",Qa={})),e("ModbusRegisterType",Ja),function(e){e.HoldingRegisters="holding_registers",e.CoilsInitializer="coils_initializer",e.InputRegisters="input_registers",e.DiscreteInputs="discrete_inputs"}(Ja||e("ModbusRegisterType",Ja={})),e("ModbusValueKey",ei),function(e){e.ATTRIBUTES="attributes",e.TIMESERIES="timeseries",e.ATTRIBUTES_UPDATES="attributeUpdates",e.RPC_REQUESTS="rpc"}(ei||e("ModbusValueKey",ei={}));const ti=e("ModbusBaudrates",[4800,9600,19200,38400,57600,115200,230400,460800,921600]),ni=e("ModbusByteSizes",[5,6,7,8]),ai=e("ModbusRegisterTranslationsMap",new Map([[Ja.HoldingRegisters,"gateway.holding_registers"],[Ja.CoilsInitializer,"gateway.coils_initializer"],[Ja.InputRegisters,"gateway.input_registers"],[Ja.DiscreteInputs,"gateway.discrete_inputs"]]));var ii;e("ModbusBitTargetType",ii),function(e){e.BooleanType="bool",e.IntegerType="int"}(ii||e("ModbusBitTargetType",ii={}));const ri=e("ModbusBitTargetTypeTranslationMap",new Map([[ii.BooleanType,"gateway.boolean"],[ii.IntegerType,"gateway.integer"]])),oi=e("ModbusMethodLabelsMap",new Map([[Ya.SOCKET,"Socket"],[Ya.RTU,"RTU"],[Xa.ASCII,"ASCII"]])),si=e("ModbusProtocolLabelsMap",new Map([[Ka.TCP,"TCP"],[Ka.UDP,"UDP"],[Ka.Serial,"Serial"]])),li=e("ModbusParityLabelsMap",new Map([[Za.Even,"Even"],[Za.Odd,"Odd"],[Za.None,"None"]])),pi=e("ModbusKeysPanelTitleTranslationsMap",new Map([[ei.ATTRIBUTES,"gateway.attributes"],[ei.TIMESERIES,"gateway.timeseries"],[ei.ATTRIBUTES_UPDATES,"gateway.attribute-updates"],[ei.RPC_REQUESTS,"gateway.rpc-requests"]])),ci=e("ModbusKeysAddKeyTranslationsMap",new Map([[ei.ATTRIBUTES,"gateway.add-attribute"],[ei.TIMESERIES,"gateway.add-timeseries"],[ei.ATTRIBUTES_UPDATES,"gateway.add-attribute-update"],[ei.RPC_REQUESTS,"gateway.add-rpc-request"]])),di=e("ModbusKeysDeleteKeyTranslationsMap",new Map([[ei.ATTRIBUTES,"gateway.delete-attribute"],[ei.TIMESERIES,"gateway.delete-timeseries"],[ei.ATTRIBUTES_UPDATES,"gateway.delete-attribute-update"],[ei.RPC_REQUESTS,"gateway.delete-rpc-request"]])),ui=e("ModbusKeysNoKeysTextTranslationsMap",new Map([[ei.ATTRIBUTES,"gateway.no-attributes"],[ei.TIMESERIES,"gateway.no-timeseries"],[ei.ATTRIBUTES_UPDATES,"gateway.no-attribute-updates"],[ei.RPC_REQUESTS,"gateway.no-rpc-requests"]]));var mi;e("ModifierType",mi),function(e){e.DIVIDER="divider",e.MULTIPLIER="multiplier"}(mi||e("ModifierType",mi={}));const hi=e("ModifierTypesMap",new Map([[mi.DIVIDER,{name:"gateway.divider",icon:"mdi:division"}],[mi.MULTIPLIER,{name:"gateway.multiplier",icon:"mdi:multiplication"}]]));var gi,fi;e("DeviceInfoType",gi),function(e){e.FULL="full",e.PARTIAL="partial"}(gi||e("DeviceInfoType",gi={})),e("SegmentationType",fi),function(e){e.BOTH="segmentedBoth",e.TRANSMIT="segmentedTransmit",e.RECEIVE="segmentedReceive",e.NO="noSegmentation"}(fi||e("SegmentationType",fi={}));const yi=e("SegmentationTypeTranslationsMap",new Map([[fi.BOTH,"gateway.bacnet.segmentation.both"],[fi.TRANSMIT,"gateway.bacnet.segmentation.transmit"],[fi.RECEIVE,"gateway.bacnet.segmentation.receive"],[fi.NO,"gateway.bacnet.segmentation.no"]]));var vi;e("BacnetDeviceKeysType",vi),function(e){e.ATTRIBUTES="attributes",e.TIMESERIES="timeseries",e.RPC_METHODS="serverSideRpc",e.ATTRIBUTES_UPDATES="attributeUpdates"}(vi||e("BacnetDeviceKeysType",vi={}));const bi=e("BacnetDeviceKeysPanelTitleTranslationsMap",new Map([[vi.ATTRIBUTES,"gateway.attributes"],[vi.TIMESERIES,"gateway.timeseries"],[vi.ATTRIBUTES_UPDATES,"gateway.attribute-updates"],[vi.RPC_METHODS,"gateway.rpc-methods"]])),xi=e("BacnetDeviceKeysAddKeyTranslationsMap",new Map([[vi.ATTRIBUTES,"gateway.add-attribute"],[vi.TIMESERIES,"gateway.add-timeseries"],[vi.ATTRIBUTES_UPDATES,"gateway.add-attribute-update"],[vi.RPC_METHODS,"gateway.add-rpc-method"]])),wi=e("BacnetDeviceKeysDeleteKeyTranslationsMap",new Map([[vi.ATTRIBUTES,"gateway.delete-attribute"],[vi.TIMESERIES,"gateway.delete-timeseries"],[vi.ATTRIBUTES_UPDATES,"gateway.delete-attribute-update"],[vi.RPC_METHODS,"gateway.delete-rpc-method"]])),Si=e("BacnetDeviceKeysNoKeysTextTranslationsMap",new Map([[vi.ATTRIBUTES,"gateway.no-attributes"],[vi.TIMESERIES,"gateway.no-timeseries"],[vi.ATTRIBUTES_UPDATES,"gateway.no-attribute-updates"],[vi.RPC_METHODS,"gateway.no-rpc-methods"]]));var Ci;e("BacnetKeyObjectType",Ci),function(e){e.analogInput="analogInput",e.analogOutput="analogOutput",e.analogValue="analogValue",e.binaryInput="binaryInput",e.binaryOutput="binaryOutput",e.binaryValue="binaryValue"}(Ci||e("BacnetKeyObjectType",Ci={}));const _i=e("BacnetKeyObjectTypeTranslationsMap",new Map([[Ci.analogInput,"gateway.bacnet.object-type.analog-input"],[Ci.analogOutput,"gateway.bacnet.object-type.analog-output"],[Ci.analogValue,"gateway.bacnet.object-type.analog-value"],[Ci.binaryInput,"gateway.bacnet.object-type.binary-input"],[Ci.binaryOutput,"gateway.bacnet.object-type.binary-output"],[Ci.binaryValue,"gateway.bacnet.object-type.binary-value"]]));var Ti;e("BacnetPropertyId",Ti),function(e){e.presentValue="presentValue",e.statusFlags="statusFlags",e.covIncrement="covIncrement",e.eventState="eventState",e.outOfService="outOfService",e.polarity="polarity",e.priorityArray="priorityArray",e.relinquishDefault="relinquishDefault",e.currentCommandPriority="currentCommandPriority",e.eventMessageTexts="eventMessageTexts",e.eventMessageTextsConfig="eventMessageTextsConfig",e.eventAlgorithmInhibitReference="eventAlgorithmInhibitReference",e.timeDelayNormal="timeDelayNormal"}(Ti||e("BacnetPropertyId",Ti={}));const Ii=e("BacnetPropertyIdByObjectType",new Map([[Ci.analogInput,[Ti.presentValue,Ti.statusFlags,Ti.covIncrement]],[Ci.analogOutput,[Ti.presentValue,Ti.statusFlags,Ti.covIncrement]],[Ci.analogValue,[Ti.presentValue,Ti.statusFlags,Ti.covIncrement]],[Ci.binaryInput,[Ti.presentValue,Ti.statusFlags,Ti.eventState,Ti.outOfService,Ti.polarity]],[Ci.binaryOutput,[Ti.presentValue,Ti.statusFlags,Ti.eventState,Ti.outOfService,Ti.polarity,Ti.priorityArray,Ti.relinquishDefault,Ti.currentCommandPriority,Ti.eventMessageTexts,Ti.eventMessageTextsConfig,Ti.eventAlgorithmInhibitReference,Ti.timeDelayNormal]],[Ci.binaryValue,[Ti.presentValue,Ti.statusFlags,Ti.eventState,Ti.outOfService]]])),Ei=e("BacnetPropertyIdTranslationsMap",new Map([[Ti.presentValue,"gateway.bacnet.property-id.present-value"],[Ti.statusFlags,"gateway.bacnet.property-id.status-flags"],[Ti.covIncrement,"gateway.bacnet.property-id.cov-increment"],[Ti.eventState,"gateway.bacnet.property-id.event-state"],[Ti.outOfService,"gateway.bacnet.property-id.out-of-service"],[Ti.polarity,"gateway.bacnet.property-id.polarity"],[Ti.priorityArray,"gateway.bacnet.property-id.priority-array"],[Ti.relinquishDefault,"gateway.bacnet.property-id.relinquish-default"],[Ti.currentCommandPriority,"gateway.bacnet.property-id.current-command-priority"],[Ti.eventMessageTexts,"gateway.bacnet.property-id.event-message-texts"],[Ti.eventMessageTextsConfig,"gateway.bacnet.property-id.event-message-texts-config"],[Ti.eventAlgorithmInhibitReference,"gateway.bacnet.property-id.event-algorithm-inhibit-reference"],[Ti.timeDelayNormal,"gateway.bacnet.property-id.time-delay-normal"]]));var Mi;e("BacnetRequestType",Mi),function(e){e.Write="writeProperty",e.Read="readProperty"}(Mi||e("BacnetRequestType",Mi={}));const ki=e("BacnetRequestTypeTranslationsMap",new Map([[Mi.Write,"gateway.bacnet.request-type.write"],[Mi.Read,"gateway.bacnet.request-type.read"]]));var Pi,Di,Oi;e("FtpFileDataViewType",Pi),function(e){e.TABLE="TABLE",e.SLICED="SLICED"}(Pi||e("FtpFileDataViewType",Pi={})),e("FtpReadModeType",Di),function(e){e.FULL="FULL",e.PARTIAL="PARTIAL"}(Di||e("FtpReadModeType",Di={})),e("FtpRequestType",Oi),function(e){e.ATTRIBUTE_UPDATE="attributeUpdates",e.SERVER_SIDE_RPC="serverSideRpc"}(Oi||e("FtpRequestType",Oi={}));const Ai=e("FtpRequestTypesTranslationsMap",new Map([[Oi.ATTRIBUTE_UPDATE,"gateway.request.attribute-update"],[Oi.SERVER_SIDE_RPC,"gateway.request.rpc-connection"]]));var Fi,Ri;e("FtpAttributeUpdateWritingMode",Fi),function(e){e.OVERRIDE="OVERRIDE",e.WRITE="WRITE"}(Fi||e("FtpAttributeUpdateWritingMode",Fi={})),e("FtpServerSideRpcMethodFilter",Ri),function(e){e.read="read",e.write="write",e.override="override"}(Ri||e("FtpServerSideRpcMethodFilter",Ri={}));class Bi{static{this.mqttRequestTypeKeys=Object.values(ia)}static{this.mqttRequestMappingOldFields=["attributeNameJsonExpression","deviceNameJsonExpression","deviceNameTopicExpression","extension-config"]}static{this.mqttRequestMappingNewFields=["attributeNameExpressionSource","responseTopicQoS","extensionConfig"]}static mapMappingToUpgradedVersion(e){return e?.map((({converter:e,topicFilter:t,subscriptionQos:n=1})=>{const a=e.deviceInfo??this.extractConverterDeviceInfo(e),i={...e,deviceInfo:a,extensionConfig:e.extensionConfig||e["extension-config"]||null};return this.cleanUpOldFields(i),{converter:i,topicFilter:t,subscriptionQos:n}}))}static mapRequestsToUpgradedVersion(e){return this.mqttRequestTypeKeys.reduce(((t,n)=>e[n]?(t[n]=e[n].map((e=>{const t=this.mapRequestToUpgradedVersion(e,n);return this.cleanUpOldFields(t),t})),t):t),{})}static mapRequestsToDowngradedVersion(e){return this.mqttRequestTypeKeys.reduce(((t,n)=>e[n]?(t[n]=e[n].map((e=>{n===ia.SERVER_SIDE_RPC&&delete e.type;const{attributeNameExpression:t,deviceInfo:a,...i}=e,r={...i,attributeNameJsonExpression:t||null,deviceNameJsonExpression:a?.deviceNameExpressionSource!==ea.TOPIC?a?.deviceNameExpression:null,deviceNameTopicExpression:a?.deviceNameExpressionSource===ea.TOPIC?a?.deviceNameExpression:null};return this.cleanUpNewFields(r),r})),t):t),{})}static mapMappingToDowngradedVersion(e){return e?.map((e=>{const t=this.mapConverterToDowngradedVersion(e.converter);return this.cleanUpNewFields(t),{converter:t,topicFilter:e.topicFilter}}))}static mapConverterToDowngradedVersion(e){const{deviceInfo:t,...n}=e;return e.type!==Jn.BYTES?{...n,deviceNameJsonExpression:t?.deviceNameExpressionSource===ea.MSG?t.deviceNameExpression:null,deviceTypeJsonExpression:t?.deviceProfileExpressionSource===ea.MSG?t.deviceProfileExpression:null,deviceNameTopicExpression:t?.deviceNameExpressionSource!==ea.MSG?t?.deviceNameExpression:null,deviceTypeTopicExpression:t?.deviceProfileExpressionSource!==ea.MSG?t?.deviceProfileExpression:null}:{...n,deviceNameExpression:t.deviceNameExpression,deviceTypeExpression:t.deviceProfileExpression,"extension-config":e.extensionConfig}}static cleanUpOldFields(e){this.mqttRequestMappingOldFields.forEach((t=>delete e[t])),Te(e)}static cleanUpNewFields(e){this.mqttRequestMappingNewFields.forEach((t=>delete e[t])),Te(e)}static getTypeSourceByValue(e){return e.includes("${")?ea.MSG:e.includes("/")?ea.TOPIC:ea.CONST}static extractConverterDeviceInfo(e){const t=e.deviceNameExpression||e.deviceNameJsonExpression||e.deviceNameTopicExpression||null,n=e.deviceNameExpressionSource?e.deviceNameExpressionSource:t?this.getTypeSourceByValue(t):null,a=e.deviceProfileExpression||e.deviceTypeTopicExpression||e.deviceTypeJsonExpression||"default",i=e.deviceProfileExpressionSource?e.deviceProfileExpressionSource:a?this.getTypeSourceByValue(a):null;return t||a?{deviceNameExpression:t,deviceNameExpressionSource:n,deviceProfileExpression:a,deviceProfileExpressionSource:i}:null}static mapRequestToUpgradedVersion(e,t){const n=e.deviceNameJsonExpression||e.deviceNameTopicExpression||null,a=e.deviceTypeTopicExpression||e.deviceTypeJsonExpression||"default",i=a?this.getTypeSourceByValue(a):null,r=e.attributeNameExpressionSource||e.attributeNameJsonExpression||null,o=t===ia.SERVER_SIDE_RPC?1:null,s=t===ia.SERVER_SIDE_RPC?e.responseTopicExpression?Ua.WithResponse:Ua.WithoutResponse:null;return{...e,attributeNameExpression:r,attributeNameExpressionSource:r?this.getTypeSourceByValue(r):null,deviceInfo:e.deviceInfo?e.deviceInfo:n?{deviceNameExpression:n,deviceNameExpressionSource:this.getTypeSourceByValue(n),deviceProfileExpression:a,deviceProfileExpressionSource:i}:null,responseTopicQoS:o,type:s}}}e("MqttVersionMappingUtil",Bi);class Ni{constructor(e,t){this.gatewayVersionIn=e,this.connector=t,this.gatewayVersion=Yi.parseVersion(this.gatewayVersionIn),this.configVersion=Yi.parseVersion(this.connector.configVersion??this.connector.configurationJson.configVersion)}getProcessedByVersion(){return this.isVersionUpdateNeeded()?this.processVersionUpdate():this.connector}processVersionUpdate(){return this.isVersionUpgradeNeeded()?this.getUpgradedVersion():this.isVersionDowngradeNeeded()?this.getDowngradedVersion():this.connector}isVersionUpdateNeeded(){return!!this.gatewayVersion&&this.configVersion!==this.gatewayVersion}isVersionUpgradeNeeded(){const e=Yi.parseVersion(Ea.get(this.connector.type)),t=this.gatewayVersion>=e,n=!this.configVersion||this.configVersion<this.gatewayVersion&&this.configVersion<e;return t&&n}isVersionDowngradeNeeded(){const e=Yi.parseVersion(Ea.get(this.connector.type));return this.configVersion&&this.configVersion>=e&&e>this.gatewayVersion}}e("GatewayConnectorVersionProcessor",Ni);class Li extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t,this.mqttRequestTypeKeys=Object.values(ia)}getUpgradedVersion(){const{connectRequests:e,disconnectRequests:t,attributeRequests:n,attributeUpdates:a,serverSideRpc:i}=this.connector.configurationJson;let r={...this.connector.configurationJson,requestsMapping:Bi.mapRequestsToUpgradedVersion({connectRequests:e,disconnectRequests:t,attributeRequests:n,attributeUpdates:a,serverSideRpc:i}),mapping:Bi.mapMappingToUpgradedVersion(this.connector.configurationJson.mapping)};return this.mqttRequestTypeKeys.forEach((e=>{const{[e]:t,...n}=r;r={...n}})),this.cleanUpConfigJson(r),{...this.connector,configurationJson:r,configVersion:this.gatewayVersionIn}}getDowngradedVersion(){const{requestsMapping:e,mapping:t,...n}=this.connector.configurationJson,a=e?Bi.mapRequestsToDowngradedVersion(e):{},i=Bi.mapMappingToDowngradedVersion(t);return{...this.connector,configurationJson:{...n,...a,mapping:i},configVersion:this.gatewayVersionIn}}cleanUpConfigJson(e){Se(e.requestsMapping,{})&&delete e.requestsMapping,Se(e.mapping,[])&&delete e.mapping}}e("MqttVersionProcessor",Li);class Vi extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t}getUpgradedVersion(){const e=this.connector.configurationJson;return{...this.connector,configurationJson:{master:e.master?.slaves?Xi.mapMasterToUpgradedVersion(e.master):{slaves:[]},slave:e.slave?Xi.mapSlaveToUpgradedVersion(e.slave):{}},configVersion:this.gatewayVersionIn}}getDowngradedVersion(){const e=this.connector.configurationJson;return{...this.connector,configurationJson:{...e,slave:e.slave?Xi.mapSlaveToDowngradedVersion(e.slave):{},master:e.master?.slaves?Xi.mapMasterToDowngradedVersion(e.master):{slaves:[]}},configVersion:this.gatewayVersionIn}}}e("ModbusVersionProcessor",Vi);class qi extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t}getUpgradedVersion(){const e=this.connector.configurationJson.server;return{...this.connector,configurationJson:{server:e?Zi.mapServerToUpgradedVersion(e):{},mapping:e?.mapping?Zi.mapMappingToUpgradedVersion(e.mapping):[]},configVersion:this.gatewayVersionIn}}getDowngradedVersion(){return{...this.connector,configurationJson:{server:Zi.mapServerToDowngradedVersion(this.connector.configurationJson)},configVersion:this.gatewayVersionIn}}}e("OpcVersionProcessor",qi);class Gi{constructor(){this.fb=a(Y),this.destroyRef=a(i),this.formGroup=this.initFormGroup(),this.observeValueChanges()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(){return this.formGroup.valid?null:{formGroup:{valid:!1}}}writeValue(e){this.onWriteValue(e)}onWriteValue(e){this.formGroup.patchValue(e,{emitEvent:!1})}mapOnChangeValue(e){return e}observeValueChanges(){this.formGroup.valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>this.onChange(this.mapOnChangeValue(e))))}static{this.ɵfac=function(e){return new(e||Gi)}}static{this.ɵdir=t.ɵɵdefineDirective({type:Gi})}}e("ControlValueAccessorBaseAbstract",Gi);class zi extends Gi{constructor(){super(...arguments),this.withReportStrategy=!0,this.initialized=new u,this.isLegacy=!1,this.fb=a(Y)}get basicFormGroup(){return this.formGroup}ngAfterViewInit(){this.initialized.emit()}onWriteValue(e){this.formGroup.setValue(this.mapConfigToFormValue(e),{emitEvent:!1})}mapOnChangeValue(e){return this.getMappedValue(e)}initFormGroup(){return this.initBasicFormGroup()}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(zi)))(n||zi)}})()}static{this.ɵdir=t.ɵɵdefineDirective({type:zi,inputs:{generalTabContent:"generalTabContent",withReportStrategy:[2,"withReportStrategy","withReportStrategy",m]},outputs:{initialized:"initialized"},features:[t.ɵɵInputTransformsFeature,t.ɵɵInheritDefinitionFeature]})}}e("GatewayConnectorBasicConfigDirective",zi);class Ui extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t}getUpgradedVersion(){const e=this.connector.configurationJson;return{...this.connector,configurationJson:{socket:e?Qi.mapSocketToUpgradedVersion(e):{},devices:e?.devices?Qi.mapDevicesToUpgradedVersion(e.devices):[]},configVersion:this.gatewayVersionIn}}getDowngradedVersion(){return{...this.connector,configurationJson:Qi.mapSocketToDowngradedVersion(this.connector.configurationJson),configVersion:this.gatewayVersionIn}}}e("SocketVersionProcessor",Ui);class ji extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t}getUpgradedVersion(){const e=this.connector.configurationJson;return{...this.connector,configurationJson:{application:e?.general?Ji.mapApplicationToUpgradedVersion(e.general):{},devices:e?.devices?Ji.mapDevicesToUpgradedVersion(e.devices):[]},configVersion:this.gatewayVersionIn}}getDowngradedVersion(){const e=this.connector.configurationJson;return{...this.connector,configurationJson:{general:e?.application?Ji.mapApplicationToDowngradedVersion(e.application):{},devices:e?.devices?Ji.mapDevicesToDowngradedVersion(e.devices):[]},configVersion:this.gatewayVersionIn}}}e("BacnetVersionProcessor",ji);const Hi=["searchInput"];class Wi{constructor(){this.withReportStrategy=!0,this.textSearchMode=!1,this.onChange=()=>{},this.translate=a(We),this.dialog=a(Le),this.dialogService=a(Ie),this.fb=a(Y),this.cd=a(h),this.destroyRef=a(i),this.textSearch=this.fb.control("",{nonNullable:!0}),this.entityFormArray=this.fb.array([]),this.entityFormArray.valueChanges.pipe(xn()).subscribe((e=>{this.updateTableData(e),this.onChange(e)})),this.dataSource=this.getDatasource()}ngAfterViewInit(){this.textSearch.valueChanges.pipe(de(150),ce(((e,t)=>(e??"")===t.trim())),xn(this.destroyRef)).subscribe((e=>this.updateTableData(this.entityFormArray.value,e.trim())))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){this.entityFormArray.clear(),this.pushDataAsFormArrays(e)}enterFilterMode(){this.textSearchMode=!0,this.cd.detectChanges();const e=this.searchInputField.nativeElement;e.focus(),e.setSelectionRange(0,0)}exitFilterMode(){this.updateTableData(this.entityFormArray.value),this.textSearchMode=!1,this.textSearch.reset()}validate(){return this.entityFormArray.controls.length?null:{devicesFormGroup:{valid:!1}}}updateTableData(e,t){t&&(e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(e)}pushDataAsFormArrays(e){e?.length&&e.forEach((e=>this.entityFormArray.push(this.fb.control(e))))}static{this.ɵfac=function(e){return new(e||Wi)}}static{this.ɵdir=t.ɵɵdefineDirective({type:Wi,viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(Hi,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.searchInputField=e.first)}},inputs:{withReportStrategy:[2,"withReportStrategy","withReportStrategy",m]},features:[t.ɵɵInputTransformsFeature]})}}e("AbstractDevicesConfigTableComponent",Wi);class $i extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t,this.restRequestTypeKeys=Object.values(xa)}getUpgradedVersion(){const{attributeRequests:e=[],attributeUpdates:t=[],serverSideRpc:n=[],mapping:a=[],...i}=this.connector.configurationJson;let r={server:Yi.cleanUpConfigBaseInfo(i),requestsMapping:{attributeRequests:e,attributeUpdates:t,serverSideRpc:n},mapping:er.mapMappingToUpgradedVersion(a)};return this.restRequestTypeKeys.forEach((e=>{const{[e]:t,...n}=r;r={...n}})),{...this.connector,configurationJson:r,configVersion:this.gatewayVersionIn}}getDowngradedVersion(){const{requestsMapping:e={},mapping:t,server:n,...a}=this.connector.configurationJson,{attributeRequests:i=[],attributeUpdates:r=[],serverSideRpc:o=[]}=e;return{...this.connector,configurationJson:{...a,...n,attributeRequests:i,attributeUpdates:r,serverSideRpc:o,mapping:er.mapMappingToDowngradedVersion(t)},configVersion:this.gatewayVersionIn}}}e("RestVersionProcessor",$i);class Ki extends Ni{constructor(e,t){super(e,t),this.gatewayVersionIn=e,this.connector=t,this.restRequestTypeKeys=Object.values(Oi)}getUpgradedVersion(){const{attributeUpdates:e=[],serverSideRpc:t=[],paths:n=[],...a}=this.connector.configurationJson;let i={parameters:Yi.cleanUpConfigBaseInfo(a),requestsMapping:{attributeUpdates:e,serverSideRpc:t},paths:tr.mapPathsToUpgradedVersion(n??[])};return this.restRequestTypeKeys.forEach((e=>{const{[e]:t,...n}=i;i={...n}})),{...this.connector,configurationJson:i,configVersion:this.gatewayVersionIn}}getDowngradedVersion(){const{requestsMapping:e={},parameters:t={},paths:n=[],...a}=this.connector.configurationJson,{attributeUpdates:i=[],serverSideRpc:r=[]}=e;return{...this.connector,configurationJson:{...a,...t,attributeUpdates:i,serverSideRpc:r,paths:tr.mapPathsToDowngradedVersion(n??[])},configVersion:this.gatewayVersionIn}}}e("FtpVersionProcessor",Ki);class Yi{static getConfig(e,t){switch(e.type){case ct.MQTT:return new Li(t,e).getProcessedByVersion();case ct.OPCUA:return new qi(t,e).getProcessedByVersion();case ct.MODBUS:return new Vi(t,e).getProcessedByVersion();case ct.SOCKET:return new Ui(t,e).getProcessedByVersion();case ct.BACNET:return new ji(t,e).getProcessedByVersion();case ct.REST:return new $i(t,e).getProcessedByVersion();case ct.FTP:return new Ki(t,e).getProcessedByVersion();default:return e}}static parseVersion(e){if(Ee(e))return e;if(Me(e)){const[t,n="0",a="0"]=e.split(".");return parseFloat(`${t}.${n}${a.slice(0,1)}`)}return 0}static cleanUpConfigBaseInfo(e){const{name:t,id:n,enableRemoteLogging:a,logLevel:i,reportStrategy:r,configVersion:o,...s}=e;return s}}e("GatewayConnectorVersionMappingUtil",Yi);class Xi{static mapMasterToUpgradedVersion(e){return{slaves:e.slaves.map((e=>{const{sendDataOnlyOnChange:t,...n}=e;return{...n,deviceType:e.deviceType??"default",reportStrategy:t?{type:Jt.OnChange}:{type:Jt.OnReportPeriod,reportPeriod:e.pollPeriod}}}))}}static mapMasterToDowngradedVersion(e){return{slaves:e.slaves.map((e=>{const{reportStrategy:t,...n}=e;return{...n,sendDataOnlyOnChange:t?.type!==Jt.OnReportPeriod}}))}}static mapSlaveToDowngradedVersion(e){if(!e?.values)return e;const t=Object.keys(e.values).reduce(((t,n)=>t={...t,[n]:[e.values[n]]}),{});return{...e,values:t}}static mapSlaveToUpgradedVersion(e){if(!e?.values)return e;const t=Object.keys(e.values).reduce(((t,n)=>t={...t,[n]:this.mapValuesToUpgradedVersion(e.values[n][0]??{})}),{});return{...e,values:t}}static mapValuesToUpgradedVersion(e){return Object.keys(e).reduce(((t,n)=>t={...t,[n]:e[n].map((e=>({...e,type:"int"===e.type?Wt.INT16:e.type})))}),{})}}e("ModbusVersionMappingUtil",Xi);class Zi{static mapServerToUpgradedVersion(e){const{mapping:t,disableSubscriptions:n,pollPeriodInMillis:a,...i}=e;return{...i,pollPeriodInMillis:a??5e3,enableSubscriptions:!n}}static mapServerToDowngradedVersion(e){const{mapping:t,server:n}=e,{enableSubscriptions:a,...i}=n??{};return{...i,mapping:t?this.mapMappingToDowngradedVersion(t):[],disableSubscriptions:!a}}static mapMappingToUpgradedVersion(e){return e.map((e=>({deviceNodePattern:e.deviceNodePattern,deviceNodeSource:this.getDeviceNodeSourceByValue(e.deviceNodePattern),deviceInfo:{deviceNameExpression:e.deviceNamePattern,deviceNameExpressionSource:this.getTypeSourceByValue(e.deviceNamePattern),deviceProfileExpression:e.deviceTypePattern??"default",deviceProfileExpressionSource:this.getTypeSourceByValue(e.deviceTypePattern??"default")},attributes:e.attributes?.map((e=>({key:e.key,type:this.getTypeSourceByValue(e.path),value:e.path})))??[],attributes_updates:e.attributes_updates?.map((e=>({key:e.attributeOnThingsBoard,type:this.getTypeSourceByValue(e.attributeOnDevice),value:e.attributeOnDevice})))??[],timeseries:e.timeseries?.map((e=>({key:e.key,type:this.getTypeSourceByValue(e.path),value:e.path})))??[],rpc_methods:e.rpc_methods?.map((e=>({method:e.method,arguments:e.arguments.map((e=>({value:e,type:this.getArgumentType(e)})))})))??[]})))}static mapMappingToDowngradedVersion(e){return e.map((e=>({deviceNodePattern:e.deviceNodePattern,deviceNamePattern:e.deviceInfo.deviceNameExpression,deviceTypePattern:e.deviceInfo.deviceProfileExpression,attributes:e.attributes.map((e=>({key:e.key,path:e.value}))),attributes_updates:e.attributes_updates.map((e=>({attributeOnThingsBoard:e.key,attributeOnDevice:e.value}))),timeseries:e.timeseries.map((e=>({key:e.key,path:e.value}))),rpc_methods:e.rpc_methods.map((e=>({method:e.method,arguments:e.arguments.map((e=>e.value))})))})))}static getTypeSourceByValue(e){return e.includes("${")?Ma.IDENTIFIER:e.includes("/")||e.includes("\\")?Ma.PATH:Ma.CONST}static getDeviceNodeSourceByValue(e){return e.includes("${")?Ma.IDENTIFIER:Ma.PATH}static getArgumentType(e){switch(typeof e){case"boolean":return"boolean";case"number":return Number.isInteger(e)?"integer":"float";default:return"string"}}}e("OpcVersionMappingUtil",Zi);class Qi{static mapSocketToUpgradedVersion(e){const{devices:t,...n}=e??{};return Yi.cleanUpConfigBaseInfo(n)}static mapSocketToDowngradedVersion(e){const{devices:t,socket:n}=e??{};return{...n,devices:this.mapDevicesToDowngradedVersion(t??[])}}static mapDevicesToUpgradedVersion(e){return e?.map((e=>({...e,attributeRequests:e.attributeRequests?.map((e=>({...e,requestExpressionSource:this.getExpressionSource(e.requestExpression),attributeNameExpressionSource:this.getExpressionSource(e.attributeNameExpression)})))??[]})))??[]}static mapDevicesToDowngradedVersion(e){return e.map((e=>({...e,attributeRequests:e.attributeRequests?.map((({requestExpressionSource:e,attributeNameExpressionSource:t,...n})=>n))??[]})))}static getExpressionSource(e){return e.includes("${")||e.includes("[")?da.Expression:da.Constant}}e("SocketVersionMappingUtil",Qi);class Ji{static mapApplicationToUpgradedVersion(e){const{address:t="",...n}=e,[a,i]=t.split(":"),[r,o]=a.split("/");return{host:r,port:i,mask:o,...n}}static mapApplicationToDowngradedVersion(e){const{host:t="",port:n="",mask:a="",...i}=e;return{address:a?`${t}/${a}:${n}`:`${t}:${n}`,...i}}static mapDevicesToUpgradedVersion(e){return e?.map((({address:e="",deviceName:t,deviceType:n,attributes:a,timeseries:i,attributeUpdates:r,serverSideRpc:o,...s})=>({...s,host:e.split(":")[0],port:e.split(":")[1],deviceInfo:{deviceNameExpression:t,deviceProfileExpression:n,deviceNameExpressionSource:this.getExpressionSource(t),deviceProfileExpressionSource:this.getExpressionSource(n)},attributes:this.getUpdateKeys(a),timeseries:this.getUpdateKeys(i),attributeUpdates:this.getUpdateKeys(r),serverSideRpc:this.getUpdateKeys(o)})))??[]}static mapDevicesToDowngradedVersion(e){return e?.map((({port:e,host:t,deviceInfo:n,attributes:a,timeseries:i,attributeUpdates:r,serverSideRpc:o,...s})=>({...s,address:`${t}:${e}`,deviceName:n?.deviceNameExpression,deviceType:n?.deviceProfileExpression,attributes:this.getDowngradedKeys(a),timeseries:this.getDowngradedKeys(i),attributeUpdates:this.getDowngradedKeys(r),serverSideRpc:this.getDowngradedKeys(o)})))??[]}static getExpressionSource(e){return e.includes("${")||e.includes("[")?da.Expression:da.Constant}static getUpdateKeys(e){return e?.map((({objectId:e="",...t})=>({objectType:e.split(":")[0],objectId:e.split(":")[1],...t})))??[]}static getDowngradedKeys(e){return e?.map((({objectId:e="",objectType:t="",...n})=>({objectId:`${t}:${e}`,...n})))??[]}}e("BacnetVersionMappingUtil",Ji);class er{static mapMappingToUpgradedVersion(e){return e?.map((({converter:e,...t})=>{const{deviceNameExpression:n,deviceTypeExpression:a,...i}=e;return{converter:{deviceInfo:{deviceNameExpressionSource:this.getTypeSourceByValue(n),deviceNameExpression:n,deviceProfileExpressionSource:this.getTypeSourceByValue(a),deviceProfileExpression:a},...i},...t}}))}static mapMappingToDowngradedVersion(e){return e?.map((({converter:e,...t})=>{const{deviceInfo:n,...a}=e;return{converter:{deviceNameExpression:n?.deviceNameExpression,deviceTypeExpression:n?.deviceProfileExpression,...a},...t}}))}static getTypeSourceByValue(e=""){return e.includes("${")?fa.REQUEST:fa.CONST}}e("RestVersionMappingUtil",er);class tr{static mapPathsToUpgradedVersion(e=[]){return e.map((({timeseries:e=[],attributes:t=[],...n})=>({...n,timeseries:this.getUpgradedKeys(e),attributes:this.getUpgradedKeys(t)})))}static mapPathsToDowngradedVersion(e=[]){return e.map((({timeseries:e=[],attributes:t=[],...n})=>({...n,timeseries:this.getDowngradedKeys(e),attributes:this.getDowngradedKeys(t)})))}static getUpgradedKeys(e){return e.map((({type:e,...t})=>{let n;switch(e){case"int":n=Yt.INTEGER;break;case"bool":n=Yt.BOOLEAN;break;default:n=Yt.STRING}return{...t,type:n}}))}static getDowngradedKeys(e){return e.map((({type:e,...t})=>{let n;switch(e){case Yt.INTEGER:n="int";break;case Yt.BOOLEAN:n="bool";break;case Yt.DOUBLE:default:n=Yt.STRING}return{...t,type:n}}))}}e("FtpVersionMappingUtil",tr);class nr{transform(e,t){const n=Yi.parseVersion(e);return t===ct.MODBUS?n>=Yi.parseVersion(pt.v3_5_2):n>=Yi.parseVersion(pt.v3_6_0)}static{this.ɵfac=function(e){return new(e||nr)}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"withReportStrategy",type:nr,pure:!0,standalone:!0})}}function ar(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.time-series-name-required")," "))}function ir(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.time-series-name-pattern")," "))}function rr(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.name-already-exists")," "))}function or(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-required")," "))}function sr(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-pattern")," "))}function lr(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-min")," "))}function pr(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.command-required")," "))}function cr(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.command-pattern")," "))}e("ReportStrategyVersionPipe",nr);class dr extends A{constructor(e,t,n,a,i,r,o,s){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.dialogService=r,this.translate=o,this.destroyRef=s,this.commandHelpLink=O+"/docs/iot-gateway/configuration/#subsection-statistics",this.editCommandFormGroup=this.fb.group({attributeOnGateway:["",[$.required,$.pattern(an),this.uniqNameRequired()]],command:["",[$.required,$.pattern(/^(?=\S).*\S$/)]],timeout:[10,[$.required,$.min(1),$.pattern(nn),$.pattern(/^[^.\s]+$/)]],installCmd:["",$.pattern(an)]}),this.editCommandFormGroup.patchValue(this.data.command,{emitEvent:!1})}cancel(){this.confirmConnectorChange().pipe(ve(Boolean),xn(this.destroyRef)).subscribe((()=>this.dialogRef.close(null)))}apply(){this.dialogRef.close({current:this.editCommandFormGroup.value,prev:this.data.command})}confirmConnectorChange(){return this.editCommandFormGroup.dirty?this.dialogService.confirm(this.translate.instant("gateway.statistics.change-command-title"),this.translate.instant("gateway.statistics.change-command-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0):ie(!0)}uniqNameRequired(){return e=>{const t=e.value?.trim().toLowerCase(),n=t&&this.data.existingCommands.some((e=>e.toLowerCase()===t))&&t!==this.data.command.attributeOnGateway.toLowerCase();return n?{duplicateName:{valid:!1}}:null}}static{this.ɵfac=function(e){return new(e||dr)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(t.DestroyRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:dr,selectors:[["tb-edit-custom-command-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:64,vars:27,consts:[[1,"edit-command-container",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel","stroked","no-padding-bottom","no-gap","command-container"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],["appearance","outline",1,"flex"],["translate",""],["matInput","","formControlName","attributeOnGateway"],["matIconSuffix","",1,"cursor-pointer",3,"matTooltip"],["matInput","","formControlName","timeout","type","number","min","1"],["appearance","outline",1,"mat-block"],["matInput","","formControlName","command"],[1,"tb-settings","pb-4"],["translate","",1,"tb-form-panel-title"],["matInput","","formControlName","installCmd"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"mat-toolbar",1)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",2)(6,"div",3),t.ɵɵelementStart(7,"button",4),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",5),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",6)(11,"div",7)(12,"section",8)(13,"section",9)(14,"mat-form-field",10)(15,"mat-label",11),t.ɵɵtext(16,"gateway.statistics.name"),t.ɵɵelementEnd(),t.ɵɵelement(17,"input",12),t.ɵɵtemplate(18,ar,3,3,"mat-error")(19,ir,3,3,"mat-error")(20,rr,3,3,"mat-error"),t.ɵɵelementStart(21,"mat-icon",13),t.ɵɵpipe(22,"translate"),t.ɵɵtext(23,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(24,"mat-form-field",10)(25,"mat-label",11),t.ɵɵtext(26,"gateway.statistics.timeout"),t.ɵɵelementEnd(),t.ɵɵelement(27,"input",14),t.ɵɵtemplate(28,or,3,3,"mat-error")(29,sr,3,3,"mat-error")(30,lr,3,3,"mat-error"),t.ɵɵelementStart(31,"mat-icon",13),t.ɵɵpipe(32,"translate"),t.ɵɵtext(33,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(34,"section")(35,"mat-form-field",15)(36,"mat-label",11),t.ɵɵtext(37,"gateway.statistics.command"),t.ɵɵelementEnd(),t.ɵɵelement(38,"input",16),t.ɵɵtemplate(39,pr,3,3,"mat-error")(40,cr,3,3,"mat-error"),t.ɵɵelementStart(41,"mat-icon",13),t.ɵɵpipe(42,"translate"),t.ɵɵtext(43,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(44,"section")(45,"mat-expansion-panel",17)(46,"mat-expansion-panel-header")(47,"mat-panel-title")(48,"div",18),t.ɵɵtext(49,"gateway.advanced-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(50,"mat-form-field",10)(51,"mat-label",11),t.ɵɵtext(52,"gateway.statistics.install-cmd"),t.ɵɵelementEnd(),t.ɵɵelement(53,"input",19),t.ɵɵelementStart(54,"mat-icon",13),t.ɵɵpipe(55,"translate"),t.ɵɵtext(56,"info_outlined "),t.ɵɵelementEnd()()()()()()(),t.ɵɵelementStart(57,"div",20)(58,"button",21),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(59),t.ɵɵpipe(60,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(61,"button",22),t.ɵɵlistener("click",(function(){return n.apply()})),t.ɵɵtext(62),t.ɵɵpipe(63,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.editCommandFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,13,n.data.titleText)),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.commandHelpLink),t.ɵɵadvance(12),t.ɵɵconditional(n.editCommandFormGroup.get("attributeOnGateway").hasError("required")?18:n.editCommandFormGroup.get("attributeOnGateway").hasError("pattern")?19:n.editCommandFormGroup.get("attributeOnGateway").hasError("duplicateName")?20:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(22,15,"gateway.hints.attribute")),t.ɵɵadvance(7),t.ɵɵconditional(n.editCommandFormGroup.get("timeout").hasError("required")?28:n.editCommandFormGroup.get("timeout").hasError("pattern")?29:n.editCommandFormGroup.get("timeout").hasError("min")?30:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(32,17,"gateway.hints.timeout")),t.ɵɵadvance(8),t.ɵɵconditional(n.editCommandFormGroup.get("command").hasError("required")?39:n.editCommandFormGroup.get("command").hasError("pattern")?40:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(42,19,"gateway.hints.command")),t.ɵɵadvance(13),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(55,21,"gateway.hints.install-cmd")),t.ɵɵadvance(5),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(60,23,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.editCommandFormGroup.invalid||!n.editCommandFormGroup.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(63,25,n.data.buttonText)," "))},dependencies:t.ɵɵgetComponentDepsFactory(dr,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .edit-command-container[_ngcontent-%COMP%]{min-width:40vw;width:50vw}[_nghost-%COMP%]     .pointer-event{pointer-events:all}[_nghost-%COMP%]     .toggle-group span{padding:0 25px}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{color:#e0e0e0}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix:hover{color:#9e9e9e}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex;align-items:center}']})}}var ur=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},mr=new function(){this.browser=new ur,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(mr.wxa=!0,mr.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?mr.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(mr.node=!0,mr.svgSupported=!0):function(e,t){var n=t.browser,a=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),r=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);a&&(n.firefox=!0,n.version=a[1]);i&&(n.ie=!0,n.version=i[1]);r&&(n.edge=!0,n.version=r[1],n.newEdge=+r[1].split(".")[0]>18);o&&(n.weChat=!0);t.svgSupported="undefined"!=typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported="undefined"!=typeof document;var s=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,mr);var hr="sans-serif",gr="12px "+hr;var fr,yr,vr=function(e){var t={};if("undefined"==typeof JSON)return t;for(var n=0;n<e.length;n++){var a=String.fromCharCode(n+32),i=(e.charCodeAt(n)-20)/100;t[a]=i}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),br={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(e,t){if(!fr){var n=br.createCanvas();fr=n&&n.getContext("2d")}if(fr)return yr!==t&&(yr=fr.font=t||gr),fr.measureText(e);e=e||"";var a=/(\d+)px/.exec(t=t||gr),i=a&&+a[1]||12,r=0;if(t.indexOf("mono")>=0)r=i*e.length;else for(var o=0;o<e.length;o++){var s=vr[e[o]];r+=null==s?i:s*i}return{width:r}},loadImage:function(e,t,n){var a=new Image;return a.onload=t,a.onerror=n,a.src=e,a}};var xr=Hr(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(function(e,t){return e["[object "+t+"]"]=!0,e}),{}),wr=Hr(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(function(e,t){return e["[object "+t+"Array]"]=!0,e}),{}),Sr=Object.prototype.toString,Cr=Array.prototype,_r=Cr.forEach,Tr=Cr.filter,Ir=Cr.slice,Er=Cr.map,Mr=function(){}.constructor,kr=Mr?Mr.prototype:null,Pr="__proto__",Dr=2311;function Or(){return Dr++}function Ar(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];"undefined"!=typeof console&&console.error.apply(console,e)}function Fr(e){if(null==e||"object"!=typeof e)return e;var t=e,n=Sr.call(e);if("[object Array]"===n){if(!xo(e)){t=[];for(var a=0,i=e.length;a<i;a++)t[a]=Fr(e[a])}}else if(wr[n]){if(!xo(e)){var r=e.constructor;if(r.from)t=r.from(e);else{t=new r(e.length);for(a=0,i=e.length;a<i;a++)t[a]=e[a]}}}else if(!xr[n]&&!xo(e)&&!ro(e))for(var o in t={},e)e.hasOwnProperty(o)&&o!==Pr&&(t[o]=Fr(e[o]));return t}function Rr(e,t,n){if(!no(t)||!no(e))return n?Fr(t):e;for(var a in t)if(t.hasOwnProperty(a)&&a!==Pr){var i=e[a],r=t[a];!no(r)||!no(i)||Zr(r)||Zr(i)||ro(r)||ro(i)||ao(r)||ao(i)||xo(r)||xo(i)?!n&&a in e||(e[a]=Fr(t[a])):Rr(i,r,n)}return e}function Br(e,t){for(var n=e[0],a=1,i=e.length;a<i;a++)n=Rr(n,e[a],t);return n}function Nr(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&n!==Pr&&(e[n]=t[n]);return e}function Lr(e,t,n){for(var a=Kr(t),i=0;i<a.length;i++){var r=a[i];(n?null!=t[r]:null==e[r])&&(e[r]=t[r])}return e}br.createCanvas;function Vr(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n}return-1}function qr(e,t){var n=e.prototype;function a(){}for(var i in a.prototype=t.prototype,e.prototype=new a,n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);e.prototype.constructor=e,e.superClass=t}function Gr(e,t,n){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var a=Object.getOwnPropertyNames(t),i=0;i<a.length;i++){var r=a[i];"constructor"!==r&&(n?null!=t[r]:null==e[r])&&(e[r]=t[r])}else Lr(e,t,n)}function zr(e){return!!e&&("string"!=typeof e&&"number"==typeof e.length)}function Ur(e,t,n){if(e&&t)if(e.forEach&&e.forEach===_r)e.forEach(t,n);else if(e.length===+e.length)for(var a=0,i=e.length;a<i;a++)t.call(n,e[a],a,e);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function jr(e,t,n){if(!e)return[];if(!t)return ho(e);if(e.map&&e.map===Er)return e.map(t,n);for(var a=[],i=0,r=e.length;i<r;i++)a.push(t.call(n,e[i],i,e));return a}function Hr(e,t,n,a){if(e&&t){for(var i=0,r=e.length;i<r;i++)n=t.call(a,n,e[i],i,e);return n}}function Wr(e,t,n){if(!e)return[];if(!t)return ho(e);if(e.filter&&e.filter===Tr)return e.filter(t,n);for(var a=[],i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)&&a.push(e[i]);return a}function $r(e,t,n){if(e&&t)for(var a=0,i=e.length;a<i;a++)if(t.call(n,e[a],a,e))return e[a]}function Kr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}var Yr=kr&&Qr(kr.bind)?kr.call.bind(kr.bind):function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return function(){return e.apply(t,n.concat(Ir.call(arguments)))}};function Xr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(this,t.concat(Ir.call(arguments)))}}function Zr(e){return Array.isArray?Array.isArray(e):"[object Array]"===Sr.call(e)}function Qr(e){return"function"==typeof e}function Jr(e){return"string"==typeof e}function eo(e){return"[object String]"===Sr.call(e)}function to(e){return"number"==typeof e}function no(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function ao(e){return!!xr[Sr.call(e)]}function io(e){return!!wr[Sr.call(e)]}function ro(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function oo(e){return null!=e.colorStops}function so(e){return null!=e.image}function lo(e){return"[object RegExp]"===Sr.call(e)}function po(e){return e!=e}function co(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,a=e.length;n<a;n++)if(null!=e[n])return e[n]}function uo(e,t){return null!=e?e:t}function mo(e,t,n){return null!=e?e:null!=t?t:n}function ho(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Ir.apply(e,t)}function go(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function fo(e,t){if(!e)throw new Error(t)}function yo(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var vo="__ec_primitive__";function bo(e){e[vo]=!0}function xo(e){return e[vo]}var wo=function(){function e(){this.data={}}return e.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,this},e.prototype.keys=function(){return Kr(this.data)},e.prototype.forEach=function(e){var t=this.data;for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},e}(),So="function"==typeof Map;var Co=function(){function e(t){var n=Zr(t);this.data=So?new Map:new wo;var a=this;function i(e,t){n?a.set(e,t):a.set(t,e)}t instanceof e?t.each(i):t&&Ur(t,i)}return e.prototype.hasKey=function(e){return this.data.has(e)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.set=function(e,t){return this.data.set(e,t),t},e.prototype.each=function(e,t){this.data.forEach((function(n,a){e.call(t,n,a)}))},e.prototype.keys=function(){var e=this.data.keys();return So?Array.from(e):e},e.prototype.removeKey=function(e){this.data.delete(e)},e}();function _o(e){return new Co(e)}function To(e,t){for(var n=new e.constructor(e.length+t.length),a=0;a<e.length;a++)n[a]=e[a];var i=e.length;for(a=0;a<t.length;a++)n[a+i]=t[a];return n}function Io(e,t){var n;if(Object.create)n=Object.create(e);else{var a=function(){};a.prototype=e,n=new a}return t&&Nr(n,t),n}function Eo(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function Mo(e,t){return e.hasOwnProperty(t)}function ko(){}var Po=180/Math.PI;function Do(e,t){return null==e&&(e=0),null==t&&(t=0),[e,t]}function Oo(e,t){return e[0]=t[0],e[1]=t[1],e}function Ao(e){return[e[0],e[1]]}function Fo(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ro(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e}function Bo(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function No(e){return Math.sqrt(Lo(e))}function Lo(e){return e[0]*e[0]+e[1]*e[1]}function Vo(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function qo(e,t){var n=No(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function Go(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var zo=Go;function Uo(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var jo=Uo;function Ho(e,t,n,a){return e[0]=t[0]+a*(n[0]-t[0]),e[1]=t[1]+a*(n[1]-t[1]),e}function Wo(e,t,n){var a=t[0],i=t[1];return e[0]=n[0]*a+n[2]*i+n[4],e[1]=n[1]*a+n[3]*i+n[5],e}function $o(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Ko(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Yo=function(e,t){this.target=e,this.topTarget=t&&t.topTarget},Xo=function(){function e(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Yo(t,e),"dragstart",e.event))},e.prototype._drag=function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,a=e.offsetY,i=n-this._x,r=a-this._y;this._x=n,this._y=a,t.drift(i,r,e),this.handler.dispatchToElement(new Yo(t,e),"drag",e.event);var o=this.handler.findHover(n,a,t).target,s=this._dropTarget;this._dropTarget=o,t!==o&&(s&&o!==s&&this.handler.dispatchToElement(new Yo(s,e),"dragleave",e.event),o&&o!==s&&this.handler.dispatchToElement(new Yo(o,e),"dragenter",e.event))}},e.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Yo(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Yo(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},e}(),Zo=function(){function e(e){e&&(this._$eventProcessor=e)}return e.prototype.on=function(e,t,n,a){this._$handlers||(this._$handlers={});var i=this._$handlers;if("function"==typeof t&&(a=n,n=t,t=null),!n||!e)return this;var r=this._$eventProcessor;null!=t&&r&&r.normalizeQuery&&(t=r.normalizeQuery(t)),i[e]||(i[e]=[]);for(var o=0;o<i[e].length;o++)if(i[e][o].h===n)return this;var s={h:n,query:t,ctx:a||this,callAtLast:n.zrEventfulCallAtLast},l=i[e].length-1,p=i[e][l];return p&&p.callAtLast?i[e].splice(l,0,s):i[e].push(s),this},e.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},e.prototype.off=function(e,t){var n=this._$handlers;if(!n)return this;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var a=[],i=0,r=n[e].length;i<r;i++)n[e][i].h!==t&&a.push(n[e][i]);n[e]=a}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var a=this._$handlers[e],i=this._$eventProcessor;if(a)for(var r=t.length,o=a.length,s=0;s<o;s++){var l=a[s];if(!i||!i.filter||null==l.query||i.filter(e,l.query))switch(r){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,t[0]);break;case 2:l.h.call(l.ctx,t[0],t[1]);break;default:l.h.apply(l.ctx,t)}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e.prototype.triggerWithContext=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var a=this._$handlers[e],i=this._$eventProcessor;if(a)for(var r=t.length,o=t[r-1],s=a.length,l=0;l<s;l++){var p=a[l];if(!i||!i.filter||null==p.query||i.filter(e,p.query))switch(r){case 0:p.h.call(o);break;case 1:p.h.call(o,t[0]);break;case 2:p.h.call(o,t[0],t[1]);break;default:p.h.apply(o,t.slice(1,r-1))}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e}(),Qo=Math.log(2);function Jo(e,t,n,a,i,r){var o=a+"-"+i,s=e.length;if(r.hasOwnProperty(o))return r[o];if(1===t){var l=Math.round(Math.log((1<<s)-1&~i)/Qo);return e[n][l]}for(var p=a|1<<n,c=n+1;a&1<<c;)c++;for(var d=0,u=0,m=0;u<s;u++){var h=1<<u;h&i||(d+=(m%2?-1:1)*e[n][u]*Jo(e,t-1,c,p,i|h,r),m++)}return r[o]=d,d}function es(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],a={},i=Jo(n,8,0,0,0,a);if(0!==i){for(var r=[],o=0;o<8;o++)for(var s=0;s<8;s++)null==r[s]&&(r[s]=0),r[s]+=((o+s)%2?-1:1)*Jo(n,7,0===o?1:0,1<<o,1<<s,a)/i*t[o];return function(e,t,n){var a=t*r[6]+n*r[7]+1;e[0]=(t*r[0]+n*r[1]+r[2])/a,e[1]=(t*r[3]+n*r[4]+r[5])/a}}}var ts="___zrEVENTSAVED",ns=[];function as(e,t,n,a,i){if(t.getBoundingClientRect&&mr.domSupported&&!is(t)){var r=t[ts]||(t[ts]={}),o=function(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var a=["left","right"],i=["top","bottom"],r=0;r<4;r++){var o=document.createElement("div"),s=r%2,l=(r>>1)%2;o.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",a[s]+":0",i[l]+":0",a[1-s]+":auto",i[1-l]+":auto",""].join("!important;"),e.appendChild(o),n.push(o)}return n}(t,r),s=function(e,t,n){for(var a=n?"invTrans":"trans",i=t[a],r=t.srcCoords,o=[],s=[],l=!0,p=0;p<4;p++){var c=e[p].getBoundingClientRect(),d=2*p,u=c.left,m=c.top;o.push(u,m),l=l&&r&&u===r[d]&&m===r[d+1],s.push(e[p].offsetLeft,e[p].offsetTop)}return l&&i?i:(t.srcCoords=o,t[a]=n?es(s,o):es(o,s))}(o,r,i);if(s)return s(e,n,a),!0}return!1}function is(e){return"CANVAS"===e.nodeName.toUpperCase()}var rs=/([&<>"'])/g,os={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ss(e){return null==e?"":(e+"").replace(rs,(function(e,t){return os[t]}))}var ls=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ps=[],cs=mr.browser.firefox&&+mr.browser.version.split(".")[0]<39;function ds(e,t,n,a){return n=n||{},a?us(e,t,n):cs&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):us(e,t,n),n}function us(e,t,n){if(mr.domSupported&&e.getBoundingClientRect){var a=t.clientX,i=t.clientY;if(is(e)){var r=e.getBoundingClientRect();return n.zrX=a-r.left,void(n.zrY=i-r.top)}if(as(ps,e,a,i))return n.zrX=ps[0],void(n.zrY=ps[1])}n.zrX=n.zrY=0}function ms(e){return e||window.event}function hs(e,t,n){if(null!=(t=ms(t)).zrX)return t;var a=t.type;if(a&&a.indexOf("touch")>=0){var i="touchend"!==a?t.targetTouches[0]:t.changedTouches[0];i&&ds(e,i,t,n)}else{ds(e,t,t,n);var r=function(e){var t=e.wheelDelta;if(t)return t;var n=e.deltaX,a=e.deltaY;if(null==n||null==a)return t;return 3*(0!==a?Math.abs(a):Math.abs(n))*(a>0?-1:a<0?1:n>0?-1:1)}(t);t.zrDelta=r?r/120:-(t.detail||0)/3}var o=t.button;return null==t.which&&void 0!==o&&ls.test(t.type)&&(t.which=1&o?1:2&o?3:4&o?2:0),t}function gs(e,t,n,a){e.addEventListener(t,n,a)}var fs=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function ys(e){return 2===e.which||3===e.which}var vs=function(){function e(){this._track=[]}return e.prototype.recognize=function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(e,t,n){var a=e.touches;if(a){for(var i={points:[],touches:[],target:t,event:e},r=0,o=a.length;r<o;r++){var s=a[r],l=ds(n,s,{});i.points.push([l.zrX,l.zrY]),i.touches.push(s)}this._track.push(i)}},e.prototype._recognize=function(e){for(var t in xs)if(xs.hasOwnProperty(t)){var n=xs[t](this._track,e);if(n)return n}},e}();function bs(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}var xs={pinch:function(e,t){var n=e.length;if(n){var a,i=(e[n-1]||{}).points,r=(e[n-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var o=bs(i)/bs(r);!isFinite(o)&&(o=1),t.pinchScale=o;var s=[((a=i)[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2];return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function ws(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Ss(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Cs(e,t,n){var a=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],r=t[0]*n[2]+t[2]*n[3],o=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=a,e[1]=i,e[2]=r,e[3]=o,e[4]=s,e[5]=l,e}function _s(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function Ts(e,t,n,a){void 0===a&&(a=[0,0]);var i=t[0],r=t[2],o=t[4],s=t[1],l=t[3],p=t[5],c=Math.sin(n),d=Math.cos(n);return e[0]=i*d+s*c,e[1]=-i*c+s*d,e[2]=r*d+l*c,e[3]=-r*c+d*l,e[4]=d*(o-a[0])+c*(p-a[1])+a[0],e[5]=d*(p-a[1])-c*(o-a[0])+a[1],e}function Is(e,t,n){var a=n[0],i=n[1];return e[0]=t[0]*a,e[1]=t[1]*i,e[2]=t[2]*a,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*i,e}function Es(e,t){var n=t[0],a=t[2],i=t[4],r=t[1],o=t[3],s=t[5],l=n*o-r*a;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-a*l,e[3]=n*l,e[4]=(a*s-o*i)*l,e[5]=(r*i-n*s)*l,e):null}function Ms(e){var t=[1,0,0,1,0,0];return Ss(t,e),t}var ks=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},e.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},e.prototype.distanceSquare=function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(e){if(e){var t=this.x,n=this.y;return this.x=e[0]*t+e[2]*n+e[4],this.y=e[1]*t+e[3]*n+e[5],this}},e.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},e.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},e.set=function(e,t,n){e.x=t,e.y=n},e.copy=function(e,t){e.x=t.x,e.y=t.y},e.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.lenSquare=function(e){return e.x*e.x+e.y*e.y},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.add=function(e,t,n){e.x=t.x+n.x,e.y=t.y+n.y},e.sub=function(e,t,n){e.x=t.x-n.x,e.y=t.y-n.y},e.scale=function(e,t,n){e.x=t.x*n,e.y=t.y*n},e.scaleAndAdd=function(e,t,n,a){e.x=t.x+n.x*a,e.y=t.y+n.y*a},e.lerp=function(e,t,n,a){var i=1-a;e.x=i*t.x+a*n.x,e.y=i*t.y+a*n.y},e}(),Ps=Math.min,Ds=Math.max,Os=new ks,As=new ks,Fs=new ks,Rs=new ks,Bs=new ks,Ns=new ks,Ls=function(){function e(e,t,n,a){n<0&&(e+=n,n=-n),a<0&&(t+=a,a=-a),this.x=e,this.y=t,this.width=n,this.height=a}return e.prototype.union=function(e){var t=Ps(e.x,this.x),n=Ps(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Ds(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Ds(e.y+e.height,this.y+this.height)-n:this.height=e.height,this.x=t,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(e){var t=this,n=e.width/t.width,a=e.height/t.height,i=[1,0,0,1,0,0];return _s(i,i,[-t.x,-t.y]),Is(i,i,[n,a]),_s(i,i,[e.x,e.y]),i},e.prototype.intersect=function(t,n){if(!t)return!1;t instanceof e||(t=e.create(t));var a=this,i=a.x,r=a.x+a.width,o=a.y,s=a.y+a.height,l=t.x,p=t.x+t.width,c=t.y,d=t.y+t.height,u=!(r<l||p<i||s<c||d<o);if(n){var m=1/0,h=0,g=Math.abs(r-l),f=Math.abs(p-i),y=Math.abs(s-c),v=Math.abs(d-o),b=Math.min(g,f),x=Math.min(y,v);r<l||p<i?b>h&&(h=b,g<f?ks.set(Ns,-g,0):ks.set(Ns,f,0)):b<m&&(m=b,g<f?ks.set(Bs,g,0):ks.set(Bs,-f,0)),s<c||d<o?x>h&&(h=x,y<v?ks.set(Ns,0,-y):ks.set(Ns,0,v)):b<m&&(m=b,y<v?ks.set(Bs,0,y):ks.set(Bs,0,-v))}return n&&ks.copy(n,u?Bs:Ns),u},e.prototype.contain=function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return 0===this.width||0===this.height},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},e.applyTransform=function(t,n,a){if(a){if(a[1]<1e-5&&a[1]>-1e-5&&a[2]<1e-5&&a[2]>-1e-5){var i=a[0],r=a[3],o=a[4],s=a[5];return t.x=n.x*i+o,t.y=n.y*r+s,t.width=n.width*i,t.height=n.height*r,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}Os.x=Fs.x=n.x,Os.y=Rs.y=n.y,As.x=Rs.x=n.x+n.width,As.y=Fs.y=n.y+n.height,Os.transform(a),Rs.transform(a),As.transform(a),Fs.transform(a),t.x=Ps(Os.x,As.x,Fs.x,Rs.x),t.y=Ps(Os.y,As.y,Fs.y,Rs.y);var l=Ds(Os.x,As.x,Fs.x,Rs.x),p=Ds(Os.y,As.y,Fs.y,Rs.y);t.width=l-t.x,t.height=p-t.y}else t!==n&&e.copy(t,n)},e}(),Vs="silent";function qs(){fs(this.event)}var Gs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=null,t}return ze(t,e),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Zo),zs=function(e,t){this.x=e,this.y=t},Us=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],js=new Ls(0,0,0,0),Hs=function(e){function t(t,n,a,i,r){var o=e.call(this)||this;return o._hovered=new zs(0,0),o.storage=t,o.painter=n,o.painterRoot=i,o._pointerSize=r,a=a||new Gs,o.proxy=null,o.setHandlerProxy(a),o._draggingMgr=new Xo(o),o}return ze(t,e),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(Ur(Us,(function(t){e.on&&e.on(t,this[t],this)}),this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var t=e.zrX,n=e.zrY,a=Ks(this,t,n),i=this._hovered,r=i.target;r&&!r.__zr&&(r=(i=this.findHover(i.x,i.y)).target);var o=this._hovered=a?new zs(t,n):this.findHover(t,n),s=o.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),r&&s!==r&&this.dispatchToElement(i,"mouseout",e),this.dispatchToElement(o,"mousemove",e),s&&s!==r&&this.dispatchToElement(o,"mouseover",e)},t.prototype.mouseout=function(e){var t=e.zrEventControl;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new zs(0,0)},t.prototype.dispatch=function(e,t){var n=this[e];n&&n.call(this,t)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},t.prototype.dispatchToElement=function(e,t,n){var a=(e=e||{}).target;if(!a||!a.silent){for(var i="on"+t,r=function(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:qs}}(t,e,n);a&&(a[i]&&(r.cancelBubble=!!a[i].call(a,r)),a.trigger(t,r),a=a.__hostTarget?a.__hostTarget:a.parent,!r.cancelBubble););r.cancelBubble||(this.trigger(t,r),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(e){"function"==typeof e[i]&&e[i].call(e,r),e.trigger&&e.trigger(t,r)})))}},t.prototype.findHover=function(e,t,n){var a=this.storage.getDisplayList(),i=new zs(e,t);if($s(a,i,e,t,n),this._pointerSize&&!i.target){for(var r=[],o=this._pointerSize,s=o/2,l=new Ls(e-s,t-s,o,o),p=a.length-1;p>=0;p--){var c=a[p];c===n||c.ignore||c.ignoreCoarsePointer||c.parent&&c.parent.ignoreCoarsePointer||(js.copy(c.getBoundingRect()),c.transform&&js.applyTransform(c.transform),js.intersect(l)&&r.push(c))}if(r.length)for(var d=Math.PI/12,u=2*Math.PI,m=0;m<s;m+=4)for(var h=0;h<u;h+=d){if($s(r,i,e+m*Math.cos(h),t+m*Math.sin(h),n),i.target)return i}}return i},t.prototype.processGesture=function(e,t){this._gestureMgr||(this._gestureMgr=new vs);var n=this._gestureMgr;"start"===t&&n.clear();var a=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),a){var i=a.type;e.gestureEvent=i;var r=new zs;r.target=a.target,this.dispatchToElement(r,i,a.event)}},t}(Zo);function Ws(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var a=e,i=void 0,r=!1;a;){if(a.ignoreClip&&(r=!0),!r){var o=a.getClipPath();if(o&&!o.contain(t,n))return!1}a.silent&&(i=!0);var s=a.__hostTarget;a=s||a.parent}return!i||Vs}return!1}function $s(e,t,n,a,i){for(var r=e.length-1;r>=0;r--){var o=e[r],s=void 0;if(o!==i&&!o.ignore&&(s=Ws(o,n,a))&&(!t.topTarget&&(t.topTarget=o),s!==Vs)){t.target=o;break}}}function Ks(e,t,n){var a=e.painter;return t<0||t>a.getWidth()||n<0||n>a.getHeight()}Ur(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(e){Hs.prototype[e]=function(t){var n,a,i=t.zrX,r=t.zrY,o=Ks(this,i,r);if("mouseup"===e&&o||(a=(n=this.findHover(i,r)).target),"mousedown"===e)this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if("mouseup"===e)this._upEl=a;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||zo(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,e,t)}}));function Ys(e,t,n,a){var i=t+1;if(i===n)return 1;if(a(e[i++],e[t])<0){for(;i<n&&a(e[i],e[i-1])<0;)i++;!function(e,t,n){n--;for(;t<n;){var a=e[t];e[t++]=e[n],e[n--]=a}}(e,t,i)}else for(;i<n&&a(e[i],e[i-1])>=0;)i++;return i-t}function Xs(e,t,n,a,i){for(a===t&&a++;a<n;a++){for(var r,o=e[a],s=t,l=a;s<l;)i(o,e[r=s+l>>>1])<0?l=r:s=r+1;var p=a-s;switch(p){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;p>0;)e[s+p]=e[s+p-1],p--}e[s]=o}}function Zs(e,t,n,a,i,r){var o=0,s=0,l=1;if(r(e,t[n+i])>0){for(s=a-i;l<s&&r(e,t[n+i+l])>0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&r(e,t[n+i-l])<=0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var p=o;o=i-l,l=i-p}for(o++;o<l;){var c=o+(l-o>>>1);r(e,t[n+c])>0?o=c+1:l=c}return l}function Qs(e,t,n,a,i,r){var o=0,s=0,l=1;if(r(e,t[n+i])<0){for(s=i+1;l<s&&r(e,t[n+i-l])<0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var p=o;o=i-l,l=i-p}else{for(s=a-i;l<s&&r(e,t[n+i+l])>=0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var c=o+(l-o>>>1);r(e,t[n+c])<0?l=c:o=c+1}return l}function Js(e,t){var n,a,i=7,r=0,o=[];function s(s){var l=n[s],p=a[s],c=n[s+1],d=a[s+1];a[s]=p+d,s===r-3&&(n[s+1]=n[s+2],a[s+1]=a[s+2]),r--;var u=Qs(e[c],e,l,p,0,t);l+=u,0!==(p-=u)&&0!==(d=Zs(e[l+p-1],e,c,d,d-1,t))&&(p<=d?function(n,a,r,s){var l=0;for(l=0;l<a;l++)o[l]=e[n+l];var p=0,c=r,d=n;if(e[d++]=e[c++],0==--s){for(l=0;l<a;l++)e[d+l]=o[p+l];return}if(1===a){for(l=0;l<s;l++)e[d+l]=e[c+l];return void(e[d+s]=o[p])}var u,m,h,g=i;for(;;){u=0,m=0,h=!1;do{if(t(e[c],o[p])<0){if(e[d++]=e[c++],m++,u=0,0==--s){h=!0;break}}else if(e[d++]=o[p++],u++,m=0,1==--a){h=!0;break}}while((u|m)<g);if(h)break;do{if(0!==(u=Qs(e[c],o,p,a,0,t))){for(l=0;l<u;l++)e[d+l]=o[p+l];if(d+=u,p+=u,(a-=u)<=1){h=!0;break}}if(e[d++]=e[c++],0==--s){h=!0;break}if(0!==(m=Zs(o[p],e,c,s,0,t))){for(l=0;l<m;l++)e[d+l]=e[c+l];if(d+=m,c+=m,0===(s-=m)){h=!0;break}}if(e[d++]=o[p++],1==--a){h=!0;break}g--}while(u>=7||m>=7);if(h)break;g<0&&(g=0),g+=2}if((i=g)<1&&(i=1),1===a){for(l=0;l<s;l++)e[d+l]=e[c+l];e[d+s]=o[p]}else{if(0===a)throw new Error;for(l=0;l<a;l++)e[d+l]=o[p+l]}}(l,p,c,d):function(n,a,r,s){var l=0;for(l=0;l<s;l++)o[l]=e[r+l];var p=n+a-1,c=s-1,d=r+s-1,u=0,m=0;if(e[d--]=e[p--],0==--a){for(u=d-(s-1),l=0;l<s;l++)e[u+l]=o[l];return}if(1===s){for(m=(d-=a)+1,u=(p-=a)+1,l=a-1;l>=0;l--)e[m+l]=e[u+l];return void(e[d]=o[c])}var h=i;for(;;){var g=0,f=0,y=!1;do{if(t(o[c],e[p])<0){if(e[d--]=e[p--],g++,f=0,0==--a){y=!0;break}}else if(e[d--]=o[c--],f++,g=0,1==--s){y=!0;break}}while((g|f)<h);if(y)break;do{if(0!==(g=a-Qs(o[c],e,n,a,a-1,t))){for(a-=g,m=(d-=g)+1,u=(p-=g)+1,l=g-1;l>=0;l--)e[m+l]=e[u+l];if(0===a){y=!0;break}}if(e[d--]=o[c--],1==--s){y=!0;break}if(0!==(f=s-Zs(e[p],o,0,s,s-1,t))){for(s-=f,m=(d-=f)+1,u=(c-=f)+1,l=0;l<f;l++)e[m+l]=o[u+l];if(s<=1){y=!0;break}}if(e[d--]=e[p--],0==--a){y=!0;break}h--}while(g>=7||f>=7);if(y)break;h<0&&(h=0),h+=2}(i=h)<1&&(i=1);if(1===s){for(m=(d-=a)+1,u=(p-=a)+1,l=a-1;l>=0;l--)e[m+l]=e[u+l];e[d]=o[c]}else{if(0===s)throw new Error;for(u=d-(s-1),l=0;l<s;l++)e[u+l]=o[l]}}(l,p,c,d))}return n=[],a=[],{mergeRuns:function(){for(;r>1;){var e=r-2;if(e>=1&&a[e-1]<=a[e]+a[e+1]||e>=2&&a[e-2]<=a[e]+a[e-1])a[e-1]<a[e+1]&&e--;else if(a[e]>a[e+1])break;s(e)}},forceMergeRuns:function(){for(;r>1;){var e=r-2;e>0&&a[e-1]<a[e+1]&&e--,s(e)}},pushRun:function(e,t){n[r]=e,a[r]=t,r+=1}}}function el(e,t,n,a){n||(n=0),a||(a=e.length);var i=a-n;if(!(i<2)){var r=0;if(i<32)Xs(e,n,a,n+(r=Ys(e,n,a,t)),t);else{var o=Js(e,t),s=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(i);do{if((r=Ys(e,n,a,t))<s){var l=i;l>s&&(l=s),Xs(e,n,n+l,n+r,t),r=l}o.pushRun(n,r),o.mergeRuns(),i-=r,n+=r}while(0!==i);o.forceMergeRuns()}}}var tl=!1;function nl(){tl||(tl=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function al(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var il=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=al}return e.prototype.traverse=function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},e.prototype.getDisplayList=function(e,t){t=t||!1;var n=this._displayList;return!e&&n.length||this.updateDisplayList(t),n},e.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,a=0,i=t.length;a<i;a++)this._updateAndAddDisplayable(t[a],null,e);n.length=this._displayListLen,el(n,al)},e.prototype._updateAndAddDisplayable=function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.update(),e.afterUpdate();var a=e.getClipPath();if(e.ignoreClip)t=null;else if(a){t=t?t.slice():[];for(var i=a,r=e;i;)i.parent=r,i.updateTransform(),t.push(i),r=i,i=i.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),s=0;s<o.length;s++){var l=o[s];e.__dirty&&(l.__dirty|=1),this._updateAndAddDisplayable(l,t,n)}e.__dirty=0}else{var p=e;t&&t.length?p.__clipPaths=t:p.__clipPaths&&p.__clipPaths.length>0&&(p.__clipPaths=[]),isNaN(p.z)&&(nl(),p.z=0),isNaN(p.z2)&&(nl(),p.z2=0),isNaN(p.zlevel)&&(nl(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var c=e.getDecalElement&&e.getDecalElement();c&&this._updateAndAddDisplayable(c,t,n);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,t,n);var u=e.getTextContent();u&&this._updateAndAddDisplayable(u,t,n)}},e.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},e.prototype.delRoot=function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)this.delRoot(e[t]);else{var a=Vr(this._roots,e);a>=0&&this._roots.splice(a,1)}},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),rl=mr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)},ol={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1,a=.4;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=a*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-ol.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*ol.bounceIn(2*e):.5*ol.bounceOut(2*e-1)+.5}},sl=Math.pow,ll=Math.sqrt,pl=1e-8,cl=1e-4,dl=ll(3),ul=1/3,ml=Do(),hl=Do(),gl=Do();function fl(e){return e>-1e-8&&e<pl}function yl(e){return e>pl||e<-1e-8}function vl(e,t,n,a,i){var r=1-i;return r*r*(r*e+3*i*t)+i*i*(i*a+3*r*n)}function bl(e,t,n,a,i){var r=1-i;return 3*(((t-e)*r+2*(n-t)*i)*r+(a-n)*i*i)}function xl(e,t,n,a,i,r){var o=a+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),p=e-i,c=s*s-3*o*l,d=s*l-9*o*p,u=l*l-3*s*p,m=0;if(fl(c)&&fl(d)){if(fl(s))r[0]=0;else(_=-l/s)>=0&&_<=1&&(r[m++]=_)}else{var h=d*d-4*c*u;if(fl(h)){var g=d/c,f=-g/2;(_=-s/o+g)>=0&&_<=1&&(r[m++]=_),f>=0&&f<=1&&(r[m++]=f)}else if(h>0){var y=ll(h),v=c*s+1.5*o*(-d+y),b=c*s+1.5*o*(-d-y);(_=(-s-((v=v<0?-sl(-v,ul):sl(v,ul))+(b=b<0?-sl(-b,ul):sl(b,ul))))/(3*o))>=0&&_<=1&&(r[m++]=_)}else{var x=(2*c*s-3*o*d)/(2*ll(c*c*c)),w=Math.acos(x)/3,S=ll(c),C=Math.cos(w),_=(-s-2*S*C)/(3*o),T=(f=(-s+S*(C+dl*Math.sin(w)))/(3*o),(-s+S*(C-dl*Math.sin(w)))/(3*o));_>=0&&_<=1&&(r[m++]=_),f>=0&&f<=1&&(r[m++]=f),T>=0&&T<=1&&(r[m++]=T)}}return m}function wl(e,t,n,a,i){var r=6*n-12*t+6*e,o=9*t+3*a-3*e-9*n,s=3*t-3*e,l=0;if(fl(o)){if(yl(r))(c=-s/r)>=0&&c<=1&&(i[l++]=c)}else{var p=r*r-4*o*s;if(fl(p))i[0]=-r/(2*o);else if(p>0){var c,d=ll(p),u=(-r-d)/(2*o);(c=(-r+d)/(2*o))>=0&&c<=1&&(i[l++]=c),u>=0&&u<=1&&(i[l++]=u)}}return l}function Sl(e,t,n,a,i,r){var o=(t-e)*i+e,s=(n-t)*i+t,l=(a-n)*i+n,p=(s-o)*i+o,c=(l-s)*i+s,d=(c-p)*i+p;r[0]=e,r[1]=o,r[2]=p,r[3]=d,r[4]=d,r[5]=c,r[6]=l,r[7]=a}function Cl(e,t,n,a,i,r,o,s,l,p,c){var d,u,m,h,g,f=.005,y=1/0;ml[0]=l,ml[1]=p;for(var v=0;v<1;v+=.05)hl[0]=vl(e,n,i,o,v),hl[1]=vl(t,a,r,s,v),(h=jo(ml,hl))<y&&(d=v,y=h);y=1/0;for(var b=0;b<32&&!(f<cl);b++)u=d-f,m=d+f,hl[0]=vl(e,n,i,o,u),hl[1]=vl(t,a,r,s,u),h=jo(hl,ml),u>=0&&h<y?(d=u,y=h):(gl[0]=vl(e,n,i,o,m),gl[1]=vl(t,a,r,s,m),g=jo(gl,ml),m<=1&&g<y?(d=m,y=g):f*=.5);return c&&(c[0]=vl(e,n,i,o,d),c[1]=vl(t,a,r,s,d)),ll(y)}function _l(e,t,n,a,i,r,o,s,l){for(var p=e,c=t,d=0,u=1/l,m=1;m<=l;m++){var h=m*u,g=vl(e,n,i,o,h),f=vl(t,a,r,s,h),y=g-p,v=f-c;d+=Math.sqrt(y*y+v*v),p=g,c=f}return d}function Tl(e,t,n,a){var i=1-a;return i*(i*e+2*a*t)+a*a*n}function Il(e,t,n,a){return 2*((1-a)*(t-e)+a*(n-t))}function El(e,t,n){var a=e+n-2*t;return 0===a?.5:(e-t)/a}function Ml(e,t,n,a,i){var r=(t-e)*a+e,o=(n-t)*a+t,s=(o-r)*a+r;i[0]=e,i[1]=r,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function kl(e,t,n,a,i,r,o,s,l){var p,c=.005,d=1/0;ml[0]=o,ml[1]=s;for(var u=0;u<1;u+=.05){hl[0]=Tl(e,n,i,u),hl[1]=Tl(t,a,r,u),(f=jo(ml,hl))<d&&(p=u,d=f)}d=1/0;for(var m=0;m<32&&!(c<cl);m++){var h=p-c,g=p+c;hl[0]=Tl(e,n,i,h),hl[1]=Tl(t,a,r,h);var f=jo(hl,ml);if(h>=0&&f<d)p=h,d=f;else{gl[0]=Tl(e,n,i,g),gl[1]=Tl(t,a,r,g);var y=jo(gl,ml);g<=1&&y<d?(p=g,d=y):c*=.5}}return l&&(l[0]=Tl(e,n,i,p),l[1]=Tl(t,a,r,p)),ll(d)}function Pl(e,t,n,a,i,r,o){for(var s=e,l=t,p=0,c=1/o,d=1;d<=o;d++){var u=d*c,m=Tl(e,n,i,u),h=Tl(t,a,r,u),g=m-s,f=h-l;p+=Math.sqrt(g*g+f*f),s=m,l=h}return p}var Dl=/cubic-bezier\(([0-9,\.e ]+)\)/;function Ol(e){var t=e&&Dl.exec(e);if(t){var n=t[1].split(","),a=+yo(n[0]),i=+yo(n[1]),r=+yo(n[2]),o=+yo(n[3]);if(isNaN(a+i+r+o))return;var s=[];return function(e){return e<=0?0:e>=1?1:xl(0,a,r,1,e,s)&&vl(0,i,o,1,s[0])}}}var Al=function(){function e(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||ko,this.ondestroy=e.ondestroy||ko,this.onrestart=e.onrestart||ko,e.easing&&this.setEasing(e.easing)}return e.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),!this._paused){var n=this._life,a=e-this._startTime-this._pausedTime,i=a/n;i<0&&(i=0),i=Math.min(i,1);var r=this.easingFunc,o=r?r(i):i;if(this.onframe(o),1===i){if(!this.loop)return!0;var s=a%n;this._startTime=e-s,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=t},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Qr(e)?e:ol[e]||Ol(e)},e}(),Fl=function(e){this.value=e},Rl=function(){function e(){this._len=0}return e.prototype.insert=function(e){var t=new Fl(e);return this.insertEntry(t),t},e.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},e.prototype.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Bl=function(){function e(e){this._list=new Rl,this._maxSize=10,this._map={},this._maxSize=e}return e.prototype.put=function(e,t){var n=this._list,a=this._map,i=null;if(null==a[e]){var r=n.len(),o=this._lastRemovedEntry;if(r>=this._maxSize&&r>0){var s=n.head;n.remove(s),delete a[s.key],i=s.value,this._lastRemovedEntry=s}o?o.value=t:o=new Fl(t),o.key=e,n.insertEntry(o),a[e]=o}return i},e.prototype.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),Nl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ll(e){return(e=Math.round(e))<0?0:e>255?255:e}function Vl(e){return e<0?0:e>1?1:e}function ql(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Ll(parseFloat(t)/100*255):Ll(parseInt(t,10))}function Gl(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Vl(parseFloat(t)/100):Vl(parseFloat(t))}function zl(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Ul(e,t,n){return e+(t-e)*n}function jl(e,t,n,a,i){return e[0]=t,e[1]=n,e[2]=a,e[3]=i,e}function Hl(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Wl=new Bl(20),$l=null;function Kl(e,t){$l&&Hl($l,t),$l=Wl.put(e,$l||t.slice())}function Yl(e,t){if(e){t=t||[];var n=Wl.get(e);if(n)return Hl(t,n);var a=(e+="").replace(/ /g,"").toLowerCase();if(a in Nl)return Hl(t,Nl[a]),Kl(e,t),t;var i,r=a.length;if("#"===a.charAt(0))return 4===r||5===r?(i=parseInt(a.slice(1,4),16))>=0&&i<=4095?(jl(t,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,5===r?parseInt(a.slice(4),16)/15:1),Kl(e,t),t):void jl(t,0,0,0,1):7===r||9===r?(i=parseInt(a.slice(1,7),16))>=0&&i<=16777215?(jl(t,(16711680&i)>>16,(65280&i)>>8,255&i,9===r?parseInt(a.slice(7),16)/255:1),Kl(e,t),t):void jl(t,0,0,0,1):void 0;var o=a.indexOf("("),s=a.indexOf(")");if(-1!==o&&s+1===r){var l=a.substr(0,o),p=a.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(4!==p.length)return 3===p.length?jl(t,+p[0],+p[1],+p[2],1):jl(t,0,0,0,1);c=Gl(p.pop());case"rgb":return p.length>=3?(jl(t,ql(p[0]),ql(p[1]),ql(p[2]),3===p.length?c:Gl(p[3])),Kl(e,t),t):void jl(t,0,0,0,1);case"hsla":return 4!==p.length?void jl(t,0,0,0,1):(p[3]=Gl(p[3]),Xl(p,t),Kl(e,t),t);case"hsl":return 3!==p.length?void jl(t,0,0,0,1):(Xl(p,t),Kl(e,t),t);default:return}}jl(t,0,0,0,1)}}function Xl(e,t){var n=(parseFloat(e[0])%360+360)%360/360,a=Gl(e[1]),i=Gl(e[2]),r=i<=.5?i*(a+1):i+a-i*a,o=2*i-r;return jl(t=t||[],Ll(255*zl(o,r,n+1/3)),Ll(255*zl(o,r,n)),Ll(255*zl(o,r,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Zl(e,t){var n=Yl(e);if(n){for(var a=0;a<3;a++)n[a]=t<0?n[a]*(1-t)|0:(255-n[a])*t+n[a]|0,n[a]>255?n[a]=255:n[a]<0&&(n[a]=0);return np(n,4===n.length?"rgba":"rgb")}}function Ql(e,t,n){if(t&&t.length&&e>=0&&e<=1){n=n||[];var a=e*(t.length-1),i=Math.floor(a),r=Math.ceil(a),o=t[i],s=t[r],l=a-i;return n[0]=Ll(Ul(o[0],s[0],l)),n[1]=Ll(Ul(o[1],s[1],l)),n[2]=Ll(Ul(o[2],s[2],l)),n[3]=Vl(Ul(o[3],s[3],l)),n}}function Jl(e,t,n){if(t&&t.length&&e>=0&&e<=1){var a=e*(t.length-1),i=Math.floor(a),r=Math.ceil(a),o=Yl(t[i]),s=Yl(t[r]),l=a-i,p=np([Ll(Ul(o[0],s[0],l)),Ll(Ul(o[1],s[1],l)),Ll(Ul(o[2],s[2],l)),Vl(Ul(o[3],s[3],l))],"rgba");return n?{color:p,leftIndex:i,rightIndex:r,value:a}:p}}function ep(e,t,n,a){var i=Yl(e);if(e)return i=function(e){if(e){var t,n,a=e[0]/255,i=e[1]/255,r=e[2]/255,o=Math.min(a,i,r),s=Math.max(a,i,r),l=s-o,p=(s+o)/2;if(0===l)t=0,n=0;else{n=p<.5?l/(s+o):l/(2-s-o);var c=((s-a)/6+l/2)/l,d=((s-i)/6+l/2)/l,u=((s-r)/6+l/2)/l;a===s?t=u-d:i===s?t=1/3+c-u:r===s&&(t=2/3+d-c),t<0&&(t+=1),t>1&&(t-=1)}var m=[360*t,n,p];return null!=e[3]&&m.push(e[3]),m}}(i),null!=t&&(i[0]=function(e){return(e=Math.round(e))<0?0:e>360?360:e}(t)),null!=n&&(i[1]=Gl(n)),null!=a&&(i[2]=Gl(a)),np(Xl(i),"rgba")}function tp(e,t){var n=Yl(e);if(n&&null!=t)return n[3]=Vl(t),np(n,"rgba")}function np(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}function ap(e,t){var n=Yl(e);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}var ip=new Bl(100);function rp(e){if(Jr(e)){var t=ip.get(e);return t||(t=Zl(e,-.1),ip.put(e,t)),t}if(oo(e)){var n=Nr({},e);return n.colorStops=jr(e.colorStops,(function(e){return{offset:e.offset,color:Zl(e.color,-.1)}})),n}return e}var op=Math.round;function sp(e){var t;if(e&&"transparent"!==e){if("string"==typeof e&&e.indexOf("rgba")>-1){var n=Yl(e);n&&(e="rgb("+n[0]+","+n[1]+","+n[2]+")",t=n[3])}}else e="none";return{color:e,opacity:null==t?1:t}}var lp=1e-4;function pp(e){return e<lp&&e>-1e-4}function cp(e){return op(1e3*e)/1e3}function dp(e){return op(1e4*e)/1e4}var up={left:"start",right:"end",center:"middle",middle:"middle"};function mp(e){return e&&!!e.image}function hp(e){return mp(e)||function(e){return e&&!!e.svgElement}(e)}function gp(e){return"linear"===e.type}function fp(e){return"radial"===e.type}function yp(e){return e&&("linear"===e.type||"radial"===e.type)}function vp(e){return"url(#"+e+")"}function bp(e){var t=e.getGlobalScale(),n=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function xp(e){var t=e.x||0,n=e.y||0,a=(e.rotation||0)*Po,i=uo(e.scaleX,1),r=uo(e.scaleY,1),o=e.skewX||0,s=e.skewY||0,l=[];return(t||n)&&l.push("translate("+t+"px,"+n+"px)"),a&&l.push("rotate("+a+")"),1===i&&1===r||l.push("scale("+i+","+r+")"),(o||s)&&l.push("skew("+op(o*Po)+"deg, "+op(s*Po)+"deg)"),l.join(" ")}var wp=mr.hasGlobalWindow&&Qr(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:"undefined"!=typeof Buffer?function(e){return Buffer.from(e).toString("base64")}:function(e){return null},Sp=Array.prototype.slice;function Cp(e,t,n){return(t-e)*n+e}function _p(e,t,n,a){for(var i=t.length,r=0;r<i;r++)e[r]=Cp(t[r],n[r],a);return e}function Tp(e,t,n,a){for(var i=t.length,r=0;r<i;r++)e[r]=t[r]+n[r]*a;return e}function Ip(e,t,n,a){for(var i=t.length,r=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<r;s++)e[o][s]=t[o][s]+n[o][s]*a}return e}function Ep(e,t){for(var n=e.length,a=t.length,i=n>a?t:e,r=Math.min(n,a),o=i[r-1]||{color:[0,0,0,0],offset:0},s=r;s<Math.max(n,a);s++)i.push({offset:o.offset,color:o.color.slice()})}function Mp(e,t,n){var a=e,i=t;if(a.push&&i.push){var r=a.length,o=i.length;if(r!==o)if(r>o)a.length=o;else for(var s=r;s<o;s++)a.push(1===n?i[s]:Sp.call(i[s]));var l=a[0]&&a[0].length;for(s=0;s<a.length;s++)if(1===n)isNaN(a[s])&&(a[s]=i[s]);else for(var p=0;p<l;p++)isNaN(a[s][p])&&(a[s][p]=i[s][p])}}function kp(e){if(zr(e)){var t=e.length;if(zr(e[0])){for(var n=[],a=0;a<t;a++)n.push(Sp.call(e[a]));return n}return Sp.call(e)}return e}function Pp(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=null==e[3]?1:e[3],"rgba("+e.join(",")+")"}function Dp(e){return 4===e||5===e}function Op(e){return 1===e||2===e}var Ap=[0,0,0,0],Fp=function(){function e(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,t,n){this._needsSort=!0;var a=this.keyframes,i=a.length,r=!1,o=6,s=t;if(zr(t)){var l=function(e){return zr(e&&e[0])?2:1}(t);o=l,(1===l&&!to(t[0])||2===l&&!to(t[0][0]))&&(r=!0)}else if(to(t)&&!po(t))o=0;else if(Jr(t))if(isNaN(+t)){var p=Yl(t);p&&(s=p,o=3)}else o=0;else if(oo(t)){var c=Nr({},s);c.colorStops=jr(t.colorStops,(function(e){return{offset:e.offset,color:Yl(e.color)}})),gp(t)?o=4:fp(t)&&(o=5),s=c}0===i?this.valType=o:o===this.valType&&6!==o||(r=!0),this.discrete=this.discrete||r;var d={time:e,value:s,rawValue:t,percent:0};return n&&(d.easing=n,d.easingFunc=Qr(n)?n:ol[n]||Ol(n)),a.push(d),d},e.prototype.prepare=function(e,t){var n=this.keyframes;this._needsSort&&n.sort((function(e,t){return e.time-t.time}));for(var a=this.valType,i=n.length,r=n[i-1],o=this.discrete,s=Op(a),l=Dp(a),p=0;p<i;p++){var c=n[p],d=c.value,u=r.value;c.percent=c.time/e,o||(s&&p!==i-1?Mp(d,u,a):l&&Ep(d.colorStops,u.colorStops))}if(!o&&5!==a&&t&&this.needsAnimate()&&t.needsAnimate()&&a===t.valType&&!t._finished){this._additiveTrack=t;var m=n[0].value;for(p=0;p<i;p++)0===a?n[p].additiveValue=n[p].value-m:3===a?n[p].additiveValue=Tp([],n[p].value,m,-1):Op(a)&&(n[p].additiveValue=1===a?Tp([],n[p].value,m,-1):Ip([],n[p].value,m,-1))}},e.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,a,i,r=null!=this._additiveTrack,o=r?"additiveValue":"value",s=this.valType,l=this.keyframes,p=l.length,c=this.propName,d=3===s,u=this._lastFr,m=Math.min;if(1===p)a=i=l[0];else{if(t<0)n=0;else if(t<this._lastFrP){for(n=m(u+1,p-1);n>=0&&!(l[n].percent<=t);n--);n=m(n,p-2)}else{for(n=u;n<p&&!(l[n].percent>t);n++);n=m(n-1,p-2)}i=l[n+1],a=l[n]}if(a&&i){this._lastFr=n,this._lastFrP=t;var h=i.percent-a.percent,g=0===h?1:m((t-a.percent)/h,1);i.easingFunc&&(g=i.easingFunc(g));var f=r?this._additiveValue:d?Ap:e[c];if(!Op(s)&&!d||f||(f=this._additiveValue=[]),this.discrete)e[c]=g<1?a.rawValue:i.rawValue;else if(Op(s))1===s?_p(f,a[o],i[o],g):function(e,t,n,a){for(var i=t.length,r=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<r;s++)e[o][s]=Cp(t[o][s],n[o][s],a)}}(f,a[o],i[o],g);else if(Dp(s)){var y=a[o],v=i[o],b=4===s;e[c]={type:b?"linear":"radial",x:Cp(y.x,v.x,g),y:Cp(y.y,v.y,g),colorStops:jr(y.colorStops,(function(e,t){var n=v.colorStops[t];return{offset:Cp(e.offset,n.offset,g),color:Pp(_p([],e.color,n.color,g))}})),global:v.global},b?(e[c].x2=Cp(y.x2,v.x2,g),e[c].y2=Cp(y.y2,v.y2,g)):e[c].r=Cp(y.r,v.r,g)}else if(d)_p(f,a[o],i[o],g),r||(e[c]=Pp(f));else{var x=Cp(a[o],i[o],g);r?this._additiveValue=x:e[c]=x}r&&this._addToTarget(e)}}},e.prototype._addToTarget=function(e){var t=this.valType,n=this.propName,a=this._additiveValue;0===t?e[n]=e[n]+a:3===t?(Yl(e[n],Ap),Tp(Ap,Ap,a,1),e[n]=Pp(Ap)):1===t?Tp(e[n],e[n],a,1):2===t&&Ip(e[n],e[n],a,1)},e}(),Rp=function(){function e(e,t,n,a){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&a?Ar("Can' use additive animation on looped animation."):(this._additiveAnimators=a,this._allowDiscrete=n)}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(e){this._target=e},e.prototype.when=function(e,t,n){return this.whenWithKeys(e,t,Kr(t),n)},e.prototype.whenWithKeys=function(e,t,n,a){for(var i=this._tracks,r=0;r<n.length;r++){var o=n[r],s=i[o];if(!s){s=i[o]=new Fp(o);var l=void 0,p=this._getAdditiveTrack(o);if(p){var c=p.keyframes,d=c[c.length-1];l=d&&d.value,3===p.valType&&l&&(l=Pp(l))}else l=this._target[o];if(null==l)continue;e>0&&s.addKeyframe(0,kp(l),a),this._trackKeys.push(o)}s.addKeyframe(e,kp(t[o]),a)}return this._maxTime=Math.max(this._maxTime,e),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,n=0;n<t;n++)e[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var n=0;n<t.length;n++)t[n].call(this)},e.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,n=0;n<t.length;n++)e[t[n]].setFinished()},e.prototype._getAdditiveTrack=function(e){var t,n=this._additiveAnimators;if(n)for(var a=0;a<n.length;a++){var i=n[a].getTrack(e);i&&(t=i)}return t},e.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,n=[],a=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var r=this._trackKeys[i],o=this._tracks[r],s=this._getAdditiveTrack(r),l=o.keyframes,p=l.length;if(o.prepare(a,s),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var c=l[p-1];c&&(t._target[o.propName]=c.rawValue),o.setFinished()}else n.push(o)}if(n.length||this._force){var d=new Al({life:a,loop:this._loop,delay:this._delay||0,onframe:function(e){t._started=2;var a=t._additiveAnimators;if(a){for(var i=!1,r=0;r<a.length;r++)if(a[r]._clip){i=!0;break}i||(t._additiveAnimators=null)}for(r=0;r<n.length;r++)n[r].step(t._target,e);var o=t._onframeCbs;if(o)for(r=0;r<o.length;r++)o[r](t._target,e)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},e.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},e.prototype.delay=function(e){return this._delay=e,this},e.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},e.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},e.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(e){return this._tracks[e]},e.prototype.getTracks=function(){var e=this;return jr(this._trackKeys,(function(t){return e._tracks[t]}))},e.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var n=this._tracks,a=this._trackKeys,i=0;i<e.length;i++){var r=n[e[i]];r&&!r.isFinished()&&(t?r.step(this._target,1):1===this._started&&r.step(this._target,0),r.setFinished())}var o=!0;for(i=0;i<a.length;i++)if(!n[a[i]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},e.prototype.saveTo=function(e,t,n){if(e){t=t||this._trackKeys;for(var a=0;a<t.length;a++){var i=t[a],r=this._tracks[i];if(r&&!r.isFinished()){var o=r.keyframes,s=o[n?0:o.length-1];s&&(e[i]=kp(s.rawValue))}}}},e.prototype.__changeFinalValue=function(e,t){t=t||Kr(e);for(var n=0;n<t.length;n++){var a=t[n],i=this._tracks[a];if(i){var r=i.keyframes;if(r.length>1){var o=r.pop();i.addKeyframe(o.time,e[a]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},e}();function Bp(){return(new Date).getTime()}var Np,Lp,Vp=function(e){function t(t){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,t=t||{},n.stage=t.stage||{},n}return ze(t,e),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var t=e.getClip();t&&this.addClip(t)},t.prototype.removeClip=function(e){if(e.animation){var t=e.prev,n=e.next;t?t.next=n:this._head=n,n?n.prev=t:this._tail=t,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var t=e.getClip();t&&this.removeClip(t),e.animation=null},t.prototype.update=function(e){for(var t=Bp()-this._pausedTime,n=t-this._time,a=this._head;a;){var i=a.next;a.step(t,n)?(a.ondestroy(),this.removeClip(a),a=i):a=i}this._time=t,e||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,rl((function t(){e._running&&(rl(t),!e._paused&&e.update())}))},t.prototype.start=function(){this._running||(this._time=Bp(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Bp(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Bp()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var t=e.next;e.prev=e.next=e.animation=null,e=t}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,t){t=t||{},this.start();var n=new Rp(e,t.loop);return this.addAnimator(n),n},t}(Zo),qp=mr.domSupported,Gp=(Lp={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Np=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:jr(Np,(function(e){var t=e.replace("mouse","pointer");return Lp.hasOwnProperty(t)?t:e}))}),zp=["mousemove","mouseup"],Up=["pointermove","pointerup"],jp=!1;function Hp(e){var t=e.pointerType;return"pen"===t||"touch"===t}function Wp(e){e&&(e.zrByTouch=!0)}function $p(e,t){for(var n=t,a=!1;n&&9!==n.nodeType&&!(a=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return a}var Kp=function(e,t){this.stopPropagation=ko,this.stopImmediatePropagation=ko,this.preventDefault=ko,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},Yp={mousedown:function(e){e=hs(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=hs(this.dom,e);var t=this.__mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=hs(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){$p(this,(e=hs(this.dom,e)).toElement||e.relatedTarget)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){jp=!0,e=hs(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){jp||(e=hs(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){Wp(e=hs(this.dom,e)),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Yp.mousemove.call(this,e),Yp.mousedown.call(this,e)},touchmove:function(e){Wp(e=hs(this.dom,e)),this.handler.processGesture(e,"change"),Yp.mousemove.call(this,e)},touchend:function(e){Wp(e=hs(this.dom,e)),this.handler.processGesture(e,"end"),Yp.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<300&&Yp.click.call(this,e)},pointerdown:function(e){Yp.mousedown.call(this,e)},pointermove:function(e){Hp(e)||Yp.mousemove.call(this,e)},pointerup:function(e){Yp.mouseup.call(this,e)},pointerout:function(e){Hp(e)||Yp.mouseout.call(this,e)}};Ur(["click","dblclick","contextmenu"],(function(e){Yp[e]=function(t){t=hs(this.dom,t),this.trigger(e,t)}}));var Xp={pointermove:function(e){Hp(e)||Xp.mousemove.call(this,e)},pointerup:function(e){Xp.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Zp(e,t){var n=t.domHandlers;mr.pointerEventsSupported?Ur(Gp.pointer,(function(a){Jp(t,a,(function(t){n[a].call(e,t)}))})):(mr.touchEventsSupported&&Ur(Gp.touch,(function(a){Jp(t,a,(function(i){n[a].call(e,i),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.touching=!1,e.touchTimer=null}),700)}(t)}))})),Ur(Gp.mouse,(function(a){Jp(t,a,(function(i){i=ms(i),t.touching||n[a].call(e,i)}))})))}function Qp(e,t){function n(n){Jp(t,n,(function(a){a=ms(a),$p(e,a.target)||(a=function(e,t){return hs(e.dom,new Kp(e,t),!0)}(e,a),t.domHandlers[n].call(e,a))}),{capture:!0})}mr.pointerEventsSupported?Ur(Up,n):mr.touchEventsSupported||Ur(zp,n)}function Jp(e,t,n,a){e.mounted[t]=n,e.listenerOpts[t]=a,gs(e.domTarget,t,n,a)}function ec(e){var t,n,a,i,r=e.mounted;for(var o in r)r.hasOwnProperty(o)&&(t=e.domTarget,n=o,a=r[o],i=e.listenerOpts[o],t.removeEventListener(n,a,i));e.mounted={}}var tc=function(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t},nc=function(e){function t(t,n){var a=e.call(this)||this;return a.__pointerCapturing=!1,a.dom=t,a.painterRoot=n,a._localHandlerScope=new tc(t,Yp),qp&&(a._globalHandlerScope=new tc(document,Xp)),Zp(a,a._localHandlerScope),a}return ze(t,e),t.prototype.dispose=function(){ec(this._localHandlerScope),qp&&ec(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,qp&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var t=this._globalHandlerScope;e?Qp(this,t):ec(t)}},t}(Zo),ac=1;mr.hasGlobalWindow&&(ac=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ic=ac,rc="#333",oc="#ccc",sc=ws,lc=5e-5;function pc(e){return e>lc||e<-5e-5}var cc=[],dc=[],uc=[1,0,0,1,0,0],mc=Math.abs,hc=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},e.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},e.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},e.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},e.prototype.needLocalTransform=function(){return pc(this.rotation)||pc(this.x)||pc(this.y)||pc(this.scaleX-1)||pc(this.scaleY-1)||pc(this.skewX)||pc(this.skewY)},e.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),n=this.transform;t||e?(n=n||[1,0,0,1,0,0],t?this.getLocalTransform(n):sc(n),e&&(t?Cs(n,e,n):Ss(n,e)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&(sc(n),this.invTransform=null)},e.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(cc);var n=cc[0]<0?-1:1,a=cc[1]<0?-1:1,i=((cc[0]-n)*t+n)/cc[0]||0,r=((cc[1]-a)*t+a)/cc[1]||0;e[0]*=i,e[1]*=i,e[2]*=r,e[3]*=r}this.invTransform=this.invTransform||[1,0,0,1,0,0],Es(this.invTransform,e)},e.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},e.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],a=Math.atan2(e[1],e[0]),i=Math.PI/2+a-Math.atan2(e[3],e[2]);n=Math.sqrt(n)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-a,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||[1,0,0,1,0,0],Cs(dc,e.invTransform,t),t=dc);var n=this.originX,a=this.originY;(n||a)&&(uc[4]=n,uc[5]=a,Cs(dc,t,uc),dc[4]-=n,dc[5]-=a,t=dc),this.setLocalTransform(t)}},e.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},e.prototype.transformCoordToLocal=function(e,t){var n=[e,t],a=this.invTransform;return a&&Wo(n,n,a),n},e.prototype.transformCoordToGlobal=function(e,t){var n=[e,t],a=this.transform;return a&&Wo(n,n,a),n},e.prototype.getLineScale=function(){var e=this.transform;return e&&mc(e[0]-1)>1e-10&&mc(e[3]-1)>1e-10?Math.sqrt(mc(e[0]*e[3]-e[2]*e[1])):1},e.prototype.copyTransform=function(e){fc(this,e)},e.getLocalTransform=function(e,t){t=t||[];var n=e.originX||0,a=e.originY||0,i=e.scaleX,r=e.scaleY,o=e.anchorX,s=e.anchorY,l=e.rotation||0,p=e.x,c=e.y,d=e.skewX?Math.tan(e.skewX):0,u=e.skewY?Math.tan(-e.skewY):0;if(n||a||o||s){var m=n+o,h=a+s;t[4]=-m*i-d*h*r,t[5]=-h*r-u*m*i}else t[4]=t[5]=0;return t[0]=i,t[3]=r,t[1]=u*i,t[2]=d*r,l&&Ts(t,t,l),t[4]+=n+p,t[5]+=a+c,t},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),gc=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function fc(e,t){for(var n=0;n<gc.length;n++){var a=gc[n];e[a]=t[a]}}var yc={};function vc(e,t){var n=yc[t=t||gr];n||(n=yc[t]=new Bl(500));var a=n.get(e);return null==a&&(a=br.measureText(e,t).width,n.put(e,a)),a}function bc(e,t,n,a){var i=vc(e,t),r=Cc(t),o=wc(0,i,n),s=Sc(0,r,a);return new Ls(o,s,i,r)}function xc(e,t,n,a){var i=((e||"")+"").split("\n");if(1===i.length)return bc(i[0],t,n,a);for(var r=new Ls(0,0,0,0),o=0;o<i.length;o++){var s=bc(i[o],t,n,a);0===o?r.copy(s):r.union(s)}return r}function wc(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Sc(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function Cc(e){return vc("国",e)}function _c(e,t){return"string"==typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Tc(e,t,n){var a=t.position||"inside",i=null!=t.distance?t.distance:5,r=n.height,o=n.width,s=r/2,l=n.x,p=n.y,c="left",d="top";if(a instanceof Array)l+=_c(a[0],n.width),p+=_c(a[1],n.height),c=null,d=null;else switch(a){case"left":l-=i,p+=s,c="right",d="middle";break;case"right":l+=i+o,p+=s,d="middle";break;case"top":l+=o/2,p-=i,c="center",d="bottom";break;case"bottom":l+=o/2,p+=r+i,c="center";break;case"inside":l+=o/2,p+=s,c="center",d="middle";break;case"insideLeft":l+=i,p+=s,d="middle";break;case"insideRight":l+=o-i,p+=s,c="right",d="middle";break;case"insideTop":l+=o/2,p+=i,c="center";break;case"insideBottom":l+=o/2,p+=r-i,c="center",d="bottom";break;case"insideTopLeft":l+=i,p+=i;break;case"insideTopRight":l+=o-i,p+=i,c="right";break;case"insideBottomLeft":l+=i,p+=r-i,d="bottom";break;case"insideBottomRight":l+=o-i,p+=r-i,c="right",d="bottom"}return(e=e||{}).x=l,e.y=p,e.align=c,e.verticalAlign=d,e}var Ic="__zr_normal__",Ec=gc.concat(["ignore"]),Mc=Hr(gc,(function(e,t){return e[t]=!0,e}),{ignore:!1}),kc={},Pc=new Ls(0,0,0,0),Dc=function(){function e(e){this.id=Or(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return e.prototype._init=function(e){this.attr(e)},e.prototype.drift=function(e,t,n){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var a=this.transform;a||(a=this.transform=[1,0,0,1,0,0]),a[4]+=e,a[5]+=t,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var n=this.textConfig,a=n.local,i=t.innerTransformable,r=void 0,o=void 0,s=!1;i.parent=a?this:null;var l=!1;if(i.copyTransform(t),null!=n.position){var p=Pc;n.layoutRect?p.copy(n.layoutRect):p.copy(this.getBoundingRect()),a||p.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(kc,n,p):Tc(kc,n,p),i.x=kc.x,i.y=kc.y,r=kc.align,o=kc.verticalAlign;var c=n.origin;if(c&&null!=n.rotation){var d=void 0,u=void 0;"center"===c?(d=.5*p.width,u=.5*p.height):(d=_c(c[0],p.width),u=_c(c[1],p.height)),l=!0,i.originX=-i.x+d+(a?0:p.x),i.originY=-i.y+u+(a?0:p.y)}}null!=n.rotation&&(i.rotation=n.rotation);var m=n.offset;m&&(i.x+=m[0],i.y+=m[1],l||(i.originX=-m[0],i.originY=-m[1]));var h=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),f=void 0,y=void 0,v=void 0;h&&this.canBeInsideText()?(f=n.insideFill,y=n.insideStroke,null!=f&&"auto"!==f||(f=this.getInsideTextFill()),null!=y&&"auto"!==y||(y=this.getInsideTextStroke(f),v=!0)):(f=n.outsideFill,y=n.outsideStroke,null!=f&&"auto"!==f||(f=this.getOutsideFill()),null!=y&&"auto"!==y||(y=this.getOutsideStroke(f),v=!0)),(f=f||"#000")===g.fill&&y===g.stroke&&v===g.autoStroke&&r===g.align&&o===g.verticalAlign||(s=!0,g.fill=f,g.stroke=y,g.autoStroke=v,g.align=r,g.verticalAlign=o,t.setDefaultTextStyle(g)),t.__dirty|=1,s&&t.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(e){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?oc:rc},e.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof t&&Yl(t);n||(n=[255,255,255,1]);for(var a=n[3],i=this.__zr.isDarkMode(),r=0;r<3;r++)n[r]=n[r]*a+(i?0:255)*(1-a);return n[3]=1,np(n,"rgba")},e.prototype.traverse=function(e,t){},e.prototype.attrKV=function(e,t){"textConfig"===e?this.setTextConfig(t):"textContent"===e?this.setTextContent(t):"clipPath"===e?this.setClipPath(t):"extra"===e?(this.extra=this.extra||{},Nr(this.extra,t)):this[e]=t},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(no(e))for(var n=Kr(e),a=0;a<n.length;a++){var i=n[a];this.attrKV(i,e[i])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,n=0;n<this.animators.length;n++){var a=this.animators[n],i=a.__fromStateTransition;if(!(a.getLoop()||i&&i!==Ic)){var r=a.targetName,o=r?t[r]:t;a.saveTo(o)}}},e.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Ec)},e.prototype._savePrimaryToNormal=function(e,t,n){for(var a=0;a<n.length;a++){var i=n[a];null==e[i]||i in t||(t[i]=this[i])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(e){return this.states[e]},e.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},e.prototype.clearStates=function(e){this.useState(Ic,!1,e)},e.prototype.useState=function(e,t,n,a){var i=e===Ic;if(this.hasState()||!i){var r=this.currentStates,o=this.stateTransition;if(!(Vr(r,e)>=0)||!t&&1!==r.length){var s;if(this.stateProxy&&!i&&(s=this.stateProxy(e)),s||(s=this.states&&this.states[e]),s||i){i||this.saveCurrentToNormalState(s);var l=!!(s&&s.hoverLayer||a);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,s,this._normalState,t,!n&&!this.__inHover&&o&&o.duration>0,o);var p=this._textContent,c=this._textGuide;return p&&p.useState(e,t,n,l),c&&c.useState(e,t,n,l),i?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),s}Ar("State "+e+" not exists.")}}},e.prototype.useStates=function(e,t,n){if(e.length){var a=[],i=this.currentStates,r=e.length,o=r===i.length;if(o)for(var s=0;s<r;s++)if(e[s]!==i[s]){o=!1;break}if(o)return;for(s=0;s<r;s++){var l=e[s],p=void 0;this.stateProxy&&(p=this.stateProxy(l,e)),p||(p=this.states[l]),p&&a.push(p)}var c=a[r-1],d=!!(c&&c.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0);var u=this._mergeStates(a),m=this.stateTransition;this.saveCurrentToNormalState(u),this._applyStateObj(e.join(","),u,this._normalState,!1,!t&&!this.__inHover&&m&&m.duration>0,m);var h=this._textContent,g=this._textGuide;h&&h.useStates(e,t,d),g&&g.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},e.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},e.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},e.prototype.removeState=function(e){var t=Vr(this.currentStates,e);if(t>=0){var n=this.currentStates.slice();n.splice(t,1),this.useStates(n)}},e.prototype.replaceState=function(e,t,n){var a=this.currentStates.slice(),i=Vr(a,e),r=Vr(a,t)>=0;i>=0?r?a.splice(i,1):a[i]=t:n&&!r&&a.push(t),this.useStates(a)},e.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},e.prototype._mergeStates=function(e){for(var t,n={},a=0;a<e.length;a++){var i=e[a];Nr(n,i),i.textConfig&&Nr(t=t||{},i.textConfig)}return t&&(n.textConfig=t),n},e.prototype._applyStateObj=function(e,t,n,a,i,r){var o=!(t&&a);t&&t.textConfig?(this.textConfig=Nr({},a?this.textConfig:n.textConfig),Nr(this.textConfig,t.textConfig)):o&&n.textConfig&&(this.textConfig=n.textConfig);for(var s={},l=!1,p=0;p<Ec.length;p++){var c=Ec[p],d=i&&Mc[c];t&&null!=t[c]?d?(l=!0,s[c]=t[c]):this[c]=t[c]:o&&null!=n[c]&&(d?(l=!0,s[c]=n[c]):this[c]=n[c])}if(!i)for(p=0;p<this.animators.length;p++){var u=this.animators[p],m=u.targetName;u.getLoop()||u.__changeFinalValue(m?(t||n)[m]:t||n)}l&&this._transitionState(e,s,r)},e.prototype._attachComponent=function(e){if((!e.__zr||e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},e.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},e.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new hc,this._attachComponent(e),this._textContent=e,this.markRedraw())},e.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Nr(this.textConfig,e),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=1;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,n=this._textGuide;t&&(t.__inHover=e),n&&(n.__inHover=e)},e.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},e.prototype.animate=function(e,t,n){var a=e?this[e]:this;var i=new Rp(a,t,n);return e&&(i.targetName=e),this.addAnimator(i,e),i},e.prototype.addAnimator=function(e,t){var n=this.__zr,a=this;e.during((function(){a.updateDuringAnimation(t)})).done((function(){var t=a.animators,n=Vr(t,e);n>=0&&t.splice(n,1)})),this.animators.push(e),n&&n.animation.addAnimator(e),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(e){this.markRedraw()},e.prototype.stopAnimation=function(e,t){for(var n=this.animators,a=n.length,i=[],r=0;r<a;r++){var o=n[r];e&&e!==o.scope?i.push(o):o.stop(t)}return this.animators=i,this},e.prototype.animateTo=function(e,t,n){Oc(this,e,t,n)},e.prototype.animateFrom=function(e,t,n){Oc(this,e,t,n,!0)},e.prototype._transitionState=function(e,t,n,a){for(var i=Oc(this,t,n,a),r=0;r<i.length;r++)i[r].__fromStateTransition=e},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1;function n(e,n,a,i){function r(e,t){Object.defineProperty(t,0,{get:function(){return e[a]},set:function(t){e[a]=t}}),Object.defineProperty(t,1,{get:function(){return e[i]},set:function(t){e[i]=t}})}Object.defineProperty(t,e,{get:function(){this[n]||r(this,this[n]=[]);return this[n]},set:function(e){this[a]=e[0],this[i]=e[1],this[n]=e,r(this,e)}})}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();function Oc(e,t,n,a,i){var r=[];Rc(e,"",e,t,n=n||{},a,r,i);var o=r.length,s=!1,l=n.done,p=n.aborted,c=function(){s=!0,--o<=0&&(s?l&&l():p&&p())},d=function(){--o<=0&&(s?l&&l():p&&p())};o||l&&l(),r.length>0&&n.during&&r[0].during((function(e,t){n.during(t)}));for(var u=0;u<r.length;u++){var m=r[u];c&&m.done(c),d&&m.aborted(d),n.force&&m.duration(n.duration),m.start(n.easing)}return r}function Ac(e,t,n){for(var a=0;a<n;a++)e[a]=t[a]}function Fc(e,t,n){if(zr(t[n]))if(zr(e[n])||(e[n]=[]),io(t[n])){var a=t[n].length;e[n].length!==a&&(e[n]=new t[n].constructor(a),Ac(e[n],t[n],a))}else{var i=t[n],r=e[n],o=i.length;if(zr(i[0]))for(var s=i[0].length,l=0;l<o;l++)r[l]?Ac(r[l],i[l],s):r[l]=Array.prototype.slice.call(i[l]);else Ac(r,i,o);r.length=i.length}else e[n]=t[n]}function Rc(e,t,n,a,i,r,o,s){for(var l=Kr(a),p=i.duration,c=i.delay,d=i.additive,u=i.setToFinal,m=!no(r),h=e.animators,g=[],f=0;f<l.length;f++){var y=l[f],v=a[y];if(null!=v&&null!=n[y]&&(m||r[y]))if(!no(v)||zr(v)||oo(v))g.push(y);else{if(t){s||(n[y]=v,e.updateDuringAnimation(t));continue}Rc(e,y,n[y],v,i,r&&r[y],o,s)}else s||(n[y]=v,e.updateDuringAnimation(t),g.push(y))}var b=g.length;if(!d&&b)for(var x=0;x<h.length;x++){if((S=h[x]).targetName===t)if(S.stopTracks(g)){var w=Vr(h,S);h.splice(w,1)}}if(i.force||(g=Wr(g,(function(e){return t=a[e],i=n[e],!(t===i||zr(t)&&zr(i)&&function(e,t){var n=e.length;if(n!==t.length)return!1;for(var a=0;a<n;a++)if(e[a]!==t[a])return!1;return!0}(t,i));var t,i})),b=g.length),b>0||i.force&&!o.length){var S,C=void 0,_=void 0,T=void 0;if(s){_={},u&&(C={});for(x=0;x<b;x++){_[y=g[x]]=n[y],u?C[y]=a[y]:n[y]=a[y]}}else if(u){T={};for(x=0;x<b;x++){T[y=g[x]]=kp(n[y]),Fc(n,a,y)}}(S=new Rp(n,!1,!1,d?Wr(h,(function(e){return e.targetName===t})):null)).targetName=t,i.scope&&(S.scope=i.scope),u&&C&&S.whenWithKeys(0,C,g),T&&S.whenWithKeys(0,T,g),S.whenWithKeys(null==p?500:p,s?_:a,g).delay(c||0),e.addAnimator(S,t),o.push(S)}}Gr(Dc,Zo),Gr(Dc,hc);var Bc=function(e){function t(t){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(t),n}return ze(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,a=n.indexOf(t);a>=0&&(n.splice(a,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,t){var n=Vr(this._children,e);return n>=0&&this.replaceAt(t,n),this},t.prototype.replaceAt=function(e,t){var n=this._children,a=n[t];if(e&&e!==this&&e.parent!==this&&e!==a){n[t]=e,a.parent=null;var i=this.__zr;i&&a.removeSelfFromZr(i),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__zr;t&&t!==e.__zr&&e.addSelfToZr(t),t&&t.refresh()},t.prototype.remove=function(e){var t=this.__zr,n=this._children,a=Vr(n,e);return a<0||(n.splice(a,1),e.parent=null,t&&e.removeSelfFromZr(t),t&&t.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,t=this.__zr,n=0;n<e.length;n++){var a=e[n];t&&a.removeSelfFromZr(t),a.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,t){for(var n=this._children,a=0;a<n.length;a++){var i=n[a];e.call(t,i,a)}return this},t.prototype.traverse=function(e,t){for(var n=0;n<this._children.length;n++){var a=this._children[n],i=e.call(t,a);a.isGroup&&!i&&a.traverse(e,t)}return this},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++){this._children[n].addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++){this._children[n].removeSelfFromZr(t)}},t.prototype.getBoundingRect=function(e){for(var t=new Ls(0,0,0,0),n=e||this._children,a=[],i=null,r=0;r<n.length;r++){var o=n[r];if(!o.ignore&&!o.invisible){var s=o.getBoundingRect(),l=o.getLocalTransform(a);l?(Ls.applyTransform(t,s,l),(i=i||t.clone()).union(t)):(i=i||s.clone()).union(s)}}return i||t},t}(Dc);Bc.prototype.type="group";
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var Nc={},Lc={};var Vc,qc=function(){function e(e,t,n){var a=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=t,this.id=e;var i=new il,r=n.renderer||"canvas";Nc[r]||(r=Kr(Nc)[0]),n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var o=new Nc[r](t,i,n,e),s=n.ssr||o.ssrOnly;this.storage=i,this.painter=o;var l,p=mr.node||mr.worker||s?null:new nc(o.getViewportRoot(),o.root),c=n.useCoarsePointer;(null==c||"auto"===c?mr.touchEventsSupported:!!c)&&(l=uo(n.pointerSize,44)),this.handler=new Hs(i,o,p,o.root,l),this.animation=new Vp({stage:{update:s?null:function(){return a._flush(!0)}}}),s||this.animation.start()}return e.prototype.add=function(e){!this._disposed&&e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},e.prototype.remove=function(e){!this._disposed&&e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},e.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return ap(e,1)<.4;if(e.colorStops){for(var t=e.colorStops,n=0,a=t.length,i=0;i<a;i++)n+=ap(t[i].color,1);return(n/=a)<.4}return!1}(e))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(e){this._darkMode=e},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(e){var t,n=Bp();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var a=Bp();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:a-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},e.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},e.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},e.prototype.on=function(e,t,n){return this._disposed||this.handler.on(e,t,n),this},e.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},e.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},e.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Bc&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){var e;this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,e=this.id,delete Lc[e])},e}();function Gc(e,t){var n=new qc(Or(),e,t);return Lc[n.id]=n,n}function zc(e,t){Nc[e]=t}function Uc(e){if("function"==typeof Vc)return Vc(e)}function jc(e){Vc=e}var Hc=1e-4;function Wc(e,t,n,a){var i=t[0],r=t[1],o=n[0],s=n[1],l=r-i,p=s-o;if(0===l)return 0===p?o:(o+s)/2;if(a)if(l>0){if(e<=i)return o;if(e>=r)return s}else{if(e>=i)return o;if(e<=r)return s}else{if(e===i)return o;if(e===r)return s}return(e-i)/l*p+o}function $c(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return Jr(e)?(n=e,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var n}function Kc(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function Yc(e){return e.sort((function(e,t){return e-t})),e}function Xc(e){if(e=+e,isNaN(e))return 0;if(e>1e-14)for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(e*t)/t===e)return n;return Zc(e)}function Zc(e){var t=e.toString().toLowerCase(),n=t.indexOf("e"),a=n>0?+t.slice(n+1):0,i=n>0?n:t.length,r=t.indexOf("."),o=r<0?0:i-1-r;return Math.max(0,o-a)}function Qc(e,t){var n=Math.log,a=Math.LN10,i=Math.floor(n(e[1]-e[0])/a),r=Math.round(n(Math.abs(t[1]-t[0]))/a),o=Math.min(Math.max(-i+r,0),20);return isFinite(o)?o:20}function Jc(e,t){var n=Hr(e,(function(e,t){return e+(isNaN(t)?0:t)}),0);if(0===n)return[];for(var a=Math.pow(10,t),i=jr(e,(function(e){return(isNaN(e)?0:e)/n*a*100})),r=100*a,o=jr(i,(function(e){return Math.floor(e)})),s=Hr(o,(function(e,t){return e+t}),0),l=jr(i,(function(e,t){return e-o[t]}));s<r;){for(var p=Number.NEGATIVE_INFINITY,c=null,d=0,u=l.length;d<u;++d)l[d]>p&&(p=l[d],c=d);++o[c],l[c]=0,++s}return jr(o,(function(e){return e/a}))}function ed(e,t){var n=Math.max(Xc(e),Xc(t)),a=e+t;return n>20?a:Kc(a,n)}function td(e){var t=2*Math.PI;return(e%t+t)%t}function nd(e){return e>-1e-4&&e<Hc}var ad=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function id(e){if(e instanceof Date)return e;if(Jr(e)){var t=ad.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}return null==e?new Date(NaN):new Date(Math.round(e))}function rd(e){return Math.pow(10,od(e))}function od(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function sd(e,t){var n=od(e),a=Math.pow(10,n),i=e/a;return e=(t?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10)*a,n>=-20?+e.toFixed(n<0?-n:0):e}function ld(e){e.sort((function(e,t){return s(e,t,0)?-1:1}));for(var t=-1/0,n=1,a=0;a<e.length;){for(var i=e[a].interval,r=e[a].close,o=0;o<2;o++)i[o]<=t&&(i[o]=t,r[o]=o?1:1-n),t=i[o],n=r[o];i[0]===i[1]&&r[0]*r[1]!=1?e.splice(a,1):a++}return e;function s(e,t,n){return e.interval[n]<t.interval[n]||e.interval[n]===t.interval[n]&&(e.close[n]-t.close[n]==(n?-1:1)||!n&&s(e,t,1))}}function pd(e){var t=parseFloat(e);return t==e&&(0!==t||!Jr(e)||e.indexOf("x")<=0)?t:NaN}function cd(e){return!isNaN(pd(e))}function dd(){return Math.round(9*Math.random())}function ud(e,t){return 0===t?e:ud(t,e%t)}function md(e,t){return null==e?t:null==t?e:e*t/ud(e,t)}"undefined"!=typeof console&&console.warn&&console.log;function hd(e){0}function gd(e){throw new Error(e)}function fd(e,t,n){return(t-e)*n+e}var yd="series\0",vd="\0_ec_\0";function bd(e){return e instanceof Array?e:null==e?[]:[e]}function xd(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var a=0,i=n.length;a<i;a++){var r=n[a];!e.emphasis[t].hasOwnProperty(r)&&e[t].hasOwnProperty(r)&&(e.emphasis[t][r]=e[t][r])}}}var wd=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Sd(e){return!no(e)||Zr(e)||e instanceof Date?e:e.value}function Cd(e){return no(e)&&!(e instanceof Array)}function _d(e,t,n){var a="normalMerge"===n,i="replaceMerge"===n,r="replaceAll"===n;e=e||[],t=(t||[]).slice();var o=_o();Ur(t,(function(e,n){no(e)||(t[n]=null)}));var s,l,p=function(e,t,n){var a=[];if("replaceAll"===n)return a;for(var i=0;i<e.length;i++){var r=e[i];r&&null!=r.id&&t.set(r.id,i),a.push({existing:"replaceMerge"===n||kd(r)?null:r,newOption:null,keyInfo:null,brandNew:null})}return a}(e,o,n);return(a||i)&&function(e,t,n,a){Ur(a,(function(i,r){if(i&&null!=i.id){var o=Id(i.id),s=n.get(o);if(null!=s){var l=e[s];fo(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=t[s],a[r]=null}}}))}(p,e,o,t),a&&function(e,t){Ur(t,(function(n,a){if(n&&null!=n.name)for(var i=0;i<e.length;i++){var r=e[i].existing;if(!e[i].newOption&&r&&(null==r.id||null==n.id)&&!kd(n)&&!kd(r)&&Td("name",r,n))return e[i].newOption=n,void(t[a]=null)}}))}(p,t),a||i?function(e,t,n){Ur(t,(function(t){if(t){for(var a,i=0;(a=e[i])&&(a.newOption||kd(a.existing)||a.existing&&null!=t.id&&!Td("id",t,a.existing));)i++;a?(a.newOption=t,a.brandNew=n):e.push({newOption:t,brandNew:n,existing:null,keyInfo:null}),i++}}))}(p,t,i):r&&function(e,t){Ur(t,(function(t){e.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})}))}(p,t),s=p,l=_o(),Ur(s,(function(e){var t=e.existing;t&&l.set(t.id,e)})),Ur(s,(function(e){var t=e.newOption;fo(!t||null==t.id||!l.get(t.id)||l.get(t.id)===e,"id duplicates: "+(t&&t.id)),t&&null!=t.id&&l.set(t.id,e),!e.keyInfo&&(e.keyInfo={})})),Ur(s,(function(e,t){var n=e.existing,a=e.newOption,i=e.keyInfo;if(no(a)){if(i.name=null!=a.name?Id(a.name):n?n.name:yd+t,n)i.id=Id(n.id);else if(null!=a.id)i.id=Id(a.id);else{var r=0;do{i.id="\0"+i.name+"\0"+r++}while(l.get(i.id))}l.set(i.id,e)}})),p}function Td(e,t,n){var a=Ed(t[e],null),i=Ed(n[e],null);return null!=a&&null!=i&&a===i}function Id(e){return Ed(e,"")}function Ed(e,t){return null==e?t:Jr(e)?e:to(e)||eo(e)?e+"":t}function Md(e){var t=e.name;return!(!t||!t.indexOf(yd))}function kd(e){return e&&null!=e.id&&0===Id(e.id).indexOf(vd)}function Pd(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?Zr(t.dataIndex)?jr(t.dataIndex,(function(t){return e.indexOfRawIndex(t)})):e.indexOfRawIndex(t.dataIndex):null!=t.name?Zr(t.name)?jr(t.name,(function(t){return e.indexOfName(t)})):e.indexOfName(t.name):void 0}function Dd(){var e="__ec_inner_"+Od++;return function(t){return t[e]||(t[e]={})}}var Od=dd();function Ad(e,t,n){var a=Fd(t,n),i=a.mainTypeSpecified,r=a.queryOptionMap,o=a.others,s=n?n.defaultMainType:null;return!i&&s&&r.set(s,{}),r.each((function(t,a){var i=Nd(e,a,t,{useDefault:s===a,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});o[a+"Models"]=i.models,o[a+"Model"]=i.models[0]})),o}function Fd(e,t){var n;if(Jr(e)){var a={};a[e+"Index"]=0,n=a}else n=e;var i=_o(),r={},o=!1;return Ur(n,(function(e,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var a=n.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],l=(a[2]||"").toLowerCase();if(s&&l&&!(t&&t.includeMainTypes&&Vr(t.includeMainTypes,s)<0))o=o||!!s,(i.get(s)||i.set(s,{}))[l]=e}else r[n]=e})),{mainTypeSpecified:o,queryOptionMap:i,others:r}}var Rd={useDefault:!0,enableAll:!1,enableNone:!1},Bd={useDefault:!1,enableAll:!0,enableNone:!0};function Nd(e,t,n,a){a=a||Rd;var i=n.index,r=n.id,o=n.name,s={models:null,specified:null!=i||null!=r||null!=o};if(!s.specified){var l=void 0;return s.models=a.useDefault&&(l=e.getComponent(t))?[l]:[],s}return"none"===i||!1===i?(fo(a.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):("all"===i&&(fo(a.enableAll,'`"all"` is not a valid value on index option.'),i=r=o=null),s.models=e.queryComponents({mainType:t,index:i,id:r,name:o}),s)}function Ld(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function Vd(e,t){var n=_o(),a=[];return Ur(e,(function(e){var i=t(e);(n.get(i)||(a.push(i),n.set(i,[]))).push(e)})),{keys:a,buckets:n}}function qd(e,t,n,a,i){var r=null==t||"auto"===t;if(null==a)return a;if(to(a))return Kc(h=fd(n||0,a,i),r?Math.max(Xc(n||0),Xc(a)):t);if(Jr(a))return i<1?n:a;for(var o=[],s=n,l=a,p=Math.max(s?s.length:0,l.length),c=0;c<p;++c){var d=e.getDimensionInfo(c);if(d&&"ordinal"===d.type)o[c]=(i<1&&s?s:l)[c];else{var u=s&&s[c]?s[c]:0,m=l[c],h=fd(u,m,i);o[c]=Kc(h,r?Math.max(Xc(u),Xc(m)):t)}}return o}var Gd="___EC__COMPONENT__CONTAINER___",zd="___EC__EXTENDED_CLASS___";function Ud(e){var t={main:"",sub:""};if(e){var n=e.split(".");t.main=n[0]||"",t.sub=n[1]||""}return t}function jd(e,t){e.$constructor=e,e.extend=function(e){var t,n,a=this;return Qr(n=a)&&/^class\s/.test(Function.prototype.toString.call(n))?t=function(e){function t(){return e.apply(this,arguments)||this}return ze(t,e),t}(a):(t=function(){(e.$constructor||a).apply(this,arguments)},qr(t,this)),Nr(t.prototype,e),t[zd]=!0,t.extend=this.extend,t.superCall=$d,t.superApply=Kd,t.superClass=a,t}}function Hd(e,t){e.extend=t.extend}var Wd=Math.round(10*Math.random());function $d(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return this.superClass.prototype[t].apply(e,n)}function Kd(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Yd(e){var t={};e.registerClass=function(e){var n,a=e.type||e.prototype.type;if(a){fo(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n=a),'componentType "'+n+'" illegal'),e.prototype.type=a;var i=Ud(a);if(i.sub){if(i.sub!==Gd){var r=function(e){var n=t[e.main];n&&n[Gd]||((n=t[e.main]={})[Gd]=!0);return n}(i);r[i.sub]=e}}else t[i.main]=e}return e},e.getClass=function(e,n,a){var i=t[e];if(i&&i[Gd]&&(i=n?i[n]:null),a&&!i)throw new Error(n?"Component "+e+"."+(n||"")+" is used but not imported.":e+".type should be specified.");return i},e.getClassesByMainType=function(e){var n=Ud(e),a=[],i=t[n.main];return i&&i[Gd]?Ur(i,(function(e,t){t!==Gd&&a.push(e)})):a.push(i),a},e.hasClass=function(e){var n=Ud(e);return!!t[n.main]},e.getAllClassMainTypes=function(){var e=[];return Ur(t,(function(t,n){e.push(n)})),e},e.hasSubTypes=function(e){var n=Ud(e),a=t[n.main];return a&&a[Gd]}}function Xd(e,t){for(var n=0;n<e.length;n++)e[n][1]||(e[n][1]=e[n][0]);return t=t||!1,function(n,a,i){for(var r={},o=0;o<e.length;o++){var s=e[o][1];if(!(a&&Vr(a,s)>=0||i&&Vr(i,s)<0)){var l=n.getShallow(s,t);null!=l&&(r[e[o][0]]=l)}}return r}}var Zd=Xd([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Qd=function(){function e(){}return e.prototype.getAreaStyle=function(e,t){return Zd(this,e,t)},e}(),Jd=new Bl(50);function eu(e){if("string"==typeof e){var t=Jd.get(e);return t&&t.image}return e}function tu(e,t,n,a,i){if(e){if("string"==typeof e){if(t&&t.__zrImageSrc===e||!n)return t;var r=Jd.get(e),o={hostEl:n,cb:a,cbPayload:i};return r?!au(t=r.image)&&r.pending.push(o):((t=br.loadImage(e,nu,nu)).__zrImageSrc=e,Jd.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}return e}return t}function nu(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],a=n.cb;a&&a(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function au(e){return e&&e.width&&e.height}var iu=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ru(e,t,n,a,i){if(!t)return"";var r=(e+"").split("\n");i=ou(t,n,a,i);for(var o=0,s=r.length;o<s;o++)r[o]=su(r[o],i);return r.join("\n")}function ou(e,t,n,a){var i=Nr({},a=a||{});i.font=t,n=uo(n,"..."),i.maxIterations=uo(a.maxIterations,2);var r=i.minChar=uo(a.minChar,0);i.cnCharWidth=vc("国",t);var o=i.ascCharWidth=vc("a",t);i.placeholder=uo(a.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<r&&s>=o;l++)s-=o;var p=vc(n,t);return p>s&&(n="",p=0),s=e-p,i.ellipsis=n,i.ellipsisWidth=p,i.contentWidth=s,i.containerWidth=e,i}function su(e,t){var n=t.containerWidth,a=t.font,i=t.contentWidth;if(!n)return"";var r=vc(e,a);if(r<=n)return e;for(var o=0;;o++){if(r<=i||o>=t.maxIterations){e+=t.ellipsis;break}var s=0===o?lu(e,i,t.ascCharWidth,t.cnCharWidth):r>0?Math.floor(e.length*i/r):0;r=vc(e=e.substr(0,s),a)}return""===e&&(e=t.placeholder),e}function lu(e,t,n,a){for(var i=0,r=0,o=e.length;r<o&&i<t;r++){var s=e.charCodeAt(r);i+=0<=s&&s<=127?n:a}return r}var pu=function(){},cu=function(e){this.tokens=[],e&&(this.tokens=e)},du=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function uu(e,t,n,a,i){var r,o,s=""===t,l=i&&n.rich[i]||{},p=e.lines,c=l.font||n.font,d=!1;if(a){var u=l.padding,m=u?u[1]+u[3]:0;if(null!=l.width&&"auto"!==l.width){var h=_c(l.width,a.width)+m;p.length>0&&h+a.accumWidth>a.width&&(r=t.split("\n"),d=!0),a.accumWidth=h}else{var g=gu(t,c,a.width,a.breakAll,a.accumWidth);a.accumWidth=g.accumWidth+m,o=g.linesWidths,r=g.lines}}else r=t.split("\n");for(var f=0;f<r.length;f++){var y=r[f],v=new pu;if(v.styleName=i,v.text=y,v.isLineHolder=!y&&!s,"number"==typeof l.width?v.width=l.width:v.width=o?o[f]:vc(y,c),f||d)p.push(new cu([v]));else{var b=(p[p.length-1]||(p[0]=new cu)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=v:(y||!x||s)&&b.push(v)}}}var mu=Hr(",&?/;] ".split(""),(function(e,t){return e[t]=!0,e}),{});function hu(e){return!function(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}(e)||!!mu[e]}function gu(e,t,n,a,i){for(var r=[],o=[],s="",l="",p=0,c=0,d=0;d<e.length;d++){var u=e.charAt(d);if("\n"!==u){var m=vc(u,t),h=!a&&!hu(u);(r.length?c+m>n:i+c+m>n)?c?(s||l)&&(h?(s||(s=l,l="",c=p=0),r.push(s),o.push(c-p),l+=u,s="",c=p+=m):(l&&(s+=l,l="",p=0),r.push(s),o.push(c),s=u,c=m)):h?(r.push(l),o.push(p),l=u,p=m):(r.push(u),o.push(m)):(c+=m,h?(l+=u,p+=m):(l&&(s+=l,l="",p=0),s+=u))}else l&&(s+=l,c+=p),r.push(s),o.push(c),s="",l="",p=0,c=0}return r.length||s||(s=e,l="",p=0),l&&(s+=l),s&&(r.push(s),o.push(c)),1===r.length&&(c+=i),{accumWidth:c,lines:r,linesWidths:o}}var fu="__zr_style_"+Math.round(10*Math.random()),yu={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},vu={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};yu[fu]=!0;var bu=["z","z2","invisible"],xu=["invisible"],wu=function(e){function t(t){return e.call(this,t)||this}var n;return ze(t,e),t.prototype._init=function(t){for(var n=Kr(t),a=0;a<n.length;a++){var i=n[a];"style"===i?this.useStyle(t[i]):e.prototype.attrKV.call(this,i,t[i])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,t,n,a){var i=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(e,t,n){Su.copy(e.getBoundingRect()),e.transform&&Su.applyTransform(e.transform);return Cu.width=t,Cu.height=n,!Su.intersect(Cu)}(this,e,t)||i&&!i[0]&&!i[3])return!1;if(n&&this.__clipPaths)for(var r=0;r<this.__clipPaths.length;++r)if(this.__clipPaths[r].isZeroArea())return!1;if(a&&this.parent)for(var o=this.parent;o;){if(o.ignore)return!1;o=o.parent}return!0},t.prototype.contain=function(e,t){return this.rectContain(e,t)},t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.rectContain=function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var t=this.transform,n=this.getBoundingRect(),a=this.style,i=a.shadowBlur||0,r=a.shadowOffsetX||0,o=a.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new Ls(0,0,0,0)),t?Ls.applyTransform(e,n,t):e.copy(n),(i||r||o)&&(e.width+=2*i+Math.abs(r),e.height+=2*i+Math.abs(o),e.x=Math.min(e.x,e.x+r-i),e.y=Math.min(e.y,e.y+o-i));var s=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-s),e.y=Math.floor(e.y-s),e.width=Math.ceil(e.width+1+2*s),e.height=Math.ceil(e.height+1+2*s))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new Ls(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(t,n){"style"!==t?e.prototype.attrKV.call(this,t,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(e,t){return"string"==typeof e?this.style[e]=t:Nr(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(2&this.__dirty)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(e){return Io(yu,e)},t.prototype.useStyle=function(e){e[fu]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[fu]},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,n,bu)},t.prototype._applyStateObj=function(t,n,a,i,r,o){e.prototype._applyStateObj.call(this,t,n,a,i,r,o);var s,l=!(n&&i);if(n&&n.style?r?i?s=n.style:(s=this._mergeStyle(this.createStyle(),a.style),this._mergeStyle(s,n.style)):(s=this._mergeStyle(this.createStyle(),i?this.style:a.style),this._mergeStyle(s,n.style)):l&&(s=a.style),s)if(r){var p=this.style;if(this.style=this.createStyle(l?{}:p),l)for(var c=Kr(p),d=0;d<c.length;d++){(m=c[d])in s&&(s[m]=s[m],this.style[m]=p[m])}var u=Kr(s);for(d=0;d<u.length;d++){var m=u[d];this.style[m]=this.style[m]}this._transitionState(t,{style:s},o,this.getAnimationStyleProps())}else this.useStyle(s);var h=this.__inHover?xu:bu;for(d=0;d<h.length;d++){m=h[d];n&&null!=n[m]?this[m]=n[m]:l&&null!=a[m]&&(this[m]=a[m])}},t.prototype._mergeStates=function(t){for(var n,a=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var r=t[i];r.style&&(n=n||{},this._mergeStyle(n,r.style))}return n&&(a.style=n),a},t.prototype._mergeStyle=function(e,t){return Nr(e,t),e},t.prototype.getAnimationStyleProps=function(){return vu},t.initDefaultProps=((n=t.prototype).type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,void(n.__dirty=3)),t}(Dc),Su=new Ls(0,0,0,0),Cu=new Ls(0,0,0,0);var _u=Math.min,Tu=Math.max,Iu=Math.sin,Eu=Math.cos,Mu=2*Math.PI,ku=Do(),Pu=Do(),Du=Do();function Ou(e,t,n){if(0!==e.length){for(var a=e[0],i=a[0],r=a[0],o=a[1],s=a[1],l=1;l<e.length;l++)a=e[l],i=_u(i,a[0]),r=Tu(r,a[0]),o=_u(o,a[1]),s=Tu(s,a[1]);t[0]=i,t[1]=o,n[0]=r,n[1]=s}}function Au(e,t,n,a,i,r){i[0]=_u(e,n),i[1]=_u(t,a),r[0]=Tu(e,n),r[1]=Tu(t,a)}var Fu=[],Ru=[];function Bu(e,t,n,a,i,r,o,s,l,p){var c=wl,d=vl,u=c(e,n,i,o,Fu);l[0]=1/0,l[1]=1/0,p[0]=-1/0,p[1]=-1/0;for(var m=0;m<u;m++){var h=d(e,n,i,o,Fu[m]);l[0]=_u(h,l[0]),p[0]=Tu(h,p[0])}u=c(t,a,r,s,Ru);for(m=0;m<u;m++){var g=d(t,a,r,s,Ru[m]);l[1]=_u(g,l[1]),p[1]=Tu(g,p[1])}l[0]=_u(e,l[0]),p[0]=Tu(e,p[0]),l[0]=_u(o,l[0]),p[0]=Tu(o,p[0]),l[1]=_u(t,l[1]),p[1]=Tu(t,p[1]),l[1]=_u(s,l[1]),p[1]=Tu(s,p[1])}function Nu(e,t,n,a,i,r,o,s){var l=El,p=Tl,c=Tu(_u(l(e,n,i),1),0),d=Tu(_u(l(t,a,r),1),0),u=p(e,n,i,c),m=p(t,a,r,d);o[0]=_u(e,i,u),o[1]=_u(t,r,m),s[0]=Tu(e,i,u),s[1]=Tu(t,r,m)}function Lu(e,t,n,a,i,r,o,s,l){var p=$o,c=Ko,d=Math.abs(i-r);if(d%Mu<1e-4&&d>1e-4)return s[0]=e-n,s[1]=t-a,l[0]=e+n,void(l[1]=t+a);if(ku[0]=Eu(i)*n+e,ku[1]=Iu(i)*a+t,Pu[0]=Eu(r)*n+e,Pu[1]=Iu(r)*a+t,p(s,ku,Pu),c(l,ku,Pu),(i%=Mu)<0&&(i+=Mu),(r%=Mu)<0&&(r+=Mu),i>r&&!o?r+=Mu:i<r&&o&&(i+=Mu),o){var u=r;r=i,i=u}for(var m=0;m<r;m+=Math.PI/2)m>i&&(Du[0]=Eu(m)*n+e,Du[1]=Iu(m)*a+t,p(s,Du,s),c(l,Du,l))}var Vu={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},qu=[],Gu=[],zu=[],Uu=[],ju=[],Hu=[],Wu=Math.min,$u=Math.max,Ku=Math.cos,Yu=Math.sin,Xu=Math.abs,Zu=Math.PI,Qu=2*Zu,Ju="undefined"!=typeof Float32Array,em=[];function tm(e){return Math.round(e/Zu*1e8)/1e8%2*Zu}function nm(e,t){var n=tm(e[0]);n<0&&(n+=Qu);var a=n-e[0],i=e[1];i+=a,!t&&i-n>=Qu?i=n+Qu:t&&n-i>=Qu?i=n-Qu:!t&&n>i?i=n+(Qu-tm(n-i)):t&&n<i&&(i=n-(Qu-tm(i-n))),e[0]=n,e[1]=i}var am=function(){function e(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(e,t,n){(n=n||0)>0&&(this._ux=Xu(n/ic/e)||0,this._uy=Xu(n/ic/t)||0)},e.prototype.setDPR=function(e){this.dpr=e},e.prototype.setContext=function(e){this._ctx=e},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Vu.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},e.prototype.lineTo=function(e,t){var n=Xu(e-this._xi),a=Xu(t-this._yi),i=n>this._ux||a>this._uy;if(this.addData(Vu.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var r=n*n+a*a;r>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=r)}return this},e.prototype.bezierCurveTo=function(e,t,n,a,i,r){return this._drawPendingPt(),this.addData(Vu.C,e,t,n,a,i,r),this._ctx&&this._ctx.bezierCurveTo(e,t,n,a,i,r),this._xi=i,this._yi=r,this},e.prototype.quadraticCurveTo=function(e,t,n,a){return this._drawPendingPt(),this.addData(Vu.Q,e,t,n,a),this._ctx&&this._ctx.quadraticCurveTo(e,t,n,a),this._xi=n,this._yi=a,this},e.prototype.arc=function(e,t,n,a,i,r){this._drawPendingPt(),em[0]=a,em[1]=i,nm(em,r),a=em[0];var o=(i=em[1])-a;return this.addData(Vu.A,e,t,n,n,a,o,0,r?0:1),this._ctx&&this._ctx.arc(e,t,n,a,i,r),this._xi=Ku(i)*n+e,this._yi=Yu(i)*n+t,this},e.prototype.arcTo=function(e,t,n,a,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,n,a,i),this},e.prototype.rect=function(e,t,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,n,a),this.addData(Vu.R,e,t,n,a),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Vu.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&e.closePath(),this._xi=t,this._yi=n,this},e.prototype.fill=function(e){e&&e.fill(),this.toStatic()},e.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(e){var t=e.length;this.data&&this.data.length===t||!Ju||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},e.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,a=this._len,i=0;i<t;i++)n+=e[i].len();Ju&&this.data instanceof Float32Array&&(this.data=new Float32Array(a+n));for(i=0;i<t;i++)for(var r=e[i].data,o=0;o<r.length;o++)this.data[a++]=r[o];this._len=a},e.prototype.addData=function(e,t,n,a,i,r,o,s,l){if(this._saveData){var p=this.data;this._len+arguments.length>p.length&&(this._expandData(),p=this.data);for(var c=0;c<arguments.length;c++)p[this._len++]=arguments[c]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,Ju&&this._len>11&&(this.data=new Float32Array(e)))}},e.prototype.getBoundingRect=function(){zu[0]=zu[1]=ju[0]=ju[1]=Number.MAX_VALUE,Uu[0]=Uu[1]=Hu[0]=Hu[1]=-Number.MAX_VALUE;var e,t=this.data,n=0,a=0,i=0,r=0;for(e=0;e<this._len;){var o=t[e++],s=1===e;switch(s&&(i=n=t[e],r=a=t[e+1]),o){case Vu.M:n=i=t[e++],a=r=t[e++],ju[0]=i,ju[1]=r,Hu[0]=i,Hu[1]=r;break;case Vu.L:Au(n,a,t[e],t[e+1],ju,Hu),n=t[e++],a=t[e++];break;case Vu.C:Bu(n,a,t[e++],t[e++],t[e++],t[e++],t[e],t[e+1],ju,Hu),n=t[e++],a=t[e++];break;case Vu.Q:Nu(n,a,t[e++],t[e++],t[e],t[e+1],ju,Hu),n=t[e++],a=t[e++];break;case Vu.A:var l=t[e++],p=t[e++],c=t[e++],d=t[e++],u=t[e++],m=t[e++]+u;e+=1;var h=!t[e++];s&&(i=Ku(u)*c+l,r=Yu(u)*d+p),Lu(l,p,c,d,u,m,h,ju,Hu),n=Ku(m)*c+l,a=Yu(m)*d+p;break;case Vu.R:Au(i=n=t[e++],r=a=t[e++],i+t[e++],r+t[e++],ju,Hu);break;case Vu.Z:n=i,a=r}$o(zu,zu,ju),Ko(Uu,Uu,Hu)}return 0===e&&(zu[0]=zu[1]=Uu[0]=Uu[1]=0),new Ls(zu[0],zu[1],Uu[0]-zu[0],Uu[1]-zu[1])},e.prototype._calculateLength=function(){var e=this.data,t=this._len,n=this._ux,a=this._uy,i=0,r=0,o=0,s=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,p=0,c=0,d=0;d<t;){var u=e[d++],m=1===d;m&&(o=i=e[d],s=r=e[d+1]);var h=-1;switch(u){case Vu.M:i=o=e[d++],r=s=e[d++];break;case Vu.L:var g=e[d++],f=(b=e[d++])-r;(Xu(k=g-i)>n||Xu(f)>a||d===t-1)&&(h=Math.sqrt(k*k+f*f),i=g,r=b);break;case Vu.C:var y=e[d++],v=e[d++],b=(g=e[d++],e[d++]),x=e[d++],w=e[d++];h=_l(i,r,y,v,g,b,x,w,10),i=x,r=w;break;case Vu.Q:h=Pl(i,r,y=e[d++],v=e[d++],g=e[d++],b=e[d++],10),i=g,r=b;break;case Vu.A:var S=e[d++],C=e[d++],_=e[d++],T=e[d++],I=e[d++],E=e[d++],M=E+I;d+=1,m&&(o=Ku(I)*_+S,s=Yu(I)*T+C),h=$u(_,T)*Wu(Qu,Math.abs(E)),i=Ku(M)*_+S,r=Yu(M)*T+C;break;case Vu.R:o=i=e[d++],s=r=e[d++],h=2*e[d++]+2*e[d++];break;case Vu.Z:var k=o-i;f=s-r;h=Math.sqrt(k*k+f*f),i=o,r=s}h>=0&&(l[c++]=h,p+=h)}return this._pathLen=p,p},e.prototype.rebuildPath=function(e,t){var n,a,i,r,o,s,l,p,c,d,u=this.data,m=this._ux,h=this._uy,g=this._len,f=t<1,y=0,v=0,b=0;if(!f||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,p=t*this._pathLen))e:for(var x=0;x<g;){var w=u[x++],S=1===x;switch(S&&(n=i=u[x],a=r=u[x+1]),w!==Vu.L&&b>0&&(e.lineTo(c,d),b=0),w){case Vu.M:n=i=u[x++],a=r=u[x++],e.moveTo(i,r);break;case Vu.L:o=u[x++],s=u[x++];var C=Xu(o-i),_=Xu(s-r);if(C>m||_>h){if(f){if(y+(K=l[v++])>p){var T=(p-y)/K;e.lineTo(i*(1-T)+o*T,r*(1-T)+s*T);break e}y+=K}e.lineTo(o,s),i=o,r=s,b=0}else{var I=C*C+_*_;I>b&&(c=o,d=s,b=I)}break;case Vu.C:var E=u[x++],M=u[x++],k=u[x++],P=u[x++],D=u[x++],O=u[x++];if(f){if(y+(K=l[v++])>p){Sl(i,E,k,D,T=(p-y)/K,qu),Sl(r,M,P,O,T,Gu),e.bezierCurveTo(qu[1],Gu[1],qu[2],Gu[2],qu[3],Gu[3]);break e}y+=K}e.bezierCurveTo(E,M,k,P,D,O),i=D,r=O;break;case Vu.Q:E=u[x++],M=u[x++],k=u[x++],P=u[x++];if(f){if(y+(K=l[v++])>p){Ml(i,E,k,T=(p-y)/K,qu),Ml(r,M,P,T,Gu),e.quadraticCurveTo(qu[1],Gu[1],qu[2],Gu[2]);break e}y+=K}e.quadraticCurveTo(E,M,k,P),i=k,r=P;break;case Vu.A:var A=u[x++],F=u[x++],R=u[x++],B=u[x++],N=u[x++],L=u[x++],V=u[x++],q=!u[x++],G=R>B?R:B,z=Xu(R-B)>.001,U=N+L,j=!1;if(f)y+(K=l[v++])>p&&(U=N+L*(p-y)/K,j=!0),y+=K;if(z&&e.ellipse?e.ellipse(A,F,R,B,V,N,U,q):e.arc(A,F,G,N,U,q),j)break e;S&&(n=Ku(N)*R+A,a=Yu(N)*B+F),i=Ku(U)*R+A,r=Yu(U)*B+F;break;case Vu.R:n=i=u[x],a=r=u[x+1],o=u[x++],s=u[x++];var H=u[x++],W=u[x++];if(f){if(y+(K=l[v++])>p){var $=p-y;e.moveTo(o,s),e.lineTo(o+Wu($,H),s),($-=H)>0&&e.lineTo(o+H,s+Wu($,W)),($-=W)>0&&e.lineTo(o+$u(H-$,0),s+W),($-=H)>0&&e.lineTo(o,s+$u(W-$,0));break e}y+=K}e.rect(o,s,H,W);break;case Vu.Z:if(f){var K;if(y+(K=l[v++])>p){T=(p-y)/K;e.lineTo(i*(1-T)+n*T,r*(1-T)+a*T);break e}y+=K}e.closePath(),i=n,r=a}}},e.prototype.clone=function(){var t=new e,n=this.data;return t.data=n.slice?n.slice():Array.prototype.slice.call(n),t._len=this._len,t},e.CMD=Vu,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function im(e,t,n,a,i,r,o){if(0===i)return!1;var s=i,l=0;if(o>t+s&&o>a+s||o<t-s&&o<a-s||r>e+s&&r>n+s||r<e-s&&r<n-s)return!1;if(e===n)return Math.abs(r-e)<=s/2;var p=(l=(t-a)/(e-n))*r-o+(e*a-n*t)/(e-n);return p*p/(l*l+1)<=s/2*s/2}function rm(e,t,n,a,i,r,o,s,l,p,c){if(0===l)return!1;var d=l;return!(c>t+d&&c>a+d&&c>r+d&&c>s+d||c<t-d&&c<a-d&&c<r-d&&c<s-d||p>e+d&&p>n+d&&p>i+d&&p>o+d||p<e-d&&p<n-d&&p<i-d&&p<o-d)&&Cl(e,t,n,a,i,r,o,s,p,c,null)<=d/2}function om(e,t,n,a,i,r,o,s,l){if(0===o)return!1;var p=o;return!(l>t+p&&l>a+p&&l>r+p||l<t-p&&l<a-p&&l<r-p||s>e+p&&s>n+p&&s>i+p||s<e-p&&s<n-p&&s<i-p)&&kl(e,t,n,a,i,r,s,l,null)<=p/2}var sm=2*Math.PI;function lm(e){return(e%=sm)<0&&(e+=sm),e}var pm=2*Math.PI;function cm(e,t,n,a,i,r,o,s,l){if(0===o)return!1;var p=o;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-p>n||c+p<n)return!1;if(Math.abs(a-i)%pm<1e-4)return!0;if(r){var d=a;a=lm(i),i=lm(d)}else a=lm(a),i=lm(i);a>i&&(i+=pm);var u=Math.atan2(l,s);return u<0&&(u+=pm),u>=a&&u<=i||u+pm>=a&&u+pm<=i}function dm(e,t,n,a,i,r){if(r>t&&r>a||r<t&&r<a)return 0;if(a===t)return 0;var o=(r-t)/(a-t),s=a<t?1:-1;1!==o&&0!==o||(s=a<t?.5:-.5);var l=o*(n-e)+e;return l===i?1/0:l>i?s:0}var um=am.CMD,mm=2*Math.PI;var hm=[-1,-1,-1],gm=[-1,-1];function fm(e,t,n,a,i,r,o,s,l,p){if(p>t&&p>a&&p>r&&p>s||p<t&&p<a&&p<r&&p<s)return 0;var c,d=xl(t,a,r,s,p,hm);if(0===d)return 0;for(var u=0,m=-1,h=void 0,g=void 0,f=0;f<d;f++){var y=hm[f],v=0===y||1===y?.5:1;vl(e,n,i,o,y)<l||(m<0&&(m=wl(t,a,r,s,gm),gm[1]<gm[0]&&m>1&&(c=void 0,c=gm[0],gm[0]=gm[1],gm[1]=c),h=vl(t,a,r,s,gm[0]),m>1&&(g=vl(t,a,r,s,gm[1]))),2===m?y<gm[0]?u+=h<t?v:-v:y<gm[1]?u+=g<h?v:-v:u+=s<g?v:-v:y<gm[0]?u+=h<t?v:-v:u+=s<h?v:-v)}return u}function ym(e,t,n,a,i,r,o,s){if(s>t&&s>a&&s>r||s<t&&s<a&&s<r)return 0;var l=function(e,t,n,a,i){var r=e-2*t+n,o=2*(t-e),s=e-a,l=0;if(fl(r))yl(o)&&(c=-s/o)>=0&&c<=1&&(i[l++]=c);else{var p=o*o-4*r*s;if(fl(p))(c=-o/(2*r))>=0&&c<=1&&(i[l++]=c);else if(p>0){var c,d=ll(p),u=(-o-d)/(2*r);(c=(-o+d)/(2*r))>=0&&c<=1&&(i[l++]=c),u>=0&&u<=1&&(i[l++]=u)}}return l}(t,a,r,s,hm);if(0===l)return 0;var p=El(t,a,r);if(p>=0&&p<=1){for(var c=0,d=Tl(t,a,r,p),u=0;u<l;u++){var m=0===hm[u]||1===hm[u]?.5:1;Tl(e,n,i,hm[u])<o||(hm[u]<p?c+=d<t?m:-m:c+=r<d?m:-m)}return c}m=0===hm[0]||1===hm[0]?.5:1;return Tl(e,n,i,hm[0])<o?0:r<t?m:-m}function vm(e,t,n,a,i,r,o,s){if((s-=t)>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);hm[0]=-l,hm[1]=l;var p=Math.abs(a-i);if(p<1e-4)return 0;if(p>=mm-1e-4){a=0,i=mm;var c=r?1:-1;return o>=hm[0]+e&&o<=hm[1]+e?c:0}if(a>i){var d=a;a=i,i=d}a<0&&(a+=mm,i+=mm);for(var u=0,m=0;m<2;m++){var h=hm[m];if(h+e>o){var g=Math.atan2(s,h);c=r?1:-1;g<0&&(g=mm+g),(g>=a&&g<=i||g+mm>=a&&g+mm<=i)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),u+=c)}}return u}function bm(e,t,n,a,i){for(var r,o,s,l,p=e.data,c=e.len(),d=0,u=0,m=0,h=0,g=0,f=0;f<c;){var y=p[f++],v=1===f;switch(y===um.M&&f>1&&(n||(d+=dm(u,m,h,g,a,i))),v&&(h=u=p[f],g=m=p[f+1]),y){case um.M:u=h=p[f++],m=g=p[f++];break;case um.L:if(n){if(im(u,m,p[f],p[f+1],t,a,i))return!0}else d+=dm(u,m,p[f],p[f+1],a,i)||0;u=p[f++],m=p[f++];break;case um.C:if(n){if(rm(u,m,p[f++],p[f++],p[f++],p[f++],p[f],p[f+1],t,a,i))return!0}else d+=fm(u,m,p[f++],p[f++],p[f++],p[f++],p[f],p[f+1],a,i)||0;u=p[f++],m=p[f++];break;case um.Q:if(n){if(om(u,m,p[f++],p[f++],p[f],p[f+1],t,a,i))return!0}else d+=ym(u,m,p[f++],p[f++],p[f],p[f+1],a,i)||0;u=p[f++],m=p[f++];break;case um.A:var b=p[f++],x=p[f++],w=p[f++],S=p[f++],C=p[f++],_=p[f++];f+=1;var T=!!(1-p[f++]);r=Math.cos(C)*w+b,o=Math.sin(C)*S+x,v?(h=r,g=o):d+=dm(u,m,r,o,a,i);var I=(a-b)*S/w+b;if(n){if(cm(b,x,S,C,C+_,T,t,I,i))return!0}else d+=vm(b,x,S,C,C+_,T,I,i);u=Math.cos(C+_)*w+b,m=Math.sin(C+_)*S+x;break;case um.R:if(h=u=p[f++],g=m=p[f++],r=h+p[f++],o=g+p[f++],n){if(im(h,g,r,g,t,a,i)||im(r,g,r,o,t,a,i)||im(r,o,h,o,t,a,i)||im(h,o,h,g,t,a,i))return!0}else d+=dm(r,g,r,o,a,i),d+=dm(h,o,h,g,a,i);break;case um.Z:if(n){if(im(u,m,h,g,t,a,i))return!0}else d+=dm(u,m,h,g,a,i);u=h,m=g}}return n||(s=m,l=g,Math.abs(s-l)<1e-4)||(d+=dm(u,m,h,g,a,i)||0),0!==d}var xm=Lr({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},yu),wm={style:Lr({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},vu.style)},Sm=gc.concat(["invisible","culling","z","z2","zlevel","parent"]),Cm=function(e){function t(t){return e.call(this,t)||this}var n;return ze(t,e),t.prototype.update=function(){var n=this;e.prototype.update.call(this);var a=this.style;if(a.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(e){n.buildPath(e,n.shape)}),i.silent=!0;var r=i.style;for(var o in a)r[o]!==a[o]&&(r[o]=a[o]);r.fill=a.fill?a.decal:null,r.decal=null,r.shadowColor=null,a.strokeFirst&&(r.stroke=null);for(var s=0;s<Sm.length;++s)i[Sm[s]]=this[Sm[s]];i.__dirty|=1}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(t){var n=Kr(t);this.shape=this.getDefaultShape();var a=this.getDefaultStyle();a&&this.useStyle(a);for(var i=0;i<n.length;i++){var r=n[i],o=t[r];"style"===r?this.style?Nr(this.style,o):this.useStyle(o):"shape"===r?Nr(this.shape,o):e.prototype.attrKV.call(this,r,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if("none"!==e){if(Jr(e)){var t=ap(e,0);return t>.5?rc:t>.2?"#eee":oc}if(e)return oc}return rc},t.prototype.getInsideTextStroke=function(e){var t=this.style.fill;if(Jr(t)){var n=this.__zr;if(!(!n||!n.isDarkMode())===ap(e,0)<.4)return t}},t.prototype.buildPath=function(e,t,n){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new am(!1)},t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.getBoundingRect=function(){var e=this._rect,t=this.style,n=!e;if(n){var a=!1;this.path||(a=!0,this.createPathProxy());var i=this.path;(a||4&this.__dirty)&&(i.beginPath(),this.buildPath(i,this.shape,!1),this.pathUpdated()),e=i.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var r=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||n){r.copy(e);var o=t.strokeNoScale?this.getLineScale():1,s=t.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;s=Math.max(s,null==l?4:l)}o>1e-10&&(r.width+=s/o,r.height+=s/o,r.x-=s/o/2,r.y-=s/o/2)}return r}return e},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),a=this.getBoundingRect(),i=this.style;if(e=n[0],t=n[1],a.contain(e,t)){var r=this.path;if(this.hasStroke()){var o=i.lineWidth,s=i.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(o=Math.max(o,this.strokeContainThreshold)),function(e,t,n,a){return bm(e,t,!0,n,a)}(r,o/s,e,t)))return!0}if(this.hasFill())return function(e,t,n){return bm(e,0,!1,t,n)}(r,e,t)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():"shape"===e?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(t,n){"shape"===t?this.setShape(n):e.prototype.attrKV.call(this,t,n)},t.prototype.setShape=function(e,t){var n=this.shape;return n||(n=this.shape={}),"string"==typeof e?n[e]=t:Nr(n,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(4&this.__dirty)},t.prototype.createStyle=function(e){return Io(xm,e)},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.shape&&!n.shape&&(n.shape=Nr({},this.shape))},t.prototype._applyStateObj=function(t,n,a,i,r,o){e.prototype._applyStateObj.call(this,t,n,a,i,r,o);var s,l=!(n&&i);if(n&&n.shape?r?i?s=n.shape:(s=Nr({},a.shape),Nr(s,n.shape)):(s=Nr({},i?this.shape:a.shape),Nr(s,n.shape)):l&&(s=a.shape),s)if(r){this.shape=Nr({},this.shape);for(var p={},c=Kr(s),d=0;d<c.length;d++){var u=c[d];"object"==typeof s[u]?this.shape[u]=s[u]:p[u]=s[u]}this._transitionState(t,{shape:p},o)}else this.shape=s,this.dirtyShape()},t.prototype._mergeStates=function(t){for(var n,a=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var r=t[i];r.shape&&(n=n||{},this._mergeStyle(n,r.shape))}return n&&(a.shape=n),a},t.prototype.getAnimationStyleProps=function(){return wm},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var n=function(t){function n(n){var a=t.call(this,n)||this;return e.init&&e.init.call(a,n),a}return ze(n,t),n.prototype.getDefaultStyle=function(){return Fr(e.style)},n.prototype.getDefaultShape=function(){return Fr(e.shape)},n}(t);for(var a in e)"function"==typeof e[a]&&(n.prototype[a]=e[a]);return n},t.initDefaultProps=((n=t.prototype).type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,void(n.__dirty=7)),t}(wu),_m=Lr({strokeFirst:!0,font:gr,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},xm),Tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return null!=t&&"none"!==t&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return Io(_m,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var t=e.text;null!=t?t+="":t="";var n=xc(t,e.font,e.textAlign,e.textBaseline);if(n.x+=e.x||0,n.y+=e.y||0,this.hasStroke()){var a=e.lineWidth;n.x-=a/2,n.y-=a/2,n.width+=a,n.height+=a}this._rect=n}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(wu);Tm.prototype.type="tspan";var Im=Lr({x:0,y:0},yu),Em={style:Lr({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},vu.style)};var Mm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.createStyle=function(e){return Io(Im,e)},t.prototype._getSize=function(e){var t=this.style,n=t[e];if(null!=n)return n;var a,i=(a=t.image)&&"string"!=typeof a&&a.width&&a.height?t.image:this.__image;if(!i)return 0;var r="width"===e?"height":"width",o=t[r];return null==o?i[e]:i[e]/i[r]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return Em},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Ls(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(wu);Mm.prototype.type="image";var km=Math.round;function Pm(e,t,n){if(t){var a=t.x1,i=t.x2,r=t.y1,o=t.y2;e.x1=a,e.x2=i,e.y1=r,e.y2=o;var s=n&&n.lineWidth;return s?(km(2*a)===km(2*i)&&(e.x1=e.x2=Om(a,s,!0)),km(2*r)===km(2*o)&&(e.y1=e.y2=Om(r,s,!0)),e):e}}function Dm(e,t,n){if(t){var a=t.x,i=t.y,r=t.width,o=t.height;e.x=a,e.y=i,e.width=r,e.height=o;var s=n&&n.lineWidth;return s?(e.x=Om(a,s,!0),e.y=Om(i,s,!0),e.width=Math.max(Om(a+r,s,!1)-e.x,0===r?0:1),e.height=Math.max(Om(i+o,s,!1)-e.y,0===o?0:1),e):e}}function Om(e,t,n){if(!t)return e;var a=km(2*e);return(a+km(t))%2==0?a/2:(a+(n?1:-1))/2}var Am=function(){this.x=0,this.y=0,this.width=0,this.height=0},Fm={},Rm=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new Am},t.prototype.buildPath=function(e,t){var n,a,i,r;if(this.subPixelOptimize){var o=Dm(Fm,t,this.style);n=o.x,a=o.y,i=o.width,r=o.height,o.r=t.r,t=o}else n=t.x,a=t.y,i=t.width,r=t.height;t.r?function(e,t){var n,a,i,r,o,s=t.x,l=t.y,p=t.width,c=t.height,d=t.r;p<0&&(s+=p,p=-p),c<0&&(l+=c,c=-c),"number"==typeof d?n=a=i=r=d:d instanceof Array?1===d.length?n=a=i=r=d[0]:2===d.length?(n=i=d[0],a=r=d[1]):3===d.length?(n=d[0],a=r=d[1],i=d[2]):(n=d[0],a=d[1],i=d[2],r=d[3]):n=a=i=r=0,n+a>p&&(n*=p/(o=n+a),a*=p/o),i+r>p&&(i*=p/(o=i+r),r*=p/o),a+i>c&&(a*=c/(o=a+i),i*=c/o),n+r>c&&(n*=c/(o=n+r),r*=c/o),e.moveTo(s+n,l),e.lineTo(s+p-a,l),0!==a&&e.arc(s+p-a,l+a,a,-Math.PI/2,0),e.lineTo(s+p,l+c-i),0!==i&&e.arc(s+p-i,l+c-i,i,0,Math.PI/2),e.lineTo(s+r,l+c),0!==r&&e.arc(s+r,l+c-r,r,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}(e,t):e.rect(n,a,i,r)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Cm);Rm.prototype.type="rect";var Bm={fill:"#000"},Nm={style:Lr({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},vu.style)},Lm=function(e){function t(t){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=Bm,n.attr(t),n}return ze(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var n=this._children[t];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(t){var n=this.innerTransformable;return n?n.getLocalTransform(t):e.prototype.getLocalTransform.call(this,t)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,Hm(e=this.style),Ur(e.rich,Hm),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=t},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Ls(0,0,0,0),t=this._children,n=[],a=null,i=0;i<t.length;i++){var r=t[i],o=r.getBoundingRect(),s=r.getLocalTransform(n);s?(e.copy(o),e.applyTransform(s),(a=a||e.clone()).union(e)):(a=a||o.clone()).union(o)}this._rect=a||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||Bm},t.prototype.setTextContent=function(e){0},t.prototype._mergeStyle=function(e,t){if(!t)return e;var n=t.rich,a=e.rich||n&&{};return Nr(e,t),n&&a?(this._mergeRich(a,n),e.rich=a):a&&(e.rich=a),e},t.prototype._mergeRich=function(e,t){for(var n=Kr(t),a=0;a<n.length;a++){var i=n[a];e[i]=e[i]||{},Nr(e[i],t[i])}},t.prototype.getAnimationStyleProps=function(){return Nm},t.prototype._getOrCreateChild=function(e){var t=this._children[this._childCursor];return t&&t instanceof e||(t=new e),this._children[this._childCursor++]=t,t.__zr=this.__zr,t.parent=this,t},t.prototype._updatePlainTexts=function(){var e=this.style,t=e.font||gr,n=e.padding,a=function(e,t){null!=e&&(e+="");var n,a=t.overflow,i=t.padding,r=t.font,o="truncate"===a,s=Cc(r),l=uo(t.lineHeight,s),p=!!t.backgroundColor,c="truncate"===t.lineOverflow,d=t.width,u=(n=null==d||"break"!==a&&"breakAll"!==a?e?e.split("\n"):[]:e?gu(e,t.font,d,"breakAll"===a,0).lines:[]).length*l,m=uo(t.height,u);if(u>m&&c){var h=Math.floor(m/l);n=n.slice(0,h)}if(e&&o&&null!=d)for(var g=ou(d,r,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),f=0;f<n.length;f++)n[f]=su(n[f],g);var y=m,v=0;for(f=0;f<n.length;f++)v=Math.max(vc(n[f],r),v);null==d&&(d=v);var b=v;return i&&(y+=i[0]+i[2],b+=i[1]+i[3],d+=i[1]+i[3]),p&&(b=d),{lines:n,height:m,outerWidth:b,outerHeight:y,lineHeight:l,calculatedLineHeight:s,contentWidth:v,contentHeight:u,width:d}}(Ym(e),e),i=Xm(e),r=!!e.backgroundColor,o=a.outerHeight,s=a.outerWidth,l=a.contentWidth,p=a.lines,c=a.lineHeight,d=this._defaultStyle,u=e.x||0,m=e.y||0,h=e.align||d.align||"left",g=e.verticalAlign||d.verticalAlign||"top",f=u,y=Sc(m,a.contentHeight,g);if(i||n){var v=wc(u,s,h),b=Sc(m,o,g);i&&this._renderBackground(e,e,v,b,s,o)}y+=c/2,n&&(f=Km(u,h,n),"top"===g?y+=n[0]:"bottom"===g&&(y-=n[2]));for(var x=0,w=!1,S=($m("fill"in e?e.fill:(w=!0,d.fill))),C=(Wm("stroke"in e?e.stroke:r||d.autoStroke&&!w?null:(x=2,d.stroke))),_=e.textShadowBlur>0,T=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),I=a.calculatedLineHeight,E=0;E<p.length;E++){var M=this._getOrCreateChild(Tm),k=M.createStyle();M.useStyle(k),k.text=p[E],k.x=f,k.y=y,h&&(k.textAlign=h),k.textBaseline="middle",k.opacity=e.opacity,k.strokeFirst=!0,_&&(k.shadowBlur=e.textShadowBlur||0,k.shadowColor=e.textShadowColor||"transparent",k.shadowOffsetX=e.textShadowOffsetX||0,k.shadowOffsetY=e.textShadowOffsetY||0),k.stroke=C,k.fill=S,C&&(k.lineWidth=e.lineWidth||x,k.lineDash=e.lineDash,k.lineDashOffset=e.lineDashOffset||0),k.font=t,Um(k,e),y+=c,T&&M.setBoundingRect(new Ls(wc(k.x,e.width,k.textAlign),Sc(k.y,I,k.textBaseline),l,I))}},t.prototype._updateRichTexts=function(){var e=this.style,t=function(e,t){var n=new du;if(null!=e&&(e+=""),!e)return n;for(var a,i=t.width,r=t.height,o=t.overflow,s="break"!==o&&"breakAll"!==o||null==i?null:{width:i,accumWidth:0,breakAll:"breakAll"===o},l=iu.lastIndex=0;null!=(a=iu.exec(e));){var p=a.index;p>l&&uu(n,e.substring(l,p),t,s),uu(n,a[2],t,s,a[1]),l=iu.lastIndex}l<e.length&&uu(n,e.substring(l,e.length),t,s);var c=[],d=0,u=0,m=t.padding,h="truncate"===o,g="truncate"===t.lineOverflow;function f(e,t,n){e.width=t,e.lineHeight=n,d+=n,u=Math.max(u,t)}e:for(var y=0;y<n.lines.length;y++){for(var v=n.lines[y],b=0,x=0,w=0;w<v.tokens.length;w++){var S=(O=v.tokens[w]).styleName&&t.rich[O.styleName]||{},C=O.textPadding=S.padding,_=C?C[1]+C[3]:0,T=O.font=S.font||t.font;O.contentHeight=Cc(T);var I=uo(S.height,O.contentHeight);if(O.innerHeight=I,C&&(I+=C[0]+C[2]),O.height=I,O.lineHeight=mo(S.lineHeight,t.lineHeight,I),O.align=S&&S.align||t.align,O.verticalAlign=S&&S.verticalAlign||"middle",g&&null!=r&&d+O.lineHeight>r){w>0?(v.tokens=v.tokens.slice(0,w),f(v,x,b),n.lines=n.lines.slice(0,y+1)):n.lines=n.lines.slice(0,y);break e}var E=S.width,M=null==E||"auto"===E;if("string"==typeof E&&"%"===E.charAt(E.length-1))O.percentWidth=E,c.push(O),O.contentWidth=vc(O.text,T);else{if(M){var k=S.backgroundColor,P=k&&k.image;P&&au(P=eu(P))&&(O.width=Math.max(O.width,P.width*I/P.height))}var D=h&&null!=i?i-x:null;null!=D&&D<O.width?!M||D<_?(O.text="",O.width=O.contentWidth=0):(O.text=ru(O.text,D-_,T,t.ellipsis,{minChar:t.truncateMinChar}),O.width=O.contentWidth=vc(O.text,T)):O.contentWidth=vc(O.text,T)}O.width+=_,x+=O.width,S&&(b=Math.max(b,O.lineHeight))}f(v,x,b)}for(n.outerWidth=n.width=uo(i,u),n.outerHeight=n.height=uo(r,d),n.contentHeight=d,n.contentWidth=u,m&&(n.outerWidth+=m[1]+m[3],n.outerHeight+=m[0]+m[2]),y=0;y<c.length;y++){var O,A=(O=c[y]).percentWidth;O.width=parseInt(A,10)/100*n.width}return n}(Ym(e),e),n=t.width,a=t.outerWidth,i=t.outerHeight,r=e.padding,o=e.x||0,s=e.y||0,l=this._defaultStyle,p=e.align||l.align,c=e.verticalAlign||l.verticalAlign,d=wc(o,a,p),u=Sc(s,i,c),m=d,h=u;r&&(m+=r[3],h+=r[0]);var g=m+n;Xm(e)&&this._renderBackground(e,e,d,u,a,i);for(var f=!!e.backgroundColor,y=0;y<t.lines.length;y++){for(var v=t.lines[y],b=v.tokens,x=b.length,w=v.lineHeight,S=v.width,C=0,_=m,T=g,I=x-1,E=void 0;C<x&&(!(E=b[C]).align||"left"===E.align);)this._placeToken(E,e,w,h,_,"left",f),S-=E.width,_+=E.width,C++;for(;I>=0&&"right"===(E=b[I]).align;)this._placeToken(E,e,w,h,T,"right",f),S-=E.width,T-=E.width,I--;for(_+=(n-(_-m)-(g-T)-S)/2;C<=I;)E=b[C],this._placeToken(E,e,w,h,_+E.width/2,"center",f),_+=E.width,C++;h+=w}},t.prototype._placeToken=function(e,t,n,a,i,r,o){var s=t.rich[e.styleName]||{};s.text=e.text;var l=e.verticalAlign,p=a+n/2;"top"===l?p=a+e.height/2:"bottom"===l&&(p=a+n-e.height/2),!e.isLineHolder&&Xm(s)&&this._renderBackground(s,t,"right"===r?i-e.width:"center"===r?i-e.width/2:i,p-e.height/2,e.width,e.height);var c=!!s.backgroundColor,d=e.textPadding;d&&(i=Km(i,r,d),p-=e.height/2-d[0]-e.innerHeight/2);var u=this._getOrCreateChild(Tm),m=u.createStyle();u.useStyle(m);var h=this._defaultStyle,g=!1,f=0,y=$m("fill"in s?s.fill:"fill"in t?t.fill:(g=!0,h.fill)),v=Wm("stroke"in s?s.stroke:"stroke"in t?t.stroke:c||o||h.autoStroke&&!g?null:(f=2,h.stroke)),b=s.textShadowBlur>0||t.textShadowBlur>0;m.text=e.text,m.x=i,m.y=p,b&&(m.shadowBlur=s.textShadowBlur||t.textShadowBlur||0,m.shadowColor=s.textShadowColor||t.textShadowColor||"transparent",m.shadowOffsetX=s.textShadowOffsetX||t.textShadowOffsetX||0,m.shadowOffsetY=s.textShadowOffsetY||t.textShadowOffsetY||0),m.textAlign=r,m.textBaseline="middle",m.font=e.font||gr,m.opacity=mo(s.opacity,t.opacity,1),Um(m,s),v&&(m.lineWidth=mo(s.lineWidth,t.lineWidth,f),m.lineDash=uo(s.lineDash,t.lineDash),m.lineDashOffset=t.lineDashOffset||0,m.stroke=v),y&&(m.fill=y);var x=e.contentWidth,w=e.contentHeight;u.setBoundingRect(new Ls(wc(m.x,x,m.textAlign),Sc(m.y,w,m.textBaseline),x,w))},t.prototype._renderBackground=function(e,t,n,a,i,r){var o,s,l,p=e.backgroundColor,c=e.borderWidth,d=e.borderColor,u=p&&p.image,m=p&&!u,h=e.borderRadius,g=this;if(m||e.lineHeight||c&&d){(o=this._getOrCreateChild(Rm)).useStyle(o.createStyle()),o.style.fill=null;var f=o.shape;f.x=n,f.y=a,f.width=i,f.height=r,f.r=h,o.dirtyShape()}if(m)(l=o.style).fill=p||null,l.fillOpacity=uo(e.fillOpacity,1);else if(u){(s=this._getOrCreateChild(Mm)).onload=function(){g.dirtyStyle()};var y=s.style;y.image=p.image,y.x=n,y.y=a,y.width=i,y.height=r}c&&d&&((l=o.style).lineWidth=c,l.stroke=d,l.strokeOpacity=uo(e.strokeOpacity,1),l.lineDash=e.borderDash,l.lineDashOffset=e.borderDashOffset||0,o.strokeContainThreshold=0,o.hasFill()&&o.hasStroke()&&(l.strokeFirst=!0,l.lineWidth*=2));var v=(o||s).style;v.shadowBlur=e.shadowBlur||0,v.shadowColor=e.shadowColor||"transparent",v.shadowOffsetX=e.shadowOffsetX||0,v.shadowOffsetY=e.shadowOffsetY||0,v.opacity=mo(e.opacity,t.opacity,1)},t.makeFont=function(e){var t="";return jm(e)&&(t=[e.fontStyle,e.fontWeight,zm(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),t&&yo(t)||e.textFont||e.font},t}(wu),Vm={left:!0,right:1,center:1},qm={top:1,bottom:1,middle:1},Gm=["fontStyle","fontWeight","fontSize","fontFamily"];function zm(e){return"string"!=typeof e||-1===e.indexOf("px")&&-1===e.indexOf("rem")&&-1===e.indexOf("em")?isNaN(+e)?"12px":e+"px":e}function Um(e,t){for(var n=0;n<Gm.length;n++){var a=Gm[n],i=t[a];null!=i&&(e[a]=i)}}function jm(e){return null!=e.fontSize||e.fontFamily||e.fontWeight}function Hm(e){if(e){e.font=Lm.makeFont(e);var t=e.align;"middle"===t&&(t="center"),e.align=null==t||Vm[t]?t:"left";var n=e.verticalAlign;"center"===n&&(n="middle"),e.verticalAlign=null==n||qm[n]?n:"top",e.padding&&(e.padding=go(e.padding))}}function Wm(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function $m(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function Km(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function Ym(e){var t=e.text;return null!=t&&(t+=""),t}function Xm(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var Zm=Dd(),Qm=function(e,t,n,a){if(a){var i=Zm(a);i.dataIndex=n,i.dataType=t,i.seriesIndex=e,i.ssrType="chart","group"===a.type&&a.traverse((function(a){var i=Zm(a);i.seriesIndex=e,i.dataIndex=n,i.dataType=t,i.ssrType="chart"}))}},Jm=1,eh={},th=Dd(),nh=Dd(),ah=["emphasis","blur","select"],ih=["normal","emphasis","blur","select"],rh=10,oh="highlight",sh="downplay",lh="select",ph="unselect",ch="toggleSelect";function dh(e){return null!=e&&"none"!==e}function uh(e,t,n){e.onHoverStateChange&&(e.hoverState||0)!==n&&e.onHoverStateChange(t),e.hoverState=n}function mh(e){uh(e,"emphasis",2)}function hh(e){2===e.hoverState&&uh(e,"normal",0)}function gh(e){uh(e,"blur",1)}function fh(e){1===e.hoverState&&uh(e,"normal",0)}function yh(e){e.selected=!0}function vh(e){e.selected=!1}function bh(e,t,n){t(e,n)}function xh(e,t,n){bh(e,t,n),e.isGroup&&e.traverse((function(e){bh(e,t,n)}))}function wh(e,t){switch(t){case"emphasis":e.hoverState=2;break;case"normal":e.hoverState=0;break;case"blur":e.hoverState=1;break;case"select":e.selected=!0}}function Sh(e,t){var n=this.states[e];if(this.style){if("emphasis"===e)return function(e,t,n,a){var i=n&&Vr(n,"select")>=0,r=!1;if(e instanceof Cm){var o=th(e),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(dh(s)||dh(l)){var p=(a=a||{}).style||{};"inherit"===p.fill?(r=!0,a=Nr({},a),(p=Nr({},p)).fill=s):!dh(p.fill)&&dh(s)?(r=!0,a=Nr({},a),(p=Nr({},p)).fill=rp(s)):!dh(p.stroke)&&dh(l)&&(r||(a=Nr({},a),p=Nr({},p)),p.stroke=rp(l)),a.style=p}}if(a&&null==a.z2){r||(a=Nr({},a));var c=e.z2EmphasisLift;a.z2=e.z2+(null!=c?c:rh)}return a}(this,0,t,n);if("blur"===e)return function(e,t,n){var a=Vr(e.currentStates,t)>=0,i=e.style.opacity,r=a?null:function(e,t,n,a){for(var i=e.style,r={},o=0;o<t.length;o++){var s=t[o],l=i[s];r[s]=null==l?a&&a[s]:l}for(o=0;o<e.animators.length;o++){var p=e.animators[o];p.__fromStateTransition&&p.__fromStateTransition.indexOf(n)<0&&"style"===p.targetName&&p.saveTo(r,t)}return r}(e,["opacity"],t,{opacity:1}),o=(n=n||{}).style||{};return null==o.opacity&&(n=Nr({},n),o=Nr({opacity:a?i:.1*r.opacity},o),n.style=o),n}(this,e,n);if("select"===e)return function(e,t,n){if(n&&null==n.z2){n=Nr({},n);var a=e.z2SelectLift;n.z2=e.z2+(null!=a?a:9)}return n}(this,0,n)}return n}function Ch(e){e.stateProxy=Sh;var t=e.getTextContent(),n=e.getTextGuideLine();t&&(t.stateProxy=Sh),n&&(n.stateProxy=Sh)}function _h(e,t){!Oh(e,t)&&!e.__highByOuter&&xh(e,mh)}function Th(e,t){!Oh(e,t)&&!e.__highByOuter&&xh(e,hh)}function Ih(e,t){e.__highByOuter|=1<<(t||0),xh(e,mh)}function Eh(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&xh(e,hh)}function Mh(e){xh(e,gh)}function kh(e){xh(e,fh)}function Ph(e){xh(e,yh)}function Dh(e){xh(e,vh)}function Oh(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Ah(e){var t=e.getModel(),n=[],a=[];t.eachComponent((function(t,i){var r=nh(i),o="series"===t,s=o?e.getViewOfSeriesModel(i):e.getViewOfComponentModel(i);!o&&a.push(s),r.isBlured&&(s.group.traverse((function(e){fh(e)})),o&&n.push(i)),r.isBlured=!1})),Ur(a,(function(e){e&&e.toggleBlurSeries&&e.toggleBlurSeries(n,!1,t)}))}function Fh(e,t,n,a){var i=a.getModel();function r(e,t){for(var n=0;n<t.length;n++){var a=e.getItemGraphicEl(t[n]);a&&kh(a)}}if(n=n||"coordinateSystem",null!=e&&t&&"none"!==t){var o=i.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries((function(e){var i=o===e,p=e.coordinateSystem;if(p&&p.master&&(p=p.master),!("series"===n&&!i||"coordinateSystem"===n&&!(p&&s?p===s:i)||"series"===t&&i)){if(a.getViewOfSeriesModel(e).group.traverse((function(e){e.__highByOuter&&i&&"self"===t||gh(e)})),zr(t))r(e.getData(),t);else if(no(t))for(var c=Kr(t),d=0;d<c.length;d++)r(e.getData(c[d]),t[c[d]]);l.push(e),nh(e).isBlured=!0}})),i.eachComponent((function(e,t){if("series"!==e){var n=a.getViewOfComponentModel(t);n&&n.toggleBlurSeries&&n.toggleBlurSeries(l,!0,i)}}))}}function Rh(e,t,n){if(null!=e&&null!=t){var a=n.getModel().getComponent(e,t);if(a){nh(a).isBlured=!0;var i=n.getViewOfComponentModel(a);i&&i.focusBlurEnabled&&i.group.traverse((function(e){gh(e)}))}}}function Bh(e,t,n,a){var i={focusSelf:!1,dispatchers:null};if(null==e||"series"===e||null==t||null==n)return i;var r=a.getModel().getComponent(e,t);if(!r)return i;var o=a.getViewOfComponentModel(r);if(!o||!o.findHighDownDispatchers)return i;for(var s,l=o.findHighDownDispatchers(n),p=0;p<l.length;p++)if("self"===Zm(l[p]).focus){s=!0;break}return{focusSelf:s,dispatchers:l}}function Nh(e){Ur(e.getAllData(),(function(t){var n=t.data,a=t.type;n.eachItemGraphicEl((function(t,n){e.isSelected(n,a)?Ph(t):Dh(t)}))}))}function Lh(e){var t=[];return e.eachSeries((function(e){Ur(e.getAllData(),(function(n){n.data;var a=n.type,i=e.getSelectedDataIndices();if(i.length>0){var r={dataIndex:i,seriesIndex:e.seriesIndex};null!=a&&(r.dataType=a),t.push(r)}}))})),t}function Vh(e,t,n){Hh(e,!0),xh(e,Ch),Gh(e,t,n)}function qh(e,t,n,a){a?function(e){Hh(e,!1)}(e):Vh(e,t,n)}function Gh(e,t,n){var a=Zm(e);null!=t?(a.focus=t,a.blurScope=n):a.focus&&(a.focus=null)}var zh=["emphasis","blur","select"],Uh={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function jh(e,t,n,a){n=n||"itemStyle";for(var i=0;i<zh.length;i++){var r=zh[i],o=t.getModel([r,n]);e.ensureState(r).style=a?a(o):o[Uh[n]]()}}function Hh(e,t){var n=!1===t,a=e;e.highDownSilentOnTouch&&(a.__highDownSilentOnTouch=e.highDownSilentOnTouch),n&&!a.__highDownDispatcher||(a.__highByOuter=a.__highByOuter||0,a.__highDownDispatcher=!n)}function Wh(e){return!(!e||!e.__highDownDispatcher)}function $h(e){var t=e.type;return t===lh||t===ph||t===ch}function Kh(e){var t=e.type;return t===oh||t===sh}var Yh=am.CMD,Xh=[[],[],[]],Zh=Math.sqrt,Qh=Math.atan2;function Jh(e,t){if(t){var n,a,i,r,o,s,l=e.data,p=e.len(),c=Yh.M,d=Yh.C,u=Yh.L,m=Yh.R,h=Yh.A,g=Yh.Q;for(i=0,r=0;i<p;){switch(n=l[i++],r=i,a=0,n){case c:case u:a=1;break;case d:a=3;break;case g:a=2;break;case h:var f=t[4],y=t[5],v=Zh(t[0]*t[0]+t[1]*t[1]),b=Zh(t[2]*t[2]+t[3]*t[3]),x=Qh(-t[1]/b,t[0]/v);l[i]*=v,l[i++]+=f,l[i]*=b,l[i++]+=y,l[i++]*=v,l[i++]*=b,l[i++]+=x,l[i++]+=x,r=i+=2;break;case m:s[0]=l[i++],s[1]=l[i++],Wo(s,s,t),l[r++]=s[0],l[r++]=s[1],s[0]+=l[i++],s[1]+=l[i++],Wo(s,s,t),l[r++]=s[0],l[r++]=s[1]}for(o=0;o<a;o++){var w=Xh[o];w[0]=l[i++],w[1]=l[i++],Wo(w,w,t),l[r++]=w[0],l[r++]=w[1]}}e.increaseVersion()}}var eg=Math.sqrt,tg=Math.sin,ng=Math.cos,ag=Math.PI;function ig(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function rg(e,t){return(e[0]*t[0]+e[1]*t[1])/(ig(e)*ig(t))}function og(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(rg(e,t))}function sg(e,t,n,a,i,r,o,s,l,p,c){var d=l*(ag/180),u=ng(d)*(e-n)/2+tg(d)*(t-a)/2,m=-1*tg(d)*(e-n)/2+ng(d)*(t-a)/2,h=u*u/(o*o)+m*m/(s*s);h>1&&(o*=eg(h),s*=eg(h));var g=(i===r?-1:1)*eg((o*o*(s*s)-o*o*(m*m)-s*s*(u*u))/(o*o*(m*m)+s*s*(u*u)))||0,f=g*o*m/s,y=g*-s*u/o,v=(e+n)/2+ng(d)*f-tg(d)*y,b=(t+a)/2+tg(d)*f+ng(d)*y,x=og([1,0],[(u-f)/o,(m-y)/s]),w=[(u-f)/o,(m-y)/s],S=[(-1*u-f)/o,(-1*m-y)/s],C=og(w,S);if(rg(w,S)<=-1&&(C=ag),rg(w,S)>=1&&(C=0),C<0){var _=Math.round(C/ag*1e6)/1e6;C=2*ag+_%2*ag}c.addData(p,v,b,o,s,x,C,d,r)}var lg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,pg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var cg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.applyTransform=function(e){},t}(Cm);function dg(e){return null!=e.setData}function ug(e,t){var n=function(e){var t=new am;if(!e)return t;var n,a=0,i=0,r=a,o=i,s=am.CMD,l=e.match(lg);if(!l)return t;for(var p=0;p<l.length;p++){for(var c=l[p],d=c.charAt(0),u=void 0,m=c.match(pg)||[],h=m.length,g=0;g<h;g++)m[g]=parseFloat(m[g]);for(var f=0;f<h;){var y=void 0,v=void 0,b=void 0,x=void 0,w=void 0,S=void 0,C=void 0,_=a,T=i,I=void 0,E=void 0;switch(d){case"l":a+=m[f++],i+=m[f++],u=s.L,t.addData(u,a,i);break;case"L":a=m[f++],i=m[f++],u=s.L,t.addData(u,a,i);break;case"m":a+=m[f++],i+=m[f++],u=s.M,t.addData(u,a,i),r=a,o=i,d="l";break;case"M":a=m[f++],i=m[f++],u=s.M,t.addData(u,a,i),r=a,o=i,d="L";break;case"h":a+=m[f++],u=s.L,t.addData(u,a,i);break;case"H":a=m[f++],u=s.L,t.addData(u,a,i);break;case"v":i+=m[f++],u=s.L,t.addData(u,a,i);break;case"V":i=m[f++],u=s.L,t.addData(u,a,i);break;case"C":u=s.C,t.addData(u,m[f++],m[f++],m[f++],m[f++],m[f++],m[f++]),a=m[f-2],i=m[f-1];break;case"c":u=s.C,t.addData(u,m[f++]+a,m[f++]+i,m[f++]+a,m[f++]+i,m[f++]+a,m[f++]+i),a+=m[f-2],i+=m[f-1];break;case"S":y=a,v=i,I=t.len(),E=t.data,n===s.C&&(y+=a-E[I-4],v+=i-E[I-3]),u=s.C,_=m[f++],T=m[f++],a=m[f++],i=m[f++],t.addData(u,y,v,_,T,a,i);break;case"s":y=a,v=i,I=t.len(),E=t.data,n===s.C&&(y+=a-E[I-4],v+=i-E[I-3]),u=s.C,_=a+m[f++],T=i+m[f++],a+=m[f++],i+=m[f++],t.addData(u,y,v,_,T,a,i);break;case"Q":_=m[f++],T=m[f++],a=m[f++],i=m[f++],u=s.Q,t.addData(u,_,T,a,i);break;case"q":_=m[f++]+a,T=m[f++]+i,a+=m[f++],i+=m[f++],u=s.Q,t.addData(u,_,T,a,i);break;case"T":y=a,v=i,I=t.len(),E=t.data,n===s.Q&&(y+=a-E[I-4],v+=i-E[I-3]),a=m[f++],i=m[f++],u=s.Q,t.addData(u,y,v,a,i);break;case"t":y=a,v=i,I=t.len(),E=t.data,n===s.Q&&(y+=a-E[I-4],v+=i-E[I-3]),a+=m[f++],i+=m[f++],u=s.Q,t.addData(u,y,v,a,i);break;case"A":b=m[f++],x=m[f++],w=m[f++],S=m[f++],C=m[f++],sg(_=a,T=i,a=m[f++],i=m[f++],S,C,b,x,w,u=s.A,t);break;case"a":b=m[f++],x=m[f++],w=m[f++],S=m[f++],C=m[f++],sg(_=a,T=i,a+=m[f++],i+=m[f++],S,C,b,x,w,u=s.A,t)}}"z"!==d&&"Z"!==d||(u=s.Z,t.addData(u),a=r,i=o),n=u}return t.toStatic(),t}(e),a=Nr({},t);return a.buildPath=function(e){if(dg(e)){e.setData(n.data),(t=e.getContext())&&e.rebuildPath(t,1)}else{var t=e;n.rebuildPath(t,1)}},a.applyTransform=function(e){Jh(n,e),this.dirtyShape()},a}function mg(e,t){return new cg(ug(e,t))}var hg=function(){this.cx=0,this.cy=0,this.r=0},gg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new hg},t.prototype.buildPath=function(e,t){e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI)},t}(Cm);gg.prototype.type="circle";var fg=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},yg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new fg},t.prototype.buildPath=function(e,t){var n=.5522848,a=t.cx,i=t.cy,r=t.rx,o=t.ry,s=r*n,l=o*n;e.moveTo(a-r,i),e.bezierCurveTo(a-r,i-l,a-s,i-o,a,i-o),e.bezierCurveTo(a+s,i-o,a+r,i-l,a+r,i),e.bezierCurveTo(a+r,i+l,a+s,i+o,a,i+o),e.bezierCurveTo(a-s,i+o,a-r,i+l,a-r,i),e.closePath()},t}(Cm);yg.prototype.type="ellipse";var vg=Math.PI,bg=2*vg,xg=Math.sin,wg=Math.cos,Sg=Math.acos,Cg=Math.atan2,_g=Math.abs,Tg=Math.sqrt,Ig=Math.max,Eg=Math.min,Mg=1e-4;function kg(e,t,n,a,i,r,o){var s=e-n,l=t-a,p=(o?r:-r)/Tg(s*s+l*l),c=p*l,d=-p*s,u=e+c,m=t+d,h=n+c,g=a+d,f=(u+h)/2,y=(m+g)/2,v=h-u,b=g-m,x=v*v+b*b,w=i-r,S=u*g-h*m,C=(b<0?-1:1)*Tg(Ig(0,w*w*x-S*S)),_=(S*b-v*C)/x,T=(-S*v-b*C)/x,I=(S*b+v*C)/x,E=(-S*v+b*C)/x,M=_-f,k=T-y,P=I-f,D=E-y;return M*M+k*k>P*P+D*D&&(_=I,T=E),{cx:_,cy:T,x0:-c,y0:-d,x1:_*(i/w-1),y1:T*(i/w-1)}}function Pg(e,t){var n,a=Ig(t.r,0),i=Ig(t.r0||0,0),r=a>0;if(r||i>0){if(r||(a=i,i=0),i>a){var o=a;a=i,i=o}var s=t.startAngle,l=t.endAngle;if(!isNaN(s)&&!isNaN(l)){var p=t.cx,c=t.cy,d=!!t.clockwise,u=_g(l-s),m=u>bg&&u%bg;if(m>Mg&&(u=m),a>Mg)if(u>bg-Mg)e.moveTo(p+a*wg(s),c+a*xg(s)),e.arc(p,c,a,s,l,!d),i>Mg&&(e.moveTo(p+i*wg(l),c+i*xg(l)),e.arc(p,c,i,l,s,d));else{var h=void 0,g=void 0,f=void 0,y=void 0,v=void 0,b=void 0,x=void 0,w=void 0,S=void 0,C=void 0,_=void 0,T=void 0,I=void 0,E=void 0,M=void 0,k=void 0,P=a*wg(s),D=a*xg(s),O=i*wg(l),A=i*xg(l),F=u>Mg;if(F){var R=t.cornerRadius;R&&(n=function(e){var t;if(Zr(e)){var n=e.length;if(!n)return e;t=1===n?[e[0],e[0],0,0]:2===n?[e[0],e[0],e[1],e[1]]:3===n?e.concat(e[2]):e}else t=[e,e,e,e];return t}(R),h=n[0],g=n[1],f=n[2],y=n[3]);var B=_g(a-i)/2;if(v=Eg(B,f),b=Eg(B,y),x=Eg(B,h),w=Eg(B,g),_=S=Ig(v,b),T=C=Ig(x,w),(S>Mg||C>Mg)&&(I=a*wg(l),E=a*xg(l),M=i*wg(s),k=i*xg(s),u<vg)){var N=function(e,t,n,a,i,r,o,s){var l=n-e,p=a-t,c=o-i,d=s-r,u=d*l-c*p;if(!(u*u<Mg))return[e+(u=(c*(t-r)-d*(e-i))/u)*l,t+u*p]}(P,D,M,k,I,E,O,A);if(N){var L=P-N[0],V=D-N[1],q=I-N[0],G=E-N[1],z=1/xg(Sg((L*q+V*G)/(Tg(L*L+V*V)*Tg(q*q+G*G)))/2),U=Tg(N[0]*N[0]+N[1]*N[1]);_=Eg(S,(a-U)/(z+1)),T=Eg(C,(i-U)/(z-1))}}}if(F)if(_>Mg){var j=Eg(f,_),H=Eg(y,_),W=kg(M,k,P,D,a,j,d),$=kg(I,E,O,A,a,H,d);e.moveTo(p+W.cx+W.x0,c+W.cy+W.y0),_<S&&j===H?e.arc(p+W.cx,c+W.cy,_,Cg(W.y0,W.x0),Cg($.y0,$.x0),!d):(j>0&&e.arc(p+W.cx,c+W.cy,j,Cg(W.y0,W.x0),Cg(W.y1,W.x1),!d),e.arc(p,c,a,Cg(W.cy+W.y1,W.cx+W.x1),Cg($.cy+$.y1,$.cx+$.x1),!d),H>0&&e.arc(p+$.cx,c+$.cy,H,Cg($.y1,$.x1),Cg($.y0,$.x0),!d))}else e.moveTo(p+P,c+D),e.arc(p,c,a,s,l,!d);else e.moveTo(p+P,c+D);if(i>Mg&&F)if(T>Mg){j=Eg(h,T),W=kg(O,A,I,E,i,-(H=Eg(g,T)),d),$=kg(P,D,M,k,i,-j,d);e.lineTo(p+W.cx+W.x0,c+W.cy+W.y0),T<C&&j===H?e.arc(p+W.cx,c+W.cy,T,Cg(W.y0,W.x0),Cg($.y0,$.x0),!d):(H>0&&e.arc(p+W.cx,c+W.cy,H,Cg(W.y0,W.x0),Cg(W.y1,W.x1),!d),e.arc(p,c,i,Cg(W.cy+W.y1,W.cx+W.x1),Cg($.cy+$.y1,$.cx+$.x1),d),j>0&&e.arc(p+$.cx,c+$.cy,j,Cg($.y1,$.x1),Cg($.y0,$.x0),!d))}else e.lineTo(p+O,c+A),e.arc(p,c,i,l,s,d);else e.lineTo(p+O,c+A)}else e.moveTo(p,c);e.closePath()}}}var Dg=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Og=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new Dg},t.prototype.buildPath=function(e,t){Pg(e,t)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Cm);Og.prototype.type="sector";var Ag=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Fg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new Ag},t.prototype.buildPath=function(e,t){var n=t.cx,a=t.cy,i=2*Math.PI;e.moveTo(n+t.r,a),e.arc(n,a,t.r,0,i,!1),e.moveTo(n+t.r0,a),e.arc(n,a,t.r0,0,i,!0)},t}(Cm);function Rg(e,t,n){var a=t.smooth,i=t.points;if(i&&i.length>=2){if(a){var r=function(e,t,n,a){var i,r,o,s,l=[],p=[],c=[],d=[];if(a){o=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,m=e.length;u<m;u++)$o(o,o,e[u]),Ko(s,s,e[u]);$o(o,o,a[0]),Ko(s,s,a[1])}for(u=0,m=e.length;u<m;u++){var h=e[u];if(n)i=e[u?u-1:m-1],r=e[(u+1)%m];else{if(0===u||u===m-1){l.push(Ao(e[u]));continue}i=e[u-1],r=e[u+1]}Bo(p,r,i),Vo(p,p,t);var g=Go(h,i),f=Go(h,r),y=g+f;0!==y&&(g/=y,f/=y),Vo(c,p,-g),Vo(d,p,f);var v=Fo([],h,c),b=Fo([],h,d);a&&(Ko(v,v,o),$o(v,v,s),Ko(b,b,o),$o(b,b,s)),l.push(v),l.push(b)}return n&&l.push(l.shift()),l}(i,a,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=r[2*s],p=r[2*s+1],c=i[(s+1)%o];e.bezierCurveTo(l[0],l[1],p[0],p[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);s=1;for(var d=i.length;s<d;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}Fg.prototype.type="ring";var Bg=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Ng=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new Bg},t.prototype.buildPath=function(e,t){Rg(e,t,!0)},t}(Cm);Ng.prototype.type="polygon";var Lg=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Vg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Lg},t.prototype.buildPath=function(e,t){Rg(e,t,!1)},t}(Cm);Vg.prototype.type="polyline";var qg={},Gg=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},zg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Gg},t.prototype.buildPath=function(e,t){var n,a,i,r;if(this.subPixelOptimize){var o=Pm(qg,t,this.style);n=o.x1,a=o.y1,i=o.x2,r=o.y2}else n=t.x1,a=t.y1,i=t.x2,r=t.y2;var s=t.percent;0!==s&&(e.moveTo(n,a),s<1&&(i=n*(1-s)+i*s,r=a*(1-s)+r*s),e.lineTo(i,r))},t.prototype.pointAt=function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]},t}(Cm);zg.prototype.type="line";var Ug=[],jg=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Hg(e,t,n){var a=e.cpx2,i=e.cpy2;return null!=a||null!=i?[(n?bl:vl)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?bl:vl)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Il:Tl)(e.x1,e.cpx1,e.x2,t),(n?Il:Tl)(e.y1,e.cpy1,e.y2,t)]}var Wg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jg},t.prototype.buildPath=function(e,t){var n=t.x1,a=t.y1,i=t.x2,r=t.y2,o=t.cpx1,s=t.cpy1,l=t.cpx2,p=t.cpy2,c=t.percent;0!==c&&(e.moveTo(n,a),null==l||null==p?(c<1&&(Ml(n,o,i,c,Ug),o=Ug[1],i=Ug[2],Ml(a,s,r,c,Ug),s=Ug[1],r=Ug[2]),e.quadraticCurveTo(o,s,i,r)):(c<1&&(Sl(n,o,l,i,c,Ug),o=Ug[1],l=Ug[2],i=Ug[3],Sl(a,s,p,r,c,Ug),s=Ug[1],p=Ug[2],r=Ug[3]),e.bezierCurveTo(o,s,l,p,i,r)))},t.prototype.pointAt=function(e){return Hg(this.shape,e,!1)},t.prototype.tangentAt=function(e){var t=Hg(this.shape,e,!0);return qo(t,t)},t}(Cm);Wg.prototype.type="bezier-curve";var $g=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Kg=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new $g},t.prototype.buildPath=function(e,t){var n=t.cx,a=t.cy,i=Math.max(t.r,0),r=t.startAngle,o=t.endAngle,s=t.clockwise,l=Math.cos(r),p=Math.sin(r);e.moveTo(l*i+n,p*i+a),e.arc(n,a,i,r,o,!s)},t}(Cm);Kg.prototype.type="arc";var Yg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="compound",t}return ze(t,e),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,t=this.shapeChanged(),n=0;n<e.length;n++)t=t||e[n].shapeChanged();t&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,t){for(var n=t.paths||[],a=0;a<n.length;a++)n[a].buildPath(e,n[a].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Cm.prototype.getBoundingRect.call(this)},t}(Cm),Xg=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}(),Zg=function(e){function t(t,n,a,i,r,o){var s=e.call(this,r)||this;return s.x=null==t?0:t,s.y=null==n?0:n,s.x2=null==a?1:a,s.y2=null==i?0:i,s.type="linear",s.global=o||!1,s}return ze(t,e),t}(Xg),Qg=function(e){function t(t,n,a,i,r){var o=e.call(this,i)||this;return o.x=null==t?.5:t,o.y=null==n?.5:n,o.r=null==a?.5:a,o.type="radial",o.global=r||!1,o}return ze(t,e),t}(Xg),Jg=[0,0],ef=[0,0],tf=new ks,nf=new ks,af=function(){function e(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new ks;for(n=0;n<2;n++)this._axes[n]=new ks;e&&this.fromBoundingRect(e,t)}return e.prototype.fromBoundingRect=function(e,t){var n=this._corners,a=this._axes,i=e.x,r=e.y,o=i+e.width,s=r+e.height;if(n[0].set(i,r),n[1].set(o,r),n[2].set(o,s),n[3].set(i,s),t)for(var l=0;l<4;l++)n[l].transform(t);ks.sub(a[0],n[1],n[0]),ks.sub(a[1],n[3],n[0]),a[0].normalize(),a[1].normalize();for(l=0;l<2;l++)this._origin[l]=a[l].dot(n[0])},e.prototype.intersect=function(e,t){var n=!0,a=!t;return tf.set(1/0,1/0),nf.set(0,0),!this._intersectCheckOneSide(this,e,tf,nf,a,1)&&(n=!1,a)||!this._intersectCheckOneSide(e,this,tf,nf,a,-1)&&(n=!1,a)||a||ks.copy(t,n?tf:nf),n},e.prototype._intersectCheckOneSide=function(e,t,n,a,i,r){for(var o=!0,s=0;s<2;s++){var l=this._axes[s];if(this._getProjMinMaxOnAxis(s,e._corners,Jg),this._getProjMinMaxOnAxis(s,t._corners,ef),Jg[1]<ef[0]||Jg[0]>ef[1]){if(o=!1,i)return o;var p=Math.abs(ef[0]-Jg[1]),c=Math.abs(Jg[0]-ef[1]);Math.min(p,c)>a.len()&&(p<c?ks.scale(a,l,-p*r):ks.scale(a,l,c*r))}else if(n){p=Math.abs(ef[0]-Jg[1]),c=Math.abs(Jg[0]-ef[1]);Math.min(p,c)<n.len()&&(p<c?ks.scale(n,l,p*r):ks.scale(n,l,-c*r))}}return o},e.prototype._getProjMinMaxOnAxis=function(e,t,n){for(var a=this._axes[e],i=this._origin,r=t[0].dot(a)+i[e],o=r,s=r,l=1;l<t.length;l++){var p=t[l].dot(a)+i[e];o=Math.min(p,o),s=Math.max(p,s)}n[0]=o,n[1]=s},e}(),rf=[],of=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return ze(t,e),t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){(t=this._displayables[e]).parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Ls(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],a=n.getBoundingRect().clone();n.needLocalTransform()&&a.applyTransform(n.getLocalTransform(rf)),e.union(a)}this._rect=e}return this._rect},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var a=0;a<this._displayables.length;a++){if(this._displayables[a].contain(e,t))return!0}return!1},t}(wu),sf=Dd();function lf(e,t,n,a,i){var r;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();r=o&&o.animation}var s="update"===e;if(t&&t.isAnimationEnabled()){var l=void 0,p=void 0,c=void 0;return a?(l=uo(a.duration,200),p=uo(a.easing,"cubicOut"),c=0):(l=t.getShallow(s?"animationDurationUpdate":"animationDuration"),p=t.getShallow(s?"animationEasingUpdate":"animationEasing"),c=t.getShallow(s?"animationDelayUpdate":"animationDelay")),r&&(null!=r.duration&&(l=r.duration),null!=r.easing&&(p=r.easing),null!=r.delay&&(c=r.delay)),Qr(c)&&(c=c(n,i)),Qr(l)&&(l=l(n)),{duration:l||0,delay:c,easing:p}}return null}function pf(e,t,n,a,i,r,o){var s,l=!1;Qr(i)?(o=r,r=i,i=null):no(i)&&(r=i.cb,o=i.during,l=i.isFrom,s=i.removeOpt,i=i.dataIndex);var p="leave"===e;p||t.stopAnimation("leave");var c=lf(e,a,i,p?s||{}:null,a&&a.getAnimationDelayParams?a.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var d={duration:c.duration,delay:c.delay||0,easing:c.easing,done:r,force:!!r||!!o,setToFinal:!p,scope:e,during:o};l?t.animateFrom(n,d):t.animateTo(n,d)}else t.stopAnimation(),!l&&t.attr(n),o&&o(1),r&&r()}function cf(e,t,n,a,i,r){pf("update",e,t,n,a,i,r)}function df(e,t,n,a,i,r){pf("enter",e,t,n,a,i,r)}function uf(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){if("leave"===e.animators[t].scope)return!0}return!1}function mf(e,t,n,a,i,r){uf(e)||pf("leave",e,t,n,a,i,r)}function hf(e,t,n,a){e.removeTextContent(),e.removeTextGuideLine(),mf(e,{style:{opacity:0}},t,n,a)}function gf(e,t,n){function a(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse((function(e){e.isGroup||hf(e,t,n,a)})):hf(e,t,n,a)}function ff(e){sf(e).oldStyle=e.style}var yf=Math.max,vf=Math.min,bf={};function xf(e){return Cm.extend(e)}var wf=function(e,t){var n=ug(e,t);return function(e){function t(t){var a=e.call(this,t)||this;return a.applyTransform=n.applyTransform,a.buildPath=n.buildPath,a}return ze(t,e),t}(cg)};function Sf(e,t){return wf(e,t)}function Cf(e,t){bf[e]=t}function _f(e){if(bf.hasOwnProperty(e))return bf[e]}function Tf(e,t,n,a){var i=mg(e,t);return n&&("center"===a&&(n=Ef(n,i.getBoundingRect())),kf(i,n)),i}function If(e,t,n){var a=new Mm({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===n){var i={width:e.width,height:e.height};a.setStyle(Ef(t,i))}}});return a}function Ef(e,t){var n,a=t.width/t.height,i=e.height*a;return n=i<=e.width?e.height:(i=e.width)/a,{x:e.x+e.width/2-i/2,y:e.y+e.height/2-n/2,width:i,height:n}}var Mf=function(e,t){for(var n=[],a=e.length,i=0;i<a;i++){var r=e[i];n.push(r.getUpdatedPathProxy(!0))}var o=new Cm(t);return o.createPathProxy(),o.buildPath=function(e){if(dg(e)){e.appendPath(n);var t=e.getContext();t&&e.rebuildPath(t,1)}},o};function kf(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}function Pf(e,t){return Pm(e,e,{lineWidth:t}),e}var Df=Om;function Of(e,t){for(var n=ws([]);e&&e!==t;)Cs(n,e.getLocalTransform(),n),e=e.parent;return n}function Af(e,t,n){return t&&!zr(t)&&(t=hc.getLocalTransform(t)),n&&(t=Es([],t)),Wo([],e,t)}function Ff(e,t,n){var a=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),i=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),r=["left"===e?-a:"right"===e?a:0,"top"===e?-i:"bottom"===e?i:0];return r=Af(r,t,n),Math.abs(r[0])>Math.abs(r[1])?r[0]>0?"right":"left":r[1]>0?"bottom":"top"}function Rf(e){return!e.isGroup}function Bf(e,t,n){if(e&&t){var a,i=(a={},e.traverse((function(e){Rf(e)&&e.anid&&(a[e.anid]=e)})),a);t.traverse((function(e){if(Rf(e)&&e.anid){var t=i[e.anid];if(t){var a=r(e);e.attr(r(t)),cf(e,a,n,Zm(e).dataIndex)}}}))}function r(e){var t={x:e.x,y:e.y,rotation:e.rotation};return function(e){return null!=e.shape}(e)&&(t.shape=Nr({},e.shape)),t}}function Nf(e,t){return jr(e,(function(e){var n=e[0];n=yf(n,t.x),n=vf(n,t.x+t.width);var a=e[1];return a=yf(a,t.y),[n,a=vf(a,t.y+t.height)]}))}function Lf(e,t){var n=yf(e.x,t.x),a=vf(e.x+e.width,t.x+t.width),i=yf(e.y,t.y),r=vf(e.y+e.height,t.y+t.height);if(a>=n&&r>=i)return{x:n,y:i,width:a-n,height:r-i}}function Vf(e,t,n){var a=Nr({rectHover:!0},t),i=a.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),Lr(i,n),new Mm(a)):Tf(e.replace("path://",""),a,n,"center")}function qf(e,t,n,a,i){for(var r=0,o=i[i.length-1];r<i.length;r++){var s=i[r];if(Gf(e,t,n,a,s[0],s[1],o[0],o[1]))return!0;o=s}}function Gf(e,t,n,a,i,r,o,s){var l,p=n-e,c=a-t,d=o-i,u=s-r,m=zf(d,u,p,c);if((l=m)<=1e-6&&l>=-1e-6)return!1;var h=e-i,g=t-r,f=zf(h,g,p,c)/m;if(f<0||f>1)return!1;var y=zf(h,g,d,u)/m;return!(y<0||y>1)}function zf(e,t,n,a){return e*a-n*t}function Uf(e){var t=e.itemTooltipOption,n=e.componentModel,a=e.itemName,i=Jr(t)?{formatter:t}:t,r=n.mainType,o=n.componentIndex,s={componentType:r,name:a,$vars:["name"]};s[r+"Index"]=o;var l=e.formatterParamsExtra;l&&Ur(Kr(l),(function(e){Mo(s,e)||(s[e]=l[e],s.$vars.push(e))}));var p=Zm(e.el);p.componentMainType=r,p.componentIndex=o,p.tooltipConfig={name:a,option:Lr({content:a,formatterParams:s},i)}}function jf(e,t){var n;e.isGroup&&(n=t(e)),n||e.traverse(t)}function Hf(e,t){if(e)if(Zr(e))for(var n=0;n<e.length;n++)jf(e[n],t);else jf(e,t)}Cf("circle",gg),Cf("ellipse",yg),Cf("sector",Og),Cf("ring",Fg),Cf("polygon",Ng),Cf("polyline",Vg),Cf("rect",Rm),Cf("line",zg),Cf("bezierCurve",Wg),Cf("arc",Kg);var Wf=Object.freeze({__proto__:null,Arc:Kg,BezierCurve:Wg,BoundingRect:Ls,Circle:gg,CompoundPath:Yg,Ellipse:yg,Group:Bc,Image:Mm,IncrementalDisplayable:of,Line:zg,LinearGradient:Zg,OrientedBoundingRect:af,Path:Cm,Point:ks,Polygon:Ng,Polyline:Vg,RadialGradient:Qg,Rect:Rm,Ring:Fg,Sector:Og,Text:Lm,applyTransform:Af,clipPointsByRect:Nf,clipRectByRect:Lf,createIcon:Vf,extendPath:Sf,extendShape:xf,getShapeClass:_f,getTransform:Of,groupTransition:Bf,initProps:df,isElementRemoved:uf,lineLineIntersect:Gf,linePolygonIntersect:qf,makeImage:If,makePath:Tf,mergePath:Mf,registerShape:Cf,removeElement:mf,removeElementWithFadeOut:gf,resizePath:kf,setTooltipConfig:Uf,subPixelOptimize:Df,subPixelOptimizeLine:Pf,subPixelOptimizeRect:function(e){return Dm(e.shape,e.shape,e.style),e},transformDirection:Ff,traverseElements:Hf,updateProps:cf}),$f={};function Kf(e,t){for(var n=0;n<ah.length;n++){var a=ah[n],i=t[a],r=e.ensureState(a);r.style=r.style||{},r.style.text=i}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function Yf(e,t,n){var a,i=e.labelFetcher,r=e.labelDataIndex,o=e.labelDimIndex,s=t.normal;i&&(a=i.getFormattedLabel(r,"normal",null,o,s&&s.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==a&&(a=Qr(e.defaultText)?e.defaultText(r,e,n):e.defaultText);for(var l={normal:a},p=0;p<ah.length;p++){var c=ah[p],d=t[c];l[c]=uo(i?i.getFormattedLabel(r,c,null,o,d&&d.get("formatter")):null,a)}return l}function Xf(e,t,n,a){n=n||$f;for(var i=e instanceof Lm,r=!1,o=0;o<ih.length;o++){if((u=t[ih[o]])&&u.getShallow("show")){r=!0;break}}var s=i?e:e.getTextContent();if(r){i||(s||(s=new Lm,e.setTextContent(s)),e.stateProxy&&(s.stateProxy=e.stateProxy));var l=Yf(n,t),p=t.normal,c=!!p.getShallow("show"),d=Qf(p,a&&a.normal,n,!1,!i);d.text=l.normal,i||e.setTextConfig(Jf(p,n,!1));for(o=0;o<ah.length;o++){var u,m=ah[o];if(u=t[m]){var h=s.ensureState(m),g=!!uo(u.getShallow("show"),c);if(g!==c&&(h.ignore=!g),h.style=Qf(u,a&&a[m],n,!0,!i),h.style.text=l[m],!i)e.ensureState(m).textConfig=Jf(u,n,!0)}}s.silent=!!p.getShallow("silent"),null!=s.style.x&&(d.x=s.style.x),null!=s.style.y&&(d.y=s.style.y),s.ignore=!c,s.useStyle(d),s.dirty(),n.enableTextSetter&&(ry(s).setLabelText=function(e){var a=Yf(n,t,e);Kf(s,a)})}else s&&(s.ignore=!0);e.dirty()}function Zf(e,t){t=t||"label";for(var n={normal:e.getModel(t)},a=0;a<ah.length;a++){var i=ah[a];n[i]=e.getModel([i,t])}return n}function Qf(e,t,n,a,i){var r={};return function(e,t,n,a,i){n=n||$f;var r,o=t.ecModel,s=o&&o.option.textStyle,l=function(e){var t;for(;e&&e!==e.ecModel;){var n=(e.option||$f).rich;if(n){t=t||{};for(var a=Kr(n),i=0;i<a.length;i++){t[a[i]]=1}}e=e.parentModel}return t}(t);if(l)for(var p in r={},l)if(l.hasOwnProperty(p)){var c=t.getModel(["rich",p]);ay(r[p]={},c,s,n,a,i,!1,!0)}r&&(e.rich=r);var d=t.get("overflow");d&&(e.overflow=d);var u=t.get("minMargin");null!=u&&(e.margin=u);ay(e,t,s,n,a,i,!0,!1)}(r,e,n,a,i),t&&Nr(r,t),r}function Jf(e,t,n){t=t||{};var a,i={},r=e.getShallow("rotate"),o=uo(e.getShallow("distance"),n?null:5),s=e.getShallow("offset");return"outside"===(a=e.getShallow("position")||(n?null:"inside"))&&(a=t.defaultOutsidePosition||"top"),null!=a&&(i.position=a),null!=s&&(i.offset=s),null!=r&&(r*=Math.PI/180,i.rotation=r),null!=o&&(i.distance=o),i.outsideFill="inherit"===e.get("color")?t.inheritColor||null:"auto",i}var ey=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],ty=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],ny=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function ay(e,t,n,a,i,r,o,s){n=!i&&n||$f;var l=a&&a.inheritColor,p=t.getShallow("color"),c=t.getShallow("textBorderColor"),d=uo(t.getShallow("opacity"),n.opacity);"inherit"!==p&&"auto"!==p||(p=l||null),"inherit"!==c&&"auto"!==c||(c=l||null),r||(p=p||n.color,c=c||n.textBorderColor),null!=p&&(e.fill=p),null!=c&&(e.stroke=c);var u=uo(t.getShallow("textBorderWidth"),n.textBorderWidth);null!=u&&(e.lineWidth=u);var m=uo(t.getShallow("textBorderType"),n.textBorderType);null!=m&&(e.lineDash=m);var h=uo(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=h&&(e.lineDashOffset=h),i||null!=d||s||(d=a&&a.defaultOpacity),null!=d&&(e.opacity=d),i||r||null==e.fill&&a.inheritColor&&(e.fill=a.inheritColor);for(var g=0;g<ey.length;g++){var f=ey[g];null!=(v=uo(t.getShallow(f),n[f]))&&(e[f]=v)}for(g=0;g<ty.length;g++){f=ty[g];null!=(v=t.getShallow(f))&&(e[f]=v)}if(null==e.verticalAlign){var y=t.getShallow("baseline");null!=y&&(e.verticalAlign=y)}if(!o||!a.disableBox){for(g=0;g<ny.length;g++){var v;f=ny[g];null!=(v=t.getShallow(f))&&(e[f]=v)}var b=t.getShallow("borderType");null!=b&&(e.borderDash=b),"auto"!==e.backgroundColor&&"inherit"!==e.backgroundColor||!l||(e.backgroundColor=l),"auto"!==e.borderColor&&"inherit"!==e.borderColor||!l||(e.borderColor=l)}}function iy(e,t){var n=t&&t.getModel("textStyle");return yo([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var ry=Dd();function oy(e,t,n,a){if(e){var i=ry(e);i.prevValue=i.value,i.value=n;var r=t.normal;i.valueAnimation=r.get("valueAnimation"),i.valueAnimation&&(i.precision=r.get("precision"),i.defaultInterpolatedText=a,i.statesModels=t)}}function sy(e,t,n,a,i){var r=ry(e);if(r.valueAnimation&&r.prevValue!==r.value){var o=r.defaultInterpolatedText,s=uo(r.interpolatedValue,r.prevValue),l=r.value;e.percent=0,(null==r.prevValue?df:cf)(e,{percent:1},a,t,null,(function(a){var p=qd(n,r.precision,s,l,a);r.interpolatedValue=1===a?null:p;var c=Yf({labelDataIndex:t,labelFetcher:i,defaultText:o?o(p):p+""},r.statesModels,p);Kf(e,c)}))}}var ly,py,cy=["textStyle","color"],dy=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],uy=new Lm,my=function(){function e(){}return e.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(cy):null)},e.prototype.getFont=function(){return iy({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<dy.length;n++)t[dy[n]]=this.getShallow(dy[n]);return uy.useStyle(t),uy.update(),uy.getBoundingRect()},e}(),hy=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],gy=Xd(hy),fy=function(){function e(){}return e.prototype.getLineStyle=function(e){return gy(this,e)},e}(),yy=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],vy=Xd(yy),by=function(){function e(){}return e.prototype.getItemStyle=function(e,t){return vy(this,e,t)},e}(),xy=function(){function e(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}return e.prototype.init=function(e,t,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i]},e.prototype.mergeOption=function(e,t){Rr(this.option,e,!0)},e.prototype.get=function(e,t){return null==e?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},e.prototype.getShallow=function(e,t){var n=this.option,a=null==n?n:n[e];if(null==a&&!t){var i=this.parentModel;i&&(a=i.getShallow(e))}return a},e.prototype.getModel=function(t,n){var a=null!=t,i=a?this.parsePath(t):null;return new e(a?this._doGet(i):this.option,n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),this.ecModel)},e.prototype.isEmpty=function(){return null==this.option},e.prototype.restoreData=function(){},e.prototype.clone=function(){return new(0,this.constructor)(Fr(this.option))},e.prototype.parsePath=function(e){return"string"==typeof e?e.split("."):e},e.prototype.resolveParentPath=function(e){return e},e.prototype.isAnimationEnabled=function(){if(!mr.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(e,t){var n=this.option;if(!e)return n;for(var a=0;a<e.length&&(!e[a]||null!=(n=n&&"object"==typeof n?n[e[a]]:null));a++);return null==n&&t&&(n=t._doGet(this.resolveParentPath(e),t.parentModel)),n},e}();jd(xy),ly=xy,py=["__\0is_clz",Wd++].join("_"),ly.prototype[py]=!0,ly.isInstance=function(e){return!(!e||!e[py])},Gr(xy,fy),Gr(xy,by),Gr(xy,Qd),Gr(xy,my);var wy=Math.round(10*Math.random());function Sy(e){return[e||"",wy++].join("_")}function Cy(e,t){return Rr(Rr({},e,!0),t,!0)}var _y="ZH",Ty="EN",Iy=Ty,Ey={},My={},ky=mr.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||Iy).toUpperCase().indexOf(_y)>-1?_y:Iy;function Py(e,t){e=e.toUpperCase(),My[e]=new xy(t),Ey[e]=t}function Dy(e){return My[e]}Py(Ty,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),Py(_y,{time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}});var Oy=1e3,Ay=6e4,Fy=36e5,Ry=864e5,By=31536e6,Ny={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Ly="{yyyy}-{MM}-{dd}",Vy={year:"{yyyy}",month:"{yyyy}-{MM}",day:Ly,hour:Ly+" "+Ny.hour,minute:Ly+" "+Ny.minute,second:Ly+" "+Ny.second,millisecond:Ny.none},qy=["year","month","day","hour","minute","second","millisecond"],Gy=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function zy(e,t){return"0000".substr(0,t-(e+="").length)+e}function Uy(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function jy(e){return e===Uy(e)}function Hy(e,t,n,a){var i=id(e),r=i[Ky(n)](),o=i[Yy(n)]()+1,s=Math.floor((o-1)/3)+1,l=i[Xy(n)](),p=i["get"+(n?"UTC":"")+"Day"](),c=i[Zy(n)](),d=(c-1)%12+1,u=i[Qy(n)](),m=i[Jy(n)](),h=i[ev(n)](),g=(a instanceof xy?a:Dy(a||ky)||My[Iy]).getModel("time"),f=g.get("month"),y=g.get("monthAbbr"),v=g.get("dayOfWeek"),b=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,r+"").replace(/{yy}/g,zy(r%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,f[o-1]).replace(/{MMM}/g,y[o-1]).replace(/{MM}/g,zy(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,zy(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,v[p]).replace(/{ee}/g,b[p]).replace(/{e}/g,p+"").replace(/{HH}/g,zy(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,zy(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,zy(u,2)).replace(/{m}/g,u+"").replace(/{ss}/g,zy(m,2)).replace(/{s}/g,m+"").replace(/{SSS}/g,zy(h,3)).replace(/{S}/g,h+"")}function Wy(e,t){var n=id(e),a=n[Yy(t)]()+1,i=n[Xy(t)](),r=n[Zy(t)](),o=n[Qy(t)](),s=n[Jy(t)](),l=0===n[ev(t)](),p=l&&0===s,c=p&&0===o,d=c&&0===r,u=d&&1===i;return u&&1===a?"year":u?"month":d?"day":c?"hour":p?"minute":l?"second":"millisecond"}function $y(e,t,n){var a=to(e)?id(e):e;switch(t=t||Wy(e,n)){case"year":return a[Ky(n)]();case"half-year":return a[Yy(n)]()>=6?1:0;case"quarter":return Math.floor((a[Yy(n)]()+1)/4);case"month":return a[Yy(n)]();case"day":return a[Xy(n)]();case"half-day":return a[Zy(n)]()/24;case"hour":return a[Zy(n)]();case"minute":return a[Qy(n)]();case"second":return a[Jy(n)]();case"millisecond":return a[ev(n)]()}}function Ky(e){return e?"getUTCFullYear":"getFullYear"}function Yy(e){return e?"getUTCMonth":"getMonth"}function Xy(e){return e?"getUTCDate":"getDate"}function Zy(e){return e?"getUTCHours":"getHours"}function Qy(e){return e?"getUTCMinutes":"getMinutes"}function Jy(e){return e?"getUTCSeconds":"getSeconds"}function ev(e){return e?"getUTCMilliseconds":"getMilliseconds"}function tv(e){return e?"setUTCFullYear":"setFullYear"}function nv(e){return e?"setUTCMonth":"setMonth"}function av(e){return e?"setUTCDate":"setDate"}function iv(e){return e?"setUTCHours":"setHours"}function rv(e){return e?"setUTCMinutes":"setMinutes"}function ov(e){return e?"setUTCSeconds":"setSeconds"}function sv(e){return e?"setUTCMilliseconds":"setMilliseconds"}function lv(e){if(!cd(e))return Jr(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function pv(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var cv=go;function dv(e,t,n){function a(e){return e&&yo(e)?e:"-"}function i(e){return!(null==e||isNaN(e)||!isFinite(e))}var r="time"===t,o=e instanceof Date;if(r||o){var s=r?id(e):e;if(!isNaN(+s))return Hy(s,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",n);if(o)return"-"}if("ordinal"===t)return eo(e)?a(e):to(e)&&i(e)?e+"":"-";var l=pd(e);return i(l)?lv(l):eo(e)?a(e):"boolean"==typeof e?e+"":"-"}var uv=["a","b","c","d","e","f","g"],mv=function(e,t){return"{"+e+(null==t?"":t)+"}"};function hv(e,t,n){Zr(t)||(t=[t]);var a=t.length;if(!a)return"";for(var i=t[0].$vars||[],r=0;r<i.length;r++){var o=uv[r];e=e.replace(mv(o),mv(o,0))}for(var s=0;s<a;s++)for(var l=0;l<i.length;l++){var p=t[s][i[l]];e=e.replace(mv(uv[l],s),n?ss(p):p)}return e}function gv(e,t){var n=Jr(e)?{color:e,extraCssText:t}:e||{},a=n.color,i=n.type;t=n.extraCssText;var r=n.renderMode||"html";return a?"html"===r?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ss(a)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ss(a)+";"+(t||"")+'"></span>':{renderMode:r,content:"{"+(n.markerId||"markerX")+"|}  ",style:"subItem"===i?{width:4,height:4,borderRadius:2,backgroundColor:a}:{width:10,height:10,borderRadius:5,backgroundColor:a}}:""}function fv(e,t){return t=t||"transparent",Jr(e)?e:no(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function yv(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location.href=e}else window.open(e,t)}var vv=Ur,bv=["left","right","top","bottom","width","height"],xv=[["width","left","right"],["height","top","bottom"]];function wv(e,t,n,a,i){var r=0,o=0;null==a&&(a=1/0),null==i&&(i=1/0);var s=0;t.eachChild((function(l,p){var c,d,u=l.getBoundingRect(),m=t.childAt(p+1),h=m&&m.getBoundingRect();if("horizontal"===e){var g=u.width+(h?-h.x+u.x:0);(c=r+g)>a||l.newline?(r=0,c=g,o+=s+n,s=u.height):s=Math.max(s,u.height)}else{var f=u.height+(h?-h.y+u.y:0);(d=o+f)>i||l.newline?(r+=s+n,o=0,d=f,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=r,l.y=o,l.markRedraw(),"horizontal"===e?r=c+n:o=d+n)}))}var Sv=wv;Xr(wv,"vertical"),Xr(wv,"horizontal");function Cv(e,t,n){n=cv(n||0);var a=t.width,i=t.height,r=$c(e.left,a),o=$c(e.top,i),s=$c(e.right,a),l=$c(e.bottom,i),p=$c(e.width,a),c=$c(e.height,i),d=n[2]+n[0],u=n[1]+n[3],m=e.aspect;switch(isNaN(p)&&(p=a-s-u-r),isNaN(c)&&(c=i-l-d-o),null!=m&&(isNaN(p)&&isNaN(c)&&(m>a/i?p=.8*a:c=.8*i),isNaN(p)&&(p=m*c),isNaN(c)&&(c=p/m)),isNaN(r)&&(r=a-s-p-u),isNaN(o)&&(o=i-l-c-d),e.left||e.right){case"center":r=a/2-p/2-n[3];break;case"right":r=a-p-u}switch(e.top||e.bottom){case"middle":case"center":o=i/2-c/2-n[0];break;case"bottom":o=i-c-d}r=r||0,o=o||0,isNaN(p)&&(p=a-u-r-(s||0)),isNaN(c)&&(c=i-d-o-(l||0));var h=new Ls(r+n[3],o+n[0],p,c);return h.margin=n,h}function _v(e,t,n,a,i,r){var o,s=!i||!i.hv||i.hv[0],l=!i||!i.hv||i.hv[1],p=i&&i.boundingMode||"all";if((r=r||e).x=e.x,r.y=e.y,!s&&!l)return!1;if("raw"===p)o="group"===e.type?new Ls(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(o=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();(o=o.clone()).applyTransform(c)}var d=Cv(Lr({width:o.width,height:o.height},t),n,a),u=s?d.x-o.x:0,m=l?d.y-o.y:0;return"raw"===p?(r.x=u,r.y=m):(r.x+=u,r.y+=m),r===e&&e.markRedraw(),!0}function Tv(e){var t=e.layoutMode||e.constructor.layoutMode;return no(t)?t:t?{type:t}:null}function Iv(e,t,n){var a=n&&n.ignoreSize;!Zr(a)&&(a=[a,a]);var i=o(xv[0],0),r=o(xv[1],1);function o(n,i){var r={},o=0,p={},c=0;if(vv(n,(function(t){p[t]=e[t]})),vv(n,(function(e){s(t,e)&&(r[e]=p[e]=t[e]),l(r,e)&&o++,l(p,e)&&c++})),a[i])return l(t,n[1])?p[n[2]]=null:l(t,n[2])&&(p[n[1]]=null),p;if(2!==c&&o){if(o>=2)return r;for(var d=0;d<n.length;d++){var u=n[d];if(!s(r,u)&&s(e,u)){r[u]=e[u];break}}return r}return p}function s(e,t){return e.hasOwnProperty(t)}function l(e,t){return null!=e[t]&&"auto"!==e[t]}function p(e,t,n){vv(e,(function(e){t[e]=n[e]}))}p(xv[0],e,i),p(xv[1],e,r)}function Ev(e){return Mv({},e)}function Mv(e,t){return t&&e&&vv(bv,(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}var kv=Dd(),Pv=function(e){function t(t,n,a){var i=e.call(this,t,n,a)||this;return i.uid=Sy("ec_cpt_model"),i}return ze(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},t.prototype.mergeDefaultAndTheme=function(e,t){var n=Tv(this),a=n?Ev(e):{};Rr(e,t.getTheme().get(this.mainType)),Rr(e,this.getDefaultOption()),n&&Iv(e,a,n)},t.prototype.mergeOption=function(e,t){Rr(this.option,e,!0);var n=Tv(this);n&&Iv(this.option,e,n)},t.prototype.optionUpdated=function(e,t){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!function(e){return!(!e||!e[zd])}(e))return e.defaultOption;var t=kv(this);if(!t.defaultOption){for(var n=[],a=e;a;){var i=a.prototype.defaultOption;i&&n.push(i),a=a.superClass}for(var r={},o=n.length-1;o>=0;o--)r=Rr(r,n[o],!0);t.defaultOption=r}return t.defaultOption},t.prototype.getReferringComponents=function(e,t){var n=e+"Index",a=e+"Id";return Nd(this.ecModel,e,{index:this.get(n,!0),id:this.get(a,!0)},t)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(xy);Hd(Pv,xy),Yd(Pv),function(e){var t={};e.registerSubTypeDefaulter=function(e,n){var a=Ud(e);t[a.main]=n},e.determineSubType=function(n,a){var i=a.type;if(!i){var r=Ud(n).main;e.hasSubTypes(n)&&t[r]&&(i=t[r](a))}return i}}(Pv),function(e,t){function n(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,a,i,r){if(e.length){var o=function(e){var a={},i=[];return Ur(e,(function(r){var o=n(a,r),s=function(e,t){var n=[];return Ur(e,(function(e){Vr(t,e)>=0&&n.push(e)})),n}(o.originalDeps=t(r),e);o.entryCount=s.length,0===o.entryCount&&i.push(r),Ur(s,(function(e){Vr(o.predecessor,e)<0&&o.predecessor.push(e);var t=n(a,e);Vr(t.successor,e)<0&&t.successor.push(r)}))})),{graph:a,noEntryList:i}}(a),s=o.graph,l=o.noEntryList,p={};for(Ur(e,(function(e){p[e]=!0}));l.length;){var c=l.pop(),d=s[c],u=!!p[c];u&&(i.call(r,c,d.originalDeps.slice()),delete p[c]),Ur(d.successor,u?h:m)}Ur(p,(function(){var e="";throw new Error(e)}))}function m(e){s[e].entryCount--,0===s[e].entryCount&&l.push(e)}function h(e){p[e]=!0,m(e)}}}(Pv,(function(e){var t=[];Ur(Pv.getClassesByMainType(e),(function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])})),t=jr(t,(function(e){return Ud(e).main})),"dataset"!==e&&Vr(t,"dataset")<=0&&t.unshift("dataset");return t}));var Dv="";"undefined"!=typeof navigator&&(Dv=navigator.platform||"");var Ov="rgba(0, 0, 0, 0.2)",Av={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Ov,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Ov,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Ov,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Ov,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Ov,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Ov,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Dv.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Fv=_o(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Rv="original",Bv="arrayRows",Nv="objectRows",Lv="keyedColumns",Vv="typedArray",qv="unknown",Gv="column",zv="row",Uv=1,jv=2,Hv=3,Wv=Dd();function $v(e,t,n){var a={},i=Yv(t);if(!i||!e)return a;var r,o,s=[],l=[],p=t.ecModel,c=Wv(p).datasetMap,d=i.uid+"_"+n.seriesLayoutBy;Ur(e=e.slice(),(function(t,n){var i=no(t)?t:e[n]={name:t};"ordinal"===i.type&&null==r&&(r=n,o=h(i)),a[i.name]=[]}));var u=c.get(d)||c.set(d,{categoryWayDim:o,valueWayDim:0});function m(e,t,n){for(var a=0;a<n;a++)e.push(t+a)}function h(e){var t=e.dimsDef;return t?t.length:1}return Ur(e,(function(e,t){var n=e.name,i=h(e);if(null==r){var o=u.valueWayDim;m(a[n],o,i),m(l,o,i),u.valueWayDim+=i}else if(r===t)m(a[n],0,i),m(s,0,i);else{o=u.categoryWayDim;m(a[n],o,i),m(l,o,i),u.categoryWayDim+=i}})),s.length&&(a.itemName=s),l.length&&(a.seriesName=l),a}function Kv(e,t,n){var a={};if(!Yv(e))return a;var i,r=t.sourceFormat,o=t.dimensionsDefine;r!==Nv&&r!==Lv||Ur(o,(function(e,t){"name"===(no(e)?e.name:e)&&(i=t)}));var s=function(){for(var e={},a={},s=[],l=0,p=Math.min(5,n);l<p;l++){var c=Zv(t.data,r,t.seriesLayoutBy,o,t.startIndex,l);s.push(c);var d=c===Hv;if(d&&null==e.v&&l!==i&&(e.v=l),(null==e.n||e.n===e.v||!d&&s[e.n]===Hv)&&(e.n=l),u(e)&&s[e.n]!==Hv)return e;d||(c===jv&&null==a.v&&l!==i&&(a.v=l),null!=a.n&&a.n!==a.v||(a.n=l))}function u(e){return null!=e.v&&null!=e.n}return u(e)?e:u(a)?a:null}();if(s){a.value=[s.v];var l=null!=i?i:s.n;a.itemName=[l],a.seriesName=[l]}return a}function Yv(e){if(!e.get("data",!0))return Nd(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Rd).models[0]}function Xv(e,t){return Zv(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Zv(e,t,n,a,i,r){var o,s,l;if(io(e))return Hv;if(a){var p=a[r];no(p)?(s=p.name,l=p.type):Jr(p)&&(s=p)}if(null!=l)return"ordinal"===l?Uv:Hv;if(t===Bv){var c=e;if(n===zv){for(var d=c[r],u=0;u<(d||[]).length&&u<5;u++)if(null!=(o=v(d[i+u])))return o}else for(u=0;u<c.length&&u<5;u++){var m=c[i+u];if(m&&null!=(o=v(m[r])))return o}}else if(t===Nv){var h=e;if(!s)return Hv;for(u=0;u<h.length&&u<5;u++){if((f=h[u])&&null!=(o=v(f[s])))return o}}else if(t===Lv){if(!s)return Hv;if(!(d=e[s])||io(d))return Hv;for(u=0;u<d.length&&u<5;u++)if(null!=(o=v(d[u])))return o}else if(t===Rv){var g=e;for(u=0;u<g.length&&u<5;u++){var f,y=Sd(f=g[u]);if(!Zr(y))return Hv;if(null!=(o=v(y[r])))return o}}function v(e){var t=Jr(e);return null!=e&&isFinite(e)&&""!==e?t?jv:Hv:t&&"-"!==e?Uv:void 0}return Hv}var Qv=_o();var Jv,eb,tb,nb=Dd(),ab=Dd(),ib=function(){function e(){}return e.prototype.getColorFromPalette=function(e,t,n){var a=bd(this.get("color",!0)),i=this.get("colorLayer",!0);return ob(this,nb,a,i,e,t,n)},e.prototype.clearColorPalette=function(){!function(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}(this,nb)},e}();function rb(e,t,n,a){var i=bd(e.get(["aria","decal","decals"]));return ob(e,ab,i,null,t,n,a)}function ob(e,t,n,a,i,r,o){var s=t(r=r||e),l=s.paletteIdx||0,p=s.paletteNameMap=s.paletteNameMap||{};if(p.hasOwnProperty(i))return p[i];var c=null!=o&&a?function(e,t){for(var n=e.length,a=0;a<n;a++)if(e[a].length>t)return e[a];return e[n-1]}(a,o):n;if((c=c||n)&&c.length){var d=c[l];return i&&(p[i]=d),s.paletteIdx=(l+1)%c.length,d}}var sb="\0_ec_inner";var lb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.init=function(e,t,n,a,i,r){a=a||{},this.option=null,this._theme=new xy(a),this._locale=new xy(i),this._optionManager=r},t.prototype.setOption=function(e,t,n){var a=db(t);this._optionManager.setOption(e,n,a),this._resetOption(null,a)},t.prototype.resetOption=function(e,t){return this._resetOption(e,db(t))},t.prototype._resetOption=function(e,t){var n=!1,a=this._optionManager;if(!e||"recreate"===e){var i=a.mountOption("recreate"===e);0,this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(i,t)):tb(this,i),n=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var r=a.getTimelineOption(this);r&&(n=!0,this._mergeOption(r,t))}if(!e||"recreate"===e||"media"===e){var o=a.getMediaOption(this);o.length&&Ur(o,(function(e){n=!0,this._mergeOption(e,t)}),this)}return n},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,t){var n=this.option,a=this._componentsMap,i=this._componentsCount,r=[],o=_o(),s=t&&t.replaceMergeMainTypeMap;Wv(this).datasetMap=_o(),Ur(e,(function(e,t){null!=e&&(Pv.hasClass(t)?t&&(r.push(t),o.set(t,!0)):n[t]=null==n[t]?Fr(e):Rr(n[t],e,!0))})),s&&s.each((function(e,t){Pv.hasClass(t)&&!o.get(t)&&(r.push(t),o.set(t,!0))})),Pv.topologicalTravel(r,Pv.getAllClassMainTypes(),(function(t){var r=function(e,t,n){var a=Qv.get(t);if(!a)return n;var i=a(e);return i?n.concat(i):n}(this,t,bd(e[t])),o=a.get(t),l=o?s&&s.get(t)?"replaceMerge":"normalMerge":"replaceAll",p=_d(o,r,l);(function(e,t,n){Ur(e,(function(e){var a=e.newOption;no(a)&&(e.keyInfo.mainType=t,e.keyInfo.subType=function(e,t,n,a){return t.type?t.type:n?n.subType:a.determineSubType(e,t)}(t,a,e.existing,n))}))})(p,t,Pv),n[t]=null,a.set(t,null),i.set(t,0);var c,d=[],u=[],m=0;Ur(p,(function(e,n){var a=e.existing,i=e.newOption;if(i){var r="series"===t,o=Pv.getClass(t,e.keyInfo.subType,!r);if(!o)return;if("tooltip"===t){if(c)return void 0;c=!0}if(a&&a.constructor===o)a.name=e.keyInfo.name,a.mergeOption(i,this),a.optionUpdated(i,!1);else{var s=Nr({componentIndex:n},e.keyInfo);Nr(a=new o(i,this,this,s),s),e.brandNew&&(a.__requireNewView=!0),a.init(i,this,this),a.optionUpdated(null,!0)}}else a&&(a.mergeOption({},this),a.optionUpdated({},!1));a?(d.push(a.option),u.push(a),m++):(d.push(void 0),u.push(void 0))}),this),n[t]=d,a.set(t,u),i.set(t,m),"series"===t&&Jv(this)}),this),this._seriesIndices||Jv(this)},t.prototype.getOption=function(){var e=Fr(this.option);return Ur(e,(function(t,n){if(Pv.hasClass(n)){for(var a=bd(t),i=a.length,r=!1,o=i-1;o>=0;o--)a[o]&&!kd(a[o])?r=!0:(a[o]=null,!r&&i--);a.length=i,e[n]=a}})),delete e[sb],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,t){var n=this._componentsMap.get(e);if(n){var a=n[t||0];if(a)return a;if(null==t)for(var i=0;i<n.length;i++)if(n[i])return n[i]}},t.prototype.queryComponents=function(e){var t=e.mainType;if(!t)return[];var n,a=e.index,i=e.id,r=e.name,o=this._componentsMap.get(t);return o&&o.length?(null!=a?(n=[],Ur(bd(a),(function(e){o[e]&&n.push(o[e])}))):n=null!=i?pb("id",i,o):null!=r?pb("name",r,o):Wr(o,(function(e){return!!e})),cb(n,e)):[]},t.prototype.findComponents=function(e){var t,n,a,i,r,o=e.query,s=e.mainType,l=(n=s+"Index",a=s+"Id",i=s+"Name",!(t=o)||null==t[n]&&null==t[a]&&null==t[i]?null:{mainType:s,index:t[n],id:t[a],name:t[i]}),p=l?this.queryComponents(l):Wr(this._componentsMap.get(s),(function(e){return!!e}));return r=cb(p,e),e.filter?Wr(r,e.filter):r},t.prototype.eachComponent=function(e,t,n){var a=this._componentsMap;if(Qr(e)){var i=t,r=e;a.each((function(e,t){for(var n=0;e&&n<e.length;n++){var a=e[n];a&&r.call(i,t,a,a.componentIndex)}}))}else for(var o=Jr(e)?a.get(e):no(e)?this.findComponents(e):null,s=0;o&&s<o.length;s++){var l=o[s];l&&t.call(n,l,l.componentIndex)}},t.prototype.getSeriesByName=function(e){var t=Ed(e,null);return Wr(this._componentsMap.get("series"),(function(e){return!!e&&null!=t&&e.name===t}))},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return Wr(this._componentsMap.get("series"),(function(t){return!!t&&t.subType===e}))},t.prototype.getSeries=function(){return Wr(this._componentsMap.get("series"),(function(e){return!!e}))},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,t){eb(this),Ur(this._seriesIndices,(function(n){var a=this._componentsMap.get("series")[n];e.call(t,a,n)}),this)},t.prototype.eachRawSeries=function(e,t){Ur(this._componentsMap.get("series"),(function(n){n&&e.call(t,n,n.componentIndex)}))},t.prototype.eachSeriesByType=function(e,t,n){eb(this),Ur(this._seriesIndices,(function(a){var i=this._componentsMap.get("series")[a];i.subType===e&&t.call(n,i,a)}),this)},t.prototype.eachRawSeriesByType=function(e,t,n){return Ur(this.getSeriesByType(e),t,n)},t.prototype.isSeriesFiltered=function(e){return eb(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,t){eb(this);var n=[];Ur(this._seriesIndices,(function(a){var i=this._componentsMap.get("series")[a];e.call(t,i,a)&&n.push(a)}),this),this._seriesIndices=n,this._seriesIndicesMap=_o(n)},t.prototype.restoreData=function(e){Jv(this);var t=this._componentsMap,n=[];t.each((function(e,t){Pv.hasClass(t)&&n.push(t)})),Pv.topologicalTravel(n,Pv.getAllClassMainTypes(),(function(n){Ur(t.get(n),(function(t){!t||"series"===n&&function(e,t){if(t){var n=t.seriesIndex,a=t.seriesId,i=t.seriesName;return null!=n&&e.componentIndex!==n||null!=a&&e.id!==a||null!=i&&e.name!==i}}(t,e)||t.restoreData()}))}))},t.internalField=(Jv=function(e){var t=e._seriesIndices=[];Ur(e._componentsMap.get("series"),(function(e){e&&t.push(e.componentIndex)})),e._seriesIndicesMap=_o(t)},eb=function(e){},void(tb=function(e,t){e.option={},e.option[sb]=1,e._componentsMap=_o({series:[]}),e._componentsCount=_o();var n=t.aria;no(n)&&null==n.enabled&&(n.enabled=!0),function(e,t){var n=e.color&&!e.colorLayer;Ur(t,(function(t,a){"colorLayer"===a&&n||Pv.hasClass(a)||("object"==typeof t?e[a]=e[a]?Rr(e[a],t,!1):Fr(t):null==e[a]&&(e[a]=t))}))}(t,e._theme.option),Rr(t,Av,!1),e._mergeOption(t,null)})),t}(xy);function pb(e,t,n){if(Zr(t)){var a=_o();return Ur(t,(function(e){null!=e&&(null!=Ed(e,null)&&a.set(e,!0))})),Wr(n,(function(t){return t&&a.get(t[e])}))}var i=Ed(t,null);return Wr(n,(function(t){return t&&null!=i&&t[e]===i}))}function cb(e,t){return t.hasOwnProperty("subType")?Wr(e,(function(e){return e&&e.subType===t.subType})):e}function db(e){var t=_o();return e&&Ur(bd(e.replaceMerge),(function(e){t.set(e,!0)})),{replaceMergeMainTypeMap:t}}Gr(lb,ib);var ub=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],mb=function(e){Ur(ub,(function(t){this[t]=Yr(e[t],e)}),this)},hb={},gb=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(e,t){var n=[];Ur(hb,(function(a,i){var r=a.create(e,t);n=n.concat(r||[])})),this._coordinateSystems=n},e.prototype.update=function(e,t){Ur(this._coordinateSystems,(function(n){n.update&&n.update(e,t)}))},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(e,t){hb[e]=t},e.get=function(e){return hb[e]},e}(),fb=/^(min|max)?(.+)$/,yb=function(){function e(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return e.prototype.setOption=function(e,t,n){e&&(Ur(bd(e.series),(function(e){e&&e.data&&io(e.data)&&bo(e.data)})),Ur(bd(e.dataset),(function(e){e&&e.source&&io(e.source)&&bo(e.source)}))),e=Fr(e);var a=this._optionBackup,i=function(e,t,n){var a,i,r=[],o=e.baseOption,s=e.timeline,l=e.options,p=e.media,c=!!e.media,d=!!(l||s||o&&o.timeline);o?(i=o).timeline||(i.timeline=s):((d||c)&&(e.options=e.media=null),i=e);c&&Zr(p)&&Ur(p,(function(e){e&&e.option&&(e.query?r.push(e):a||(a=e))}));function u(e){Ur(t,(function(t){t(e,n)}))}return u(i),Ur(l,(function(e){return u(e)})),Ur(r,(function(e){return u(e.option)})),{baseOption:i,timelineOptions:l||[],mediaDefault:a,mediaList:r}}(e,t,!a);this._newBaseOption=i.baseOption,a?(i.timelineOptions.length&&(a.timelineOptions=i.timelineOptions),i.mediaList.length&&(a.mediaList=i.mediaList),i.mediaDefault&&(a.mediaDefault=i.mediaDefault)):this._optionBackup=i},e.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Fr(e?t.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(e){var t,n=this._timelineOptions;if(n.length){var a=e.getComponent("timeline");a&&(t=Fr(n[a.getCurrentIndex()]))}return t},e.prototype.getMediaOption=function(e){var t,n,a=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,o=this._mediaDefault,s=[],l=[];if(!r.length&&!o)return l;for(var p=0,c=r.length;p<c;p++)vb(r[p].query,a,i)&&s.push(p);return!s.length&&o&&(s=[-1]),s.length&&(t=s,n=this._currentMediaIndices,t.join(",")!==n.join(","))&&(l=jr(s,(function(e){return Fr(-1===e?o.option:r[e].option)}))),this._currentMediaIndices=s,l},e}();function vb(e,t,n){var a={width:t,height:n,aspectratio:t/n},i=!0;return Ur(e,(function(e,t){var n=t.match(fb);if(n&&n[1]&&n[2]){var r=n[1],o=n[2].toLowerCase();(function(e,t,n){return"min"===n?e>=t:"max"===n?e<=t:e===t})(a[o],e,r)||(i=!1)}})),i}var bb=Ur,xb=no,wb=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Sb(e){var t=e&&e.itemStyle;if(t)for(var n=0,a=wb.length;n<a;n++){var i=wb[n],r=t.normal,o=t.emphasis;r&&r[i]&&(e[i]=e[i]||{},e[i].normal?Rr(e[i].normal,r[i]):e[i].normal=r[i],r[i]=null),o&&o[i]&&(e[i]=e[i]||{},e[i].emphasis?Rr(e[i].emphasis,o[i]):e[i].emphasis=o[i],o[i]=null)}}function Cb(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var a=e[t].normal,i=e[t].emphasis;a&&(n?(e[t].normal=e[t].emphasis=null,Lr(e[t],a)):e[t]=a),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function _b(e){Cb(e,"itemStyle"),Cb(e,"lineStyle"),Cb(e,"areaStyle"),Cb(e,"label"),Cb(e,"labelLine"),Cb(e,"upperLabel"),Cb(e,"edgeLabel")}function Tb(e,t){var n=xb(e)&&e[t],a=xb(n)&&n.textStyle;if(a){0;for(var i=0,r=wd.length;i<r;i++){var o=wd[i];a.hasOwnProperty(o)&&(n[o]=a[o])}}}function Ib(e){e&&(_b(e),Tb(e,"label"),e.emphasis&&Tb(e.emphasis,"label"))}function Eb(e){return Zr(e)?e:e?[e]:[]}function Mb(e){return(Zr(e)?e[0]:e)||{}}function kb(e,t){bb(Eb(e.series),(function(e){xb(e)&&function(e){if(xb(e)){Sb(e),_b(e),Tb(e,"label"),Tb(e,"upperLabel"),Tb(e,"edgeLabel"),e.emphasis&&(Tb(e.emphasis,"label"),Tb(e.emphasis,"upperLabel"),Tb(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(Sb(t),Ib(t));var n=e.markLine;n&&(Sb(n),Ib(n));var a=e.markArea;a&&Ib(a);var i=e.data;if("graph"===e.type){i=i||e.nodes;var r=e.links||e.edges;if(r&&!io(r))for(var o=0;o<r.length;o++)Ib(r[o]);Ur(e.categories,(function(e){_b(e)}))}if(i&&!io(i))for(o=0;o<i.length;o++)Ib(i[o]);if((t=e.markPoint)&&t.data){var s=t.data;for(o=0;o<s.length;o++)Ib(s[o])}if((n=e.markLine)&&n.data){var l=n.data;for(o=0;o<l.length;o++)Zr(l[o])?(Ib(l[o][0]),Ib(l[o][1])):Ib(l[o])}"gauge"===e.type?(Tb(e,"axisLabel"),Tb(e,"title"),Tb(e,"detail")):"treemap"===e.type?(Cb(e.breadcrumb,"itemStyle"),Ur(e.levels,(function(e){_b(e)}))):"tree"===e.type&&_b(e.leaves)}}(e)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),bb(n,(function(t){bb(Eb(e[t]),(function(e){e&&(Tb(e,"axisLabel"),Tb(e.axisPointer,"label"))}))})),bb(Eb(e.parallel),(function(e){var t=e&&e.parallelAxisDefault;Tb(t,"axisLabel"),Tb(t&&t.axisPointer,"label")})),bb(Eb(e.calendar),(function(e){Cb(e,"itemStyle"),Tb(e,"dayLabel"),Tb(e,"monthLabel"),Tb(e,"yearLabel")})),bb(Eb(e.radar),(function(e){Tb(e,"name"),e.name&&null==e.axisName&&(e.axisName=e.name,delete e.name),null!=e.nameGap&&null==e.axisNameGap&&(e.axisNameGap=e.nameGap,delete e.nameGap)})),bb(Eb(e.geo),(function(e){xb(e)&&(Ib(e),bb(Eb(e.regions),(function(e){Ib(e)})))})),bb(Eb(e.timeline),(function(e){Ib(e),Cb(e,"label"),Cb(e,"itemStyle"),Cb(e,"controlStyle",!0);var t=e.data;Zr(t)&&Ur(t,(function(e){no(e)&&(Cb(e,"label"),Cb(e,"itemStyle"))}))})),bb(Eb(e.toolbox),(function(e){Cb(e,"iconStyle"),bb(e.feature,(function(e){Cb(e,"iconStyle")}))})),Tb(Mb(e.axisPointer),"label"),Tb(Mb(e.tooltip).axisPointer,"label")}function Pb(e){e&&Ur(Db,(function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])}))}var Db=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Ob=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Ab=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Fb(e){var t=e&&e.itemStyle;if(t)for(var n=0;n<Ab.length;n++){var a=Ab[n][1],i=Ab[n][0];null!=t[a]&&(t[i]=t[a])}}function Rb(e){e&&"edge"===e.alignTo&&null!=e.margin&&null==e.edgeDistance&&(e.edgeDistance=e.margin)}function Bb(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Nb(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n]),e[n]&&Nb(e[n].children,t)}function Lb(e,t){kb(e,t),e.series=bd(e.series),Ur(e.series,(function(e){if(no(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t){if(null!=e.clockWise&&(e.clockwise=e.clockWise),Rb(e.label),(i=e.data)&&!io(i))for(var n=0;n<i.length;n++)Rb(i[n]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===t){var a=function(e,t){for(var n=t.split(","),a=e,i=0;i<n.length&&null!=(a=a&&a[n[i]]);i++);return a}(e,"pointer.color");null!=a&&function(e,t,n,a){for(var i,r=t.split(","),o=e,s=0;s<r.length-1;s++)null==o[i=r[s]]&&(o[i]={}),o=o[i];(a||null==o[r[s]])&&(o[r[s]]=n)}(e,"itemStyle.color",a)}else if("bar"===t){var i;if(Fb(e),Fb(e.backgroundStyle),Fb(e.emphasis),(i=e.data)&&!io(i))for(n=0;n<i.length;n++)"object"==typeof i[n]&&(Fb(i[n]),Fb(i[n]&&i[n].emphasis))}else if("sunburst"===t){var r=e.highlightPolicy;r&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=r)),Bb(e),Nb(e.data,Bb)}else"graph"===t||"sankey"===t?function(e){e&&null!=e.focusNodeAdjacency&&(e.emphasis=e.emphasis||{},null==e.emphasis.focus&&(e.emphasis.focus="adjacency"))}(e):"map"===t&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Lr(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),Pb(e)}})),e.dataRange&&(e.visualMap=e.dataRange),Ur(Ob,(function(t){var n=e[t];n&&(Zr(n)||(n=[n]),Ur(n,(function(e){Pb(e)})))}))}function Vb(e){Ur(e,(function(t,n){var a=[],i=[NaN,NaN],r=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(r,(function(r,p,c){var d,u,m=o.get(t.stackedDimension,c);if(isNaN(m))return i;s?u=o.getRawIndex(c):d=o.get(t.stackedByDimension,c);for(var h=NaN,g=n-1;g>=0;g--){var f=e[g];if(s||(u=f.data.rawIndexOf(f.stackedByDimension,d)),u>=0){var y=f.data.getByRawIndex(f.stackResultDimension,u);if("all"===l||"positive"===l&&y>0||"negative"===l&&y<0||"samesign"===l&&m>=0&&y>0||"samesign"===l&&m<=0&&y<0){m=ed(m,y),h=y;break}}}return a[0]=m,a[1]=h,a}))}))}var qb,Gb,zb,Ub,jb,Hb=function(e){this.data=e.data||(e.sourceFormat===Lv?{}:[]),this.sourceFormat=e.sourceFormat||qv,this.seriesLayoutBy=e.seriesLayoutBy||Gv,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var n=0;n<t.length;n++){var a=t[n];null==a.type&&Xv(this,n)===Uv&&(a.type="ordinal")}};function Wb(e){return e instanceof Hb}function $b(e,t,n){n=n||Yb(e);var a=t.seriesLayoutBy,i=function(e,t,n,a,i){var r,o;if(!e)return{dimensionsDefine:Xb(i),startIndex:o,dimensionsDetectedCount:r};if(t===Bv){var s=e;"auto"===a||null==a?Zb((function(e){null!=e&&"-"!==e&&(Jr(e)?null==o&&(o=1):o=0)}),n,s,10):o=to(a)?a:a?1:0,i||1!==o||(i=[],Zb((function(e,t){i[t]=null!=e?e+"":""}),n,s,1/0)),r=i?i.length:n===zv?s.length:s[0]?s[0].length:null}else if(t===Nv)i||(i=function(e){var t,n=0;for(;n<e.length&&!(t=e[n++]););if(t)return Kr(t)}(e));else if(t===Lv)i||(i=[],Ur(e,(function(e,t){i.push(t)})));else if(t===Rv){var l=Sd(e[0]);r=Zr(l)&&l.length||1}return{startIndex:o,dimensionsDefine:Xb(i),dimensionsDetectedCount:r}}(e,n,a,t.sourceHeader,t.dimensions);return new Hb({data:e,sourceFormat:n,seriesLayoutBy:a,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Fr(t)})}function Kb(e){return new Hb({data:e,sourceFormat:io(e)?Vv:Rv})}function Yb(e){var t=qv;if(io(e))t=Vv;else if(Zr(e)){0===e.length&&(t=Bv);for(var n=0,a=e.length;n<a;n++){var i=e[n];if(null!=i){if(Zr(i)||io(i)){t=Bv;break}if(no(i)){t=Nv;break}}}}else if(no(e))for(var r in e)if(Mo(e,r)&&zr(e[r])){t=Lv;break}return t}function Xb(e){if(e){var t=_o();return jr(e,(function(e,n){var a={name:(e=no(e)?e:{name:e}).name,displayName:e.displayName,type:e.type,stack:e.stack};if(null==a.name)return a;a.name+="",null==a.displayName&&(a.displayName=a.name);var i=t.get(a.name);return i?a.name+="-"+i.count++:t.set(a.name,{count:1}),a}))}}function Zb(e,t,n,a){if(t===zv)for(var i=0;i<n.length&&i<a;i++)e(n[i]?n[i][0]:null,i);else{var r=n[0]||[];for(i=0;i<r.length&&i<a;i++)e(r[i],i)}}function Qb(e){var t=e.sourceFormat;return t===Nv||t===Lv}var Jb=function(){function e(e,t){var n=Wb(e)?e:Kb(e);this._source=n;var a=this._data=n.data;n.sourceFormat===Vv&&(this._offset=0,this._dimSize=t,this._data=a),jb(this,a,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(e,t){},e.prototype.appendData=function(e){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var e;jb=function(e,i,r){var o=r.sourceFormat,s=r.seriesLayoutBy,l=r.startIndex,p=r.dimensionsDefine,c=Ub[px(o,s)];if(Nr(e,c),o===Vv)e.getItem=t,e.count=a,e.fillStorage=n;else{var d=nx(o,s);e.getItem=Yr(d,null,i,l,p);var u=rx(o,s);e.count=Yr(u,null,i,l,p)}};var t=function(e,t){e-=this._offset,t=t||[];for(var n=this._data,a=this._dimSize,i=a*e,r=0;r<a;r++)t[r]=n[i+r];return t},n=function(e,t,n,a){for(var i=this._data,r=this._dimSize,o=0;o<r;o++){for(var s=a[o],l=null==s[0]?1/0:s[0],p=null==s[1]?-1/0:s[1],c=t-e,d=n[o],u=0;u<c;u++){var m=i[u*r+o];d[e+u]=m,m<l&&(l=m),m>p&&(p=m)}s[0]=l,s[1]=p}},a=function(){return this._data?this._data.length/this._dimSize:0};function i(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}(e={})[Bv+"_"+Gv]={pure:!0,appendData:i},e[Bv+"_"+zv]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Nv]={pure:!0,appendData:i},e[Lv]={pure:!0,appendData:function(e){var t=this._data;Ur(e,(function(e,n){for(var a=t[n]||(t[n]=[]),i=0;i<(e||[]).length;i++)a.push(e[i])}))}},e[Rv]={appendData:i},e[Vv]={persistent:!1,pure:!0,appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}},Ub=e}(),e}(),ex=function(e,t,n,a){return e[a]},tx=((qb={})[Bv+"_"+Gv]=function(e,t,n,a){return e[a+t]},qb[Bv+"_"+zv]=function(e,t,n,a,i){a+=t;for(var r=i||[],o=e,s=0;s<o.length;s++){var l=o[s];r[s]=l?l[a]:null}return r},qb[Nv]=ex,qb[Lv]=function(e,t,n,a,i){for(var r=i||[],o=0;o<n.length;o++){var s=n[o].name;0;var l=e[s];r[o]=l?l[a]:null}return r},qb[Rv]=ex,qb);function nx(e,t){var n=tx[px(e,t)];return n}var ax=function(e,t,n){return e.length},ix=((Gb={})[Bv+"_"+Gv]=function(e,t,n){return Math.max(0,e.length-t)},Gb[Bv+"_"+zv]=function(e,t,n){var a=e[0];return a?Math.max(0,a.length-t):0},Gb[Nv]=ax,Gb[Lv]=function(e,t,n){var a=n[0].name;var i=e[a];return i?i.length:0},Gb[Rv]=ax,Gb);function rx(e,t){var n=ix[px(e,t)];return n}var ox=function(e,t,n){return e[t]},sx=((zb={})[Bv]=ox,zb[Nv]=function(e,t,n){return e[n]},zb[Lv]=ox,zb[Rv]=function(e,t,n){var a=Sd(e);return a instanceof Array?a[t]:a},zb[Vv]=ox,zb);function lx(e){var t=sx[e];return t}function px(e,t){return e===Bv?e+"_"+t:e}function cx(e,t,n){if(e){var a=e.getRawDataItem(t);if(null!=a){var i=e.getStore(),r=i.getSource().sourceFormat;if(null!=n){var o=e.getDimensionIndex(n),s=i.getDimensionProperty(o);return lx(r)(a,o,s)}var l=a;return r===Rv&&(l=Sd(a)),l}}}var dx=/\{@(.+?)\}/g,ux=function(){function e(){}return e.prototype.getDataParams=function(e,t){var n=this.getData(t),a=this.getRawValue(e,t),i=n.getRawIndex(e),r=n.getName(e),o=n.getRawDataItem(e),s=n.getItemVisual(e,"style"),l=s&&s[n.getItemVisual(e,"drawType")||"fill"],p=s&&s.stroke,c=this.mainType,d="series"===c,u=n.userOutput&&n.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:r,dataIndex:i,data:o,dataType:t,value:a,color:l,borderColor:p,dimensionNames:u?u.fullDimensions:null,encode:u?u.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(e,t,n,a,i,r){t=t||"normal";var o=this.getData(n),s=this.getDataParams(e,n);(r&&(s.value=r.interpolatedValue),null!=a&&Zr(s.value)&&(s.value=s.value[a]),i)||(i=o.getItemModel(e).get("normal"===t?["label","formatter"]:[t,"label","formatter"]));return Qr(i)?(s.status=t,s.dimensionIndex=a,i(s)):Jr(i)?hv(i,s).replace(dx,(function(t,n){var a=n.length,i=n;"["===i.charAt(0)&&"]"===i.charAt(a-1)&&(i=+i.slice(1,a-1));var s=cx(o,e,i);if(r&&Zr(r.interpolatedValue)){var l=o.getDimensionIndex(i);l>=0&&(s=r.interpolatedValue[l])}return null!=s?s+"":""})):void 0},e.prototype.getRawValue=function(e,t){return cx(this.getData(t),e)},e.prototype.formatTooltip=function(e,t,n){},e}();function mx(e){var t,n;return no(e)?e.type&&(n=e):t=e,{text:t,frag:n}}function hx(e){return new gx(e)}var gx=function(){function e(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return e.prototype.perform=function(e){var t,n=this._upstream,a=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!a&&(t=this._plan(this.context));var r,o=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),p=e&&e.modDataCount||0;function c(e){return!(e>=1)&&(e=1),e}o===l&&s===p||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,r=this._doReset(a)),this._modBy=l,this._modDataCount=p;var d=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var u=this._dueIndex,m=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!a&&(r||u<m)){var h=this._progress;if(Zr(h))for(var g=0;g<h.length;g++)this._doProgress(h[g],u,m,l,p);else this._doProgress(h,u,m,l,p)}this._dueIndex=m;var f=null!=this._settedOutputEnd?this._settedOutputEnd:m;0,this._outputDueEnd=f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(e,t,n,a,i){fx.reset(t,n,a,i),this._callingProgress=e,this._callingProgress({start:t,end:n,count:n-t,next:fx.next},this.context)},e.prototype._doReset=function(e){var t,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!e&&this._reset&&((t=this._reset(this.context))&&t.progress&&(n=t.forceFirstProgress,t=t.progress),Zr(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var a=this._downstream;return a&&a.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},e}(),fx=function(){var e,t,n,a,i,r={reset:function(l,p,c,d){t=l,e=p,n=c,a=d,i=Math.ceil(a/n),r.next=n>1&&a>0?s:o}};return r;function o(){return t<e?t++:null}function s(){var r=t%i*n+Math.ceil(t/i),o=t>=e?null:r<a?r:t;return t++,o}}();function yx(e,t){var n=t&&t.type;return"ordinal"===n?e:("time"!==n||to(e)||null==e||"-"===e||(e=+id(e)),null==e||""===e?NaN:+e)}var vx=_o({number:function(e){return parseFloat(e)},time:function(e){return+id(e)},trim:function(e){return Jr(e)?yo(e):e}});function bx(e){return vx.get(e)}var xx={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Sx=function(){function e(e,t){if(!to(t)){var n="";0,gd(n)}this._opFn=xx[e],this._rvalFloat=pd(t)}return e.prototype.evaluate=function(e){return to(e)?this._opFn(e,this._rvalFloat):this._opFn(pd(e),this._rvalFloat)},e}(),Cx=function(){function e(e,t){var n="desc"===e;this._resultLT=n?1:-1,null==t&&(t=n?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return e.prototype.evaluate=function(e,t){var n=to(e)?e:pd(e),a=to(t)?t:pd(t),i=isNaN(n),r=isNaN(a);if(i&&(n=this._incomparable),r&&(a=this._incomparable),i&&r){var o=Jr(e),s=Jr(t);o&&(n=s?e:0),s&&(a=o?t:0)}return n<a?this._resultLT:n>a?-this._resultLT:0},e}(),_x=function(){function e(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=pd(t)}return e.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var n=typeof e;n===this._rvalTypeof||"number"!==n&&"number"!==this._rvalTypeof||(t=pd(e)===this._rvalFloat)}return this._isEQ?t:!t},e}();function Tx(e,t){return"eq"===e||"ne"===e?new _x("eq"===e,t):Mo(xx,e)?new Sx(e,t):null}var Ix=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(e){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(e){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(e,t){},e.prototype.retrieveValueFromItem=function(e,t){},e.prototype.convertValue=function(e,t){return yx(e,t)},e}();function Ex(e){var t=e.sourceFormat;if(!Ax(t)){var n="";0,gd(n)}return e.data}function Mx(e){var t=e.sourceFormat,n=e.data;if(!Ax(t)){var a="";0,gd(a)}if(t===Bv){for(var i=[],r=0,o=n.length;r<o;r++)i.push(n[r].slice());return i}if(t===Nv){for(i=[],r=0,o=n.length;r<o;r++)i.push(Nr({},n[r]));return i}}function kx(e,t,n){if(null!=n)return to(n)||!isNaN(n)&&!Mo(t,n)?e[n]:Mo(t,n)?t[n]:void 0}function Px(e){return Fr(e)}var Dx=_o();function Ox(e,t,n,a){var i="";t.length||gd(i),no(e)||gd(i);var r=e.type,o=Dx.get(r);o||gd(i);var s=jr(t,(function(e){return function(e,t){var n=new Ix,a=e.data,i=n.sourceFormat=e.sourceFormat,r=e.startIndex,o="";e.seriesLayoutBy!==Gv&&gd(o);var s=[],l={},p=e.dimensionsDefine;if(p)Ur(p,(function(e,t){var n=e.name,a={index:t,name:n,displayName:e.displayName};if(s.push(a),null!=n){var i="";Mo(l,n)&&gd(i),l[n]=a}}));else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var d=nx(i,Gv);t.__isBuiltIn&&(n.getRawDataItem=function(e){return d(a,r,s,e)},n.getRawData=Yr(Ex,null,e)),n.cloneRawData=Yr(Mx,null,e);var u=rx(i,Gv);n.count=Yr(u,null,a,r,s);var m=lx(i);n.retrieveValue=function(e,t){var n=d(a,r,s,e);return h(n,t)};var h=n.retrieveValueFromItem=function(e,t){if(null!=e){var n=s[t];return n?m(e,t,n.name):void 0}};return n.getDimensionInfo=Yr(kx,null,s,l),n.cloneAllDimensionInfo=Yr(Px,null,s),n}(e,o)})),l=bd(o.transform({upstream:s[0],upstreamList:s,config:Fr(e.config)}));return jr(l,(function(e,n){var a,i="";no(e)||gd(i),e.data||gd(i),Ax(Yb(e.data))||gd(i);var r=t[0];if(r&&0===n&&!e.dimensions){var o=r.startIndex;o&&(e.data=r.data.slice(0,o).concat(e.data)),a={seriesLayoutBy:Gv,sourceHeader:o,dimensions:r.metaRawOption.dimensions}}else a={seriesLayoutBy:Gv,sourceHeader:0,dimensions:e.dimensions};return $b(e.data,a,null)}))}function Ax(e){return e===Bv||e===Nv}var Fx,Rx="undefined",Bx=typeof Uint32Array===Rx?Array:Uint32Array,Nx=typeof Uint16Array===Rx?Array:Uint16Array,Lx=typeof Int32Array===Rx?Array:Int32Array,Vx=typeof Float64Array===Rx?Array:Float64Array,qx={float:Vx,int:Lx,ordinal:Array,number:Array,time:Vx};function Gx(e){return e>65535?Bx:Nx}function zx(e,t,n,a,i){var r=qx[n||"float"];if(i){var o=e[t],s=o&&o.length;if(s!==a){for(var l=new r(a),p=0;p<s;p++)l[p]=o[p];e[t]=l}}else e[t]=new r(a)}var Ux=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=_o()}return e.prototype.initData=function(e,t,n){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var a=e.getSource(),i=this.defaultDimValueGetter=Fx[a.sourceFormat];this._dimValueGetter=n||i,this._rawExtent=[];Qb(a);this._dimensions=jr(t,(function(e){return{type:e.type,property:e.property}})),this._initDataFromProvider(0,e.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(e,t){var n=this._calcDimNameToIdx,a=this._dimensions,i=n.get(e);if(null!=i){if(a[i].type===t)return i}else i=a.length;return a[i]={type:t},n.set(e,i),this._chunks[i]=new qx[t||"float"](this._rawCount),this._rawExtent[i]=[1/0,-1/0],i},e.prototype.collectOrdinalMeta=function(e,t){var n=this._chunks[e],a=this._dimensions[e],i=this._rawExtent,r=a.ordinalOffset||0,o=n.length;0===r&&(i[e]=[1/0,-1/0]);for(var s=i[e],l=r;l<o;l++){var p=n[l]=t.parseAndCollect(n[l]);isNaN(p)||(s[0]=Math.min(p,s[0]),s[1]=Math.max(p,s[1]))}a.ordinalMeta=t,a.ordinalOffset=o,a.type="ordinal"},e.prototype.getOrdinalMeta=function(e){return this._dimensions[e].ordinalMeta},e.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},e.prototype.appendData=function(e){var t=this._provider,n=this.count();t.appendData(e);var a=t.count();return t.persistent||(a+=n),n<a&&this._initDataFromProvider(n,a,!0),[n,a]},e.prototype.appendValues=function(e,t){for(var n=this._chunks,a=this._dimensions,i=a.length,r=this._rawExtent,o=this.count(),s=o+Math.max(e.length,t||0),l=0;l<i;l++){zx(n,l,(m=a[l]).type,s,!0)}for(var p=[],c=o;c<s;c++)for(var d=c-o,u=0;u<i;u++){var m=a[u],h=Fx.arrayRows.call(this,e[d]||p,m.property,d,u);n[u][c]=h;var g=r[u];h<g[0]&&(g[0]=h),h>g[1]&&(g[1]=h)}return this._rawCount=this._count=s,{start:o,end:s}},e.prototype._initDataFromProvider=function(e,t,n){for(var a=this._provider,i=this._chunks,r=this._dimensions,o=r.length,s=this._rawExtent,l=jr(r,(function(e){return e.property})),p=0;p<o;p++){var c=r[p];s[p]||(s[p]=[1/0,-1/0]),zx(i,p,c.type,t,n)}if(a.fillStorage)a.fillStorage(e,t,i,s);else for(var d=[],u=e;u<t;u++){d=a.getItem(u,d);for(var m=0;m<o;m++){var h=i[m],g=this._dimValueGetter(d,l[m],u,m);h[u]=g;var f=s[m];g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=t,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var n=this._chunks[e];return n?n[this.getRawIndex(t)]:NaN},e.prototype.getValues=function(e,t){var n=[],a=[];if(null==t){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)a.push(i)}else a=e;i=0;for(var r=a.length;i<r;i++)n.push(this.get(a[i],t));return n},e.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var n=this._chunks[e];return n?n[t]:NaN},e.prototype.getSum=function(e){var t=0;if(this._chunks[e])for(var n=0,a=this.count();n<a;n++){var i=this.get(e,n);isNaN(i)||(t+=i)}return t},e.prototype.getMedian=function(e){var t=[];this.each([e],(function(e){isNaN(e)||t.push(e)}));var n=t.sort((function(e,t){return e-t})),a=this.count();return 0===a?0:a%2==1?n[(a-1)/2]:(n[a/2]+n[a/2-1])/2},e.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var a=0,i=this._count-1;a<=i;){var r=(a+i)/2|0;if(t[r]<e)a=r+1;else{if(!(t[r]>e))return r;i=r-1}}return-1},e.prototype.indicesOfNearest=function(e,t,n){var a=this._chunks[e],i=[];if(!a)return i;null==n&&(n=1/0);for(var r=1/0,o=-1,s=0,l=0,p=this.count();l<p;l++){var c=t-a[this.getRawIndex(l)],d=Math.abs(c);d<=n&&((d<r||d===r&&c>=0&&o<0)&&(r=d,o=c,s=0),c===o&&(i[s++]=l))}return i.length=s,i},e.prototype.getIndices=function(){var e,t=this._indices;if(t){var n=t.constructor,a=this._count;if(n===Array){e=new n(a);for(var i=0;i<a;i++)e[i]=t[i]}else e=new n(t.buffer,0,a)}else{e=new(n=Gx(this._rawCount))(this.count());for(i=0;i<e.length;i++)e[i]=i}return e},e.prototype.filter=function(e,t){if(!this._count)return this;for(var n=this.clone(),a=n.count(),i=new(Gx(n._rawCount))(a),r=[],o=e.length,s=0,l=e[0],p=n._chunks,c=0;c<a;c++){var d=void 0,u=n.getRawIndex(c);if(0===o)d=t(c);else if(1===o){d=t(p[l][u],c)}else{for(var m=0;m<o;m++)r[m]=p[e[m]][u];r[m]=c,d=t.apply(null,r)}d&&(i[s++]=u)}return s<a&&(n._indices=i),n._count=s,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(e){var t=this.clone(),n=t._count;if(!n)return this;var a=Kr(e),i=a.length;if(!i)return this;var r=t.count(),o=new(Gx(t._rawCount))(r),s=0,l=a[0],p=e[l][0],c=e[l][1],d=t._chunks,u=!1;if(!t._indices){var m=0;if(1===i){for(var h=d[a[0]],g=0;g<n;g++){((b=h[g])>=p&&b<=c||isNaN(b))&&(o[s++]=m),m++}u=!0}else if(2===i){h=d[a[0]];var f=d[a[1]],y=e[a[1]][0],v=e[a[1]][1];for(g=0;g<n;g++){var b=h[g],x=f[g];(b>=p&&b<=c||isNaN(b))&&(x>=y&&x<=v||isNaN(x))&&(o[s++]=m),m++}u=!0}}if(!u)if(1===i)for(g=0;g<r;g++){var w=t.getRawIndex(g);((b=d[a[0]][w])>=p&&b<=c||isNaN(b))&&(o[s++]=w)}else for(g=0;g<r;g++){for(var S=!0,C=(w=t.getRawIndex(g),0);C<i;C++){var _=a[C];((b=d[_][w])<e[_][0]||b>e[_][1])&&(S=!1)}S&&(o[s++]=t.getRawIndex(g))}return s<r&&(t._indices=o),t._count=s,t._extent=[],t._updateGetRawIdx(),t},e.prototype.map=function(e,t){var n=this.clone(e);return this._updateDims(n,e,t),n},e.prototype.modify=function(e,t){this._updateDims(this,e,t)},e.prototype._updateDims=function(e,t,n){for(var a=e._chunks,i=[],r=t.length,o=e.count(),s=[],l=e._rawExtent,p=0;p<t.length;p++)l[t[p]]=[1/0,-1/0];for(var c=0;c<o;c++){for(var d=e.getRawIndex(c),u=0;u<r;u++)s[u]=a[t[u]][d];s[r]=c;var m=n&&n.apply(null,s);if(null!=m){"object"!=typeof m&&(i[0]=m,m=i);for(p=0;p<m.length;p++){var h=t[p],g=m[p],f=l[h],y=a[h];y&&(y[d]=g),g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g)}}}},e.prototype.lttbDownSample=function(e,t){var n,a,i,r=this.clone([e],!0),o=r._chunks[e],s=this.count(),l=0,p=Math.floor(1/t),c=this.getRawIndex(0),d=new(Gx(this._rawCount))(Math.min(2*(Math.ceil(s/p)+2),s));d[l++]=c;for(var u=1;u<s-1;u+=p){for(var m=Math.min(u+p,s-1),h=Math.min(u+2*p,s),g=(h+m)/2,f=0,y=m;y<h;y++){var v=o[T=this.getRawIndex(y)];isNaN(v)||(f+=v)}f/=h-m;var b=u,x=Math.min(u+p,s),w=u-1,S=o[c];n=-1,i=b;var C=-1,_=0;for(y=b;y<x;y++){var T;v=o[T=this.getRawIndex(y)];isNaN(v)?(_++,C<0&&(C=T)):(a=Math.abs((w-g)*(v-S)-(w-y)*(f-S)))>n&&(n=a,i=T)}_>0&&_<x-b&&(d[l++]=Math.min(C,i),i=Math.max(C,i)),d[l++]=i,c=i}return d[l++]=this.getRawIndex(s-1),r._count=l,r._indices=d,r.getRawIndex=this._getRawIdx,r},e.prototype.downSample=function(e,t,n,a){for(var i=this.clone([e],!0),r=i._chunks,o=[],s=Math.floor(1/t),l=r[e],p=this.count(),c=i._rawExtent[e]=[1/0,-1/0],d=new(Gx(this._rawCount))(Math.ceil(p/s)),u=0,m=0;m<p;m+=s){s>p-m&&(s=p-m,o.length=s);for(var h=0;h<s;h++){var g=this.getRawIndex(m+h);o[h]=l[g]}var f=n(o),y=this.getRawIndex(Math.min(m+a(o,f)||0,p-1));l[y]=f,f<c[0]&&(c[0]=f),f>c[1]&&(c[1]=f),d[u++]=y}return i._count=u,i._indices=d,i._updateGetRawIdx(),i},e.prototype.each=function(e,t){if(this._count)for(var n=e.length,a=this._chunks,i=0,r=this.count();i<r;i++){var o=this.getRawIndex(i);switch(n){case 0:t(i);break;case 1:t(a[e[0]][o],i);break;case 2:t(a[e[0]][o],a[e[1]][o],i);break;default:for(var s=0,l=[];s<n;s++)l[s]=a[e[s]][o];l[s]=i,t.apply(null,l)}}},e.prototype.getDataExtent=function(e){var t=this._chunks[e],n=[1/0,-1/0];if(!t)return n;var a,i=this.count();if(!this._indices)return this._rawExtent[e].slice();if(a=this._extent[e])return a.slice();for(var r=(a=n)[0],o=a[1],s=0;s<i;s++){var l=t[this.getRawIndex(s)];l<r&&(r=l),l>o&&(o=l)}return a=[r,o],this._extent[e]=a,a},e.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var n=[],a=this._chunks,i=0;i<a.length;i++)n.push(a[i][t]);return n},e.prototype.clone=function(t,n){var a,i,r=new e,o=this._chunks,s=t&&Hr(t,(function(e,t){return e[t]=!0,e}),{});if(s)for(var l=0;l<o.length;l++)r._chunks[l]=s[l]?(a=o[l],i=void 0,(i=a.constructor)===Array?a.slice():new i(a)):o[l];else r._chunks=o;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Fr(this._extent),e._rawExtent=Fr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var n=this._indices.length;t=new e(n);for(var a=0;a<n;a++)t[a]=this._indices[a]}else t=new e(this._indices);return t}return null},e.prototype._getRawIdxIdentity=function(e){return e},e.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function e(e,t,n,a){return yx(e[a],this._dimensions[a])}Fx={arrayRows:e,objectRows:function(e,t,n,a){return yx(e[t],this._dimensions[a])},keyedColumns:e,original:function(e,t,n,a){var i=e&&(null==e.value?e:e.value);return yx(i instanceof Array?i[a]:i,this._dimensions[a])},typedArray:function(e,t,n,a){return e[a]}}}(),e}(),jx=function(){function e(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,n=this._sourceHost,a=this._getUpstreamSourceManagers(),i=!!a.length;if(Wx(n)){var r=n,o=void 0,s=void 0,l=void 0;if(i){var p=a[0];p.prepareSource(),o=(l=p.getSource()).data,s=l.sourceFormat,t=[p._getVersionSign()]}else s=io(o=r.get("data",!0))?Vv:Rv,t=[];var c=this._getSourceMetaRawOption()||{},d=l&&l.metaRawOption||{},u=uo(c.seriesLayoutBy,d.seriesLayoutBy)||null,m=uo(c.sourceHeader,d.sourceHeader),h=uo(c.dimensions,d.dimensions);e=u!==d.seriesLayoutBy||!!m!=!!d.sourceHeader||h?[$b(o,{seriesLayoutBy:u,sourceHeader:m,dimensions:h},s)]:[]}else{var g=n;if(i){var f=this._applyTransform(a);e=f.sourceList,t=f.upstreamSignList}else{e=[$b(g.get("source",!0),this._getSourceMetaRawOption(),null)],t=[]}}this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,n=this._sourceHost,a=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(null!=i){var r="";1!==e.length&&$x(r)}var o,s=[],l=[];return Ur(e,(function(e){e.prepareSource();var t=e.getSource(i||0),n="";null==i||t||$x(n),s.push(t),l.push(e._getVersionSign())})),a?t=function(e,t){var n=bd(e),a=n.length,i="";a||gd(i);for(var r=0,o=a;r<o;r++)t=Ox(n[r],t),r!==o-1&&(t.length=Math.max(t.length,1));return t}(a,s,n.componentIndex):null!=i&&(t=[(o=s[0],new Hb({data:o.data,sourceFormat:o.sourceFormat,seriesLayoutBy:o.seriesLayoutBy,dimensionsDefine:Fr(o.dimensionsDefine),startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount}))]),{sourceList:t,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var n=e[t];if(n._isDirty()||this._upstreamSignList[t]!==n._getVersionSign())return!0}},e.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(e)}return t},e.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},e.prototype._innerGetDataStore=function(e,t,n){var a=this._storeList,i=a[0];i||(i=a[0]={});var r=i[n];if(!r){var o=this._getUpstreamSourceManagers()[0];Wx(this._sourceHost)&&o?r=o._innerGetDataStore(e,t,n):(r=new Ux).initData(new Jb(t,e.length),e),i[n]=r}return r},e.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Wx(e)){var t=Yv(e);return t?[t.getSourceManager()]:[]}return jr(function(e){return e.get("transform",!0)||e.get("fromTransformResult",!0)?Nd(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Rd).models:[]}(e),(function(e){return e.getSourceManager()}))},e.prototype._getSourceMetaRawOption=function(){var e,t,n,a=this._sourceHost;if(Wx(a))e=a.get("seriesLayoutBy",!0),t=a.get("sourceHeader",!0),n=a.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=a;e=i.get("seriesLayoutBy",!0),t=i.get("sourceHeader",!0),n=i.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:t,dimensions:n}},e}();function Hx(e){e.option.transform&&bo(e.option.transform)}function Wx(e){return"series"===e.mainType}function $x(e){throw new Error(e)}var Kx="line-height:1";function Yx(e,t){var n=e.color||"#6e7079",a=e.fontSize||12,i=e.fontWeight||"400",r=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+ss(a+"")+"px;color:"+ss(n)+";font-weight:"+ss(i+""),valueStyle:"font-size:"+ss(o+"")+"px;color:"+ss(r)+";font-weight:"+ss(s+"")}:{nameStyle:{fontSize:a,fill:n,fontWeight:i},valueStyle:{fontSize:o,fill:r,fontWeight:s}}}var Xx=[0,10,20,30],Zx=["","\n","\n\n","\n\n\n"];function Qx(e,t){return t.type=e,t}function Jx(e){return"section"===e.type}function ew(e){return Jx(e)?nw:aw}function tw(e){if(Jx(e)){var t=0,n=e.blocks.length,a=n>1||n>0&&!e.noHeader;return Ur(e.blocks,(function(e){var n=tw(e);n>=t&&(t=n+ +(a&&(!n||Jx(e)&&!e.noHeader)))})),t}return 0}function nw(e,t,n,a){var i,r=t.noHeader,o=(i=tw(t),{html:Xx[i],richText:Zx[i]}),s=[],l=t.blocks||[];fo(!l||Zr(l)),l=l||[];var p=e.orderMode;if(t.sortBlocks&&p){l=l.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(Mo(c,p)){var d=new Cx(c[p],null);l.sort((function(e,t){return d.evaluate(e.sortParam,t.sortParam)}))}else"seriesDesc"===p&&l.reverse()}Ur(l,(function(n,i){var r=t.valueFormatter,l=ew(n)(r?Nr(Nr({},e),{valueFormatter:r}):e,n,i>0?o.html:0,a);null!=l&&s.push(l)}));var u="richText"===e.renderMode?s.join(o.richText):rw(s.join(""),r?n:o.html);if(r)return u;var m=dv(t.header,"ordinal",e.useUTC),h=Yx(a,e.renderMode).nameStyle;return"richText"===e.renderMode?ow(e,m,h)+o.richText+u:rw('<div style="'+h+";"+Kx+';">'+ss(m)+"</div>"+u,n)}function aw(e,t,n,a){var i=e.renderMode,r=t.noName,o=t.noValue,s=!t.markerType,l=t.name,p=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(e){return jr(e=Zr(e)?e:[e],(function(e,t){return dv(e,Zr(m)?m[t]:m,p)}))};if(!r||!o){var d=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),u=r?"":dv(l,"ordinal",p),m=t.valueType,h=o?[]:c(t.value,t.dataIndex),g=!s||!r,f=!s&&r,y=Yx(a,i),v=y.nameStyle,b=y.valueStyle;return"richText"===i?(s?"":d)+(r?"":ow(e,u,v))+(o?"":function(e,t,n,a,i){var r=[i],o=a?10:20;return n&&r.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Zr(t)?t.join("  "):t,r)}(e,h,g,f,b)):rw((s?"":d)+(r?"":function(e,t,n){return'<span style="'+n+";"+(t?"margin-left:2px":"")+'">'+ss(e)+"</span>"}(u,!s,v))+(o?"":function(e,t,n,a){var i=n?"10px":"20px",r=t?"float:right;margin-left:"+i:"";return e=Zr(e)?e:[e],'<span style="'+r+";"+a+'">'+jr(e,(function(e){return ss(e)})).join("&nbsp;&nbsp;")+"</span>"}(h,g,f,b)),n)}}function iw(e,t,n,a,i,r){if(e)return ew(e)({useUTC:i,renderMode:n,orderMode:a,markupStyleCreator:t,valueFormatter:e.valueFormatter},e,0,r)}function rw(e,t){return'<div style="'+("margin: "+t+"px 0 0")+";"+Kx+';">'+e+'<div style="clear:both"></div></div>'}function ow(e,t,n){return e.markupStyleCreator.wrapRichTextStyle(t,n)}function sw(e,t){return fv(e.getData().getItemVisual(t,"style")[e.visualDrawType])}function lw(e,t){var n=e.get("padding");return null!=n?n:"richText"===t?[8,10]:10}var pw=function(){function e(){this.richTextStyles={},this._nextStyleNameId=dd()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(e,t,n){var a="richText"===n?this._generateStyleName():null,i=gv({color:t,type:e,renderMode:n,markerId:a});return Jr(i)?i:(this.richTextStyles[a]=i.style,i.content)},e.prototype.wrapRichTextStyle=function(e,t){var n={};Zr(t)?Ur(t,(function(e){return Nr(n,e)})):Nr(n,t);var a=this._generateStyleName();return this.richTextStyles[a]=n,"{"+a+"|"+e+"}"},e}();function cw(e){var t,n,a,i,r=e.series,o=e.dataIndex,s=e.multipleSeries,l=r.getData(),p=l.mapDimensionsAll("defaultedTooltip"),c=p.length,d=r.getRawValue(o),u=Zr(d),m=sw(r,o);if(c>1||u&&!c){var h=function(e,t,n,a,i){var r=t.getData(),o=Hr(e,(function(e,t,n){var a=r.getDimensionInfo(n);return e||a&&!1!==a.tooltip&&null!=a.displayName}),!1),s=[],l=[],p=[];function c(e,t){var n=r.getDimensionInfo(t);n&&!1!==n.otherDims.tooltip&&(o?p.push(Qx("nameValue",{markerType:"subItem",markerColor:i,name:n.displayName,value:e,valueType:n.type})):(s.push(e),l.push(n.type)))}return a.length?Ur(a,(function(e){c(cx(r,n,e),e)})):Ur(e,c),{inlineValues:s,inlineValueTypes:l,blocks:p}}(d,r,o,p,m);t=h.inlineValues,n=h.inlineValueTypes,a=h.blocks,i=h.inlineValues[0]}else if(c){var g=l.getDimensionInfo(p[0]);i=t=cx(l,o,p[0]),n=g.type}else i=t=u?d[0]:d;var f=Md(r),y=f&&r.name||"",v=l.getName(o),b=s?y:v;return Qx("section",{header:y,noHeader:s||!f,sortParam:i,blocks:[Qx("nameValue",{markerType:"item",markerColor:m,name:b,noName:!yo(b),value:t,valueType:n,dataIndex:o})].concat(a||[])})}var dw=Dd();function uw(e,t){return e.getName(t)||e.getId(t)}var mw="__universalTransitionEnabled",hw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return ze(t,e),t.prototype.init=function(e,t,n){this.seriesIndex=this.componentIndex,this.dataTask=hx({count:fw,reset:yw}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),(dw(this).sourceManager=new jx(this)).prepareSource();var a=this.getInitialData(e,n);bw(a,this),this.dataTask.context.data=a,dw(this).dataBeforeProcessed=a,gw(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(e,t){var n=Tv(this),a=n?Ev(e):{},i=this.subType;Pv.hasClass(i)&&(i+="Series"),Rr(e,t.getTheme().get(this.subType)),Rr(e,this.getDefaultOption()),xd(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Iv(e,a,n)},t.prototype.mergeOption=function(e,t){e=Rr(this.option,e,!0),this.fillDataTextStyle(e.data);var n=Tv(this);n&&Iv(this.option,e,n);var a=dw(this).sourceManager;a.dirty(),a.prepareSource();var i=this.getInitialData(e,t);bw(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,dw(this).dataBeforeProcessed=i,gw(this),this._initSelectedMapFromData(i)},t.prototype.fillDataTextStyle=function(e){if(e&&!io(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&xd(e[n],"label",t)},t.prototype.getInitialData=function(e,t){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var t=ww(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return dw(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var t=ww(this);if(t){var n=t.context;n.outputData=e,t!==this.dataTask&&(n.data=e)}dw(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return _o(e)},t.prototype.getSourceManager=function(){return dw(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return dw(this).dataBeforeProcessed},t.prototype.getColorBy=function(){return this.get("colorBy")||"series"},t.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,t,n){return cw({series:this,dataIndex:e,multipleSeries:t})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(mr.node&&(!e||!e.ssr))return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,t,n){var a=this.ecModel,i=ib.prototype.getColorFromPalette.call(this,e,t,n);return i||(i=a.getColorFromPalette(e,t,n)),i},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,t){this._innerSelect(this.getData(t),e)},t.prototype.unselect=function(e,t){var n=this.option.selectedMap;if(n){var a=this.option.selectedMode,i=this.getData(t);if("series"===a||"all"===n)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var r=0;r<e.length;r++){var o=uw(i,e[r]);n[o]=!1,this._selectedDataIndicesMap[o]=-1}}},t.prototype.toggleSelect=function(e,t){for(var n=[],a=0;a<e.length;a++)n[0]=e[a],this.isSelected(e[a],t)?this.unselect(n,t):this.select(n,t)},t.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,t=Kr(e),n=[],a=0;a<t.length;a++){var i=e[t[a]];i>=0&&n.push(i)}return n},t.prototype.isSelected=function(e,t){var n=this.option.selectedMap;if(!n)return!1;var a=this.getData(t);return("all"===n||n[uw(a,e)])&&!a.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[mw])return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},t.prototype._innerSelect=function(e,t){var n,a,i=this.option,r=i.selectedMode,o=t.length;if(r&&o)if("series"===r)i.selectedMap="all";else if("multiple"===r){no(i.selectedMap)||(i.selectedMap={});for(var s=i.selectedMap,l=0;l<o;l++){var p=t[l];s[d=uw(e,p)]=!0,this._selectedDataIndicesMap[d]=e.getRawIndex(p)}}else if("single"===r||!0===r){var c=t[o-1],d=uw(e,c);i.selectedMap=((n={})[d]=!0,n),this._selectedDataIndicesMap=((a={})[d]=e.getRawIndex(c),a)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var t=[];e.hasItemOption&&e.each((function(n){var a=e.getRawDataItem(n);a&&a.selected&&t.push(n)})),t.length>0&&this._innerSelect(e,t)}},t.registerClass=function(e){return Pv.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(Pv);function gw(e){var t=e.name;Md(e)||(e.name=function(e){var t=e.getRawData(),n=t.mapDimensionsAll("seriesName"),a=[];return Ur(n,(function(e){var n=t.getDimensionInfo(e);n.displayName&&a.push(n.displayName)})),a.join(" ")}(e)||t)}function fw(e){return e.model.getRawData().count()}function yw(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),vw}function vw(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function bw(e,t){Ur(To(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),(function(n){e.wrapMethod(n,Xr(xw,t))}))}function xw(e,t){var n=ww(e);return n&&n.setOutputEnd((t||this).count()),t}function ww(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var a=n.currentTask;if(a){var i=a.agentStubMap;i&&(a=i.get(e.uid))}return a}}Gr(hw,ux),Gr(hw,ib),Hd(hw,Pv);var Sw=function(){function e(){this.group=new Bc,this.uid=Sy("viewComponent")}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,a){},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,a){},e.prototype.updateLayout=function(e,t,n,a){},e.prototype.updateVisual=function(e,t,n,a){},e.prototype.toggleBlurSeries=function(e,t,n){},e.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},e}();function Cw(){var e=Dd();return function(t){var n=e(t),a=t.pipelineContext,i=!!n.large,r=!!n.progressiveRender,o=n.large=!(!a||!a.large),s=n.progressiveRender=!(!a||!a.progressiveRender);return!(i===o&&r===s)&&"reset"}}jd(Sw),Yd(Sw);var _w=Dd(),Tw=Cw(),Iw=function(){function e(){this.group=new Bc,this.uid=Sy("viewChart"),this.renderTask=hx({plan:kw,reset:Pw}),this.renderTask.context={view:this}}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,a){0},e.prototype.highlight=function(e,t,n,a){var i=e.getData(a&&a.dataType);i&&Mw(i,a,"emphasis")},e.prototype.downplay=function(e,t,n,a){var i=e.getData(a&&a.dataType);i&&Mw(i,a,"normal")},e.prototype.remove=function(e,t){this.group.removeAll()},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,a){this.render(e,t,n,a)},e.prototype.updateLayout=function(e,t,n,a){this.render(e,t,n,a)},e.prototype.updateVisual=function(e,t,n,a){this.render(e,t,n,a)},e.prototype.eachRendered=function(e){Hf(this.group,e)},e.markUpdateMethod=function(e,t){_w(e).updateMethod=t},e.protoInitialize=void(e.prototype.type="chart"),e}();function Ew(e,t,n){e&&Wh(e)&&("emphasis"===t?Ih:Eh)(e,n)}function Mw(e,t,n){var a=Pd(e,t),i=t&&null!=t.highlightKey?function(e){var t=eh[e];return null==t&&Jm<=32&&(t=eh[e]=Jm++),t}(t.highlightKey):null;null!=a?Ur(bd(a),(function(t){Ew(e.getItemGraphicEl(t),n,i)})):e.eachItemGraphicEl((function(e){Ew(e,n,i)}))}function kw(e){return Tw(e.model)}function Pw(e){var t=e.model,n=e.ecModel,a=e.api,i=e.payload,r=t.pipelineContext.progressiveRender,o=e.view,s=i&&_w(i).updateMethod,l=r?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==l&&o[l](t,n,a,i),Dw[l]}jd(Iw),Yd(Iw);var Dw={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Ow="\0__throttleOriginMethod",Aw="\0__throttleRate",Fw="\0__throttleType";function Rw(e,t,n){var a,i,r,o,s,l=0,p=0,c=null;function d(){p=(new Date).getTime(),c=null,e.apply(r,o||[])}t=t||0;var u=function(){for(var e=[],u=0;u<arguments.length;u++)e[u]=arguments[u];a=(new Date).getTime(),r=this,o=e;var m=s||t,h=s||n;s=null,i=a-(h?l:p)-m,clearTimeout(c),h?c=setTimeout(d,m):i>=0?d():c=setTimeout(d,-i),l=a};return u.clear=function(){c&&(clearTimeout(c),c=null)},u.debounceNextCall=function(e){s=e},u}function Bw(e,t,n,a){var i=e[t];if(i){var r=i[Ow]||i,o=i[Fw];if(i[Aw]!==n||o!==a){if(null==n||!a)return e[t]=r;(i=e[t]=Rw(r,n,"debounce"===a))[Ow]=r,i[Fw]=a,i[Aw]=n}return i}}function Nw(e,t){var n=e[t];n&&n[Ow]&&(n.clear&&n.clear(),e[t]=n[Ow])}var Lw=Dd(),Vw={itemStyle:Xd(yy,!0),lineStyle:Xd(hy,!0)},qw={lineStyle:"stroke",itemStyle:"fill"};function Gw(e,t){var n=e.visualStyleMapper||Vw[t];return n||(console.warn("Unknown style type '"+t+"'."),Vw.itemStyle)}function zw(e,t){var n=e.visualDrawType||qw[t];return n||(console.warn("Unknown style type '"+t+"'."),"fill")}var Uw={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),a=e.visualStyleAccessPath||"itemStyle",i=e.getModel(a),r=Gw(e,a)(i),o=i.getShallow("decal");o&&(n.setVisual("decal",o),o.dirty=!0);var s=zw(e,a),l=r[s],p=Qr(l)?l:null,c="auto"===r.fill||"auto"===r.stroke;if(!r[s]||p||c){var d=e.getColorFromPalette(e.name,null,t.getSeriesCount());r[s]||(r[s]=d,n.setVisual("colorFromPalette",!0)),r.fill="auto"===r.fill||Qr(r.fill)?d:r.fill,r.stroke="auto"===r.stroke||Qr(r.stroke)?d:r.stroke}if(n.setVisual("style",r),n.setVisual("drawType",s),!t.isSeriesFiltered(e)&&p)return n.setVisual("colorFromPalette",!1),{dataEach:function(t,n){var a=e.getDataParams(n),i=Nr({},r);i[s]=p(a),t.setItemVisual(n,"style",i)}}}},jw=new xy,Hw={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.ignoreStyleOnData&&!t.isSeriesFiltered(e)){var n=e.getData(),a=e.visualStyleAccessPath||"itemStyle",i=Gw(e,a),r=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(e,t){var n=e.getRawDataItem(t);if(n&&n[a]){jw.option=n[a];var o=i(jw);Nr(e.ensureUniqueItemVisual(t,"style"),o),jw.option.decal&&(e.setItemVisual(t,"decal",jw.option.decal),jw.option.decal.dirty=!0),r in o&&e.setItemVisual(t,"colorFromPalette",!1)}}:null}}}},Ww={performRawSeries:!0,overallReset:function(e){var t=_o();e.eachSeries((function(e){var n=e.getColorBy();if(!e.isColorBySeries()){var a=e.type+"-"+n,i=t.get(a);i||(i={},t.set(a,i)),Lw(e).scope=i}})),e.eachSeries((function(t){if(!t.isColorBySeries()&&!e.isSeriesFiltered(t)){var n=t.getRawData(),a={},i=t.getData(),r=Lw(t).scope,o=t.visualStyleAccessPath||"itemStyle",s=zw(t,o);i.each((function(e){var t=i.getRawIndex(e);a[t]=e})),n.each((function(e){var o=a[e];if(i.getItemVisual(o,"colorFromPalette")){var l=i.ensureUniqueItemVisual(o,"style"),p=n.getName(e)||e+"",c=n.count();l[s]=t.getColorFromPalette(p,r,c)}}))}}))}},$w=Math.PI;var Kw=function(){function e(e,t,n,a){this._stageTaskMap=_o(),this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),a=this._visualHandlers=a.slice(),this._allHandlers=n.concat(a)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each((function(e){var t=e.overallTask;t&&t.dirty()}))},e.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),a=n.context,i=!t&&n.progressiveEnabled&&(!a||a.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,r=a&&a.modDataCount;return{step:i,modBy:null!=r?Math.ceil(r/i):null,modDataCount:r}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),a=e.getData().count(),i=n.progressiveEnabled&&t.incrementalPrepareRender&&a>=n.threshold,r=e.get("large")&&a>=e.get("largeThreshold"),o="mod"===e.get("progressiveChunkMode")?a:null;e.pipelineContext=n.context={progressiveRender:i,modDataCount:o,large:r}},e.prototype.restorePipelines=function(e){var t=this,n=t._pipelineMap=_o();e.eachSeries((function(e){var a=e.getProgressive(),i=e.uid;n.set(i,{id:i,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:a&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(e,e.dataTask)}))},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),n=this.api;Ur(this._allHandlers,(function(a){var i=e.get(a.uid)||e.set(a.uid,{}),r="";fo(!(a.reset&&a.overallReset),r),a.reset&&this._createSeriesStageTask(a,i,t,n),a.overallReset&&this._createOverallStageTask(a,i,t,n)}),this)},e.prototype.prepareView=function(e,t,n,a){var i=e.renderTask,r=i.context;r.model=t,r.ecModel=n,r.api=a,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,n){this._performStageTasks(this._visualHandlers,e,t,n)},e.prototype._performStageTasks=function(e,t,n,a){a=a||{};var i=!1,r=this;function o(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}Ur(e,(function(e,s){if(!a.visualType||a.visualType===e.visualType){var l=r._stageTaskMap.get(e.uid),p=l.seriesTaskMap,c=l.overallTask;if(c){var d,u=c.agentStubMap;u.each((function(e){o(a,e)&&(e.dirty(),d=!0)})),d&&c.dirty(),r.updatePayload(c,n);var m=r.getPerformArgs(c,a.block);u.each((function(e){e.perform(m)})),c.perform(m)&&(i=!0)}else p&&p.each((function(s,l){o(a,s)&&s.dirty();var p=r.getPerformArgs(s,a.block);p.skip=!e.performRawSeries&&t.isSeriesFiltered(s.context.model),r.updatePayload(s,n),s.perform(p)&&(i=!0)}))}})),this.unfinished=i||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries((function(e){t=e.dataTask.perform()||t})),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each((function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)}))},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,n,a){var i=this,r=t.seriesTaskMap,o=t.seriesTaskMap=_o(),s=e.seriesType,l=e.getTargetSeries;function p(t){var s=t.uid,l=o.set(s,r&&r.get(s)||hx({plan:Jw,reset:eS,count:aS}));l.context={model:t,ecModel:n,api:a,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(t,l)}e.createOnAllSeries?n.eachRawSeries(p):s?n.eachRawSeriesByType(s,p):l&&l(n,a).each(p)},e.prototype._createOverallStageTask=function(e,t,n,a){var i=this,r=t.overallTask=t.overallTask||hx({reset:Yw});r.context={ecModel:n,api:a,overallReset:e.overallReset,scheduler:i};var o=r.agentStubMap,s=r.agentStubMap=_o(),l=e.seriesType,p=e.getTargetSeries,c=!0,d=!1,u="";function m(e){var t=e.uid,n=s.set(t,o&&o.get(t)||(d=!0,hx({reset:Xw,onDirty:Qw})));n.context={model:e,overallProgress:c},n.agent=r,n.__block=c,i._pipe(e,n)}fo(!e.createOnAllSeries,u),l?n.eachRawSeriesByType(l,m):p?p(n,a).each(m):(c=!1,Ur(n.getSeries(),m)),d&&r.dirty()},e.prototype._pipe=function(e,t){var n=e.uid,a=this._pipelineMap.get(n);!a.head&&(a.head=t),a.tail&&a.tail.pipe(t),a.tail=t,t.__idxInPipeline=a.count++,t.__pipeline=a},e.wrapStageHandler=function(e,t){return Qr(e)&&(e={overallReset:e,seriesType:iS(e)}),e.uid=Sy("stageHandler"),t&&(e.visualType=t),e},e}();function Yw(e){e.overallReset(e.ecModel,e.api,e.payload)}function Xw(e){return e.overallProgress&&Zw}function Zw(){this.agent.dirty(),this.getDownstream().dirty()}function Qw(){this.agent&&this.agent.dirty()}function Jw(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function eS(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=bd(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?jr(t,(function(e,t){return nS(t)})):tS}var tS=nS(0);function nS(e){return function(t,n){var a=n.data,i=n.resetDefines[e];if(i&&i.dataEach)for(var r=t.start;r<t.end;r++)i.dataEach(a,r);else i&&i.progress&&i.progress(t,a)}}function aS(e){return e.data.count()}function iS(e){rS=null;try{e(oS,sS)}catch(e){}return rS}var rS,oS={},sS={};function lS(e,t){for(var n in t.prototype)e[n]=ko}lS(oS,lb),lS(sS,mb),oS.eachSeriesByType=oS.eachRawSeriesByType=function(e){rS=e},oS.eachComponent=function(e){"series"===e.mainType&&e.subType&&(rS=e.subType)};var pS=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],cS={color:pS,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],pS]},dS="#B9B8CE",uS="#100C2A",mS=function(){return{axisLine:{lineStyle:{color:dS}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},hS=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],gS={darkMode:!0,color:hS,backgroundColor:uS,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:dS}},textStyle:{color:dS},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:dS}},dataZoom:{borderColor:"#71708A",textStyle:{color:dS},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:dS}},timeline:{lineStyle:{color:dS},label:{color:dS},controlStyle:{color:dS,borderColor:dS}},calendar:{itemStyle:{color:uS},dayLabel:{color:dS},monthLabel:{color:dS},yearLabel:{color:dS}},timeAxis:mS(),logAxis:mS(),valueAxis:mS(),categoryAxis:mS(),line:{symbol:"circle"},graph:{color:hS},gauge:{title:{color:dS},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:dS},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};gS.categoryAxis.splitLine.show=!1;var fS=function(){function e(){}return e.prototype.normalizeQuery=function(e){var t={},n={},a={};if(Jr(e)){var i=Ud(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var r=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Ur(e,(function(e,i){for(var s=!1,l=0;l<r.length;l++){var p=r[l],c=i.lastIndexOf(p);if(c>0&&c===i.length-p.length){var d=i.slice(0,c);"data"!==d&&(t.mainType=d,t[p.toLowerCase()]=e,s=!0)}}o.hasOwnProperty(i)&&(n[i]=e,s=!0),s||(a[i]=e)}))}return{cptQuery:t,dataQuery:n,otherQuery:a}},e.prototype.filter=function(e,t){var n=this.eventInfo;if(!n)return!0;var a=n.targetEl,i=n.packedEvent,r=n.model,o=n.view;if(!r||!o)return!0;var s=t.cptQuery,l=t.dataQuery;return p(s,r,"mainType")&&p(s,r,"subType")&&p(s,r,"index","componentIndex")&&p(s,r,"name")&&p(s,r,"id")&&p(l,i,"name")&&p(l,i,"dataIndex")&&p(l,i,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,a,i));function p(e,t,n,a){return null==e[n]||t[a||n]===e[n]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),yS=["symbol","symbolSize","symbolRotate","symbolOffset"],vS=yS.concat(["symbolKeepAspect"]),bS={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData();if(e.legendIcon&&n.setVisual("legendIcon",e.legendIcon),e.hasSymbolVisual){for(var a={},i={},r=!1,o=0;o<yS.length;o++){var s=yS[o],l=e.get(s);Qr(l)?(r=!0,i[s]=l):a[s]=l}if(a.symbol=a.symbol||e.defaultSymbol,n.setVisual(Nr({legendIcon:e.legendIcon||a.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},a)),!t.isSeriesFiltered(e)){var p=Kr(i);return{dataEach:r?function(t,n){for(var a=e.getRawValue(n),r=e.getDataParams(n),o=0;o<p.length;o++){var s=p[o];t.setItemVisual(n,s,i[s](a,r))}}:null}}}}},xS={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(e.hasSymbolVisual&&!t.isSeriesFiltered(e))return{dataEach:e.getData().hasItemOption?function(e,t){for(var n=e.getItemModel(t),a=0;a<vS.length;a++){var i=vS[a],r=n.getShallow(i,!0);null!=r&&e.setItemVisual(t,i,r)}}:null}}};function wS(e,t,n){switch(n){case"color":return e.getItemVisual(t,"style")[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,n)}}function SS(e,t){switch(t){case"color":return e.getVisual("style")[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function CS(e,t,n,a){switch(n){case"color":e.ensureUniqueItemVisual(t,"style")[e.getVisual("drawType")]=a,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=a;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,n,a)}}function _S(e,t){function n(t,n){var a=[];return t.eachComponent({mainType:"series",subType:e,query:n},(function(e){a.push(e.seriesIndex)})),a}Ur([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],(function(e){t(e[0],(function(t,a,i){t=Nr({},t),i.dispatchAction(Nr(t,{type:e[1],seriesIndex:n(a,t)}))}))}))}function TS(e,t,n,a,i){var r=e+t;n.isSilent(r)||a.eachComponent({mainType:"series",subType:"pie"},(function(e){for(var t=e.seriesIndex,a=e.option.selectedMap,o=i.selected,s=0;s<o.length;s++)if(o[s].seriesIndex===t){var l=e.getData(),p=Pd(l,i.fromActionPayload);n.trigger(r,{type:r,seriesId:e.id,name:Zr(p)?l.getName(p[0]):l.getName(p),selected:Jr(a)?a:Nr({},a)})}}))}function IS(e,t,n){for(var a;e&&(!t(e)||(a=e,!n));)e=e.__hostTarget||e.parent;return a}var ES=Math.round(9*Math.random()),MS="function"==typeof Object.defineProperty,kS=function(){function e(){this._id="__ec_inner_"+ES++}return e.prototype.get=function(e){return this._guard(e)[this._id]},e.prototype.set=function(e,t){var n=this._guard(e);return MS?Object.defineProperty(n,this._id,{value:t,enumerable:!1,configurable:!0}):n[this._id]=t,this},e.prototype.delete=function(e){return!!this.has(e)&&(delete this._guard(e)[this._id],!0)},e.prototype.has=function(e){return!!this._guard(e)[this._id]},e.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},e}(),PS=Cm.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,a=t.cy,i=t.width/2,r=t.height/2;e.moveTo(n,a-r),e.lineTo(n+i,a+r),e.lineTo(n-i,a+r),e.closePath()}}),DS=Cm.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,a=t.cy,i=t.width/2,r=t.height/2;e.moveTo(n,a-r),e.lineTo(n+i,a),e.lineTo(n,a+r),e.lineTo(n-i,a),e.closePath()}}),OS=Cm.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,a=t.y,i=t.width/5*3,r=Math.max(i,t.height),o=i/2,s=o*o/(r-o),l=a-r+o+s,p=Math.asin(s/o),c=Math.cos(p)*o,d=Math.sin(p),u=Math.cos(p),m=.6*o,h=.7*o;e.moveTo(n-c,l+s),e.arc(n,l,o,Math.PI-p,2*Math.PI+p),e.bezierCurveTo(n+c-d*m,l+s+u*m,n,a-h,n,a),e.bezierCurveTo(n,a-h,n-c+d*m,l+s+u*m,n-c,l+s),e.closePath()}}),AS=Cm.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,a=t.width,i=t.x,r=t.y,o=a/3*2;e.moveTo(i,r),e.lineTo(i+o,r+n),e.lineTo(i,r+n/4*3),e.lineTo(i-o,r+n),e.lineTo(i,r),e.closePath()}}),FS={line:function(e,t,n,a,i){i.x1=e,i.y1=t+a/2,i.x2=e+n,i.y2=t+a/2},rect:function(e,t,n,a,i){i.x=e,i.y=t,i.width=n,i.height=a},roundRect:function(e,t,n,a,i){i.x=e,i.y=t,i.width=n,i.height=a,i.r=Math.min(n,a)/4},square:function(e,t,n,a,i){var r=Math.min(n,a);i.x=e,i.y=t,i.width=r,i.height=r},circle:function(e,t,n,a,i){i.cx=e+n/2,i.cy=t+a/2,i.r=Math.min(n,a)/2},diamond:function(e,t,n,a,i){i.cx=e+n/2,i.cy=t+a/2,i.width=n,i.height=a},pin:function(e,t,n,a,i){i.x=e+n/2,i.y=t+a/2,i.width=n,i.height=a},arrow:function(e,t,n,a,i){i.x=e+n/2,i.y=t+a/2,i.width=n,i.height=a},triangle:function(e,t,n,a,i){i.cx=e+n/2,i.cy=t+a/2,i.width=n,i.height=a}},RS={};Ur({line:zg,rect:Rm,roundRect:Rm,square:Rm,circle:gg,diamond:DS,pin:OS,arrow:AS,triangle:PS},(function(e,t){RS[t]=new e}));var BS=Cm.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var a=Tc(e,t,n),i=this.shape;return i&&"pin"===i.symbolType&&"inside"===t.position&&(a.y=n.y+.4*n.height),a},buildPath:function(e,t,n){var a=t.symbolType;if("none"!==a){var i=RS[a];i||(i=RS[a="rect"]),FS[a](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,n)}}});function NS(e,t){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=e:n.fill=e,this.markRedraw()}}function LS(e,t,n,a,i,r,o){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?If(e.slice(8),new Ls(t,n,a,i),o?"center":"cover"):0===e.indexOf("path://")?Tf(e.slice(7),{},new Ls(t,n,a,i),o?"center":"cover"):new BS({shape:{symbolType:e,x:t,y:n,width:a,height:i}})).__isEmptyBrush=l,s.setColor=NS,r&&s.setColor(r),s}function VS(e){return Zr(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function qS(e,t){if(null!=e)return Zr(e)||(e=[e,e]),[$c(e[0],t[0])||0,$c(uo(e[1],e[0]),t[1])||0]}function GS(e){return isFinite(e)}function zS(e,t,n){for(var a="radial"===t.type?function(e,t,n){var a=n.width,i=n.height,r=Math.min(a,i),o=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(o=o*a+n.x,s=s*i+n.y,l*=r),o=GS(o)?o:.5,s=GS(s)?s:.5,l=l>=0&&GS(l)?l:.5,e.createRadialGradient(o,s,0,o,s,l)}(e,t,n):function(e,t,n){var a=null==t.x?0:t.x,i=null==t.x2?1:t.x2,r=null==t.y?0:t.y,o=null==t.y2?0:t.y2;return t.global||(a=a*n.width+n.x,i=i*n.width+n.x,r=r*n.height+n.y,o=o*n.height+n.y),a=GS(a)?a:0,i=GS(i)?i:1,r=GS(r)?r:0,o=GS(o)?o:0,e.createLinearGradient(a,r,i,o)}(e,t,n),i=t.colorStops,r=0;r<i.length;r++)a.addColorStop(i[r].offset,i[r].color);return a}function US(e){return parseInt(e,10)}function jS(e,t,n){var a=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=n[a]&&"auto"!==n[a])return parseFloat(n[a]);var s=document.defaultView.getComputedStyle(e);return(e[i]||US(s[a])||US(e.style[a]))-(US(s[r])||0)-(US(s[o])||0)|0}function HS(e){var t,n,a=e.style,i=a.lineDash&&a.lineWidth>0&&(t=a.lineDash,n=a.lineWidth,t&&"solid"!==t&&n>0?"dashed"===t?[4*n,2*n]:"dotted"===t?[n]:to(t)?[t]:Zr(t)?t:null:null),r=a.lineDashOffset;if(i){var o=a.strokeNoScale&&e.getLineScale?e.getLineScale():1;o&&1!==o&&(i=jr(i,(function(e){return e/o})),r/=o)}return[i,r]}var WS=new am(!0);function $S(e){var t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))}function KS(e){return"string"==typeof e&&"none"!==e}function YS(e){var t=e.fill;return null!=t&&"none"!==t}function XS(e,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var n=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=n}else e.fill()}function ZS(e,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var n=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=n}else e.stroke()}function QS(e,t,n){var a=tu(t.image,t.__image,n);if(au(a)){var i=e.createPattern(a,t.repeat||"repeat");if("function"==typeof DOMMatrix&&i&&i.setTransform){var r=new DOMMatrix;r.translateSelf(t.x||0,t.y||0),r.rotateSelf(0,0,(t.rotation||0)*Po),r.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(r)}return i}}var JS=["shadowBlur","shadowOffsetX","shadowOffsetY"],eC=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function tC(e,t,n,a,i){var r=!1;if(!a&&t===(n=n||{}))return!1;if(a||t.opacity!==n.opacity){iC(e,i),r=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?yu.opacity:o}(a||t.blend!==n.blend)&&(r||(iC(e,i),r=!0),e.globalCompositeOperation=t.blend||yu.blend);for(var s=0;s<JS.length;s++){var l=JS[s];(a||t[l]!==n[l])&&(r||(iC(e,i),r=!0),e[l]=e.dpr*(t[l]||0))}return(a||t.shadowColor!==n.shadowColor)&&(r||(iC(e,i),r=!0),e.shadowColor=t.shadowColor||yu.shadowColor),r}function nC(e,t,n,a,i){var r=rC(t,i.inHover),o=a?null:n&&rC(n,i.inHover)||{};if(r===o)return!1;var s=tC(e,r,o,a,i);if((a||r.fill!==o.fill)&&(s||(iC(e,i),s=!0),KS(r.fill)&&(e.fillStyle=r.fill)),(a||r.stroke!==o.stroke)&&(s||(iC(e,i),s=!0),KS(r.stroke)&&(e.strokeStyle=r.stroke)),(a||r.opacity!==o.opacity)&&(s||(iC(e,i),s=!0),e.globalAlpha=null==r.opacity?1:r.opacity),t.hasStroke()){var l=r.lineWidth/(r.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==l&&(s||(iC(e,i),s=!0),e.lineWidth=l)}for(var p=0;p<eC.length;p++){var c=eC[p],d=c[0];(a||r[d]!==o[d])&&(s||(iC(e,i),s=!0),e[d]=r[d]||c[1])}return s}function aC(e,t){var n=t.transform,a=e.dpr||1;n?e.setTransform(a*n[0],a*n[1],a*n[2],a*n[3],a*n[4],a*n[5]):e.setTransform(a,0,0,a,0,0)}function iC(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function rC(e,t){return t&&e.__hoverStyle||e.style}function oC(e,t){sC(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function sC(e,t,n,a){var i=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return t.__dirty&=-2,void(t.__isRendered=!1);var r=t.__clipPaths,o=n.prevElClipPaths,s=!1,l=!1;if(o&&!function(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(r,o)||(o&&o.length&&(iC(e,n),e.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),r&&r.length&&(iC(e,n),e.save(),function(e,t,n){for(var a=!1,i=0;i<e.length;i++){var r=e[i];a=a||r.isZeroArea(),aC(t,r),t.beginPath(),r.buildPath(t,r.shape),t.clip()}n.allClipped=a}(r,e,n),s=!0),n.prevElClipPaths=r),n.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var p=n.prevEl;p||(l=s=!0);var c,d,u=t instanceof Cm&&t.autoBatch&&function(e){var t=YS(e),n=$S(e);return!(e.lineDash||!(+t^+n)||t&&"string"!=typeof e.fill||n&&"string"!=typeof e.stroke||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}(t.style);s||(c=i,d=p.transform,c&&d?c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||c[4]!==d[4]||c[5]!==d[5]:c||d)?(iC(e,n),aC(e,t)):u||iC(e,n);var m=rC(t,n.inHover);t instanceof Cm?(1!==n.lastDrawType&&(l=!0,n.lastDrawType=1),nC(e,t,p,l,n),u&&(n.batchFill||n.batchStroke)||e.beginPath(),function(e,t,n,a){var i,r=$S(n),o=YS(n),s=n.strokePercent,l=s<1,p=!t.path;t.silent&&!l||!p||t.createPathProxy();var c=t.path||WS,d=t.__dirty;if(!a){var u=n.fill,m=n.stroke,h=o&&!!u.colorStops,g=r&&!!m.colorStops,f=o&&!!u.image,y=r&&!!m.image,v=void 0,b=void 0,x=void 0,w=void 0,S=void 0;(h||g)&&(S=t.getBoundingRect()),h&&(v=d?zS(e,u,S):t.__canvasFillGradient,t.__canvasFillGradient=v),g&&(b=d?zS(e,m,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),f&&(x=d||!t.__canvasFillPattern?QS(e,u,t):t.__canvasFillPattern,t.__canvasFillPattern=x),y&&(w=d||!t.__canvasStrokePattern?QS(e,m,t):t.__canvasStrokePattern,t.__canvasStrokePattern=x),h?e.fillStyle=v:f&&(x?e.fillStyle=x:o=!1),g?e.strokeStyle=b:y&&(w?e.strokeStyle=w:r=!1)}var C,_,T=t.getGlobalScale();c.setScale(T[0],T[1],t.segmentIgnoreThreshold),e.setLineDash&&n.lineDash&&(C=(i=HS(t))[0],_=i[1]);var I=!0;(p||4&d)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),I=!1),c.reset(),t.buildPath(c,t.shape,a),c.toStatic(),t.pathUpdated()),I&&c.rebuildPath(e,l?s:1),C&&(e.setLineDash(C),e.lineDashOffset=_),a||(n.strokeFirst?(r&&ZS(e,n),o&&XS(e,n)):(o&&XS(e,n),r&&ZS(e,n))),C&&e.setLineDash([])}(e,t,m,u),u&&(n.batchFill=m.fill||"",n.batchStroke=m.stroke||"")):t instanceof Tm?(3!==n.lastDrawType&&(l=!0,n.lastDrawType=3),nC(e,t,p,l,n),function(e,t,n){var a,i=n.text;if(null!=i&&(i+=""),i){e.font=n.font||gr,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline;var r=void 0,o=void 0;e.setLineDash&&n.lineDash&&(r=(a=HS(t))[0],o=a[1]),r&&(e.setLineDash(r),e.lineDashOffset=o),n.strokeFirst?($S(n)&&e.strokeText(i,n.x,n.y),YS(n)&&e.fillText(i,n.x,n.y)):(YS(n)&&e.fillText(i,n.x,n.y),$S(n)&&e.strokeText(i,n.x,n.y)),r&&e.setLineDash([])}}(e,t,m)):t instanceof Mm?(2!==n.lastDrawType&&(l=!0,n.lastDrawType=2),function(e,t,n,a,i){tC(e,rC(t,i.inHover),n&&rC(n,i.inHover),a,i)}(e,t,p,l,n),function(e,t,n){var a=t.__image=tu(n.image,t.__image,t,t.onload);if(a&&au(a)){var i=n.x||0,r=n.y||0,o=t.getWidth(),s=t.getHeight(),l=a.width/a.height;if(null==o&&null!=s?o=s*l:null==s&&null!=o?s=o/l:null==o&&null==s&&(o=a.width,s=a.height),n.sWidth&&n.sHeight){var p=n.sx||0,c=n.sy||0;e.drawImage(a,p,c,n.sWidth,n.sHeight,i,r,o,s)}else if(n.sx&&n.sy){var d=o-(p=n.sx),u=s-(c=n.sy);e.drawImage(a,p,c,d,u,i,r,o,s)}else e.drawImage(a,i,r,o,s)}}(e,t,m)):t.getTemporalDisplayables&&(4!==n.lastDrawType&&(l=!0,n.lastDrawType=4),function(e,t,n){var a=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var r,o,s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(r=t.getCursor(),o=a.length;r<o;r++){(c=a[r]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),sC(e,c,s,r===o-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}for(var l=0,p=i.length;l<p;l++){var c;(c=i[l]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),sC(e,c,s,l===p-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}(e,t,n)),u&&a&&iC(e,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var lC=new kS,pC=new Bl(100),cC=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function dC(e,t){if("none"===e)return null;var n=t.getDevicePixelRatio(),a=t.getZr(),i="svg"===a.painter.type;e.dirty&&lC.delete(e);var r=lC.get(e);if(r)return r;var o=Lr(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===o.backgroundColor&&(o.backgroundColor=null);var s={repeat:"repeat"};return function(e){for(var t,r=[n],s=!0,l=0;l<cC.length;++l){var p=o[cC[l]];if(null!=p&&!Zr(p)&&!Jr(p)&&!to(p)&&"boolean"!=typeof p){s=!1;break}r.push(p)}if(s){t=r.join(",")+(i?"-svg":"");var c=pC.get(t);c&&(i?e.svgElement=c:e.image=c)}var d,u=mC(o.dashArrayX),m=function(e){if(!e||"object"==typeof e&&0===e.length)return[0,0];if(to(e)){var t=Math.ceil(e);return[t,t]}var n=jr(e,(function(e){return Math.ceil(e)}));return e.length%2?n.concat(n):n}(o.dashArrayY),h=uC(o.symbol),g=(x=u,jr(x,(function(e){return hC(e)}))),f=hC(m),y=!i&&br.createCanvas(),v=i&&{tag:"g",attrs:{},key:"dcl",children:[]},b=function(){for(var e=1,t=0,n=g.length;t<n;++t)e=md(e,g[t]);var a=1;for(t=0,n=h.length;t<n;++t)a=md(a,h[t].length);e*=a;var i=f*g.length*h.length;return{width:Math.max(1,Math.min(e,o.maxTileWidth)),height:Math.max(1,Math.min(i,o.maxTileHeight))}}();var x;y&&(y.width=b.width*n,y.height=b.height*n,d=y.getContext("2d"));(function(){d&&(d.clearRect(0,0,y.width,y.height),o.backgroundColor&&(d.fillStyle=o.backgroundColor,d.fillRect(0,0,y.width,y.height)));for(var e=0,t=0;t<m.length;++t)e+=m[t];if(e<=0)return;var r=-f,s=0,l=0,p=0;for(;r<b.height;){if(s%2==0){for(var c=l/2%h.length,g=0,x=0,w=0;g<2*b.width;){var S=0;for(t=0;t<u[p].length;++t)S+=u[p][t];if(S<=0)break;if(x%2==0){var C=.5*(1-o.symbolSize),_=g+u[p][x]*C,T=r+m[s]*C,I=u[p][x]*o.symbolSize,E=m[s]*o.symbolSize,M=w/2%h[c].length;k(_,T,I,E,h[c][M])}g+=u[p][x],++w,++x===u[p].length&&(x=0)}++p===u.length&&(p=0)}r+=m[s],++l,++s===m.length&&(s=0)}function k(e,t,r,s,l){var p=i?1:n,c=LS(l,e*p,t*p,r*p,s*p,o.color,o.symbolKeepAspect);if(i){var u=a.painter.renderOneToVNode(c);u&&v.children.push(u)}else oC(d,c)}})(),s&&pC.put(t,y||v);e.image=y,e.svgElement=v,e.svgWidth=b.width,e.svgHeight=b.height}(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/n,lC.set(e,s),e.dirty=!1,s}function uC(e){if(!e||0===e.length)return[["rect"]];if(Jr(e))return[[e]];for(var t=!0,n=0;n<e.length;++n)if(!Jr(e[n])){t=!1;break}if(t)return uC([e]);var a=[];for(n=0;n<e.length;++n)Jr(e[n])?a.push([e[n]]):a.push(e[n]);return a}function mC(e){if(!e||0===e.length)return[[0,0]];if(to(e))return[[i=Math.ceil(e),i]];for(var t=!0,n=0;n<e.length;++n)if(!to(e[n])){t=!1;break}if(t)return mC([e]);var a=[];for(n=0;n<e.length;++n)if(to(e[n])){var i=Math.ceil(e[n]);a.push([i,i])}else{(i=jr(e[n],(function(e){return Math.ceil(e)}))).length%2==1?a.push(i.concat(i)):a.push(i)}return a}function hC(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return e.length%2==1?2*t:t}var gC=new Zo,fC={};function yC(e){return fC[e]}var vC=2e3,bC=4500,xC={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:vC,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:bC,ARIA:6e3,DECAL:7e3}},wC="__flagInMainProcess",SC="__pendingUpdate",CC="__needsUpdateStatus",_C=/^[a-zA-Z0-9_]+$/,TC="__connectUpdateStatus";function IC(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!this.isDisposed())return MC(this,e,t);QC(this.id)}}function EC(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return MC(this,e,t)}}function MC(e,t,n){return n[0]=n[0]&&n[0].toLowerCase(),Zo.prototype[t].apply(e,n)}var kC,PC,DC,OC,AC,FC,RC,BC,NC,LC,VC,qC,GC,zC,UC,jC,HC,WC,$C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t}(Zo),KC=$C.prototype;KC.on=EC("on"),KC.off=EC("off");var YC=function(e){function t(t,n,a){var i=e.call(this,new fS)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],a=a||{},Jr(n)&&(n=i_[n]),i._dom=t;var r="canvas",o="auto",s=!1;a.ssr&&jc((function(e){var t=Zm(e),n=t.dataIndex;if(null!=n){var a=_o();return a.set("series_index",t.seriesIndex),a.set("data_index",n),t.ssrType&&a.set("ssr_type",t.ssrType),a}}));var l=i._zr=Gc(t,{renderer:a.renderer||r,devicePixelRatio:a.devicePixelRatio,width:a.width,height:a.height,ssr:a.ssr,useDirtyRect:uo(a.useDirtyRect,s),useCoarsePointer:uo(a.useCoarsePointer,o),pointerSize:a.pointerSize});i._ssr=a.ssr,i._throttledZrFlush=Rw(Yr(l.flush,l),17),(n=Fr(n))&&Lb(n,!0),i._theme=n,i._locale=function(e){if(Jr(e)){var t=Ey[e.toUpperCase()]||{};return e===_y||e===Ty?Fr(t):Rr(Fr(t),Fr(Ey[Iy]),!1)}return Rr(Fr(e),Fr(Ey[Iy]),!1)}(a.locale||ky),i._coordSysMgr=new gb;var p=i._api=UC(i);function c(e,t){return e.__prio-t.__prio}return el(a_,c),el(t_,c),i._scheduler=new Kw(i,p,t_,a_),i._messageCenter=new $C,i._initEvents(),i.resize=Yr(i.resize,i),l.animation.on("frame",i._onframe,i),LC(l,i),VC(l,i),bo(i),i}return ze(t,e),t.prototype._onframe=function(){if(!this._disposed){WC(this);var e=this._scheduler;if(this[SC]){var t=this[SC].silent;this[wC]=!0;try{kC(this),OC.update.call(this,null,this[SC].updateParams)}catch(e){throw this[wC]=!1,this[SC]=null,e}this._zr.flush(),this[wC]=!1,this[SC]=null,BC.call(this,t),NC.call(this,t)}else if(e.unfinished){var n=1,a=this._model,i=this._api;e.unfinished=!1;do{var r=+new Date;e.performSeriesTasks(a),e.performDataProcessorTasks(a),FC(this,a),e.performVisualTasks(a),zC(this,this._model,i,"remain",{}),n-=+new Date-r}while(n>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,t,n){if(!this[wC])if(this._disposed)QC(this.id);else{var a,i,r;if(no(t)&&(n=t.lazyUpdate,a=t.silent,i=t.replaceMerge,r=t.transition,t=t.notMerge),this[wC]=!0,!this._model||t){var o=new yb(this._api),s=this._theme,l=this._model=new lb;l.scheduler=this._scheduler,l.ssr=this._ssr,l.init(null,null,null,s,this._locale,o)}this._model.setOption(e,{replaceMerge:i},n_);var p={seriesTransition:r,optionChanged:!0};if(n)this[SC]={silent:a,updateParams:p},this[wC]=!1,this.getZr().wakeUp();else{try{kC(this),OC.update.call(this,null,p)}catch(e){throw this[SC]=null,this[wC]=!1,e}this._ssr||this._zr.flush(),this[SC]=null,this[wC]=!1,BC.call(this,a),NC.call(this,a)}}},t.prototype.setTheme=function(){hd()},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||mr.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var t=this._zr.painter;return t.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var t=this._zr.painter;return t.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(mr.svgSupported){var e=this._zr;return Ur(e.storage.getDisplayList(),(function(e){e.stopAnimation(null,!0)})),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,a=[],i=this;Ur(t,(function(e){n.eachComponent({mainType:e},(function(e){var t=i._componentsMap[e.__viewId];t.group.ignore||(a.push(t),t.group.ignore=!0)}))}));var r="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Ur(a,(function(e){e.group.ignore=!1})),r}QC(this.id)},t.prototype.getConnectedDataURL=function(e){if(!this._disposed){var t="svg"===e.type,n=this.group,a=Math.min,i=Math.max,r=1/0;if(s_[n]){var o=r,s=r,l=-1/0,p=-1/0,c=[],d=e&&e.pixelRatio||this.getDevicePixelRatio();Ur(o_,(function(r,d){if(r.group===n){var u=t?r.getZr().painter.getSvgDom().innerHTML:r.renderToCanvas(Fr(e)),m=r.getDom().getBoundingClientRect();o=a(m.left,o),s=a(m.top,s),l=i(m.right,l),p=i(m.bottom,p),c.push({dom:u,left:m.left,top:m.top})}}));var u=(l*=d)-(o*=d),m=(p*=d)-(s*=d),h=br.createCanvas(),g=Gc(h,{renderer:t?"svg":"canvas"});if(g.resize({width:u,height:m}),t){var f="";return Ur(c,(function(e){var t=e.left-o,n=e.top-s;f+='<g transform="translate('+t+","+n+')">'+e.dom+"</g>"})),g.painter.getSvgRoot().innerHTML=f,e.connectedBackgroundColor&&g.painter.setBackgroundColor(e.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}return e.connectedBackgroundColor&&g.add(new Rm({shape:{x:0,y:0,width:u,height:m},style:{fill:e.connectedBackgroundColor}})),Ur(c,(function(e){var t=new Mm({style:{x:e.left*d-o,y:e.top*d-s,image:e.dom}});g.add(t)})),g.refreshImmediately(),h.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}QC(this.id)},t.prototype.convertToPixel=function(e,t){return AC(this,"convertToPixel",e,t)},t.prototype.convertFromPixel=function(e,t){return AC(this,"convertFromPixel",e,t)},t.prototype.containPixel=function(e,t){var n;if(!this._disposed)return Ur(Ad(this._model,e),(function(e,a){a.indexOf("Models")>=0&&Ur(e,(function(e){var i=e.coordinateSystem;if(i&&i.containPoint)n=n||!!i.containPoint(t);else if("seriesModels"===a){var r=this._chartsMap[e.__viewId];r&&r.containPoint&&(n=n||r.containPoint(t,e))}else 0}),this)}),this),!!n;QC(this.id)},t.prototype.getVisual=function(e,t){var n=Ad(this._model,e,{defaultMainType:"series"}),a=n.seriesModel;var i=a.getData(),r=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?i.indexOfRawIndex(n.dataIndex):null;return null!=r?wS(i,r,t):SS(i,t)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e,t,n,a=this;Ur(ZC,(function(e){var t=function(t){var n,i=a.getModel(),r=t.target,o="globalout"===e;if(o?n={}:r&&IS(r,(function(e){var t=Zm(e);if(t&&null!=t.dataIndex){var a=t.dataModel||i.getSeriesByIndex(t.seriesIndex);return n=a&&a.getDataParams(t.dataIndex,t.dataType,r)||{},!0}if(t.eventData)return n=Nr({},t.eventData),!0}),!0),n){var s=n.componentType,l=n.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",l=n.seriesIndex);var p=s&&null!=l&&i.getComponent(s,l),c=p&&a["series"===p.mainType?"_chartsMap":"_componentsMap"][p.__viewId];0,n.event=t,n.type=e,a._$eventProcessor.eventInfo={targetEl:r,packedEvent:n,model:p,view:c},a.trigger(e,n)}};t.zrEventfulCallAtLast=!0,a._zr.on(e,t,a)})),Ur(e_,(function(e,t){a._messageCenter.on(t,(function(e){this.trigger(t,e)}),a)})),Ur(["selectchanged"],(function(e){a._messageCenter.on(e,(function(t){this.trigger(e,t)}),a)})),e=this._messageCenter,t=this,n=this._api,e.on("selectchanged",(function(e){var a=n.getModel();e.isFromClick?(TS("map","selectchanged",t,a,e),TS("pie","selectchanged",t,a,e)):"select"===e.fromAction?(TS("map","selected",t,a,e),TS("pie","selected",t,a,e)):"unselect"===e.fromAction&&(TS("map","unselected",t,a,e),TS("pie","unselected",t,a,e))}))},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed?QC(this.id):this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed)QC(this.id);else{this._disposed=!0,this.getDom()&&Ld(this.getDom(),p_,"");var e=this,t=e._api,n=e._model;Ur(e._componentsViews,(function(e){e.dispose(n,t)})),Ur(e._chartsViews,(function(e){e.dispose(n,t)})),e._zr.dispose(),e._dom=e._model=e._chartsMap=e._componentsMap=e._chartsViews=e._componentsViews=e._scheduler=e._api=e._zr=e._throttledZrFlush=e._theme=e._coordSysMgr=e._messageCenter=null,delete o_[e.id]}},t.prototype.resize=function(e){if(!this[wC])if(this._disposed)QC(this.id);else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),a=e&&e.silent;this[SC]&&(null==a&&(a=this[SC].silent),n=!0,this[SC]=null),this[wC]=!0;try{n&&kC(this),OC.update.call(this,{type:"resize",animation:Nr({duration:0},e&&e.animation)})}catch(e){throw this[wC]=!1,e}this[wC]=!1,BC.call(this,a),NC.call(this,a)}}},t.prototype.showLoading=function(e,t){if(this._disposed)QC(this.id);else if(no(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),r_[e]){var n=r_[e](this._api,t),a=this._zr;this._loadingFX=n,a.add(n)}},t.prototype.hideLoading=function(){this._disposed?QC(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var t=Nr({},e);return t.type=e_[e.type],t},t.prototype.dispatchAction=function(e,t){if(this._disposed)QC(this.id);else if(no(t)||(t={silent:!!t}),JC[e.type]&&this._model)if(this[wC])this._pendingActions.push(e);else{var n=t.silent;RC.call(this,e,n);var a=t.flush;a?this._zr.flush():!1!==a&&mr.browser.weChat&&this._throttledZrFlush(),BC.call(this,n),NC.call(this,n)}},t.prototype.updateLabelLayout=function(){gC.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed)QC(this.id);else{var t=e.seriesIndex,n=this.getModel().getSeriesByIndex(t);0,n.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(e){e.clearColorPalette(),e.eachSeries((function(e){e.clearColorPalette()}))}function t(e){for(var t=[],n=e.currentStates,a=0;a<n.length;a++){var i=n[a];"emphasis"!==i&&"blur"!==i&&"select"!==i&&t.push(i)}e.selected&&e.states.select&&t.push("select"),2===e.hoverState&&e.states.emphasis?t.push("emphasis"):1===e.hoverState&&e.states.blur&&t.push("blur"),e.useStates(t)}function n(e,t){if(!e.preventAutoZ){var n=e.get("z")||0,i=e.get("zlevel")||0;t.eachRendered((function(e){return a(e,n,i,-1/0),!0}))}}function a(e,t,n,i){var r=e.getTextContent(),o=e.getTextGuideLine();if(e.isGroup)for(var s=e.childrenRef(),l=0;l<s.length;l++)i=Math.max(a(s[l],t,n,i),i);else e.z=t,e.zlevel=n,i=Math.max(e.z2,i);if(r&&(r.z=t,r.zlevel=n,isFinite(i)&&(r.z2=i+2)),o){var p=e.textGuideLineConfig;o.z=t,o.zlevel=n,isFinite(i)&&(o.z2=i+(p&&p.showAbove?1:-1))}return i}function i(e,t){t.eachRendered((function(e){if(!uf(e)){var t=e.getTextContent(),n=e.getTextGuideLine();e.stateTransition&&(e.stateTransition=null),t&&t.stateTransition&&(t.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),e.hasState()?(e.prevStates=e.currentStates,e.clearStates()):e.prevStates&&(e.prevStates=null)}}))}function r(e,n){var a=e.getModel("stateAnimation"),i=e.isAnimationEnabled(),r=a.get("duration"),o=r>0?{duration:r,delay:a.get("delay"),easing:a.get("easing")}:null;n.eachRendered((function(e){if(e.states&&e.states.emphasis){if(uf(e))return;if(e instanceof Cm&&function(e){var t=th(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var n=e.states.select||{};t.selectFill=n.style&&n.style.fill||null,t.selectStroke=n.style&&n.style.stroke||null}(e),e.__dirty){var n=e.prevStates;n&&e.useStates(n)}if(i){e.stateTransition=o;var a=e.getTextContent(),r=e.getTextGuideLine();a&&(a.stateTransition=o),r&&(r.stateTransition=o)}e.__dirty&&t(e)}}))}kC=function(e){var t=e._scheduler;t.restorePipelines(e._model),t.prepareStageTasks(),PC(e,!0),PC(e,!1),t.plan()},PC=function(e,t){for(var n=e._model,a=e._scheduler,i=t?e._componentsViews:e._chartsViews,r=t?e._componentsMap:e._chartsMap,o=e._zr,s=e._api,l=0;l<i.length;l++)i[l].__alive=!1;function p(e){var l=e.__requireNewView;e.__requireNewView=!1;var p="_ec_"+e.id+"_"+e.type,c=!l&&r[p];if(!c){var d=Ud(e.type),u=t?Sw.getClass(d.main,d.sub):Iw.getClass(d.sub);0,(c=new u).init(n,s),r[p]=c,i.push(c),o.add(c.group)}e.__viewId=c.__id=p,c.__alive=!0,c.__model=e,c.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!t&&a.prepareView(c,e,n,s)}t?n.eachComponent((function(e,t){"series"!==e&&p(t)})):n.eachSeries(p);for(l=0;l<i.length;){var c=i[l];c.__alive?l++:(!t&&c.renderTask.dispose(),o.remove(c.group),c.dispose(n,s),i.splice(l,1),r[c.__id]===c&&delete r[c.__id],c.__id=c.group.__ecComponentInfo=null)}},DC=function(e,t,n,a,i){var r=e._model;if(r.setUpdatePayload(n),a){var o={};o[a+"Id"]=n[a+"Id"],o[a+"Index"]=n[a+"Index"],o[a+"Name"]=n[a+"Name"];var s={mainType:a,query:o};i&&(s.subType=i);var l,p=n.excludeSeriesId;null!=p&&(l=_o(),Ur(bd(p),(function(e){var t=Ed(e,null);null!=t&&l.set(t,!0)}))),r&&r.eachComponent(s,(function(t){if(!(l&&null!=l.get(t.id)))if(Kh(n))if(t instanceof hw)n.type!==oh||n.notBlur||t.get(["emphasis","disabled"])||function(e,t,n){var a=e.seriesIndex,i=e.getData(t.dataType);if(i){var r=Pd(i,t);r=(Zr(r)?r[0]:r)||0;var o=i.getItemGraphicEl(r);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var p=Zm(o);Fh(a,p.focus,p.blurScope,n)}else{var c=e.get(["emphasis","focus"]),d=e.get(["emphasis","blurScope"]);null!=c&&Fh(a,c,d,n)}}}(t,n,e._api);else{var a=Bh(t.mainType,t.componentIndex,n.name,e._api),i=a.focusSelf,r=a.dispatchers;n.type===oh&&i&&!n.notBlur&&Rh(t.mainType,t.componentIndex,e._api),r&&Ur(r,(function(e){n.type===oh?Ih(e):Eh(e)}))}else $h(n)&&t instanceof hw&&(!function(e,t){if($h(t)){var n=t.dataType,a=Pd(e.getData(n),t);Zr(a)||(a=[a]),e[t.type===ch?"toggleSelect":t.type===lh?"select":"unselect"](a,n)}}(t,n,e._api),Nh(t),HC(e))}),e),r&&r.eachComponent(s,(function(t){l&&null!=l.get(t.id)||c(e["series"===a?"_chartsMap":"_componentsMap"][t.__viewId])}),e)}else Ur([].concat(e._componentsViews).concat(e._chartsViews),c);function c(a){a&&a.__alive&&a[t]&&a[t](a.__model,r,e._api,n)}},OC={prepareAndUpdate:function(e){kC(this),OC.update.call(this,e,{optionChanged:null!=e.newOption})},update:function(t,n){var a=this._model,i=this._api,r=this._zr,o=this._coordSysMgr,s=this._scheduler;if(a){a.setUpdatePayload(t),s.restoreData(a,t),s.performSeriesTasks(a),o.create(a,i),s.performDataProcessorTasks(a,t),FC(this,a),o.update(a,i),e(a),s.performVisualTasks(a,t),qC(this,a,i,t,n);var l=a.get("backgroundColor")||"transparent",p=a.get("darkMode");r.setBackgroundColor(l),null!=p&&"auto"!==p&&r.setDarkMode(p),gC.trigger("afterupdate",a,i)}},updateTransform:function(t){var n=this,a=this._model,i=this._api;if(a){a.setUpdatePayload(t);var r=[];a.eachComponent((function(e,o){if("series"!==e){var s=n.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(o,a,i,t);l&&l.update&&r.push(s)}else r.push(s)}}));var o=_o();a.eachSeries((function(e){var r=n._chartsMap[e.__viewId];if(r.updateTransform){var s=r.updateTransform(e,a,i,t);s&&s.update&&o.set(e.uid,1)}else o.set(e.uid,1)})),e(a),this._scheduler.performVisualTasks(a,t,{setDirty:!0,dirtyMap:o}),zC(this,a,i,t,{},o),gC.trigger("afterupdate",a,i)}},updateView:function(t){var n=this._model;n&&(n.setUpdatePayload(t),Iw.markUpdateMethod(t,"updateView"),e(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0}),qC(this,n,this._api,t,{}),gC.trigger("afterupdate",n,this._api))},updateVisual:function(t){var n=this,a=this._model;a&&(a.setUpdatePayload(t),a.eachSeries((function(e){e.getData().clearAllVisual()})),Iw.markUpdateMethod(t,"updateVisual"),e(a),this._scheduler.performVisualTasks(a,t,{visualType:"visual",setDirty:!0}),a.eachComponent((function(e,i){if("series"!==e){var r=n.getViewOfComponentModel(i);r&&r.__alive&&r.updateVisual(i,a,n._api,t)}})),a.eachSeries((function(e){n._chartsMap[e.__viewId].updateVisual(e,a,n._api,t)})),gC.trigger("afterupdate",a,this._api))},updateLayout:function(e){OC.update.call(this,e)}},AC=function(e,t,n,a){if(e._disposed)QC(e.id);else{for(var i,r=e._model,o=e._coordSysMgr.getCoordinateSystems(),s=Ad(r,n),l=0;l<o.length;l++){var p=o[l];if(p[t]&&null!=(i=p[t](r,s,a)))return i}0}},FC=function(e,t){var n=e._chartsMap,a=e._scheduler;t.eachSeries((function(e){a.updateStreamModes(e,n[e.__viewId])}))},RC=function(e,t){var n=this,a=this.getModel(),i=e.type,r=e.escapeConnect,o=JC[i],s=o.actionInfo,l=(s.update||"update").split(":"),p=l.pop(),c=null!=l[0]&&Ud(l[0]);this[wC]=!0;var d=[e],u=!1;e.batch&&(u=!0,d=jr(e.batch,(function(t){return(t=Lr(Nr({},t),e)).batch=null,t})));var m,h=[],g=$h(e),f=Kh(e);if(f&&Ah(this._api),Ur(d,(function(t){if((m=(m=o.action(t,n._model,n._api))||Nr({},t)).type=s.event||m.type,h.push(m),f){var a=Fd(e),i=a.queryOptionMap,r=a.mainTypeSpecified?i.keys()[0]:"series";DC(n,p,t,r),HC(n)}else g?(DC(n,p,t,"series"),HC(n)):c&&DC(n,p,t,c.main,c.sub)})),"none"!==p&&!f&&!g&&!c)try{this[SC]?(kC(this),OC.update.call(this,e),this[SC]=null):OC[p].call(this,e)}catch(e){throw this[wC]=!1,e}if(m=u?{type:s.event||i,escapeConnect:r,batch:h}:h[0],this[wC]=!1,!t){var y=this._messageCenter;if(y.trigger(m.type,m),g){var v={type:"selectchanged",escapeConnect:r,selected:Lh(a),isFromClick:e.isFromClick||!1,fromAction:e.type,fromActionPayload:e};y.trigger(v.type,v)}}},BC=function(e){for(var t=this._pendingActions;t.length;){var n=t.shift();RC.call(this,n,e)}},NC=function(e){!e&&this.trigger("updated")},LC=function(e,t){e.on("rendered",(function(n){t.trigger("rendered",n),!e.animation.isFinished()||t[SC]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")}))},VC=function(e,t){e.on("mouseover",(function(e){var n=IS(e.target,Wh);n&&(!function(e,t,n){var a=Zm(e),i=Bh(a.componentMainType,a.componentIndex,a.componentHighDownName,n),r=i.dispatchers,o=i.focusSelf;r?(o&&Rh(a.componentMainType,a.componentIndex,n),Ur(r,(function(e){return _h(e,t)}))):(Fh(a.seriesIndex,a.focus,a.blurScope,n),"self"===a.focus&&Rh(a.componentMainType,a.componentIndex,n),_h(e,t))}(n,e,t._api),HC(t))})).on("mouseout",(function(e){var n=IS(e.target,Wh);n&&(!function(e,t,n){Ah(n);var a=Zm(e),i=Bh(a.componentMainType,a.componentIndex,a.componentHighDownName,n).dispatchers;i?Ur(i,(function(e){return Th(e,t)})):Th(e,t)}(n,e,t._api),HC(t))})).on("click",(function(e){var n=IS(e.target,(function(e){return null!=Zm(e).dataIndex}),!0);if(n){var a=n.selected?"unselect":"select",i=Zm(n);t._api.dispatchAction({type:a,dataType:i.dataType,dataIndexInside:i.dataIndex,seriesIndex:i.seriesIndex,isFromClick:!0})}}))},qC=function(e,t,n,a,i){!function(e){var t=[],n=[],a=!1;if(e.eachComponent((function(e,i){var r=i.get("zlevel")||0,o=i.get("z")||0,s=i.getZLevelKey();a=a||!!s,("series"===e?n:t).push({zlevel:r,z:o,idx:i.componentIndex,type:e,key:s})})),a){var i,r,o=t.concat(n);el(o,(function(e,t){return e.zlevel===t.zlevel?e.z-t.z:e.zlevel-t.zlevel})),Ur(o,(function(t){var n=e.getComponent(t.type,t.idx),a=t.zlevel,o=t.key;null!=i&&(a=Math.max(i,a)),o?(a===i&&o!==r&&a++,r=o):r&&(a===i&&a++,r=""),i=a,n.setZLevel(a)}))}}(t),GC(e,t,n,a,i),Ur(e._chartsViews,(function(e){e.__alive=!1})),zC(e,t,n,a,i),Ur(e._chartsViews,(function(e){e.__alive||e.remove(t,n)}))},GC=function(e,t,a,o,s,l){Ur(l||e._componentsViews,(function(e){var s=e.__model;i(s,e),e.render(s,t,a,o),n(s,e),r(s,e)}))},zC=function(e,t,a,o,s,l){var p=e._scheduler;s=Nr(s||{},{updatedSeries:t.getSeries()}),gC.trigger("series:beforeupdate",t,a,s);var c=!1;t.eachSeries((function(t){var n=e._chartsMap[t.__viewId];n.__alive=!0;var a=n.renderTask;p.updatePayload(a,o),i(t,n),l&&l.get(t.uid)&&a.dirty(),a.perform(p.getPerformArgs(a))&&(c=!0),n.group.silent=!!t.get("silent"),function(e,t){var n=e.get("blendMode")||null;t.eachRendered((function(e){e.isGroup||(e.style.blend=n)}))}(t,n),Nh(t)})),p.unfinished=c||p.unfinished,gC.trigger("series:layoutlabels",t,a,s),gC.trigger("series:transition",t,a,s),t.eachSeries((function(t){var a=e._chartsMap[t.__viewId];n(t,a),r(t,a)})),function(e,t){var n=e._zr,a=n.storage,i=0;a.traverse((function(e){e.isGroup||i++})),i>t.get("hoverLayerThreshold")&&!mr.node&&!mr.worker&&t.eachSeries((function(t){if(!t.preventUsingHoverLayer){var n=e._chartsMap[t.__viewId];n.__alive&&n.eachRendered((function(e){e.states.emphasis&&(e.states.emphasis.hoverLayer=!0)}))}}))}(e,t),gC.trigger("series:afterupdate",t,a,s)},HC=function(e){e[CC]=!0,e.getZr().wakeUp()},WC=function(e){e[CC]&&(e.getZr().storage.traverse((function(e){uf(e)||t(e)})),e[CC]=!1)},UC=function(e){return new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ze(n,t),n.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},n.prototype.getComponentByElement=function(t){for(;t;){var n=t.__ecComponentInfo;if(null!=n)return e._model.getComponent(n.mainType,n.index);t=t.parent}},n.prototype.enterEmphasis=function(t,n){Ih(t,n),HC(e)},n.prototype.leaveEmphasis=function(t,n){Eh(t,n),HC(e)},n.prototype.enterBlur=function(t){Mh(t),HC(e)},n.prototype.leaveBlur=function(t){kh(t),HC(e)},n.prototype.enterSelect=function(t){Ph(t),HC(e)},n.prototype.leaveSelect=function(t){Dh(t),HC(e)},n.prototype.getModel=function(){return e.getModel()},n.prototype.getViewOfComponentModel=function(t){return e.getViewOfComponentModel(t)},n.prototype.getViewOfSeriesModel=function(t){return e.getViewOfSeriesModel(t)},n}(mb))(e)},jC=function(e){function t(e,t){for(var n=0;n<e.length;n++){e[n][TC]=t}}Ur(e_,(function(n,a){e._messageCenter.on(a,(function(n){if(s_[e.group]&&0!==e[TC]){if(n&&n.escapeConnect)return;var a=e.makeActionFromEvent(n),i=[];Ur(o_,(function(t){t!==e&&t.group===e.group&&i.push(t)})),t(i,0),Ur(i,(function(e){1!==e[TC]&&e.dispatchAction(a)})),t(i,2)}}))}))}}(),t}(Zo),XC=YC.prototype;XC.on=IC("on"),XC.off=IC("off"),XC.one=function(e,t,n){var a=this;hd(),this.on.call(this,e,(function n(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t&&t.apply&&t.apply(this,i),a.off(e,n)}),n)};var ZC=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function QC(e){0}var JC={},e_={},t_=[],n_=[],a_=[],i_={},r_={},o_={},s_={},l_=+new Date-0,p_=(new Date,"_echarts_instance_");function c_(e){return o_[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,p_)]}function d_(e,t){i_[e]=t}function u_(e){Vr(n_,e)<0&&n_.push(e)}function m_(e,t){v_(t_,e,t,2e3)}function h_(e,t){gC.on(e,t)}function g_(e,t,n){Qr(t)&&(n=t,t="");var a=no(e)?e.type:[e,e={event:t}][0];e.event=(e.event||a).toLowerCase(),t=e.event,e_[t]||(fo(_C.test(a)&&_C.test(t)),JC[a]||(JC[a]={action:n,actionInfo:e}),e_[t]=a)}function f_(e,t){v_(a_,e,t,3e3,"visual")}var y_=[];function v_(e,t,n,a,i){if((Qr(t)||no(t))&&(n=t,t=a),!(Vr(y_,n)>=0)){y_.push(n);var r=Kw.wrapStageHandler(n,i);r.__prio=t,r.__raw=n,e.push(r)}}function b_(e,t){r_[e]=t}var x_=function(e){var t=(e=Fr(e)).type,n="";t||gd(n);var a=t.split(":");2!==a.length&&gd(n);var i=!1;"echarts"===a[0]&&(t=a[1],i=!0),e.__isBuiltIn=i,Dx.set(t,e)};function w_(e){return null==e?0:e.length||1}function S_(e){return e}f_(vC,Uw),f_(bC,Hw),f_(bC,Ww),f_(vC,bS),f_(bC,xS),f_(7e3,(function(e,t){e.eachRawSeries((function(n){if(!e.isSeriesFiltered(n)){var a=n.getData();a.hasItemVisual()&&a.each((function(e){var n=a.getItemVisual(e,"decal");n&&(a.ensureUniqueItemVisual(e,"style").decal=dC(n,t))}));var i=a.getVisual("decal");if(i)a.getVisual("style").decal=dC(i,t)}}))})),u_(Lb),m_(900,(function(e){var t=_o();e.eachSeries((function(e){var n=e.get("stack");if(n){var a=t.get(n)||t.set(n,[]),i=e.getData(),r={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:e};if(!r.stackedDimension||!r.isStackedByIndex&&!r.stackedByDimension)return;a.length&&i.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(r)}})),t.each(Vb)})),b_("default",(function(e,t){Lr(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Bc,a=new Rm({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(a);var i,r=new Lm({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Rm({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return n.add(o),t.showSpinner&&((i=new Kg({shape:{startAngle:-$w/2,endAngle:-$w/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*$w/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*$w/2}).delay(300).start("circularInOut"),n.add(i)),n.resize=function(){var n=r.getBoundingRect().width,s=t.showSpinner?t.spinnerRadius:0,l=(e.getWidth()-2*s-(t.showSpinner&&n?10:0)-n)/2-(t.showSpinner&&n?0:5+n/2)+(t.showSpinner?0:n/2)+(n?0:s),p=e.getHeight()/2;t.showSpinner&&i.setShape({cx:l,cy:p}),o.setShape({x:l-s,y:p-s,width:2*s,height:2*s}),a.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n})),g_({type:oh,event:oh,update:oh},ko),g_({type:sh,event:sh,update:sh},ko),g_({type:lh,event:lh,update:lh},ko),g_({type:ph,event:ph,update:ph},ko),g_({type:ch,event:ch,update:ch},ko),d_("light",cS),d_("dark",gS);var C_=function(){function e(e,t,n,a,i,r){this._old=e,this._new=t,this._oldKeyGetter=n||S_,this._newKeyGetter=a||S_,this.context=i,this._diffModeMultiple="multiple"===r}return e.prototype.add=function(e){return this._add=e,this},e.prototype.update=function(e){return this._update=e,this},e.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},e.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},e.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},e.prototype.remove=function(e){return this._remove=e,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var e=this._old,t=this._new,n={},a=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,a,"_oldKeyGetter"),this._initIndexMap(t,n,i,"_newKeyGetter");for(var r=0;r<e.length;r++){var o=a[r],s=n[o],l=w_(s);if(l>1){var p=s.shift();1===s.length&&(n[o]=s[0]),this._update&&this._update(p,r)}else 1===l?(n[o]=null,this._update&&this._update(s,r)):this._remove&&this._remove(r)}this._performRestAdd(i,n)},e.prototype._executeMultiple=function(){var e=this._old,t=this._new,n={},a={},i=[],r=[];this._initIndexMap(e,n,i,"_oldKeyGetter"),this._initIndexMap(t,a,r,"_newKeyGetter");for(var o=0;o<i.length;o++){var s=i[o],l=n[s],p=a[s],c=w_(l),d=w_(p);if(c>1&&1===d)this._updateManyToOne&&this._updateManyToOne(p,l),a[s]=null;else if(1===c&&d>1)this._updateOneToMany&&this._updateOneToMany(p,l),a[s]=null;else if(1===c&&1===d)this._update&&this._update(p,l),a[s]=null;else if(c>1&&d>1)this._updateManyToMany&&this._updateManyToMany(p,l),a[s]=null;else if(c>1)for(var u=0;u<c;u++)this._remove&&this._remove(l[u]);else this._remove&&this._remove(l)}this._performRestAdd(r,a)},e.prototype._performRestAdd=function(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=t[a],r=w_(i);if(r>1)for(var o=0;o<r;o++)this._add&&this._add(i[o]);else 1===r&&this._add&&this._add(i);t[a]=null}},e.prototype._initIndexMap=function(e,t,n,a){for(var i=this._diffModeMultiple,r=0;r<e.length;r++){var o="_ec_"+this[a](e[r],r);if(i||(n[r]=o),t){var s=t[o],l=w_(s);0===l?(t[o]=r,i&&n.push(o)):1===l?t[o]=[s,r]:s.push(r)}}},e}(),__=function(){function e(e,t){this._encode=e,this._schema=t}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function T_(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function I_(e){return"category"===e?"ordinal":"time"===e?"time":"float"}var E_=function(e){this.otherDims={},null!=e&&Nr(this,e)},M_=Dd(),k_={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},P_=function(){function e(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=A_(this.source)))},e.prototype.getSourceDimensionIndex=function(e){return uo(this._dimNameMap.get(e),-1)},e.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},e.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Qb(this.source),n=!F_(e),a="",i=[],r=0,o=0;r<e;r++){var s=void 0,l=void 0,p=void 0,c=this.dimensions[o];if(c&&c.storeDimIndex===r)s=t?c.name:null,l=c.type,p=c.ordinalMeta,o++;else{var d=this.getSourceDimension(r);d&&(s=t?d.name:null,l=d.type)}i.push({property:s,type:l,ordinalMeta:p}),!t||null==s||c&&c.isCalculationCoord||(a+=n?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),a+="$",a+=k_[l]||"f",p&&(a+=p.uid),a+="$"}var u=this.source;return{dimensions:i,hash:[u.seriesLayoutBy,u.startIndex,a].join("$$")}},e.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,n=0;t<this._fullDimCount;t++){var a=void 0,i=this.dimensions[n];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(a=i.name),n++;else{var r=this.getSourceDimension(t);r&&(a=r.name)}e.push(a)}return e},e.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function D_(e){return e instanceof P_}function O_(e){for(var t=_o(),n=0;n<(e||[]).length;n++){var a=e[n],i=no(a)?a.name:a;null!=i&&null==t.get(i)&&t.set(i,n)}return t}function A_(e){var t=M_(e);return t.dimNameMap||(t.dimNameMap=O_(e.dimensionsDefine))}function F_(e){return e>30}var R_,B_,N_,L_,V_,q_,G_,z_=no,U_=jr,j_="undefined"==typeof Int32Array?Array:Int32Array,H_=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],W_=["_approximateExtent"],$_=function(){function e(e,t){var n;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var a=!1;D_(e)?(n=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(a=!0,n=e),n=n||["x","y"];for(var i={},r=[],o={},s=!1,l={},p=0;p<n.length;p++){var c=n[p],d=Jr(c)?new E_({name:c}):c instanceof E_?c:new E_(c),u=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=u,d.coordDimIndex=0);var m=d.otherDims=d.otherDims||{};r.push(u),i[u]=d,null!=l[u]&&(s=!0),d.createInvertedIndices&&(o[u]=[]),0===m.itemName&&(this._nameDimIdx=p),0===m.itemId&&(this._idDimIdx=p),a&&(d.storeDimIndex=p)}if(this.dimensions=r,this._dimInfos=i,this._initGetDimensionInfo(s),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var h=this._dimIdxToName=_o();Ur(r,(function(e){h.set(i[e].storeDimIndex,e)}))}}return e.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(null==t)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var n=this._dimIdxToName.get(t);if(null!=n)return n;var a=this._schema.getSourceDimension(t);return a?a.name:void 0},e.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(null!=t)return t;if(null==e)return-1;var n=this._getDimInfo(e);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},e.prototype._recognizeDimIndex=function(e){if(to(e)||null!=e&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},e.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},e.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},e.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(e){return t.hasOwnProperty(e)?t[e]:void 0}:function(e){return t[e]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(e,t){var n=this._dimSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var a=n.encode[e];return a?a[t]:null},e.prototype.mapDimensionsAll=function(e){return(this._dimSummary.encode[e]||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(e,t,n){var a,i=this;if(e instanceof Ux&&(a=e),!a){var r=this.dimensions,o=Wb(e)||zr(e)?new Jb(e,r.length):e;a=new Ux;var s=U_(r,(function(e){return{type:i._dimInfos[e].type,property:e}}));a.initData(o,s,n)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=function(e,t){var n={},a=n.encode={},i=_o(),r=[],o=[],s={};Ur(e.dimensions,(function(t){var n,l=e.getDimensionInfo(t),p=l.coordDim;if(p){var c=l.coordDimIndex;T_(a,p)[c]=t,l.isExtraCoord||(i.set(p,1),"ordinal"!==(n=l.type)&&"time"!==n&&(r[0]=t),T_(s,p)[c]=e.getDimensionIndex(l.name)),l.defaultTooltip&&o.push(t)}Fv.each((function(e,t){var n=T_(a,t),i=l.otherDims[t];null!=i&&!1!==i&&(n[i]=l.name)}))}));var l=[],p={};i.each((function(e,t){var n=a[t];p[t]=n[0],l=l.concat(n)})),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=jr(l,(function(t){return e.getDimensionInfo(t).storeDimIndex})),n.encodeFirstDimNotExtra=p;var c=a.label;c&&c.length&&(r=c.slice());var d=a.tooltip;return d&&d.length?o=d.slice():o.length||(o=r.slice()),a.defaultedLabel=r,a.defaultedTooltip=o,n.userOutput=new __(s,t),n}(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},e.prototype.appendValues=function(e,t){var n=this._store.appendValues(e,t.length),a=n.start,i=n.end,r=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=a;o<i;o++){var s=o-a;this._nameList[o]=t[s],r&&G_(this,o)}},e.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,n=0;n<t.length;n++){var a=this._dimInfos[t[n]];a.ordinalMeta&&e.collectOrdinalMeta(a.storeDimIndex,a.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return null==this._idDimIdx&&e.getSource().sourceFormat!==Vv&&!e.fillStorage},e.prototype._doInit=function(e,t){if(!(e>=t)){var n=this._store.getProvider();this._updateOrdinalMeta();var a=this._nameList,i=this._idList;if(n.getSource().sourceFormat===Rv&&!n.pure)for(var r=[],o=e;o<t;o++){var s=n.getItem(o,r);if(!this.hasItemOption&&Cd(s)&&(this.hasItemOption=!0),s){var l=s.name;null==a[o]&&null!=l&&(a[o]=Ed(l,null));var p=s.id;null==i[o]&&null!=p&&(i[o]=Ed(p,null))}}if(this._shouldMakeIdFromName())for(o=e;o<t;o++)G_(this,o);R_(this)}},e.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},e.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},e.prototype.setCalculationInfo=function(e,t){z_(e)?Nr(this._calculationInfo,e):this._calculationInfo[e]=t},e.prototype.getName=function(e){var t=this.getRawIndex(e),n=this._nameList[t];return null==n&&null!=this._nameDimIdx&&(n=N_(this,this._nameDimIdx,t)),null==n&&(n=""),n},e.prototype._getCategory=function(e,t){var n=this._store.get(e,t),a=this._store.getOrdinalMeta(e);return a?a.categories[n]:n},e.prototype.getId=function(e){return B_(this,this.getRawIndex(e))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(e,t){var n=this._store,a=this._dimInfos[e];if(a)return n.get(a.storeDimIndex,t)},e.prototype.getByRawIndex=function(e,t){var n=this._store,a=this._dimInfos[e];if(a)return n.getByRawIndex(a.storeDimIndex,t)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},e.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},e.prototype.getValues=function(e,t){var n=this,a=this._store;return Zr(e)?a.getValues(U_(e,(function(e){return n._getStoreDimIndex(e)})),t):a.getValues(e)},e.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,n=0,a=t.length;n<a;n++)if(isNaN(this._store.get(t[n],e)))return!1;return!0},e.prototype.indexOfName=function(e){for(var t=0,n=this._store.count();t<n;t++)if(this.getName(t)===e)return t;return-1},e.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},e.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},e.prototype.rawIndexOf=function(e,t){var n=e&&this._invertedIndicesMap[e];var a=n[t];return null==a||isNaN(a)?-1:a},e.prototype.indicesOfNearest=function(e,t,n){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,n)},e.prototype.each=function(e,t,n){Qr(e)&&(n=t,t=e,e=[]);var a=n||this,i=U_(L_(e),this._getStoreDimIndex,this);this._store.each(i,a?Yr(t,a):t)},e.prototype.filterSelf=function(e,t,n){Qr(e)&&(n=t,t=e,e=[]);var a=n||this,i=U_(L_(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,a?Yr(t,a):t),this},e.prototype.selectRange=function(e){var t=this,n={},a=Kr(e),i=[];return Ur(a,(function(a){var r=t._getStoreDimIndex(a);n[r]=e[a],i.push(r)})),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(e,t,n){Qr(e)&&(n=t,t=e,e=[]),n=n||this;var a=[];return this.each(e,(function(){a.push(t&&t.apply(this,arguments))}),n),a},e.prototype.map=function(e,t,n,a){var i=n||a||this,r=U_(L_(e),this._getStoreDimIndex,this),o=q_(this);return o._store=this._store.map(r,i?Yr(t,i):t),o},e.prototype.modify=function(e,t,n,a){var i=n||a||this;var r=U_(L_(e),this._getStoreDimIndex,this);this._store.modify(r,i?Yr(t,i):t)},e.prototype.downSample=function(e,t,n,a){var i=q_(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,n,a),i},e.prototype.lttbDownSample=function(e,t){var n=q_(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),n},e.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},e.prototype.getItemModel=function(e){var t=this.hostModel,n=this.getRawDataItem(e);return new xy(n,t,t&&t.ecModel)},e.prototype.diff=function(e){var t=this;return new C_(e?e.getStore().getIndices():[],this.getStore().getIndices(),(function(t){return B_(e,t)}),(function(e){return B_(t,e)}))},e.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},e.prototype.setVisual=function(e,t){this._visual=this._visual||{},z_(e)?Nr(this._visual,e):this._visual[e]=t},e.prototype.getItemVisual=function(e,t){var n=this._itemVisuals[e],a=n&&n[t];return null==a?this.getVisual(t):a},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(e,t){var n=this._itemVisuals,a=n[e];a||(a=n[e]={});var i=a[t];return null==i&&(Zr(i=this.getVisual(t))?i=i.slice():z_(i)&&(i=Nr({},i)),a[t]=i),i},e.prototype.setItemVisual=function(e,t,n){var a=this._itemVisuals[e]||{};this._itemVisuals[e]=a,z_(t)?Nr(a,t):a[t]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(e,t){z_(e)?Nr(this._layout,e):this._layout[e]=t},e.prototype.getLayout=function(e){return this._layout[e]},e.prototype.getItemLayout=function(e){return this._itemLayouts[e]},e.prototype.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?Nr(this._itemLayouts[e]||{},t):t},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(e,t){var n=this.hostModel&&this.hostModel.seriesIndex;Qm(n,this.dataType,e,t),this._graphicEls[e]=t},e.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},e.prototype.eachItemGraphicEl=function(e,t){Ur(this._graphicEls,(function(n,a){n&&e&&e.call(t,n,a)}))},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:U_(this.dimensions,this._getDimInfo,this),this.hostModel)),V_(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(e,t){var n=this[e];Qr(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=n.apply(this,arguments);return t.apply(this,[e].concat(ho(arguments)))})},e.internalField=(R_=function(e){var t=e._invertedIndicesMap;Ur(t,(function(n,a){var i=e._dimInfos[a],r=i.ordinalMeta,o=i.stack,s=e._store;if(r||o){if(n=t[a]=o?new Array(s.count()):new j_(r.categories.length),r)for(var l=0;l<n.length;l++)n[l]=-1;for(l=0;l<s.count();l++)n[s.get(i.storeDimIndex,l)]=l}}))},N_=function(e,t,n){return Ed(e._getCategory(t,n),null)},B_=function(e,t){var n=e._idList[t];return null==n&&null!=e._idDimIdx&&(n=N_(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n},L_=function(e){return Zr(e)||(e=null!=e?[e]:[]),e},q_=function(t){var n=new e(t._schema?t._schema:U_(t.dimensions,t._getDimInfo,t),t.hostModel);return V_(n,t),n},V_=function(e,t){Ur(H_.concat(t.__wrappedMethods||[]),(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e.__wrappedMethods=t.__wrappedMethods,Ur(W_,(function(n){e[n]=Fr(t[n])})),e._calculationInfo=Nr({},t._calculationInfo)},void(G_=function(e,t){var n=e._nameList,a=e._idList,i=e._nameDimIdx,r=e._idDimIdx,o=n[t],s=a[t];if(null==o&&null!=i&&(n[t]=o=N_(e,i,t)),null==s&&null!=r&&(a[t]=s=N_(e,r,t)),null==s&&null!=o){var l=e._nameRepeatCount,p=l[o]=(l[o]||0)+1;s=o,p>1&&(s+="__ec__"+p),a[t]=s}})),e}();function K_(e,t){Wb(e)||(e=Kb(e));var n=(t=t||{}).coordDimensions||[],a=t.dimensionsDefine||e.dimensionsDefine||[],i=_o(),r=[],o=function(e,t,n,a){var i=Math.max(e.dimensionsDetectedCount||1,t.length,n.length,a||0);return Ur(t,(function(e){var t;no(e)&&(t=e.dimsDef)&&(i=Math.max(i,t.length))})),i}(e,n,a,t.dimensionsCount),s=t.canOmitUnusedDimensions&&F_(o),l=a===e.dimensionsDefine,p=l?A_(e):O_(a),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,o));for(var d=_o(c),u=new Lx(o),m=0;m<u.length;m++)u[m]=-1;function h(e){var t=u[e];if(t<0){var n=a[e],i=no(n)?n:{name:n},o=new E_,s=i.name;null!=s&&null!=p.get(s)&&(o.name=o.displayName=s),null!=i.type&&(o.type=i.type),null!=i.displayName&&(o.displayName=i.displayName),i.stack&&(o.stack=!0);var l=r.length;return u[e]=l,o.storeDimIndex=e,r.push(o),o}return r[t]}if(!s)for(m=0;m<o;m++)h(m);d.each((function(e,t){var n=bd(e).slice();if(1===n.length&&!Jr(n[0])&&n[0]<0)d.set(t,!1);else{var a=d.set(t,[]);Ur(n,(function(e,n){var i=Jr(e)?p.get(e):e;null!=i&&i<o&&(a[n]=i,f(h(i),t,n))}))}}));var g=0;function f(e,t,n){null!=Fv.get(t)?e.otherDims[t]=n:(e.coordDim=t,e.coordDimIndex=n,i.set(t,!0))}Ur(n,(function(e){var t,n,a,i;if(Jr(e))t=e,i={};else{t=(i=e).name;var r=i.ordinalMeta;i.ordinalMeta=null,(i=Nr({},i)).ordinalMeta=r,n=i.dimsDef,a=i.otherDims,i.name=i.coordDim=i.coordDimIndex=i.dimsDef=i.otherDims=null}var s=d.get(t);if(!1!==s){if(!(s=bd(s)).length)for(var p=0;p<(n&&n.length||1);p++){for(;g<o&&null!=h(g).coordDim;)g++;g<o&&s.push(g++)}Ur(s,(function(e,r){var o=h(e);if(l&&null!=i.type&&(o.type=i.type),f(Lr(o,i),t,r),null==o.name&&n){var s=n[r];!no(s)&&(s={name:s}),o.name=o.displayName=s.name,o.defaultTooltip=s.defaultTooltip}a&&Lr(o.otherDims,a)}))}}));var y=t.generateCoord,v=t.generateCoordCount,b=null!=v;v=y?v||1:0;var x=y||"value";function w(e){null==e.name&&(e.name=e.coordDim)}if(s)Ur(r,(function(e){w(e)})),r.sort((function(e,t){return e.storeDimIndex-t.storeDimIndex}));else for(var S=0;S<o;S++){var C=h(S);null==C.coordDim&&(C.coordDim=Y_(x,i,b),C.coordDimIndex=0,(!y||v<=0)&&(C.isExtraCoord=!0),v--),w(C),null!=C.type||Xv(e,S)!==Uv&&(!C.isExtraCoord||null==C.otherDims.itemName&&null==C.otherDims.seriesName)||(C.type="ordinal")}return function(e){for(var t=_o(),n=0;n<e.length;n++){var a=e[n],i=a.name,r=t.get(i)||0;r>0&&(a.name=i+(r-1)),r++,t.set(i,r)}}(r),new P_({source:e,dimensions:r,fullDimensionCount:o,dimensionOmitted:s})}function Y_(e,t,n){if(n||t.hasKey(e)){for(var a=0;t.hasKey(e+a);)a++;e+=a}return t.set(e,!0),e}var X_=function(e){this.coordSysDims=[],this.axisMap=_o(),this.categoryAxisMap=_o(),this.coordSysName=e};var Z_={cartesian2d:function(e,t,n,a){var i=e.getReferringComponents("xAxis",Rd).models[0],r=e.getReferringComponents("yAxis",Rd).models[0];t.coordSysDims=["x","y"],n.set("x",i),n.set("y",r),Q_(i)&&(a.set("x",i),t.firstCategoryDimIndex=0),Q_(r)&&(a.set("y",r),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,n,a){var i=e.getReferringComponents("singleAxis",Rd).models[0];t.coordSysDims=["single"],n.set("single",i),Q_(i)&&(a.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,n,a){var i=e.getReferringComponents("polar",Rd).models[0],r=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",r),n.set("angle",o),Q_(r)&&(a.set("radius",r),t.firstCategoryDimIndex=0),Q_(o)&&(a.set("angle",o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,a){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,a){var i=e.ecModel,r=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=r.dimensions.slice();Ur(r.parallelAxisIndex,(function(e,r){var s=i.getComponent("parallelAxis",e),l=o[r];n.set(l,s),Q_(s)&&(a.set(l,s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=r))}))}};function Q_(e){return"category"===e.get("type")}function J_(e,t,n){var a,i,r,o=(n=n||{}).byIndex,s=n.stackedCoordDimension;!function(e){return!D_(e.schema)}(t)?(i=t.schema,a=i.dimensions,r=t.store):a=t;var l,p,c,d,u=!(!e||!e.get("stack"));if(Ur(a,(function(e,t){Jr(e)&&(a[t]=e={name:e}),u&&!e.isExtraCoord&&(o||l||!e.ordinalMeta&&!e.stack||(l=e),p||"ordinal"===e.type||"time"===e.type||s&&s!==e.coordDim||(p=e))})),!p||o||l||(o=!0),p){c="__\0ecstackresult_"+e.id,d="__\0ecstackedover_"+e.id,l&&(l.createInvertedIndices=!0);var m=p.coordDim,h=p.type,g=0;Ur(a,(function(e){e.coordDim===m&&g++}));var f={name:c,coordDim:m,coordDimIndex:g,type:h,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},y={name:d,coordDim:d,coordDimIndex:g+1,type:h,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};i?(r&&(f.storeDimIndex=r.ensureCalculationDimension(d,h),y.storeDimIndex=r.ensureCalculationDimension(c,h)),i.appendCalculationDimension(f),i.appendCalculationDimension(y)):(a.push(f),a.push(y))}return{stackedDimension:p&&p.name,stackedByDimension:l&&l.name,isStackedByIndex:o,stackedOverDimension:d,stackResultDimension:c}}function eT(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function tT(e,t){return eT(e,t)?e.getCalculationInfo("stackResultDimension"):t}function nT(e,t,n){n=n||{};var a,i=t.getSourceManager(),r=!1;e?(r=!0,a=Kb(e)):r=(a=i.getSource()).sourceFormat===Rv;var o=function(e){var t=e.get("coordinateSystem"),n=new X_(t),a=Z_[t];if(a)return a(e,n,n.axisMap,n.categoryAxisMap),n}(t),s=function(e,t){var n,a=e.get("coordinateSystem"),i=gb.get(a);return t&&t.coordSysDims&&(n=jr(t.coordSysDims,(function(e){var n={name:e},a=t.axisMap.get(e);if(a){var i=a.get("type");n.type=I_(i)}return n}))),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}(t,o),l=n.useEncodeDefaulter,p=Qr(l)?l:l?Xr($v,s,t):null,c=K_(a,{coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:p,canOmitUnusedDimensions:!r}),d=function(e,t,n){var a,i;return n&&Ur(e,(function(e,r){var o=e.coordDim,s=n.categoryAxisMap.get(o);s&&(null==a&&(a=r),e.ordinalMeta=s.getOrdinalMeta(),t&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(i=!0)})),i||null==a||(e[a].otherDims.itemName=0),a}(c.dimensions,n.createInvertedIndices,o),u=r?null:i.getSharedDataStore(c),m=J_(t,{schema:c,store:u}),h=new $_(c,t);h.setCalculationInfo(m);var g=null!=d&&function(e){if(e.sourceFormat===Rv){var t=function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return!Zr(Sd(t))}}(a)?function(e,t,n,a){return a===d?n:this.defaultDimValueGetter(e,t,n,a)}:null;return h.hasItemOption=!1,h.initData(r?a:u,null,g),h}var aT=function(){function e(e){this._setting=e||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(e){return this._setting[e]},e.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},e.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},e.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(e){this._isBlank=e},e}();Yd(aT);var iT=0,rT=function(){function e(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++iT}return e.createByAxisModel=function(t){var n=t.option,a=n.data,i=a&&jr(a,oT);return new e({categories:i,needCollect:!i,deduplication:!1!==n.dedplication})},e.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},e.prototype.parseAndCollect=function(e){var t,n=this._needCollect;if(!Jr(e)&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var a=this._getOrCreateMap();return null==(t=a.get(e))&&(n?(t=this.categories.length,this.categories[t]=e,a.set(e,t)):t=NaN),t},e.prototype._getOrCreateMap=function(){return this._map||(this._map=_o(this.categories))},e}();function oT(e){return no(e)&&null!=e.value?e.value:e+""}function sT(e){return"interval"===e.type||"log"===e.type}function lT(e,t,n,a){var i={},r=e[1]-e[0],o=i.interval=sd(r/t,!0);null!=n&&o<n&&(o=i.interval=n),null!=a&&o>a&&(o=i.interval=a);var s=i.intervalPrecision=cT(o);return function(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),dT(e,0,t),dT(e,1,t),e[0]>e[1]&&(e[0]=e[1])}(i.niceTickExtent=[Kc(Math.ceil(e[0]/o)*o,s),Kc(Math.floor(e[1]/o)*o,s)],e),i}function pT(e){var t=Math.pow(10,od(e)),n=e/t;return n?2===n?n=3:3===n?n=5:n*=2:n=1,Kc(n*t)}function cT(e){return Xc(e)+2}function dT(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function uT(e,t){return e>=t[0]&&e<=t[1]}function mT(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function hT(e,t){return e*(t[1]-t[0])+t[0]}var gT=function(e){function t(t){var n=e.call(this,t)||this;n.type="ordinal";var a=n.getSetting("ordinalMeta");return a||(a=new rT({})),Zr(a)&&(a=new rT({categories:jr(a,(function(e){return no(e)?e.value:e}))})),n._ordinalMeta=a,n._extent=n.getSetting("extent")||[0,a.categories.length-1],n}return ze(t,e),t.prototype.parse=function(e){return null==e?NaN:Jr(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return uT(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return mT(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(hT(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var t=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],i=0,r=this._ordinalMeta.categories.length,o=Math.min(r,t.length);i<o;++i){var s=t[i];n[i]=s,a[s]=i}for(var l=0;i<r;++i){for(;null!=a[l];)l++;n.push(l),a[l]=i}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var t=this._ticksByOrdinalNumber;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getRawOrdinalNumber=function(e){var t=this._ordinalNumbersByTick;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var t=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[t];return null==n?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(aT);aT.registerClass(gT);var fT=Kc,yT=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n._interval=0,n._intervalPrecision=2;var a=n.getSetting("ticksGenerator");return Qr(a)&&(n._ticksGenerator=a),n}return ze(t,e),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return uT(e,this._extent)},t.prototype.normalize=function(e){return mT(e,this._extent)},t.prototype.scale=function(e){return hT(e,this._extent)},t.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},t.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),this.setExtent(t[0],t[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=cT(e)},t.prototype.getTicks=function(e){var t,n=this._interval,a=this._extent,i=this._niceExtent,r=this._intervalPrecision,o=this._ticksGenerator;if(o)try{if(t=o(a,n,i,r))return t}catch(e){}if(t=[],!n)return t;a[0]<i[0]&&(e?t.push({value:fT(i[0]-n,r)}):t.push({value:a[0]}));for(var s=i[0];s<=i[1]&&(t.push({value:s}),(s=fT(s+n,r))!==t[t.length-1].value);)if(t.length>1e4)return[];var l=t.length?t[t.length-1].value:i[1];return a[1]>l&&(e?t.push({value:fT(l+n,r)}):t.push({value:a[1]})),t},t.prototype.getMinorTicks=function(e){for(var t=this.getTicks(!0),n=[],a=this.getExtent(),i=1;i<t.length;i++){for(var r=t[i],o=t[i-1],s=0,l=[],p=(r.value-o.value)/e;s<e-1;){var c=fT(o.value+(s+1)*p);c>a[0]&&c<a[1]&&l.push(c),s++}n.push(l)}return n},t.prototype.getLabel=function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=Xc(e.value)||0:"auto"===n&&(n=this._intervalPrecision),lv(fT(e.value,n,!0))},t.prototype.calcNiceTicks=function(e,t,n){e=e||5;var a=this._extent,i=a[1]-a[0];if(isFinite(i)){i<0&&(i=-i,a.reverse());var r=lT(a,e,t,n);this._intervalPrecision=r.intervalPrecision,this._interval=r.interval,this._niceExtent=r.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=Math.abs(t[0]);e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;var a=t[1]-t[0];isFinite(a)||(t[0]=0,t[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval;e.fixMin||(t[0]=fT(Math.floor(t[0]/i)*i)),e.fixMax||(t[1]=fT(Math.ceil(t[1]/i)*i))},t.prototype.setNiceExtent=function(e,t){this._niceExtent=[e,t]},t.type="interval",t}(aT);aT.registerClass(yT);var vT="undefined"!=typeof Float32Array,bT=vT?Float32Array:Array;function xT(e){return Zr(e)?vT?new Float32Array(e):e:new bT(e)}var wT="__ec_stack_";function ST(e){return e.get("stack")||wT+e.seriesIndex}function CT(e){return e.dim+e.index}function _T(e,t){var n=[];return t.eachSeriesByType(e,(function(e){kT(e)&&n.push(e)})),n}function TT(e){var t=function(e){var t={};Ur(e,(function(e){var n=e.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var a=e.getData(),i=n.dim+"_"+n.index,r=a.getDimensionIndex(a.mapDimension(n.dim)),o=a.getStore(),s=0,l=o.count();s<l;++s){var p=o.get(r,s);t[i]?t[i].push(p):t[i]=[p]}}));var n={};for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];if(i){i.sort((function(e,t){return e-t}));for(var r=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(r=null===r?s:Math.min(r,s))}n[a]=r}}return n}(e),n=[];return Ur(e,(function(e){var a,i=e.coordinateSystem.getBaseAxis(),r=i.getExtent();if("category"===i.type)a=i.getBandWidth();else if("value"===i.type||"time"===i.type){var o=i.dim+"_"+i.index,s=t[o],l=Math.abs(r[1]-r[0]),p=i.scale.getExtent(),c=Math.abs(p[1]-p[0]);a=s?l/c*s:l}else{var d=e.getData();a=Math.abs(r[1]-r[0])/d.count()}var u=$c(e.get("barWidth"),a),m=$c(e.get("barMaxWidth"),a),h=$c(e.get("barMinWidth")||(PT(e)?.5:1),a),g=e.get("barGap"),f=e.get("barCategoryGap");n.push({bandWidth:a,barWidth:u,barMaxWidth:m,barMinWidth:h,barGap:g,barCategoryGap:f,axisKey:CT(i),stackId:ST(e)})})),IT(n)}function IT(e){var t={};Ur(e,(function(e,n){var a=e.axisKey,i=e.bandWidth,r=t[a]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},o=r.stacks;t[a]=r;var s=e.stackId;o[s]||r.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var l=e.barWidth;l&&!o[s].width&&(o[s].width=l,l=Math.min(r.remainedWidth,l),r.remainedWidth-=l);var p=e.barMaxWidth;p&&(o[s].maxWidth=p);var c=e.barMinWidth;c&&(o[s].minWidth=c);var d=e.barGap;null!=d&&(r.gap=d);var u=e.barCategoryGap;null!=u&&(r.categoryGap=u)}));var n={};return Ur(t,(function(e,t){n[t]={};var a=e.stacks,i=e.bandWidth,r=e.categoryGap;if(null==r){var o=Kr(a).length;r=Math.max(35-4*o,15)+"%"}var s=$c(r,i),l=$c(e.gap,1),p=e.remainedWidth,c=e.autoWidthCount,d=(p-s)/(c+(c-1)*l);d=Math.max(d,0),Ur(a,(function(e){var t=e.maxWidth,n=e.minWidth;if(e.width){a=e.width;t&&(a=Math.min(a,t)),n&&(a=Math.max(a,n)),e.width=a,p-=a+l*a,c--}else{var a=d;t&&t<a&&(a=Math.min(t,p)),n&&n>a&&(a=n),a!==d&&(e.width=a,p-=a+l*a,c--)}})),d=(p-s)/(c+(c-1)*l),d=Math.max(d,0);var u,m=0;Ur(a,(function(e,t){e.width||(e.width=d),u=e,m+=e.width*(1+l)})),u&&(m-=u.width*l);var h=-m/2;Ur(a,(function(e,a){n[t][a]=n[t][a]||{bandWidth:i,offset:h,width:e.width},h+=e.width*(1+l)}))})),n}function ET(e,t){var n=_T(e,t),a=TT(n);Ur(n,(function(e){var t=e.getData(),n=e.coordinateSystem.getBaseAxis(),i=ST(e),r=a[CT(n)][i],o=r.offset,s=r.width;t.setLayout({bandWidth:r.bandWidth,offset:o,size:s})}))}function MT(e){return{seriesType:e,plan:Cw(),reset:function(e){if(kT(e)){var t=e.getData(),n=e.coordinateSystem,a=n.getBaseAxis(),i=n.getOtherAxis(a),r=t.getDimensionIndex(t.mapDimension(i.dim)),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=e.get("showBackground",!0),l=t.mapDimension(i.dim),p=t.getCalculationInfo("stackResultDimension"),c=eT(t,l)&&!!t.getCalculationInfo("stackedOnSeries"),d=i.isHorizontal(),u=function(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}(0,i),m=PT(e),h=e.get("barMinHeight")||0,g=p&&t.getDimensionIndex(p),f=t.getLayout("size"),y=t.getLayout("offset");return{progress:function(e,t){for(var a,i=e.count,l=m&&xT(3*i),p=m&&s&&xT(3*i),v=m&&xT(i),b=n.master.getRect(),x=d?b.width:b.height,w=t.getStore(),S=0;null!=(a=e.next());){var C=w.get(c?g:r,a),_=w.get(o,a),T=u,I=void 0;c&&(I=+C-w.get(r,a));var E=void 0,M=void 0,k=void 0,P=void 0;if(d){var D=n.dataToPoint([C,_]);if(c)T=n.dataToPoint([I,_])[0];E=T,M=D[1]+y,k=D[0]-T,P=f,Math.abs(k)<h&&(k=(k<0?-1:1)*h)}else{D=n.dataToPoint([_,C]);if(c)T=n.dataToPoint([_,I])[1];E=D[0]+y,M=T,k=f,P=D[1]-T,Math.abs(P)<h&&(P=(P<=0?-1:1)*h)}m?(l[S]=E,l[S+1]=M,l[S+2]=d?k:P,p&&(p[S]=d?b.x:E,p[S+1]=d?M:b.y,p[S+2]=x),v[a]=a):t.setItemLayout(a,{x:E,y:M,width:k,height:P}),S+=3}m&&t.setLayout({largePoints:l,largeDataIndices:v,largeBackgroundPoints:p,valueAxisHorizontal:d})}}}}}}function kT(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function PT(e){return e.pipelineContext&&e.pipelineContext.large}var DT=function(e){function t(t){var n=e.call(this,t)||this;return n.type="time",n}return ze(t,e),t.prototype.getLabel=function(e){var t=this.getSetting("useUTC");return Hy(e.value,Vy[function(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Uy(this._minLevelUnit))]||Vy.second,t,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,t,n){var a=this.getSetting("useUTC");return function(e,t,n,a,i){var r=null;if(Jr(n))r=n;else if(Qr(n))r=n(e.value,t,{level:e.level});else{var o=Nr({},Ny);if(e.level>0)for(var s=0;s<qy.length;++s)o[qy[s]]="{primary|"+o[qy[s]]+"}";var l=n?!1===n.inherit?n:Lr(n,o):o,p=Wy(e.value,i);if(l[p])r=l[p];else if(l.inherit){for(s=Gy.indexOf(p)-1;s>=0;--s)if(l[p]){r=l[p];break}r=r||o.none}if(Zr(r)){var c=null==e.level?0:e.level>=0?e.level:r.length+e.level;r=r[c=Math.min(c,r.length-1)]}}return Hy(new Date(e.value),r,i,a)}(e,t,n,this.getSetting("locale"),a)},t.prototype.getTicks=function(){var e=this._interval,t=this._extent,n=[];if(!e)return n;n.push({value:t[0],level:0});var a=this.getSetting("useUTC"),i=function(e,t,n,a){var i=1e4,r=Gy,o=0;function s(e,t,n,i,r,o,s){for(var l=new Date(t),p=t,c=l[i]();p<n&&p<=a[1];)s.push({value:p}),c+=e,l[r](c),p=l.getTime();s.push({value:p,notAdd:!0})}function l(e,i,r){var o=[],l=!i.length;if(!function(e,t,n,a){var i=id(t),r=id(n),o=function(e){return $y(i,e,a)===$y(r,e,a)},s=function(){return o("year")},l=function(){return s()&&o("month")},p=function(){return l()&&o("day")},c=function(){return p()&&o("hour")},d=function(){return c()&&o("minute")},u=function(){return d()&&o("second")},m=function(){return u()&&o("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return p();case"hour":return c();case"minute":return d();case"second":return u();case"millisecond":return m()}}(Uy(e),a[0],a[1],n)){l&&(i=[{value:LT(new Date(a[0]),e,n)},{value:a[1]}]);for(var p=0;p<i.length-1;p++){var c=i[p].value,d=i[p+1].value;if(c!==d){var u=void 0,m=void 0,h=void 0,g=!1;switch(e){case"year":u=Math.max(1,Math.round(t/Ry/365)),m=Ky(n),h=tv(n);break;case"half-year":case"quarter":case"month":u=FT(t),m=Yy(n),h=nv(n);break;case"week":case"half-week":case"day":u=AT(t,31),m=Xy(n),h=av(n),g=!0;break;case"half-day":case"quarter-day":case"hour":u=RT(t),m=Zy(n),h=iv(n);break;case"minute":u=BT(t,!0),m=Qy(n),h=rv(n);break;case"second":u=BT(t,!1),m=Jy(n),h=ov(n);break;case"millisecond":u=NT(t),m=ev(n),h=sv(n)}s(u,c,d,m,h,g,o),"year"===e&&r.length>1&&0===p&&r.unshift({value:r[0].value-u})}}for(p=0;p<o.length;p++)r.push(o[p]);return o}}for(var p=[],c=[],d=0,u=0,m=0;m<r.length&&o++<i;++m){var h=Uy(r[m]);if(jy(r[m]))if(l(r[m],p[p.length-1]||[],c),h!==(r[m+1]?Uy(r[m+1]):null)){if(c.length){u=d,c.sort((function(e,t){return e.value-t.value}));for(var g=[],f=0;f<c.length;++f){var y=c[f].value;0!==f&&c[f-1].value===y||(g.push(c[f]),y>=a[0]&&y<=a[1]&&d++)}var v=(a[1]-a[0])/t;if(d>1.5*v&&u>v/1.5)break;if(p.push(g),d>v||e===r[m])break}c=[]}}0;var b=Wr(jr(p,(function(e){return Wr(e,(function(e){return e.value>=a[0]&&e.value<=a[1]&&!e.notAdd}))})),(function(e){return e.length>0})),x=[],w=b.length-1;for(m=0;m<b.length;++m)for(var S=b[m],C=0;C<S.length;++C)x.push({value:S[C].value,level:w-m});x.sort((function(e,t){return e.value-t.value}));var _=[];for(m=0;m<x.length;++m)0!==m&&x[m].value===x[m-1].value||_.push(x[m]);return _}(this._minLevelUnit,this._approxInterval,a,t);return(n=n.concat(i)).push({value:t[1],level:0}),n},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=Ry,t[1]+=Ry),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-Ry}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,t,n){e=e||10;var a=this._extent,i=a[1]-a[0];this._approxInterval=i/e,null!=t&&this._approxInterval<t&&(this._approxInterval=t),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var r=OT.length,o=Math.min(function(e,t,n,a){for(;n<a;){var i=n+a>>>1;e[i][1]<t?n=i+1:a=i}return n}(OT,this._approxInterval,0,r),r-1);this._interval=OT[o][1],this._minLevelUnit=OT[Math.max(o-1,0)][0]},t.prototype.parse=function(e){return to(e)?e:+id(e)},t.prototype.contain=function(e){return uT(this.parse(e),this._extent)},t.prototype.normalize=function(e){return mT(this.parse(e),this._extent)},t.prototype.scale=function(e){return hT(e,this._extent)},t.type="time",t}(yT),OT=[["second",Oy],["minute",Ay],["hour",Fy],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",By/2],["year",By]];function AT(e,t){return(e/=Ry)>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function FT(e){return(e/=2592e6)>6?6:e>3?3:e>2?2:1}function RT(e){return(e/=Fy)>12?12:e>6?6:e>3.5?4:e>2?2:1}function BT(e,t){return(e/=t?Ay:Oy)>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function NT(e){return sd(e,!0)}function LT(e,t,n){var a=new Date(e);switch(Uy(t)){case"year":case"month":a[nv(n)](0);case"day":a[av(n)](1);case"hour":a[iv(n)](0);case"minute":a[rv(n)](0);case"second":a[ov(n)](0),a[sv(n)](0)}return a.getTime()}aT.registerClass(DT);var VT=aT.prototype,qT=yT.prototype,GT=Kc,zT=Math.floor,UT=Math.ceil,jT=Math.pow,HT=Math.log,WT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new yT,t._interval=0,t}return ze(t,e),t.prototype.getTicks=function(e){var t=this._originalScale,n=this._extent,a=t.getExtent();return jr(qT.getTicks.call(this,e),(function(e){var t=e.value,i=Kc(jT(this.base,t));return i=t===n[0]&&this._fixMin?KT(i,a[0]):i,{value:i=t===n[1]&&this._fixMax?KT(i,a[1]):i}}),this)},t.prototype.setExtent=function(e,t){var n=HT(this.base);e=HT(Math.max(0,e))/n,t=HT(Math.max(0,t))/n,qT.setExtent.call(this,e,t)},t.prototype.getExtent=function(){var e=this.base,t=VT.getExtent.call(this);t[0]=jT(e,t[0]),t[1]=jT(e,t[1]);var n=this._originalScale.getExtent();return this._fixMin&&(t[0]=KT(t[0],n[0])),this._fixMax&&(t[1]=KT(t[1],n[1])),t},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=HT(e[0])/HT(t),e[1]=HT(e[1])/HT(t),VT.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.calcNiceTicks=function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n===1/0||n<=0)){var a=rd(n);for(e/n*a<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var i=[Kc(UT(t[0]/a)*a),Kc(zT(t[1]/a)*a)];this._interval=a,this._niceExtent=i}},t.prototype.calcNiceExtent=function(e){qT.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return uT(e=HT(e)/HT(this.base),this._extent)},t.prototype.normalize=function(e){return mT(e=HT(e)/HT(this.base),this._extent)},t.prototype.scale=function(e){return e=hT(e,this._extent),jT(this.base,e)},t.type="log",t}(aT),$T=WT.prototype;function KT(e,t){return GT(e,Xc(t))}$T.getMinorTicks=qT.getMinorTicks,$T.getLabel=qT.getLabel,aT.registerClass(WT);var YT=function(){function e(e,t,n){this._prepareParams(e,t,n)}return e.prototype._prepareParams=function(e,t,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var a=this._isOrdinal="ordinal"===e.type;this._needCrossZero="interval"===e.type&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=this._modelMinRaw=t.get("min",!0);Qr(i)?this._modelMinNum=JT(e,i({min:n[0],max:n[1]})):"dataMin"!==i&&(this._modelMinNum=JT(e,i));var r=this._modelMaxRaw=t.get("max",!0);if(Qr(r)?this._modelMaxNum=JT(e,r({min:n[0],max:n[1]})):"dataMax"!==r&&(this._modelMaxNum=JT(e,r)),a)this._axisDataLen=t.getCategories().length;else{var o=t.get("boundaryGap"),s=Zr(o)?o:[o||0,o||0];"boolean"==typeof s[0]||"boolean"==typeof s[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[_c(s[0],1),_c(s[1],1)]}},e.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,n=this._dataMax,a=this._axisDataLen,i=this._boundaryGapInner,r=e?null:n-t||Math.abs(t),o="dataMin"===this._modelMinRaw?t:this._modelMinNum,s="dataMax"===this._modelMaxRaw?n:this._modelMaxNum,l=null!=o,p=null!=s;null==o&&(o=e?a?0:NaN:t-i[0]*r),null==s&&(s=e?a?a-1:NaN:n+i[1]*r),(null==o||!isFinite(o))&&(o=NaN),(null==s||!isFinite(s))&&(s=NaN);var c=po(o)||po(s)||e&&!a;this._needCrossZero&&(o>0&&s>0&&!l&&(o=0),o<0&&s<0&&!p&&(s=0));var d=this._determinedMin,u=this._determinedMax;return null!=d&&(o=d,l=!0),null!=u&&(s=u,p=!0),{min:o,max:s,minFixed:l,maxFixed:p,isBlank:c}},e.prototype.modifyDataMinMax=function(e,t){this[ZT[e]]=t},e.prototype.setDeterminedMinMax=function(e,t){var n=XT[e];this[n]=t},e.prototype.freeze=function(){this.frozen=!0},e}(),XT={min:"_determinedMin",max:"_determinedMax"},ZT={min:"_dataMin",max:"_dataMax"};function QT(e,t,n){var a=e.rawExtentInfo;return a||(a=new YT(e,t,n),e.rawExtentInfo=a,a)}function JT(e,t){return null==t?null:po(t)?NaN:e.parse(t)}function eI(e,t){var n=e.type,a=QT(e,t,e.getExtent()).calculate();e.setBlank(a.isBlank);var i=a.min,r=a.max,o=t.ecModel;if(o&&"time"===n){var s=_T("bar",o),l=!1;if(Ur(s,(function(e){l=l||e.getBaseAxis()===t.axis})),l){var p=TT(s),c=function(e,t,n,a){var i=n.axis.getExtent(),r=i[1]-i[0],o=function(e,t,n){if(e&&t){var a=e[CT(t)];return null!=a&&null!=n?a[ST(n)]:a}}(a,n.axis);if(void 0===o)return{min:e,max:t};var s=1/0;Ur(o,(function(e){s=Math.min(e.offset,s)}));var l=-1/0;Ur(o,(function(e){l=Math.max(e.offset+e.width,l)})),s=Math.abs(s),l=Math.abs(l);var p=s+l,c=t-e,d=c/(1-(s+l)/r)-c;return t+=d*(l/p),e-=d*(s/p),{min:e,max:t}}(i,r,t,p);i=c.min,r=c.max}}return{extent:[i,r],fixMin:a.minFixed,fixMax:a.maxFixed}}function tI(e,t){var n=t,a=eI(e,n),i=a.extent,r=n.get("splitNumber");e instanceof WT&&(e.base=n.get("logBase"));var o=e.type,s=n.get("interval"),l="interval"===o||"time"===o;e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:r,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),null!=s&&e.setInterval&&e.setInterval(s)}function nI(e,t){if(t=t||e.get("type"))switch(t){case"category":return new gT({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new DT({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});case"value":return new yT({ticksGenerator:e.getTicksGenerator()});default:return new(aT.getClass(t)||yT)}}function aI(e){var t,n,a=e.getLabelModel().get("formatter"),i="category"===e.type?e.scale.getExtent()[0]:null;return"time"===e.scale.type?(n=a,function(t,a){return e.scale.getFormattedLabel(t,a,n)}):Jr(a)?function(t){return function(n){var a=e.scale.getLabel(n);return t.replace("{value}",null!=a?a:"")}}(a):Qr(a)?(t=a,function(n,a){return null!=i&&(a=n.value-i),t(iI(e,n),a,null!=n.level?{level:n.level}:null)}):function(t){return e.scale.getLabel(t)}}function iI(e,t){return"category"===e.type?e.scale.getLabel(t):t.value}function rI(e,t){var n=t*Math.PI/180,a=e.width,i=e.height,r=a*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),o=a*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n));return new Ls(e.x,e.y,r,o)}function oI(e){var t=e.get("interval");return null==t?"auto":t}function sI(e){return"category"===e.type&&0===oI(e.getLabelModel())}function lI(e,t){var n={};return Ur(e.mapDimensionsAll(t),(function(t){n[tT(e,t)]=!0})),Kr(n)}var pI=function(){function e(){}return e.prototype.getNeedCrossZero=function(){return!this.option.scale},e.prototype.getCoordSysModel=function(){},e}();var cI=[],dI={registerPreprocessor:u_,registerProcessor:m_,registerPostInit:function(e){h_("afterinit",e)},registerPostUpdate:function(e){h_("afterupdate",e)},registerUpdateLifecycle:h_,registerAction:g_,registerCoordinateSystem:function(e,t){gb.register(e,t)},registerLayout:function(e,t){v_(a_,e,t,1e3,"layout")},registerVisual:f_,registerTransform:x_,registerLoading:b_,registerMap:function(e,t,n){var a=yC("registerMap");a&&a(e,t,n)},registerImpl:function(e,t){fC[e]=t},PRIORITY:xC,ComponentModel:Pv,ComponentView:Sw,SeriesModel:hw,ChartView:Iw,registerComponentModel:function(e){Pv.registerClass(e)},registerComponentView:function(e){Sw.registerClass(e)},registerSeriesModel:function(e){hw.registerClass(e)},registerChartView:function(e){Iw.registerClass(e)},registerSubTypeDefaulter:function(e,t){Pv.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){zc(e,t)}};function uI(e){Zr(e)?Ur(e,(function(e){uI(e)})):Vr(cI,e)>=0||(cI.push(e),Qr(e)&&(e={install:e}),e.install(dI))}function mI(e,t){return Math.abs(e-t)<1e-8}function hI(e,t,n){var a=0,i=e[0];if(!i)return!1;for(var r=1;r<e.length;r++){var o=e[r];a+=dm(i[0],i[1],o[0],o[1],t,n),i=o}var s=e[0];return mI(i[0],s[0])&&mI(i[1],s[1])||(a+=dm(i[0],i[1],s[0],s[1],t,n)),0!==a}var gI=[];function fI(e,t){for(var n=0;n<e.length;n++)Wo(e[n],e[n],t)}function yI(e,t,n,a){for(var i=0;i<e.length;i++){var r=e[i];a&&(r=a.project(r)),r&&isFinite(r[0])&&isFinite(r[1])&&($o(t,t,r),Ko(n,n,r))}}var vI=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},e}(),bI=function(e,t){this.type="polygon",this.exterior=e,this.interiors=t},xI=function(e){this.type="linestring",this.points=e},wI=function(e){function t(t,n,a){var i=e.call(this,t)||this;return i.type="geoJSON",i.geometries=n,i._center=a&&[a[0],a[1]],i}return ze(t,e),t.prototype.calcCenter=function(){for(var e,t=this.geometries,n=0,a=0;a<t.length;a++){var i=t[a],r=i.exterior,o=r&&r.length;o>n&&(e=i,n=o)}if(e)return function(e){for(var t=0,n=0,a=0,i=e.length,r=e[i-1][0],o=e[i-1][1],s=0;s<i;s++){var l=e[s][0],p=e[s][1],c=r*p-l*o;t+=c,n+=(r+l)*c,a+=(o+p)*c,r=l,o=p}return t?[n/t/3,a/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},t.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var n=[1/0,1/0],a=[-1/0,-1/0];return Ur(this.geometries,(function(t){"polygon"===t.type?yI(t.exterior,n,a,e):Ur(t.points,(function(t){yI(t,n,a,e)}))})),isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])||(n[0]=n[1]=a[0]=a[1]=0),t=new Ls(n[0],n[1],a[0]-n[0],a[1]-n[1]),e||(this._rect=t),t},t.prototype.contain=function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var a=0,i=n.length;a<i;a++){var r=n[a];if("polygon"===r.type){var o=r.exterior,s=r.interiors;if(hI(o,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(hI(s[l],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,t,n,a){var i=this.getBoundingRect(),r=i.width/i.height;n?a||(a=n/r):n=r*a;for(var o=new Ls(e,t,n,a),s=i.calculateTransform(o),l=this.geometries,p=0;p<l.length;p++){var c=l[p];"polygon"===c.type?(fI(c.exterior,s),Ur(c.interiors,(function(e){fI(e,s)}))):Ur(c.points,(function(e){fI(e,s)}))}(i=this._rect).copy(o),this._center=[i.x+i.width/2,i.y+i.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var n=new t(e,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},t}(vI),SI=function(e){function t(t,n){var a=e.call(this,t)||this;return a.type="geoSVG",a._elOnlyForCalculate=n,a}return ze(t,e),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),n=[t.x+t.width/2,t.y+t.height/2],a=ws(gI),i=e;i&&!i.isGeoSVGGraphicRoot;)Cs(a,i.getLocalTransform(),a),i=i.parent;return Es(a,a),Wo(n,n,a),n},t}(vI);function CI(e,t,n){for(var a=0;a<e.length;a++)e[a]=_I(e[a],t[a],n)}function _I(e,t,n){for(var a=[],i=t[0],r=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),i=s+=i,r=l+=r,a.push([s/n,l/n])}return a}function TI(e,t){return jr(Wr((e=function(e){if(!e.UTF8Encoding)return e;var t=e,n=t.UTF8Scale;return null==n&&(n=1024),Ur(t.features,(function(e){var t=e.geometry,a=t.encodeOffsets,i=t.coordinates;if(a)switch(t.type){case"LineString":t.coordinates=_I(i,a,n);break;case"Polygon":case"MultiLineString":CI(i,a,n);break;case"MultiPolygon":Ur(i,(function(e,t){return CI(e,a[t],n)}))}})),t.UTF8Encoding=!1,t}(e)).features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var n=e.properties,a=e.geometry,i=[];switch(a.type){case"Polygon":var r=a.coordinates;i.push(new bI(r[0],r.slice(1)));break;case"MultiPolygon":Ur(a.coordinates,(function(e){e[0]&&i.push(new bI(e[0],e.slice(1)))}));break;case"LineString":i.push(new xI([a.coordinates]));break;case"MultiLineString":i.push(new xI(a.coordinates))}var o=new wI(n[t||"name"],i,n.cp);return o.properties=n,o}))}var II=Dd();function EI(e){return"category"===e.type?function(e){var t=e.getLabelModel(),n=kI(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(e):function(e){var t=e.scale.getTicks(),n=aI(e);return{labels:jr(t,(function(t,a){return{level:t.level,formattedLabel:n(t,a),rawLabel:e.scale.getLabel(t),tickValue:t.value}}))}}(e)}function MI(e,t){return"category"===e.type?function(e,t){var n,a,i=PI(e,"ticks"),r=oI(t),o=DI(i,r);if(o)return o;t.get("show")&&!e.scale.isBlank()||(n=[]);if(Qr(r))n=FI(e,r,!0);else if("auto"===r){var s=kI(e,e.getLabelModel());a=s.labelCategoryInterval,n=jr(s.labels,(function(e){return e.tickValue}))}else n=AI(e,a=r,!0);return OI(i,r,{ticks:n,tickCategoryInterval:a})}(e,t):{ticks:jr(e.scale.getTicks(),(function(e){return e.value}))}}function kI(e,t){var n,a,i=PI(e,"labels"),r=oI(t),o=DI(i,r);return o||(Qr(r)?n=FI(e,r):(a="auto"===r?function(e){var t=II(e).autoInterval;return null!=t?t:II(e).autoInterval=e.calculateCategoryInterval()}(e):r,n=AI(e,a)),OI(i,r,{labels:n,labelCategoryInterval:a}))}function PI(e,t){return II(e)[t]||(II(e)[t]=[])}function DI(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function OI(e,t,n){return e.push({key:t,value:n}),n}function AI(e,t,n){var a=aI(e),i=e.scale,r=i.getExtent(),o=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),p=r[0],c=i.count();0!==p&&l>1&&c/l>2&&(p=Math.round(Math.ceil(p/l)*l));var d=sI(e),u=o.get("showMinLabel")||d,m=o.get("showMaxLabel")||d;u&&p!==r[0]&&g(r[0]);for(var h=p;h<=r[1];h+=l)g(h);function g(e){var t={value:e};s.push(n?e:{formattedLabel:a(t),rawLabel:i.getLabel(t),tickValue:e})}return m&&h-l!==r[1]&&g(r[1]),s}function FI(e,t,n){var a=e.scale,i=aI(e),r=[];return Ur(a.getTicks(),(function(e){var o=a.getLabel(e),s=e.value;t(e.value,o)&&r.push(n?s:{formattedLabel:i(e),rawLabel:o,tickValue:s})})),r}var RI=[0,1],BI=function(){function e(e,t,n){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=n||[0,0]}return e.prototype.contain=function(e){var t=this._extent,n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]);return e>=n&&e<=a},e.prototype.containData=function(e){return this.scale.contain(e)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(e){return Qc(e||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(e,t){var n=this._extent;n[0]=e,n[1]=t},e.prototype.dataToCoord=function(e,t){var n=this._extent,a=this.scale;return e=a.normalize(e),this.onBand&&"ordinal"===a.type&&NI(n=n.slice(),a.count()),Wc(e,RI,n,t)},e.prototype.coordToData=function(e,t){var n=this._extent,a=this.scale;this.onBand&&"ordinal"===a.type&&NI(n=n.slice(),a.count());var i=Wc(e,n,RI,t);return this.scale.scale(i)},e.prototype.pointToData=function(e,t){},e.prototype.getTicksCoords=function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=jr(MI(this,t).ticks,(function(e){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(e):e),tickValue:e}}),this);return function(e,t,n,a){var i=t.length;if(!e.onBand||n||!i)return;var r,o,s=e.getExtent();if(1===i)t[0].coord=s[0],r=t[1]={coord:s[1]};else{var l=t[i-1].tickValue-t[0].tickValue,p=(t[i-1].coord-t[0].coord)/l;Ur(t,(function(e){e.coord-=p/2})),o=1+e.scale.getExtent()[1]-t[i-1].tickValue,r={coord:t[i-1].coord+p*o},t.push(r)}var c=s[0]>s[1];d(t[0].coord,s[0])&&(a?t[0].coord=s[0]:t.shift());a&&d(s[0],t[0].coord)&&t.unshift({coord:s[0]});d(s[1],r.coord)&&(a?r.coord=s[1]:t.pop());a&&d(r.coord,s[1])&&t.push({coord:s[1]});function d(e,t){return e=Kc(e),t=Kc(t),c?e>t:e<t}}(this,n,t.get("alignWithLabel"),e.clamp),n},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return e>0&&e<100||(e=5),jr(this.scale.getMinorTicks(e),(function(e){return jr(e,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this)}),this)},e.prototype.getViewLabels=function(){return EI(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){if("time"===this.type){var e=this.model,t=e.get("bandWidthCalculator"),n=void 0;if(Qr(t))try{if(n=t(e))return n}catch(e){}}var a=this._extent,i=this.scale.getExtent(),r=i[1]-i[0]+(this.onBand?1:0);0===r&&(r=1);var o=Math.abs(a[1]-a[0]);return Math.abs(o)/r},e.prototype.calculateCategoryInterval=function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),n=aI(e),a=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,r=i.getExtent(),o=i.count();if(r[1]-r[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=r[0],p=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(p*Math.cos(a)),d=Math.abs(p*Math.sin(a)),u=0,m=0;l<=r[1];l+=s){var h,g,f=xc(n({value:l}),t.font,"center","top");h=1.3*f.width,g=1.3*f.height,u=Math.max(u,h,7),m=Math.max(m,g,7)}var y=u/c,v=m/d;isNaN(y)&&(y=1/0),isNaN(v)&&(v=1/0);var b=Math.max(0,Math.floor(Math.min(y,v))),x=II(e.model),w=e.getExtent(),S=x.lastAutoInterval,C=x.lastTickCount;return null!=S&&null!=C&&Math.abs(S-b)<=1&&Math.abs(C-o)<=1&&S>b&&x.axisExtent0===w[0]&&x.axisExtent1===w[1]?b=S:(x.lastTickCount=o,x.lastAutoInterval=b,x.axisExtent0=w[0],x.axisExtent1=w[1]),b}(this)},e}();function NI(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}var LI=2*Math.PI,VI=am.CMD,qI=["top","right","bottom","left"];function GI(e,t,n,a,i){var r=n.width,o=n.height;switch(e){case"top":a.set(n.x+r/2,n.y-t),i.set(0,-1);break;case"bottom":a.set(n.x+r/2,n.y+o+t),i.set(0,1);break;case"left":a.set(n.x-t,n.y+o/2),i.set(-1,0);break;case"right":a.set(n.x+r+t,n.y+o/2),i.set(1,0)}}function zI(e,t,n,a,i,r,o,s,l){o-=e,s-=t;var p=Math.sqrt(o*o+s*s),c=(o/=p)*n+e,d=(s/=p)*n+t;if(Math.abs(a-i)%LI<1e-4)return l[0]=c,l[1]=d,p-n;if(r){var u=a;a=lm(i),i=lm(u)}else a=lm(a),i=lm(i);a>i&&(i+=LI);var m=Math.atan2(s,o);if(m<0&&(m+=LI),m>=a&&m<=i||m+LI>=a&&m+LI<=i)return l[0]=c,l[1]=d,p-n;var h=n*Math.cos(a)+e,g=n*Math.sin(a)+t,f=n*Math.cos(i)+e,y=n*Math.sin(i)+t,v=(h-o)*(h-o)+(g-s)*(g-s),b=(f-o)*(f-o)+(y-s)*(y-s);return v<b?(l[0]=h,l[1]=g,Math.sqrt(v)):(l[0]=f,l[1]=y,Math.sqrt(b))}function UI(e,t,n,a,i,r,o,s){var l=i-e,p=r-t,c=n-e,d=a-t,u=Math.sqrt(c*c+d*d),m=(l*(c/=u)+p*(d/=u))/u;s&&(m=Math.min(Math.max(m,0),1)),m*=u;var h=o[0]=e+m*c,g=o[1]=t+m*d;return Math.sqrt((h-i)*(h-i)+(g-r)*(g-r))}function jI(e,t,n,a,i,r,o){n<0&&(e+=n,n=-n),a<0&&(t+=a,a=-a);var s=e+n,l=t+a,p=o[0]=Math.min(Math.max(i,e),s),c=o[1]=Math.min(Math.max(r,t),l);return Math.sqrt((p-i)*(p-i)+(c-r)*(c-r))}var HI=[];function WI(e,t,n){var a=jI(t.x,t.y,t.width,t.height,e.x,e.y,HI);return n.set(HI[0],HI[1]),a}function $I(e,t,n){for(var a,i,r=0,o=0,s=0,l=0,p=1/0,c=t.data,d=e.x,u=e.y,m=0;m<c.length;){var h=c[m++];1===m&&(s=r=c[m],l=o=c[m+1]);var g=p;switch(h){case VI.M:r=s=c[m++],o=l=c[m++];break;case VI.L:g=UI(r,o,c[m],c[m+1],d,u,HI,!0),r=c[m++],o=c[m++];break;case VI.C:g=Cl(r,o,c[m++],c[m++],c[m++],c[m++],c[m],c[m+1],d,u,HI),r=c[m++],o=c[m++];break;case VI.Q:g=kl(r,o,c[m++],c[m++],c[m],c[m+1],d,u,HI),r=c[m++],o=c[m++];break;case VI.A:var f=c[m++],y=c[m++],v=c[m++],b=c[m++],x=c[m++],w=c[m++];m+=1;var S=!!(1-c[m++]);a=Math.cos(x)*v+f,i=Math.sin(x)*b+y,m<=1&&(s=a,l=i),g=zI(f,y,b,x,x+w,S,(d-f)*b/v+f,u,HI),r=Math.cos(x+w)*v+f,o=Math.sin(x+w)*b+y;break;case VI.R:g=jI(s=r=c[m++],l=o=c[m++],c[m++],c[m++],d,u,HI);break;case VI.Z:g=UI(r,o,s,l,d,u,HI,!0),r=s,o=l}g<p&&(p=g,n.set(HI[0],HI[1]))}return p}var KI=new ks,YI=new ks,XI=new ks,ZI=new ks,QI=new ks;function JI(e,t){if(e){var n=e.getTextGuideLine(),a=e.getTextContent();if(a&&n){var i=e.textGuideLineConfig||{},r=[[0,0],[0,0],[0,0]],o=i.candidates||qI,s=a.getBoundingRect().clone();s.applyTransform(a.getComputedTransform());var l=1/0,p=i.anchor,c=e.getComputedTransform(),d=c&&Es([],c),u=t.get("length2")||0;p&&XI.copy(p);for(var m=0;m<o.length;m++){GI(o[m],0,s,KI,ZI),ks.scaleAndAdd(YI,KI,ZI,u),YI.transform(d);var h=e.getBoundingRect(),g=p?p.distance(YI):e instanceof Cm?$I(YI,e.path,XI):WI(YI,h,XI);g<l&&(l=g,YI.transform(c),XI.transform(c),XI.toArray(r[0]),YI.toArray(r[1]),KI.toArray(r[2]))}nE(r,t.get("minTurnAngle")),n.setShape({points:r})}}}var eE=[],tE=new ks;function nE(e,t){if(t<=180&&t>0){t=t/180*Math.PI,KI.fromArray(e[0]),YI.fromArray(e[1]),XI.fromArray(e[2]),ks.sub(ZI,KI,YI),ks.sub(QI,XI,YI);var n=ZI.len(),a=QI.len();if(!(n<.001||a<.001)){ZI.scale(1/n),QI.scale(1/a);var i=ZI.dot(QI);if(Math.cos(t)<i){var r=UI(YI.x,YI.y,XI.x,XI.y,KI.x,KI.y,eE,!1);tE.fromArray(eE),tE.scaleAndAdd(QI,r/Math.tan(Math.PI-t));var o=XI.x!==YI.x?(tE.x-YI.x)/(XI.x-YI.x):(tE.y-YI.y)/(XI.y-YI.y);if(isNaN(o))return;o<0?ks.copy(tE,YI):o>1&&ks.copy(tE,XI),tE.toArray(e[1])}}}}function aE(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,KI.fromArray(e[0]),YI.fromArray(e[1]),XI.fromArray(e[2]),ks.sub(ZI,YI,KI),ks.sub(QI,XI,YI);var a=ZI.len(),i=QI.len();if(!(a<.001||i<.001))if(ZI.scale(1/a),QI.scale(1/i),ZI.dot(t)<Math.cos(n)){var r=UI(YI.x,YI.y,XI.x,XI.y,KI.x,KI.y,eE,!1);tE.fromArray(eE);var o=Math.PI/2,s=o+Math.acos(QI.dot(t))-n;if(s>=o)ks.copy(tE,XI);else{tE.scaleAndAdd(QI,r/Math.tan(Math.PI/2-s));var l=XI.x!==YI.x?(tE.x-YI.x)/(XI.x-YI.x):(tE.y-YI.y)/(XI.y-YI.y);if(isNaN(l))return;l<0?ks.copy(tE,YI):l>1&&ks.copy(tE,XI)}tE.toArray(e[1])}}}function iE(e,t,n,a){var i="normal"===n,r=i?e:e.ensureState(n);r.ignore=t;var o=a.get("smooth");o&&!0===o&&(o=.3),r.shape=r.shape||{},o>0&&(r.shape.smooth=o);var s=a.getModel("lineStyle").getLineStyle();i?e.useStyle(s):r.style=s}function rE(e,t){var n=t.smooth,a=t.points;if(a)if(e.moveTo(a[0][0],a[0][1]),n>0&&a.length>=3){var i=zo(a[0],a[1]),r=zo(a[1],a[2]);if(!i||!r)return e.lineTo(a[1][0],a[1][1]),void e.lineTo(a[2][0],a[2][1]);var o=Math.min(i,r)*n,s=Ho([],a[1],a[0],o/i),l=Ho([],a[1],a[2],o/r),p=Ho([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],p[0],p[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],a[2][0],a[2][1])}else for(var c=1;c<a.length;c++)e.lineTo(a[c][0],a[c][1])}function oE(e,t,n){var a=e.getTextGuideLine(),i=e.getTextContent();if(i){for(var r=t.normal,o=r.get("show"),s=i.ignore,l=0;l<ih.length;l++){var p=ih[l],c=t[p],d="normal"===p;if(c){var u=c.get("show");if((d?s:uo(i.states[p]&&i.states[p].ignore,s))||!uo(u,o)){var m=d?a:a&&a.states[p];m&&(m.ignore=!0),a&&iE(a,!0,p,c);continue}a||(a=new Vg,e.setTextGuideLine(a),d||!s&&o||iE(a,!0,"normal",t.normal),e.stateProxy&&(a.stateProxy=e.stateProxy)),iE(a,!1,p,c)}}if(a){Lr(a.style,n),a.style.fill=null;var h=r.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=h||!1,a.buildPath=rE}}else a&&e.removeTextGuideLine()}function sE(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},a=0;a<ah.length;a++){var i=ah[a];n[i]=e.getModel([i,t])}return n}function lE(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];if(!a.defaultAttr.ignore){var i=a.label,r=i.getComputedTransform(),o=i.getBoundingRect(),s=!r||r[1]<1e-5&&r[2]<1e-5,l=i.style.margin||0,p=o.clone();p.applyTransform(r),p.x-=l/2,p.y-=l/2,p.width+=l,p.height+=l;var c=s?new af(o,r):null;t.push({label:i,labelLine:a.labelLine,rect:p,localRect:o,obb:c,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:s,transform:r})}}return t}function pE(e,t,n,a,i,r){var o=e.length;if(!(o<2)){e.sort((function(e,n){return e.rect[t]-n.rect[t]}));for(var s,l=0,p=!1,c=[],d=0,u=0;u<o;u++){var m=e[u],h=m.rect;(s=h[t]-l)<0&&(h[t]-=s,m.label[t]-=s,p=!0);var g=Math.max(-s,0);c.push(g),d+=g,l=h[t]+h[n]}d>0&&r&&S(-d/o,0,o);var f,y,v=e[0],b=e[o-1];return x(),f<0&&C(-f,.8),y<0&&C(y,.8),x(),w(f,y,1),w(y,f,-1),x(),f<0&&_(-f),y<0&&_(y),p}function x(){f=v.rect[t]-a,y=i-b.rect[t]-b.rect[n]}function w(e,t,n){if(e<0){var a=Math.min(t,-e);if(a>0){S(a*n,0,o);var i=a+e;i<0&&C(-i*n,1)}else C(-e*n,1)}}function S(n,a,i){0!==n&&(p=!0);for(var r=a;r<i;r++){var o=e[r];o.rect[t]+=n,o.label[t]+=n}}function C(a,i){for(var r=[],s=0,l=1;l<o;l++){var p=e[l-1].rect,c=Math.max(e[l].rect[t]-p[t]-p[n],0);r.push(c),s+=c}if(s){var d=Math.min(Math.abs(a)/s,i);if(a>0)for(l=0;l<o-1;l++){S(r[l]*d,0,l+1)}else for(l=o-1;l>0;l--){S(-(r[l-1]*d),l,o)}}}function _(e){var t=e<0?-1:1;e=Math.abs(e);for(var n=Math.ceil(e/(o-1)),a=0;a<o-1;a++)if(t>0?S(n,0,a+1):S(-n,o-a-1,o),(e-=n)<=0)return}}function cE(e,t,n,a){return pE(e,"y","height",t,n,a)}function dE(e){var t=[];e.sort((function(e,t){return t.priority-e.priority}));var n=new Ls(0,0,0,0);function a(e){if(!e.ignore){var t=e.ensureState("emphasis");null==t.ignore&&(t.ignore=!1)}e.ignore=!0}for(var i=0;i<e.length;i++){var r=e[i],o=r.axisAligned,s=r.localRect,l=r.transform,p=r.label,c=r.labelLine;n.copy(r.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var d=r.obb,u=!1,m=0;m<t.length;m++){var h=t[m];if(n.intersect(h.rect)){if(o&&h.axisAligned){u=!0;break}if(h.obb||(h.obb=new af(h.localRect,h.transform)),d||(d=new af(s,l)),d.intersect(h.obb)){u=!0;break}}}u?(a(p),c&&a(c)):(p.attr("ignore",r.defaultAttr.ignore),c&&c.attr("ignore",r.defaultAttr.labelGuideIgnore),t.push(r))}}function uE(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function mE(e,t){var n=e.label,a=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:uE(a&&a.shape.points)}}var hE=["align","verticalAlign","width","height","fontSize"],gE=new hc,fE=Dd(),yE=Dd();function vE(e,t,n){for(var a=0;a<n.length;a++){var i=n[a];null!=t[i]&&(e[i]=t[i])}}var bE=["x","y","rotation"],xE=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,a,i){var r=a.style,o=a.__hostTarget.textConfig||{},s=a.getComputedTransform(),l=a.getBoundingRect().plain();Ls.applyTransform(l,l,s),s?gE.setLocalTransform(s):(gE.x=gE.y=gE.rotation=gE.originX=gE.originY=0,gE.scaleX=gE.scaleY=1),gE.rotation=lm(gE.rotation);var p,c=a.__hostTarget;if(c){p=c.getBoundingRect().plain();var d=c.getComputedTransform();Ls.applyTransform(p,p,d)}var u=p&&c.getTextGuideLine();this._labelList.push({label:a,labelLine:u,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:l,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:u&&u.ignore,x:gE.x,y:gE.y,scaleX:gE.scaleX,scaleY:gE.scaleY,rotation:gE.rotation,style:{x:r.x,y:r.y,align:r.align,verticalAlign:r.verticalAlign,width:r.width,height:r.height,fontSize:r.fontSize},cursor:a.cursor,attachedPos:o.position,attachedRot:o.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,a=n.get("labelLayout");(Qr(a)||Kr(a).length)&&e.group.traverse((function(e){if(e.ignore)return!0;var i=e.getTextContent(),r=Zm(e);i&&!i.disableLabelLayout&&t._addLabel(r.dataIndex,r.dataType,n,i,a)}))},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function a(e,t){return function(){JI(e,t)}}for(var i=0;i<this._labelList.length;i++){var r=this._labelList[i],o=r.label,s=o.__hostTarget,l=r.defaultAttr,p=void 0;p=(p=Qr(r.layoutOption)?r.layoutOption(mE(r,s)):r.layoutOption)||{},r.computedLayoutOption=p;var c=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=p.x||null!=p.y?null:l.attachedPos,rotation:null!=p.rotate?p.rotate*c:l.attachedRot,offset:[p.dx||0,p.dy||0]});var d=!1;if(null!=p.x?(o.x=$c(p.x,t),o.setStyle("x",0),d=!0):(o.x=l.x,o.setStyle("x",l.style.x)),null!=p.y?(o.y=$c(p.y,n),o.setStyle("y",0),d=!0):(o.y=l.y,o.setStyle("y",l.style.y)),p.labelLinePoints){var u=s.getTextGuideLine();u&&(u.setShape({points:p.labelLinePoints}),d=!1)}fE(o).needsUpdateLabelLine=d,o.rotation=null!=p.rotate?p.rotate*c:l.rotation,o.scaleX=l.scaleX,o.scaleY=l.scaleY;for(var m=0;m<hE.length;m++){var h=hE[m];o.setStyle(h,null!=p[h]?p[h]:l.style[h])}if(p.draggable){if(o.draggable=!0,o.cursor="move",s){var g=r.seriesModel;if(null!=r.dataIndex)g=r.seriesModel.getData(r.dataType).getItemModel(r.dataIndex);o.on("drag",a(s,g.getModel("labelLine")))}}else o.off("drag"),o.cursor=l.cursor}},e.prototype.layout=function(e){var t,n=e.getWidth(),a=e.getHeight(),i=lE(this._labelList),r=Wr(i,(function(e){return"shiftX"===e.layoutOption.moveOverlap})),o=Wr(i,(function(e){return"shiftY"===e.layoutOption.moveOverlap}));pE(r,"x","width",0,n,t),cE(o,0,a),dE(Wr(i,(function(e){return e.layoutOption.hideOverlap})))},e.prototype.processLabelsOverall=function(){var e=this;Ur(this._chartViewList,(function(t){var n=t.__model,a=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse((function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var r=!a,o=t.getTextContent();!r&&o&&(r=fE(o).needsUpdateLabelLine),r&&e._updateLabelLine(t,n),i&&e._animateLabels(t,n)}))}))},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),a=Zm(e),i=a.dataIndex;if(n&&null!=i){var r=t.getData(a.dataType),o=r.getItemModel(i),s={},l=r.getItemVisual(i,"style");if(l){var p=r.getVisual("drawType");s.stroke=l[p]}var c=o.getModel("labelLine");oE(e,sE(o),s),JI(e,c)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),a=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!uf(e))){var i=(m=fE(n)).oldLayout,r=Zm(e),o=r.dataIndex,s={x:n.x,y:n.y,rotation:n.rotation},l=t.getData(r.dataType);if(i){n.attr(i);var p=e.prevStates;p&&(Vr(p,"select")>=0&&n.attr(m.oldLayoutSelect),Vr(p,"emphasis")>=0&&n.attr(m.oldLayoutEmphasis)),cf(n,s,t,o)}else if(n.attr(s),!ry(n).valueAnimation){var c=uo(n.style.opacity,1);n.style.opacity=0,df(n,{style:{opacity:c}},t,o)}if(m.oldLayout=s,n.states.select){var d=m.oldLayoutSelect={};vE(d,s,bE),vE(d,n.states.select,bE)}if(n.states.emphasis){var u=m.oldLayoutEmphasis={};vE(u,s,bE),vE(u,n.states.emphasis,bE)}sy(n,o,l,t,t)}if(a&&!a.ignore&&!a.invisible){i=(m=yE(a)).oldLayout;var m,h={points:a.shape.points};i?(a.attr({shape:i}),cf(a,{shape:h},t)):(a.setShape(h),a.style.strokePercent=0,df(a,{style:{strokePercent:1}},t)),m.oldLayout=h}},e}(),wE=Dd();function SE(e){e.registerUpdateLifecycle("series:beforeupdate",(function(e,t,n){var a=wE(t).labelManager;a||(a=wE(t).labelManager=new xE),a.clearLabels()})),e.registerUpdateLifecycle("series:layoutlabels",(function(e,t,n){var a=wE(t).labelManager;n.updatedSeries.forEach((function(e){a.addLabelsOfSeries(t.getViewOfSeriesModel(e))})),a.updateLayoutConfig(t),a.layout(t),a.processLabelsOverall()}))}uI(SE);var CE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return ze(t,e),t.prototype.getInitialData=function(e){return nT(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new Bc,n=LS("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(n),n.setStyle(e.lineStyle);var a=this.getData().getVisual("symbol"),i=this.getData().getVisual("symbolRotate"),r="none"===a?"circle":a,o=.8*e.itemHeight,s=LS(r,(e.itemWidth-o)/2,(e.itemHeight-o)/2,o,o,e.itemStyle.fill);t.add(s),s.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?i:e.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([e.itemWidth/2,e.itemHeight/2]),r.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(hw);function _E(e,t){var n=e.mapDimensionsAll("defaultedLabel"),a=n.length;if(1===a){var i=cx(e,t,n[0]);return null!=i?i+"":null}if(a){for(var r=[],o=0;o<n.length;o++)r.push(cx(e,t,n[o]));return r.join(" ")}}function TE(e,t){var n=e.mapDimensionsAll("defaultedLabel");if(!Zr(t))return t+"";for(var a=[],i=0;i<n.length;i++){var r=e.getDimensionIndex(n[i]);r>=0&&a.push(t[r])}return a.join(" ")}var IE=function(e){function t(t,n,a,i){var r=e.call(this)||this;return r.updateData(t,n,a,i),r}return ze(t,e),t.prototype._createSymbol=function(e,t,n,a,i){this.removeAll();var r=LS(e,-1,-1,2,2,null,i);r.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),r.drift=EE,this._symbolType=e,this.add(r)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Ih(this.childAt(0))},t.prototype.downplay=function(){Eh(this.childAt(0))},t.prototype.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},t.prototype.setDraggable=function(e,t){var n=this.childAt(0);n.draggable=e,n.cursor=!t&&e?"move":n.cursor},t.prototype.updateData=function(e,n,a,i){this.silent=!1;var r=e.getItemVisual(n,"symbol")||"circle",o=e.hostModel,s=t.getSymbolSize(e,n),l=r!==this._symbolType,p=i&&i.disableAnimation;if(l){var c=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(r,e,n,s,c)}else{(u=this.childAt(0)).silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};p?u.attr(d):cf(u,d,o,n),ff(u)}if(this._updateCommon(e,n,s,a,i),l){var u=this.childAt(0);if(!p){d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:u.style.opacity}};u.scaleX=u.scaleY=0,u.style.opacity=0,df(u,d,o,n)}}p&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,t,n,a,i){var r,o,s,l,p,c,d,u,m,h=this.childAt(0),g=e.hostModel;if(a&&(r=a.emphasisItemStyle,o=a.blurItemStyle,s=a.selectItemStyle,l=a.focus,p=a.blurScope,d=a.labelStatesModels,u=a.hoverScale,m=a.cursorStyle,c=a.emphasisDisabled),!a||e.hasItemOption){var f=a&&a.itemModel?a.itemModel:e.getItemModel(t),y=f.getModel("emphasis");r=y.getModel("itemStyle").getItemStyle(),s=f.getModel(["select","itemStyle"]).getItemStyle(),o=f.getModel(["blur","itemStyle"]).getItemStyle(),l=y.get("focus"),p=y.get("blurScope"),c=y.get("disabled"),d=Zf(f),u=y.getShallow("scale"),m=f.getShallow("cursor")}var v=e.getItemVisual(t,"symbolRotate");h.attr("rotation",(v||0)*Math.PI/180||0);var b=qS(e.getItemVisual(t,"symbolOffset"),n);b&&(h.x=b[0],h.y=b[1]),m&&h.attr("cursor",m);var x=e.getItemVisual(t,"style"),w=x.fill;if(h instanceof Mm){var S=h.style;h.useStyle(Nr({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},x))}else h.__isEmptyBrush?h.useStyle(Nr({},x)):h.useStyle(x),h.style.decal=null,h.setColor(w,i&&i.symbolInnerColor),h.style.strokeNoScale=!0;var C=e.getItemVisual(t,"liftZ"),_=this._z2;null!=C?null==_&&(this._z2=h.z2,h.z2+=C):null!=_&&(h.z2=_,this._z2=null);var T=i&&i.useNameLabel;Xf(h,d,{labelFetcher:g,labelDataIndex:t,defaultText:function(t){return T?e.getName(t):_E(e,t)},inheritColor:w,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var I=h.ensureState("emphasis");I.style=r,h.ensureState("select").style=s,h.ensureState("blur").style=o;var E=null==u||!0===u?Math.max(1.1,3/this._sizeY):isFinite(u)&&u>0?+u:1;I.scaleX=this._sizeX*E,I.scaleY=this._sizeY*E,this.setSymbolScale(1),qh(this,l,p,c)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,t,n){var a=this.childAt(0),i=Zm(this).dataIndex,r=n&&n.animation;if(this.silent=a.silent=!0,n&&n.fadeLabel){var o=a.getTextContent();o&&mf(o,{style:{opacity:0}},t,{dataIndex:i,removeOpt:r,cb:function(){a.removeTextContent()}})}else a.removeTextContent();mf(a,{style:{opacity:0},scaleX:0,scaleY:0},t,{dataIndex:i,cb:e,removeOpt:r})},t.getSymbolSize=function(e,t){return VS(e.getItemVisual(t,"symbolSize"))},t}(Bc);function EE(e,t){this.parent.drift(e,t)}function ME(e,t,n,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(n))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function kE(e){return null==e||no(e)||(e={isIgnore:e}),e||{}}function PE(e){var t=e.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Zf(t),cursorStyle:t.get("cursor")}}var DE=function(){function e(e){this.group=new Bc,this._SymbolCtor=e||IE}return e.prototype.updateData=function(e,t){this._progressiveEls=null,t=kE(t);var n=this.group,a=e.hostModel,i=this._data,r=this._SymbolCtor,o=t.disableAnimation,s=PE(e),l={disableAnimation:o},p=t.getSymbolPoint||function(t){return e.getItemLayout(t)};i||n.removeAll(),e.diff(i).add((function(a){var i=p(a);if(ME(e,i,a,t)){var o=new r(e,a,s,l);o.setPosition(i),e.setItemGraphicEl(a,o),n.add(o)}})).update((function(c,d){var u=i.getItemGraphicEl(d),m=p(c);if(ME(e,m,c,t)){var h=e.getItemVisual(c,"symbol")||"circle",g=u&&u.getSymbolType&&u.getSymbolType();if(!u||g&&g!==h)n.remove(u),(u=new r(e,c,s,l)).setPosition(m);else{u.updateData(e,c,s,l);var f={x:m[0],y:m[1]};o?u.attr(f):cf(u,f,a)}n.add(u),e.setItemGraphicEl(c,u)}else n.remove(u)})).remove((function(e){var t=i.getItemGraphicEl(e);t&&t.fadeOut((function(){n.remove(t)}),a)})).execute(),this._getSymbolPoint=p,this._data=e},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl((function(t,n){var a=e._getSymbolPoint(n);t.setPosition(a),t.markRedraw()}))},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=PE(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,n){function a(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=kE(n);for(var i=e.start;i<e.end;i++){var r=t.getItemLayout(i);if(ME(t,r,i,n)){var o=new this._SymbolCtor(t,i,this._seriesScope);o.traverse(a),o.setPosition(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},e.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},e.prototype.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl((function(e){e.fadeOut((function(){t.remove(e)}),n.hostModel)})):t.removeAll()},e}();function OE(e,t,n){var a=e.getBaseAxis(),i=e.getOtherAxis(a),r=function(e,t){var n=0,a=e.scale.getExtent();"start"===t?n=a[0]:"end"===t?n=a[1]:to(t)&&!isNaN(t)?n=t:a[0]>0?n=a[0]:a[1]<0&&(n=a[1]);return n}(i,n),o=a.dim,s=i.dim,l=t.mapDimension(s),p=t.mapDimension(o),c="x"===s||"radius"===s?1:0,d=jr(e.dimensions,(function(e){return t.mapDimension(e)})),u=!1,m=t.getCalculationInfo("stackResultDimension");return eT(t,d[0])&&(u=!0,d[0]=m),eT(t,d[1])&&(u=!0,d[1]=m),{dataDimsForPoint:d,valueStart:r,valueAxisDim:s,baseAxisDim:o,stacked:!!u,valueDim:l,baseDim:p,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function AE(e,t,n,a){var i=NaN;e.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),a)),isNaN(i)&&(i=e.valueStart);var r=e.baseDataOffset,o=[];return o[r]=n.get(e.baseDim,a),o[1-r]=i,t.dataToPoint(o)}var FE=Math.min,RE=Math.max;function BE(e,t){return isNaN(e)||isNaN(t)}function NE(e,t,n,a,i,r,o,s,l){for(var p,c,d,u,m,h,g=n,f=0;f<a;f++){var y=t[2*g],v=t[2*g+1];if(g>=i||g<0)break;if(BE(y,v)){if(l){g+=r;continue}break}if(g===n)e[r>0?"moveTo":"lineTo"](y,v),d=y,u=v;else{var b=y-p,x=v-c;if(b*b+x*x<.5){g+=r;continue}if(o>0){for(var w=g+r,S=t[2*w],C=t[2*w+1];S===y&&C===v&&f<a;)f++,g+=r,S=t[2*(w+=r)],C=t[2*w+1],b=(y=t[2*g])-p,x=(v=t[2*g+1])-c;var _=f+1;if(l)for(;BE(S,C)&&_<a;)_++,S=t[2*(w+=r)],C=t[2*w+1];var T=.5,I=0,E=0,M=void 0,k=void 0;if(_>=a||BE(S,C))m=y,h=v;else{I=S-p,E=C-c;var P=y-p,D=S-y,O=v-c,A=C-v,F=void 0,R=void 0;if("x"===s){var B=I>0?1:-1;m=y-B*(F=Math.abs(P))*o,h=v,M=y+B*(R=Math.abs(D))*o,k=v}else if("y"===s){var N=E>0?1:-1;m=y,h=v-N*(F=Math.abs(O))*o,M=y,k=v+N*(R=Math.abs(A))*o}else F=Math.sqrt(P*P+O*O),m=y-I*o*(1-(T=(R=Math.sqrt(D*D+A*A))/(R+F))),h=v-E*o*(1-T),k=v+E*o*T,M=FE(M=y+I*o*T,RE(S,y)),k=FE(k,RE(C,v)),M=RE(M,FE(S,y)),h=v-(E=(k=RE(k,FE(C,v)))-v)*F/R,m=FE(m=y-(I=M-y)*F/R,RE(p,y)),h=FE(h,RE(c,v)),M=y+(I=y-(m=RE(m,FE(p,y))))*R/F,k=v+(E=v-(h=RE(h,FE(c,v))))*R/F}e.bezierCurveTo(d,u,m,h,y,v),d=M,u=k}else e.lineTo(y,v)}p=y,c=v,g+=r}return f}var LE=function(){this.smooth=0,this.smoothConstraint=!0},VE=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LE},t.prototype.buildPath=function(e,t){var n=t.points,a=0,i=n.length/2;if(t.connectNulls){for(;i>0&&BE(n[2*i-2],n[2*i-1]);i--);for(;a<i&&BE(n[2*a],n[2*a+1]);a++);}for(;a<i;)a+=NE(e,n,a,i,i,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,a,i=this.path.data,r=am.CMD,o="x"===t,s=[],l=0;l<i.length;){var p=void 0,c=void 0,d=void 0,u=void 0,m=void 0,h=void 0,g=void 0;switch(i[l++]){case r.M:n=i[l++],a=i[l++];break;case r.L:if(p=i[l++],c=i[l++],(g=o?(e-n)/(p-n):(e-a)/(c-a))<=1&&g>=0){var f=o?(c-a)*g+a:(p-n)*g+n;return o?[e,f]:[f,e]}n=p,a=c;break;case r.C:p=i[l++],c=i[l++],d=i[l++],u=i[l++],m=i[l++],h=i[l++];var y=o?xl(n,p,d,m,e,s):xl(a,c,u,h,e,s);if(y>0)for(var v=0;v<y;v++){var b=s[v];if(b<=1&&b>=0){f=o?vl(a,c,u,h,b):vl(n,p,d,m,b);return o?[e,f]:[f,e]}}n=m,a=h}}},t}(Cm),qE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t}(LE),GE=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new qE},t.prototype.buildPath=function(e,t){var n=t.points,a=t.stackedOnPoints,i=0,r=n.length/2,o=t.smoothMonotone;if(t.connectNulls){for(;r>0&&BE(n[2*r-2],n[2*r-1]);r--);for(;i<r&&BE(n[2*i],n[2*i+1]);i++);}for(;i<r;){var s=NE(e,n,i,r,r,1,t.smooth,o,t.connectNulls);NE(e,a,i+s-1,s,r,-1,t.stackedOnSmooth,o,t.connectNulls),i+=s+1,e.closePath()}},t}(Cm);function zE(e,t,n,a,i){var r=e.getArea(),o=r.x,s=r.y,l=r.width,p=r.height,c=n.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,p+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new Rm({shape:{x:o,y:s,width:l,height:p}});if(t){var u=e.getBaseAxis(),m=u.isHorizontal(),h=u.inverse;m?(h&&(d.shape.x+=l),d.shape.width=0):(h||(d.shape.y+=p),d.shape.height=0);var g=Qr(i)?function(e){i(e,d)}:null;df(d,{shape:{width:l,height:p,x:o,y:s}},n,null,a,g)}return d}function UE(e,t,n){var a=e.getArea(),i=Kc(a.r0,1),r=Kc(a.r,1),o=new Og({shape:{cx:Kc(e.cx,1),cy:Kc(e.cy,1),r0:i,r:r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});t&&("angle"===e.getBaseAxis().dim?o.shape.endAngle=a.startAngle:o.shape.r=i,df(o,{shape:{endAngle:a.endAngle,r:r}},n));return o}function jE(e,t,n,a,i){return e?"polar"===e.type?UE(e,t,n):"cartesian2d"===e.type?zE(e,t,n,a,i):null:null}function HE(e,t){return e.type===t}function WE(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function $E(e){for(var t=1/0,n=1/0,a=-1/0,i=-1/0,r=0;r<e.length;){var o=e[r++],s=e[r++];isNaN(o)||(t=Math.min(o,t),a=Math.max(o,a)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[t,n],[a,i]]}function KE(e,t){var n=$E(e),a=n[0],i=n[1],r=$E(t),o=r[0],s=r[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function YE(e){return to(e)?e:e?.5:0}function XE(e,t,n,a){var i=t.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,o=[],s=0,l=[],p=[],c=[],d=[];if(a){for(s=0;s<e.length;s+=2)isNaN(e[s])||isNaN(e[s+1])||d.push(e[s],e[s+1]);e=d}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],p[0]=e[s],p[1]=e[s+1],o.push(p[0],p[1]),n){case"end":l[r]=c[r],l[1-r]=p[1-r],o.push(l[0],l[1]);break;case"middle":var u=(p[r]+c[r])/2,m=[];l[r]=m[r]=u,l[1-r]=p[1-r],m[1-r]=c[1-r],o.push(l[0],l[1]),o.push(m[0],m[1]);break;default:l[r]=p[r],l[1-r]=c[1-r],o.push(l[0],l[1])}return o.push(e[s++],e[s++]),o}function ZE(e,t,n){var a=e.getVisual("visualMeta");if(a&&a.length&&e.count()&&"cartesian2d"===t.type){for(var i,r,o=a.length-1;o>=0;o--){var s=e.getDimensionInfo(a[o].dimension);if("x"===(i=s&&s.coordDim)||"y"===i){r=a[o];break}}if(r){var l=t.getAxis(i),p=jr(r.stops,(function(e){return{coord:l.toGlobalCoord(l.dataToCoord(e.value)),color:e.color}})),c=p.length,d=r.outerColors.slice();c&&p[0].coord>p[c-1].coord&&(p.reverse(),d.reverse());var u=function(e,t){var n,a,i=[],r=e.length;function o(e,t,n){var a=e.coord;return{coord:n,color:Jl((n-a)/(t.coord-a),[e.color,t.color])}}for(var s=0;s<r;s++){var l=e[s],p=l.coord;if(p<0)n=l;else{if(p>t){a?i.push(o(a,l,t)):n&&i.push(o(n,l,0),o(n,l,t));break}n&&(i.push(o(n,l,0)),n=null),i.push(l),a=l}}return i}(p,"x"===i?n.getWidth():n.getHeight()),m=u.length;if(!m&&c)return p[0].coord<0?d[1]?d[1]:p[c-1].color:d[0]?d[0]:p[0].color;var h=u[0].coord-10,g=u[m-1].coord+10,f=g-h;if(f<.001)return"transparent";Ur(u,(function(e){e.offset=(e.coord-h)/f})),u.push({offset:m?u[m-1].offset:.5,color:d[1]||"transparent"}),u.unshift({offset:m?u[0].offset:.5,color:d[0]||"transparent"});var y=new Zg(0,0,0,0,u,!0);return y[i]=h,y[i+"2"]=g,y}}}function QE(e,t,n){var a=e.get("showAllSymbol"),i="auto"===a;if(!a||i){var r=n.getAxesByScale("ordinal")[0];if(r&&(!i||!function(e,t){var n=e.getExtent(),a=Math.abs(n[1]-n[0])/e.scale.count();isNaN(a)&&(a=0);for(var i=t.count(),r=Math.max(1,Math.round(i/5)),o=0;o<i;o+=r)if(1.5*IE.getSymbolSize(t,o)[e.isHorizontal()?1:0]>a)return!1;return!0}(r,t))){var o=t.mapDimension(r.dim),s={};return Ur(r.getViewLabels(),(function(e){var t=r.scale.getRawOrdinalNumber(e.tickValue);s[t]=1})),function(e){return!s.hasOwnProperty(t.get(o,e))}}}}function JE(e,t){return[e[2*t],e[2*t+1]]}function eM(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ah.length;t++)if(e.get([ah[t],"endLabel","show"]))return!0;return!1}function tM(e,t,n,a){if(HE(t,"cartesian2d")){var i=a.getModel("endLabel"),r=i.get("valueAnimation"),o=a.getData(),s={lastFrameIndex:0},l=eM(a)?function(n,a){e._endLabelOnDuring(n,a,o,s,r,i,t)}:null,p=t.getBaseAxis().isHorizontal(),c=zE(t,n,a,(function(){var t=e._endLabel;t&&n&&null!=s.originalX&&t.attr({x:s.originalX,y:s.originalY})}),l);if(!a.get("clip",!0)){var d=c.shape,u=Math.max(d.width,d.height);p?(d.y-=u,d.height+=2*u):(d.x-=u,d.width+=2*u)}return l&&l(1,c),c}return UE(t,n,a)}var nM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.init=function(){var e=new Bc,t=new DE;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},t.prototype.render=function(e,t,n){var a=this,i=e.coordinateSystem,r=this.group,o=e.getData(),s=e.getModel("lineStyle"),l=e.getModel("areaStyle"),p=o.getLayout("points")||[],c="polar"===i.type,d=this._coordSys,u=this._symbolDraw,m=this._polyline,h=this._polygon,g=this._lineGroup,f=!t.ssr&&e.get("animation"),y=!l.isEmpty(),v=l.get("origin"),b=OE(i,o,v),x=y&&function(e,t,n){if(!n.valueDim)return[];for(var a=t.count(),i=xT(2*a),r=0;r<a;r++){var o=AE(n,e,t,r);i[2*r]=o[0],i[2*r+1]=o[1]}return i}(i,o,b),w=e.get("showSymbol"),S=e.get("connectNulls"),C=w&&!c&&QE(e,o,i),_=this._data;_&&_.eachItemGraphicEl((function(e,t){e.__temp&&(r.remove(e),_.setItemGraphicEl(t,null))})),w||u.remove(),r.add(g);var T,I=!c&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(T=i.getArea()).width?(T.x-=.1,T.y-=.1,T.width+=.2,T.height+=.2):T.r0&&(T.r0-=.5,T.r+=.5)),this._clipShapeForSymbol=T;var E=ZE(o,i,n)||o.getVisual("style")[o.getVisual("drawType")];if(m&&d.type===i.type&&I===this._step){y&&!h?h=this._newPolygon(p,x):h&&!y&&(g.remove(h),h=this._polygon=null),c||this._initOrUpdateEndLabel(e,i,fv(E));var M=g.getClipPath();if(M)df(M,{shape:tM(this,i,!1,e).shape},e);else g.setClipPath(tM(this,i,!0,e));w&&u.updateData(o,{isIgnore:C,clipShape:T,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),WE(this._stackedOnPoints,x)&&WE(this._points,p)||(f?this._doUpdateAnimation(o,x,i,n,I,v,S):(I&&(p=XE(p,i,I,S),x&&(x=XE(x,i,I,S))),m.setShape({points:p}),h&&h.setShape({points:p,stackedOnPoints:x})))}else w&&u.updateData(o,{isIgnore:C,clipShape:T,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),f&&this._initSymbolLabelAnimation(o,i,T),I&&(p=XE(p,i,I,S),x&&(x=XE(x,i,I,S))),m=this._newPolyline(p),y?h=this._newPolygon(p,x):h&&(g.remove(h),h=this._polygon=null),c||this._initOrUpdateEndLabel(e,i,fv(E)),g.setClipPath(tM(this,i,!0,e));var k=e.getModel("emphasis"),P=k.get("focus"),D=k.get("blurScope"),O=k.get("disabled");(m.useStyle(Lr(s.getLineStyle(),{fill:"none",stroke:E,lineJoin:"bevel"})),jh(m,e,"lineStyle"),m.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(m.getState("emphasis").style.lineWidth=+m.style.lineWidth+1);Zm(m).seriesIndex=e.seriesIndex,qh(m,P,D,O);var A=YE(e.get("smooth")),F=e.get("smoothMonotone");if(m.setShape({smooth:A,smoothMonotone:F,connectNulls:S}),h){var R=o.getCalculationInfo("stackedOnSeries"),B=0;h.useStyle(Lr(l.getAreaStyle(),{fill:E,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),R&&(B=YE(R.get("smooth"))),h.setShape({smooth:A,stackedOnSmooth:B,smoothMonotone:F,connectNulls:S}),jh(h,e,"areaStyle"),Zm(h).seriesIndex=e.seriesIndex,qh(h,P,D,O)}var N=function(e){a._changePolyState(e)};o.eachItemGraphicEl((function(e){e&&(e.onHoverStateChange=N)})),this._polyline.onHoverStateChange=N,this._data=o,this._coordSys=i,this._stackedOnPoints=x,this._points=p,this._step=I,this._valueOrigin=v,e.get("triggerLineEvent")&&(this.packEventData(e,m),h&&this.packEventData(e,h))},t.prototype.packEventData=function(e,t){Zm(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,t,n,a){var i=e.getData(),r=Pd(i,a);if(this._changePolyState("emphasis"),!(r instanceof Array)&&null!=r&&r>=0){var o=i.getLayout("points"),s=i.getItemGraphicEl(r);if(!s){var l=o[2*r],p=o[2*r+1];if(isNaN(l)||isNaN(p))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,p))return;var c=e.get("zlevel")||0,d=e.get("z")||0;(s=new IE(i,r)).x=l,s.y=p,s.setZ(c,d);var u=s.getSymbolPath().getTextContent();u&&(u.zlevel=c,u.z=d,u.z2=this._polyline.z2+1),s.__temp=!0,i.setItemGraphicEl(r,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else Iw.prototype.highlight.call(this,e,t,n,a)},t.prototype.downplay=function(e,t,n,a){var i=e.getData(),r=Pd(i,a);if(this._changePolyState("normal"),null!=r&&r>=0){var o=i.getItemGraphicEl(r);o&&(o.__temp?(i.setItemGraphicEl(r,null),this.group.remove(o)):o.downplay())}else Iw.prototype.downplay.call(this,e,t,n,a)},t.prototype._changePolyState=function(e){var t=this._polygon;wh(this._polyline,e),t&&wh(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new VE({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new GE({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,t,n){var a,i,r=t.getBaseAxis(),o=r.inverse;"cartesian2d"===t.type?(a=r.isHorizontal(),i=!1):"polar"===t.type&&(a="angle"===r.dim,i=!0);var s=e.hostModel,l=s.get("animationDuration");Qr(l)&&(l=l(null));var p=s.get("animationDelay")||0,c=Qr(p)?p(null):p;e.eachItemGraphicEl((function(e,r){var s=e;if(s){var d=[e.x,e.y],u=void 0,m=void 0,h=void 0;if(n)if(i){var g=n,f=t.pointToCoord(d);a?(u=g.startAngle,m=g.endAngle,h=-f[1]/180*Math.PI):(u=g.r0,m=g.r,h=f[0])}else{var y=n;a?(u=y.x,m=y.x+y.width,h=e.x):(u=y.y+y.height,m=y.y,h=e.y)}var v=m===u?0:(h-u)/(m-u);o&&(v=1-v);var b=Qr(p)?p(r):l*v+c,x=s.getSymbolPath(),w=x.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),w&&w.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}}))},t.prototype._initOrUpdateEndLabel=function(e,t,n){var a=e.getModel("endLabel");if(eM(e)){var i=e.getData(),r=this._polyline,o=i.getLayout("points");if(!o)return r.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new Lm({z2:200})).ignoreClip=!0,r.setTextContent(this._endLabel),r.disableLabelAnimation=!0);var l=function(e){for(var t,n,a=e.length/2;a>0&&(t=e[2*a-2],n=e[2*a-1],isNaN(t)||isNaN(n));a--);return a-1}(o);l>=0&&(Xf(r,Zf(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,n){return null!=n?TE(i,n):_E(i,e)},enableTextSetter:!0},function(e,t){var n=t.getBaseAxis(),a=n.isHorizontal(),i=n.inverse,r=a?i?"right":"left":"center",o=a?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||r,verticalAlign:e.get("verticalAlign")||o}}}(a,t)),r.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,n,a,i,r,o){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==a.originalX&&(a.originalX=s.x,a.originalY=s.y);var p=n.getLayout("points"),c=n.hostModel,d=c.get("connectNulls"),u=r.get("precision"),m=r.get("distance")||0,h=o.getBaseAxis(),g=h.isHorizontal(),f=h.inverse,y=t.shape,v=f?g?y.x:y.y+y.height:g?y.x+y.width:y.y,b=(g?m:0)*(f?-1:1),x=(g?0:-m)*(f?-1:1),w=g?"x":"y",S=function(e,t,n){for(var a,i,r=e.length/2,o="x"===n?0:1,s=0,l=-1,p=0;p<r;p++)if(i=e[2*p+o],!isNaN(i)&&!isNaN(e[2*p+1-o]))if(0!==p){if(a<=t&&i>=t||a>=t&&i<=t){l=p;break}s=p,a=i}else a=i;return{range:[s,l],t:(t-a)/(i-a)}}(p,v,w),C=S.range,_=C[1]-C[0],T=void 0;if(_>=1){if(_>1&&!d){var I=JE(p,C[0]);s.attr({x:I[0]+b,y:I[1]+x}),i&&(T=c.getRawValue(C[0]))}else{(I=l.getPointOn(v,w))&&s.attr({x:I[0]+b,y:I[1]+x});var E=c.getRawValue(C[0]),M=c.getRawValue(C[1]);i&&(T=qd(n,u,E,M,S.t))}a.lastFrameIndex=C[0]}else{var k=1===e||a.lastFrameIndex>0?C[0]:0;I=JE(p,k);i&&(T=c.getRawValue(k)),s.attr({x:I[0]+b,y:I[1]+x})}if(i){var P=ry(s);"function"==typeof P.setLabelText&&P.setLabelText(T)}}},t.prototype._doUpdateAnimation=function(e,t,n,a,i,r,o){var s=this._polyline,l=this._polygon,p=e.hostModel,c=function(e,t,n,a,i,r,o){for(var s=function(e,t){var n=[];return t.diff(e).add((function(e){n.push({cmd:"+",idx:e})})).update((function(e,t){n.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){n.push({cmd:"-",idx:e})})).execute(),n}(e,t),l=[],p=[],c=[],d=[],u=[],m=[],h=[],g=OE(i,t,o),f=e.getLayout("points")||[],y=t.getLayout("points")||[],v=0;v<s.length;v++){var b=s[v],x=!0,w=void 0,S=void 0;switch(b.cmd){case"=":w=2*b.idx,S=2*b.idx1;var C=f[w],_=f[w+1],T=y[S],I=y[S+1];(isNaN(C)||isNaN(_))&&(C=T,_=I),l.push(C,_),p.push(T,I),c.push(n[w],n[w+1]),d.push(a[S],a[S+1]),h.push(t.getRawIndex(b.idx1));break;case"+":var E=b.idx,M=g.dataDimsForPoint,k=i.dataToPoint([t.get(M[0],E),t.get(M[1],E)]);S=2*E,l.push(k[0],k[1]),p.push(y[S],y[S+1]);var P=AE(g,i,t,E);c.push(P[0],P[1]),d.push(a[S],a[S+1]),h.push(t.getRawIndex(E));break;case"-":x=!1}x&&(u.push(b),m.push(m.length))}m.sort((function(e,t){return h[e]-h[t]}));var D=l.length,O=xT(D),A=xT(D),F=xT(D),R=xT(D),B=[];for(v=0;v<m.length;v++){var N=m[v],L=2*v,V=2*N;O[L]=l[V],O[L+1]=l[V+1],A[L]=p[V],A[L+1]=p[V+1],F[L]=c[V],F[L+1]=c[V+1],R[L]=d[V],R[L+1]=d[V+1],B[v]=u[N]}return{current:O,next:A,stackedOnCurrent:F,stackedOnNext:R,status:B}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),d=c.current,u=c.stackedOnCurrent,m=c.next,h=c.stackedOnNext;if(i&&(d=XE(c.current,n,i,o),u=XE(c.stackedOnCurrent,n,i,o),m=XE(c.next,n,i,o),h=XE(c.stackedOnNext,n,i,o)),KE(d,m)>3e3||l&&KE(u,h)>3e3)return s.stopAnimation(),s.setShape({points:m}),void(l&&(l.stopAnimation(),l.setShape({points:m,stackedOnPoints:h})));s.shape.__points=c.current,s.shape.points=d;var g={shape:{points:m}};c.current!==d&&(g.shape.__points=c.next),s.stopAnimation(),cf(s,g,p),l&&(l.setShape({points:d,stackedOnPoints:u}),l.stopAnimation(),cf(l,{shape:{stackedOnPoints:h}},p),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var f=[],y=c.status,v=0;v<y.length;v++){if("="===y[v].cmd){var b=e.getItemGraphicEl(y[v].idx1);b&&f.push({el:b,ptIdx:v})}}s.animators&&s.animators.length&&s.animators[0].during((function(){l&&l.dirtyShape();for(var e=s.shape.__points,t=0;t<f.length;t++){var n=f[t].el,a=2*f[t].ptIdx;n.x=e[a],n.y=e[a+1],n.markRedraw()}}))},t.prototype.remove=function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(e,a){e.__temp&&(t.remove(e),n.setItemGraphicEl(a,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Iw);function aM(e,t){return{seriesType:e,plan:Cw(),reset:function(e){var n=e.getData(),a=e.coordinateSystem,i=e.pipelineContext,r=t||i.large;if(a){var o=jr(a.dimensions,(function(e){return n.mapDimension(e)})).slice(0,2),s=o.length,l=n.getCalculationInfo("stackResultDimension");eT(n,o[0])&&(o[0]=l),eT(n,o[1])&&(o[1]=l);var p=n.getStore(),c=n.getDimensionIndex(o[0]),d=n.getDimensionIndex(o[1]);return s&&{progress:function(e,t){for(var n=e.end-e.start,i=r&&xT(n*s),o=[],l=[],u=e.start,m=0;u<e.end;u++){var h=void 0;if(1===s){var g=p.get(c,u);h=a.dataToPoint(g,null,l)}else o[0]=p.get(c,u),o[1]=p.get(d,u),h=a.dataToPoint(o,null,l);r?(i[m++]=h[0],i[m++]=h[1]):t.setItemLayout(u,h.slice())}r&&t.setLayout("points",i)}}}}}}var iM={average:function(e){for(var t=0,n=0,a=0;a<e.length;a++)isNaN(e[a])||(t+=e[a],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},minmax:function(e){for(var t=-1/0,n=-1/0,a=0;a<e.length;a++){var i=e[a],r=Math.abs(i);r>t&&(t=r,n=i)}return isFinite(n)?n:NaN},nearest:function(e){return e[0]}},rM=function(e){return Math.round(e.length/2)};function oM(e){return{seriesType:e,reset:function(e,t,n){var a=e.getData(),i=e.get("sampling"),r=e.coordinateSystem,o=a.count();if(o>10&&"cartesian2d"===r.type&&i){var s=r.getBaseAxis(),l=r.getOtherAxis(s),p=s.getExtent(),c=n.getDevicePixelRatio(),d=Math.abs(p[1]-p[0])*(c||1),u=Math.round(o/d);if(isFinite(u)&&u>1){"lttb"===i&&e.setData(a.lttbDownSample(a.mapDimension(l.dim),1/u));var m=void 0;Jr(i)?m=iM[i]:Qr(i)&&(m=i),m&&e.setData(a.downSample(a.mapDimension(l.dim),1/u,m,rM))}}}}}function sM(e){e.registerChartView(nM),e.registerSeriesModel(CE),e.registerLayout(aM("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),n=e.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,oM("line"))}var lM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.getInitialData=function(e,t){return nT(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,n){var a=this.coordinateSystem;if(a&&a.clampData){var i=a.clampData(e),r=a.dataToPoint(i);if(n)Ur(a.getAxes(),(function(e,n){if("category"===e.type&&null!=t){var a=e.getTicksCoords(),o=e.getTickModel().get("alignWithLabel"),s=i[n],l="x1"===t[n]||"y1"===t[n];if(l&&!o&&(s+=1),a.length<2)return;if(2===a.length)return void(r[n]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var p=void 0,c=void 0,d=1,u=0;u<a.length;u++){var m=a[u].coord,h=u===a.length-1?a[u-1].tickValue+d:a[u].tickValue;if(h===s){c=m;break}if(h<s)p=m;else if(null!=p&&h>s){c=(m+p)/2;break}1===u&&(d=h-a[0].tickValue)}null==c&&(p?p&&(c=a[a.length-1].coord):c=a[0].coord),r[n]=e.toGlobalCoord(c)}}));else{var o=this.getData(),s=o.getLayout("offset"),l=o.getLayout("size"),p=a.getBaseAxis().isHorizontal()?0:1;r[p]+=s+l/2}return r}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(hw);hw.registerClass(lM);var pM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.getInitialData=function(){return nT(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Cy(lM.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(lM),cM=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},dM=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new cM},t.prototype.buildPath=function(e,t){var n=t.cx,a=t.cy,i=Math.max(t.r0||0,0),r=Math.max(t.r,0),o=.5*(r-i),s=i+o,l=t.startAngle,p=t.endAngle,c=t.clockwise,d=2*Math.PI,u=c?p-l<d:l-p<d;u||(l=p-(c?d:-d));var m=Math.cos(l),h=Math.sin(l),g=Math.cos(p),f=Math.sin(p);u?(e.moveTo(m*i+n,h*i+a),e.arc(m*s+n,h*s+a,o,-Math.PI+l,l,!c)):e.moveTo(m*r+n,h*r+a),e.arc(n,a,r,l,p,!c),e.arc(g*s+n,f*s+a,o,p-2*Math.PI,p-Math.PI,!c),0!==i&&e.arc(n,a,i,p,l,c)},t}(Cm);function uM(e,t,n){return t*Math.sin(e)*(n?-1:1)}function mM(e,t,n){return t*Math.cos(e)*(n?1:-1)}function hM(e,t,n){var a=e.get("borderRadius");if(null==a)return n?{cornerRadius:0}:null;Zr(a)||(a=[a,a,a,a]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:jr(a,(function(e){return _c(e,i)}))}}var gM=Math.max,fM=Math.min;var yM=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return ze(t,e),t.prototype.render=function(e,t,n,a){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var i=e.get("coordinateSystem");("cartesian2d"===i||"polar"===i)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,a){var i,r=this.group,o=e.getData(),s=this._data,l=e.coordinateSystem,p=l.getBaseAxis();"cartesian2d"===l.type?i=p.isHorizontal():"polar"===l.type&&(i="angle"===p.dim);var c=e.isAnimationEnabled()?e:null,d=function(e,t){var n=e.get("realtimeSort",!0),a=t.getBaseAxis();0;if(n&&"category"===a.type&&"cartesian2d"===t.type)return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}(e,l);d&&this._enableRealtimeSort(d,o,n);var u=e.get("clip",!0)||d,m=function(e,t){var n=e.getArea&&e.getArea();if(HE(e,"cartesian2d")){var a=e.getBaseAxis();if("category"!==a.type||!a.onBand){var i=t.getLayout("bandWidth");a.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}(l,o);r.removeClipPath();var h=e.get("roundCap",!0),g=e.get("showBackground",!0),f=e.getModel("backgroundStyle"),y=f.get("borderRadius")||0,v=[],b=this._backgroundEls,x=a&&a.isInitSort,w=a&&"changeAxisOrder"===a.type;function S(e){var t=TM[l.type](o,e),n=function(e,t,n){var a="polar"===e.type?Og:Rm;return new a({shape:OM(t,n,e),silent:!0,z2:0})}(l,i,t);return n.useStyle(f.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",y):n.setShape("cornerRadius",y),v[e]=n,n}o.diff(s).add((function(t){var n=o.getItemModel(t),a=TM[l.type](o,t,n);if(g&&S(t),o.hasValue(t)&&_M[l.type](a)){var s=!1;u&&(s=vM[l.type](m,a));var f=bM[l.type](e,o,t,a,i,c,p.model,!1,h);d&&(f.forceLabelAnimation=!0),EM(f,o,t,n,a,e,i,"polar"===l.type),x?f.attr({shape:a}):d?xM(d,c,f,a,t,i,!1,!1):df(f,{shape:a},e,t),o.setItemGraphicEl(t,f),r.add(f),f.ignore=s}})).update((function(t,n){var a=o.getItemModel(t),C=TM[l.type](o,t,a);if(g){var _=void 0;0===b.length?_=S(n):((_=b[n]).useStyle(f.getItemStyle()),"cartesian2d"===l.type?_.setShape("r",y):_.setShape("cornerRadius",y),v[t]=_);var T=TM[l.type](o,t);cf(_,{shape:OM(i,T,l)},c,t)}var I=s.getItemGraphicEl(n);if(o.hasValue(t)&&_M[l.type](C)){var E=!1;if(u&&(E=vM[l.type](m,C))&&r.remove(I),I?ff(I):I=bM[l.type](e,o,t,C,i,c,p.model,!!I,h),d&&(I.forceLabelAnimation=!0),w){var M=I.getTextContent();if(M){var k=ry(M);null!=k.prevValue&&(k.prevValue=k.value)}}else EM(I,o,t,a,C,e,i,"polar"===l.type);x?I.attr({shape:C}):d?xM(d,c,I,C,t,i,!0,w):cf(I,{shape:C},e,t,null),o.setItemGraphicEl(t,I),I.ignore=E,r.add(I)}else r.remove(I)})).remove((function(t){var n=s.getItemGraphicEl(t);n&&gf(n,e,t)})).execute();var C=this._backgroundGroup||(this._backgroundGroup=new Bc);C.removeAll();for(var _=0;_<v.length;++_)C.add(v[_]);r.add(C),this._backgroundEls=v,this._data=o},t.prototype._renderLarge=function(e,t,n){this._clear(),PM(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),PM(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&jE(e.coordinateSystem,!1,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var a=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var r=function(e){var n=t.getItemGraphicEl(e),a=n&&n.shape;return a&&Math.abs(i.isHorizontal()?a.height:a.width)||0};this._onRendered=function(){a._updateSortWithinSameData(t,r,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var a=[];return e.each(e.mapDimension(t.dim),(function(e,t){var i=n(t);i=null==i?NaN:i,a.push({dataIndex:t,mappedValue:i,ordinalNumber:e})})),a.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:jr(a,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var a=n.scale,i=e.mapDimension(n.dim),r=Number.MAX_VALUE,o=0,s=a.getOrdinalMeta().categories.length;o<s;++o){var l=e.rawIndexOf(i,a.getRawOrdinalNumber(o)),p=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(p>r)return!0;r=p}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,a=n.getExtent(),i=Math.max(0,a[0]),r=Math.min(a[1],n.getOrdinalMeta().categories.length-1);i<=r;++i)if(e.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,a){if(this._isOrderChangedWithinSameData(e,t,n)){var i=this._dataSort(e,n,t);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,n){var a=t.baseAxis,i=this._dataSort(e,a,(function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(t){gf(t,e,Zm(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Iw),vM={cartesian2d:function(e,t){var n=t.width<0?-1:1,a=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,r=e.y+e.height,o=gM(t.x,e.x),s=fM(t.x+t.width,i),l=gM(t.y,e.y),p=fM(t.y+t.height,r),c=s<o,d=p<l;return t.x=c&&o>i?s:o,t.y=d&&l>r?p:l,t.width=c?0:s-o,t.height=d?0:p-l,n<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),c||d},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var a=t.r;t.r=t.r0,t.r0=a}var i=fM(t.r,e.r),r=gM(t.r0,e.r0);t.r=i,t.r0=r;var o=i-r<0;if(n<0){a=t.r;t.r=t.r0,t.r0=a}return o}},bM={cartesian2d:function(e,t,n,a,i,r,o,s,l){var p=new Rm({shape:Nr({},a),z2:1});(p.__dataIndex=n,p.name="item",r)&&(p.shape[i?"height":"width"]=0);return p},polar:function(e,t,n,a,i,r,o,s,l){var p=!i&&l?dM:Og,c=new p({shape:a,z2:1});c.name="item";var d,u,m=IM(i);if(c.calculateTextPosition=(d=m,u=({isRoundCap:p===dM}||{}).isRoundCap,function(e,t,n){var a=t.position;if(!a||a instanceof Array)return Tc(e,t,n);var i=d(a),r=null!=t.distance?t.distance:5,o=this.shape,s=o.cx,l=o.cy,p=o.r,c=o.r0,m=(p+c)/2,h=o.startAngle,g=o.endAngle,f=(h+g)/2,y=u?Math.abs(p-c)/2:0,v=Math.cos,b=Math.sin,x=s+p*v(h),w=l+p*b(h),S="left",C="top";switch(i){case"startArc":x=s+(c-r)*v(f),w=l+(c-r)*b(f),S="center",C="top";break;case"insideStartArc":x=s+(c+r)*v(f),w=l+(c+r)*b(f),S="center",C="bottom";break;case"startAngle":x=s+m*v(h)+uM(h,r+y,!1),w=l+m*b(h)+mM(h,r+y,!1),S="right",C="middle";break;case"insideStartAngle":x=s+m*v(h)+uM(h,-r+y,!1),w=l+m*b(h)+mM(h,-r+y,!1),S="left",C="middle";break;case"middle":x=s+m*v(f),w=l+m*b(f),S="center",C="middle";break;case"endArc":x=s+(p+r)*v(f),w=l+(p+r)*b(f),S="center",C="bottom";break;case"insideEndArc":x=s+(p-r)*v(f),w=l+(p-r)*b(f),S="center",C="top";break;case"endAngle":x=s+m*v(g)+uM(g,r+y,!0),w=l+m*b(g)+mM(g,r+y,!0),S="left",C="middle";break;case"insideEndAngle":x=s+m*v(g)+uM(g,-r+y,!0),w=l+m*b(g)+mM(g,-r+y,!0),S="right",C="middle";break;default:return Tc(e,t,n)}return(e=e||{}).x=x,e.y=w,e.align=S,e.verticalAlign=C,e}),r){var h=i?"r":"endAngle",g={};c.shape[h]=i?a.r0:a.startAngle,g[h]=a[h],(s?cf:df)(c,{shape:g},r)}return c}};function xM(e,t,n,a,i,r,o,s){var l,p;r?(p={x:a.x,width:a.width},l={y:a.y,height:a.height}):(p={y:a.y,height:a.height},l={x:a.x,width:a.width}),s||(o?cf:df)(n,{shape:l},t,i,null),(o?cf:df)(n,{shape:p},t?e.baseAxis.model:null,i)}function wM(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var SM=["x","y","width","height"],CM=["cx","cy","r","startAngle","endAngle"],_M={cartesian2d:function(e){return!wM(e,SM)},polar:function(e){return!wM(e,CM)}},TM={cartesian2d:function(e,t,n){var a=e.getItemLayout(t),i=n?function(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var a=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),r=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,i,r)}(n,a):0,r=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+r*i/2,y:a.y+o*i/2,width:a.width-r*i,height:a.height-o*i}},polar:function(e,t,n){var a=e.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function IM(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function EM(e,t,n,a,i,r,o,s){var l=t.getItemVisual(n,"style");if(s){if(!r.get("roundCap")){var p=e.shape;Nr(p,hM(a.getModel("itemStyle"),p,!0)),e.setShape(p)}}else{var c=a.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var d=a.getShallow("cursor");d&&e.attr("cursor",d);var u=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",m=Zf(a);Xf(e,m,{labelFetcher:r,labelDataIndex:n,defaultText:_E(r.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:u});var h=e.getTextContent();if(s&&h){var g=a.get(["label","position"]);e.textConfig.inside="middle"===g||null,function(e,t,n,a){if(to(a))e.setTextConfig({rotation:a});else if(Zr(t))e.setTextConfig({rotation:0});else{var i,r=e.shape,o=r.clockwise?r.startAngle:r.endAngle,s=r.clockwise?r.endAngle:r.startAngle,l=(o+s)/2,p=n(t);switch(p){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=l;break;case"startAngle":case"insideStartAngle":i=o;break;case"endAngle":case"insideEndAngle":i=s;break;default:return void e.setTextConfig({rotation:0})}var c=1.5*Math.PI-i;"middle"===p&&c>Math.PI/2&&c<1.5*Math.PI&&(c-=Math.PI),e.setTextConfig({rotation:c})}}(e,"outside"===g?u:g,IM(o),a.get(["label","rotate"]))}oy(h,m,r.getRawValue(n),(function(e){return TE(t,e)}));var f=a.getModel(["emphasis"]);qh(e,f.get("focus"),f.get("blurScope"),f.get("disabled")),jh(e,a),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(i)&&(e.style.fill="none",e.style.stroke="none",Ur(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var MM=function(){},kM=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new MM},t.prototype.buildPath=function(e,t){for(var n=t.points,a=this.baseDimIdx,i=1-this.baseDimIdx,r=[],o=[],s=this.barWidth,l=0;l<n.length;l+=3)o[a]=s,o[i]=n[l+2],r[a]=n[l+a],r[i]=n[l+i],e.rect(r[0],r[1],o[0],o[1])},t}(Cm);function PM(e,t,n,a){var i=e.getData(),r=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),p=i.getLayout("largeBackgroundPoints");if(p){var c=new kM({shape:{points:p},incremental:!!a,silent:!0,z2:0});c.baseDimIdx=r,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),n&&n.push(c)}var d=new kM({shape:{points:i.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=r,d.largeDataIndices=o,d.barWidth=s,t.add(d),d.useStyle(i.getVisual("style")),Zm(d).seriesIndex=e.seriesIndex,e.get("silent")||(d.on("mousedown",DM),d.on("mousemove",DM)),n&&n.push(d)}var DM=Rw((function(e){var t=function(e,t,n){for(var a=e.baseDimIdx,i=1-a,r=e.shape.points,o=e.largeDataIndices,s=[],l=[],p=e.barWidth,c=0,d=r.length/3;c<d;c++){var u=3*c;if(l[a]=p,l[i]=r[u+2],s[a]=r[u+a],s[i]=r[u+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}(this,e.offsetX,e.offsetY);Zm(this).dataIndex=t>=0?t:null}),30,!1);function OM(e,t,n){if(HE(n,"cartesian2d")){var a=t,i=n.getArea();return{x:e?a.x:i.x,y:e?i.y:a.y,width:e?a.width:i.width,height:e?i.height:a.height}}var r=t;return{cx:(i=n.getArea()).cx,cy:i.cy,r0:e?i.r0:r.r0,r:e?i.r:r.r,startAngle:e?r.startAngle:0,endAngle:e?r.endAngle:2*Math.PI}}function AM(e){e.registerChartView(yM),e.registerSeriesModel(pM),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,Xr(ET,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,MT("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,oM("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}var FM=2*Math.PI,RM=Math.PI/180;function BM(e,t){return Cv(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function NM(e,t){var n=BM(e,t),a=e.get("center"),i=e.get("radius");Zr(i)||(i=[0,i]);var r,o,s=$c(n.width,t.getWidth()),l=$c(n.height,t.getHeight()),p=Math.min(s,l),c=$c(i[0],p/2),d=$c(i[1],p/2),u=e.coordinateSystem;if(u){var m=u.dataToPoint(a);r=m[0]||0,o=m[1]||0}else Zr(a)||(a=[a,a]),r=$c(a[0],s)+n.x,o=$c(a[1],l)+n.y;return{cx:r,cy:o,r0:c,r:d}}function LM(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),a=t.mapDimension("value"),i=BM(e,n),r=NM(e,n),o=r.cx,s=r.cy,l=r.r,p=r.r0,c=-e.get("startAngle")*RM,d=e.get("endAngle"),u=e.get("padAngle")*RM;d="auto"===d?c-FM:-d*RM;var m=e.get("minAngle")*RM+u,h=0;t.each(a,(function(e){!isNaN(e)&&h++}));var g=t.getSum(a),f=Math.PI/(g||h)*2,y=e.get("clockwise"),v=e.get("roseType"),b=e.get("stillShowZeroSum"),x=t.getDataExtent(a);x[0]=0;var w=y?1:-1,S=[c,d],C=w*u/2;nm(S,!y),c=S[0],d=S[1];var _=Math.abs(d-c),T=_,I=0,E=c;if(t.setLayout({viewRect:i,r:l}),t.each(a,(function(e,n){var a;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:o,cy:s,r0:p,r:v?NaN:l});else{(a="area"!==v?0===g&&b?f:e*f:_/h)<m?(a=m,T-=m):I+=e;var i=E+w*a,r=0,c=0;u>a?c=r=E+w*a/2:(r=E+C,c=i-C),t.setItemLayout(n,{angle:a,startAngle:r,endAngle:c,clockwise:y,cx:o,cy:s,r0:p,r:v?Wc(e,x,[p,l]):l}),E=i}})),T<FM&&h)if(T<=.001){var M=_/h;t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n);a.angle=M;var i=0,r=0;M<u?r=i=c+w*(n+.5)*M:(i=c+w*n*M+C,r=c+w*(n+1)*M-C),a.startAngle=i,a.endAngle=r}}))}else f=T/I,E=c,t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n),i=a.angle===m?m:e*f,r=0,o=0;i<u?o=r=E+w*i/2:(r=E+C,o=E+w*i-C),a.startAngle=r,a.endAngle=o,E+=w*i}}))}))}function VM(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var a=e.getData();a.filterSelf((function(e){for(var t=a.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0}))}}}}var qM=Math.PI/180;function GM(e,t,n,a,i,r,o,s,l,p){if(!(e.length<2)){for(var c=e.length,d=0;d<c;d++)if("outer"===e[d].position&&"labelLine"===e[d].labelAlignTo){var u=e[d].label.x-p;e[d].linePoints[1][0]+=u,e[d].label.x=p}cE(e,l,l+o)&&function(e){for(var r={list:[],maxY:0},o={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],p=l.label.y>n?o:r,c=Math.abs(l.label.y-n);if(c>=p.maxY){var d=l.label.x-t-l.len2*i,u=a+l.len,h=Math.abs(d)<u?Math.sqrt(c*c/(1-d*d/u/u)):u;p.rB=h,p.maxY=c}p.list.push(l)}m(r),m(o)}(e)}function m(e){for(var r=e.rB,o=r*r,s=0;s<e.list.length;s++){var l=e.list[s],p=Math.abs(l.label.y-n),c=a+l.len,d=c*c,u=Math.sqrt((1-Math.abs(p*p/o))*d),m=t+(u+l.len2)*i,h=m-l.label.x;zM(l,l.targetTextWidth-h*i,!0),l.label.x=m}}}function zM(e,t,n){if(void 0===n&&(n=!1),null==e.labelStyleWidth){var a=e.label,i=a.style,r=e.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,p=i.overflow,c=r.width+(o?0:l);if(t<c||n){var d=r.height;if(p&&p.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",t-l);var u=a.getBoundingRect();a.setStyle("width",Math.ceil(u.width)),a.setStyle("backgroundColor",o)}else{var m=t-l,h=t<c?m:n?m>e.unconstrainedWidth?null:m:null;a.setStyle("width",h)}var g=a.getBoundingRect();r.width=g.width;var f=(a.style.margin||0)+2.1;r.height=g.height+f,r.y-=(r.height-d)/2}}}function UM(e){return"center"===e.position}function jM(e){var t,n,a=e.getData(),i=[],r=!1,o=(e.get("minShowLabelAngle")||0)*qM,s=a.getLayout("viewRect"),l=a.getLayout("r"),p=s.width,c=s.x,d=s.y,u=s.height;function m(e){e.ignore=!0}a.each((function(e){var s=a.getItemGraphicEl(e),d=s.shape,u=s.getTextContent(),h=s.getTextGuideLine(),g=a.getItemModel(e),f=g.getModel("label"),y=f.get("position")||g.get(["emphasis","label","position"]),v=f.get("distanceToLabelLine"),b=f.get("alignTo"),x=$c(f.get("edgeDistance"),p),w=f.get("bleedMargin"),S=g.getModel("labelLine"),C=S.get("length");C=$c(C,p);var _=S.get("length2");if(_=$c(_,p),Math.abs(d.endAngle-d.startAngle)<o)return Ur(u.states,m),u.ignore=!0,void(h&&(Ur(h.states,m),h.ignore=!0));if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(u)){var T,I,E,M,k=(d.startAngle+d.endAngle)/2,P=Math.cos(k),D=Math.sin(k);t=d.cx,n=d.cy;var O="inside"===y||"inner"===y;if("center"===y)T=d.cx,I=d.cy,M="center";else{var A=(O?(d.r+d.r0)/2*P:d.r*P)+t,F=(O?(d.r+d.r0)/2*D:d.r*D)+n;if(T=A+3*P,I=F+3*D,!O){var R=A+P*(C+l-d.r),B=F+D*(C+l-d.r),N=R+(P<0?-1:1)*_;T="edge"===b?P<0?c+x:c+p-x:N+(P<0?-v:v),I=B,E=[[A,F],[R,B],[N,B]]}M=O?"center":"edge"===b?P>0?"right":"left":P>0?"left":"right"}var L=Math.PI,V=0,q=f.get("rotate");if(to(q))V=q*(L/180);else if("center"===y)V=0;else if("radial"===q||!0===q){V=P<0?-k+L:-k}else if("tangential"===q&&"outside"!==y&&"outer"!==y){var G=Math.atan2(P,D);G<0&&(G=2*L+G),D>0&&(G=L+G),V=G-L}if(r=!!V,u.x=T,u.y=I,u.rotation=V,u.setStyle({verticalAlign:"middle"}),O){u.setStyle({align:M});var z=u.states.select;z&&(z.x+=u.x,z.y+=u.y)}else{var U=u.getBoundingRect().clone();U.applyTransform(u.getComputedTransform());var j=(u.style.margin||0)+2.1;U.y-=j/2,U.height+=j,i.push({label:u,labelLine:h,position:y,len:C,len2:_,minTurnAngle:S.get("minTurnAngle"),maxSurfaceAngle:S.get("maxSurfaceAngle"),surfaceNormal:new ks(P,D),linePoints:E,textAlign:M,labelDistance:v,labelAlignTo:b,edgeDistance:x,bleedMargin:w,rect:U,unconstrainedWidth:U.width,labelStyleWidth:u.style.width})}s.setTextConfig({inside:O})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,n,a,i,r,o,s){for(var l=[],p=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,u=0;u<e.length;u++){var m=e[u].label;UM(e[u])||(m.x<t?(c=Math.min(c,m.x),l.push(e[u])):(d=Math.max(d,m.x),p.push(e[u])))}for(u=0;u<e.length;u++)if(!UM(f=e[u])&&f.linePoints){if(null!=f.labelStyleWidth)continue;m=f.label;var h=f.linePoints,g=void 0;g="edge"===f.labelAlignTo?m.x<t?h[2][0]-f.labelDistance-o-f.edgeDistance:o+i-f.edgeDistance-h[2][0]-f.labelDistance:"labelLine"===f.labelAlignTo?m.x<t?c-o-f.bleedMargin:o+i-d-f.bleedMargin:m.x<t?m.x-o-f.bleedMargin:o+i-m.x-f.bleedMargin,f.targetTextWidth=g,zM(f,g)}for(GM(p,t,n,a,1,0,r,0,s,d),GM(l,t,n,a,-1,0,r,0,s,c),u=0;u<e.length;u++){var f;if(!UM(f=e[u])&&f.linePoints){m=f.label,h=f.linePoints;var y="edge"===f.labelAlignTo,v=m.style.padding,b=v?v[1]+v[3]:0,x=m.style.backgroundColor?0:b,w=f.rect.width+x,S=h[1][0]-h[2][0];y?m.x<t?h[2][0]=o+f.edgeDistance+w+f.labelDistance:h[2][0]=o+i-f.edgeDistance-w-f.labelDistance:(m.x<t?h[2][0]=m.x+f.labelDistance:h[2][0]=m.x-f.labelDistance,h[1][0]=h[2][0]+S),h[1][1]=h[2][1]=m.y}}}(i,t,n,l,p,u,c,d);for(var h=0;h<i.length;h++){var g=i[h],f=g.label,y=g.labelLine,v=isNaN(f.x)||isNaN(f.y);if(f){f.setStyle({align:g.textAlign}),v&&(Ur(f.states,m),f.ignore=!0);var b=f.states.select;b&&(b.x+=f.x,b.y+=f.y)}if(y){var x=g.linePoints;v||!x?(Ur(y.states,m),y.ignore=!0):(nE(x,g.minTurnAngle),aE(x,g.surfaceNormal,g.maxSurfaceAngle),y.setShape({points:x}),f.__hostTarget.textGuideLineConfig={anchor:new ks(x[0][0],x[0][1])})}}}var HM=function(e){function t(t,n,a){var i=e.call(this)||this;i.z2=2;var r=new Lm;return i.setTextContent(r),i.updateData(t,n,a,!0),i}return ze(t,e),t.prototype.updateData=function(e,t,n,a){var i=this,r=e.hostModel,o=e.getItemModel(t),s=o.getModel("emphasis"),l=e.getItemLayout(t),p=Nr(hM(o.getModel("itemStyle"),l,!0),l);if(isNaN(p.startAngle))i.setShape(p);else{if(a){i.setShape(p);var c=r.getShallow("animationType");r.ecModel.ssr?(df(i,{scaleX:0,scaleY:0},r,{dataIndex:t,isFrom:!0}),i.originX=p.cx,i.originY=p.cy):"scale"===c?(i.shape.r=l.r0,df(i,{shape:{r:l.r}},r,t)):null!=n?(i.setShape({startAngle:n,endAngle:n}),df(i,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},r,t)):(i.shape.endAngle=l.startAngle,cf(i,{shape:{endAngle:l.endAngle}},r,t))}else ff(i),cf(i,{shape:p},r,t);i.useStyle(e.getItemVisual(t,"style")),jh(i,o);var d=(l.startAngle+l.endAngle)/2,u=r.get("selectedOffset"),m=Math.cos(d)*u,h=Math.sin(d)*u,g=o.getShallow("cursor");g&&i.attr("cursor",g),this._updateLabel(r,e,t),i.ensureState("emphasis").shape=Nr({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},hM(s.getModel("itemStyle"),l)),Nr(i.ensureState("select"),{x:m,y:h,shape:hM(o.getModel(["select","itemStyle"]),l)}),Nr(i.ensureState("blur"),{shape:hM(o.getModel(["blur","itemStyle"]),l)});var f=i.getTextGuideLine(),y=i.getTextContent();f&&Nr(f.ensureState("select"),{x:m,y:h}),Nr(y.ensureState("select"),{x:m,y:h}),qh(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},t.prototype._updateLabel=function(e,t,n){var a=this,i=t.getItemModel(n),r=i.getModel("labelLine"),o=t.getItemVisual(n,"style"),s=o&&o.fill,l=o&&o.opacity;Xf(a,Zf(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:l,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var p=a.getTextContent();a.setTextConfig({position:null,rotation:null}),p.attr({z2:10});var c=e.get(["label","position"]);if("outside"!==c&&"outer"!==c)a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Vg,this.setTextGuideLine(d)),oE(this,sE(i),{stroke:s,opacity:mo(r.get(["lineStyle","opacity"]),l,1)})}},t}(Og),WM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return ze(t,e),t.prototype.render=function(e,t,n,a){var i,r=e.getData(),o=this._data,s=this.group;if(!o&&r.count()>0){for(var l=r.getItemLayout(0),p=1;isNaN(l&&l.startAngle)&&p<r.count();++p)l=r.getItemLayout(p);l&&(i=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===r.count()&&e.get("showEmptyCircle")){var c=new Og({shape:NM(e,n)});c.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,s.add(c)}r.diff(o).add((function(e){var t=new HM(r,e,i);r.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var n=o.getItemGraphicEl(t);n.updateData(r,e,i),n.off("click"),s.add(n),r.setItemGraphicEl(e,n)})).remove((function(t){gf(o.getItemGraphicEl(t),e,t)})).execute(),jM(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var a=e[0]-n.cx,i=e[1]-n.cy,r=Math.sqrt(a*a+i*i);return r<=n.r&&r>=n.r0}},t.type="pie",t}(Iw);function $M(e,t,n){t=Zr(t)&&{coordDimensions:t}||Nr({encodeDefine:e.getEncode()},t);var a=e.getSource(),i=K_(a,t).dimensions,r=new $_(i,e);return r.initData(a,n),r}var KM=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),YM=Dd(),XM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new KM(Yr(this.getData,this),Yr(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return $M(this,{coordDimensions:["value"],encodeDefaulter:Xr(Kv,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),a=YM(n),i=a.seats;if(!i){var r=[];n.each(n.mapDimension("value"),(function(e){r.push(e)})),i=a.seats=Jc(r,n.hostModel.get("percentPrecision"))}var o=e.prototype.getDataParams.call(this,t);return o.percent=i[t]||0,o.$vars.push("percent"),o},t.prototype._defaultLabelLine=function(e){xd(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(hw);function ZM(e){e.registerChartView(WM),e.registerSeriesModel(XM),_S("pie",e.registerAction),e.registerLayout(Xr(LM,"pie")),e.registerProcessor(VM("pie")),e.registerProcessor(function(e){return{seriesType:e,reset:function(e,t){var n=e.getData();n.filterSelf((function(e){var t=n.mapDimension("value"),a=n.get(t,e);return!(to(a)&&!isNaN(a)&&a<0)}))}}}("pie"))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}ze(t,e),t.prototype.getInitialData=function(e,t){return nT(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}}}(hw);var QM=function(){},JM=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return ze(t,e),t.prototype.getDefaultShape=function(){return new QM},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,t){var n,a=t.points,i=t.size,r=this.symbolProxy,o=r.shape,s=e.getContext?e.getContext():e,l=s&&i[0]<4,p=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,n=this._off;n<a.length;){var c=a[n++],d=a[n++];isNaN(c)||isNaN(d)||(p&&!p.contain(c,d)||(o.x=c-i[0]/2,o.y=d-i[1]/2,o.width=i[0],o.height=i[1],r.buildPath(e,o,!0)))}this.incremental&&(this._off=n,this.notClear=!0)}},t.prototype.afterBrush=function(){var e,t=this.shape,n=t.points,a=t.size,i=this._ctx,r=this.softClipShape;if(i){for(e=this._off;e<n.length;){var o=n[e++],s=n[e++];isNaN(o)||isNaN(s)||(r&&!r.contain(o,s)||i.fillRect(o-a[0]/2,s-a[1]/2,a[0],a[1]))}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,t){for(var n=this.shape,a=n.points,i=n.size,r=Math.max(i[0],4),o=Math.max(i[1],4),s=a.length/2-1;s>=0;s--){var l=2*s,p=a[l]-r/2,c=a[l+1]-o/2;if(e>=p&&t>=c&&e<=p+r&&t<=c+o)return s}return-1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),a=this.getBoundingRect();return e=n[0],t=n[1],a.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,n=t.points,a=t.size,i=a[0],r=a[1],o=1/0,s=1/0,l=-1/0,p=-1/0,c=0;c<n.length;){var d=n[c++],u=n[c++];o=Math.min(d,o),l=Math.max(d,l),s=Math.min(u,s),p=Math.max(u,p)}e=this._rect=new Ls(o-i/2,s-r/2,l-o+i,p-s+r)}return e},t}(Cm),ek=function(){function e(){this.group=new Bc}return e.prototype.updateData=function(e,t){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,t)},e.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild((function(e){if(null!=e.startIndex){var n=2*(e.endIndex-e.startIndex),a=4*e.startIndex*2;t=new Float32Array(t.buffer,a,n)}e.setShape("points",t),e.reset()}))},e.prototype.incrementalPrepareUpdate=function(e){this._clear()},e.prototype.incrementalUpdate=function(e,t,n){var a=this._newAdded[0],i=t.getLayout("points"),r=a&&a.shape.points;if(r&&r.length<2e4){var o=r.length,s=new Float32Array(o+i.length);s.set(r),s.set(i,o),a.endIndex=e.end,a.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=e.start,l.endIndex=e.end,l.incremental=!0,l.setShape({points:i}),this._setCommon(l,t,n)}},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new JM({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},e.prototype._setCommon=function(e,t,n){var a=t.hostModel;n=n||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=n.clipShape||null,e.symbolProxy=LS(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var r=e.shape.size[0]<4;e.useStyle(a.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("style"),s=o&&o.fill;s&&e.setColor(s);var l=Zm(e);l.seriesIndex=a.seriesIndex,e.on("mousemove",(function(t){l.dataIndex=null;var n=e.hoverDataIdx;n>=0&&(l.dataIndex=n+(e.startIndex||0))}))},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),tk=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a=e.getData();this._updateSymbolDraw(a,e).updateData(a,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var a=e.getData();this._updateSymbolDraw(a,e).incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,n){var a=e.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var i=aM("").reset(e,t,n);i.progress&&i.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,t){var n=this._symbolDraw,a=t.pipelineContext.large;return n&&a===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=a?new ek:new DE,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter"}(Iw),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Pv)),nk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Rd).models[0]},t.type="cartesian2dAxis",t}(Pv);Gr(nk,pI);var ak={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},ik=Rr({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},ak),rk=Rr({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},ak),ok={category:ik,value:rk,time:Rr({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},rk),log:Lr({logBase:10},rk)},sk={value:1,category:1,time:1,log:1};function lk(e,t,n,a){Ur(sk,(function(i,r){var o=Rr(Rr({},ok[r],!0),a,!0),s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t+"Axis."+r,n}return ze(n,e),n.prototype.mergeDefaultAndTheme=function(e,t){var n=Tv(this),a=n?Ev(e):{};Rr(e,t.getTheme().get(r+"Axis")),Rr(e,this.getDefaultOption()),e.type=pk(e),n&&Iv(e,a,n)},n.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=rT.createByAxisModel(this))},n.prototype.getCategories=function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.prototype.getTicksGenerator=function(){var e=this.option;if("value"===e.type)return e.ticksGenerator},n.type=t+"Axis."+r,n.defaultOption=o,n}(n);e.registerComponentModel(s)})),e.registerSubTypeDefaulter(t+"Axis",pk)}function pk(e){return e.type||(e.data?"category":"value")}var ck=function(){function e(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return e.prototype.getAxis=function(e){return this._axes[e]},e.prototype.getAxes=function(){return jr(this._dimList,(function(e){return this._axes[e]}),this)},e.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Wr(this.getAxes(),(function(t){return t.scale.type===e}))},e.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},e}(),dk=["x","y"];function uk(e){return"interval"===e.type||"time"===e.type}var mk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=dk,t}return ze(t,e),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,t=this.getAxis("y").scale;if(uk(e)&&uk(t)){var n=e.getExtent(),a=t.getExtent(),i=this.dataToPoint([n[0],a[0]]),r=this.dataToPoint([n[1],a[1]]),o=n[1]-n[0],s=a[1]-a[0];if(o&&s){var l=(r[0]-i[0])/o,p=(r[1]-i[1])/s,c=i[0]-n[0]*l,d=i[1]-a[0]*p,u=this._transform=[l,0,0,p,c,d];this._invTransform=Es([],u)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,t){var n=this.dataToPoint(e),a=this.dataToPoint(t),i=this.getArea(),r=new Ls(n[0],n[1],a[0]-n[0],a[1]-n[1]);return i.intersect(r)},t.prototype.dataToPoint=function(e,t,n){n=n||[];var a=e[0],i=e[1];if(this._transform&&null!=a&&isFinite(a)&&null!=i&&isFinite(i))return Wo(n,e,this._transform);var r=this.getAxis("x"),o=this.getAxis("y");return n[0]=r.toGlobalCoord(r.dataToCoord(a,t)),n[1]=o.toGlobalCoord(o.dataToCoord(i,t)),n},t.prototype.clampData=function(e,t){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,i=n.getExtent(),r=a.getExtent(),o=n.parse(e[0]),s=a.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(i[0],i[1]),o),Math.max(i[0],i[1])),t[1]=Math.min(Math.max(Math.min(r[0],r[1]),s),Math.max(r[0],r[1])),t},t.prototype.pointToData=function(e,t){var n=[];if(this._invTransform)return Wo(n,e,this._invTransform);var a=this.getAxis("x"),i=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(e[0]),t),n[1]=i.coordToData(i.toLocalCoord(e[1]),t),n},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(e){e=e||0;var t=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),a=Math.min(t[0],t[1])-e,i=Math.min(n[0],n[1])-e,r=Math.max(t[0],t[1])-a+e,o=Math.max(n[0],n[1])-i+e;return new Ls(a,i,r,o)},t}(ck),hk=function(e){function t(t,n,a,i,r){var o=e.call(this,t,n,a)||this;return o.index=0,o.type=i||"value",o.position=r||"bottom",o}return ze(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},t.prototype.pointToData=function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(BI);function gk(e,t,n){n=n||{};var a=e.coordinateSystem,i=t.axis,r={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,p=i.dim,c=a.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],u={left:0,right:1,top:0,bottom:1,onZero:2},m=t.get("offset")||0,h="x"===p?[d[2]-m,d[3]+m]:[d[0]-m,d[1]+m];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));h[u.onZero]=Math.max(Math.min(g,h[1]),h[0])}r.position=["y"===p?h[u[l]]:d[0],"x"===p?h[u[l]]:d[3]],r.rotation=Math.PI/2*("x"===p?0:1);r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],r.labelOffset=o?h[u[s]]-h[u.onZero]:0,t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),co(n.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var f=t.get(["axisLabel","rotate"]);return r.labelRotate="top"===l?-f:f,r.z2=1,r}function fk(e){return"cartesian2d"===e.get("coordinateSystem")}function yk(e){var t={xAxisModel:null,yAxisModel:null};return Ur(t,(function(n,a){var i=a.replace(/Model$/,""),r=e.getReferringComponents(i,Rd).models[0];t[a]=r})),t}var vk=Math.log;function bk(e,t,n){var a=yT.prototype,i=a.getTicks.call(n),r=a.getTicks.call(n,!0),o=i.length-1,s=a.getInterval.call(n),l=eI(e,t),p=l.extent,c=l.fixMin,d=l.fixMax;if("log"===e.type){var u=vk(e.base);p=[vk(p[0])/u,vk(p[1])/u]}e.setExtent(p[0],p[1]),e.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:d});var m=a.getExtent.call(e);c&&(p[0]=m[0]),d&&(p[1]=m[1]);var h=a.getInterval.call(e),g=p[0],f=p[1];if(c&&d)h=(f-g)/o;else if(c)for(f=p[0]+h*o;f<p[1]&&isFinite(f)&&isFinite(p[1]);)h=pT(h),f=p[0]+h*o;else if(d)for(g=p[1]-h*o;g>p[0]&&isFinite(g)&&isFinite(p[0]);)h=pT(h),g=p[1]-h*o;else{e.getTicks().length-1>o&&(h=pT(h));var y=h*o;(g=Kc((f=Math.ceil(p[1]/h)*h)-y))<0&&p[0]>=0?(g=0,f=Kc(y)):f>0&&p[1]<=0&&(f=0,g=-Kc(y))}var v=(i[0].value-r[0].value)/s,b=(i[o].value-r[o].value)/s;a.setExtent.call(e,g+h*v,f+h*b),a.setInterval.call(e,h),(v||b)&&a.setNiceExtent.call(e,g+h,f-h)}var xk=function(){function e(e,t,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=dk,this._initCartesian(e,t,n),this.model=e}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(e,t){var n=this._axesMap;function a(e){var t,n=Kr(e),a=n.length;if(a){for(var i=[],r=a-1;r>=0;r--){var o=(l=e[+n[r]]).model,s=l.scale;sT(s)&&o.get("alignTicks")&&null==o.get("interval")&&null==o.getTicksGenerator()?i.push(l):(tI(s,o),sT(s)&&!s.isBlank()&&(t=l))}if(i.length){for(;!t&&i.length;){var l;tI((l=i.pop()).scale,l.model),l.scale.isBlank()||(t=l)}i.length&&t&&Ur(i,(function(e){bk(e.scale,e.model,t.scale)}))}}}this._updateScale(e,this.model),a(n.x),a(n.y);var i={};Ur(n.x,(function(e){Sk(n,"y",e,i)})),Ur(n.y,(function(e){Sk(n,"x",e,i)})),this.resize(this.model,t)},e.prototype.resize=function(e,t,n){var a=e.getBoxLayoutParams(),i=!n&&e.get("containLabel"),r=Cv(a,{width:t.getWidth(),height:t.getHeight()});this._rect=r;var o=this._axesList;function s(){Ur(o,(function(e){var t=e.isHorizontal(),n=t?[0,r.width]:[0,r.height],a=e.inverse?1:0;e.setExtent(n[a],n[1-a]),function(e,t){var n=e.getExtent(),a=n[0]+n[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return a-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return a-e+t}}(e,t?r.x:r.y)}))}s(),i&&(Ur(o,(function(e){if(!e.model.get(["axisLabel","inside"])){var t=function(e){var t=e.model,n=e.scale;if(t.get(["axisLabel","show"])&&!n.isBlank()){var a,i,r=n.getExtent();i=n instanceof gT?n.count():(a=n.getTicks()).length;var o,s=e.getLabelModel(),l=aI(e),p=1;i>40&&(p=Math.ceil(i/40));for(var c=0;c<i;c+=p){var d=l(a?a[c]:{value:r[0]+c},c),u=rI(s.getTextRect(d),s.get("rotate")||0);o?o.union(u):o=u}return o}}(e);if(t){var n=e.isHorizontal()?"height":"width",a=e.model.get(["axisLabel","margin"]);r[n]-=t[n]+a,"top"===e.position?r.y+=t.height+a:"left"===e.position&&(r.x+=t.width+a)}}})),s()),Ur(this._coordsList,(function(e){e.calcAffineTransform()}))},e.prototype.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n)return n[t||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(e,t){if(null!=e&&null!=t){var n="x"+e+"y"+t;return this._coordsMap[n]}no(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var a=0,i=this._coordsList;a<i.length;a++)if(i[a].getAxis("x").index===e||i[a].getAxis("y").index===t)return i[a]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(e,t,n){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.dataToPoint(n):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(e,t,n){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.pointToData(n):a.axis?a.axis.coordToData(a.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(e){var t,n,a=e.seriesModel,i=e.xAxisModel||a&&a.getReferringComponents("xAxis",Rd).models[0],r=e.yAxisModel||a&&a.getReferringComponents("yAxis",Rd).models[0],o=e.gridModel,s=this._coordsList;if(a)Vr(s,t=a.coordinateSystem)<0&&(t=null);else if(i&&r)t=this.getCartesian(i.componentIndex,r.componentIndex);else if(i)n=this.getAxis("x",i.componentIndex);else if(r)n=this.getAxis("y",r.componentIndex);else if(o){o.coordinateSystem===this&&(t=this._coordsList[0])}return{cartesian:t,axis:n}},e.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},e.prototype._initCartesian=function(e,t,n){var a=this,i=this,r={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},s={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);function l(t){return function(n,a){if(wk(n,e)){var l=n.get("position");"x"===t?"top"!==l&&"bottom"!==l&&(l=r.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=r.left?"right":"left"),r[l]=!0;var p=new hk(t,nI(n),[0,0],n.get("type"),l),c="category"===p.type;p.onBand=c&&n.get("boundaryGap"),p.inverse=n.get("inverse"),n.axis=p,p.model=n,p.grid=i,p.index=a,i._axesList.push(p),o[t][a]=p,s[t]++}}}this._axesMap=o,Ur(o.x,(function(t,n){Ur(o.y,(function(i,r){var o="x"+n+"y"+r,s=new mk(o);s.master=a,s.model=e,a._coordsMap[o]=s,a._coordsList.push(s),s.addAxis(t),s.addAxis(i)}))}))},e.prototype._updateScale=function(e,t){function n(e,t){Ur(lI(e,t.dim),(function(n){t.scale.unionExtentFromData(e,n)}))}Ur(this._axesList,(function(e){if(e.scale.setExtent(1/0,-1/0),"category"===e.type){var t=e.model.get("categorySortInfo");e.scale.setSortInfo(t)}})),e.eachSeries((function(e){if(fk(e)){var a=yk(e),i=a.xAxisModel,r=a.yAxisModel;if(!wk(i,t)||!wk(r,t))return;var o=this.getCartesian(i.componentIndex,r.componentIndex),s=e.getData(),l=o.getAxis("x"),p=o.getAxis("y");n(s,l),n(s,p)}}),this)},e.prototype.getTooltipAxes=function(e){var t=[],n=[];return Ur(this.getCartesians(),(function(a){var i=null!=e&&"auto"!==e?a.getAxis(e):a.getBaseAxis(),r=a.getOtherAxis(i);Vr(t,i)<0&&t.push(i),Vr(n,r)<0&&n.push(r)})),{baseAxes:t,otherAxes:n}},e.create=function(t,n){var a=[];return t.eachComponent("grid",(function(i,r){var o=new e(i,t,n);o.name="grid_"+r,o.resize(i,n,!0),i.coordinateSystem=o,a.push(o)})),t.eachSeries((function(e){if(fk(e)){var t=yk(e),n=t.xAxisModel,a=t.yAxisModel,i=n.getCoordSysModel();0;var r=i.coordinateSystem;e.coordinateSystem=r.getCartesian(n.componentIndex,a.componentIndex)}})),a},e.dimensions=dk,e}();function wk(e,t){return e.getCoordSysModel()===t}function Sk(e,t,n,a){n.getAxesOnZeroOf=function(){return i?[i]:[]};var i,r=e[t],o=n.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)Ck(r[l])&&(i=r[l]);else for(var p in r)if(r.hasOwnProperty(p)&&Ck(r[p])&&!a[c(r[p])]){i=r[p];break}i&&(a[c(i)]=!0)}function c(e){return e.dim+"_"+e.index}}function Ck(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),n=t[0],a=t[1];return!(n>0&&a>0||n<0&&a<0)}(e)}var _k=Math.PI,Tk=function(){function e(e,t){this.group=new Bc,this.opt=t,this.axisModel=e,Lr(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Bc({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(e){return!!Ik[e]},e.prototype.add=function(e){Ik[e](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(e,t,n){var a,i,r=td(t-e);return nd(r)?(i=n>0?"top":"bottom",a="center"):nd(r-_k)?(i=n>0?"bottom":"top",a="center"):(i="middle",a=r>0&&r<_k?n>0?"right":"left":n>0?"left":"right"),{rotation:r,textAlign:a,textVerticalAlign:i}},e.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},e.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},e}(),Ik={axisLine:function(e,t,n,a){var i=t.get(["axisLine","show"]);if("auto"===i&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),i){var r=t.axis.getExtent(),o=a.transform,s=[r[0],0],l=[r[1],0],p=s[0]>l[0];o&&(Wo(s,s,o),Wo(l,l,o));var c=Nr({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new zg({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Pf(d.shape,d.style.lineWidth),d.anid="line",n.add(d);var u=t.get(["axisLine","symbol"]);if(null!=u){var m=t.get(["axisLine","symbolSize"]);Jr(u)&&(u=[u,u]),(Jr(m)||to(m))&&(m=[m,m]);var h=qS(t.get(["axisLine","symbolOffset"])||0,m),g=m[0],f=m[1];Ur([{rotate:e.rotation+Math.PI/2,offset:h[0],r:0},{rotate:e.rotation-Math.PI/2,offset:h[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],(function(t,a){if("none"!==u[a]&&null!=u[a]){var i=LS(u[a],-g/2,-f/2,g,f,c.stroke,!0),r=t.r+t.offset,o=p?l:s;i.attr({rotation:t.rotate,x:o[0]+r*Math.cos(e.rotation),y:o[1]-r*Math.sin(e.rotation),silent:!0,z2:11}),n.add(i)}}))}}},axisTickLabel:function(e,t,n,a){var i=function(e,t,n,a){var i=n.axis,r=n.getModel("axisTick"),o=r.get("show");"auto"===o&&a.handleAutoShown&&(o=a.handleAutoShown("axisTick"));if(!o||i.scale.isBlank())return;for(var s=r.getModel("lineStyle"),l=a.tickDirection*r.get("length"),p=Pk(i.getTicksCoords(),t.transform,l,Lr(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<p.length;c++)e.add(p[c]);return p}(n,a,t,e),r=function(e,t,n,a){var i=n.axis,r=co(a.axisLabelShow,n.get(["axisLabel","show"]));if(!r||i.scale.isBlank())return;var o=n.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),p=(co(a.labelRotate,o.get("rotate"))||0)*_k/180,c=Tk.innerTextLayout(a.rotation,p,a.labelDirection),d=n.getCategories&&n.getCategories(!0),u=[],m=Tk.isLabelSilent(n),h=n.get("triggerEvent");return Ur(l,(function(r,p){var g="ordinal"===i.scale.type?i.scale.getRawOrdinalNumber(r.tickValue):r.tickValue,f=r.formattedLabel,y=r.rawLabel,v=o;if(d&&d[g]){var b=d[g];no(b)&&b.textStyle&&(v=new xy(b.textStyle,o,n.ecModel))}var x=v.getTextColor()||n.get(["axisLine","lineStyle","color"]),w=i.dataToCoord(g),S=v.getShallow("align",!0)||c.textAlign,C=uo(v.getShallow("alignMinLabel",!0),S),_=uo(v.getShallow("alignMaxLabel",!0),S),T=v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||c.textVerticalAlign,I=uo(v.getShallow("verticalAlignMinLabel",!0),T),E=uo(v.getShallow("verticalAlignMaxLabel",!0),T),M=new Lm({x:w,y:a.labelOffset+a.labelDirection*s,rotation:c.rotation,silent:m,z2:10+(r.level||0),style:Qf(v,{text:f,align:0===p?C:p===l.length-1?_:S,verticalAlign:0===p?I:p===l.length-1?E:T,fill:Qr(x)?x("category"===i.type?y:"value"===i.type?g+"":g,p):x})});if(M.anid="label_"+g,h){var k=Tk.makeAxisEventDataBase(n);k.targetType="axisLabel",k.value=y,k.tickIndex=p,"category"===i.type&&(k.dataIndex=g),Zm(M).eventData=k}t.add(M),M.updateTransform(),u.push(M),e.add(M),M.decomposeTransform()})),u}(n,a,t,e);(function(e,t,n){if(sI(e.axis))return;var a=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],n=n||[];var r=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],p=n[0],c=n[1],d=n[n.length-1],u=n[n.length-2];!1===a?(Ek(r),Ek(p)):Mk(r,o)&&(a?(Ek(o),Ek(c)):(Ek(r),Ek(p)));!1===i?(Ek(s),Ek(d)):Mk(l,s)&&(i?(Ek(l),Ek(u)):(Ek(s),Ek(d)))}(t,r,i),function(e,t,n,a){var i=n.axis,r=n.getModel("minorTick");if(!r.get("show")||i.scale.isBlank())return;var o=i.getMinorTicksCoords();if(!o.length)return;for(var s=r.getModel("lineStyle"),l=a*r.get("length"),p=Lr(s.getLineStyle(),Lr(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var d=Pk(o[c],t.transform,l,p,"minorticks_"+c),u=0;u<d.length;u++)e.add(d[u])}(n,a,t,e.tickDirection),t.get(["axisLabel","hideOverlap"]))&&dE(lE(jr(r,(function(e){return{label:e,priority:e.z2,defaultAttr:{ignore:e.ignore}}}))))},axisName:function(e,t,n,a){var i=co(e.axisName,t.get("name"));if(i){var r,o,s=t.get("nameLocation"),l=e.nameDirection,p=t.getModel("nameTextStyle"),c=t.get("nameGap")||0,d=t.axis.getExtent(),u=d[0]>d[1]?-1:1,m=["start"===s?d[0]-u*c:"end"===s?d[1]+u*c:(d[0]+d[1])/2,kk(s)?e.labelOffset+l*c:0],h=t.get("nameRotate");null!=h&&(h=h*_k/180),kk(s)?r=Tk.innerTextLayout(e.rotation,null!=h?h:e.rotation,l):(r=function(e,t,n,a){var i,r,o=td(n-e),s=a[0]>a[1],l="start"===t&&!s||"start"!==t&&s;nd(o-_k/2)?(r=l?"bottom":"top",i="center"):nd(o-1.5*_k)?(r=l?"top":"bottom",i="center"):(r="middle",i=o<1.5*_k&&o>_k/2?l?"left":"right":l?"right":"left");return{rotation:o,textAlign:i,textVerticalAlign:r}}(e.rotation,s,h||0,d),null!=(o=e.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(r.rotation)),!isFinite(o)&&(o=null)));var g=p.getFont(),f=t.get("nameTruncate",!0)||{},y=f.ellipsis,v=co(e.nameTruncateMaxWidth,f.maxWidth,o),b=new Lm({x:m[0],y:m[1],rotation:r.rotation,silent:Tk.isLabelSilent(t),style:Qf(p,{text:i,font:g,overflow:"truncate",width:v,ellipsis:y,fill:p.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:p.get("align")||r.textAlign,verticalAlign:p.get("verticalAlign")||r.textVerticalAlign}),z2:1});if(Uf({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var x=Tk.makeAxisEventDataBase(t);x.targetType="axisName",x.name=i,Zm(b).eventData=x}a.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function Ek(e){e&&(e.ignore=!0)}function Mk(e,t){var n=e&&e.getBoundingRect().clone(),a=t&&t.getBoundingRect().clone();if(n&&a){var i=ws([]);return Ts(i,i,-e.rotation),n.applyTransform(Cs([],i,e.getLocalTransform())),a.applyTransform(Cs([],i,t.getLocalTransform())),n.intersect(a)}}function kk(e){return"middle"===e||"center"===e}function Pk(e,t,n,a,i){for(var r=[],o=[],s=[],l=0;l<e.length;l++){var p=e[l].coord;o[0]=p,o[1]=0,s[0]=p,s[1]=n,t&&(Wo(o,o,t),Wo(s,s,t));var c=new zg({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:a,z2:2,autoBatch:!0,silent:!0});Pf(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,r.push(c)}return r}function Dk(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,n){var a=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),r=i.get("link",!0)||[],o=[];Ur(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var s=Rk(n.model),l=e.coordSysAxesInfo[s]={};e.coordSysMap[s]=n;var p=n.model.getModel("tooltip",a);if(Ur(n.getAxes(),Xr(m,!1,null)),n.getTooltipAxes&&a&&p.get("show")){var c="axis"===p.get("trigger"),d="cross"===p.get(["axisPointer","type"]),u=n.getTooltipAxes(p.get(["axisPointer","axis"]));(c||d)&&Ur(u.baseAxes,Xr(m,!d||"cross",c)),d&&Ur(u.otherAxes,Xr(m,"cross",!1))}}function m(a,s,c){var d=c.model.getModel("axisPointer",i),u=d.get("show");if(u&&("auto"!==u||a||Fk(d))){null==s&&(s=d.get("triggerTooltip")),d=a?function(e,t,n,a,i,r){var o=t.getModel("axisPointer"),s={};Ur(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(e){s[e]=Fr(o.get(e))})),s.snap="category"!==e.type&&!!r,"cross"===o.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===i){var p=o.get(["label","show"]);if(l.show=null==p||p,!r){var c=s.lineStyle=o.get("crossStyle");c&&Lr(l,c.textStyle)}}return e.model.getModel("axisPointer",new xy(s,n,a))}(c,p,i,t,a,s):d;var m=d.get("snap"),h=d.get("triggerEmphasis"),g=Rk(c.model),f=s||m||"category"===c.type,y=e.axesInfo[g]={key:g,axis:c,coordSys:n,axisPointerModel:d,triggerTooltip:s,triggerEmphasis:h,involveSeries:f,snap:m,useHandle:Fk(d),seriesModels:[],linkGroup:null};l[g]=y,e.seriesInvolved=e.seriesInvolved||f;var v=function(e,t){for(var n=t.model,a=t.dim,i=0;i<e.length;i++){var r=e[i]||{};if(Ok(r[a+"AxisId"],n.id)||Ok(r[a+"AxisIndex"],n.componentIndex)||Ok(r[a+"AxisName"],n.name))return i}}(r,c);if(null!=v){var b=o[v]||(o[v]={axesInfo:{}});b.axesInfo[g]=y,b.mapper=r[v].mapper,y.linkGroup=b}}}}))}(n,e,t),n.seriesInvolved&&function(e,t){t.eachSeries((function(t){var n=t.coordinateSystem,a=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);n&&"none"!==a&&!1!==a&&"item"!==a&&!1!==i&&!1!==t.get(["axisPointer","show"],!0)&&Ur(e.coordSysAxesInfo[Rk(n.model)],(function(e){var a=e.axis;n.getAxis(a.dim)===a&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())}))}))}(n,e),n}function Ok(e,t){return"all"===e||Zr(e)&&Vr(e,t)>=0||e===t}function Ak(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Rk(e)]}function Fk(e){return!!e.get(["handle","show"])}function Rk(e){return e.type+"||"+e.id}var Bk={},Nk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(t,n,a,i){this.axisPointerClass&&function(e){var t=Ak(e);if(t){var n=t.axisPointerModel,a=t.axis.scale,i=n.option,r=n.get("status"),o=n.get("value");null!=o&&(o=a.parse(o));var s=Fk(n);null==r&&(i.status=s?"show":"hide");var l=a.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==o||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,a,!0)},t.prototype.updateAxisPointer=function(e,t,n,a){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,t){var n=this._axisPointer;n&&n.remove(t)},t.prototype.dispose=function(t,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,a){var i=t.getAxisPointerClass(this.axisPointerClass);if(i){var r=function(e){var t=Ak(e);return t&&t.axisPointerModel}(e);r?(this._axisPointer||(this._axisPointer=new i)).render(e,r,n,a):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){Bk[e]=t},t.getAxisPointerClass=function(e){return e&&Bk[e]},t.type="axis",t}(Sw),Lk=Dd();function Vk(e,t,n,a){var i=n.axis;if(!i.scale.isBlank()){var r=n.getModel("splitArea"),o=r.getModel("areaStyle"),s=o.get("color"),l=a.coordinateSystem.getRect(),p=i.getTicksCoords({tickModel:r,clamp:!0});if(p.length){var c=s.length,d=Lk(e).splitAreaColors,u=_o(),m=0;if(d)for(var h=0;h<p.length;h++){var g=d.get(p[h].tickValue);if(null!=g){m=(g+(c-1)*h)%c;break}}var f=i.toGlobalCoord(p[0].coord),y=o.getAreaStyle();s=Zr(s)?s:[s];for(h=1;h<p.length;h++){var v=i.toGlobalCoord(p[h].coord),b=void 0,x=void 0,w=void 0,S=void 0;i.isHorizontal()?(b=f,x=l.y,w=v-b,S=l.height,f=b+w):(b=l.x,x=f,w=l.width,f=x+(S=v-x));var C=p[h-1].tickValue;null!=C&&u.set(C,m),t.add(new Rm({anid:null!=C?"area_"+C:null,shape:{x:b,y:x,width:w,height:S},style:Lr({fill:s[m]},y),autoBatch:!0,silent:!0})),m=(m+1)%c}Lk(e).splitAreaColors=u}}}function qk(e){Lk(e).splitAreaColors=null}var Gk=["axisLine","axisTickLabel","axisName"],zk=["splitArea","splitLine","minorSplitLine"],Uk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return ze(t,e),t.prototype.render=function(t,n,a,i){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Bc,this.group.add(this._axisGroup),t.get("show")){var o=t.getCoordSysModel(),s=gk(o,t),l=new Tk(t,Nr({handleAutoShown:function(e){for(var n=o.coordinateSystem.getCartesians(),a=0;a<n.length;a++)if(sT(n[a].getOtherAxis(t.axis).scale))return!0;return!1}},s));Ur(Gk,l.add,l),this._axisGroup.add(l.getGroup()),Ur(zk,(function(e){t.get([e,"show"])&&jk[e](this,this._axisGroup,t,o)}),this),i&&"changeAxisOrder"===i.type&&i.isInitSort||Bf(r,this._axisGroup,t),e.prototype.render.call(this,t,n,a,i)}},t.prototype.remove=function(){qk(this)},t.type="cartesianAxis",t}(Nk),jk={splitLine:function(e,t,n,a){var i=n.axis;if(!i.scale.isBlank()){var r=n.getModel("splitLine"),o=r.getModel("lineStyle"),s=o.get("color");s=Zr(s)?s:[s];for(var l=a.coordinateSystem.getRect(),p=i.isHorizontal(),c=0,d=i.getTicksCoords({tickModel:r}),u=[],m=[],h=o.getLineStyle(),g=0;g<d.length;g++){var f=i.toGlobalCoord(d[g].coord);p?(u[0]=f,u[1]=l.y,m[0]=f,m[1]=l.y+l.height):(u[0]=l.x,u[1]=f,m[0]=l.x+l.width,m[1]=f);var y=c++%s.length,v=d[g].tickValue,b=new zg({anid:null!=v?"line_"+d[g].tickValue:null,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:m[0],y2:m[1]},style:Lr({stroke:s[y]},h),silent:!0});Pf(b.shape,h.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,n,a){var i=n.axis,r=n.getModel("minorSplitLine").getModel("lineStyle"),o=a.coordinateSystem.getRect(),s=i.isHorizontal(),l=i.getMinorTicksCoords();if(l.length)for(var p=[],c=[],d=r.getLineStyle(),u=0;u<l.length;u++)for(var m=0;m<l[u].length;m++){var h=i.toGlobalCoord(l[u][m].coord);s?(p[0]=h,p[1]=o.y,c[0]=h,c[1]=o.y+o.height):(p[0]=o.x,p[1]=h,c[0]=o.x+o.width,c[1]=h);var g=new zg({anid:"minor_line_"+l[u][m].tickValue,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:c[0],y2:c[1]},style:d,silent:!0});Pf(g.shape,d.lineWidth),t.add(g)}},splitArea:function(e,t,n,a){Vk(e,t,n,a)}},Hk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="xAxis",t}(Uk),Wk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Hk.type,t}return ze(t,e),t.type="yAxis",t}(Uk),$k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="grid",t}return ze(t,e),t.prototype.render=function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new Rm({shape:e.coordinateSystem.getRect(),style:Lr({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Sw),Kk={offset:0};function Yk(e){e.registerComponentView($k),e.registerComponentModel(tk),e.registerCoordinateSystem("cartesian2d",xk),lk(e,"x",nk,Kk),lk(e,"y",nk,Kk),e.registerComponentView(Hk),e.registerComponentView(Wk),e.registerPreprocessor((function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}))}function Xk(e){e.eachSeriesByType("radar",(function(e){var t=e.getData(),n=[],a=e.coordinateSystem;if(a){var i=a.getIndicatorAxes();Ur(i,(function(e,r){t.each(t.mapDimension(i[r].dim),(function(e,t){n[t]=n[t]||[];var i=a.dataToPoint(e,r);n[t][r]=Zk(i)?i:Qk(a)}))})),t.each((function(e){var i=$r(n[e],(function(e){return Zk(e)}))||Qk(a);n[e].push(i.slice()),t.setItemLayout(e,n[e])}))}}))}function Zk(e){return!isNaN(e[0])&&!isNaN(e[1])}function Qk(e){return[e.cx,e.cy]}function Jk(e){var t=e.polar;if(t){Zr(t)||(t=[t]);var n=[];Ur(t,(function(t,a){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],Zr(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):n.push(t)})),e.polar=n}Ur(e.series,(function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)}))}var eP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(e,t,n){var a=e.coordinateSystem,i=this.group,r=e.getData(),o=this._data;function s(e,t){var n=e.getItemVisual(t,"symbol")||"circle";if("none"!==n){var a=VS(e.getItemVisual(t,"symbolSize")),i=LS(n,-1,-1,2,2),r=e.getItemVisual(t,"symbolRotate")||0;return i.attr({style:{strokeNoScale:!0},z2:100,scaleX:a[0]/2,scaleY:a[1]/2,rotation:r*Math.PI/180||0}),i}}function l(t,n,a,i,r,o){a.removeAll();for(var l=0;l<n.length-1;l++){var p=s(i,r);p&&(p.__dimIdx=l,t[l]?(p.setPosition(t[l]),Wf[o?"initProps":"updateProps"](p,{x:n[l][0],y:n[l][1]},e,r)):p.setPosition(n[l]),a.add(p))}}function p(e){return jr(e,(function(e){return[a.cx,a.cy]}))}r.diff(o).add((function(t){var n=r.getItemLayout(t);if(n){var a=new Ng,i=new Vg,o={shape:{points:n}};a.shape.points=p(n),i.shape.points=p(n),df(a,o,e,t),df(i,o,e,t);var s=new Bc,c=new Bc;s.add(i),s.add(a),s.add(c),l(i.shape.points,n,c,r,t,!0),r.setItemGraphicEl(t,s)}})).update((function(t,n){var a=o.getItemGraphicEl(n),i=a.childAt(0),s=a.childAt(1),p=a.childAt(2),c={shape:{points:r.getItemLayout(t)}};c.shape.points&&(l(i.shape.points,c.shape.points,p,r,t,!1),ff(s),ff(i),cf(i,c,e),cf(s,c,e),r.setItemGraphicEl(t,a))})).remove((function(e){i.remove(o.getItemGraphicEl(e))})).execute(),r.eachItemGraphicEl((function(e,t){var n=r.getItemModel(t),a=e.childAt(0),o=e.childAt(1),s=e.childAt(2),l=r.getItemVisual(t,"style"),p=l.fill;i.add(e),a.useStyle(Lr(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:p})),jh(a,n,"lineStyle"),jh(o,n,"areaStyle");var c=n.getModel("areaStyle"),d=c.isEmpty()&&c.parentModel.isEmpty();o.ignore=d,Ur(["emphasis","select","blur"],(function(e){var t=n.getModel([e,"areaStyle"]),a=t.isEmpty()&&t.parentModel.isEmpty();o.ensureState(e).ignore=a&&d})),o.useStyle(Lr(c.getAreaStyle(),{fill:p,opacity:.7,decal:l.decal}));var u=n.getModel("emphasis"),m=u.getModel("itemStyle").getItemStyle();s.eachChild((function(e){if(e instanceof Mm){var a=e.style;e.useStyle(Nr({image:a.image,x:a.x,y:a.y,width:a.width,height:a.height},l))}else e.useStyle(l),e.setColor(p),e.style.strokeNoScale=!0;e.ensureState("emphasis").style=Fr(m);var i=r.getStore().get(r.getDimensionIndex(e.__dimIdx),t);(null==i||isNaN(i))&&(i=""),Xf(e,Zf(n),{labelFetcher:r.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:i,inheritColor:p,defaultOpacity:l.opacity})})),qh(e,u.get("focus"),u.get("blurScope"),u.get("disabled"))})),this._data=r},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(Iw),tP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return ze(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new KM(Yr(this.getData,this),Yr(this.getRawData,this))},t.prototype.getInitialData=function(e,t){return $M(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(e),o=""===r?this.name:r,s=sw(this,e);return Qx("section",{header:o,sortBlocks:!0,blocks:jr(i,(function(t){var n=a.get(a.mapDimension(t.dim),e);return Qx("nameValue",{markerType:"subItem",markerColor:s,name:t.name,value:n,sortParam:n})}))})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,a=t.getValues(jr(n.dimensions,(function(e){return t.mapDimension(e)})),e),i=0,r=a.length;i<r;i++)if(!isNaN(a[i])){var o=n.getIndicatorAxes();return n.coordToPoint(o[i].dataToCoord(a[i]),i)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(hw),nP=ok.value;function aP(e,t){return Lr({show:t},e)}var iP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),a=this.get("axisLine"),i=this.get("axisTick"),r=this.get("axisLabel"),o=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),p=this.get("axisNameGap"),c=this.get("triggerEvent"),d=jr(this.get("indicator")||[],(function(d){null!=d.max&&d.max>0&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var u=o;null!=d.color&&(u=Lr({color:d.color},o));var m=Rr(Fr(d),{boundaryGap:e,splitNumber:t,scale:n,axisLine:a,axisTick:i,axisLabel:r,name:d.text,showName:s,nameLocation:"end",nameGap:p,nameTextStyle:u,triggerEvent:c},!1);if(Jr(l)){var h=m.name;m.name=l.replace("{value}",null!=h?h:"")}else Qr(l)&&(m.name=l(m.name,m));var g=new xy(m,null,this.ecModel);return Gr(g,pI.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g}),this);this._indicatorModels=d},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Rr({lineStyle:{color:"#bbb"}},nP.axisLine),axisLabel:aP(nP.axisLabel,!1),axisTick:aP(nP.axisTick,!1),splitLine:aP(nP.splitLine,!0),splitArea:aP(nP.splitArea,!0),indicator:[]},t}(Pv),rP=["axisLine","axisTickLabel","axisName"],oP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var t=e.coordinateSystem;Ur(jr(t.getIndicatorAxes(),(function(e){var n=e.model.get("showName")?e.name:"";return new Tk(e.model,{axisName:n,position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})})),(function(e){Ur(rP,e.add,e),this.group.add(e.getGroup())}),this)},t.prototype._buildSplitLineAndArea=function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var a=e.get("shape"),i=e.getModel("splitLine"),r=e.getModel("splitArea"),o=i.getModel("lineStyle"),s=r.getModel("areaStyle"),l=i.get("show"),p=r.get("show"),c=o.get("color"),d=s.get("color"),u=Zr(c)?c:[c],m=Zr(d)?d:[d],h=[],g=[];if("circle"===a)for(var f=n[0].getTicksCoords(),y=t.cx,v=t.cy,b=0;b<f.length;b++){if(l)h[E(h,u,b)].push(new gg({shape:{cx:y,cy:v,r:f[b].coord}}));if(p&&b<f.length-1)g[E(g,m,b)].push(new Fg({shape:{cx:y,cy:v,r0:f[b].coord,r:f[b+1].coord}}))}else{var x,w=jr(n,(function(e,n){var a=e.getTicksCoords();return x=null==x?a.length-1:Math.min(a.length-1,x),jr(a,(function(e){return t.coordToPoint(e.coord,n)}))})),S=[];for(b=0;b<=x;b++){for(var C=[],_=0;_<n.length;_++)C.push(w[_][b]);if(C[0]&&C.push(C[0].slice()),l)h[E(h,u,b)].push(new Vg({shape:{points:C}}));if(p&&S)g[E(g,m,b-1)].push(new Ng({shape:{points:C.concat(S)}}));S=C.slice().reverse()}}var T=o.getLineStyle(),I=s.getAreaStyle();Ur(g,(function(e,t){this.group.add(Mf(e,{style:Lr({stroke:"none",fill:m[t%m.length]},I),silent:!0}))}),this),Ur(h,(function(e,t){this.group.add(Mf(e,{style:Lr({fill:"none",stroke:u[t%u.length]},T),silent:!0}))}),this)}function E(e,t,n){var a=n%t.length;return e[a]=e[a]||[],a}},t.type="radar",t}(Sw),sP=function(e){function t(t,n,a){var i=e.call(this,t,n,a)||this;return i.type="value",i.angle=0,i.name="",i}return ze(t,e),t}(BI),lP=function(){function e(e,t,n){this.dimensions=[],this._model=e,this._indicatorAxes=jr(e.getIndicatorModels(),(function(e,t){var n="indicator_"+t,a=new sP(n,new yT);return a.name=e.get("name"),a.model=e,e.axis=a,this.dimensions.push(n),a}),this),this.resize(e,n)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},e.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},e.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=Math.sqrt(t*t+n*n);t/=a,n/=a;for(var i,r=Math.atan2(-n,t),o=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var p=this._indicatorAxes[l],c=Math.abs(r-p.angle);c<o&&(i=p,s=l,o=c)}return[s,+(i&&i.coordToData(a))]},e.prototype.resize=function(e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight(),r=Math.min(a,i)/2;this.cx=$c(n[0],a),this.cy=$c(n[1],i),this.startAngle=e.get("startAngle")*Math.PI/180;var o=e.get("radius");(Jr(o)||to(o))&&(o=[0,o]),this.r0=$c(o[0],r),this.r=$c(o[1],r),Ur(this._indicatorAxes,(function(e,t){e.setExtent(this.r0,this.r);var n=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),e.angle=n}),this)},e.prototype.update=function(e,t){var n=this._indicatorAxes,a=this._model;Ur(n,(function(e){e.scale.setExtent(1/0,-1/0)})),e.eachSeriesByType("radar",(function(t,i){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===a){var r=t.getData();Ur(n,(function(e){e.scale.unionExtentFromData(r,r.mapDimension(e.dim))}))}}),this);var i=a.get("splitNumber"),r=new yT;r.setExtent(0,i),r.setInterval(1),Ur(n,(function(e,t){bk(e.scale,e.model,r)}))},e.prototype.convertToPixel=function(e,t,n){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(e,t,n){return console.warn("Not implemented."),null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.create=function(t,n){var a=[];return t.eachComponent("radar",(function(i){var r=new e(i,t,n);a.push(r),i.coordinateSystem=r})),t.eachSeriesByType("radar",(function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=a[e.get("radarIndex")||0])})),a},e.dimensions=[],e}();function pP(e){e.registerCoordinateSystem("radar",lP),e.registerComponentModel(iP),e.registerComponentView(oP),e.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each((function(e){t.setItemVisual(e,"legendIcon","roundRect")})),t.setVisual("legendIcon","roundRect")}})}function cP(e){uI(pP),e.registerChartView(eP),e.registerSeriesModel(tP),e.registerLayout(Xk),e.registerProcessor(VM("radar")),e.registerPreprocessor(Jk)}var dP="\0_ec_interaction_mutex";function uP(e,t){return!!mP(e)[t]}function mP(e){return e[dP]||(e[dP]={})}g_({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ko);var hP=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var a=Yr(n._mousedownHandler,n),i=Yr(n._mousemoveHandler,n),r=Yr(n._mouseupHandler,n),o=Yr(n._mousewheelHandler,n),s=Yr(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=Lr(Fr(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",a),t.on("mousemove",i),t.on("mouseup",r)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",o),t.on("pinch",s))},n.disable=function(){t.off("mousedown",a),t.off("mousemove",i),t.off("mouseup",r),t.off("mousewheel",o),t.off("pinch",s)},n}return ze(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!ys(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,a=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,a)&&(this._x=n,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&yP("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!uP(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,a=this._x,i=this._y,r=t-a,o=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&fs(e.event),fP(this,"pan","moveOnMouseMove",e,{dx:r,dy:o,oldX:a,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){ys(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=yP("zoomOnMouseWheel",e,this._opt),n=yP("moveOnMouseWheel",e,this._opt),a=e.wheelDelta,i=Math.abs(a),r=e.offsetX,o=e.offsetY;if(0!==a&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;gP(this,"zoom","zoomOnMouseWheel",e,{scale:a>0?s:1/s,originX:r,originY:o,isAvailableBehavior:null})}if(n){var l=Math.abs(a);gP(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(a>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:r,originY:o,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){uP(this._zr,"globalPan")||gP(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(Zo);function gP(e,t,n,a,i){e.pointerChecker&&e.pointerChecker(a,i.originX,i.originY)&&(fs(a.event),fP(e,t,n,a,i))}function fP(e,t,n,a,i){i.isAvailableBehavior=Yr(yP,null,n,a),e.trigger(t,i)}function yP(e,t,n){var a=n[e];return!e||a&&(!Jr(a)||t.event[a+"Key"])}function vP(e,t,n){var a=e.target;a.x+=t,a.y+=n,a.dirty()}function bP(e,t,n,a){var i=e.target,r=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,r){var s=r.min||0,l=r.max||1/0;o=Math.max(Math.min(l,o),s)}var p=o/e.zoom;e.zoom=o,i.x-=(n-i.x)*(p-1),i.y-=(a-i.y)*(p-1),i.scaleX*=p,i.scaleY*=p,i.dirty()}var xP,wP={axisPointer:1,tooltip:1,brush:1};function SP(e,t,n){var a=t.getComponentByElement(e.topTarget),i=a&&a.coordinateSystem;return a&&a!==n&&!wP.hasOwnProperty(a.mainType)&&i&&i.model!==n}function CP(e){Jr(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var _P={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},TP=Kr(_P),IP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},EP=Kr(IP),MP=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var n=CP(e);this._defsUsePending=[];var a=new Bc;this._root=a;var i=[],r=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||t.width),s=parseFloat(n.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(s)&&(s=null),FP(n,a,null,!0,!1);for(var l,p,c=n.firstChild;c;)this._parseNode(c,a,i,null,!1,!1),c=c.nextSibling;if(function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a[0].style[a[1]]=e[a[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],r){var d=LP(r);d.length>=4&&(l={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(l&&null!=o&&null!=s&&(p=UP(l,{x:0,y:0,width:o,height:s}),!t.ignoreViewBox)){var u=a;(a=new Bc).add(u),u.scaleX=u.scaleY=p.scale,u.x=p.x,u.y=p.y}return t.ignoreRootClip||null==o||null==s||a.setClipPath(new Rm({shape:{x:0,y:0,width:o,height:s}})),{root:a,width:o,height:s,viewBoxRect:l,viewBoxTransform:p,named:i}},e.prototype._parseNode=function(e,t,n,a,i,r){var o,s=e.nodeName.toLowerCase(),l=a;if("defs"===s&&(i=!0),"text"===s&&(r=!0),"defs"===s||"switch"===s)o=t;else{if(!i){var p=xP[s];if(p&&Mo(xP,s)){o=p.call(this,e,t);var c=e.getAttribute("name");if(c){var d={name:c,namedFrom:null,svgNodeTagLower:s,el:o};n.push(d),"g"===s&&(l=d)}else a&&n.push({name:a.name,namedFrom:a,svgNodeTagLower:s,el:o});t.add(o)}}var u=kP[s];if(u&&Mo(kP,s)){var m=u.call(this,e),h=e.getAttribute("id");h&&(this._defs[h]=m)}}if(o&&o.isGroup)for(var g=e.firstChild;g;)1===g.nodeType?this._parseNode(g,o,n,l,i,r):3===g.nodeType&&r&&this._parseText(g,o),g=g.nextSibling},e.prototype._parseText=function(e,t){var n=new Tm({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});OP(t,n),FP(e,n,this._defsUsePending,!1,!1),function(e,t){var n=t.__selfStyle;if(n){var a=n.textBaseline,i=a;a&&"auto"!==a?"baseline"===a?i="alphabetic":"before-edge"===a||"text-before-edge"===a?i="top":"after-edge"===a||"text-after-edge"===a?i="bottom":"central"!==a&&"mathematical"!==a||(i="middle"):i="alphabetic",e.style.textBaseline=i}var r=t.__inheritedStyle;if(r){var o=r.textAlign,s=o;o&&("middle"===o&&(s="center"),e.style.textAlign=s)}}(n,t);var a=n.style,i=a.fontSize;i&&i<9&&(a.fontSize=9,n.scaleX*=i/9,n.scaleY*=i/9);var r=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=r;var o=n.getBoundingRect();return this._textX+=o.width,t.add(n),n},e.internalField=void(xP={g:function(e,t){var n=new Bc;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new Rm;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new gg;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new zg;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new yg;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n,a=e.getAttribute("points");a&&(n=AP(a));var i=new Ng({shape:{points:n||[]},silent:!0});return OP(t,i),FP(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var n,a=e.getAttribute("points");a&&(n=AP(a));var i=new Vg({shape:{points:n||[]},silent:!0});return OP(t,i),FP(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var n=new Mm;return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",a=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",r=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(a)+parseFloat(r);var o=new Bc;return OP(t,o),FP(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,t){var n=e.getAttribute("x"),a=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=a&&(this._textY=parseFloat(a));var i=e.getAttribute("dx")||"0",r=e.getAttribute("dy")||"0",o=new Bc;return OP(t,o),FP(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(r),o},path:function(e,t){var n=mg(e.getAttribute("d")||"");return OP(t,n),FP(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),e}(),kP={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),n=parseInt(e.getAttribute("y1")||"0",10),a=parseInt(e.getAttribute("x2")||"10",10),i=parseInt(e.getAttribute("y2")||"0",10),r=new Zg(t,n,a,i);return PP(e,r),DP(e,r),r},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),n=parseInt(e.getAttribute("cy")||"0",10),a=parseInt(e.getAttribute("r")||"0",10),i=new Qg(t,n,a);return PP(e,i),DP(e,i),i}};function PP(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function DP(e,t){for(var n=e.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var a=n.getAttribute("offset"),i=void 0;i=a&&a.indexOf("%")>0?parseInt(a,10)/100:a?parseFloat(a):0;var r={};zP(n,r,r);var o=r.stopColor||n.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:i,color:o})}n=n.nextSibling}}function OP(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Lr(t.__inheritedStyle,e.__inheritedStyle))}function AP(e){for(var t=LP(e),n=[],a=0;a<t.length;a+=2){var i=parseFloat(t[a]),r=parseFloat(t[a+1]);n.push([i,r])}return n}function FP(e,t,n,a,i){var r=t,o=r.__inheritedStyle=r.__inheritedStyle||{},s={};1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var a=[],i=null;n.replace(VP,(function(e,t,n){return a.push(t,n),""}));for(var r=a.length-1;r>0;r-=2){var o=a[r],s=a[r-1],l=LP(o);switch(i=i||[1,0,0,1,0,0],s){case"translate":_s(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":Is(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Ts(i,i,-parseFloat(l[0])*qP,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":Cs(i,[1,0,Math.tan(parseFloat(l[0])*qP),1,0,0],i);break;case"skewY":Cs(i,[1,Math.tan(parseFloat(l[0])*qP),0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5])}}t.setLocalTransform(i)}}(e,t),zP(e,o,s),a||function(e,t,n){for(var a=0;a<TP.length;a++){var i=TP[a];null!=(r=e.getAttribute(i))&&(t[_P[i]]=r)}for(a=0;a<EP.length;a++){var r;i=EP[a];null!=(r=e.getAttribute(i))&&(n[IP[i]]=r)}}(e,o,s)),r.style=r.style||{},null!=o.fill&&(r.style.fill=BP(r,"fill",o.fill,n)),null!=o.stroke&&(r.style.stroke=BP(r,"stroke",o.stroke,n)),Ur(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=o[e]&&(r.style[e]=parseFloat(o[e]))})),Ur(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(e){null!=o[e]&&(r.style[e]=o[e])})),i&&(r.__selfStyle=s),o.lineDash&&(r.style.lineDash=jr(LP(o.lineDash),(function(e){return parseFloat(e)}))),"hidden"!==o.visibility&&"collapse"!==o.visibility||(r.invisible=!0),"none"===o.display&&(r.ignore=!0)}var RP=/^url\(\s*#(.*?)\)/;function BP(e,t,n,a){var i=n&&n.match(RP);if(!i)return"none"===n&&(n=null),n;var r=yo(i[1]);a.push([e,t,r])}var NP=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function LP(e){return e.match(NP)||[]}var VP=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,qP=Math.PI/180;var GP=/([^\s:;]+)\s*:\s*([^:;]+)/g;function zP(e,t,n){var a,i=e.getAttribute("style");if(i)for(GP.lastIndex=0;null!=(a=GP.exec(i));){var r=a[1],o=Mo(_P,r)?_P[r]:null;o&&(t[o]=a[2]);var s=Mo(IP,r)?IP[r]:null;s&&(n[s]=a[2])}}function UP(e,t){var n=t.width/e.width,a=t.height/e.height,i=Math.min(n,a);return{scale:i,x:-(e.x+e.width/2)*i+(t.x+t.width/2),y:-(e.y+e.height/2)*i+(t.y+t.height/2)}}var jP=_o(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]);!function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=_o(),this._freedGraphics=[],this._mapName=e,this._parsedXML=CP(t)}e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],n=_o();return Ur(e,(function(e){if(null==e.namedFrom){var a=new SI(e.name,e.el);t.push(a),n.set(e.name,a)}})),{regions:t,regionsMap:n}}(e.named),n=t.regions,a=t.regionsMap;this._regions=n,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,n,a,i;try{fo(null!=(n=(t=e&&(a=e,i={ignoreViewBox:!0,ignoreRootClip:!0},(new MP).parse(a,i))||{}).root))}catch(e){throw new Error("Invalid svg format\n"+e.message)}var r=new Bc;r.add(n),r.isGeoSVGGraphicRoot=!0;var o=t.width,s=t.height,l=t.viewBoxRect,p=this._boundingRect;if(!p){var c=void 0,d=void 0,u=void 0,m=void 0;if(null!=o?(c=0,u=o):l&&(c=l.x,u=l.width),null!=s?(d=0,m=s):l&&(d=l.y,m=l.height),null==c||null==d){var h=n.getBoundingRect();null==c&&(c=h.x,u=h.width),null==d&&(d=h.y,m=h.height)}p=this._boundingRect=new Ls(c,d,u,m)}if(l){var g=UP(l,p);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}r.setClipPath(new Rm({shape:p.plain()}));var f=[];return Ur(t.named,(function(e){var t;null!=jP.get(e.svgNodeTagLower)&&(f.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:r,boundingRect:p,named:f}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))}}();for(var HP=[126,25],WP="南海诸岛",$P=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],KP=0;KP<$P.length;KP++)for(var YP=0;YP<$P[KP].length;YP++)$P[KP][YP][0]/=10.5,$P[KP][YP][1]/=-14,$P[KP][YP][0]+=HP[0],$P[KP][YP][1]+=HP[1];var XP={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};var ZP=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];!function(){function e(e,t,n){var a;this.type="geoJSON",this._parsedMap=_o(),this._mapName=e,this._specialAreas=n,this._geoJSON=Jr(a=t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}e.prototype.load=function(e,t){t=t||"name";var n=this._parsedMap.get(t);if(!n){var a=this._parseToRegions(t);n=this._parsedMap.set(t,{regions:a,boundingRect:QP(a)})}var i=_o(),r=[];return Ur(n.regions,(function(t){var n=t.name;e&&Mo(e,n)&&(t=t.cloneShallow(n=e[n])),r.push(t),i.set(n,t)})),{regions:r,boundingRect:n.boundingRect||new Ls(0,0,0,0),regionsMap:i}},e.prototype._parseToRegions=function(e){var t,n=this._mapName,a=this._geoJSON;try{t=a?TI(a,e):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(e,t){if("china"===e){for(var n=0;n<t.length;n++)if(t[n].name===WP)return;t.push(new wI(WP,jr($P,(function(e){return{type:"polygon",exterior:e}})),HP))}}(n,t),Ur(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var n=XP[t.name];if(n){var a=t.getCenter();a[0]+=n[0]/10.5,a[1]+=-n[1]/14,t.setCenter(a)}}}(n,e),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:ZP[0]})}(n,e);var a=this._specialAreas&&this._specialAreas[t];a&&e.transformTo(a.left,a.top,a.width,a.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}}}();function QP(e){for(var t,n=0;n<e.length;n++){var a=e[n].getBoundingRect();(t=t||a.clone()).union(a)}return t}var JP=_o(),eD=function(e){return JP.get(e)},tD=function(e,t,n){var a=JP.get(e);if(a)return a.load(t,n)},nD=["rect","circle","line","ellipse","polygon","polyline","path"],aD=_o(nD),iD=_o(nD.concat(["g"])),rD=_o(nD.concat(["g"])),oD=Dd();function sD(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function lD(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var pD=function(){function e(e){var t=new Bc;this.uid=Sy("ec_map_draw"),this._controller=new hP(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Bc),t.add(this._svgGroup=new Bc)}return e.prototype.draw=function(e,t,n,a,i){var r="geo"===e.mainType,o=e.getData&&e.getData();r&&t.eachComponent({mainType:"series",subType:"map"},(function(t){o||t.getHostGeoModel()!==e||(o=t.getData())}));var s=e.coordinateSystem,l=this._regionsGroup,p=this.group,c=s.getTransformInfo(),d=c.raw,u=c.roam;!l.childAt(0)||i?(p.x=u.x,p.y=u.y,p.scaleX=u.scaleX,p.scaleY=u.scaleY,p.dirty()):cf(p,u,e);var m=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,h={api:n,geo:s,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:m,isGeo:r,transformInfoRaw:d};"geoJSON"===s.resourceType?this._buildGeoJSON(h):"geoSVG"===s.resourceType&&this._buildSVG(h),this._updateController(e,t,n),this._updateMapSelectHandler(e,l,n,a)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=_o(),n=_o(),a=this._regionsGroup,i=e.transformInfoRaw,r=e.mapOrGeoModel,o=e.data,s=e.geo.projection,l=s&&s.stream;function p(e,t){return t&&(e=t(e)),e&&[e[0]*i.scaleX+i.x,e[1]*i.scaleY+i.y]}function c(e){for(var t=[],n=!l&&s&&s.project,a=0;a<e.length;++a){var i=p(e[a],n);i&&t.push(i)}return t}function d(e){return{shape:{points:c(e)}}}a.removeAll(),Ur(e.geo.regions,(function(i){var c=i.name,u=t.get(c),m=n.get(c)||{},h=m.dataIdx,g=m.regionModel;u||(u=t.set(c,new Bc),a.add(u),h=o?o.indexOfName(c):null,g=e.isGeo?r.getRegionModel(c):o?o.getItemModel(h):null,n.set(c,{dataIdx:h,regionModel:g}));var f=[],y=[];Ur(i.geometries,(function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);l&&(t=gD(t,l)),Ur(t,(function(e){f.push(new Ng(d(e)))}))}else{var n=e.points;l&&(n=gD(n,l,!0)),Ur(n,(function(e){y.push(new Vg(d(e)))}))}}));var v=p(i.getCenter(),s&&s.project);function b(t,n){if(t.length){var a=new Yg({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});u.add(a),cD(e,a,h,g),dD(e,a,c,g,r,h,v),n&&(lD(a),Ur(a.states,lD))}}b(f),b(y,!0)})),t.each((function(t,a){var i=n.get(a),o=i.dataIdx,s=i.regionModel;uD(e,t,a,s,r,o),mD(e,t,a,s,r),hD(e,t,a,s,r)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var a=this._svgDispatcherMap=_o(),i=!1;Ur(this._svgGraphicRecord.named,(function(t){var n=t.name,r=e.mapOrGeoModel,o=e.data,s=t.svgNodeTagLower,l=t.el,p=o?o.indexOfName(n):null,c=r.getRegionModel(n);(null!=aD.get(s)&&l instanceof wu&&cD(e,l,p,c),l instanceof wu&&(l.culling=!0),l.z2EmphasisLift=0,t.namedFrom)||(null!=rD.get(s)&&dD(e,l,n,c,r,p,null),uD(e,l,n,c,r,p),mD(e,l,n,c,r),null!=iD.get(s)&&("self"===hD(e,l,n,c,r)&&(i=!0),(a.get(n)||a.set(n,[])).push(l)))}),this),this._enableBlurEntireSVG(i,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){Ch(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=n&&(t.opacity=n),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var n=t.coordinateSystem;if("geoJSON"===n.resourceType){var a=this._regionsGroupByName;if(a){var i=a.get(e);return i?[i]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=eD(e);if(t&&"geoSVG"===t.type){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=eD(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,n){var a=e.coordinateSystem,i=this._controller,r=this._controllerHost;r.zoomLimit=e.get("scaleLimit"),r.zoom=a.getZoom(),i.enable(e.get("roam")||!1);var o=e.mainType;function s(){var t={type:"geoRoam",componentType:o};return t[o+"Id"]=e.id,t}i.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,vP(r,e.dx,e.dy),n.dispatchAction(Nr(s(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))}),this),i.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,bP(r,e.scale,e.originX,e.originY),n.dispatchAction(Nr(s(),{zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))}),this),i.setPointerChecker((function(t,i,r){return a.containPoint([i,r])&&!SP(t,n,e)}))},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=oD(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,n,a){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){i._mouseDownFlag=!0})),t.on("click",(function(e){i._mouseDownFlag&&(i._mouseDownFlag=!1)})))},e}();function cD(e,t,n,a){var i=a.getModel("itemStyle"),r=a.getModel(["emphasis","itemStyle"]),o=a.getModel(["blur","itemStyle"]),s=a.getModel(["select","itemStyle"]),l=sD(i),p=sD(r),c=sD(s),d=sD(o),u=e.data;if(u){var m=u.getItemVisual(n,"style"),h=u.getItemVisual(n,"decal");e.isVisualEncodedByVisualMap&&m.fill&&(l.fill=m.fill),h&&(l.decal=dC(h,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=p,t.ensureState("select").style=c,t.ensureState("blur").style=d,Ch(t)}function dD(e,t,n,a,i,r,o){var s=e.data,l=e.isGeo,p=s&&isNaN(s.get(s.mapDimension("value"),r)),c=s&&s.getItemLayout(r);if(l||p||c&&c.showLabel){var d=l?n:r,u=void 0;(!s||r>=0)&&(u=i);var m=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Xf(t,Zf(a),{labelFetcher:u,labelDataIndex:d,defaultText:n},m);var h=t.getTextContent();if(h&&(oD(h).ignore=h.ignore,t.textConfig&&o)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(o[0]-g.x)/g.width*100+"%",(o[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function uD(e,t,n,a,i,r){e.data?e.data.setItemGraphicEl(r,t):Zm(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:n,region:a&&a.option||{}}}function mD(e,t,n,a,i){e.data||Uf({el:t,componentModel:i,itemName:n,itemTooltipOption:a.get("tooltip")})}function hD(e,t,n,a,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var r=a.getModel("emphasis"),o=r.get("focus");return qh(t,o,r.get("blurScope"),r.get("disabled")),e.isGeo&&function(e,t,n){var a=Zm(e);a.componentMainType=t.mainType,a.componentIndex=t.componentIndex,a.componentHighDownName=n}(t,i,n),o}function gD(e,t,n){var a,i=[];function r(){a=[]}function o(){a.length&&(i.push(a),a=[])}var s=t({polygonStart:r,polygonEnd:o,lineStart:r,lineEnd:o,point:function(e,t){isFinite(e)&&isFinite(t)&&a.push([e,t])},sphere:function(){}});return!n&&s.polygonStart(),Ur(e,(function(e){s.lineStart();for(var t=0;t<e.length;t++)s.point(e[t][0],e[t][1]);s.lineEnd()})),!n&&s.polygonEnd(),i}(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n,a){if(!a||"mapToggleSelect"!==a.type||a.from!==this.uid){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&a&&"geoRoam"===a.type&&this._mapDraw.resetForLabelLayout(),a&&"geoRoam"===a.type&&"series"===a.componentType&&a.seriesId===e.id)(r=this._mapDraw)&&i.add(r.group);else if(e.needsDrawMap){var r=this._mapDraw||new pD(n);i.add(r.group),r.draw(e,t,n,this,a),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,n){var a=e.originalData,i=this.group;a.each(a.mapDimension("value"),(function(t,n){if(!isNaN(t)){var r=a.getItemLayout(n);if(r&&r.point){var o=r.point,s=r.offset,l=new gg({style:{fill:e.getData().getVisual("style").fill},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:8+(s?0:11)});if(!s){var p=e.mainSeries.getData(),c=a.getName(n),d=p.indexOfName(c),u=a.getItemModel(n),m=u.getModel("label"),h=p.getItemGraphicEl(d);Xf(l,Zf(u),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(d,n)}},defaultText:c}),l.disableLabelAnimation=!0,m.get("position")||l.setTextConfig({position:"bottom"}),h.onHoverStateChange=function(e){wh(l,e)}}i.add(l)}}}))},t.type="map"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,a=n.getRegion(t);return a&&n.dataToPoint(a.getCenter())}},n}ze(t,e),t.prototype.getInitialData=function(e){for(var t=$M(this,{coordDimensions:["value"],encodeDefaulter:Xr(Kv,this)}),n=_o(),a=[],i=0,r=t.count();i<r;i++){var o=t.getName(i);n.set(o,!0)}return Ur(tD(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,(function(e){var t=e.name;n.get(t)||a.push(t)})),t.appendValues([],a),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,n){for(var a=this.getData(),i=this.getRawValue(e),r=a.getName(e),o=this.seriesGroup,s=[],l=0;l<o.length;l++){var p=o[l].originalData.indexOfName(r),c=a.mapDimension("value");isNaN(o[l].originalData.get(c,p))||s.push(o[l].name)}return Qx("section",{header:s.join(", "),noHeader:!s.length,blocks:[Qx("nameValue",{name:r,value:i})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",n=LS(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}(hw);var fD=Wo,yD=function(e){function t(t){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new hc,n._rawTransformable=new hc,n.name=t,n}return ze(t,e),t.prototype.setBoundingRect=function(e,t,n,a){return this._rect=new Ls(e,t,n,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,n,a){this._transformTo(e,t,n,a),this._viewRect=new Ls(e,t,n,a)},t.prototype._transformTo=function(e,t,n,a){var i=this.getBoundingRect(),r=this._rawTransformable;r.transform=i.calculateTransform(new Ls(e,t,n,a));var o=r.parent;r.parent=null,r.decomposeTransform(),r.parent=o,this._updateTransform()},t.prototype.setCenter=function(e,t){e&&(this._center=[$c(e[0],t.getWidth()),$c(e[1],t.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),a=this.getCenter(),i=this.getZoom();a=Wo([],a,e),n=Wo([],n,e),t.originX=a[0],t.originY=a[1],t.x=n[0]-a[0],t.y=n[1]-a[1],t.scaleX=t.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),Ss(this.transform||(this.transform=[]),t.transform||[1,0,0,1,0,0]),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Es(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,n=new hc;return n.transform=t.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,n){var a=t?this._rawTransform:this.transform;return n=n||[],a?fD(n,e,a):Oo(n,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?fD([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,n){var a=vD(t);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var a=vD(t);return a===this?a.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(hc);function vD(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var bD={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},xD=["lng","lat"],wD=function(e){function t(t,n,a){var i=e.call(this,t)||this;i.dimensions=xD,i.type="geo",i._nameCoordMap=_o(),i.map=n;var r,o=a.projection,s=tD(n,a.nameMap,a.nameProperty),l=eD(n),p=(i.resourceType=l?l.type:null,i.regions=s.regions),c=bD[l.type];if(i._regionsMap=s.regionsMap,i.regions=s.regions,i.projection=o,o)for(var d=0;d<p.length;d++){var u=p[d].getBoundingRect(o);(r=r||u.clone()).union(u)}else r=s.boundingRect;return i.setBoundingRect(r.x,r.y,r.width,r.height),i.aspectScale=o?1:uo(a.aspectScale,c.aspectScale),i._invertLongitute=!o&&c.invertLongitute,i}return ze(t,e),t.prototype._transformTo=function(e,t,n,a){var i=this.getBoundingRect(),r=this._invertLongitute;i=i.clone(),r&&(i.y=-i.y-i.height);var o=this._rawTransformable;o.transform=i.calculateTransform(new Ls(e,t,n,a));var s=o.parent;o.parent=null,o.decomposeTransform(),o.parent=s,r&&(o.scaleY=-o.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var t=this.regions,n=0;n<t.length;n++){var a=t[n];if("geoJSON"===a.type&&a.contain(e))return t[n]}},t.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},t.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},t.prototype.dataToPoint=function(e,t,n){if(Jr(e)&&(e=this.getGeoCoord(e)),e){var a=this.projection;return a&&(e=a.project(e)),e&&this.projectedToPoint(e,t,n)}},t.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(t){return e.prototype.pointToData.call(this,t)},t.prototype.projectedToPoint=function(t,n,a){return e.prototype.dataToPoint.call(this,t,n,a)},t.prototype.convertToPixel=function(e,t,n){var a=SD(t);return a===this?a.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var a=SD(t);return a===this?a.pointToData(n):null},t}(yD);function SD(e){var t=e.geoModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Rd).models[0]||{}).coordinateSystem:null}function CD(e,t){var n=e.get("boundingCoords");if(null!=n){var a=n[0],i=n[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])){var r=this.projection;if(r){var o=a[0],s=a[1],l=i[0],p=i[1];a=[1/0,1/0],i=[-1/0,-1/0];var c=function(e,t,n,o){for(var s=n-e,l=o-t,p=0;p<=100;p++){var c=p/100,d=r.project([e+s*c,t+l*c]);$o(a,a,d),Ko(i,i,d)}};c(o,s,l,s),c(l,s,l,p),c(l,p,o,p),c(o,p,l,s)}this.setBoundingRect(a[0],a[1],i[0]-a[0],i[1]-a[1])}else 0}var d,u,m,h=this.getBoundingRect(),g=e.get("layoutCenter"),f=e.get("layoutSize"),y=t.getWidth(),v=t.getHeight(),b=h.width/h.height*this.aspectScale,x=!1;if(g&&f&&(d=[$c(g[0],y),$c(g[1],v)],u=$c(f,Math.min(y,v)),isNaN(d[0])||isNaN(d[1])||isNaN(u)||(x=!0)),x)m={},b>1?(m.width=u,m.height=u/b):(m.height=u,m.width=u*b),m.y=d[1]-m.height/2,m.x=d[0]-m.width/2;else{var w=e.getBoxLayoutParams();w.aspect=b,m=Cv(w,{width:y,height:v})}this.setViewRect(m.x,m.y,m.width,m.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}Gr(wD,yD);var _D=function(){function e(){this.dimensions=xD}return e.prototype.create=function(e,t){var n=[];function a(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",(function(e,i){var r=e.get("map"),o=new wD(r+i,r,Nr({nameMap:e.get("nameMap")},a(e)));o.zoomLimit=e.get("scaleLimit"),n.push(o),e.coordinateSystem=o,o.model=e,o.resize=CD,o.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}}));var i={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}})),Ur(i,(function(e,i){var r=jr(e,(function(e){return e.get("nameMap")})),o=new wD(i,i,Nr({nameMap:Br(r)},a(e[0])));o.zoomLimit=co.apply(null,jr(e,(function(e){return e.get("scaleLimit")}))),n.push(o),o.resize=CD,o.resize(e[0],t),Ur(e,(function(e){e.coordinateSystem=o,function(e,t){Ur(t.get("geoCoord"),(function(t,n){e.addGeoCoord(n,t)}))}(o,e)}))})),n},e.prototype.getFilledRegions=function(e,t,n,a){for(var i=(e||[]).slice(),r=_o(),o=0;o<i.length;o++)r.set(i[o].name,i[o]);return Ur(tD(t,n,a).regions,(function(e){var t=e.name;!r.get(t)&&i.push({name:t})})),i},e}(),TD=new _D;!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(e,t,n){var a=eD(e.map);if(a&&"geoJSON"===a.type){var i=e.itemStyle=e.itemStyle||{};"color"in i||(i.color="#eee")}this.mergeDefaultAndTheme(e,n),xd(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=TD.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var n={};this._optionModelMap=Hr(t.regions||[],(function(t,a){var i=a.name;return i&&(t.set(i,new xy(a,e,e.ecModel)),a.selected&&(n[i]=!0)),t}),_o()),t.selectedMap||(t.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new xy(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,t){var n=this.getRegionModel(e),a="normal"===t?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),i={name:e};return Qr(a)?(i.status=t,a(i)):Jr(a)?a.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var t=this.option,n=t.selectedMode;n&&("multiple"!==n&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]}}(Pv);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.focusBlurEnabled=!0,n}ze(t,e),t.prototype.init=function(e,t){this._api=t},t.prototype.render=function(e,t,n,a){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new pD(n));var i=this._mapDraw;i.draw(e,t,n,this,a),i.group.on("click",this._handleRegionClick,this),i.group.silent=e.get("silent"),this.group.add(i.group),this.updateSelectStatus(e,t,n)},t.prototype._handleRegionClick=function(e){var t;IS(e.target,(function(e){return null!=(t=Zm(e).eventData)}),!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},t.prototype.updateSelectStatus=function(e,t,n){var a=this;this._mapDraw.group.traverse((function(e){var t=Zm(e).eventData;if(t)return a._model.isSelected(t.name)?n.enterSelect(e):n.leaveSelect(e),!0}))},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo"}(Sw);function ID(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}var ED=function(){this.parentPoint=[],this.childPoints=[]},MD=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ED},t.prototype.buildPath=function(e,t){var n=t.childPoints,a=n.length,i=t.parentPoint,r=n[0],o=n[a-1];if(1===a)return e.moveTo(i[0],i[1]),void e.lineTo(r[0],r[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,p=1-l,c=$c(t.forkPosition,1),d=[];d[l]=i[l],d[p]=i[p]+(o[p]-i[p])*c,e.moveTo(i[0],i[1]),e.lineTo(d[0],d[1]),e.moveTo(r[0],r[1]),d[l]=r[l],e.lineTo(d[0],d[1]),d[l]=o[l],e.lineTo(d[0],d[1]),e.lineTo(o[0],o[1]);for(var u=1;u<a-1;u++){var m=n[u];e.moveTo(m[0],m[1]),d[l]=m[l],e.lineTo(d[0],d[1])}},t}(Cm);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new Bc,n}ze(t,e),t.prototype.init=function(e,t){this._controller=new hP(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,n){var a=e.getData(),i=e.layoutInfo,r=this._mainGroup;"radial"===e.get("layout")?(r.x=i.x+i.width/2,r.y=i.y+i.height/2):(r.x=i.x,r.y=i.y),this._updateViewCoordSys(e,n),this._updateController(e,t,n);var o=this._data;a.diff(o).add((function(t){kD(a,t)&&PD(a,t,null,r,e)})).update((function(t,n){var i=o.getItemGraphicEl(n);kD(a,t)?PD(a,t,i,r,e):i&&AD(o,n,i,r,e)})).remove((function(t){var n=o.getItemGraphicEl(t);n&&AD(o,t,n,r,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&a.eachItemGraphicEl((function(t,a){t.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:a})}))})),this._data=a},t.prototype._updateViewCoordSys=function(e,t){var n=e.getData(),a=[];n.each((function(e){var t=n.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||a.push([+t.x,+t.y])}));var i=[],r=[];Ou(a,i,r);var o=this._min,s=this._max;r[0]-i[0]==0&&(i[0]=o?o[0]:i[0]-1,r[0]=s?s[0]:r[0]+1),r[1]-i[1]==0&&(i[1]=o?o[1]:i[1]-1,r[1]=s?s[1]:r[1]+1);var l=e.coordinateSystem=new yD;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),l.setCenter(e.get("center"),t),l.setZoom(e.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=i,this._max=r},t.prototype._updateController=function(e,t,n){var a=this,i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker((function(t,a,i){var r=o.getBoundingRect();return r.applyTransform(o.transform),r.contain(a,i)&&!SP(t,n,e)})),i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){vP(r,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){bP(r,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),a._updateNodeAndLinkScale(e),n.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),n=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(n)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,a=t.scaleX||1;return((t.getZoom()-1)*n+1)/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree"}(Iw);function kD(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function PD(e,t,n,a,i){var r=!n,o=e.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,p=!1===o.isExpand&&0!==o.children.length?l:"#fff",c=e.tree.root,d=o.parentNode===c?o:o.parentNode||o,u=e.getItemGraphicEl(d.dataIndex),m=d.getLayout(),h=u?{x:u.__oldX,y:u.__oldY,rawX:u.__radialOldRawX,rawY:u.__radialOldRawY}:m,g=o.getLayout();r?((n=new IE(e,t,null,{symbolInnerColor:p,useNameLabel:!0})).x=h.x,n.y=h.y):n.updateData(e,t,null,{symbolInnerColor:p,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,a.add(n),e.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,cf(n,{x:g.x,y:g.y},i);var f=n.getSymbolPath();if("radial"===i.get("layout")){var y=c.children[0],v=y.getLayout(),b=y.children.length,x=void 0,w=void 0;if(g.x===v.x&&!0===o.isExpand&&y.children.length){var S={x:(y.children[0].getLayout().x+y.children[b-1].getLayout().x)/2,y:(y.children[0].getLayout().y+y.children[b-1].getLayout().y)/2};(x=Math.atan2(S.y-v.y,S.x-v.x))<0&&(x=2*Math.PI+x),(w=S.x<v.x)&&(x-=Math.PI)}else(x=Math.atan2(g.y-v.y,g.x-v.x))<0&&(x=2*Math.PI+x),0===o.children.length||0!==o.children.length&&!1===o.isExpand?(w=g.x<v.x)&&(x-=Math.PI):(w=g.x>v.x)||(x-=Math.PI);var C=w?"left":"right",_=s.getModel("label"),T=_.get("rotate"),I=T*(Math.PI/180),E=f.getTextContent();E&&(f.setTextConfig({position:_.get("position")||C,rotation:null==T?-x:I,origin:"center"}),E.setStyle("verticalAlign","middle"))}var M=s.get(["emphasis","focus"]),k="relative"===M?To(o.getAncestorsIndices(),o.getDescendantIndices()):"ancestor"===M?o.getAncestorsIndices():"descendant"===M?o.getDescendantIndices():null;k&&(Zm(n).focus=k),function(e,t,n,a,i,r,o,s){var l=t.getModel(),p=e.get("edgeShape"),c=e.get("layout"),d=e.getOrient(),u=e.get(["lineStyle","curveness"]),m=e.get("edgeForkPosition"),h=l.getModel("lineStyle").getLineStyle(),g=a.__edge;if("curve"===p)t.parentNode&&t.parentNode!==n&&(g||(g=a.__edge=new Wg({shape:FD(c,d,u,i,i)})),cf(g,{shape:FD(c,d,u,r,o)},e));else if("polyline"===p)if("orthogonal"===c){if(t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var f=t.children,y=[],v=0;v<f.length;v++){var b=f[v].getLayout();y.push([b.x,b.y])}g||(g=a.__edge=new MD({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:m}})),cf(g,{shape:{parentPoint:[o.x,o.y],childPoints:y}},e)}}else 0;g&&("polyline"!==p||t.isExpand)&&(g.useStyle(Lr({strokeNoScale:!0,fill:null},h)),jh(g,l,"lineStyle"),Ch(g),s.add(g))}(i,o,c,n,h,m,g,a),n.__edge&&(n.onHoverStateChange=function(t){if("blur"!==t){var a=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);a&&1===a.hoverState||wh(n.__edge,t)}})}function DD(e,t,n,a,i){var r=OD(t.tree.root,e),o=r.source,s=r.sourceLayout,l=t.getItemGraphicEl(e.dataIndex);if(l){var p=t.getItemGraphicEl(o.dataIndex).__edge,c=l.__edge||(!1===o.isExpand||1===o.children.length?p:void 0),d=a.get("edgeShape"),u=a.get("layout"),m=a.get("orient"),h=a.get(["lineStyle","curveness"]);c&&("curve"===d?mf(c,{shape:FD(u,m,h,s,s),style:{opacity:0}},a,{cb:function(){n.remove(c)},removeOpt:i}):"polyline"===d&&"orthogonal"===a.get("layout")&&mf(c,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},a,{cb:function(){n.remove(c)},removeOpt:i}))}}function OD(e,t){for(var n,a=t.parentNode===e?t:t.parentNode||t;null==(n=a.getLayout());)a=a.parentNode===e?a:a.parentNode||a;return{source:a,sourceLayout:n}}function AD(e,t,n,a,i){var r=e.tree.getNodeByDataIndex(t),o=OD(e.tree.root,r).sourceLayout,s={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};mf(n,{x:o.x+1,y:o.y+1},i,{cb:function(){a.remove(n),e.setItemGraphicEl(t,null)},removeOpt:s}),n.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:s}),r.children.forEach((function(t){DD(t,e,a,i,s)})),DD(r,e,a,i,s)}function FD(e,t,n,a,i){var r,o,s,l,p,c,d,u;if("radial"===e){p=a.rawX,d=a.rawY,c=i.rawX,u=i.rawY;var m=ID(p,d),h=ID(p,d+(u-d)*n),g=ID(c,u+(d-u)*n),f=ID(c,u);return{x1:m.x||0,y1:m.y||0,x2:f.x||0,y2:f.y||0,cpx1:h.x||0,cpy1:h.y||0,cpx2:g.x||0,cpy2:g.y||0}}return p=a.x,d=a.y,c=i.x,u=i.y,"LR"!==t&&"RL"!==t||(r=p+(c-p)*n,o=d,s=c+(p-c)*n,l=u),"TB"!==t&&"BT"!==t||(r=p,o=d+(u-d)*n,s=c,l=u+(d-u)*n),{x1:p,y1:d,x2:c,y2:u,cpx1:r,cpy1:o,cpx2:s,cpy2:l}}var RD=Dd();function BD(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,zD(t,n,e),Ur(n,(function(n){Ur(t.TRANSFERABLE_METHODS,(function(t){n.wrapMethod(t,Xr(ND,e))}))})),t.wrapMethod("cloneShallow",Xr(VD,e)),Ur(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,Xr(LD,e))})),fo(n[t.dataType]===t)}function ND(e,t){if(RD(a=this).mainData===a){var n=Nr({},RD(this).datas);n[this.dataType]=t,zD(t,n,e)}else UD(t,this.dataType,RD(this).mainData,e);var a;return t}function LD(e,t){return e.struct&&e.struct.update(),t}function VD(e,t){return Ur(RD(t).datas,(function(n,a){n!==t&&UD(n.cloneShallow(),a,t,e)})),t}function qD(e){var t=RD(this).mainData;return null==e||null==t?t:RD(t).datas[e]}function GD(){var e=RD(this).mainData;return null==e?[{data:e}]:jr(Kr(RD(e).datas),(function(t){return{type:t,data:RD(e).datas[t]}}))}function zD(e,t,n){RD(e).datas={},Ur(t,(function(t,a){UD(t,a,e,n)}))}function UD(e,t,n,a){RD(n).datas[t]=e,RD(e).mainData=n,e.dataType=t,a.struct&&(e[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=e),e.getLinkedData=qD,e.getLinkedDataAll=GD}var jD=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,n){Qr(e)&&(n=t,t=e,e=null),Jr(e=e||{})&&(e={order:e});var a,i=e.order||"preorder",r=this[e.attr||"children"];"preorder"===i&&(a=t.call(n,this));for(var o=0;!a&&o<r.length;o++)r[o].eachNode(e,t,n);"postorder"===i&&t.call(n,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var a=this.children[n];a.updateDepthAndHeight(e+1),a.height>t&&(t=a.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].getNodeById(e);if(i)return i}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].contains(e);if(i)return i}},e.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode((function(t){e.push(t.dataIndex)})),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}(),HD=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,a=t.length;n<a;n++)t[n].dataIndex=-1;for(n=0,a=e.count();n<a;n++)t[e.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,n,a){var i=new e(n),r=[],o=1;!function e(t,n){var a=t.value;o=Math.max(o,Zr(a)?a.length:1),r.push(t);var s=new jD(Ed(t.name,""),i);n?function(e,t){var n=t.children;if(e.parentNode===t)return;n.push(e),e.parentNode=t}(s,n):i.root=s,i._nodes.push(s);var l=t.children;if(l)for(var p=0;p<l.length;p++)e(l[p],s)}(t),i.root.updateDepthAndHeight(0);var s=K_(r,{coordDimensions:["value"],dimensionsCount:o}).dimensions,l=new $_(s,n);return l.initData(r),a&&a(l),BD({mainData:l,struct:i,structAttr:"tree"}),i.update(),i},e}();function WD(e,t,n){if(e&&Vr(t,e.type)>=0){var a=n.getData().tree.root,i=e.targetNode;if(Jr(i)&&(i=a.getNodeById(i)),i&&a.contains(i))return{node:i};var r=e.targetNodeId;if(null!=r&&(i=a.getNodeById(r)))return{node:i}}}function $D(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function KD(e,t){return Vr($D(e),t)>=0}function YD(e,t){for(var n=[];e;){var a=e.dataIndex;n.push({name:e.name,dataIndex:a,value:t.getRawValue(a)}),e=e.parentNode}return n.reverse(),n}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}ze(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},n=e.leaves||{},a=new xy(n,this,this.ecModel),i=HD.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=i.getNodeByDataIndex(t);return n&&n.children.length&&n.isExpand||(e.parentModel=a),e}))}));var r=0;i.eachNode("preorder",(function(e){e.depth>r&&(r=e.depth)}));var o=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:r;return i.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=o})),i.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,n){for(var a=this.getData().tree,i=a.root.children[0],r=a.getNodeByDataIndex(e),o=r.getValue(),s=r.name;r&&r!==i;)s=r.parentNode.name+"."+s,r=r.parentNode;return Qx("nameValue",{name:s,value:o,noValue:isNaN(o)||null==o})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=YD(a,this),n.collapsed=!a.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500}}(hw);function XD(e){var t=e.getData().tree,n={};t.eachNode((function(t){for(var a=t;a&&a.depth>1;)a=a.parentNode;var i=rb(e.ecModel,a.name||a.dataIndex+"",n);t.setVisual("decal",i)}))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}ze(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};ZD(n);var a=e.levels||[],i=this.designatedVisualItemStyle={},r=new xy({itemStyle:i},this,t);a=e.levels=function(e,t){var n,a,i=bd(t.get("color")),r=bd(t.get(["aria","decal","decals"]));if(!i)return;e=e||[],Ur(e,(function(e){var t=new xy(e),i=t.get("color"),r=t.get("decal");(t.get(["itemStyle","color"])||i&&"none"!==i)&&(n=!0),(t.get(["itemStyle","decal"])||r&&"none"!==r)&&(a=!0)}));var o=e[0]||(e[0]={});n||(o.color=i.slice());!a&&r&&(o.decal=r.slice());return e}(a,t);var o=jr(a||[],(function(e){return new xy(e,r,t)}),this),s=HD.createTree(n,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=s.getNodeByDataIndex(t),a=n?o[n.depth]:null;return e.parentModel=a||r,e}))}));return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=this.getRawValue(e);return Qx("nameValue",{name:a.getName(e),value:i})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=YD(a,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},Nr(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=_o(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){XD(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]}}(hw);function ZD(e){var t=0;Ur(e.children,(function(e){ZD(e);var n=e.value;Zr(n)&&(n=n[0]),t+=n}));var n=e.value;Zr(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),Zr(e.value)?e.value[0]=n:e.value=n}var QD=function(){function e(e){this.group=new Bc,e.add(this.group)}return e.prototype.render=function(e,t,n,a){var i=e.getModel("breadcrumb"),r=this.group;if(r.removeAll(),i.get("show")&&n){var o=i.getModel("itemStyle"),s=i.getModel("emphasis"),l=o.getModel("textStyle"),p=s.getModel(["itemStyle","textStyle"]),c={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,c,l),this._renderContent(e,c,o,s,l,p,a),_v(r,c.pos,c.box)}},e.prototype._prepare=function(e,t,n){for(var a=e;a;a=a.parentNode){var i=Ed(a.getModel().get("name"),""),r=n.getTextRect(i),o=Math.max(r.width+16,t.emptyItemWidth);t.totalWidth+=o+8,t.renderList.push({node:a,text:i,width:o})}},e.prototype._renderContent=function(e,t,n,a,i,r,o){for(var s,l,p,c,d,u,m,h,g,f=0,y=t.emptyItemWidth,v=e.get(["breadcrumb","height"]),b=(s=t.pos,l=t.box,c=l.width,d=l.height,u=$c(s.left,c),m=$c(s.top,d),h=$c(s.right,c),g=$c(s.bottom,d),(isNaN(u)||isNaN(parseFloat(s.left)))&&(u=0),(isNaN(h)||isNaN(parseFloat(s.right)))&&(h=c),(isNaN(m)||isNaN(parseFloat(s.top)))&&(m=0),(isNaN(g)||isNaN(parseFloat(s.bottom)))&&(g=d),p=cv(p||0),{width:Math.max(h-u-p[1]-p[3],0),height:Math.max(g-m-p[0]-p[2],0)}),x=t.totalWidth,w=t.renderList,S=a.getModel("itemStyle").getItemStyle(),C=w.length-1;C>=0;C--){var _=w[C],T=_.node,I=_.width,E=_.text;x>b.width&&(x-=I-y,I=y,E=null);var M=new Ng({shape:{points:JD(f,0,I,v,C===w.length-1,0===C)},style:Lr(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Lm({style:Qf(i,{text:E})}),textConfig:{position:"inside"},z2:1e5,onclick:Xr(o,T)});M.disableLabelAnimation=!0,M.getTextContent().ensureState("emphasis").style=Qf(r,{text:E}),M.ensureState("emphasis").style=S,qh(M,a.get("focus"),a.get("blurScope"),a.get("disabled")),this.group.add(M),eO(M,e,T),f+=I+8}},e.prototype.remove=function(){this.group.removeAll()},e}();function JD(e,t,n,a,i,r){var o=[[i?e:e-5,t],[e+n,t],[e+n,t+a],[i?e:e-5,t+a]];return!r&&o.splice(2,0,[e+n+5,t+a/2]),!i&&o.push([e,t+a/2]),o}function eO(e,t,n){Zm(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&YD(n,t)}}var tO=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,n,a,i){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:a,easing:i}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},a=0,i=this._storage.length;a<i;a++){var r=this._storage[a];r.el.animateTo(r.target,{duration:r.duration,delay:r.delay,easing:r.easing,setToFinal:!0,done:n,aborted:n})}return this},e}();var nO=Bc,aO=Rm,iO="label",rO="upperLabel",oO=Xd([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),sO=function(e){var t=oO(e);return t.stroke=t.fill=t.lineWidth=null,t},lO=Dd();!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage={nodeGroup:[],background:[],content:[]},n}ze(t,e),t.prototype.render=function(e,t,n,a){if(!(Vr(t.findComponents({mainType:"series",subType:"treemap",query:a}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var i=WD(a,["treemapZoomToNode","treemapRootToNode"],e),r=a&&a.type,o=e.layoutInfo,s=!this._oldTree,l=this._storage,p="treemapRootToNode"===r&&i&&l?{rootNodeGroup:l.nodeGroup[i.node.getRawIndex()],direction:a.direction}:null,c=this._giveContainerGroup(o),d=e.get("animation"),u=this._doRender(c,e,p);!d||s||r&&"treemapZoomToNode"!==r&&"treemapRootToNode"!==r?u.renderFinally():this._doAnimation(c,u,e,p),this._resetController(n),this._renderBreadcrumb(e,n,i)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new nO,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,n){var a=t.getData().tree,i=this._oldTree,r={nodeGroup:[],background:[],content:[]},o={nodeGroup:[],background:[],content:[]},s=this._storage,l=[];function p(e,a,i,p){return function(e,t,n,a,i,r,o,s,l,p){if(!o)return;var c=o.getLayout(),d=e.getData(),u=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var m=c.width,h=c.height,g=c.borderWidth,f=c.invisible,y=o.getRawIndex(),v=s&&s.getRawIndex(),b=o.viewChildren,x=c.upperHeight,w=b&&b.length,S=u.getModel("itemStyle"),C=u.getModel(["emphasis","itemStyle"]),_=u.getModel(["blur","itemStyle"]),T=u.getModel(["select","itemStyle"]),I=S.get("borderRadius")||0,E=q("nodeGroup",nO);if(!E)return;if(l.add(E),E.x=c.x||0,E.y=c.y||0,E.markRedraw(),lO(E).nodeWidth=m,lO(E).nodeHeight=h,c.isAboveViewRoot)return E;var M=q("background",aO,p,20);M&&R(E,M,w&&c.upperLabelHeight);var k=u.getModel("emphasis"),P=k.get("focus"),D=k.get("blurScope"),O=k.get("disabled"),A="ancestor"===P?o.getAncestorsIndices():"descendant"===P?o.getDescendantIndices():P;if(w)Wh(E)&&Hh(E,!1),M&&(Hh(M,!O),d.setItemGraphicEl(o.dataIndex,M),Gh(M,A,D));else{var F=q("content",aO,p,30);F&&B(E,F),M.disableMorphing=!0,M&&Wh(M)&&Hh(M,!1),Hh(E,!O),d.setItemGraphicEl(o.dataIndex,E),Gh(E,A,D)}return E;function R(t,n,a){var i=Zm(n);if(i.dataIndex=o.dataIndex,i.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:m,height:h,r:I}),f)N(n);else{n.invisible=!1;var r=o.getVisual("style"),s=r.stroke,l=sO(S);l.fill=s;var p=oO(C);p.fill=C.get("borderColor");var c=oO(_);c.fill=_.get("borderColor");var d=oO(T);if(d.fill=T.get("borderColor"),a){var u=m-2*g;L(n,s,r.opacity,{x:g,y:0,width:u,height:x})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=p,n.ensureState("blur").style=c,n.ensureState("select").style=d,Ch(n)}t.add(n)}function B(t,n){var a=Zm(n);a.dataIndex=o.dataIndex,a.seriesIndex=e.seriesIndex;var i=Math.max(m-2*g,0),r=Math.max(h-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:i,height:r,r:I}),f)N(n);else{n.invisible=!1;var s=o.getVisual("style"),l=s.fill,p=sO(S);p.fill=l,p.decal=s.decal;var c=oO(C),d=oO(_),u=oO(T);L(n,l,s.opacity,null),n.setStyle(p),n.ensureState("emphasis").style=c,n.ensureState("blur").style=d,n.ensureState("select").style=u,Ch(n)}t.add(n)}function N(e){!e.invisible&&r.push(e)}function L(t,n,a,i){var r=u.getModel(i?rO:iO),s=Ed(u.get("name"),null),l=r.getShallow("show");Xf(t,Zf(u,i?rO:iO),{defaultText:l?s:null,inheritColor:n,defaultOpacity:a,labelFetcher:e,labelDataIndex:o.dataIndex});var p=t.getTextContent();if(p){var d=p.style,m=go(d.padding||0);i&&(t.setTextConfig({layoutRect:i}),p.disableLabelLayout=!0),p.beforeUpdate=function(){var e=Math.max((i?i.width:t.shape.width)-m[1]-m[3],0),n=Math.max((i?i.height:t.shape.height)-m[0]-m[2],0);d.width===e&&d.height===n||p.setStyle({width:e,height:n})},d.truncateMinChar=2,d.lineOverflow="truncate",V(d,i,c);var h=p.getState("emphasis");V(h?h.style:null,i,c)}}function V(t,n,a){var i=t?t.text:null;if(!n&&a.isLeafRoot&&null!=i){var r=e.get("drillDownIcon",!0);t.text=r?r+" "+i:i}}function q(e,a,r,o){var s=null!=v&&n[e][v],l=i[e];return s?(n[e][v]=null,G(l,s)):f||((s=new a)instanceof wu&&(s.z2=function(e,t){return 100*e+t}(r,o)),z(l,s)),t[e][y]=s}function G(e,t){var n=e[y]={};t instanceof nO?(n.oldX=t.x,n.oldY=t.y):n.oldShape=Nr({},t.shape)}function z(e,t){var n=e[y]={},r=o.parentNode,s=t instanceof Bc;if(r&&(!a||"drillDown"===a.direction)){var l=0,p=0,c=i.background[r.getRawIndex()];!a&&c&&c.oldShape&&(l=c.oldShape.width,p=c.oldShape.height),s?(n.oldX=0,n.oldY=p):n.oldShape={x:l,y:p,width:0,height:0}}n.fadein=!s}}(t,o,s,n,r,l,e,a,i,p)}!function e(t,n,a,i,r){i?(n=t,Ur(t,(function(e,t){!e.isRemoved()&&s(t,t)}))):new C_(n,t,o,o).add(s).update(s).remove(Xr(s,null)).execute();function o(e){return e.getId()}function s(o,s){var l=null!=o?t[o]:null,c=null!=s?n[s]:null,d=p(l,c,a,r);d&&e(l&&l.viewChildren||[],c&&c.viewChildren||[],d,i,r+1)}}(a.root?[a.root]:[],i&&i.root?[i.root]:[],e,a===i||!i,0);var c=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&Ur(e,(function(e,n){var a=t[n];Ur(e,(function(e){e&&(a.push(e),lO(e).willDelete=!0)}))})),t}(s);return this._oldTree=a,this._storage=o,{lastsForAnimation:r,willDeleteEls:c,renderFinally:function(){Ur(c,(function(e){Ur(e,(function(e){e.parent&&e.parent.remove(e)}))})),Ur(l,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,n,a){var i=n.get("animationDurationUpdate"),r=n.get("animationEasing"),o=(Qr(i)?0:i)||0,s=(Qr(r)?null:r)||"cubicOut",l=new tO;Ur(t.willDeleteEls,(function(e,t){Ur(e,(function(e,n){if(!e.invisible){var i,r=e.parent,p=lO(r);if(a&&"drillDown"===a.direction)i=r===a.rootNodeGroup?{shape:{x:0,y:0,width:p.nodeWidth,height:p.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,d=0;p.willDelete||(c=p.nodeWidth/2,d=p.nodeHeight/2),i="nodeGroup"===t?{x:c,y:d,style:{opacity:0}}:{shape:{x:c,y:d,width:0,height:0},style:{opacity:0}}}i&&l.add(e,i,o,0,s)}}))})),Ur(this._storage,(function(e,n){Ur(e,(function(e,a){var i=t.lastsForAnimation[n][a],r={};i&&(e instanceof Bc?null!=i.oldX&&(r.x=e.x,r.y=e.y,e.x=i.oldX,e.y=i.oldY):(i.oldShape&&(r.shape=Nr({},e.shape),e.setShape(i.oldShape)),i.fadein?(e.setStyle("opacity",0),r.style={opacity:1}):1!==e.style.opacity&&(r.style={opacity:1})),l.add(e,r,o,0,s))}))}),this),this._state="animating",l.finished(Yr((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new hP(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",Yr(this._onPan,this)),t.on("zoom",Yr(this._onZoom,this)));var n=new Ls(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,a){return n.contain(t,a)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var a=this.seriesModel.getData().tree.root;if(!a)return;var i=a.getLayout();if(!i)return;var r=new Ls(i.x,i.y,i.width,i.height),o=this.seriesModel.layoutInfo,s=[1,0,0,1,0,0];_s(s,s,[-(t-=o.x),-(n-=o.y)]),Is(s,s,[e.scale,e.scale]),_s(s,s,[t,n]),r.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var n=t.seriesModel.get("nodeClick",!0);if(n){var a=t.findTarget(e.offsetX,e.offsetY);if(a){var i=a.node;if(i.getLayout().isLeafRoot)t._rootToNode(a);else if("zoomToNode"===n)t._zoomToNode(a);else if("link"===n){var r=i.hostTree.data.getItemModel(i.dataIndex),o=r.get("link",!0),s=r.get("target",!0)||"blank";o&&yv(o,s)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,n){var a=this;n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(n={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new QD(this.group))).render(e,t,n.node,(function(t){"animating"!==a._state&&(KD(e.getViewRoot(),t)?a._rootToNode({node:t}):a._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(a){var i=this._storage.background[a.getRawIndex()];if(i){var r=i.transformCoordToLocal(e,t),o=i.shape;if(!(o.x<=r[0]&&r[0]<=o.x+o.width&&o.y<=r[1]&&r[1]<=o.y+o.height))return!1;n={node:a,offsetX:r[0],offsetY:r[1]}}}),this),n},t.type="treemap"}(Iw);var pO=Ur,cO=no,dO=-1,uO=function(){function e(t){var n=t.mappingMethod,a=t.type,i=this.option=Fr(t);this.type=a,this.mappingMethod=n,this._normalizeData=SO[n];var r=e.visualHandlers[a];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._normalizedToVisual=r._normalizedToVisual[n],"piecewise"===n?(mO(i),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,Ur(t,(function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(i)):"category"===n?i.categories?function(e){var t=e.categories,n=e.categoryMap={},a=e.visual;if(pO(t,(function(e,t){n[e]=t})),!Zr(a)){var i=[];no(a)?pO(a,(function(e,t){var a=n[t];i[null!=a?a:dO]=e})):i[-1]=a,a=wO(e,i)}for(var r=t.length-1;r>=0;r--)null==a[r]&&(delete n[t[r]],t.pop())}(i):mO(i,!0):(fo("linear"!==n||i.dataExtent),mO(i))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return Yr(this._normalizeData,this)},e.listVisualTypes=function(){return Kr(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,n){no(e)?Ur(e,t,n):t.call(n,e)},e.mapVisual=function(t,n,a){var i,r=Zr(t)?[]:no(t)?{}:(i=!0,null);return e.eachVisual(t,(function(e,t){var o=n.call(a,e,t);i?r=o:r[t]=o})),r},e.retrieveVisuals=function(t){var n,a={};return t&&pO(e.visualHandlers,(function(e,i){t.hasOwnProperty(i)&&(a[i]=t[i],n=!0)})),n?a:null},e.prepareVisualTypes=function(e){if(Zr(e))e=e.slice();else{if(!cO(e))return[];var t=[];pO(e,(function(e,n){t.push(n)})),e=t}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,n){for(var a,i=1/0,r=0,o=t.length;r<o;r++){var s=t[r].value;if(null!=s){if(s===e||Jr(s)&&s===e+"")return r;n&&d(s,r)}}for(r=0,o=t.length;r<o;r++){var l=t[r],p=l.interval,c=l.close;if(p){if(p[0]===-1/0){if(CO(c[1],e,p[1]))return r}else if(p[1]===1/0){if(CO(c[0],p[0],e))return r}else if(CO(c[0],p[0],e)&&CO(c[1],e,p[1]))return r;n&&d(p[0],r),n&&d(p[1],r)}}if(n)return e===1/0?t.length-1:e===-1/0?0:a;function d(t,n){var r=Math.abs(t-e);r<i&&(i=r,a=n)}},e.visualHandlers={color:{applyVisual:fO("color"),getColorMapper:function(){var e=this.option;return Yr("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),yO.call(this,e)}:function(t,n,a){var i=!!a;return!n&&(t=this._normalizeData(t)),a=Ql(t,e.parsedVisual,a),i?a:np(a,"rgba")},this)},_normalizedToVisual:{linear:function(e){return np(Ql(e,this.option.parsedVisual),"rgba")},category:yO,piecewise:function(e,t){var n=xO.call(this,t);return null==n&&(n=np(Ql(e,this.option.parsedVisual),"rgba")),n},fixed:vO}},colorHue:hO((function(e,t){return ep(e,t)})),colorSaturation:hO((function(e,t){return ep(e,null,t)})),colorLightness:hO((function(e,t){return ep(e,null,null,t)})),colorAlpha:hO((function(e,t){return tp(e,t)})),decal:{applyVisual:fO("decal"),_normalizedToVisual:{linear:null,category:yO,piecewise:null,fixed:null}},opacity:{applyVisual:fO("opacity"),_normalizedToVisual:bO([0,1])},liftZ:{applyVisual:fO("liftZ"),_normalizedToVisual:{linear:vO,category:vO,piecewise:vO,fixed:vO}},symbol:{applyVisual:function(e,t,n){n("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:gO,category:yO,piecewise:function(e,t){var n=xO.call(this,t);return null==n&&(n=gO.call(this,e)),n},fixed:vO}},symbolSize:{applyVisual:fO("symbolSize"),_normalizedToVisual:bO([0,1])}},e}();function mO(e,t){var n=e.visual,a=[];no(n)?pO(n,(function(e){a.push(e)})):null!=n&&a.push(n);t||1!==a.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(a[1]=a[0]),wO(e,a)}function hO(e){return{applyVisual:function(t,n,a){var i=this.mapValueToVisual(t);a("color",e(n("color"),i))},_normalizedToVisual:bO([0,1])}}function gO(e){var t=this.option.visual;return t[Math.round(Wc(e,[0,1],[0,t.length-1],!0))]||{}}function fO(e){return function(t,n,a){a(e,this.mapValueToVisual(t))}}function yO(e){var t=this.option.visual;return t[this.option.loop&&e!==dO?e%t.length:e]}function vO(){return this.option.visual[0]}function bO(e){return{linear:function(t){return Wc(t,e,this.option.visual,!0)},category:yO,piecewise:function(t,n){var a=xO.call(this,n);return null==a&&(a=Wc(t,e,this.option.visual,!0)),a},fixed:vO}}function xO(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var a=n[uO.findPieceIndex(e,n)];if(a&&a.visual)return a.visual[this.type]}}function wO(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=jr(t,(function(e){var t=Yl(e);return t||[0,0,0,1]}))),t}var SO={linear:function(e){return Wc(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=uO.findPieceIndex(e,t,!0);if(null!=n)return Wc(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?dO:t},fixed:ko};function CO(e,t,n){return e?t<=n:t<n}Dd();Math.max,Math.min;var _O="--\x3e",TO=function(e){return e.get("autoCurveness")||null},IO=function(e,t){var n=TO(e),a=20,i=[];if(to(n))a=n;else if(Zr(n))return void(e.__curvenessList=n);t>a&&(a=t);var r=a%2?a+2:a+3;i=[];for(var o=0;o<r;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=i},EO=function(e,t,n){var a=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[n.uid,a,i].join(_O)},MO=function(e){var t=e.split(_O);return[t[0],t[2],t[1]].join(_O)},kO=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function PO(e,t,n,a){var i=TO(t),r=Zr(i);if(!i)return null;var o=function(e,t){var n=EO(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===n){s=l;break}var p=function(e,t){return kO(EO(e.node1,e.node2,t),t)+kO(EO(e.node2,e.node1,t),t)}(e,t);IO(t,p),e.lineStyle=e.lineStyle||{};var c=EO(e.node1,e.node2,t),d=t.__curvenessList,u=r||p%2?0:1;if(o.isForward)return d[u+s];var m=MO(c),h=kO(m,t),g=d[s+h+u];return a?r?i&&0===i[0]?(h+u)%2?g:-g:((h%2?0:1)+u)%2?g:-g:(h+u)%2?g:-g:d[s+h+u]}function DO(e,t){e.eachEdge((function(e,n){var a=mo(e.getModel().get(["lineStyle","curveness"]),-PO(e,t,n,!0),0),i=Ao(e.node1.getLayout()),r=Ao(e.node2.getLayout()),o=[i,r];+a&&o.push([(i[0]+r[0])/2-(i[1]-r[1])*a,(i[1]+r[1])/2-(r[0]-i[0])*a]),e.setLayout(o)}))}function OO(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,a=t.scaleX;return((t.getZoom()-1)*n+1)/a}function AO(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var FO=Math.PI,RO=[];function BO(e,t,n,a){var i=e.coordinateSystem;if(!i||"view"===i.type){var r=i.getBoundingRect(),o=e.getData(),s=o.graph,l=r.width/2+r.x,p=r.height/2+r.y,c=Math.min(r.width,r.height)/2,d=o.count();if(o.setLayout({cx:l,cy:p}),d){if(n){var u=i.pointToData(a),m=u[0],h=u[1],g=[m-l,h-p];qo(g,g),Vo(g,g,c),n.setLayout([l+g[0],p+g[1]],!0),LO(n,e.get(["circular","rotateLabel"]),l,p)}NO[t](e,s,o,c,l,p,d),s.eachEdge((function(t,n){var a,i=mo(t.getModel().get(["lineStyle","curveness"]),PO(t,e,n),0),r=Ao(t.node1.getLayout()),o=Ao(t.node2.getLayout()),s=(r[0]+o[0])/2,c=(r[1]+o[1])/2;+i&&(a=[l*(i*=3)+s*(1-i),p*i+c*(1-i)]),t.setLayout([r,o,a])}))}}}var NO={value:function(e,t,n,a,i,r,o){var s=0,l=n.getSum("value"),p=2*Math.PI/(l||o);t.eachNode((function(e){var t=e.getValue("value"),n=p*(l?t:1)/2;s+=n,e.setLayout([a*Math.cos(s)+i,a*Math.sin(s)+r]),s+=n}))},symbolSize:function(e,t,n,a,i,r,o){var s=0;RO.length=o;var l=OO(e);t.eachNode((function(e){var t=AO(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var n=Math.asin(t/2/a);isNaN(n)&&(n=FO/2),RO[e.dataIndex]=n,s+=2*n}));var p=(2*FO-s)/o/2,c=0;t.eachNode((function(e){var t=p+RO[e.dataIndex];c+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([a*Math.cos(c)+i,a*Math.sin(c)+r]),c+=t}))}};function LO(e,t,n,a){var i=e.getGraphicEl();if(i){var r=e.getModel().get(["label","rotate"])||0,o=i.getSymbolPath();if(t){var s=e.getLayout(),l=Math.atan2(s[1]-a,s[0]-n);l<0&&(l=2*Math.PI+l);var p=s[0]<n;p&&(l-=Math.PI);var c=p?"left":"right";o.setTextConfig({rotation:-l,position:c,origin:"center"});var d=o.ensureState("emphasis");Nr(d.textConfig||(d.textConfig={}),{position:c})}else o.setTextConfig({rotation:r*=Math.PI/180})}}var VO=zg.prototype,qO=Wg.prototype,GO=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e)}(GO);function zO(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var UO=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-line",n}return ze(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new GO},t.prototype.buildPath=function(e,t){zO(t)?VO.buildPath.call(this,e,t):qO.buildPath.call(this,e,t)},t.prototype.pointAt=function(e){return zO(this.shape)?VO.pointAt.call(this,e):qO.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var t=this.shape,n=zO(t)?[t.x2-t.x1,t.y2-t.y1]:qO.tangentAt.call(this,e);return qo(n,n)},t}(Cm),jO=["fromSymbol","toSymbol"];function HO(e){return"_"+e+"Type"}function WO(e,t,n){var a=t.getItemVisual(n,e);if(!a||"none"===a)return a;var i=t.getItemVisual(n,e+"Size"),r=t.getItemVisual(n,e+"Rotate"),o=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=VS(i);return a+l+qS(o||0,l)+(r||"")+(s||"")}function $O(e,t,n){var a=t.getItemVisual(n,e);if(a&&"none"!==a){var i=t.getItemVisual(n,e+"Size"),r=t.getItemVisual(n,e+"Rotate"),o=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=VS(i),p=qS(o||0,l),c=LS(a,-l[0]/2+p[0],-l[1]/2+p[1],l[0],l[1],null,s);return c.__specifiedRotation=null==r||isNaN(r)?void 0:+r*Math.PI/180||0,c.name=e,c}}function KO(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var YO=function(e){function t(t,n,a){var i=e.call(this)||this;return i._createLine(t,n,a),i}return ze(t,e),t.prototype._createLine=function(e,t,n){var a=e.hostModel,i=function(e){var t=new UO({name:"line",subPixelOptimize:!0});return KO(t.shape,e),t}(e.getItemLayout(t));i.shape.percent=0,df(i,{shape:{percent:1}},a,t),this.add(i),Ur(jO,(function(n){var a=$O(n,e,t);this.add(a),this[HO(n)]=WO(n,e,t)}),this),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var a=e.hostModel,i=this.childOfName("line"),r=e.getItemLayout(t),o={shape:{}};KO(o.shape,r),cf(i,o,a,t),Ur(jO,(function(n){var a=WO(n,e,t),i=HO(n);if(this[i]!==a){this.remove(this.childOfName(n));var r=$O(n,e,t);this.add(r)}this[i]=a}),this),this._updateCommonStl(e,t,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,t,n){var a=e.hostModel,i=this.childOfName("line"),r=n&&n.emphasisLineStyle,o=n&&n.blurLineStyle,s=n&&n.selectLineStyle,l=n&&n.labelStatesModels,p=n&&n.emphasisDisabled,c=n&&n.focus,d=n&&n.blurScope;if(!n||e.hasItemOption){var u=e.getItemModel(t),m=u.getModel("emphasis");r=m.getModel("lineStyle").getLineStyle(),o=u.getModel(["blur","lineStyle"]).getLineStyle(),s=u.getModel(["select","lineStyle"]).getLineStyle(),p=m.get("disabled"),c=m.get("focus"),d=m.get("blurScope"),l=Zf(u)}var h=e.getItemVisual(t,"style"),g=h.stroke;i.useStyle(h),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=r,i.ensureState("blur").style=o,i.ensureState("select").style=s,Ur(jO,(function(e){var t=this.childOfName(e);if(t){t.setColor(g),t.style.opacity=h.opacity;for(var n=0;n<ah.length;n++){var a=ah[n],r=i.getState(a);if(r){var o=r.style||{},s=t.ensureState(a),l=s.style||(s.style={});null!=o.stroke&&(l[t.__isEmptyBrush?"stroke":"fill"]=o.stroke),null!=o.opacity&&(l.opacity=o.opacity)}}t.markRedraw()}}),this);var f=a.getRawValue(t);Xf(this,l,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,n){return a.getFormattedLabel(t,n,e.dataType)}},inheritColor:g||"#000",defaultOpacity:h.opacity,defaultText:(null==f?e.getName(t):isFinite(f)?Kc(f):f)+""});var y=this.getTextContent();if(y){var v=l.normal;y.__align=y.style.align,y.__verticalAlign=y.style.verticalAlign,y.__position=v.get("position")||"middle";var b=v.get("distance");Zr(b)||(b=[b,b]),y.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),qh(this,c,d,p)},t.prototype.highlight=function(){Ih(this)},t.prototype.downplay=function(){Eh(this)},t.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},t.prototype.setLinePoints=function(e){var t=this.childOfName("line");KO(t.shape,e),t.dirty()},t.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),a=e.getTextContent();if(t||n||a&&!a.ignore){for(var i=1,r=this.parent;r;)r.scaleX&&(i/=r.scaleX),r=r.parent;var o=e.childOfName("line");if(this.__dirty||o.__dirty){var s=o.shape.percent,l=o.pointAt(0),p=o.pointAt(s),c=Bo([],p,l);if(qo(c,c),t&&(t.setPosition(l),C(t,0),t.scaleX=t.scaleY=i*s,t.markRedraw()),n&&(n.setPosition(p),C(n,1),n.scaleX=n.scaleY=i*s,n.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var d=void 0,u=void 0,m=a.__labelDistance,h=m[0]*i,g=m[1]*i,f=s/2,y=o.tangentAt(f),v=[y[1],-y[0]],b=o.pointAt(f);v[1]>0&&(v[0]=-v[0],v[1]=-v[1]);var x=y[0]<0?-1:1;if("start"!==a.__position&&"end"!==a.__position){var w=-Math.atan2(y[1],y[0]);p[0]<l[0]&&(w=Math.PI+w),a.rotation=w}var S=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":S=-g,u="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":S=g,u="top";break;default:S=0,u="middle"}switch(a.__position){case"end":a.x=c[0]*h+p[0],a.y=c[1]*g+p[1],d=c[0]>.8?"left":c[0]<-.8?"right":"center",u=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":a.x=-c[0]*h+l[0],a.y=-c[1]*g+l[1],d=c[0]>.8?"right":c[0]<-.8?"left":"center",u=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=h*x+l[0],a.y=l[1]+S,d=y[0]<0?"right":"left",a.originX=-h*x,a.originY=-S;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=b[0],a.y=b[1]+S,d="center",a.originY=-S;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-h*x+p[0],a.y=p[1]+S,d=y[0]>=0?"right":"left",a.originX=h*x,a.originY=-S}a.scaleX=a.scaleY=i,a.setStyle({verticalAlign:a.__verticalAlign||u,align:a.__align||d})}}}function C(e,t){var n=e.__specifiedRotation;if(null==n){var a=o.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(a[1],a[0]))}else e.attr("rotation",n)}},t}(Bc),XO=function(){function e(e){this.group=new Bc,this._LineCtor=e||YO}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,a=n.group,i=n._lineData;n._lineData=e,i||a.removeAll();var r=ZO(e);e.diff(i).add((function(n){t._doAdd(e,n,r)})).update((function(n,a){t._doUpdate(i,e,a,n,r)})).remove((function(e){a.remove(i.getItemGraphicEl(e))})).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,n){t.updateLayout(e,n)}),this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=ZO(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var a=e.start;a<e.end;a++){if(JO(t.getItemLayout(a))){var i=new this._LineCtor(t,a,this._seriesScope);i.traverse(n),this.group.add(i),t.setItemGraphicEl(a,i),this._progressiveEls.push(i)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,n){if(JO(e.getItemLayout(t))){var a=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,a),this.group.add(a)}},e.prototype._doUpdate=function(e,t,n,a,i){var r=e.getItemGraphicEl(n);JO(t.getItemLayout(a))?(r?r.updateData(t,a,i):r=new this._LineCtor(t,a,i),t.setItemGraphicEl(a,r),this.group.add(r)):this.group.remove(r)},e}();function ZO(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:Zf(t)}}function QO(e){return isNaN(e[0])||isNaN(e[1])}function JO(e){return e&&!QO(e[0])&&!QO(e[1])}var eA=[],tA=[],nA=[],aA=Tl,iA=jo,rA=Math.abs;function oA(e,t,n){for(var a,i=e[0],r=e[1],o=e[2],s=1/0,l=n*n,p=.1,c=.1;c<=.9;c+=.1){eA[0]=aA(i[0],r[0],o[0],c),eA[1]=aA(i[1],r[1],o[1],c),(m=rA(iA(eA,t)-l))<s&&(s=m,a=c)}for(var d=0;d<32;d++){var u=a+p;tA[0]=aA(i[0],r[0],o[0],a),tA[1]=aA(i[1],r[1],o[1],a),nA[0]=aA(i[0],r[0],o[0],u),nA[1]=aA(i[1],r[1],o[1],u);var m=iA(tA,t)-l;if(rA(m)<.01)break;var h=iA(nA,t)-l;p/=2,m<0?h>=0?a+=p:a-=p:h>=0?a-=p:a+=p}return a}function sA(e,t){var n=[],a=Ml,i=[[],[],[]],r=[[],[]],o=[];t/=2,e.eachEdge((function(e,s){var l=e.getLayout(),p=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");l.__original||(l.__original=[Ao(l[0]),Ao(l[1])],l[2]&&l.__original.push(Ao(l[2])));var d=l.__original;if(null!=l[2]){if(Oo(i[0],d[0]),Oo(i[1],d[2]),Oo(i[2],d[1]),p&&"none"!==p){var u=AO(e.node1),m=oA(i,d[0],u*t);a(i[0][0],i[1][0],i[2][0],m,n),i[0][0]=n[3],i[1][0]=n[4],a(i[0][1],i[1][1],i[2][1],m,n),i[0][1]=n[3],i[1][1]=n[4]}if(c&&"none"!==c){u=AO(e.node2),m=oA(i,d[1],u*t);a(i[0][0],i[1][0],i[2][0],m,n),i[1][0]=n[1],i[2][0]=n[2],a(i[0][1],i[1][1],i[2][1],m,n),i[1][1]=n[1],i[2][1]=n[2]}Oo(l[0],i[0]),Oo(l[1],i[2]),Oo(l[2],i[1])}else{if(Oo(r[0],d[0]),Oo(r[1],d[1]),Bo(o,r[1],r[0]),qo(o,o),p&&"none"!==p){u=AO(e.node1);Ro(r[0],r[0],o,u*t)}if(c&&"none"!==c){u=AO(e.node2);Ro(r[1],r[1],o,-u*t)}Oo(l[0],r[0]),Oo(l[1],r[1])}}))}function lA(e){return"view"===e.type}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(e,t){var n=new DE,a=new XO,i=this.group;this._controller=new hP(t.getZr()),this._controllerHost={target:i},i.add(n.group),i.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(e,t,n){var a=this,i=e.coordinateSystem;this._model=e;var r=this._symbolDraw,o=this._lineDraw,s=this.group;if(lA(i)){var l={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?s.attr(l):cf(s,l,e)}sA(e.getGraph(),OO(e));var p=e.getData();r.updateData(p);var c=e.getEdgeData();o.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var d=e.forceLayout,u=e.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,u);var m=e.get("layout");p.graph.eachNode((function(t){var n=t.dataIndex,i=t.getGraphicEl(),r=t.getModel();if(i){i.off("drag").off("dragend");var o=r.get("draggable");o&&i.on("drag",(function(r){switch(m){case"force":d.warmUp(),!a._layouting&&a._startForceLayoutIteration(d,u),d.setFixed(n),p.setItemLayout(n,[i.x,i.y]);break;case"circular":p.setItemLayout(n,[i.x,i.y]),t.setLayout({fixed:!0},!0),BO(e,"symbolSize",t,[r.offsetX,r.offsetY]),a.updateLayout(e);break;default:p.setItemLayout(n,[i.x,i.y]),DO(e.getGraph(),e),a.updateLayout(e)}})).on("dragend",(function(){d&&d.setUnfixed(n)})),i.setDraggable(o,!!r.get("cursor")),"adjacency"===r.get(["emphasis","focus"])&&(Zm(i).focus=t.getAdjacentDataIndices())}})),p.graph.eachEdge((function(e){var t=e.getGraphicEl(),n=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===n&&(Zm(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var h="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),g=p.getLayout("cx"),f=p.getLayout("cy");p.graph.eachNode((function(e){LO(e,h,g,f)})),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var n=this;!function a(){e.step((function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(a,16):a())}))}()},t.prototype._updateController=function(e,t,n){var a=this,i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker((function(t,a,i){var r=o.getBoundingRect();return r.applyTransform(o.transform),r.contain(a,i)&&!SP(t,n,e)})),lA(e.coordinateSystem)?(i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){vP(r,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){bP(r,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),a._updateNodeAndLinkScale(),sA(e.getGraph(),OO(e)),a._lineDraw.updateLayout(),n.updateLabelLayout()}))):i.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=OO(e);t.eachItemGraphicEl((function(e,t){e&&e.setSymbolScale(n)}))},t.prototype.updateLayout=function(e){sA(e.getGraph(),OO(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph"}(Iw);function pA(e){return"_EC_"+e}var cA=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[pA(e)]){var a=new dA(e,t);return a.hostGraph=this,this.nodes.push(a),n[pA(e)]=a,a}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[pA(e)]},e.prototype.addEdge=function(e,t,n){var a=this._nodesMap,i=this._edgesMap;if(to(e)&&(e=this.nodes[e]),to(t)&&(t=this.nodes[t]),e instanceof dA||(e=a[pA(e)]),t instanceof dA||(t=a[pA(t)]),e&&t){var r=e.id+"-"+t.id,o=new uA(e,t,n);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),i[r]=o,o}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof dA&&(e=e.id),t instanceof dA&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},e.prototype.breadthFirstTraverse=function(e,t,n,a){if(t instanceof dA||(t=this._nodesMap[pA(t)]),t){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!e.call(a,t,null))for(var o=[t];o.length;){var s=o.shift(),l=s[i];for(r=0;r<l.length;r++){var p=l[r],c=p.node1===s?p.node2:p.node1;if(!c.__visited){if(e.call(a,c,s))return;o.push(c),c.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,a=this.edges,i=0,r=n.length;i<r;i++)n[i].dataIndex=-1;for(i=0,r=e.count();i<r;i++)n[e.getRawIndex(i)].dataIndex=i;t.filterSelf((function(e){var n=a[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}));for(i=0,r=a.length;i<r;i++)a[i].dataIndex=-1;for(i=0,r=t.count();i<r;i++)a[t.getRawIndex(i)].dataIndex=i},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,a=this.edges,i=0;i<n.length;i++)t.addNode(n[i].id,n[i].dataIndex);for(i=0;i<a.length;i++){var r=a[i];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},e}(),dA=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=_o(),t=_o(),n=0;n<this.edges.length;n++){var a=this.edges[n];if(!(a.dataIndex<0)){e.set(a.dataIndex,!0);for(var i=[a.node1],r=[a.node2],o=0;o<i.length;){var s=i[o];o++,t.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)e.set(s.inEdges[l].dataIndex,!0),i.push(s.inEdges[l].node1)}for(o=0;o<r.length;){var p=r[o];o++,t.set(p.dataIndex,!0);for(l=0;l<p.outEdges.length;l++)e.set(p.outEdges[l].dataIndex,!0),r.push(p.outEdges[l].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),uA=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=_o(),t=_o();e.set(this.dataIndex,!0);for(var n=[this.node1],a=[this.node2],i=0;i<n.length;){var r=n[i];i++,t.set(r.dataIndex,!0);for(var o=0;o<r.inEdges.length;o++)e.set(r.inEdges[o].dataIndex,!0),n.push(r.inEdges[o].node1)}for(i=0;i<a.length;){var s=a[i];i++,t.set(s.dataIndex,!0);for(o=0;o<s.outEdges.length;o++)e.set(s.outEdges[o].dataIndex,!0),a.push(s.outEdges[o].node2)}return{edge:e.keys(),node:t.keys()}},e}();function mA(e,t){return{getValue:function(n){var a=this[e][t];return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,a){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,a)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,a){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,a)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function hA(e,t,n,a,i){for(var r=new cA(a),o=0;o<e.length;o++)r.addNode(co(e[o].id,e[o].name,o),o);var s=[],l=[],p=0;for(o=0;o<t.length;o++){var c=t[o],d=c.source,u=c.target;r.addEdge(d,u,p)&&(l.push(c),s.push(co(Ed(c.id,null),d+" > "+u)),p++)}var m,h=n.get("coordinateSystem");if("cartesian2d"===h||"polar"===h)m=nT(e,n);else{var g=gb.get(h),f=g&&g.dimensions||[];Vr(f,"value")<0&&f.concat(["value"]);var y=K_(e,{coordDimensions:f,encodeDefine:n.getEncode()}).dimensions;(m=new $_(y,n)).initData(e)}var v=new $_(["value"],n);return v.initData(l,s),i&&i(m,v),BD({mainData:m,struct:r,structAttr:"graph",datas:{node:m,edge:v},datasAttr:{node:"data",edge:"edgeData"}}),r.update(),r}Gr(dA,mA("hostGraph","data")),Gr(uA,mA("hostGraph","edgeData"));!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}ze(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var n=this;function a(){return n._categoriesData}this.legendVisualProvider=new KM(a,a),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),xd(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var n,a=e.edges||e.links||[],i=e.data||e.nodes||[],r=this;if(i&&a){TO(n=this)&&(n.__curvenessList=[],n.__edgeMap={},IO(n));var o=hA(i,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=r._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var n=xy.prototype.getModel;function a(e,t){var a=n.call(this,e,t);return a.resolveParentPath=i,a}function i(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=i,e.getModel=a,e}))}));return Ur(o.edges,(function(e){!function(e,t,n,a){if(TO(n)){var i=EO(e,t,n),r=n.__edgeMap,o=r[MO(i)];r[i]&&!o?r[i].isForward=!0:o&&r[i]&&(o.isForward=!0,r[i].isForward=!1),r[i]=r[i]||[],r[i].push(a)}}(e.node1,e.node2,this,e.dataIndex)}),this),o.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,n){if("edge"===n){var a=this.getData(),i=this.getDataParams(e,n),r=a.graph.getEdgeByIndex(e),o=a.getName(r.node1.dataIndex),s=a.getName(r.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),Qx("nameValue",{name:l.join(" > "),value:i.value,noValue:null==i.value})}return cw({series:this,dataIndex:e,multipleSeries:t})},t.prototype._updateCategoriesData=function(){var e=jr(this.option.categories||[],(function(e){return null!=e.value?e:Nr({value:0},e)})),t=new $_(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}}}(hw);var gA=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},fA=function(e){function t(t){var n=e.call(this,t)||this;return n.type="pointer",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new gA},t.prototype.buildPath=function(e,t){var n=Math.cos,a=Math.sin,i=t.r,r=t.width,o=t.angle,s=t.x-n(o)*r*(r>=i/3?1:2),l=t.y-a(o)*r*(r>=i/3?1:2);o=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(o)*r,t.y+a(o)*r),e.lineTo(t.x+n(t.angle)*i,t.y+a(t.angle)*i),e.lineTo(t.x-n(o)*r,t.y-a(o)*r),e.lineTo(s,l)},t}(Cm);function yA(e,t){var n=null==e?"":e+"";return t&&(Jr(t)?n=t.replace("{value}",n):Qr(t)&&(n=t(e))),n}(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){this.group.removeAll();var a=e.get(["axisLine","lineStyle","color"]),i=function(e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight(),r=Math.min(a,i);return{cx:$c(n[0],t.getWidth()),cy:$c(n[1],t.getHeight()),r:$c(e.get("radius"),r/2)}}(e,n);this._renderMain(e,t,n,a,i),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,n,a,i){var r=this.group,o=e.get("clockwise"),s=-e.get("startAngle")/180*Math.PI,l=-e.get("endAngle")/180*Math.PI,p=e.getModel("axisLine"),c=p.get("roundCap")?dM:Og,d=p.get("show"),u=p.getModel("lineStyle"),m=u.get("width"),h=[s,l];nm(h,!o);for(var g=(l=h[1])-(s=h[0]),f=s,y=[],v=0;d&&v<a.length;v++){var b=new c({shape:{startAngle:f,endAngle:l=s+g*Math.min(Math.max(a[v][0],0),1),cx:i.cx,cy:i.cy,clockwise:o,r0:i.r-m,r:i.r},silent:!0});b.setStyle({fill:a[v][1]}),b.setStyle(u.getLineStyle(["color","width"])),y.push(b),f=l}y.reverse(),Ur(y,(function(e){return r.add(e)}));var x=function(e){if(e<=0)return a[0][1];var t;for(t=0;t<a.length;t++)if(a[t][0]>=e&&(0===t?0:a[t-1][0])<e)return a[t][1];return a[t-1][1]};this._renderTicks(e,t,n,x,i,s,l,o,m),this._renderTitleAndDetail(e,t,n,x,i),this._renderAnchor(e,i),this._renderPointer(e,t,n,x,i,s,l,o,m)},t.prototype._renderTicks=function(e,t,n,a,i,r,o,s,l){for(var p,c,d=this.group,u=i.cx,m=i.cy,h=i.r,g=+e.get("min"),f=+e.get("max"),y=e.getModel("splitLine"),v=e.getModel("axisTick"),b=e.getModel("axisLabel"),x=e.get("splitNumber"),w=v.get("splitNumber"),S=$c(y.get("length"),h),C=$c(v.get("length"),h),_=r,T=(o-r)/x,I=T/w,E=y.getModel("lineStyle").getLineStyle(),M=v.getModel("lineStyle").getLineStyle(),k=y.get("distance"),P=0;P<=x;P++){if(p=Math.cos(_),c=Math.sin(_),y.get("show")){var D=new zg({shape:{x1:p*(h-(O=k?k+l:l))+u,y1:c*(h-O)+m,x2:p*(h-S-O)+u,y2:c*(h-S-O)+m},style:E,silent:!0});"auto"===E.stroke&&D.setStyle({stroke:a(P/x)}),d.add(D)}if(b.get("show")){var O=b.get("distance")+k,A=yA(Kc(P/x*(f-g)+g),b.get("formatter")),F=a(P/x),R=p*(h-S-O)+u,B=c*(h-S-O)+m,N=b.get("rotate"),L=0;"radial"===N?(L=-_+2*Math.PI)>Math.PI/2&&(L+=Math.PI):"tangential"===N?L=-_-Math.PI/2:to(N)&&(L=N*Math.PI/180),0===L?d.add(new Lm({style:Qf(b,{text:A,x:R,y:B,verticalAlign:c<-.8?"top":c>.8?"bottom":"middle",align:p<-.4?"left":p>.4?"right":"center"},{inheritColor:F}),silent:!0})):d.add(new Lm({style:Qf(b,{text:A,x:R,y:B,verticalAlign:"middle",align:"center"},{inheritColor:F}),silent:!0,originX:R,originY:B,rotation:L}))}if(v.get("show")&&P!==x){O=(O=v.get("distance"))?O+l:l;for(var V=0;V<=w;V++){p=Math.cos(_),c=Math.sin(_);var q=new zg({shape:{x1:p*(h-O)+u,y1:c*(h-O)+m,x2:p*(h-C-O)+u,y2:c*(h-C-O)+m},silent:!0,style:M});"auto"===M.stroke&&q.setStyle({stroke:a((P+V/w)/x)}),d.add(q),_+=I}_-=I}else _+=T}},t.prototype._renderPointer=function(e,t,n,a,i,r,o,s,l){var p=this.group,c=this._data,d=this._progressEls,u=[],m=e.get(["pointer","show"]),h=e.getModel("progress"),g=h.get("show"),f=e.getData(),y=f.mapDimension("value"),v=+e.get("min"),b=+e.get("max"),x=[v,b],w=[r,o];function S(t,n){var a,r=f.getItemModel(t).getModel("pointer"),o=$c(r.get("width"),i.r),s=$c(r.get("length"),i.r),l=e.get(["pointer","icon"]),p=r.get("offsetCenter"),c=$c(p[0],i.r),d=$c(p[1],i.r),u=r.get("keepAspect");return(a=l?LS(l,c-o/2,d-s,o,s,null,u):new fA({shape:{angle:-Math.PI/2,width:o,r:s,x:c,y:d}})).rotation=-(n+Math.PI/2),a.x=i.cx,a.y=i.cy,a}function C(e,t){var n=h.get("roundCap")?dM:Og,a=h.get("overlap"),o=a?h.get("width"):l/f.count(),p=a?i.r-o:i.r-(e+1)*o,c=a?i.r:i.r-e*o,d=new n({shape:{startAngle:r,endAngle:t,cx:i.cx,cy:i.cy,clockwise:s,r0:p,r:c}});return a&&(d.z2=b-f.get(y,e)%b),d}(g||m)&&(f.diff(c).add((function(t){var n=f.get(y,t);if(m){var a=S(t,r);df(a,{rotation:-((isNaN(+n)?w[0]:Wc(n,x,w,!0))+Math.PI/2)},e),p.add(a),f.setItemGraphicEl(t,a)}if(g){var i=C(t,r),o=h.get("clip");df(i,{shape:{endAngle:Wc(n,x,w,o)}},e),p.add(i),Qm(e.seriesIndex,f.dataType,t,i),u[t]=i}})).update((function(t,n){var a=f.get(y,t);if(m){var i=c.getItemGraphicEl(n),o=i?i.rotation:r,s=S(t,o);s.rotation=o,cf(s,{rotation:-((isNaN(+a)?w[0]:Wc(a,x,w,!0))+Math.PI/2)},e),p.add(s),f.setItemGraphicEl(t,s)}if(g){var l=d[n],v=C(t,l?l.shape.endAngle:r),b=h.get("clip");cf(v,{shape:{endAngle:Wc(a,x,w,b)}},e),p.add(v),Qm(e.seriesIndex,f.dataType,t,v),u[t]=v}})).execute(),f.each((function(e){var t=f.getItemModel(e),n=t.getModel("emphasis"),i=n.get("focus"),r=n.get("blurScope"),o=n.get("disabled");if(m){var s=f.getItemGraphicEl(e),l=f.getItemVisual(e,"style"),p=l.fill;if(s instanceof Mm){var c=s.style;s.useStyle(Nr({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(p);s.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",a(Wc(f.get(y,e),x,[0,1],!0))),s.z2EmphasisLift=0,jh(s,t),qh(s,i,r,o)}if(g){var d=u[e];d.useStyle(f.getItemVisual(e,"style")),d.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),d.z2EmphasisLift=0,jh(d,t),qh(d,i,r,o)}})),this._progressEls=u)},t.prototype._renderAnchor=function(e,t){var n=e.getModel("anchor");if(n.get("show")){var a=n.get("size"),i=n.get("icon"),r=n.get("offsetCenter"),o=n.get("keepAspect"),s=LS(i,t.cx-a/2+$c(r[0],t.r),t.cy-a/2+$c(r[1],t.r),a,a,null,o);s.z2=n.get("showAbove")?1:0,s.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(s)}},t.prototype._renderTitleAndDetail=function(e,t,n,a,i){var r=this,o=e.getData(),s=o.mapDimension("value"),l=+e.get("min"),p=+e.get("max"),c=new Bc,d=[],u=[],m=e.isAnimationEnabled(),h=e.get(["pointer","showAbove"]);o.diff(this._data).add((function(e){d[e]=new Lm({silent:!0}),u[e]=new Lm({silent:!0})})).update((function(e,t){d[e]=r._titleEls[t],u[e]=r._detailEls[t]})).execute(),o.each((function(t){var n=o.getItemModel(t),r=o.get(s,t),g=new Bc,f=a(Wc(r,[l,p],[0,1],!0)),y=n.getModel("title");if(y.get("show")){var v=y.get("offsetCenter"),b=i.cx+$c(v[0],i.r),x=i.cy+$c(v[1],i.r);(M=d[t]).attr({z2:h?0:2,style:Qf(y,{x:b,y:x,text:o.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:f})}),g.add(M)}var w=n.getModel("detail");if(w.get("show")){var S=w.get("offsetCenter"),C=i.cx+$c(S[0],i.r),_=i.cy+$c(S[1],i.r),T=$c(w.get("width"),i.r),I=$c(w.get("height"),i.r),E=e.get(["progress","show"])?o.getItemVisual(t,"style").fill:f,M=u[t],k=w.get("formatter");M.attr({z2:h?0:2,style:Qf(w,{x:C,y:_,text:yA(r,k),width:isNaN(T)?null:T,height:isNaN(I)?null:I,align:"center",verticalAlign:"middle"},{inheritColor:E})}),oy(M,{normal:w},r,(function(e){return yA(e,k)})),m&&sy(M,t,o,e,{getFormattedLabel:function(e,t,n,a,i,o){return yA(o?o.interpolatedValue:r,k)}}),g.add(M)}c.add(g)})),this.group.add(c),this._titleEls=d,this._detailEls=u},t.type="gauge"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}ze(t,e),t.prototype.getInitialData=function(e,t){return $M(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}}}(hw);var vA=["itemStyle","opacity"],bA=function(e){function t(t,n){var a=e.call(this)||this,i=a,r=new Vg,o=new Lm;return i.setTextContent(o),a.setTextGuideLine(r),a.updateData(t,n,!0),a}return ze(t,e),t.prototype.updateData=function(e,t,n){var a=this,i=e.hostModel,r=e.getItemModel(t),o=e.getItemLayout(t),s=r.getModel("emphasis"),l=r.get(vA);l=null==l?1:l,n||ff(a),a.useStyle(e.getItemVisual(t,"style")),a.style.lineJoin="round",n?(a.setShape({points:o.points}),a.style.opacity=0,df(a,{style:{opacity:l}},i,t)):cf(a,{style:{opacity:l},shape:{points:o.points}},i,t),jh(a,r),this._updateLabel(e,t),qh(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e,t){var n=this,a=this.getTextGuideLine(),i=n.getTextContent(),r=e.hostModel,o=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"style"),p=l.fill;Xf(i,Zf(o),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:l.opacity,defaultText:e.getName(t)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:p,outsideFill:p});var c=s.linePoints;a.setShape({points:c}),n.textGuideLineConfig={anchor:c?new ks(c[0][0],c[0][1]):null},cf(i,{style:{x:s.x,y:s.y}},r,t),i.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),oE(n,sE(o),{stroke:p})},t}(Ng);(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}ze(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this._data,r=this.group;a.diff(i).add((function(e){var t=new bA(a,e);a.setItemGraphicEl(e,t),r.add(t)})).update((function(e,t){var n=i.getItemGraphicEl(t);n.updateData(a,e),r.add(n),a.setItemGraphicEl(e,n)})).remove((function(t){gf(i.getItemGraphicEl(t),e,t)})).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new KM(Yr(this.getData,this),Yr(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.getInitialData=function(e,t){return $M(this,{coordDimensions:["value"],encodeDefaulter:Xr(Kv,this)})},t.prototype._defaultLabelLine=function(e){xd(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(t){var n=this.getData(),a=e.prototype.getDataParams.call(this,t),i=n.mapDimension("value"),r=n.getSum(i);return a.percent=r?+(n.get(i,t)/r*100).toFixed(2):0,a.$vars.push("percent"),a},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}}}(hw);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new Bc,n._initialized=!1,n}ze(t,e),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,t,n,a){this._progressiveEls=null;var i=this._dataGroup,r=e.getData(),o=this._data,s=e.coordinateSystem,l=s.dimensions,p=SA(e);if(r.diff(o).add((function(e){CA(wA(r,i,e,l,s),r,e,p)})).update((function(t,n){var a=o.getItemGraphicEl(n),i=xA(r,t,l,s);r.setItemGraphicEl(t,a),cf(a,{shape:{points:i}},e,t),ff(a),CA(a,r,t,p)})).remove((function(e){var t=o.getItemGraphicEl(e);i.remove(t)})).execute(),!this._initialized){this._initialized=!0;var c=function(e,t,n){var a=e.model,i=e.getRect(),r=new Rm({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o="horizontal"===a.get("layout")?"width":"height";return r.setShape(o,0),df(r,{shape:{width:i.width,height:i.height}},t,n),r}(s,e,(function(){setTimeout((function(){i.removeClipPath()}))}));i.setClipPath(c)}this._data=r},t.prototype.incrementalPrepareRender=function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,t,n){for(var a=t.getData(),i=t.coordinateSystem,r=i.dimensions,o=SA(t),s=this._progressiveEls=[],l=e.start;l<e.end;l++){var p=wA(a,this._dataGroup,l,r,i);p.incremental=!0,CA(p,a,l,o),s.push(p)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel"}(Iw);function xA(e,t,n,a){for(var i,r=[],o=0;o<n.length;o++){var s=n[o],l=e.get(e.mapDimension(s),t);i=l,("category"===a.getAxis(s).type?null==i:null==i||isNaN(i))||r.push(a.dataToPoint(l,s))}return r}function wA(e,t,n,a,i){var r=xA(e,n,a,i),o=new Vg({shape:{points:r},z2:10});return t.add(o),e.setItemGraphicEl(n,o),o}function SA(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),po(t=pd(t))&&(t=0),{smooth:t}}function CA(e,t,n,a){e.useStyle(t.getItemVisual(n,"style")),e.style.fill=null,e.setShape("smooth",a.smooth);var i=t.getItemModel(n),r=i.getModel("emphasis");jh(e,i,"lineStyle"),qh(e,r.get("focus"),r.get("blurScope"),r.get("disabled"))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}ze(t,e),t.prototype.getInitialData=function(e,t){return nT(null,this,{useEncodeDefaulter:Yr(_A,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,n=this.getData(),a=[];return t.eachActiveState(n,(function(t,i){e===t&&a.push(n.getRawIndex(i))})),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}(hw);function _A(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var n={};return Ur(t.dimensions,(function(e){var t=+e.replace("dim","");n[e]=t})),n}}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},Ur(TA,(function(e,t){n.getZr().on(t,this._handlers[t]=Yr(e,this))}),this)),Bw(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,t){Nw(this,"_throttledDispatchExpand"),Ur(this._handlers,(function(e,n){t.getZr().off(n,e)})),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(Nr({type:"parallelAxisExpand"},e))},t.type="parallel"}(Sw);var TA={mousedown:function(e){IA(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(IA(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)>5)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==a.behavior&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&IA(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),a=n.behavior;"jump"===a&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===a?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===a?null:{duration:0}})}}};function IA(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var t=this.option;e&&Rr(t,e,!0),this._initDimensions()},t.prototype.contains=function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(e){Ur(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])}),this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];Ur(Wr(this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(e){return(e.get("parallelIndex")||0)===this.componentIndex}),this),(function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)}))},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null}}(Pv);var EA=function(e){function t(t,n,a,i,r){var o=e.call(this,t,n,a)||this;return o.type=i||"value",o.axisIndex=r,o}return ze(t,e),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(BI);function MA(e,t,n,a,i,r){e=e||0;var o=n[1]-n[0];if(null!=i&&(i=PA(i,[0,o])),null!=r&&(r=Math.max(r,null!=i?i:0)),"all"===a){var s=Math.abs(t[1]-t[0]);s=PA(s,[0,o]),i=r=PA(s,[i,r]),a=0}t[0]=PA(t[0],n),t[1]=PA(t[1],n);var l=kA(t,a);t[a]+=e;var p,c=i||0,d=n.slice();return l.sign<0?d[0]+=c:d[1]-=c,t[a]=PA(t[a],d),p=kA(t,a),null!=i&&(p.sign!==l.sign||p.span<i)&&(t[1-a]=t[a]+l.sign*i),p=kA(t,a),null!=r&&p.span>r&&(t[1-a]=t[a]+p.sign*r),t}function kA(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function PA(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var DA=Ur,OA=Math.min,AA=Math.max,FA=Math.floor,RA=Math.ceil,BA=Kc,NA=Math.PI;!function(){function e(e,t,n){this.type="parallel",this._axesMap=_o(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}e.prototype._init=function(e,t,n){var a=e.dimensions,i=e.parallelAxisIndex;DA(a,(function(e,n){var a=i[n],r=t.getComponent("parallelAxis",a),o=this._axesMap.set(e,new EA(e,nI(r),[0,0],r.get("type"),a)),s="category"===o.type;o.onBand=s&&r.get("boundaryGap"),o.inverse=r.get("inverse"),r.axis=o,o.model=r,o.coordinateSystem=r.coordinateSystem=this}),this)},e.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},e.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),n=t.axisBase,a=t.layoutBase,i=t.pixelDimIndex,r=e[1-i],o=e[i];return r>=n&&r<=n+t.axisLength&&o>=a&&o<=a+t.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(e,t){t.eachSeries((function(n){if(e.contains(n,t)){var a=n.getData();DA(this.dimensions,(function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(a,a.mapDimension(e)),tI(t.scale,t.model)}),this)}}),this)},e.prototype.resize=function(e,t){this._rect=Cv(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var e,t=this._model,n=this._rect,a=["x","y"],i=["width","height"],r=t.get("layout"),o="horizontal"===r?0:1,s=n[i[o]],l=[0,s],p=this.dimensions.length,c=LA(t.get("axisExpandWidth"),l),d=LA(t.get("axisExpandCount")||0,[0,p]),u=t.get("axisExpandable")&&p>3&&p>d&&d>1&&c>0&&s>0,m=t.get("axisExpandWindow");m?(e=LA(m[1]-m[0],l),m[1]=m[0]+e):(e=LA(c*(d-1),l),(m=[c*(t.get("axisExpandCenter")||FA(p/2))-e/2])[1]=m[0]+e);var h=(s-e)/(p-d);h<3&&(h=0);var g=[FA(BA(m[0]/c,1))+1,RA(BA(m[1]/c,1))-1],f=h/c*m[0];return{layout:r,pixelDimIndex:o,layoutBase:n[a[o]],layoutLength:s,axisBase:n[a[1-o]],axisLength:n[i[1-o]],axisExpandable:u,axisExpandWidth:c,axisCollapseWidth:h,axisExpandWindow:m,axisCount:p,winInnerIndices:g,axisExpandWindow0Pos:f}},e.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,n=this.dimensions,a=this._makeLayoutInfo(),i=a.layout;t.each((function(e){var t=[0,a.axisLength],n=e.inverse?1:0;e.setExtent(t[n],t[1-n])})),DA(n,(function(t,n){var r=(a.axisExpandable?qA:VA)(n,a),o={horizontal:{x:r.position,y:a.axisLength},vertical:{x:0,y:r.position}},s={horizontal:NA/2,vertical:0},l=[o[i].x+e.x,o[i].y+e.y],p=s[i],c=[1,0,0,1,0,0];Ts(c,c,p),_s(c,c,l),this._axesLayout[t]={position:l,rotation:p,transform:c,axisNameAvailableWidth:r.axisNameAvailableWidth,axisLabelShow:r.axisLabelShow,nameTruncateMaxWidth:r.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},e.prototype.getAxis=function(e){return this._axesMap.get(e)},e.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},e.prototype.eachActiveState=function(e,t,n,a){null==n&&(n=0),null==a&&(a=e.count());var i=this._axesMap,r=this.dimensions,o=[],s=[];Ur(r,(function(t){o.push(e.mapDimension(t)),s.push(i.get(t).model)}));for(var l=this.hasAxisBrushed(),p=n;p<a;p++){var c=void 0;if(l){c="active";for(var d=e.getValues(o,p),u=0,m=r.length;u<m;u++){if("inactive"===s[u].getActiveState(d[u])){c="inactive";break}}}else c="normal";t(c,p)}},e.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,n=!1,a=0,i=e.length;a<i;a++)"normal"!==t.get(e[a]).model.getActiveState()&&(n=!0);return n},e.prototype.axisCoordToPoint=function(e,t){return Af([e,0],this._axesLayout[t].transform)},e.prototype.getAxisLayout=function(e){return Fr(this._axesLayout[e])},e.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,a=t.axisExpandWindow.slice(),i=a[1]-a[0],r=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:a};var o,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",p=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=null!=c[0];if(p)d&&p&&s<i*c[0]?(l="jump",o=s-i*c[2]):d&&p&&s>i*(1-c[0])?(l="jump",o=s-i*(1-c[2])):(o=s-i*c[1])>=0&&(o=s-i*(1-c[1]))<=0&&(o=0),(o*=t.axisExpandWidth/p)?MA(o,a,r,"all"):l="none";else{var u=a[1]-a[0];(a=[AA(0,r[1]*s/u-u/2)])[1]=OA(r[1],a[0]+u),a[0]=a[1]-u}return{axisExpandWindow:a,behavior:l}}}();function LA(e,t){return OA(AA(e,t[0]),t[1])}function VA(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}}function qA(e,t){var n,a,i=t.layoutLength,r=t.axisExpandWidth,o=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,p=s,c=!1;return e<l[0]?(n=e*s,a=s):e<=l[1]?(n=t.axisExpandWindow0Pos+e*r-t.axisExpandWindow[0],p=r,c=!0):(n=i-(o-1-e)*s,a=s),{position:n,axisNameAvailableWidth:p,axisLabelShow:c,nameTruncateMaxWidth:a}}var GA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.activeIntervals=[],n}return ze(t,e),t.prototype.getAreaSelectStyle=function(){return Xd([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var t=this.activeIntervals=Fr(e);if(t)for(var n=t.length-1;n>=0;n--)Yc(t[n])},t.prototype.getActiveState=function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var a=0,i=t.length;a<i;a++)if(t[a][0]<=e&&e<=t[a][1])return"active";return"inactive"},t}(Pv);Gr(GA,pI);var zA=!0,UA=Math.min,jA=Math.max,HA=Math.pow,WA="globalPan",$A={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},KA={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},YA={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},XA=0,ZA=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Bc,n._uid="brushController_"+XA++,Ur(_F,(function(e,t){this._handlers[t]=Yr(e,this)}),n),n}return ze(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){mP(e)[t]=n}(t,WA,this._uid),Ur(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=Rr(Fr(YA),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var a=mP(e);a[t]===n&&(a[t]=null)}(e,WA,this._uid),Ur(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};Ur(e,(function(e){t[e.panelId]=Fr(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=jr(e,(function(e){return Rr(Fr(YA),e,!0)}));var t=this._covers,n=this._covers=[],a=this,i=this._creatingCover;return new C_(t,e,(function(e,t){return r(e.__brushOption,t)}),r).add(o).update(o).remove((function(e){t[e]!==i&&a.group.remove(t[e])})).execute(),this;function r(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function o(r,o){var s=e[r];if(null!=o&&t[o]===i)n[r]=t[o];else{var l=n[r]=null!=o?(t[o].__brushOption=s,t[o]):JA(a,QA(a,s));nF(a,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),oF(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Zo);function QA(e,t){var n=IF[t.brushType].createCover(e,t);return n.__brushOption=t,tF(n,t),e.group.add(n),n}function JA(e,t){var n=aF(t);return n.endCreating&&(n.endCreating(e,t),tF(t,t.__brushOption)),t}function eF(e,t){var n=t.__brushOption;aF(t).updateCoverShape(e,t,n.range,n)}function tF(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function nF(e,t){aF(t).updateCommon(e,t),eF(e,t)}function aF(e){return IF[e.__brushOption.brushType]}function iF(e,t,n){var a,i=e._panels;if(!i)return zA;var r=e._transform;return Ur(i,(function(e){e.isTargetByCursor(t,n,r)&&(a=e)})),a}function rF(e,t){var n=e._panels;if(!n)return zA;var a=t.__brushOption.panelId;return null!=a?n[a]:zA}function oF(e){var t=e._covers,n=t.length;return Ur(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function sF(e,t){var n=jr(e._covers,(function(e){var t=e.__brushOption,n=Fr(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function lF(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function pF(e,t,n,a){var i=new Bc;return i.add(new Rm({name:"main",style:mF(n),silent:!0,draggable:!0,cursor:"move",drift:Xr(fF,e,t,i,["n","s","w","e"]),ondragend:Xr(sF,t,{isEnd:!0})})),Ur(a,(function(n){i.add(new Rm({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Xr(fF,e,t,i,n),ondragend:Xr(sF,t,{isEnd:!0})}))})),i}function cF(e,t,n,a){var i=a.brushStyle.lineWidth||0,r=jA(i,6),o=n[0][0],s=n[1][0],l=o-i/2,p=s-i/2,c=n[0][1],d=n[1][1],u=c-r+i/2,m=d-r+i/2,h=c-o,g=d-s,f=h+i,y=g+i;uF(e,t,"main",o,s,h,g),a.transformable&&(uF(e,t,"w",l,p,r,y),uF(e,t,"e",u,p,r,y),uF(e,t,"n",l,p,f,r),uF(e,t,"s",l,m,f,r),uF(e,t,"nw",l,p,r,r),uF(e,t,"ne",u,p,r,r),uF(e,t,"sw",l,m,r,r),uF(e,t,"se",u,m,r,r))}function dF(e,t){var n=t.__brushOption,a=n.transformable,i=t.childAt(0);i.useStyle(mF(n)),i.attr({silent:!a,cursor:a?"move":"default"}),Ur([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),r=1===n.length?gF(e,n[0]):function(e,t){var n=[gF(e,t[0]),gF(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!a,invisible:!a,cursor:a?KA[r]+"-resize":null})}))}function uF(e,t,n,a,i,r,o){var s=t.childOfName(n);s&&s.setShape(function(e){var t=UA(e[0][0],e[1][0]),n=UA(e[0][1],e[1][1]),a=jA(e[0][0],e[1][0]),i=jA(e[0][1],e[1][1]);return{x:t,y:n,width:a-t,height:i-n}}(bF(e,t,[[a,i],[a+r,i+o]])))}function mF(e){return Lr({strokeNoScale:!0},e.brushStyle)}function hF(e,t,n,a){var i=[UA(e,n),UA(t,a)],r=[jA(e,n),jA(t,a)];return[[i[0],r[0]],[i[1],r[1]]]}function gF(e,t){var n=Ff({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return Of(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function fF(e,t,n,a,i,r){var o=n.__brushOption,s=e.toRectRange(o.range),l=vF(t,i,r);Ur(a,(function(e){var t=$A[e];s[t[0]][t[1]]+=l[t[0]]})),o.range=e.fromRectRange(hF(s[0][0],s[1][0],s[0][1],s[1][1])),nF(t,n),sF(t,{isEnd:!1})}function yF(e,t,n,a){var i=t.__brushOption.range,r=vF(e,n,a);Ur(i,(function(e){e[0]+=r[0],e[1]+=r[1]})),nF(e,t),sF(e,{isEnd:!1})}function vF(e,t,n){var a=e.group,i=a.transformCoordToLocal(t,n),r=a.transformCoordToLocal(0,0);return[i[0]-r[0],i[1]-r[1]]}function bF(e,t,n){var a=rF(e,t);return a&&a!==zA?a.clipPath(n,e._transform):Fr(n)}function xF(e){var t=e.event;t.preventDefault&&t.preventDefault()}function wF(e,t,n){return e.childOfName("main").contain(t,n)}function SF(e,t,n,a){var i,r=e._creatingCover,o=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],a=t[0],i=n[0]-a[0],r=n[1]-a[1];return HA(i*i+r*r,.5)>6}(e)||r){if(o&&!r){"single"===s.brushMode&&oF(e);var l=Fr(s);l.brushType=CF(l.brushType,o),l.panelId=o===zA?null:o.panelId,r=e._creatingCover=QA(e,l),e._covers.push(r)}if(r){var p=IF[CF(e._brushType,o)];r.__brushOption.range=p.getCreatingRange(bF(e,r,e._track)),a&&(JA(e,r),p.updateCommon(e,r)),eF(e,r),i={isEnd:a}}}else a&&"single"===s.brushMode&&s.removeOnClick&&iF(e,t,n)&&oF(e)&&(i={isEnd:a,removeOnClick:!0});return i}function CF(e,t){return"auto"===e?t.defaultBrushType:e}var _F={mousedown:function(e){if(this._dragging)TF(this,e);else if(!e.target||!e.target.draggable){xF(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=iF(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,a=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var a=e._zr;return t<0||t>a.getWidth()||n<0||n>a.getHeight()}(e,t.offsetX,t.offsetY)){var a=e._zr,i=e._covers,r=iF(e,t,n);if(!e._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(r&&(r===zA||s.panelId===r.panelId)&&IF[s.brushType].contain(i[o],n[0],n[1]))return}r&&a.setCursorStyle("crosshair")}}(this,e,a),this._dragging){xF(e);var i=SF(this,e,a,!1);i&&sF(this,i)}},mouseup:function(e){TF(this,e)}};function TF(e,t){if(e._dragging){xF(t);var n=t.offsetX,a=t.offsetY,i=e.group.transformCoordToLocal(n,a),r=SF(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,r&&sF(e,r)}}var IF={lineX:EF(0),lineY:EF(1),rect:{createCover:function(e,t){function n(e){return e}return pF({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=lF(e);return hF(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,a){cF(e,t,n,a)},updateCommon:dF,contain:wF},polygon:{createCover:function(e,t){var n=new Bc;return n.add(new Vg({name:"main",style:mF(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Ng({name:"main",draggable:!0,drift:Xr(yF,e,t),ondragend:Xr(sF,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,a){t.childAt(0).setShape({points:bF(e,t,n)})},updateCommon:dF,contain:wF}};function EF(e){return{createCover:function(t,n){return pF({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=lF(t);return[UA(n[0][e],n[1][e]),jA(n[0][e],n[1][e])]},updateCoverShape:function(t,n,a,i){var r,o=rF(t,n);if(o!==zA&&o.getLinearBrushOtherExtent)r=o.getLinearBrushOtherExtent(e);else{var s=t._zr;r=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[a,r];e&&l.reverse(),cF(t,n,l,i)},updateCommon:dF,contain:wF}}function MF(e){return e=DF(e),function(t){return Nf(t,e)}}function kF(e,t){return e=DF(e),function(n){var a=null!=t?t:n,i=a?e.width:e.height,r=a?e.x:e.y;return[r,r+(i||0)]}}function PF(e,t,n){var a=DF(e);return function(e,i){return a.contain(i[0],i[1])&&!SP(e,t,n)}}function DF(e){return Ls.create(e)}var OF=["axisLine","axisTickLabel","axisName"];!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(t,n){e.prototype.init.apply(this,arguments),(this._brushController=new ZA(n.getZr())).on("brush",Yr(this._onBrush,this))},t.prototype.render=function(e,t,n,a){if(!function(e,t,n){return n&&"axisAreaSelect"===n.type&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}(e,t,a)){this.axisModel=e,this.api=n,this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new Bc,this.group.add(this._axisGroup),e.get("show")){var r=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),o=r.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,p=e.axis.dim,c=Nr({strokeContainThreshold:l},o.getAxisLayout(p)),d=new Tk(e,c);Ur(OF,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(c,s,e,r,l,n),Bf(i,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,t,n,a,i,r){var o=n.axis.getExtent(),s=o[1]-o[0],l=Math.min(30,.1*Math.abs(s)),p=Ls.create({x:o[0],y:-i/2,width:s,height:i});p.x-=l,p.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:MF(p),isTargetByCursor:PF(p,r,a),getLinearBrushOtherExtent:kF(p,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return jr(e.activeIntervals,(function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}}))}(n))},t.prototype._onBrush=function(e){var t=e.areas,n=this.axisModel,a=n.axis,i=jr(t,(function(e){return[a.coordToData(e.range[0],!0),a.coordToData(e.range[1],!0)]}));(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:i})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis"}(Sw);var AF=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},FF=function(e){function t(t){return e.call(this,t)||this}return ze(t,e),t.prototype.getDefaultShape=function(){return new AF},t.prototype.buildPath=function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},t.prototype.highlight=function(){Ih(this)},t.prototype.downplay=function(){Eh(this)},t}(Cm);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}ze(t,e),t.prototype.render=function(e,t,n){var a=this,i=e.getGraph(),r=this.group,o=e.layoutInfo,s=o.width,l=o.height,p=e.getData(),c=e.getData("edge"),d=e.get("orient");this._model=e,r.removeAll(),r.x=o.x,r.y=o.y,i.eachEdge((function(t){var n=new FF,a=Zm(n);a.dataIndex=t.dataIndex,a.seriesIndex=e.seriesIndex,a.dataType="edge";var i,o,p,u,m,h,g,f,y=t.getModel(),v=y.getModel("lineStyle"),b=v.get("curveness"),x=t.node1.getLayout(),w=t.node1.getModel(),S=w.get("localX"),C=w.get("localY"),_=t.node2.getLayout(),T=t.node2.getModel(),I=T.get("localX"),E=T.get("localY"),M=t.getLayout();n.shape.extent=Math.max(1,M.dy),n.shape.orient=d,"vertical"===d?(i=(null!=S?S*s:x.x)+M.sy,o=(null!=C?C*l:x.y)+x.dy,p=(null!=I?I*s:_.x)+M.ty,m=i,h=o*(1-b)+(u=null!=E?E*l:_.y)*b,g=p,f=o*b+u*(1-b)):(i=(null!=S?S*s:x.x)+x.dx,o=(null!=C?C*l:x.y)+M.sy,m=i*(1-b)+(p=null!=I?I*s:_.x)*b,h=o,g=i*b+p*(1-b),f=u=(null!=E?E*l:_.y)+M.ty),n.setShape({x1:i,y1:o,x2:p,y2:u,cpx1:m,cpy1:h,cpx2:g,cpy2:f}),n.useStyle(v.getItemStyle()),RF(n.style,d,t);var k=""+y.get("value"),P=Zf(y,"edgeLabel");Xf(n,P,{labelFetcher:{getFormattedLabel:function(t,n,a,i,r,o){return e.getFormattedLabel(t,n,"edge",i,mo(r,P.normal&&P.normal.get("formatter"),k),o)}},labelDataIndex:t.dataIndex,defaultText:k}),n.setTextConfig({position:"inside"});var D=y.getModel("emphasis");jh(n,y,"lineStyle",(function(e){var n=e.getItemStyle();return RF(n,d,t),n})),r.add(n),c.setItemGraphicEl(t.dataIndex,n);var O=D.get("focus");qh(n,"adjacency"===O?t.getAdjacentDataIndices():"trajectory"===O?t.getTrajectoryDataIndices():O,D.get("blurScope"),D.get("disabled"))})),i.eachNode((function(t){var n=t.getLayout(),a=t.getModel(),i=a.get("localX"),o=a.get("localY"),c=a.getModel("emphasis"),d=new Rm({shape:{x:null!=i?i*s:n.x,y:null!=o?o*l:n.y,width:n.dx,height:n.dy},style:a.getModel("itemStyle").getItemStyle(),z2:10});Xf(d,Zf(a),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(t,n,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),d.disableLabelAnimation=!0,d.setStyle("fill",t.getVisual("color")),d.setStyle("decal",t.getVisual("style").decal),jh(d,a),r.add(d),p.setItemGraphicEl(t.dataIndex,d),Zm(d).dataType="node";var u=c.get("focus");qh(d,"adjacency"===u?t.getAdjacentDataIndices():"trajectory"===u?t.getTrajectoryDataIndices():u,c.get("blurScope"),c.get("disabled"))})),p.eachItemGraphicEl((function(t,i){p.getItemModel(i).get("draggable")&&(t.drift=function(t,r){a._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:p.getRawIndex(i),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){a._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&r.setClipPath(function(e,t,n){var a=new Rm({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return df(a,{shape:{width:e.width+20}},t,n),a}(r.getBoundingRect(),e,(function(){r.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey"}(Iw);function RF(e,t,n){switch(e.fill){case"source":e.fill=n.node1.getVisual("color"),e.decal=n.node1.getVisual("style").decal;break;case"target":e.fill=n.node2.getVisual("color"),e.decal=n.node2.getVisual("style").decal;break;case"gradient":var a=n.node1.getVisual("color"),i=n.node2.getVisual("color");Jr(a)&&Jr(i)&&(e.fill=new Zg(0,0,+("horizontal"===t),+("vertical"===t),[{color:a,offset:0},{color:i,offset:1}]))}}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.getInitialData=function(e,t){var n=e.edges||e.links,a=e.data||e.nodes,i=e.levels;this.levelModels=[];for(var r=this.levelModels,o=0;o<i.length;o++)null!=i[o].depth&&i[o].depth>=0&&(r[i[o].depth]=new xy(i[o],this,t));if(a&&n){var s=hA(a,n,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,a=n.getData().getItemLayout(t);if(a){var i=a.depth,r=n.levelModels[i];r&&(e.parentModel=r)}return e})),t.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,a=n.getGraph().getEdgeByIndex(t).node1.getLayout();if(a){var i=a.depth,r=n.levelModels[i];r&&(e.parentModel=r)}return e}))}));return s.data}},t.prototype.setNodePosition=function(e,t){var n=(this.option.data||this.option.nodes)[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,n){function a(e){return isNaN(e)||null==e}if("edge"===n){var i=this.getDataParams(e,n),r=i.data,o=i.value;return Qx("nameValue",{name:r.source+" -- "+r.target,value:o,noValue:a(o)})}var s=this.getGraph().getNodeByIndex(e).getLayout().value,l=this.getDataParams(e,n).data.name;return Qx("nameValue",{name:null!=l?l+"":null,value:s,noValue:a(s)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,n){var a=e.prototype.getDataParams.call(this,t,n);if(null==a.value&&"node"===n){var i=this.getGraph().getNodeByIndex(t).getLayout().value;a.value=i}return a},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3}}(hw);var BF=function(){function e(){}return e.prototype.getInitialData=function(e,t){var n,a,i=t.getComponent("xAxis",this.get("xAxisIndex")),r=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=r.get("type");"category"===o?(e.layout="horizontal",n=i.getOrdinalMeta(),a=!0):"category"===s?(e.layout="vertical",n=r.getOrdinalMeta(),a=!0):e.layout=e.layout||"horizontal";var l=["x","y"],p="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[p],d=l[1-p],u=[i,r],m=u[p].get("type"),h=u[1-p].get("type"),g=e.data;if(g&&a){var f=[];Ur(g,(function(e,t){var n;Zr(e)?(n=e.slice(),e.unshift(t)):Zr(e.value)?((n=Nr({},e)).value=n.value.slice(),e.value.unshift(t)):n=e,f.push(n)})),e.data=f}var y=this.defaultValueDimensions,v=[{name:c,type:I_(m),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:I_(h),dimsDef:y.slice()}];return $M(this,{coordDimensions:v,dimensionsCount:y.length+1,encodeDefaulter:Xr($v,v,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),NF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return ze(t,e),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(hw);Gr(NF,BF,!0);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this.group,r=this._data;this._data||i.removeAll();var o="horizontal"===e.get("layout")?1:0;a.diff(r).add((function(e){if(a.hasValue(e)){var t=qF(a.getItemLayout(e),a,e,o,!0);a.setItemGraphicEl(e,t),i.add(t)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(a.hasValue(e)){var s=a.getItemLayout(e);n?(ff(n),GF(s,n,a,e)):n=qF(s,a,e,o),i.add(n),a.setItemGraphicEl(e,n)}else i.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&i.remove(t)})).execute(),this._data=a},t.prototype.remove=function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(e){e&&t.remove(e)}))},t.type="boxplot"}(Iw);var LF=function(){},VF=function(e){function t(t){var n=e.call(this,t)||this;return n.type="boxplotBoxPath",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new LF},t.prototype.buildPath=function(e,t){var n=t.points,a=0;for(e.moveTo(n[a][0],n[a][1]),a++;a<4;a++)e.lineTo(n[a][0],n[a][1]);for(e.closePath();a<n.length;a++)e.moveTo(n[a][0],n[a][1]),a++,e.lineTo(n[a][0],n[a][1])},t}(Cm);function qF(e,t,n,a,i){var r=e.ends,o=new VF({shape:{points:i?zF(r,a,e):r}});return GF(e,o,t,n,i),o}function GF(e,t,n,a,i){var r=n.hostModel;(0,Wf[i?"initProps":"updateProps"])(t,{shape:{points:e.ends}},r,a),t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var o=n.getItemModel(a),s=o.getModel("emphasis");jh(t,o),qh(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function zF(e,t,n){return jr(e,(function(e){return(e=e.slice())[t]=n.initBaseline,e}))}var UF=["color","borderColor"],jF=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,n,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),n=this._data,a=this.group,i=t.getLayout("isSimpleBox"),r=e.get("clip",!0),o=e.coordinateSystem,s=o.getArea&&o.getArea();this._data||a.removeAll(),t.diff(n).add((function(n){if(t.hasValue(n)){var o=t.getItemLayout(n);if(r&&$F(s,o))return;var l=WF(o,n,!0);df(l,{shape:{points:o.ends}},e,n),KF(l,t,n,i),a.add(l),t.setItemGraphicEl(n,l)}})).update((function(o,l){var p=n.getItemGraphicEl(l);if(t.hasValue(o)){var c=t.getItemLayout(o);r&&$F(s,c)?a.remove(p):(p?(cf(p,{shape:{points:c.ends}},e,o),ff(p)):p=WF(c,o),KF(p,t,o,i),a.add(p),t.setItemGraphicEl(o,p))}else a.remove(p)})).remove((function(e){var t=n.getItemGraphicEl(e);t&&a.remove(t)})).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),QF(e,this.group);var t=e.get("clip",!0)?jE(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var n,a=t.getData(),i=a.getLayout("isSimpleBox");null!=(n=e.next());){var r=WF(a.getItemLayout(n),n);KF(r,a,n,i),r.incremental=!0,this.group.add(r),this._progressiveEls.push(r)}},t.prototype._incrementalRenderLarge=function(e,t){QF(t,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick"}(Iw),function(){}),HF=function(e){function t(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new jF},t.prototype.buildPath=function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(Cm);function WF(e,t,n){var a=e.ends;return new HF({shape:{points:n?YF(a,e):a},z2:100})}function $F(e,t){for(var n=!0,a=0;a<t.ends.length;a++)if(e.contain(t.ends[a][0],t.ends[a][1])){n=!1;break}return n}function KF(e,t,n,a){var i=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=a,jh(e,i)}function YF(e,t){return jr(e,(function(e){return(e=e.slice())[1]=t.initBaseline,e}))}var XF=function(){},ZF=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return ze(t,e),t.prototype.getDefaultShape=function(){return new XF},t.prototype.buildPath=function(e,t){for(var n=t.points,a=0;a<n.length;)if(this.__sign===n[a++]){var i=n[a++];e.moveTo(i,n[a++]),e.lineTo(i,n[a++])}else a+=3},t}(Cm);function QF(e,t,n,a){var i=e.getData(),r=i.getLayout("largePoints"),o=new ZF({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new ZF({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new ZF({shape:{points:r},__sign:0,ignoreCoarsePointer:!0});t.add(l),JF(1,o,e,i),JF(-1,s,e,i),JF(0,l,e,i),a&&(o.incremental=!0,s.incremental=!0),n&&n.push(o,s)}function JF(e,t,n,a){var i=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]);0===e&&(i=n.get(["itemStyle","borderColorDoji"]));var r=n.getModel("itemStyle").getItemStyle(UF);t.useStyle(r),t.style.fill=null,t.style.stroke=i}var eR=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return ze(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,n){var a=t.getItemLayout(e);return a&&n.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(hw);Gr(eR,BF,!0);var tR=["itemStyle","borderColor"],nR=["itemStyle","borderColor0"],aR=["itemStyle","borderColorDoji"],iR=["itemStyle","color"],rR=["itemStyle","color0"];Cw(),Cw();function oR(e,t,n,a,i,r){return n>a?-1:n<a?1:r?0:t>0?e.get(i,t-1)<=a?1:-1:1}function sR(e,t){var n=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})}))}var lR=function(e){function t(t,n){var a=e.call(this)||this,i=new IE(t,n),r=new Bc;return a.add(i),a.add(r),a.updateData(t,n),a}return ze(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,a=e.rippleNumber,i=this.childAt(1),r=0;r<a;r++){var o=LS(t,-1,-1,2,2,n);o.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-r/a*e.period+e.effectOffset;o.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),o.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),i.add(o)}sR(i,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],i=0;i<a.length;i++){var r=a[i];if(t[r]!==e[r])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}sR(n,e)},t.prototype.highlight=function(){Ih(this)},t.prototype.downplay=function(){Eh(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,t){var n=this,a=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),r=e.getItemModel(t),o=e.getItemVisual(t,"symbol"),s=VS(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),p=l&&l.fill,c=r.getModel("emphasis");i.setScale(s),i.traverse((function(e){e.setStyle("fill",p)}));var d=qS(e.getItemVisual(t,"symbolOffset"),s);d&&(i.x=d[0],i.y=d[1]);var u=e.getItemVisual(t,"symbolRotate");i.rotation=(u||0)*Math.PI/180||0;var m={};m.showEffectOn=a.get("showEffectOn"),m.rippleScale=r.get(["rippleEffect","scale"]),m.brushType=r.get(["rippleEffect","brushType"]),m.period=1e3*r.get(["rippleEffect","period"]),m.effectOffset=t/e.count(),m.z=a.getShallow("z")||0,m.zlevel=a.getShallow("zlevel")||0,m.symbolType=o,m.color=p,m.rippleEffectColor=r.get(["rippleEffect","color"]),m.rippleNumber=r.get(["rippleEffect","number"]),"render"===m.showEffectOn?(this._effectCfg?this.updateEffectAnimation(m):this.startEffectAnimation(m),this._effectCfg=m):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==m.showEffectOn&&n.startEffectAnimation(m):"normal"===e&&"render"!==m.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=m,qh(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(Bc);(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(){this._symbolDraw=new DE(lR)},t.prototype.render=function(e,t,n){var a=e.getData(),i=this._symbolDraw;i.updateData(a,{clipShape:this._getClipShape(e)}),this.group.add(i.group)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,t,n){var a=e.getData();this.group.dirty();var i=aM("").reset(e,t,n);i.progress&&i.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Ms(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}ze(t,e),t.prototype.getInitialData=function(e,t){return nT(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10}}(hw);var pR=function(e){function t(t,n,a){var i=e.call(this)||this;return i.add(i.createLine(t,n,a)),i._updateEffectSymbol(t,n),i}return ze(t,e),t.prototype.createLine=function(e,t,n){return new YO(e,t,n)},t.prototype._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),a=n.get("symbolSize"),i=n.get("symbol");Zr(a)||(a=[a,a]);var r=e.getItemVisual(t,"style"),o=n.get("color")||r&&r.stroke,s=this.childAt(1);this._symbolType!==i&&(this.remove(s),(s=LS(i,-.5,-.5,1,1,o)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",o),s.setStyle(n.getItemStyle(["color"])),s.scaleX=a[0],s.scaleY=a[1],s.setColor(o),this._symbolType=i,this._symbolScale=a,this._updateEffectAnimation(e,n,t))},t.prototype._updateEffectAnimation=function(e,t,n){var a=this.childAt(1);if(a){var i=e.getItemLayout(n),r=1e3*t.get("period"),o=t.get("loop"),s=t.get("roundTrip"),l=t.get("constantSpeed"),p=co(t.get("delay"),(function(t){return t/e.count()*r/3}));if(a.ignore=!0,this._updateAnimationPoints(a,i),l>0&&(r=this._getLineLength(a)/l*1e3),r!==this._period||o!==this._loop||s!==this._roundTrip){a.stopAnimation();var c=void 0;c=Qr(p)?p(n):p,a.__t>0&&(c=-r*a.__t),this._animateSymbol(a,r,c,o,s)}this._period=r,this._loop=o,this._roundTrip=s}},t.prototype._animateSymbol=function(e,t,n,a,i){if(t>0){e.__t=0;var r=this,o=e.animate("",a).when(i?2*t:t,{__t:i?2:1}).delay(n).during((function(){r._updateSymbolPosition(e)}));a||o.done((function(){r.remove(e)})),o.start()}},t.prototype._getLineLength=function(e){return zo(e.__p1,e.__cp1)+zo(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},t.prototype.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},t.prototype._updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,a=e.__cp1,i=e.__t<1?e.__t:2-e.__t,r=[e.x,e.y],o=r.slice(),s=Tl,l=Il;r[0]=s(t[0],a[0],n[0],i),r[1]=s(t[1],a[1],n[1],i);var p=e.__t<1?l(t[0],a[0],n[0],i):l(n[0],a[0],t[0],1-i),c=e.__t<1?l(t[1],a[1],n[1],i):l(n[1],a[1],t[1],1-i);e.rotation=-Math.atan2(c,p)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*zo(o,r),1===i&&(r[0]=o[0]+(r[0]-o[0])/2,r[1]=o[1]+(r[1]-o[1])/2)):1===e.__lastT?e.scaleY=2*zo(t,r):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=r[0],e.y=r[1]},t.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},t}(Bc),cR=function(e){function t(t,n,a){var i=e.call(this)||this;return i._createPolyline(t,n,a),i}return ze(t,e),t.prototype._createPolyline=function(e,t,n){var a=e.getItemLayout(t),i=new Vg({shape:{points:a}});this.add(i),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var a=e.hostModel;cf(this.childAt(0),{shape:{points:e.getItemLayout(t)}},a,t),this._updateCommonStl(e,t,n)},t.prototype._updateCommonStl=function(e,t,n){var a=this.childAt(0),i=e.getItemModel(t),r=n&&n.emphasisLineStyle,o=n&&n.focus,s=n&&n.blurScope,l=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var p=i.getModel("emphasis");r=p.getModel("lineStyle").getLineStyle(),l=p.get("disabled"),o=p.get("focus"),s=p.get("blurScope")}a.useStyle(e.getItemVisual(t,"style")),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=r,qh(this,o,s,l)},t.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},t}(Bc),dR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return ze(t,e),t.prototype.createLine=function(e,t,n){return new cR(e,t,n)},t.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],a=0,i=1;i<t.length;i++){var r=t[i-1],o=t[i];a+=zo(r,o),n.push(a)}if(0!==a){for(i=0;i<n.length;i++)n[i]/=a;this._offsets=n,this._length=a}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var t=e.__t<1?e.__t:2-e.__t,n=this._points,a=this._offsets,i=n.length;if(a){var r,o=this._lastFrame;if(t<this._lastFramePercent){for(r=Math.min(o+1,i-1);r>=0&&!(a[r]<=t);r--);r=Math.min(r,i-2)}else{for(r=o;r<i&&!(a[r]>t);r++);r=Math.min(r-1,i-2)}var s=(t-a[r])/(a[r+1]-a[r]),l=n[r],p=n[r+1];e.x=l[0]*(1-s)+s*p[0],e.y=l[1]*(1-s)+s*p[1];var c=e.__t<1?p[0]-l[0]:l[0]-p[0],d=e.__t<1?p[1]-l[1]:l[1]-p[1];e.rotation=-Math.atan2(d,c)-Math.PI/2,this._lastFrame=r,this._lastFramePercent=t,e.ignore=!1}},t}(pR),uR=function(){this.polyline=!1,this.curveness=0,this.segs=[]},mR=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return ze(t,e),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new uR},t.prototype.buildPath=function(e,t){var n,a=t.segs,i=t.curveness;if(t.polyline)for(n=this._off;n<a.length;){var r=a[n++];if(r>0){e.moveTo(a[n++],a[n++]);for(var o=1;o<r;o++)e.lineTo(a[n++],a[n++])}}else for(n=this._off;n<a.length;){var s=a[n++],l=a[n++],p=a[n++],c=a[n++];if(e.moveTo(s,l),i>0){var d=(s+p)/2-(l-c)*i,u=(l+c)/2-(p-s)*i;e.quadraticCurveTo(d,u,p,c)}else e.lineTo(p,c)}this.incremental&&(this._off=n,this.notClear=!0)},t.prototype.findDataIndex=function(e,t){var n=this.shape,a=n.segs,i=n.curveness,r=this.style.lineWidth;if(n.polyline)for(var o=0,s=0;s<a.length;){var l=a[s++];if(l>0)for(var p=a[s++],c=a[s++],d=1;d<l;d++){if(im(p,c,u=a[s++],m=a[s++],r,e,t))return o}o++}else for(o=0,s=0;s<a.length;){p=a[s++],c=a[s++];var u=a[s++],m=a[s++];if(i>0){if(om(p,c,(p+u)/2-(c-m)*i,(c+m)/2-(u-p)*i,u,m,r,e,t))return o}else if(im(p,c,u,m,r,e,t))return o;o++}return-1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),a=this.getBoundingRect();return e=n[0],t=n[1],a.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape.segs,n=1/0,a=1/0,i=-1/0,r=-1/0,o=0;o<t.length;){var s=t[o++],l=t[o++];n=Math.min(s,n),i=Math.max(s,i),a=Math.min(l,a),r=Math.max(l,r)}e=this._rect=new Ls(n,a,i,r)}return e},t}(Cm),hR=function(){function e(){this.group=new Bc}return e.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(e,t){var n=this._newAdded[0],a=t.getLayout("linesPoints"),i=n&&n.shape.segs;if(i&&i.length<2e4){var r=i.length,o=new Float32Array(r+a.length);o.set(i),o.set(a,r),n.setShape({segs:o})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:a}),this._setCommon(s,t),s.__startIndex=e.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new mR({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},e.prototype._setCommon=function(e,t,n){var a=t.hostModel;e.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),e.useStyle(a.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var r=Zm(e);r.seriesIndex=a.seriesIndex,e.on("mousemove",(function(t){r.dataIndex=null;var n=e.hoverDataIdx;n>0&&(r.dataIndex=n+e.__startIndex)}))},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),gR={seriesType:"lines",plan:Cw(),reset:function(e){var t=e.coordinateSystem;if(t){var n=e.get("polyline"),a=e.pipelineContext.large;return{progress:function(i,r){var o=[];if(a){var s=void 0,l=i.end-i.start;if(n){for(var p=0,c=i.start;c<i.end;c++)p+=e.getLineCoordsCount(c);s=new Float32Array(l+2*p)}else s=new Float32Array(4*l);var d=0,u=[];for(c=i.start;c<i.end;c++){var m=e.getLineCoords(c,o);n&&(s[d++]=m);for(var h=0;h<m;h++)u=t.dataToPoint(o[h],!1,u),s[d++]=u[0],s[d++]=u[1]}r.setLayout("linesPoints",s)}else for(c=i.start;c<i.end;c++){var g=r.getItemModel(c),f=(m=e.getLineCoords(c,o),[]);if(n)for(var y=0;y<m;y++)f.push(t.dataToPoint(o[y]));else{f[0]=t.dataToPoint(o[0]),f[1]=t.dataToPoint(o[1]);var v=g.get(["lineStyle","curveness"]);+v&&(f[2]=[(f[0][0]+f[1][0])/2-(f[0][1]-f[1][1])*v,(f[0][1]+f[1][1])/2-(f[1][0]-f[0][0])*v])}r.setItemLayout(c,f)}}}}}},fR=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this._updateLineDraw(a,e),r=e.get("zlevel"),o=e.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(r).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&o>0&&(l||s.configLayer(r,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),i.updateData(a);var p=e.get("clip",!0)&&jE(e.coordinateSystem,!1,e);p?this.group.setClipPath(p):this.group.removeClipPath(),this._lastZlevel=r,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var a=e.getData();this._updateLineDraw(a,e).incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,t,n){var a=e.getData(),i=e.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var r=gR.reset(e,t,n);r.progress&&r.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,t){var n=this._lineDraw,a=this._showEffect(t),i=!!t.get("polyline"),r=t.pipelineContext.large;return n&&a===this._hasEffet&&i===this._isPolyline&&r===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=r?new hR:new XO(i?a?dR:cR:a?pR:YO),this._hasEffet=a,this._isPolyline=i,this._isLargeDraw=r),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.type="lines"}(Iw),"undefined"==typeof Uint32Array?Array:Uint32Array),yR="undefined"==typeof Float64Array?Array:Float64Array;function vR(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=jr(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),Br([t,e[0],e[1]])})))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}ze(t,e),t.prototype.init=function(t){t.data=t.data||[],vR(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(t){if(vR(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=To(this._flatCoords,t.flatCoords),this._flatCoordsOffset=To(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e),n=t.option instanceof Array?t.option:t.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],a=this._flatCoordsOffset[2*e+1],i=0;i<a;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[n+2*i],t[i][1]=this._flatCoords[n+2*i+1];return a}var r=this._getCoordsFromItemModel(e);for(i=0;i<r.length;i++)t[i]=t[i]||[],t[i][0]=r[i][0],t[i][1]=r[i][1];return r.length},t.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),to(e[0])){for(var n=e.length,a=new fR(n),i=new yR(n),r=0,o=0,s=0,l=0;l<n;){s++;var p=e[l++];a[o++]=r+t,a[o++]=p;for(var c=0;c<p;c++){var d=e[l++],u=e[l++];i[r++]=d,i[r++]=u}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,o),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,t){var n=new $_(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],(function(e,t,a,i){if(e instanceof Array)return NaN;n.hasItemOption=!0;var r=e.value;return null!=r?r instanceof Array?r[i]:r:void 0})),n},t.prototype.formatTooltip=function(e,t,n){var a=this.getData().getItemModel(e),i=a.get("name");if(i)return i;var r=a.get("fromName"),o=a.get("toName"),s=[];return null!=r&&s.push(r),null!=o&&s.push(o),Qx("nameValue",{name:s.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),t=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&t>0?t+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}(hw);var bR=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=br.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,n,a,i,r){var o=this._getBrush(),s=this._getGradient(i,"inRange"),l=this._getGradient(i,"outOfRange"),p=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),u=e.length;c.width=t,c.height=n;for(var m=0;m<u;++m){var h=e[m],g=h[0],f=h[1],y=a(h[2]);d.globalAlpha=y,d.drawImage(o,g-p,f-p)}if(!c.width||!c.height)return c;for(var v=d.getImageData(0,0,c.width,c.height),b=v.data,x=0,w=b.length,S=this.minOpacity,C=this.maxOpacity-S;x<w;){y=b[x+3]/256;var _=4*Math.floor(255*y);if(y>0){var T=r(y)?s:l;y>0&&(y=y*C+S),b[x++]=T[_],b[x++]=T[_+1],b[x++]=T[_+2],b[x++]=T[_+3]*y*256}else x+=4}return d.putImageData(v,0,0),c},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=br.createCanvas()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var a=e.getContext("2d");return a.clearRect(0,0,n,n),a.shadowOffsetX=n,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),e},e.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,a=n[t]||(n[t]=new Uint8ClampedArray(1024)),i=[0,0,0,0],r=0,o=0;o<256;o++)e[t](o/255,!0,i),a[r++]=i[0],a[r++]=i[1],a[r++]=i[2],a[r++]=i[3];return a},e}();function xR(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(n){n===e&&(a=t)}))})),this._progressiveEls=null,this.group.removeAll();var i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):xR(i)&&this._renderOnGeo(i,e,a,n)},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,n,a){var i=t.coordinateSystem;i&&(xR(i)?this.render(t,n,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,a,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,t,n,a,i){var r,o,s,l,p=e.coordinateSystem,c=HE(p,"cartesian2d");if(c){var d=p.getAxis("x"),u=p.getAxis("y");0,r=d.getBandWidth()+.5,o=u.getBandWidth()+.5,s=d.scale.getExtent(),l=u.scale.getExtent()}for(var m=this.group,h=e.getData(),g=e.getModel(["emphasis","itemStyle"]).getItemStyle(),f=e.getModel(["blur","itemStyle"]).getItemStyle(),y=e.getModel(["select","itemStyle"]).getItemStyle(),v=e.get(["itemStyle","borderRadius"]),b=Zf(e),x=e.getModel("emphasis"),w=x.get("focus"),S=x.get("blurScope"),C=x.get("disabled"),_=c?[h.mapDimension("x"),h.mapDimension("y"),h.mapDimension("value")]:[h.mapDimension("time"),h.mapDimension("value")],T=n;T<a;T++){var I=void 0,E=h.getItemVisual(T,"style");if(c){var M=h.get(_[0],T),k=h.get(_[1],T);if(isNaN(h.get(_[2],T))||isNaN(M)||isNaN(k)||M<s[0]||M>s[1]||k<l[0]||k>l[1])continue;var P=p.dataToPoint([M,k]);I=new Rm({shape:{x:P[0]-r/2,y:P[1]-o/2,width:r,height:o},style:E})}else{if(isNaN(h.get(_[1],T)))continue;I=new Rm({z2:1,shape:p.dataToRect([h.get(_[0],T)]).contentShape,style:E})}if(h.hasItemOption){var D=h.getItemModel(T),O=D.getModel("emphasis");g=O.getModel("itemStyle").getItemStyle(),f=D.getModel(["blur","itemStyle"]).getItemStyle(),y=D.getModel(["select","itemStyle"]).getItemStyle(),v=D.get(["itemStyle","borderRadius"]),w=O.get("focus"),S=O.get("blurScope"),C=O.get("disabled"),b=Zf(D)}I.shape.r=v;var A=e.getRawValue(T),F="-";A&&null!=A[2]&&(F=A[2]+""),Xf(I,b,{labelFetcher:e,labelDataIndex:T,defaultOpacity:E.opacity,defaultText:F}),I.ensureState("emphasis").style=g,I.ensureState("blur").style=f,I.ensureState("select").style=y,qh(I,w,S,C),I.incremental=i,i&&(I.states.emphasis.hoverLayer=!0),m.add(I),h.setItemGraphicEl(T,I),this._progressiveEls&&this._progressiveEls.push(I)}},t.prototype._renderOnGeo=function(e,t,n,a){var i=n.targetVisuals.inRange,r=n.targetVisuals.outOfRange,o=t.getData(),s=this._hmLayer||this._hmLayer||new bR;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),p=e.getRoamTransform();l.applyTransform(p);var c=Math.max(l.x,0),d=Math.max(l.y,0),u=Math.min(l.width+l.x,a.getWidth()),m=Math.min(l.height+l.y,a.getHeight()),h=u-c,g=m-d,f=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],y=o.mapArray(f,(function(t,n,a){var i=e.dataToPoint([t,n]);return i[0]-=c,i[1]-=d,i.push(a),i})),v=n.getExtent(),b="visualMap.continuous"===n.type?function(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(e){return e>=t[0]&&e<=t[1]}}(v,n.option.range):function(e,t,n){var a=e[1]-e[0],i=(t=jr(t,(function(t){return{interval:[(t.interval[0]-e[0])/a,(t.interval[1]-e[0])/a]}}))).length,r=0;return function(e){var a;for(a=r;a<i;a++)if((o=t[a].interval)[0]<=e&&e<=o[1]){r=a;break}if(a===i)for(a=r-1;a>=0;a--){var o;if((o=t[a].interval)[0]<=e&&e<=o[1]){r=a;break}}return a>=0&&a<i&&n[a]}}(v,n.getPieceList(),n.option.selected);s.update(y,h,g,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:r.color.getColorMapper()},b);var x=new Mm({style:{width:h,height:g,x:c,y:d,image:s.canvas},silent:!0});this.group.add(x)},t.type="heatmap"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.getInitialData=function(e,t){return nT(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=gb.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}}}(hw);var wR=["itemStyle","borderWidth"],SR=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],CR=new gg;!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a=this.group,i=e.getData(),r=this._data,o=e.coordinateSystem,s=o.getBaseAxis().isHorizontal(),l=o.master.getRect(),p={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:o,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:SR[+s],categoryDim:SR[1-+s]};i.diff(r).add((function(e){if(i.hasValue(e)){var t=DR(i,e),n=_R(i,e,t,p),r=FR(i,p,n);i.setItemGraphicEl(e,r),a.add(r),VR(r,p,n)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(i.hasValue(e)){var o=DR(i,e),s=_R(i,e,o,p),l=BR(i,s);n&&l!==n.__pictorialShapeStr&&(a.remove(n),i.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var a=n.animationModel,i=n.dataIndex,r=e.__pictorialBundle;cf(r,{x:n.bundlePosition[0],y:n.bundlePosition[1]},a,i),n.symbolRepeat?ER(e,t,n,!0):MR(e,t,n,!0);kR(e,n,!0),PR(e,t,n,!0)}(n,p,s):n=FR(i,p,s,!0),i.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,a.add(n),VR(n,p,s)}else a.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&RR(r,e,t.__pictorialSymbolMeta.animationModel,t)})).execute();var c=e.get("clip",!0)?jE(e.coordinateSystem,!1,e):null;return c?a.setClipPath(c):a.removeClipPath(),this._data=i,this.group},t.prototype.remove=function(e,t){var n=this.group,a=this._data;e.get("animation")?a&&a.eachItemGraphicEl((function(t){RR(a,Zm(t).dataIndex,e,t)})):n.removeAll()},t.type="pictorialBar"}(Iw);function _R(e,t,n,a){var i=e.getItemLayout(t),r=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,p=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),d={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:r,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:p,rotation:l,animationModel:c?n:null,hoverScale:c&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(e,t,n,a,i){var r,o=a.valueDim,s=e.get("symbolBoundingData"),l=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),p=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[o.wh]<=0);if(Zr(s)){var d=[TR(l,s[0])-p,TR(l,s[1])-p];d[1]<d[0]&&d.reverse(),r=d[c]}else r=null!=s?TR(l,s)-p:t?a.coordSysExtent[o.index][c]-p:n[o.wh];i.boundingLength=r,t&&(i.repeatCutLength=n[o.wh]);i.pxSign=r>0?1:-1}(n,r,i,a,d),function(e,t,n,a,i,r,o,s,l,p){var c,d=l.valueDim,u=l.categoryDim,m=Math.abs(n[u.wh]),h=e.getItemVisual(t,"symbolSize");c=Zr(h)?h.slice():null==h?["100%","100%"]:[h,h];c[u.index]=$c(c[u.index],m),c[d.index]=$c(c[d.index],a?m:Math.abs(r)),p.symbolSize=c;var g=p.symbolScale=[c[0]/s,c[1]/s];g[d.index]*=(l.isHorizontal?-1:1)*o}(e,t,i,r,0,d.boundingLength,d.pxSign,p,a,d),function(e,t,n,a,i){var r=e.get(wR)||0;r&&(CR.attr({scaleX:t[0],scaleY:t[1],rotation:n}),CR.updateTransform(),r/=CR.getLineScale(),r*=t[a.valueDim.index]);i.valueLineWidth=r||0}(n,d.symbolScale,l,a,d);var u=d.symbolSize,m=qS(n.get("symbolOffset"),u);return function(e,t,n,a,i,r,o,s,l,p,c,d){var u=c.categoryDim,m=c.valueDim,h=d.pxSign,g=Math.max(t[m.index]+s,0),f=g;if(a){var y=Math.abs(l),v=co(e.get("symbolMargin"),"15%")+"",b=!1;v.lastIndexOf("!")===v.length-1&&(b=!0,v=v.slice(0,v.length-1));var x=$c(v,t[m.index]),w=Math.max(g+2*x,0),S=b?0:2*x,C=cd(a),_=C?a:qR((y+S)/w);w=g+2*(x=(y-_*g)/2/(b?_:Math.max(_-1,1))),S=b?0:2*x,C||"fixed"===a||(_=p?qR((Math.abs(p)+S)/w):0),f=_*w-S,d.repeatTimes=_,d.symbolMargin=x}var T=h*(f/2),I=d.pathPosition=[];I[u.index]=n[u.wh]/2,I[m.index]="start"===o?T:"end"===o?l-T:l/2,r&&(I[0]+=r[0],I[1]+=r[1]);var E=d.bundlePosition=[];E[u.index]=n[u.xy],E[m.index]=n[m.xy];var M=d.barRectShape=Nr({},n);M[m.wh]=h*Math.max(Math.abs(n[m.wh]),Math.abs(I[m.index]+T)),M[u.wh]=n[u.wh];var k=d.clipShape={};k[u.xy]=-n[u.xy],k[u.wh]=c.ecSize[u.wh],k[m.xy]=0,k[m.wh]=n[m.wh]}(n,u,i,r,0,m,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,a,d),d}function TR(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function IR(e){var t=e.symbolPatternSize,n=LS(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function ER(e,t,n,a){var i=e.__pictorialBundle,r=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,l=t.valueDim,p=n.repeatTimes||0,c=0,d=r[t.valueDim.index]+o+2*n.symbolMargin;for(NR(e,(function(e){e.__pictorialAnimationIndex=c,e.__pictorialRepeatTimes=p,c<p?LR(e,null,h(c),n,a):LR(e,null,{scaleX:0,scaleY:0},n,a,(function(){i.remove(e)})),c++}));c<p;c++){var u=IR(n);u.__pictorialAnimationIndex=c,u.__pictorialRepeatTimes=p,i.add(u);var m=h(c);LR(u,{x:m.x,y:m.y,scaleX:0,scaleY:0},{scaleX:m.scaleX,scaleY:m.scaleY,rotation:m.rotation},n,a)}function h(e){var t=s.slice(),a=n.pxSign,i=e;return("start"===n.symbolRepeatDirection?a>0:a<0)&&(i=p-1-e),t[l.index]=d*(i-p/2+.5)+s[l.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function MR(e,t,n,a){var i=e.__pictorialBundle,r=e.__pictorialMainPath;r?LR(r,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,a):(r=e.__pictorialMainPath=IR(n),i.add(r),LR(r,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,a))}function kR(e,t,n){var a=Nr({},t.barRectShape),i=e.__pictorialBarRect;i?LR(i,null,{shape:a},t,n):((i=e.__pictorialBarRect=new Rm({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,e.add(i))}function PR(e,t,n,a){if(n.symbolClip){var i=e.__pictorialClipPath,r=Nr({},n.clipShape),o=t.valueDim,s=n.animationModel,l=n.dataIndex;if(i)cf(i,{shape:r},s,l);else{r[o.wh]=0,i=new Rm({shape:r}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var p={};p[o.wh]=n.clipShape[o.wh],Wf[a?"updateProps":"initProps"](i,{shape:p},s,l)}}}function DR(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=OR,n.isAnimationEnabled=AR,n}function OR(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function AR(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function FR(e,t,n,a){var i=new Bc,r=new Bc;return i.add(r),i.__pictorialBundle=r,r.x=n.bundlePosition[0],r.y=n.bundlePosition[1],n.symbolRepeat?ER(i,t,n):MR(i,0,n),kR(i,n,a),PR(i,t,n,a),i.__pictorialShapeStr=BR(e,n),i.__pictorialSymbolMeta=n,i}function RR(e,t,n,a){var i=a.__pictorialBarRect;i&&i.removeTextContent();var r=[];NR(a,(function(e){r.push(e)})),a.__pictorialMainPath&&r.push(a.__pictorialMainPath),a.__pictorialClipPath&&(n=null),Ur(r,(function(e){mf(e,{scaleX:0,scaleY:0},n,t,(function(){a.parent&&a.parent.remove(a)}))})),e.setItemGraphicEl(t,null)}function BR(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function NR(e,t,n){Ur(e.__pictorialBundle.children(),(function(a){a!==e.__pictorialBarRect&&t.call(n,a)}))}function LR(e,t,n,a,i,r){t&&e.attr(t),a.symbolClip&&!i?n&&e.attr(n):n&&Wf[i?"updateProps":"initProps"](e,n,a.animationModel,a.dataIndex,r)}function VR(e,t,n){var a=n.dataIndex,i=n.itemModel,r=i.getModel("emphasis"),o=r.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),p=i.getShallow("cursor"),c=r.get("focus"),d=r.get("blurScope"),u=r.get("scale");NR(e,(function(e){if(e instanceof Mm){var t=e.style;e.useStyle(Nr({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var a=e.ensureState("emphasis");a.style=o,u&&(a.scaleX=1.1*e.scaleX,a.scaleY=1.1*e.scaleY),e.ensureState("blur").style=s,e.ensureState("select").style=l,p&&(e.cursor=p),e.z2=n.z2}));var m=t.valueDim.posDesc[+(n.boundingLength>0)],h=e.__pictorialBarRect;h.ignoreClip=!0,Xf(h,Zf(i),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:_E(t.seriesModel.getData(),a),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:m}),qh(e,c,d,r.get("disabled"))}function qR(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}ze(t,e),t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Cy(lM.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}})}(lM);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}ze(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this,r=this.group,o=e.getLayerSeries(),s=a.getLayout("layoutInfo"),l=s.rect,p=s.boundaryGap;function c(e){return e.name}r.x=0,r.y=l.y+p[0];var d=new C_(this._layersSeries||[],o,c,c),u=[];function m(t,n,s){var l=i._layers;if("remove"!==t){for(var p,c,d=[],m=[],h=o[n].indices,g=0;g<h.length;g++){var f=a.getItemLayout(h[g]),y=f.x,v=f.y0,b=f.y;d.push(y,v),m.push(y,v+b),p=a.getItemVisual(h[g],"style")}var x=a.getItemLayout(h[0]),w=e.getModel("label").get("margin"),S=e.getModel("emphasis");if("add"===t){var C=u[n]=new Bc;c=new GE({shape:{points:d,stackedOnPoints:m,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),C.add(c),r.add(C),e.isAnimationEnabled()&&c.setClipPath(function(e,t,n){var a=new Rm({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return df(a,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,n),a}(c.getBoundingRect(),e,(function(){c.removeClipPath()})))}else{C=l[s];c=C.childAt(0),r.add(C),u[n]=C,cf(c,{shape:{points:d,stackedOnPoints:m}},e),ff(c)}Xf(c,Zf(e),{labelDataIndex:h[g-1],defaultText:a.getName(h[g-1]),inheritColor:p.fill},{normal:{verticalAlign:"middle"}}),c.setTextConfig({position:null,local:!0});var _=c.getTextContent();_&&(_.x=x.x-w,_.y=x.y0+x.y/2),c.useStyle(p),a.setItemGraphicEl(n,c),jh(c,e),qh(c,S.get("focus"),S.get("blurScope"),S.get("disabled"))}else r.remove(l[n])}d.add(Yr(m,this,"add")).update(Yr(m,this,"update")).remove(Yr(m,this,"remove")).execute(),this._layersSeries=o,this._layers=u},t.type="themeRiver"}(Iw);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new KM(Yr(this.getData,this),Yr(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,n={},a=Vd(e,(function(e){return n.hasOwnProperty(e[0]+"")||(n[e[0]+""]=-1),e[2]})),i=[];a.buckets.each((function(e,t){i.push({name:t,dataList:e})}));for(var r=i.length,o=0;o<r;++o){for(var s=i[o].name,l=0;l<i[o].dataList.length;++l){var p=i[o].dataList[l][0]+"";n[p]=o}for(var p in n)n.hasOwnProperty(p)&&n[p]!==o&&(n[p]=o,e[t]=[p,0,s],t++)}return e},t.prototype.getInitialData=function(e,t){for(var n=this.getReferringComponents("singleAxis",Rd).models[0].get("type"),a=Wr(e.data,(function(e){return void 0!==e[2]})),i=this.fixData(a||[]),r=[],o=this.nameMap=_o(),s=0,l=0;l<i.length;++l)r.push(i[l][2]),o.get(i[l][2])||(o.set(i[l][2],s),s++);var p=K_(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:I_(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new $_(p,this);return c.initData(i),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),n=[],a=0;a<t;++a)n[a]=a;var i=e.mapDimension("single"),r=Vd(n,(function(t){return e.get("name",t)})),o=[];return r.buckets.each((function(t,n){t.sort((function(t,n){return e.get(i,t)-e.get(i,n)})),o.push({name:n,indices:t})})),o},t.prototype.getAxisTooltipData=function(e,t,n){Zr(e)||(e=e?[e]:[]);for(var a,i=this.getData(),r=this.getLayerSeries(),o=[],s=r.length,l=0;l<s;++l){for(var p=Number.MAX_VALUE,c=-1,d=r[l].indices.length,u=0;u<d;++u){var m=i.get(e[0],r[l].indices[u]),h=Math.abs(m-t);h<=p&&(a=m,p=h,c=r[l].indices[u])}o.push(c)}return{dataIndices:o,nestestValue:a}},t.prototype.formatTooltip=function(e,t,n){var a=this.getData();return Qx("nameValue",{name:a.getName(e),value:a.get(a.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}}}(hw);var GR=function(e){function t(t,n,a,i){var r=e.call(this)||this;r.z2=2,r.textConfig={inside:!0},Zm(r).seriesIndex=n.seriesIndex;var o=new Lm({z2:4,silent:t.getModel().get(["label","silent"])});return r.setTextContent(o),r.updateData(!0,t,n,a,i),r}return ze(t,e),t.prototype.updateData=function(e,t,n,a,i){this.node=t,t.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var r=this;Zm(r).dataIndex=t.dataIndex;var o=t.getModel(),s=o.getModel("emphasis"),l=t.getLayout(),p=Nr({},l);p.label=null;var c=t.getVisual("style");c.lineJoin="bevel";var d=t.getVisual("decal");d&&(c.decal=dC(d,i));var u=hM(o.getModel("itemStyle"),p,!0);Nr(p,u),Ur(ah,(function(e){var t=r.ensureState(e),n=o.getModel([e,"itemStyle"]);t.style=n.getItemStyle();var a=hM(n,p);a&&(t.shape=a)})),e?(r.setShape(p),r.shape.r=l.r0,df(r,{shape:{r:l.r}},n,t.dataIndex)):(cf(r,{shape:p},n),ff(r)),r.useStyle(c),this._updateLabel(n);var m=o.getShallow("cursor");m&&r.attr("cursor",m),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var h=s.get("focus");qh(this,"ancestor"===h?t.getAncestorsIndices():"descendant"===h?t.getDescendantIndices():h,s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,n=this.node.getModel(),a=n.getModel("label"),i=this.node.getLayout(),r=i.endAngle-i.startAngle,o=(i.startAngle+i.endAngle)/2,s=Math.cos(o),l=Math.sin(o),p=this,c=p.getTextContent(),d=this.node.dataIndex,u=a.get("minAngle")/180*Math.PI,m=a.get("show")&&!(null!=u&&Math.abs(r)<u);function h(e,t){var n=e.get(t);return null==n?a.get(t):n}c.ignore=!m,Ur(ih,(function(a){var u="normal"===a?n.getModel("label"):n.getModel([a,"label"]),m="normal"===a,g=m?c:c.ensureState(a),f=e.getFormattedLabel(d,a);m&&(f=f||t.node.name),g.style=Qf(u,{},null,"normal"!==a,!0),f&&(g.style.text=f);var y=u.get("show");null==y||m||(g.ignore=!y);var v,b=h(u,"position"),x=m?p:p.states[a],w=x.style.fill;x.textConfig={outsideFill:"inherit"===u.get("color")?w:null,inside:"outside"!==b};var S=h(u,"distance")||0,C=h(u,"align"),_=h(u,"rotate"),T=.5*Math.PI,I=1.5*Math.PI,E=lm("tangential"===_?Math.PI/2-o:o),M=E>T&&!nd(E-T)&&E<I;"outside"===b?(v=i.r+S,C=M?"right":"left"):C&&"center"!==C?"left"===C?(v=i.r0+S,C=M?"right":"left"):"right"===C&&(v=i.r-S,C=M?"left":"right"):(v=r===2*Math.PI&&0===i.r0?0:(i.r+i.r0)/2,C="center"),g.style.align=C,g.style.verticalAlign=h(u,"verticalAlign")||"middle",g.x=v*s+i.cx,g.y=v*l+i.cy;var k=0;"radial"===_?k=lm(-o)+(M?Math.PI:0):"tangential"===_?k=lm(Math.PI/2-o)+(M?Math.PI:0):to(_)&&(k=_*Math.PI/180),g.rotation=lm(k)})),c.dirtyStyle()},t}(Og),zR="sunburstRootToNode";(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n,a){var i=this;this.seriesModel=e,this.api=n,this.ecModel=t;var r=e.getData(),o=r.tree.root,s=e.getViewRoot(),l=this.group,p=e.get("renderLabelForZeroData"),c=[];s.eachNode((function(e){c.push(e)}));var d=this._oldChildren||[];!function(a,i){if(0===a.length&&0===i.length)return;function s(e){return e.getId()}function c(s,c){!function(a,i){p||!a||a.getValue()||(a=null);if(a!==o&&i!==o)if(i&&i.piece)a?(i.piece.updateData(!1,a,e,t,n),r.setItemGraphicEl(a.dataIndex,i.piece)):function(e){if(!e)return;e.piece&&(l.remove(e.piece),e.piece=null)}(i);else if(a){var s=new GR(a,e,t,n);l.add(s),r.setItemGraphicEl(a.dataIndex,s)}}(null==s?null:a[s],null==c?null:i[c])}new C_(i,a,s,s).add(c).update(c).remove(Xr(c,null)).execute()}(c,d),function(a,r){r.depth>0?(i.virtualPiece?i.virtualPiece.updateData(!1,a,e,t,n):(i.virtualPiece=new GR(a,e,t,n),l.add(i.virtualPiece)),r.piece.off("click"),i.virtualPiece.on("click",(function(e){i._rootToNode(r.parentNode)}))):i.virtualPiece&&(l.remove(i.virtualPiece),i.virtualPiece=null)}(o,s),this._initEvents(),this._oldChildren=c},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var n=!1;e.seriesModel.getViewRoot().eachNode((function(a){if(!n&&a.piece&&a.piece===t.target){var i=a.getModel().get("nodeClick");if("rootToNode"===i)e._rootToNode(a);else if("link"===i){var r=a.getModel(),o=r.get("link");if(o)yv(o,r.get("target",!0)||"_blank")}n=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:zR,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var a=e[0]-n.cx,i=e[1]-n.cy,r=Math.sqrt(a*a+i*i);return r<=n.r&&r>=n.r0}},t.type="sunburst"})(Iw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}ze(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};UR(n);var a=this._levelModels=jr(e.levels||[],(function(e){return new xy(e,this,t)}),this),i=HD.createTree(n,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=i.getNodeByDataIndex(t),r=a[n.depth];return r&&(e.parentModel=r),e}))}));return i.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=YD(a,this),n},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){XD(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"}}(hw);function UR(e){var t=0;Ur(e.children,(function(e){UR(e);var n=e.value;Zr(n)&&(n=n[0]),t+=n}));var n=e.value;Zr(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),Zr(e.value)?e.value[0]=n:e.value=n}Math.PI;var jR={color:"fill",borderColor:"stroke"},HR={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},WR=Dd(),$R=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,t){return nT(null,this)},t.prototype.getDataParams=function(t,n,a){var i=e.prototype.getDataParams.call(this,t,n);return a&&(i.info=WR(a).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(hw);function KR(e,t){return t=t||[0,0],jr(["x","y"],(function(n,a){var i=this.getAxis(n),r=t[a],o=e[a]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(r-o)-i.dataToCoord(r+o))}),this)}function YR(e,t){return t=t||[0,0],jr([0,1],(function(n){var a=t[n],i=e[n]/2,r=[],o=[];return r[n]=a-i,o[n]=a+i,r[1-n]=o[1-n]=t[1-n],Math.abs(this.dataToPoint(r)[n]-this.dataToPoint(o)[n])}),this)}function XR(e,t){var n=this.getAxis(),a=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(a-i)-n.dataToCoord(a+i))}function ZR(e,t){return t=t||[0,0],jr(["Radius","Angle"],(function(n,a){var i=this["get"+n+"Axis"](),r=t[a],o=e[a]/2,s="category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(r-o)-i.dataToCoord(r+o));return"Angle"===n&&(s=s*Math.PI/180),s}),this)}function QR(e,t,n,a){return e&&(e.legacy||!1!==e.legacy&&!n&&!a&&"tspan"!==t&&("text"===t||Mo(e,"text")))}function JR(e,t,n){var a,i,r,o=e;if("text"===t)r=o;else{r={},Mo(o,"text")&&(r.text=o.text),Mo(o,"rich")&&(r.rich=o.rich),Mo(o,"textFill")&&(r.fill=o.textFill),Mo(o,"textStroke")&&(r.stroke=o.textStroke),Mo(o,"fontFamily")&&(r.fontFamily=o.fontFamily),Mo(o,"fontSize")&&(r.fontSize=o.fontSize),Mo(o,"fontStyle")&&(r.fontStyle=o.fontStyle),Mo(o,"fontWeight")&&(r.fontWeight=o.fontWeight),i={type:"text",style:r,silent:!0},a={};var s=Mo(o,"textPosition");n?a.position=s?o.textPosition:"inside":s&&(a.position=o.textPosition),Mo(o,"textPosition")&&(a.position=o.textPosition),Mo(o,"textOffset")&&(a.offset=o.textOffset),Mo(o,"textRotation")&&(a.rotation=o.textRotation),Mo(o,"textDistance")&&(a.distance=o.textDistance)}return eB(r,e),Ur(r.rich,(function(e){eB(e,e)})),{textConfig:a,textContent:i}}function eB(e,t){t&&(t.font=t.textFont||t.font,Mo(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),Mo(t,"textAlign")&&(e.align=t.textAlign),Mo(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),Mo(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),Mo(t,"textWidth")&&(e.width=t.textWidth),Mo(t,"textHeight")&&(e.height=t.textHeight),Mo(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),Mo(t,"textPadding")&&(e.padding=t.textPadding),Mo(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),Mo(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),Mo(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),Mo(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),Mo(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),Mo(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),Mo(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function tB(e,t,n){var a=e;a.textPosition=a.textPosition||n.position||"inside",null!=n.offset&&(a.textOffset=n.offset),null!=n.rotation&&(a.textRotation=n.rotation),null!=n.distance&&(a.textDistance=n.distance);var i=a.textPosition.indexOf("inside")>=0,r=e.fill||"#000";nB(a,t);var o=null==a.textFill;return i?o&&(a.textFill=n.insideFill||"#fff",!a.textStroke&&n.insideStroke&&(a.textStroke=n.insideStroke),!a.textStroke&&(a.textStroke=r),null==a.textStrokeWidth&&(a.textStrokeWidth=2)):(o&&(a.textFill=e.fill||n.outsideFill||"#000"),!a.textStroke&&n.outsideStroke&&(a.textStroke=n.outsideStroke)),a.text=t.text,a.rich=t.rich,Ur(t.rich,(function(e){nB(e,e)})),a}function nB(e,t){t&&(Mo(t,"fill")&&(e.textFill=t.fill),Mo(t,"stroke")&&(e.textStroke=t.fill),Mo(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),Mo(t,"font")&&(e.font=t.font),Mo(t,"fontStyle")&&(e.fontStyle=t.fontStyle),Mo(t,"fontWeight")&&(e.fontWeight=t.fontWeight),Mo(t,"fontSize")&&(e.fontSize=t.fontSize),Mo(t,"fontFamily")&&(e.fontFamily=t.fontFamily),Mo(t,"align")&&(e.textAlign=t.align),Mo(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),Mo(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),Mo(t,"width")&&(e.textWidth=t.width),Mo(t,"height")&&(e.textHeight=t.height),Mo(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),Mo(t,"padding")&&(e.textPadding=t.padding),Mo(t,"borderColor")&&(e.textBorderColor=t.borderColor),Mo(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),Mo(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),Mo(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),Mo(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),Mo(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),Mo(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),Mo(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),Mo(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),Mo(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),Mo(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var aB={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},iB=Kr(aB),rB=(Hr(gc,(function(e,t){return e[t]=1,e}),{}),gc.join(", "),["","style","shape","extra"]),oB=Dd();function sB(e,t,n,a,i){var r=e+"Animation",o=lf(e,a,i)||{},s=oB(t).userDuring;return o.duration>0&&(o.during=s?Yr(hB,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=e),Nr(o,n[r]),o}function lB(e,t,n,a){var i=(a=a||{}).dataIndex,r=a.isInit,o=a.clearStyle,s=n.isAnimationEnabled(),l=oB(e),p=t.style;l.userDuring=t.during;var c={},d={};if(function(e,t,n){for(var a=0;a<iB.length;a++){var i=iB[a],r=aB[i],o=t[i];o&&(n[r[0]]=o[0],n[r[1]]=o[1])}for(a=0;a<gc.length;a++){var s=gc[a];null!=t[s]&&(n[s]=t[s])}}(0,t,d),fB("shape",t,d),fB("extra",t,d),!r&&s&&(function(e,t,n){for(var a=t.transition,i=dB(a)?gc:bd(a||[]),r=0;r<i.length;r++){var o=i[r];if("style"!==o&&"shape"!==o&&"extra"!==o){var s=e[o];0,n[o]=s}}}(e,t,c),gB("shape",e,t,c),gB("extra",e,t,c),function(e,t,n,a){if(!n)return;var i,r=e.style;if(r){var o=n.transition,s=t.transition;if(o&&!dB(o)){var l=bd(o);!i&&(i=a.style={});for(var p=0;p<l.length;p++){var c=r[h=l[p]];i[h]=c}}else if(e.getAnimationStyleProps&&(dB(s)||dB(o)||Vr(s,"style")>=0)){var d=e.getAnimationStyleProps(),u=d?d.style:null;if(u){!i&&(i=a.style={});var m=Kr(n);for(p=0;p<m.length;p++){var h;if(u[h=m[p]]){c=r[h];i[h]=c}}}}}}(e,t,p,c)),d.style=p,function(e,t,n){var a=t.style;if(!e.isGroup&&a){if(n){e.useStyle({});for(var i=e.animators,r=0;r<i.length;r++){var o=i[r];"style"===o.targetName&&o.changeTarget(e.style)}}e.setStyle(a)}t&&(t.style=null,t&&e.attr(t),t.style=a)}(e,d,o),function(e,t){Mo(t,"silent")&&(e.silent=t.silent),Mo(t,"ignore")&&(e.ignore=t.ignore),e instanceof wu&&Mo(t,"invisible")&&(e.invisible=t.invisible);e instanceof Cm&&Mo(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}(e,t),s)if(r){var u={};Ur(rB,(function(e){var n=e?t[e]:t;n&&n.enterFrom&&(e&&(u[e]=u[e]||{}),Nr(e?u[e]:u,n.enterFrom))}));var m=sB("enter",e,t,n,i);m.duration>0&&e.animateFrom(u,m)}else!function(e,t,n,a,i){if(i){var r=sB("update",e,t,a,n);r.duration>0&&e.animateFrom(i,r)}}(e,t,i||0,n,c);pB(e,t),p?e.dirty():e.markRedraw()}function pB(e,t){for(var n=oB(e).leaveToProps,a=0;a<rB.length;a++){var i=rB[a],r=i?t[i]:t;r&&r.leaveTo&&(n||(n=oB(e).leaveToProps={}),i&&(n[i]=n[i]||{}),Nr(i?n[i]:n,r.leaveTo))}}function cB(e,t,n,a){if(e){var i=e.parent,r=oB(e).leaveToProps;if(r){var o=sB("update",e,t,n,0);o.done=function(){i.remove(e),a&&a()},e.animateTo(r,o)}else i.remove(e),a&&a()}}function dB(e){return"all"===e}var uB={},mB={setTransform:function(e,t){return uB.el[e]=t,this},getTransform:function(e){return uB.el[e]},setShape:function(e,t){var n=uB.el;return(n.shape||(n.shape={}))[e]=t,n.dirtyShape&&n.dirtyShape(),this},getShape:function(e){var t=uB.el.shape;if(t)return t[e]},setStyle:function(e,t){var n=uB.el,a=n.style;return a&&(a[e]=t,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(e){var t=uB.el.style;if(t)return t[e]},setExtra:function(e,t){return(uB.el.extra||(uB.el.extra={}))[e]=t,this},getExtra:function(e){var t=uB.el.extra;if(t)return t[e]}};function hB(){var e=this,t=e.el;if(t){var n=oB(t).userDuring,a=e.userDuring;n===a?(uB.el=t,a(mB)):e.el=e.userDuring=null}}function gB(e,t,n,a){var i=n[e];if(i){var r,o=t[e];if(o){var s=n.transition,l=i.transition;if(l)if(!r&&(r=a[e]={}),dB(l))Nr(r,o);else for(var p=bd(l),c=0;c<p.length;c++){var d=o[m=p[c]];r[m]=d}else if(dB(s)||Vr(s,e)>=0){!r&&(r=a[e]={});var u=Kr(o);for(c=0;c<u.length;c++){var m;d=o[m=u[c]];yB(i[m],d)&&(r[m]=d)}}}}}function fB(e,t,n){var a=t[e];if(a)for(var i=n[e]={},r=Kr(a),o=0;o<r.length;o++){var s=r[o];i[s]=kp(a[s])}}function yB(e,t){return zr(e)?e!==t:null!=e&&isFinite(e)}var vB=Dd(),bB=["percent","easing","shape","style","extra"];function xB(e){e.stopAnimation("keyframe"),e.attr(vB(e))}function wB(e,t,n){if(n.isAnimationEnabled()&&t)if(Zr(t))Ur(t,(function(t){wB(e,t,n)}));else{var a=t.keyframes,i=t.duration;if(n&&null==i){var r=lf("enter",n,0);i=r&&r.duration}if(a&&i){var o=vB(e);Ur(rB,(function(n){if(!n||e[n]){var r;a.sort((function(e,t){return e.percent-t.percent})),Ur(a,(function(a){var s=e.animators,l=n?a[n]:a;if(l){var p=Kr(l);if(n||(p=Wr(p,(function(e){return Vr(bB,e)<0}))),p.length){r||((r=e.animate(n,t.loop,!0)).scope="keyframe");for(var c=0;c<s.length;c++)s[c]!==r&&s[c].targetName===r.targetName&&s[c].stopTracks(p);n&&(o[n]=o[n]||{});var d=n?o[n]:o;Ur(p,(function(t){d[t]=((n?e[n]:e)||{})[t]})),r.whenWithKeys(i*a.percent,l,p,a.easing)}}})),r&&r.delay(t.delay||0).duration(i).start(t.easing)}}))}}}var SB="emphasis",CB="normal",_B="blur",TB="select",IB=[CB,SB,_B,TB],EB={normal:["itemStyle"],emphasis:[SB,"itemStyle"],blur:[_B,"itemStyle"],select:[TB,"itemStyle"]},MB={normal:["label"],emphasis:[SB,"label"],blur:[_B,"label"],select:[TB,"label"]},kB=["x","y"],PB={normal:{},emphasis:{},blur:{},select:{}},DB={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:Yr(KR,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:Yr(YR,e)}}},single:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:Yr(XR,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:a[1],r0:a[0]},api:{coord:function(a){var i=t.dataToRadius(a[0]),r=n.dataToAngle(a[1]),o=e.coordToPoint([i,r]);return o.push(i,r*Math.PI/180),o},size:Yr(ZR,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}};function OB(e){return e instanceof Cm}function AB(e){return e instanceof wu}var FB=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(e,t,n,a){this._progressiveEls=null;var i=this._data,r=e.getData(),o=this.group,s=VB(e,r,t,n);i||o.removeAll(),r.diff(i).add((function(t){GB(n,null,t,s(t,a),e,o,r)})).remove((function(t){var n=i.getItemGraphicEl(t);n&&cB(n,WR(n).option,e)})).update((function(t,l){var p=i.getItemGraphicEl(l);GB(n,p,t,s(t,a),e,o,r)})).execute();var l=e.get("clip",!0)?jE(e.coordinateSystem,!1,e):null;l?o.setClipPath(l):o.removeClipPath(),this._data=r},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,t,n,a,i){var r=t.getData(),o=VB(t,r,n,a),s=this._progressiveEls=[];function l(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var p=e.start;p<e.end;p++){var c=GB(null,null,p,o(p,i),t,this.group,r);c&&(c.traverse(l),s.push(c))}},t.prototype.eachRendered=function(e){Hf(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,t,n,a){var i=t.element;if(null==i||n.name===i)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===i)return!0;return!1},t.type="custom",t}(Iw);function RB(e){var t,n=e.type;if("path"===n){var a=e.shape,i=null!=a.width&&null!=a.height?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,r=ZB(a);t=Tf(r,null,i,a.layout||"center"),WR(t).customPathData=r}else if("image"===n)t=new Mm({}),WR(t).customImagePath=e.style.image;else if("text"===n)t=new Lm({});else if("group"===n)t=new Bc;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var o=_f(n);if(!o){var s="";0,gd(s)}t=new o}return WR(t).customGraphicType=n,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function BB(e,t,n,a,i,r,o){xB(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),a&&null==a.transition&&(a.transition=kB);var l=a&&a.style;if(l){if("text"===t.type){var p=l;Mo(p,"textFill")&&(p.fill=p.textFill),Mo(p,"textStroke")&&(p.stroke=p.textStroke)}var c=void 0,d=OB(t)?l.decal:null;e&&d&&(d.dirty=!0,c=dC(d,e)),l.__decalPattern=c}AB(t)&&(l&&(c=l.__decalPattern)&&(l.decal=c));lB(t,a,r,{dataIndex:n,isInit:o,clearStyle:!0}),wB(t,a.keyframeAnimation,r)}function NB(e,t,n,a,i){var r=t.isGroup?null:t,o=i&&i[e].cfg;if(r){var s=r.ensureState(e);if(!1===a){var l=r.getState(e);l&&(l.style=null)}else s.style=a||null;o&&(s.textConfig=o),Ch(r)}}function LB(e,t,n){var a=n===CB,i=a?t:HB(t,n),r=i?i.z2:null;null!=r&&((a?e:e.ensureState(n)).z2=r||0)}function VB(e,t,n,a){var i=e.get("renderItem"),r=e.coordinateSystem,o={};r&&(o=r.prepareCustoms?r.prepareCustoms(r):DB[r.type](r));for(var s,l,p=Lr({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:function(e,n){return null==n&&(n=s),t.getStore().get(t.getDimensionIndex(e||0),n)},style:function(n,a){0;null==a&&(a=s);var i=t.getItemVisual(a,"style"),r=i&&i.fill,o=i&&i.opacity,l=v(a,CB).getItemStyle();null!=r&&(l.fill=r),null!=o&&(l.opacity=o);var p={inheritColor:Jr(r)?r:"#000"},c=b(a,CB),d=Qf(c,null,p,!1,!0);d.text=c.getShallow("show")?uo(e.getFormattedLabel(a,CB),_E(t,a)):null;var u=Jf(c,p,!1);return w(n,l),l=tB(l,d,u),n&&x(l,n),l.legacy=!0,l},ordinalRawValue:function(e,n){null==n&&(n=s),e=e||0;var a=t.getDimensionInfo(e);if(!a){var i=t.getDimensionIndex(e);return i>=0?t.getStore().get(i,n):void 0}var r=t.get(a.name,n),o=a&&a.ordinalMeta;return o?o.categories[r]:r},styleEmphasis:function(n,a){0;null==a&&(a=s);var i=v(a,SB).getItemStyle(),r=b(a,SB),o=Qf(r,null,null,!0,!0);o.text=r.getShallow("show")?mo(e.getFormattedLabel(a,SB),e.getFormattedLabel(a,CB),_E(t,a)):null;var l=Jf(r,null,!0);return w(n,i),i=tB(i,o,l),n&&x(i,n),i.legacy=!0,i},visual:function(e,n){if(null==n&&(n=s),Mo(jR,e)){var a=t.getItemVisual(n,"style");return a?a[jR[e]]:null}if(Mo(HR,e))return t.getItemVisual(n,e)},barLayout:function(e){if("cartesian2d"===r.type){return function(e){var t=[],n=e.axis,a="axis0";if("category"===n.type){for(var i=n.getBandWidth(),r=0;r<e.count;r++)t.push(Lr({bandWidth:i,axisKey:a,stackId:wT+r},e));var o=IT(t),s=[];for(r=0;r<e.count;r++){var l=o[a][wT+r];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}(Lr({axis:r.getBaseAxis()},e))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return iy(e,n)}},o.api||{}),c={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:qB(e.getData())},d={},u={},m={},h={},g=0;g<IB.length;g++){var f=IB[g];m[f]=e.getModel(EB[f]),h[f]=e.getModel(MB[f])}function y(e){return e===s?l||(l=t.getItemModel(e)):t.getItemModel(e)}function v(e,n){return t.hasItemOption?e===s?d[n]||(d[n]=y(e).getModel(EB[n])):y(e).getModel(EB[n]):m[n]}function b(e,n){return t.hasItemOption?e===s?u[n]||(u[n]=y(e).getModel(MB[n])):y(e).getModel(MB[n]):h[n]}return function(e,n){return s=e,l=null,d={},u={},i&&i(Lr({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},c),p)};function x(e,t){for(var n in t)Mo(t,n)&&(e[n]=t[n])}function w(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function qB(e){var t={};return Ur(e.dimensions,(function(n){var a=e.getDimensionInfo(n);if(!a.isExtraCoord){var i=a.coordDim;(t[i]=t[i]||[])[a.coordDimIndex]=e.getDimensionIndex(n)}})),t}function GB(e,t,n,a,i,r,o){if(a){var s=zB(e,t,n,a,i,r);return s&&o.setItemGraphicEl(n,s),s&&qh(s,a.focus,a.blurScope,a.emphasisDisabled),s}r.remove(t)}function zB(e,t,n,a,i,r){var o=-1,s=t;t&&UB(t,a,i)&&(o=Vr(r.childrenRef(),t),t=null);var l,p,c=!t,d=t;d?d.clearStates():(d=RB(a),s&&(l=s,(p=d).copyTransform(l),AB(p)&&AB(l)&&(p.setStyle(l.style),p.z=l.z,p.z2=l.z2,p.zlevel=l.zlevel,p.invisible=l.invisible,p.ignore=l.ignore,OB(p)&&OB(l)&&p.setShape(l.shape)))),!1===a.morph?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),PB.normal.cfg=PB.normal.conOpt=PB.emphasis.cfg=PB.emphasis.conOpt=PB.blur.cfg=PB.blur.conOpt=PB.select.cfg=PB.select.conOpt=null,PB.isLegacy=!1,function(e,t,n,a,i,r){if(e.isGroup)return;jB(n,null,r),jB(n,SB,r);var o=r.normal.conOpt,s=r.emphasis.conOpt,l=r.blur.conOpt,p=r.select.conOpt;if(null!=o||null!=s||null!=p||null!=l){var c=e.getTextContent();if(!1===o)c&&e.removeTextContent();else{o=r.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=RB(o),e.setTextContent(c)),BB(null,c,t,o,null,a,i);for(var d=o&&o.style,u=0;u<IB.length;u++){var m=IB[u];if(m!==CB){var h=r[m].conOpt;NB(m,c,0,WB(o,h,m),null)}}d?c.dirty():c.markRedraw()}}}(d,n,a,i,c,PB),function(e,t,n,a,i){var r=n.clipPath;if(!1===r)e&&e.getClipPath()&&e.removeClipPath();else if(r){var o=e.getClipPath();o&&UB(o,r,a)&&(o=null),o||(o=RB(r),e.setClipPath(o)),BB(null,o,t,r,null,a,i)}}(d,n,a,i,c),BB(e,d,n,a,PB,i,c),Mo(a,"info")&&(WR(d).info=a.info);for(var u=0;u<IB.length;u++){var m=IB[u];if(m!==CB){var h=HB(a,m);NB(m,d,0,WB(a,h,m),PB)}}return function(e,t,n){if(!e.isGroup){var a=e,i=n.currentZ,r=n.currentZLevel;a.z=i,a.zlevel=r;var o=t.z2;null!=o&&(a.z2=o||0);for(var s=0;s<IB.length;s++)LB(a,t,IB[s])}}(d,a,i),"group"===a.type&&function(e,t,n,a,i){var r=a.children,o=r?r.length:0,s=a.$mergeChildren,l="byName"===s||a.diffChildrenByName,p=!1===s;if(!o&&!l&&!p)return;if(l)return c={api:e,oldChildren:t.children()||[],newChildren:r||[],dataIndex:n,seriesModel:i,group:t},void new C_(c.oldChildren,c.newChildren,KB,KB,c).add(YB).update(YB).remove(XB).execute();var c;p&&t.removeAll();for(var d=0;d<o;d++){var u=r[d],m=t.childAt(d);u?(null==u.ignore&&(u.ignore=!1),zB(e,m,n,u,i,t)):m.ignore=!0}for(var h=t.childCount()-1;h>=d;h--){var g=t.childAt(h);$B(t,g,i)}}(e,d,n,a,i),o>=0?r.replaceAt(d,o):r.add(d),d}function UB(e,t,n){var a,i=WR(e),r=t.type,o=t.shape,s=t.style;return n.isUniversalTransitionEnabled()||null!=r&&r!==i.customGraphicType||"path"===r&&((a=o)&&(Mo(a,"pathData")||Mo(a,"d")))&&ZB(o)!==i.customPathData||"image"===r&&Mo(s,"image")&&s.image!==i.customImagePath}function jB(e,t,n){var a=t?HB(e,t):e,i=t?WB(e,a,SB):e.style,r=e.type,o=a?a.textConfig:null,s=e.textContent,l=s?t?HB(s,t):s:null;if(i&&(n.isLegacy||QR(i,r,!!o,!!l))){n.isLegacy=!0;var p=JR(i,r,!t);!o&&p.textConfig&&(o=p.textConfig),!l&&p.textContent&&(l=p.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var d=t?n[t]:n.normal;d.cfg=o,d.conOpt=l}function HB(e,t){return t?e?e[t]:null:e}function WB(e,t,n){var a=t&&t.style;return null==a&&n===SB&&e&&(a=e.styleEmphasis),a}function $B(e,t,n){t&&cB(t,WR(e).option,n)}function KB(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function YB(e,t){var n=this.context,a=null!=e?n.newChildren[e]:null,i=null!=t?n.oldChildren[t]:null;zB(n.api,i,n.dataIndex,a,n.seriesModel,n.group)}function XB(e){var t=this.context,n=t.oldChildren[e];n&&cB(n,WR(n).option,t.seriesModel)}function ZB(e){return e&&(e.pathData||e.d)}function QB(e){e.registerChartView(FB),e.registerSeriesModel($R)}var JB=Dd(),eN=Fr,tN=Yr,nN=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(e,t,n,a){var i=t.get("value"),r=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,a||this._lastValue!==i||this._lastStatus!==r){this._lastValue=i,this._lastStatus=r;var o=this._group,s=this._handle;if(!r||"hide"===r)return o&&o.hide(),void(s&&s.hide());o&&o.show(),s&&s.show();var l={};this.makeElOption(l,i,e,t,n);var p=l.graphicKey;p!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=p;var c=this._moveAnimation=this.determineAnimation(e,t);if(o){var d=Xr(aN,t,c);this.updatePointerEl(o,l,d),this.updateLabelEl(o,l,d,t)}else o=this._group=new Bc,this.createPointerEl(o,l,e,t),this.createLabelEl(o,l,e,t),n.getZr().add(o);sN(o,t,!0),this._renderHandle(i)}},e.prototype.remove=function(e){this.clear(e)},e.prototype.dispose=function(e){this.clear(e)},e.prototype.determineAnimation=function(e,t){var n=t.get("animation"),a=e.axis,i="category"===a.type,r=t.get("snap");if(!r&&!i)return!1;if("auto"===n||null==n){var o=this.animationThreshold;if(i&&a.getBandWidth()>o)return!0;if(r){var s=Ak(e).seriesDataCount,l=a.getExtent();return Math.abs(l[0]-l[1])/s>o}return!1}return!0===n},e.prototype.makeElOption=function(e,t,n,a,i){},e.prototype.createPointerEl=function(e,t,n,a){var i=t.pointer;if(i){var r=JB(e).pointerEl=new Wf[i.type](eN(t.pointer));e.add(r)}},e.prototype.createLabelEl=function(e,t,n,a){if(t.label){var i=JB(e).labelEl=new Lm(eN(t.label));e.add(i),rN(i,a)}},e.prototype.updatePointerEl=function(e,t,n){var a=JB(e).pointerEl;a&&t.pointer&&(a.setStyle(t.pointer.style),n(a,{shape:t.pointer.shape}))},e.prototype.updateLabelEl=function(e,t,n,a){var i=JB(e).labelEl;i&&(i.setStyle(t.label.style),n(i,{x:t.label.x,y:t.label.y}),rN(i,a))},e.prototype._renderHandle=function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,a=this._api.getZr(),i=this._handle,r=n.getModel("handle"),o=n.get("status");if(!r.get("show")||!o||"hide"===o)return i&&a.remove(i),void(this._handle=null);this._handle||(t=!0,i=this._handle=Vf(r.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){fs(e.event)},onmousedown:tN(this._onHandleDragMove,this,0,0),drift:tN(this._onHandleDragMove,this),ondragend:tN(this._onHandleDragEnd,this)}),a.add(i)),sN(i,n,!1),i.setStyle(r.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=r.get("size");Zr(s)||(s=[s,s]),i.scaleX=s[0]/2,i.scaleY=s[1]/2,Bw(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},e.prototype._moveHandleToValue=function(e,t){aN(this._axisPointerModel,!t&&this._moveAnimation,this._handle,oN(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(n){this._dragging=!0;var a=this.updateHandleTransform(oN(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=a,n.stopAnimation(),n.attr(oN(a)),JB(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,a=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),a&&t.remove(a),this._group=null,this._handle=null,this._payloadInfo=null),Nw(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}},e}();function aN(e,t,n,a){iN(JB(n).lastProp,a)||(JB(n).lastProp=a,t?cf(n,a,e):(n.stopAnimation(),n.attr(a)))}function iN(e,t){if(no(e)&&no(t)){var n=!0;return Ur(t,(function(t,a){n=n&&iN(e[a],t)})),!!n}return e===t}function rN(e,t){e[t.get(["label","show"])?"show":"hide"]()}function oN(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function sN(e,t,n){var a=t.get("z"),i=t.get("zlevel");e&&e.traverse((function(e){"group"!==e.type&&(null!=a&&(e.z=a),null!=i&&(e.zlevel=i),e.silent=n)}))}function lN(e){var t,n=e.get("type"),a=e.getModel(n+"Style");return"line"===n?(t=a.getLineStyle()).fill=null:"shadow"===n&&((t=a.getAreaStyle()).stroke=null),t}function pN(e,t,n,a,i){var r=cN(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),o=n.getModel("label"),s=cv(o.get("padding")||0),l=o.getFont(),p=xc(r,l),c=i.position,d=p.width+s[1]+s[3],u=p.height+s[0]+s[2],m=i.align;"right"===m&&(c[0]-=d),"center"===m&&(c[0]-=d/2);var h=i.verticalAlign;"bottom"===h&&(c[1]-=u),"middle"===h&&(c[1]-=u/2),function(e,t,n,a){var i=a.getWidth(),r=a.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+n,r)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(c,d,u,a);var g=o.get("backgroundColor");g&&"auto"!==g||(g=t.get(["axisLine","lineStyle","color"])),e.label={x:c[0],y:c[1],style:Qf(o,{text:r,font:l,fill:o.getTextColor(),padding:s,backgroundColor:g}),z2:10}}function cN(e,t,n,a,i){e=t.scale.parse(e);var r=t.scale.getLabel({value:e},{precision:i.precision}),o=i.formatter;if(o){var s={value:iI(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Ur(a,(function(e){var t=n.getSeriesByIndex(e.seriesIndex),a=e.dataIndexInside,i=t&&t.getDataParams(a);i&&s.seriesData.push(i)})),Jr(o)?r=o.replace("{value}",r):Qr(o)&&(r=o(s))}return r}function dN(e,t,n){var a=[1,0,0,1,0,0];return Ts(a,a,n.rotation),_s(a,a,n.position),Af([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],a)}function uN(e,t,n,a,i,r){var o=Tk.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),pN(t,a,i,r,{position:dN(a.axis,e,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function mN(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function hN(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function gN(e,t,n,a,i,r){return{cx:e,cy:t,r0:n,r:a,startAngle:i,endAngle:r,clockwise:!0}}var fN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.makeElOption=function(e,t,n,a,i){var r=n.axis,o=r.grid,s=a.get("type"),l=yN(o,r).getOtherAxis(r).getGlobalExtent(),p=r.toGlobalCoord(r.dataToCoord(t,!0));if(s&&"none"!==s){var c=lN(a),d=vN[s](r,p,l);d.style=c,e.graphicKey=d.type,e.pointer=d}uN(t,e,gk(o.model,n),n,a,i)},t.prototype.getHandleTransform=function(e,t,n){var a=gk(t.axis.grid.model,t,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var i=dN(t.axis,e,a);return{x:i[0],y:i[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,a){var i=n.axis,r=i.grid,o=i.getGlobalExtent(!0),s=yN(r,i).getOtherAxis(i).getGlobalExtent(),l="x"===i.dim?0:1,p=[e.x,e.y];p[l]+=t[l],p[l]=Math.min(o[1],p[l]),p[l]=Math.max(o[0],p[l]);var c=(s[1]+s[0])/2,d=[c,c];d[l]=p[l];return{x:p[0],y:p[1],rotation:e.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},t}(nN);function yN(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var vN={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:mN([t,n[0]],[t,n[1]],bN(e))}},shadow:function(e,t,n){var a=Math.max(1,e.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:hN([t-a/2,n[0]],[a,i],bN(e))}}};function bN(e){return"x"===e.dim?0:1}var xN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Pv),wN=Dd(),SN=Ur;function CN(e,t,n){if(!mr.node){var a=t.getZr();wN(a).records||(wN(a).records={}),function(e,t){if(wN(e).initialized)return;function n(n,a){e.on(n,(function(n){var i=function(e){var t={showTip:[],hideTip:[]},n=function(a){var i=t[a.type];i?i.push(a):(a.dispatchAction=n,e.dispatchAction(a))};return{dispatchAction:n,pendings:t}}(t);SN(wN(e).records,(function(e){e&&a(e,n,i.dispatchAction)})),function(e,t){var n,a=e.showTip.length,i=e.hideTip.length;a?n=e.showTip[a-1]:i&&(n=e.hideTip[i-1]);n&&(n.dispatchAction=null,t.dispatchAction(n))}(i.pendings,t)}))}wN(e).initialized=!0,n("click",Xr(TN,"click")),n("mousemove",Xr(TN,"mousemove")),n("globalout",_N)}(a,t),(wN(a).records[e]||(wN(a).records[e]={})).handler=n}}function _N(e,t,n){e.handler("leave",null,n)}function TN(e,t,n,a){t.handler(e,n,a)}function IN(e,t){if(!mr.node){var n=t.getZr();(wN(n).records||{})[e]&&(wN(n).records[e]=null)}}var EN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(e,t,n){var a=t.getComponent("tooltip"),i=e.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";CN("axisPointer",n,(function(e,t,n){"none"!==i&&("leave"===e||i.indexOf(e)>=0)&&n({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})}))},t.prototype.remove=function(e,t){IN("axisPointer",t)},t.prototype.dispose=function(e,t){IN("axisPointer",t)},t.type="axisPointer",t}(Sw);function MN(e,t){var n,a=[],i=e.seriesIndex;if(null==i||!(n=t.getSeriesByIndex(i)))return{point:[]};var r=n.getData(),o=Pd(r,e);if(null==o||o<0||Zr(o))return{point:[]};var s=r.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)a=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var p=l.getBaseAxis(),c=l.getOtherAxis(p).dim,d=p.dim,u="x"===c||"radius"===c?1:0,m=r.mapDimension(d),h=[];h[u]=r.get(m,o),h[1-u]=r.get(r.getCalculationInfo("stackResultDimension"),o),a=l.dataToPoint(h)||[]}else a=l.dataToPoint(r.getValues(jr(l.dimensions,(function(e){return r.mapDimension(e)})),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),a=[g.x+g.width/2,g.y+g.height/2]}return{point:a,el:s}}var kN=Dd();function PN(e,t,n){var a=e.currTrigger,i=[e.x,e.y],r=e,o=e.dispatchAction||Yr(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){RN(i)&&(i=MN({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},t).point);var l=RN(i),p=r.axesInfo,c=s.axesInfo,d="leave"===a||RN(i),u={},m={},h={list:[],map:{}},g={showPointer:Xr(ON,m),showTooltip:Xr(AN,h)};Ur(s.coordSysMap,(function(e,t){var n=l||e.containPoint(i);Ur(s.coordSysAxesInfo[t],(function(e,t){var a=e.axis,r=function(e,t){for(var n=0;n<(e||[]).length;n++){var a=e[n];if(t.axis.dim===a.axisDim&&t.axis.model.componentIndex===a.axisIndex)return a}}(p,e);if(!d&&n&&(!p||r)){var o=r&&r.value;null!=o||l||(o=a.pointToData(i)),null!=o&&DN(e,o,g,!1,u)}}))}));var f={};return Ur(c,(function(e,t){var n=e.linkGroup;n&&!m[t]&&Ur(n.axesInfo,(function(t,a){var i=m[a];if(t!==e&&i){var r=i.value;n.mapper&&(r=e.axis.scale.parse(n.mapper(r,FN(t),FN(e)))),f[e.key]=r}}))})),Ur(f,(function(e,t){DN(c[t],e,g,!0,u)})),function(e,t,n){var a=n.axesInfo=[];Ur(t,(function(t,n){var i=t.axisPointerModel.option,r=e[n];r?(!t.useHandle&&(i.status="show"),i.value=r.value,i.seriesDataIndices=(r.payloadBatch||[]).slice()):!t.useHandle&&(i.status="hide"),"show"===i.status&&a.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:i.value})}))}(m,c,u),function(e,t,n,a){if(RN(t)||!e.list.length)return void a({type:"hideTip"});var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}(h,i,e,o),function(e,t,n){var a=n.getZr(),i="axisPointerLastHighlights",r=kN(a)[i]||{},o=kN(a)[i]={};Ur(e,(function(e,t){var n=e.axisPointerModel.option;"show"===n.status&&e.triggerEmphasis&&Ur(n.seriesDataIndices,(function(e){var t=e.seriesIndex+" | "+e.dataIndex;o[t]=e}))}));var s=[],l=[];Ur(r,(function(e,t){!o[t]&&l.push(e)})),Ur(o,(function(e,t){!r[t]&&s.push(e)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}(c,0,n),u}}function DN(e,t,n,a,i){var r=e.axis;if(!r.scale.isBlank()&&r.containData(t))if(e.involveSeries){var o=function(e,t){var n=t.axis,a=n.dim,i=e,r=[],o=Number.MAX_VALUE,s=-1;return Ur(t.seriesModels,(function(t,l){var p,c,d=t.getData().mapDimensionsAll(a);if(t.getAxisTooltipData){var u=t.getAxisTooltipData(d,e,n);c=u.dataIndices,p=u.nestestValue}else{if(!(c=t.getData().indicesOfNearest(d[0],e,"category"===n.type?.5:null)).length)return;p=t.getData().get(d[0],c[0])}if(null!=p&&isFinite(p)){var m=e-p,h=Math.abs(m);h<=o&&((h<o||m>=0&&s<0)&&(o=h,s=m,i=p,r.length=0),Ur(c,(function(e){r.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})})))}})),{payloadBatch:r,snapToValue:i}}(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&null==i.seriesIndex&&Nr(i,s[0]),!a&&e.snap&&r.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s),n.showTooltip(e,o,l)}else n.showPointer(e,t)}function ON(e,t,n,a){e[t.key]={value:n,payloadBatch:a}}function AN(e,t,n,a){var i=n.payloadBatch,r=t.axis,o=r.model,s=t.axisPointerModel;if(t.triggerTooltip&&i.length){var l=t.coordSys.model,p=Rk(l),c=e.map[p];c||(c=e.map[p]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:r.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:a,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function FN(e){var t=e.axis.model,n={},a=n.axisDim=e.axis.dim;return n.axisIndex=n[a+"AxisIndex"]=t.componentIndex,n.axisName=n[a+"AxisName"]=t.name,n.axisId=n[a+"AxisId"]=t.id,n}function RN(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}function BN(e){Nk.registerAxisPointerClass("CartesianAxisPointer",fN),e.registerComponentModel(xN),e.registerComponentView(EN),e.registerPreprocessor((function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Zr(t)&&(e.axisPointer.link=[t])}})),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,(function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Dk(e,t)})),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},PN)}function NN(e){uI(Yk),uI(BN)}var LN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.makeElOption=function(e,t,n,a,i){var r=n.axis;"angle"===r.dim&&(this.animationThreshold=Math.PI/18);var o=r.polar,s=o.getOtherAxis(r).getExtent(),l=r.dataToCoord(t),p=a.get("type");if(p&&"none"!==p){var c=lN(a),d=VN[p](r,o,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}var u=function(e,t,n,a,i){var r=t.axis,o=r.dataToCoord(e),s=a.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,p,c,d=a.getRadiusAxis().getExtent();if("radius"===r.dim){var u=[1,0,0,1,0,0];Ts(u,u,s),_s(u,u,[a.cx,a.cy]),l=Af([o,-i],u);var m=t.getModel("axisLabel").get("rotate")||0,h=Tk.innerTextLayout(s,m*Math.PI/180,-1);p=h.textAlign,c=h.textVerticalAlign}else{var g=d[1];l=a.coordToPoint([g+i,o]);var f=a.cx,y=a.cy;p=Math.abs(l[0]-f)/g<.3?"center":l[0]>f?"left":"right",c=Math.abs(l[1]-y)/g<.3?"middle":l[1]>y?"top":"bottom"}return{position:l,align:p,verticalAlign:c}}(t,n,0,o,a.get(["label","margin"]));pN(e,n,a,i,u)},t}(nN);var VN={line:function(e,t,n,a){return"angle"===e.dim?{type:"Line",shape:mN(t.coordToPoint([a[0],n]),t.coordToPoint([a[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,a){var i=Math.max(1,e.getBandWidth()),r=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:gN(t.cx,t.cy,a[0],a[1],(-n-i/2)*r,(i/2-n)*r)}:{type:"Sector",shape:gN(t.cx,t.cy,n-i/2,n+i/2,0,2*Math.PI)}}},qN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.findAxisModel=function(e){var t;return this.ecModel.eachComponent(e,(function(e){e.getCoordSysModel()===this&&(t=e)}),this),t},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(Pv),GN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Rd).models[0]},t.type="polarAxis",t}(Pv);Gr(GN,pI);var zN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="angleAxis",t}(GN),UN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="radiusAxis",t}(GN),jN=function(e){function t(t,n){return e.call(this,"radius",t,n)||this}return ze(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t}(BI);jN.prototype.dataToRadius=BI.prototype.dataToCoord,jN.prototype.radiusToData=BI.prototype.coordToData;var HN=Dd(),WN=function(e){function t(t,n){return e.call(this,"angle",t,n||[0,360])||this}return ze(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,t=e.getLabelModel(),n=e.scale,a=n.getExtent(),i=n.count();if(a[1]-a[0]<1)return 0;var r=a[0],o=e.dataToCoord(r+1)-e.dataToCoord(r),s=Math.abs(o),l=xc(null==r?"":r+"",t.getFont(),"center","top"),p=Math.max(l.height,7)/s;isNaN(p)&&(p=1/0);var c=Math.max(0,Math.floor(p)),d=HN(e.model),u=d.lastAutoInterval,m=d.lastTickCount;return null!=u&&null!=m&&Math.abs(u-c)<=1&&Math.abs(m-i)<=1&&u>c?c=u:(d.lastTickCount=i,d.lastAutoInterval=c),c},t}(BI);WN.prototype.dataToAngle=BI.prototype.dataToCoord,WN.prototype.angleToData=BI.prototype.coordToData;var $N=["radius","angle"],KN=function(){function e(e){this.dimensions=$N,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new jN,this._angleAxis=new WN,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},e.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},e.prototype.getAxis=function(e){return this["_"+e+"Axis"]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(e){var t=[],n=this._angleAxis,a=this._radiusAxis;return n.scale.type===e&&t.push(n),a.scale.type===e&&t.push(a),t},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},e.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},e.prototype.pointToData=function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},e.prototype.pointToCoord=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=this.getAngleAxis(),i=a.getExtent(),r=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]);a.inverse?r=o-360:o=r+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,p=l<r?1:-1;l<r||l>o;)l+=360*p;return[s,l]},e.prototype.coordToPoint=function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},e.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*a,endAngle:-n[1]*a,clockwise:e.inverse,contain:function(e,t){var n=e-this.cx,a=t-this.cy,i=n*n+a*a-1e-4,r=this.r,o=this.r0;return i<=r*r&&i>=o*o}}},e.prototype.convertToPixel=function(e,t,n){return YN(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return YN(t)===this?this.pointToData(n):null},e}();function YN(e){var t=e.seriesModel,n=e.polarModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function XN(e,t){var n=this,a=n.getAngleAxis(),i=n.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),e.eachSeries((function(e){if(e.coordinateSystem===n){var t=e.getData();Ur(lI(t,"radius"),(function(e){i.scale.unionExtentFromData(t,e)})),Ur(lI(t,"angle"),(function(e){a.scale.unionExtentFromData(t,e)}))}})),tI(a.scale,a.model),tI(i.scale,i.model),"category"===a.type&&!a.onBand){var r=a.getExtent(),o=360/a.scale.count();a.inverse?r[1]+=o:r[1]-=o,a.setExtent(r[0],r[1])}}function ZN(e,t){var n;if(e.type=t.get("type"),e.scale=nI(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),function(e){return"angleAxis"===e.mainType}(t)){e.inverse=e.inverse!==t.get("clockwise");var a=t.get("startAngle"),i=null!==(n=t.get("endAngle"))&&void 0!==n?n:a+(e.inverse?-360:360);e.setExtent(a,i)}t.axis=e,e.model=t}var QN={dimensions:$N,create:function(e,t){var n=[];return e.eachComponent("polar",(function(e,a){var i=new KN(a+"");i.update=XN;var r=i.getRadiusAxis(),o=i.getAngleAxis(),s=e.findAxisModel("radiusAxis"),l=e.findAxisModel("angleAxis");ZN(r,s),ZN(o,l),function(e,t,n){var a=t.get("center"),i=n.getWidth(),r=n.getHeight();e.cx=$c(a[0],i),e.cy=$c(a[1],r);var o=e.getRadiusAxis(),s=Math.min(i,r)/2,l=t.get("radius");null==l?l=[0,"100%"]:Zr(l)||(l=[0,l]);var p=[$c(l[0],s),$c(l[1],s)];o.inverse?o.setExtent(p[1],p[0]):o.setExtent(p[0],p[1])}(i,e,t),n.push(i),e.coordinateSystem=i,i.model=e})),e.eachSeries((function(e){if("polar"===e.get("coordinateSystem")){var t=e.getReferringComponents("polar",Rd).models[0];0,e.coordinateSystem=t.coordinateSystem}})),n}},JN=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function eL(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var a=e.coordToPoint([t[0],n]),i=e.coordToPoint([t[1],n]);return{x1:a[0],y1:a[1],x2:i[0],y2:i[1]}}function tL(e){return e.getRadiusAxis().inverse?0:1}function nL(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}var aL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return ze(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,a=n.polar,i=a.getRadiusAxis().getExtent(),r=n.getTicksCoords(),o=n.getMinorTicksCoords(),s=jr(n.getViewLabels(),(function(e){e=Fr(e);var t=n.scale,a="ordinal"===t.type?t.getRawOrdinalNumber(e.tickValue):e.tickValue;return e.coord=n.dataToCoord(a),e}));nL(s),nL(r),Ur(JN,(function(t){!e.get([t,"show"])||n.scale.isBlank()&&"axisLine"!==t||iL[t](this.group,e,a,r,o,i,s)}),this)}},t.type="angleAxis",t}(Nk),iL={axisLine:function(e,t,n,a,i,r){var o,s=t.getModel(["axisLine","lineStyle"]),l=n.getAngleAxis(),p=Math.PI/180,c=l.getExtent(),d=tL(n),u=d?0:1,m=360===Math.abs(c[1]-c[0])?"Circle":"Arc";(o=0===r[u]?new Wf[m]({shape:{cx:n.cx,cy:n.cy,r:r[d],startAngle:-c[0]*p,endAngle:-c[1]*p,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new Fg({shape:{cx:n.cx,cy:n.cy,r:r[d],r0:r[u]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,e.add(o)},axisTick:function(e,t,n,a,i,r){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=r[tL(n)],p=jr(a,(function(e){return new zg({shape:eL(n,[l,l+s],e.coord)})}));e.add(Mf(p,{style:Lr(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,n,a,i,r){if(i.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),p=r[tL(n)],c=[],d=0;d<i.length;d++)for(var u=0;u<i[d].length;u++)c.push(new zg({shape:eL(n,[p,p+l],i[d][u].coord)}));e.add(Mf(c,{style:Lr(s.getModel("lineStyle").getLineStyle(),Lr(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,n,a,i,r,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),p=l.get("margin"),c=t.get("triggerEvent");Ur(o,(function(a,i){var o=l,d=a.tickValue,u=r[tL(n)],m=n.coordToPoint([u+p,a.coord]),h=n.cx,g=n.cy,f=Math.abs(m[0]-h)/u<.3?"center":m[0]>h?"left":"right",y=Math.abs(m[1]-g)/u<.3?"middle":m[1]>g?"top":"bottom";if(s&&s[d]){var v=s[d];no(v)&&v.textStyle&&(o=new xy(v.textStyle,l,l.ecModel))}var b=new Lm({silent:Tk.isLabelSilent(t),style:Qf(o,{x:m[0],y:m[1],fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:a.formattedLabel,align:f,verticalAlign:y})});if(e.add(b),c){var x=Tk.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=a.rawLabel,Zm(b).eventData=x}}),this)},splitLine:function(e,t,n,a,i,r){var o=t.getModel("splitLine").getModel("lineStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var p=[],c=0;c<a.length;c++){var d=l++%s.length;p[d]=p[d]||[],p[d].push(new zg({shape:eL(n,r,a[c].coord)}))}for(c=0;c<p.length;c++)e.add(Mf(p[c],{style:Lr({stroke:s[c%s.length]},o.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,n,a,i,r){if(i.length){for(var o=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<i.length;l++)for(var p=0;p<i[l].length;p++)s.push(new zg({shape:eL(n,r,i[l][p].coord)}));e.add(Mf(s,{style:o.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,n,a,i,r){if(a.length){var o=t.getModel("splitArea").getModel("areaStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var p=[],c=Math.PI/180,d=-a[0].coord*c,u=Math.min(r[0],r[1]),m=Math.max(r[0],r[1]),h=t.get("clockwise"),g=1,f=a.length;g<=f;g++){var y=g===f?a[0].coord:a[g].coord,v=l++%s.length;p[v]=p[v]||[],p[v].push(new Og({shape:{cx:n.cx,cy:n.cy,r0:u,r:m,startAngle:d,endAngle:-y*c,clockwise:h},silent:!0})),d=-y*c}for(g=0;g<p.length;g++)e.add(Mf(p[g],{style:Lr({fill:s[g%s.length]},o.getAreaStyle()),silent:!0}))}}},rL=["axisLine","axisTickLabel","axisName"],oL=["splitLine","splitArea","minorSplitLine"],sL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return ze(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var n=this._axisGroup,a=this._axisGroup=new Bc;this.group.add(a);var i=e.axis,r=i.polar,o=r.getAngleAxis(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),p=o.getExtent()[0],c=i.getExtent(),d=function(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(r,e,p),u=new Tk(e,d);Ur(rL,u.add,u),a.add(u.getGroup()),Bf(n,a,e),Ur(oL,(function(t){e.get([t,"show"])&&!i.scale.isBlank()&&lL[t](this.group,e,r,p,c,s,l)}),this)}},t.type="radiusAxis",t}(Nk),lL={splitLine:function(e,t,n,a,i,r){var o=t.getModel("splitLine").getModel("lineStyle"),s=o.get("color"),l=0,p=n.getAngleAxis(),c=Math.PI/180,d=p.getExtent(),u=360===Math.abs(d[1]-d[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var m=[],h=0;h<r.length;h++){var g=l++%s.length;m[g]=m[g]||[],m[g].push(new Wf[u]({shape:{cx:n.cx,cy:n.cy,r:Math.max(r[h].coord,0),startAngle:-d[0]*c,endAngle:-d[1]*c,clockwise:p.inverse}}))}for(h=0;h<m.length;h++)e.add(Mf(m[h],{style:Lr({stroke:s[h%s.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,n,a,i,r,o){if(o.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),l=[],p=0;p<o.length;p++)for(var c=0;c<o[p].length;c++)l.push(new gg({shape:{cx:n.cx,cy:n.cy,r:o[p][c].coord}}));e.add(Mf(l,{style:Lr({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(e,t,n,a,i,r){if(r.length){var o=t.getModel("splitArea").getModel("areaStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var p=[],c=r[0].coord,d=1;d<r.length;d++){var u=l++%s.length;p[u]=p[u]||[],p[u].push(new Og({shape:{cx:n.cx,cy:n.cy,r0:c,r:r[d].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=r[d].coord}for(d=0;d<p.length;d++)e.add(Mf(p[d],{style:Lr({fill:s[d%s.length]},o.getAreaStyle()),silent:!0}))}}};function pL(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function cL(e,t){return t.dim+e.model.componentIndex}function dL(e,t,n){var a={},i=function(e){var t={};Ur(e,(function(e,n){var a=e.getData(),i=e.coordinateSystem,r=i.getBaseAxis(),o=cL(i,r),s=r.getExtent(),l="category"===r.type?r.getBandWidth():Math.abs(s[1]-s[0])/a.count(),p=t[o]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=p.stacks;t[o]=p;var d=pL(e);c[d]||p.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var u=$c(e.get("barWidth"),l),m=$c(e.get("barMaxWidth"),l),h=e.get("barGap"),g=e.get("barCategoryGap");u&&!c[d].width&&(u=Math.min(p.remainedWidth,u),c[d].width=u,p.remainedWidth-=u),m&&(c[d].maxWidth=m),null!=h&&(p.gap=h),null!=g&&(p.categoryGap=g)}));var n={};return Ur(t,(function(e,t){n[t]={};var a=e.stacks,i=e.bandWidth,r=$c(e.categoryGap,i),o=$c(e.gap,1),s=e.remainedWidth,l=e.autoWidthCount,p=(s-r)/(l+(l-1)*o);p=Math.max(p,0),Ur(a,(function(e,t){var n=e.maxWidth;n&&n<p&&(n=Math.min(n,s),e.width&&(n=Math.min(n,e.width)),s-=n,e.width=n,l--)})),p=(s-r)/(l+(l-1)*o),p=Math.max(p,0);var c,d=0;Ur(a,(function(e,t){e.width||(e.width=p),c=e,d+=e.width*(1+o)})),c&&(d-=c.width*o);var u=-d/2;Ur(a,(function(e,a){n[t][a]=n[t][a]||{offset:u,width:e.width},u+=e.width*(1+o)}))})),n}(Wr(t.getSeriesByType(e),(function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type})));t.eachSeriesByType(e,(function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),n=e.coordinateSystem,r=n.getBaseAxis(),o=cL(n,r),s=pL(e),l=i[o][s],p=l.offset,c=l.width,d=n.getOtherAxis(r),u=e.coordinateSystem.cx,m=e.coordinateSystem.cy,h=e.get("barMinHeight")||0,g=e.get("barMinAngle")||0;a[s]=a[s]||[];for(var f=t.mapDimension(d.dim),y=t.mapDimension(r.dim),v=eT(t,f),b="radius"!==r.dim||!e.get("roundCap",!0),x=d.dataToCoord(0),w=0,S=t.count();w<S;w++){var C=t.get(f,w),_=t.get(y,w),T=C>=0?"p":"n",I=x;v&&(a[s][_]||(a[s][_]={p:x,n:x}),I=a[s][_][T]);var E=void 0,M=void 0,k=void 0,P=void 0;if("radius"===d.dim){var D=d.dataToCoord(C)-x,O=r.dataToCoord(_);Math.abs(D)<h&&(D=(D<0?-1:1)*h),E=I,M=I+D,P=(k=O-p)-c,v&&(a[s][_][T]=M)}else{var A=d.dataToCoord(C,b)-x,F=r.dataToCoord(_);Math.abs(A)<g&&(A=(A<0?-1:1)*g),M=(E=F+p)+c,k=I,P=I+A,v&&(a[s][_][T]=P)}t.setItemLayout(w,{cx:u,cy:m,r0:E,r:M,startAngle:-k*Math.PI/180,endAngle:-P*Math.PI/180,clockwise:k>=P})}}}))}var uL={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},mL={splitNumber:5},hL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="polar",t}(Sw);function gL(e){uI(BN),Nk.registerAxisPointerClass("PolarAxisPointer",LN),e.registerCoordinateSystem("polar",QN),e.registerComponentModel(qN),e.registerComponentView(hL),lk(e,"angle",zN,uL),lk(e,"radius",UN,mL),e.registerComponentView(aL),e.registerComponentView(sL),e.registerLayout(Xr(dL,"bar"))}function fL(e,t){t=t||{};var n=e.coordinateSystem,a=e.axis,i={},r=a.position,o=a.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],p={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=["vertical"===o?p.vertical[r]:l[0],"horizontal"===o?p.horizontal[r]:l[3]];i.rotation=Math.PI/2*{horizontal:0,vertical:1}[o];i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[r],e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),co(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var c=t.rotate;return null==c&&(c=e.get(["axisLabel","rotate"])),i.labelRotation="top"===r?-c:c,i.z2=1,i}var yL=["axisLine","axisTickLabel","axisName"],vL=["splitArea","splitLine"],bL=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="SingleAxisPointer",n}ze(t,e),t.prototype.render=function(t,n,a,i){var r=this.group;r.removeAll();var o=this._axisGroup;this._axisGroup=new Bc;var s=fL(t),l=new Tk(t,s);Ur(yL,l.add,l),r.add(this._axisGroup),r.add(l.getGroup()),Ur(vL,(function(e){t.get([e,"show"])&&bL[e](this,this.group,this._axisGroup,t)}),this),Bf(o,this._axisGroup,t),e.prototype.render.call(this,t,n,a,i)},t.prototype.remove=function(){qk(this)},t.type="singleAxis"}(Nk),{splitLine:function(e,t,n,a){var i=a.axis;if(!i.scale.isBlank()){var r=a.getModel("splitLine"),o=r.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),p=a.coordinateSystem.getRect(),c=i.isHorizontal(),d=[],u=0,m=i.getTicksCoords({tickModel:r}),h=[],g=[],f=0;f<m.length;++f){var y=i.toGlobalCoord(m[f].coord);c?(h[0]=y,h[1]=p.y,g[0]=y,g[1]=p.y+p.height):(h[0]=p.x,h[1]=y,g[0]=p.x+p.width,g[1]=y);var v=new zg({shape:{x1:h[0],y1:h[1],x2:g[0],y2:g[1]},silent:!0});Pf(v.shape,l);var b=u++%s.length;d[b]=d[b]||[],d[b].push(v)}var x=o.getLineStyle(["color"]);for(f=0;f<d.length;++f)t.add(Mf(d[f],{style:Lr({stroke:s[f%s.length]},x),silent:!0}))}},splitArea:function(e,t,n,a){Vk(e,n,a,a)}}),xL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(Pv);Gr(xL,pI.prototype);var wL=function(e){function t(t,n,a,i,r){var o=e.call(this,t,n,a)||this;return o.type=i||"value",o.position=r||"bottom",o}return ze(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,t){return this.coordinateSystem.pointToData(e)[0]},t}(BI),SL=["single"];!function(){function e(e,t,n){this.type="single",this.dimension="single",this.dimensions=SL,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,n)}e.prototype._init=function(e,t,n){var a=this.dimension,i=new wL(a,nI(e),[0,0],e.get("type"),e.get("position")),r="category"===i.type;i.onBand=r&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},e.prototype.update=function(e,t){e.eachSeries((function(e){if(e.coordinateSystem===this){var t=e.getData();Ur(t.mapDimensionsAll(this.dimension),(function(e){this._axis.scale.unionExtentFromData(t,e)}),this),tI(this._axis.scale,this._axis.model)}}),this)},e.prototype.resize=function(e,t){this._rect=Cv({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),a=n?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(a[i],a[1-i]),this._updateAxisTransform(t,n?e.x:e.y)},e.prototype._updateAxisTransform=function(e,t){var n=e.getExtent(),a=n[0]+n[1],i=e.isHorizontal();e.toGlobalCoord=i?function(e){return e+t}:function(e){return a-e+t},e.toLocalCoord=i?function(e){return e-t}:function(e){return a-e+t}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},e.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},e.prototype.dataToPoint=function(e){var t=this.getAxis(),n=this.getRect(),a=[],i="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),a[i]=t.toGlobalCoord(t.dataToCoord(+e)),a[1-i]=0===i?n.y+n.height/2:n.x+n.width/2,a},e.prototype.convertToPixel=function(e,t,n){return CL(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return CL(t)===this?this.pointToData(n):null}}();function CL(e){var t=e.seriesModel,n=e.singleAxisModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}var _L=["x","y"],TL=["width","height"],IL=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.makeElOption=function(e,t,n,a,i){var r=n.axis,o=r.coordinateSystem,s=ML(o,1-EL(r)),l=o.dataToPoint(t)[0],p=a.get("type");if(p&&"none"!==p){var c=lN(a),d=IL[p](r,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}uN(t,e,fL(n),n,a,i)},t.prototype.getHandleTransform=function(e,t,n){var a=fL(t,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var i=dN(t.axis,e,a);return{x:i[0],y:i[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,a){var i=n.axis,r=i.coordinateSystem,o=EL(i),s=ML(r,o),l=[e.x,e.y];l[o]+=t[o],l[o]=Math.min(s[1],l[o]),l[o]=Math.max(s[0],l[o]);var p=ML(r,1-o),c=(p[1]+p[0])/2,d=[c,c];return d[o]=l[o],{x:l[0],y:l[1],rotation:e.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}}}(nN),{line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:mN([t,n[0]],[t,n[1]],EL(e))}},shadow:function(e,t,n){var a=e.getBandWidth(),i=n[1]-n[0];return{type:"Rect",shape:hN([t-a/2,n[0]],[a,i],EL(e))}}});function EL(e){return e.isHorizontal()?0:1}function ML(e,t){var n=e.getRect();return[n[_L[t]],n[_L[t]]+n[TL[t]]]}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.type="single"}(Sw);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(t,n,a){var i=Ev(t);e.prototype.init.apply(this,arguments),kL(t,i)},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),kL(this.option,t)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}}}(Pv);function kL(e,t){var n,a=e.cellSize;1===(n=Zr(a)?a:e.cellSize=[a,a]).length&&(n[1]=n[0]);var i=jr([0,1],(function(e){return function(e,t){return null!=e[xv[t][0]]||null!=e[xv[t][1]]&&null!=e[xv[t][2]]}(t,e)&&(n[e]="auto"),null!=n[e]&&"auto"!==n[e]}));Iv(e,t,{type:"box",ignoreSize:i})}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){var a=this.group;a.removeAll();var i=e.coordinateSystem,r=i.getRangeInfo(),o=i.getOrient(),s=t.getLocaleModel();this._renderDayRect(e,r,a),this._renderLines(e,r,o,a),this._renderYearText(e,r,o,a),this._renderMonthText(e,s,o,a),this._renderWeekText(e,s,r,o,a)},t.prototype._renderDayRect=function(e,t,n){for(var a=e.coordinateSystem,i=e.getModel("itemStyle").getItemStyle(),r=a.getCellWidth(),o=a.getCellHeight(),s=t.start.time;s<=t.end.time;s=a.getNextNDay(s,1).time){var l=a.dataToRect([s],!1).tl,p=new Rm({shape:{x:l[0],y:l[1],width:r,height:o},cursor:"default",style:i});n.add(p)}},t.prototype._renderLines=function(e,t,n,a){var i=this,r=e.coordinateSystem,o=e.getModel(["splitLine","lineStyle"]).getLineStyle(),s=e.get(["splitLine","show"]),l=o.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var p=t.start,c=0;p.time<=t.end.time;c++){u(p.formatedDate),0===c&&(p=r.getDateInfo(t.start.y+"-"+t.start.m));var d=p.date;d.setMonth(d.getMonth()+1),p=r.getDateInfo(d)}function u(t){i._firstDayOfMonth.push(r.getDateInfo(t)),i._firstDayPoints.push(r.dataToRect([t],!1).tl);var l=i._getLinePointsOfOneWeek(e,t,n);i._tlpoints.push(l[0]),i._blpoints.push(l[l.length-1]),s&&i._drawSplitline(l,o,a)}u(r.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,l,n),o,a),s&&this._drawSplitline(i._getEdgesPoints(i._blpoints,l,n),o,a)},t.prototype._getEdgesPoints=function(e,t,n){var a=[e[0].slice(),e[e.length-1].slice()],i="horizontal"===n?0:1;return a[0][i]=a[0][i]-t/2,a[1][i]=a[1][i]+t/2,a},t.prototype._drawSplitline=function(e,t,n){var a=new Vg({z2:20,shape:{points:e},style:t});n.add(a)},t.prototype._getLinePointsOfOneWeek=function(e,t,n){for(var a=e.coordinateSystem,i=a.getDateInfo(t),r=[],o=0;o<7;o++){var s=a.getNextNDay(i.time,o),l=a.dataToRect([s.time],!1);r[2*s.day]=l.tl,r[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return r},t.prototype._formatterLabel=function(e,t){return Jr(e)&&e?(n=e,Ur(t,(function(e,t){n=n.replace("{"+t+"}",a?ss(e):e)})),n):Qr(e)?e(t):t.nameMap;var n,a},t.prototype._yearTextPositionControl=function(e,t,n,a,i){var r=t[0],o=t[1],s=["center","bottom"];"bottom"===a?(o+=i,s=["center","top"]):"left"===a?r-=i:"right"===a?(r+=i,s=["center","top"]):o-=i;var l=0;return"left"!==a&&"right"!==a||(l=Math.PI/2),{rotation:l,x:r,y:o,style:{align:s[0],verticalAlign:s[1]}}},t.prototype._renderYearText=function(e,t,n,a){var i=e.getModel("yearLabel");if(i.get("show")){var r=i.get("margin"),o=i.get("position");o||(o="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,p=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,d={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],p],right:[s[c][0],p]},u=t.start.y;+t.end.y>+t.start.y&&(u=u+"-"+t.end.y);var m=i.get("formatter"),h={start:t.start.y,end:t.end.y,nameMap:u},g=this._formatterLabel(m,h),f=new Lm({z2:30,style:Qf(i,{text:g})});f.attr(this._yearTextPositionControl(f,d[o],n,o,r)),a.add(f)}},t.prototype._monthTextPositionControl=function(e,t,n,a,i){var r="left",o="top",s=e[0],l=e[1];return"horizontal"===n?(l+=i,t&&(r="center"),"start"===a&&(o="bottom")):(s+=i,t&&(o="middle"),"start"===a&&(r="right")),{x:s,y:l,align:r,verticalAlign:o}},t.prototype._renderMonthText=function(e,t,n,a){var i=e.getModel("monthLabel");if(i.get("show")){var r=i.get("nameMap"),o=i.get("margin"),s=i.get("position"),l=i.get("align"),p=[this._tlpoints,this._blpoints];r&&!Jr(r)||(r&&(t=Dy(r)||t),r=t.get(["time","monthAbbr"])||[]);var c="start"===s?0:1,d="horizontal"===n?0:1;o="start"===s?-o:o;for(var u="center"===l,m=0;m<p[c].length-1;m++){var h=p[c][m].slice(),g=this._firstDayOfMonth[m];if(u){var f=this._firstDayPoints[m];h[d]=(f[d]+p[0][m+1][d])/2}var y=i.get("formatter"),v=r[+g.m-1],b={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:v},x=this._formatterLabel(y,b),w=new Lm({z2:30,style:Nr(Qf(i,{text:x}),this._monthTextPositionControl(h,u,n,s,o))});a.add(w)}}},t.prototype._weekTextPositionControl=function(e,t,n,a,i){var r="center",o="middle",s=e[0],l=e[1],p="start"===n;return"horizontal"===t?(s=s+a+(p?1:-1)*i[0]/2,r=p?"right":"left"):(l=l+a+(p?1:-1)*i[1]/2,o=p?"bottom":"top"),{x:s,y:l,align:r,verticalAlign:o}},t.prototype._renderWeekText=function(e,t,n,a,i){var r=e.getModel("dayLabel");if(r.get("show")){var o=e.coordinateSystem,s=r.get("position"),l=r.get("nameMap"),p=r.get("margin"),c=o.getFirstDayOfWeek();if(!l||Jr(l))l&&(t=Dy(l)||t),l=t.get(["time","dayOfWeekShort"])||jr(t.get(["time","dayOfWeekAbbr"]),(function(e){return e[0]}));var d=o.getNextNDay(n.end.time,7-n.lweek).time,u=[o.getCellWidth(),o.getCellHeight()];p=$c(p,Math.min(u[1],u[0])),"start"===s&&(d=o.getNextNDay(n.start.time,-(7+n.fweek)).time,p=-p);for(var m=0;m<7;m++){var h,g=o.getNextNDay(d,m),f=o.dataToRect([g.time],!1).center;h=Math.abs((m+c)%7);var y=new Lm({z2:30,style:Nr(Qf(r,{text:l[h]}),this._weekTextPositionControl(f,a,s,p,u))});i.add(y)}}},t.type="calendar"}(Sw);var PL=864e5;!function(){function e(t,n,a){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(e){var t=(e=id(e)).getFullYear(),n=e.getMonth()+1,a=n<10?"0"+n:""+n,i=e.getDate(),r=i<10?"0"+i:""+i,o=e.getDay();return{y:t+"",m:a,d:r,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+a+"-"+r,date:e}},e.prototype.getNextNDay=function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},e.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,a=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),o="horizontal"===this._orient?[n,7]:[7,n];Ur([0,1],(function(e){p(i,e)&&(r[a[e]]=i[e]*o[e])}));var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=Cv(r,s);function p(e,t){return null!=e[t]&&"auto"!==e[t]}Ur([0,1],(function(e){p(i,e)||(i[e]=l[a[e]]/o[e])})),this._sw=i[0],this._sh=i[1]},e.prototype.dataToPoint=function(e,t){Zr(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),a=this._rangeInfo,i=n.formatedDate;if(t&&!(n.time>=a.start.time&&n.time<a.end.time+PL))return[NaN,NaN];var r=n.day,o=this._getRangeInfo([a.start.time,i]).nthWeek;return"vertical"===this._orient?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},e.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},e.prototype.dataToRect=function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},e.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,a):this._getDateByWeeksAndDay(t,n-1,a)},e.prototype.convertToPixel=function(e,t,n){var a=DL(t);return a===this?a.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){var a=DL(t);return a===this?a.pointToData(n):null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var e,t=this._model.get("range");if(Zr(t)&&1===t.length&&(t=t[0]),Zr(t))e=t;else{var n=t.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var a=this.getDateInfo(n),i=a.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);e=[a.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return t;var o=this._getRangeInfo(e);return o.start.time>o.end.time&&e.reverse(),e},e.prototype._getRangeInfo=function(e){var t,n=[this.getDateInfo(e[0]),this.getDateInfo(e[1])];n[0].time>n[1].time&&(t=!0,n.reverse());var a=Math.floor(n[1].time/PL)-Math.floor(n[0].time/PL)+1,i=new Date(n[0].time),r=i.getDate(),o=n[1].date.getDate();i.setDate(r+a-1);var s=i.getDate();if(s!==o)for(var l=i.getTime()-n[1].time>0?1:-1;(s=i.getDate())!==o&&(i.getTime()-n[1].time)*l>0;)a-=l,i.setDate(s-l);var p=Math.floor((a+n[0].day+6)/7),c=t?1-p:p-1;return t&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:a,weeks:p,nthWeek:c,fweek:n[0].day,lweek:n[1].day}},e.prototype._getDateByWeeksAndDay=function(e,t,n){var a=this._getRangeInfo(n);if(e>a.weeks||0===e&&t<a.fweek||e===a.weeks&&t>a.lweek)return null;var i=7*(e-1)-a.fweek+t,r=new Date(a.start.time);return r.setDate(+a.start.d+i),this.getDateInfo(r)},e.create=function(t,n){var a=[];return t.eachComponent("calendar",(function(i){var r=new e(i,t,n);a.push(r),i.coordinateSystem=r})),t.eachSeries((function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=a[e.get("calendarIndex")||0])})),a},e.dimensions=["time","value"]}();function DL(e){var t=e.calendarModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem:null}function OL(e,t){var n;return Ur(t,(function(t){null!=e[t]&&"auto"!==e[t]&&(n=!0)})),n}var AL=["transition","enterFrom","leaveTo"],FL=AL.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function RL(e,t,n){if(n&&(!e[n]&&t[n]&&(e[n]={}),e=e[n],t=t[n]),e&&t)for(var a=n?AL:FL,i=0;i<a.length;i++){var r=a[i];null==e[r]&&null!=t[r]&&(e[r]=t[r])}}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventAutoZ=!0,n}ze(t,e),t.prototype.mergeOption=function(t,n){var a=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,t,n),this.option.elements=a},t.prototype.optionUpdated=function(e,t){var n=this.option,a=(t?n:e).elements,i=n.elements=t?[]:n.elements,r=[];this._flatten(a,r,null);var o=_d(i,r,"normalMerge"),s=this._elOptionsToUpdate=[];Ur(o,(function(e,t){var n=e.newOption;n&&(s.push(n),function(e,t){var n=e.existing;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),null==t.parentId){var a=t.parentOption;a?t.parentId=a.id:n&&(t.parentId=n.parentId)}t.parentOption=null}(e,n),function(e,t,n){var a=Nr({},n),i=e[t],r=n.$action||"merge";"merge"===r?i?(Rr(i,a,!0),Iv(i,a,{ignoreSize:!0}),Mv(n,i),RL(n,i),RL(n,i,"shape"),RL(n,i,"style"),RL(n,i,"extra"),n.clipPath=i.clipPath):e[t]=a:"replace"===r?e[t]=a:"remove"===r&&i&&(e[t]=null)}(i,t,n),function(e,t){if(e&&(e.hv=t.hv=[OL(t,["left","right"]),OL(t,["top","bottom"])],"group"===e.type)){var n=e,a=t;null==n.width&&(n.width=a.width=0),null==n.height&&(n.height=a.height=0)}}(i[t],n))}),this),n.elements=Wr(i,(function(e){return e&&delete e.$action,null!=e}))},t.prototype._flatten=function(e,t,n){Ur(e,(function(e){if(e){n&&(e.parentOption=n),t.push(e);var a=e.children;a&&a.length&&this._flatten(a,t,e),delete e.children}}),this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]}}(Pv);var BL={path:null,compoundPath:null,group:Bc,image:Mm,text:Lm},NL=Dd();!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(){this._elMap=_o()},t.prototype.render=function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},t.prototype._updateElements=function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,a=this.group,i=e.get("z"),r=e.get("zlevel");Ur(t,(function(t){var o=Ed(t.id,null),s=null!=o?n.get(o):null,l=Ed(t.parentId,null),p=null!=l?n.get(l):a,c=t.type,d=t.style;"text"===c&&d&&t.hv&&t.hv[1]&&(d.textVerticalAlign=d.textBaseline=d.verticalAlign=d.align=null);var u=t.textContent,m=t.textConfig;if(d&&QR(d,c,!!m,!!u)){var h=JR(d,c,!0);!m&&h.textConfig&&(m=t.textConfig=h.textConfig),!u&&h.textContent&&(u=h.textContent)}var g=function(e){return e=Nr({},e),Ur(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(bv),(function(t){delete e[t]})),e}(t);var f=t.$action||"merge",y="merge"===f,v="replace"===f;if(y){var b=s;(I=!s)?b=VL(o,p,t.type,n):(b&&(NL(b).isNew=!1),xB(b)),b&&(lB(b,g,e,{isInit:I}),GL(b,t,i,r))}else if(v){qL(s,t,n,e);var x=VL(o,p,t.type,n);x&&(lB(x,g,e,{isInit:!0}),GL(x,t,i,r))}else"remove"===f&&(pB(s,t),qL(s,t,n,e));var w=n.get(o);if(w&&u)if(y){var S=w.getTextContent();S?S.attr(u):w.setTextContent(new Lm(u))}else v&&w.setTextContent(new Lm(u));if(w){var C=t.clipPath;if(C){var _=C.type,T=void 0,I=!1;if(y){var E=w.getClipPath();T=(I=!E||NL(E).type!==_)?LL(_):E}else v&&(I=!0,T=LL(_));w.setClipPath(T),lB(T,C,e,{isInit:I}),wB(T,C.keyframeAnimation,e)}var M=NL(w);w.setTextConfig(m),M.option=t,function(e,t,n){var a=Zm(e).eventData;e.silent||e.ignore||a||(a=Zm(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name});a&&(a.info=n.info)}(w,e,t),Uf({el:w,componentModel:e,itemName:w.name,itemTooltipOption:t.tooltip}),wB(w,t.keyframeAnimation,e)}}))}},t.prototype._relocate=function(e,t){for(var n=e.option.elements,a=this.group,i=this._elMap,r=t.getWidth(),o=t.getHeight(),s=["x","y"],l=0;l<n.length;l++){if((h=null!=(m=Ed((u=n[l]).id,null))?i.get(m):null)&&h.isGroup){var p=(g=h.parent)===a,c=NL(h),d=NL(g);c.width=$c(c.option.width,p?r:d.width)||0,c.height=$c(c.option.height,p?o:d.height)||0}}for(l=n.length-1;l>=0;l--){var u,m,h;if(h=null!=(m=Ed((u=n[l]).id,null))?i.get(m):null){var g=h.parent,f=(d=NL(g),{}),y=_v(h,u,g===a?{width:r,height:o}:{width:d.width,height:d.height},null,{hv:u.hv,boundingMode:u.bounding},f);if(!NL(h).isNew&&y){for(var v=u.transition,b={},x=0;x<s.length;x++){var w=s[x],S=f[w];v&&(dB(v)||Vr(v,w)>=0)?b[w]=S:h[w]=S}cf(h,b,e,0)}else h.attr(f)}}},t.prototype._clear=function(){var e=this,t=this._elMap;t.each((function(n){qL(n,NL(n).option,t,e._lastGraphicModel)})),this._elMap=_o()},t.prototype.dispose=function(){this._clear()},t.type="graphic"}(Sw);function LL(e){var t=Mo(BL,e)?BL[e]:_f(e);var n=new t({});return NL(n).type=e,n}function VL(e,t,n,a){var i=LL(n);return t.add(i),a.set(e,i),NL(i).id=e,NL(i).isNew=!0,i}function qL(e,t,n,a){e&&e.parent&&("group"===e.type&&e.traverse((function(e){qL(e,t,n,a)})),cB(e,t,a),n.removeKey(NL(e).id))}function GL(e,t,n,a){e.isGroup||Ur([["cursor",wu.prototype.cursor],["zlevel",a||0],["z",n||0],["z2",0]],(function(n){var a=n[0];Mo(t,a)?e[a]=uo(t[a],n[1]):null==e[a]&&(e[a]=n[1])})),Ur(Kr(t),(function(n){if(0===n.indexOf("on")){var a=t[n];e[n]=Qr(a)?a:null}})),Mo(t,"draggable")&&(e.draggable=t.draggable),null!=t.name&&(e.name=t.name),null!=t.id&&(e.id=t.id)}var zL=["x","y","radius","angle","single"],UL=["cartesian2d","polar","singleAxis"];function jL(e){return e+"Axis"}function HL(e,t){var n,a=_o(),i=[],r=_o();e.eachComponent({mainType:"dataZoom",query:t},(function(e){r.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",o)}while(n);function o(e){!r.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=a.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){r.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(a.get(e)||a.set(e,[]))[t]=!0}))}return i}function WL(e){var t=e.ecModel,n={infoList:[],infoMap:_o()};return e.eachTargetAxis((function(e,a){var i=t.getComponent(jL(e),a);if(i){var r=i.getCoordSysModel();if(r){var o=r.uid,s=n.infoMap.get(o);s||(s={model:r,axisModels:[]},n.infoList.push(s),n.infoMap.set(o,s)),s.axisModels.push(i)}}})),n}var $L=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),KL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return ze(t,e),t.prototype.init=function(e,t,n){var a=YL(e);this.settledOption=a,this.mergeDefaultAndTheme(e,n),this._doInit(a)},t.prototype.mergeOption=function(e){var t=YL(e);Rr(this.option,e,!0),Rr(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;Ur([["start","startValue"],["end","endValue"]],(function(e,a){"value"===this._rangePropMode[a]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=_o();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return Ur(zL,(function(n){var a=this.getReferringComponents(jL(n),Bd);if(a.specified){t=!0;var i=new $L;Ur(a.models,(function(e){i.add(e.componentIndex)})),e.set(n,i)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,a=!0;if(a){var i="vertical"===t?"y":"x";r(n.findComponents({mainType:i+"Axis"}),i)}a&&r(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function r(t,n){var i=t[0];if(i){var r=new $L;if(r.add(i.componentIndex),e.set(n,r),a=!1,"x"===n||"y"===n){var o=i.getReferringComponents("grid",Rd).models[0];o&&Ur(t,(function(e){i.componentIndex!==e.componentIndex&&o===e.getReferringComponents("grid",Rd).models[0]&&r.add(e.componentIndex)}))}}}a&&Ur(zL,(function(t){if(a){var i=n.findComponents({mainType:jL(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var r=new $L;r.add(i[0].componentIndex),e.set(t,r),a=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");Ur([["start","startValue"],["end","endValue"]],(function(a,i){var r=null!=e[a[0]],o=null!=e[a[1]];r&&!o?t[i]="percent":!r&&o?t[i]="value":n?t[i]=n[i]:r&&(t[i]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(jL(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,a){Ur(n.indexList,(function(n){e.call(t,a,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(jL(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;Ur([["start","startValue"],["end","endValue"]],(function(a){null==e[a[0]]&&null==e[a[1]]||(t[a[0]]=n[a[0]]=e[a[0]],t[a[1]]=n[a[1]]=e[a[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;Ur(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){var n;if(null==e&&null==t){if(n=this.findRepresentativeAxisProxy())return n.getDataValueWindow()}else if(n=this.getAxisProxy(e,t))return n.getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),a=0;a<n.length;a++)for(var i=n[a],r=this._targetAxisInfoMap.get(i),o=0;o<r.indexList.length;o++){var s=this.getAxisProxy(i,r.indexList[o]);if(s&&s.hostedBy(this))return s;s&&!t&&(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Pv);function YL(e){var t={};return Ur(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.type="dataZoom.select"}(KL);var XL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.render=function(e,t,n,a){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(Sw),ZL=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.type="dataZoom.select"}(XL),Ur),QL=Yc,JL=function(){function e(e,t,n,a){this._dimName=e,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return Vr(UL,t)>=0}(t)){var n=jL(this._dimName),a=t.getReferringComponents(n,Rd).models[0];a&&this._axisIndex===a.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return Fr(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,a=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),r=[0,100],o=[],s=[];ZL(["start","end"],(function(l,p){var c=e[l],d=e[l+"Value"];"percent"===i[p]?(null==c&&(c=r[p]),d=a.parse(Wc(c,r,n))):(t=!0,c=Wc(d=null==d?n[p]:a.parse(d),n,r)),s[p]=null==d||isNaN(d)?n[p]:d,o[p]=null==c||isNaN(c)?r[p]:c})),QL(s),QL(o);var l=this._minMaxSpan;function p(e,t,n,i,r){var o=r?"Span":"ValueSpan";MA(0,e,n,"all",l["min"+o],l["max"+o]);for(var s=0;s<2;s++)t[s]=Wc(e[s],n,i,!0),r&&(t[s]=a.parse(t[s]))}return t?p(s,o,n,r,!1):p(o,s,r,n,!0),{valueWindow:s,percentWindow:o}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var a=[1/0,-1/0];ZL(n,(function(e){!function(e,t,n){t&&Ur(lI(t,n),(function(n){var a=t.getApproximateExtent(n);a[0]<e[0]&&(e[0]=a[0]),a[1]>e[1]&&(e[1]=a[1])}))}(a,e.getData(),t)}));var i=e.getAxisModel(),r=QT(i.axis.scale,i,a).calculate();return[r.min,r.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,a=this.getTargetSeriesModels(),i=e.get("filterMode"),r=this._valueWindow;"none"!==i&&ZL(a,(function(e){var t=e.getData(),a=t.mapDimensionsAll(n);if(a.length){if("weakFilter"===i){var o=t.getStore(),s=jr(a,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<a.length;l++){var p=o.get(s[l],e),c=!isNaN(p),d=p<r[0],u=p>r[1];if(c&&!d&&!u)return!0;c&&(i=!0),d&&(t=!0),u&&(n=!0)}return i&&t&&n}))}else ZL(a,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=r[0]&&e<=r[1]}(e)?e:NaN})));else{var a={};a[n]=r,t.selectRange(a)}}));ZL(a,(function(e){t.setApproximateExtent(r,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;ZL(["min","max"],(function(a){var i=t.get(a+"Span"),r=t.get(a+"ValueSpan");null!=r&&(r=this.getAxisModel().axis.scale.parse(r)),null!=r?i=Wc(n[0]+r,n,[0,100],!0):null!=i&&(r=Wc(i,[0,100],n,!0)-n[0]),e[a+"Span"]=i,e[a+"ValueSpan"]=r}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var a=Qc(n,[0,500]);a=Math.min(a,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(a)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(a)),i.freeze()}},e}();var eV={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(a,i){var r=e.getComponent(jL(a),i);t(a,i,r,n)}))}))}t((function(e,t,n,a){n.__dzAxisProxy=null}));var n=[];t((function(t,a,i,r){i.__dzAxisProxy||(i.__dzAxisProxy=new JL(t,a,r,e),n.push(i.__dzAxisProxy))}));var a=_o();return Ur(n,(function(e){Ur(e.getTargetSeriesModels(),(function(e){a.set(e.uid,e)}))})),a},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){var a=e.getAxisProxy(t,n);a&&a.reset(e)})),e.eachTargetAxis((function(n,a){var i=e.getAxisProxy(n,a);i&&i.filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),a=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:a[0],endValue:a[1]})}}))}};var tV=!1;function nV(e){tV||(tV=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,eV),function(e){e.registerAction("dataZoom",(function(e,t){Ur(HL(t,e),(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}var aV=function(){},iV={};function rV(e){return iV[e]}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;Ur(this.option.feature,(function(e,n){var a=rV(n);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),Rr(e,a.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}}}(Pv);function oV(e,t){var n=cv(t.get("padding")),a=t.getItemStyle(["color","opacity"]);return a.fill=t.get("backgroundColor"),e=new Rm({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1})}!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.render=function(e,t,n,a){var i=this.group;if(i.removeAll(),e.get("show")){var r=+e.get("itemSize"),o="vertical"===e.get("orient"),s=e.get("feature")||{},l=this._features||(this._features={}),p=[];Ur(s,(function(e,t){p.push(t)})),new C_(this._featureNames||[],p).add(c).update(c).remove(Xr(c,null)).execute(),this._featureNames=p,function(e,t,n){var a=t.getBoxLayoutParams(),i=t.get("padding"),r={width:n.getWidth(),height:n.getHeight()},o=Cv(a,r,i);Sv(t.get("orient"),e,t.get("itemGap"),o.width,o.height),_v(e,a,r,i)}(i,e,n),i.add(oV(i.getBoundingRect(),e)),o||i.eachChild((function(e){var t=e.__title,a=e.ensureState("emphasis"),o=a.textConfig||(a.textConfig={}),s=e.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!Qr(l)&&t){var p=l.style||(l.style={}),c=xc(t,Lm.makeFont(p)),d=e.x+i.x,u=!1;e.y+i.y+r+c.height>n.getHeight()&&(o.position="top",u=!0);var m=u?-5-c.height:r+10;d+c.width/2>n.getWidth()?(o.position=["100%",m],p.align="right"):d-c.width/2<0&&(o.position=[0,m],p.align="left")}}))}function c(c,d){var u,m=p[c],h=p[d],g=s[m],f=new xy(g,e,e.ecModel);if(a&&null!=a.newTitle&&a.featureName===m&&(g.title=a.newTitle),m&&!h){if(function(e){return 0===e.indexOf("my")}(m))u={onclick:f.option.onclick,featureName:m};else{var y=rV(m);if(!y)return;u=new y}l[m]=u}else if(!(u=l[h]))return;u.uid=Sy("toolbox-feature"),u.model=f,u.ecModel=t,u.api=n;var v=u instanceof aV;m||!h?!f.get("show")||v&&u.unusable?v&&u.remove&&u.remove(t,n):(!function(a,s,l){var p,c,d=a.getModel("iconStyle"),u=a.getModel(["emphasis","iconStyle"]),m=s instanceof aV&&s.getIcons?s.getIcons():a.get("icon"),h=a.get("title")||{};Jr(m)?(p={})[l]=m:p=m;Jr(h)?(c={})[l]=h:c=h;var g=a.iconPaths={};Ur(p,(function(l,p){var m=Vf(l,{},{x:-r/2,y:-r/2,width:r,height:r});m.setStyle(d.getItemStyle()),m.ensureState("emphasis").style=u.getItemStyle();var h=new Lm({style:{text:c[p],align:u.get("textAlign"),borderRadius:u.get("textBorderRadius"),padding:u.get("textPadding"),fill:null,font:iy({fontStyle:u.get("textFontStyle"),fontFamily:u.get("textFontFamily"),fontSize:u.get("textFontSize"),fontWeight:u.get("textFontWeight")},t)},ignore:!0});m.setTextContent(h),Uf({el:m,componentModel:e,itemName:p,formatterParamsExtra:{title:c[p]}}),m.__title=c[p],m.on("mouseover",(function(){var t=u.getItemStyle(),a=o?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";h.setStyle({fill:u.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:u.get("textBackgroundColor")}),m.setTextConfig({position:u.get("textPosition")||a}),h.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==a.get(["iconStatus",p])&&n.leaveEmphasis(this),h.hide()})),("emphasis"===a.get(["iconStatus",p])?Ih:Eh)(m),i.add(m),m.on("click",Yr(s.onclick,s,t,n,p)),g[p]=m}))}(f,u,m),f.setIconStatus=function(e,t){var n=this.option,a=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,a[e]&&("emphasis"===t?Ih:Eh)(a[e])},u instanceof aV&&u.render&&u.render(f,t,n,a)):v&&u.dispose&&u.dispose(t,n)}},t.prototype.updateView=function(e,t,n,a){Ur(this._features,(function(e){e instanceof aV&&e.updateView&&e.updateView(e.model,t,n,a)}))},t.prototype.remove=function(e,t){Ur(this._features,(function(n){n instanceof aV&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){Ur(this._features,(function(n){n instanceof aV&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox"}(Sw);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.onclick=function(e,t){var n=this.model,a=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),r=i?"svg":n.get("type",!0)||"png",o=t.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=mr.browser;if(Qr(MouseEvent)&&(s.newEdge||!s.ie&&!s.edge)){var l=document.createElement("a");l.download=a+"."+r,l.target="_blank",l.href=o;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||i){var c=o.split(","),d=c[0].indexOf("base64")>-1,u=i?decodeURIComponent(c[1]):c[1];d&&(u=window.atob(u));var m=a+"."+r;if(window.navigator.msSaveOrOpenBlob){for(var h=u.length,g=new Uint8Array(h);h--;)g[h]=u.charCodeAt(h);var f=new Blob([g]);window.navigator.msSaveOrOpenBlob(f,m)}else{var y=document.createElement("iframe");document.body.appendChild(y);var v=y.contentWindow,b=v.document;b.open("image/svg+xml","replace"),b.write(u),b.close(),v.focus(),b.execCommand("SaveAs",!0,m),document.body.removeChild(y)}}else{var x=n.get("lang"),w='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',S=window.open();S.document.write(w),S.document.title=a}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}}}(aV);var sV="__ec_magicType_stack__",lV=[["line","bar"],["stack"]],pV=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return Ur(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var a=this.model,i=a.get(["seriesIndex",n]);if(pV[n]){var r,o={series:[]};Ur(lV,(function(e){Vr(e,n)>=0&&Ur(e,(function(e){a.setIconStatus(e,"normal")}))})),a.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},(function(e){var t=e.subType,i=e.id,r=pV[n](t,i,e,a);r&&(Lr(r,e.option),o.series.push(r));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var p=l.dim+"Axis",c=e.getReferringComponents(p,Rd).models[0].componentIndex;o[p]=o[p]||[];for(var d=0;d<=c;d++)o[p][c]=o[p][c]||{};o[p][c].boundaryGap="bar"===n}}}));var s=n;"stack"===n&&(r=Rr({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),"emphasis"!==a.get(["iconStatus",n])&&(s="tiled")),t.dispatchAction({type:"changeMagicType",currentType:s,newOption:o,newTitle:r,featureName:"magicType"})}}}(aV),{line:function(e,t,n,a){if("bar"===e)return Rr({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(e,t,n,a){if("line"===e)return Rr({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(e,t,n,a){var i=n.get("stack")===sV;if("line"===e||"bar"===e)return a.setIconStatus("stack",i?"normal":"emphasis"),Rr({id:t,stack:i?"":sV},a.get(["option","stack"])||{},!0)}});g_({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var cV=new Array(60).join("-"),dV="\t";function uV(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var mV=new RegExp("[\t]+","g");function hV(e,t){var n=e.split(new RegExp("\n*"+cV+"\n*","g")),a={series:[]};return Ur(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(dV)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=[],a=jr(uV(t.shift()).split(mV),(function(e){return{name:e,data:[]}})),i=0;i<t.length;i++){var r=uV(t[i]).split(mV);n.push(r.shift());for(var o=0;o<r.length;o++)a[o]&&(a[o].data[i]=r[o])}return{series:a,categories:n}}(e),r=t[n],o=r.axisDim+"Axis";r&&(a[o]=a[o]||[],a[o][r.axisIndex]={data:i.categories},a.series=a.series.concat(i.series))}else{i=function(e){for(var t=e.split(/\n+/g),n=uV(t.shift()),a=[],i=0;i<t.length;i++){var r=uV(t[i]);if(r){var o=r.split(mV),s="",l=void 0,p=!1;isNaN(o[0])?(p=!0,s=o[0],o=o.slice(1),a[i]={name:s,value:[]},l=a[i].value):l=a[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);1===l.length&&(p?a[i].value=l[0]:a[i]=l[0])}}return{name:n,data:a}}(e);a.series.push(i)}})),a}!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),a=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=a.get("backgroundColor")||"#fff";var r=document.createElement("h4"),o=a.get("lang")||[];r.innerHTML=o[0]||a.get("title"),r.style.cssText="margin:10px 20px",r.style.color=a.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var p=a.get("optionToContent"),c=a.get("contentToOption"),d=function(e){var t,n,a,i=function(e){var t={},n=[],a=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var r=i.getBaseAxis();if("category"===r.type){var o=r.dim+"_"+r.index;t[o]||(t[o]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},a.push({axisDim:r.dim,axisIndex:r.index})),t[o].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:a}}(e);return{value:Wr([(n=i.seriesGroupByCategoryAxis,a=[],Ur(n,(function(e,t){var n=e.categoryAxis,i=e.valueAxis.dim,r=[" "].concat(jr(e.series,(function(e){return e.name}))),o=[n.model.getCategories()];Ur(e.series,(function(e){var t=e.getRawData();o.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var s=[r.join(dV)],l=0;l<o[0].length;l++){for(var p=[],c=0;c<o.length;c++)p.push(o[c][l]);s.push(p.join(dV))}a.push(s.join("\n"))})),a.join("\n\n"+cV+"\n\n")),(t=i.other,jr(t,(function(e){var t=e.getRawData(),n=[e.name],a=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],r=t.getName(i),o=0;o<e-1;o++)a[o]=arguments[o];n.push((r?r+dV:"")+a.join(dV))})),n.join("\n")})).join("\n\n"+cV+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+cV+"\n\n"),meta:i.meta}}(e);if(Qr(p)){var u=p(t.getOption());Jr(u)?s.innerHTML=u:ro(u)&&s.appendChild(u)}else{l.readOnly=a.get("readOnly");var m=l.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=a.get("textColor"),m.borderColor=a.get("textareaBorderColor"),m.backgroundColor=a.get("textareaColor"),l.value=d.value,s.appendChild(l)}var h=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var f="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",y=document.createElement("div"),v=document.createElement("div");f+=";background-color:"+a.get("buttonColor"),f+=";color:"+a.get("buttonTextColor");var b=this;function x(){n.removeChild(i),b._dom=null}gs(y,"click",x),gs(v,"click",(function(){if(null==c&&null!=p||null!=c&&null==p)x();else{var e;try{e=Qr(c)?c(s,t.getOption()):hV(l.value,h)}catch(e){throw x(),new Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),x()}})),y.innerHTML=o[1],v.innerHTML=o[2],v.style.cssText=y.style.cssText=f,!a.get("readOnly")&&g.appendChild(v),g.appendChild(y),i.appendChild(r),i.appendChild(s),i.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}}}(aV);function gV(e,t){return jr(e,(function(e,n){var a=t&&t[n];if(no(a)&&!Zr(a)){no(e)&&!Zr(e)||(e={value:e});var i=null!=a.name&&null==e.name;return e=Lr(e,a),i&&delete e.name,e}return e}))}g_({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];Ur(e.newOption.series,(function(e){var a=t.getSeriesByName(e.name)[0];if(a){var i=a.get("data");n.push({name:e.name,data:gV(e.data,i)})}else n.push(Nr({type:"scatter"},e))})),t.mergeOption(Lr({series:n},e.newOption))}));var fV=Ur,yV=Dd();function vV(e){var t=yV(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.onclick=function(e,t){!function(e){yV(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}}}(aV);g_({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var bV=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],xV=function(){function e(e,t,n){var a=this;this._targetInfoList=[];var i=SV(t,e);Ur(CV,(function(e,t){(!n||!n.include||Vr(n.include,t)>=0)&&e(i,a._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var a=IV[e.brushType](0,n,t);e.__rangeOffset={offset:MV[e.brushType](a.values,e.range,[1,1]),xyMinMax:a.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){Ur(e,(function(e){var a=this.findTargetInfo(e,t);a&&!0!==a&&Ur(a.coordSyses,(function(a){var i=IV[e.brushType](1,a,e.range,!0);n(e,i.values,a,t)}))}),this)},e.prototype.setInputRanges=function(e,t){Ur(e,(function(e){var n,a,i,r,o,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=IV[e.brushType](0,s.coordSys,e.coordRange),p=e.__rangeOffset;e.range=p?MV[e.brushType](l.values,p.offset,(n=l.xyMinMax,a=p.xyMinMax,i=PV(n),r=PV(a),o=[i[0]/r[0],i[1]/r[1]],isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return jr(this._targetInfoList,(function(n){var a=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:MF(a),isTargetByCursor:PF(a,e,n.coordSysModel),getLinearBrushOtherExtent:kF(a)}}))},e.prototype.controlSeries=function(e,t,n){var a=this.findTargetInfo(e,n);return!0===a||a&&Vr(a.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,a=SV(t,e),i=0;i<n.length;i++){var r=n[i],o=e.panelId;if(o){if(r.panelId===o)return r}else for(var s=0;s<_V.length;s++)if(_V[s](a,r))return r}return!0},e}();function wV(e){return e[0]>e[1]&&e.reverse(),e}function SV(e,t){return Ad(e,t,{includeMainTypes:bV})}var CV={grid:function(e,t){var n=e.xAxisModels,a=e.yAxisModels,i=e.gridModels,r=_o(),o={},s={};(n||a||i)&&(Ur(n,(function(e){var t=e.axis.grid.model;r.set(t.id,t),o[t.id]=!0})),Ur(a,(function(e){var t=e.axis.grid.model;r.set(t.id,t),s[t.id]=!0})),Ur(i,(function(e){r.set(e.id,e),o[e.id]=!0,s[e.id]=!0})),r.each((function(e){var i=e.coordinateSystem,r=[];Ur(i.getCartesians(),(function(e,t){(Vr(n,e.getAxis("x").model)>=0||Vr(a,e.getAxis("y").model)>=0)&&r.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:r[0],coordSyses:r,getPanelRect:TV.grid,xAxisDeclared:o[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){Ur(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:TV.geo})}))}},_V=[function(e,t){var n=e.xAxisModel,a=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&a&&(i=a.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],TV={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Of(e)),t}},IV={lineX:Xr(EV,0),lineY:Xr(EV,1),rect:function(e,t,n,a){var i=e?t.pointToData([n[0][0],n[1][0]],a):t.dataToPoint([n[0][0],n[1][0]],a),r=e?t.pointToData([n[0][1],n[1][1]],a):t.dataToPoint([n[0][1],n[1][1]],a),o=[wV([i[0],r[0]]),wV([i[1],r[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,n,a){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:jr(n,(function(n){var r=e?t.pointToData(n,a):t.dataToPoint(n,a);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r})),xyMinMax:i}}};function EV(e,t,n,a){var i=n.getAxis(["x","y"][e]),r=wV(jr([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(a[e]),!0):i.toGlobalCoord(i.dataToCoord(a[e]))}))),o=[];return o[e]=r,o[1-e]=[NaN,NaN],{values:r,xyMinMax:o}}var MV={lineX:Xr(kV,0),lineY:Xr(kV,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return jr(e,(function(e,a){return[e[0]-n[0]*t[a][0],e[1]-n[1]*t[a][1]]}))}};function kV(e,t,n,a){return[t[0]-a[e]*n[0],t[1]-a[e]*n[1]]}function PV(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var DV,OV,AV=Ur,FV=vd+"toolbox-dataZoom_",RV=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.render=function(e,t,n,a){this._brushController||(this._brushController=new ZA(n.getZr()),this._brushController.on("brush",Yr(this._onBrush,this)).mount()),function(e,t,n,a,i){var r=n._isZoomActive;a&&"takeGlobalCursor"===a.type&&(r="dataZoomSelect"===a.key&&a.dataZoomSelectActive);n._isZoomActive=r,e.setIconStatus("zoom",r?"emphasis":"normal");var o=new xV(BV(e),t,{include:["grid"]}),s=o.makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!r||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,a,n),function(e,t){e.setIconStatus("back",function(e){return vV(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){RV[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},a=this.ecModel;this._brushController.updateCovers([]),new xV(BV(this.model),a,{include:["grid"]}).matchOutputRanges(t,a,(function(e,t,n){if("cartesian2d"===n.type){var a=e.brushType;"rect"===a?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[a],n,t)}})),function(e,t){var n=vV(e);fV(t,(function(t,a){for(var i=n.length-1;i>=0&&!n[i][a];i--);if(i<0){var r=e.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(r){var o=r.getPercentRange();n[0][a]={dataZoomId:a,start:o[0],end:o[1]}}}})),n.push(t)}(a,n),this._dispatchZoomAction(n)}function i(e,t,i){var r=t.getAxis(e),o=r.model,s=function(e,t,n){var a;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(a=n)})),a}(e,o,a),l=s.findRepresentativeAxisProxy(o);if(l){var p=l.getMinMaxSpan();null==p.minValueSpan&&null==p.maxValueSpan||(i=MA(0,i.slice(),r.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan))}s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];AV(e,(function(e,n){t.push(Fr(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}}}(aV),{zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=vV(e),n=t[t.length-1];t.length>1&&t.pop();var a={};return fV(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){a[n]=e;break}})),a}(this.ecModel))}});function BV(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}DV="dataZoom",OV=function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var a=t.getModel(n),i=[],r=Ad(e,BV(a));return AV(r.xAxisModels,(function(e){return o(e,"xAxis","xAxisIndex")})),AV(r.yAxisModels,(function(e){return o(e,"yAxis","yAxisIndex")})),i}function o(e,t,n){var r=e.componentIndex,o={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:FV+t+r};o[n]=r,i.push(o)}},fo(null==Qv.get(DV)&&OV),Qv.set(DV,OV);var NV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Pv);function LV(e){var t=e.get("confine");return null!=t?!!t:"richText"===e.get("renderMode")}function VV(e){if(mr.domSupported)for(var t=document.documentElement.style,n=0,a=e.length;n<a;n++)if(e[n]in t)return e[n]}var qV=VV(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function GV(e,t){if(!e)return t;t=pv(t,!0);var n=e.indexOf(t);return(e=-1===n?t:"-"+e.slice(0,n)+"-"+t).toLowerCase()}var zV=GV(VV(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),UV=GV(qV,"transform"),jV="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(mr.transform3dSupported?"will-change:transform;":"");function HV(e,t,n){var a=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!mr.transformSupported)return n?"top:"+i+";left:"+a+";":[["top",i],["left",a]];var r=mr.transform3dSupported,o="translate"+(r?"3d":"")+"("+a+","+i+(r?",0":"")+")";return n?"top:0;left:0;"+UV+":"+o+";":[["top",0],["left",0],[qV,o]]}function WV(e,t,n){var a=[],i=e.get("transitionDuration"),r=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),p=e.get("shadowOffsetY"),c=e.getModel("textStyle"),d=lw(e,"html"),u=l+"px "+p+"px "+o+"px "+s;return a.push("box-shadow:"+u),t&&i&&a.push(function(e,t){var n="cubic-bezier(0.23,1,0.32,1)",a=" "+e/2+"s "+n,i="opacity"+a+",visibility"+a;return t||(a=" "+e+"s "+n,i+=mr.transformSupported?","+UV+a:",left"+a+",top"+a),zV+":"+i}(i,n)),r&&a.push("background-color:"+r),Ur(["width","color","radius"],(function(t){var n="border-"+t,i=pv(n),r=e.get(i);null!=r&&a.push(n+":"+r+("color"===t?"":"px"))})),a.push(function(e){var t=[],n=e.get("fontSize"),a=e.getTextColor();a&&t.push("color:"+a),t.push("font:"+e.getFont()),n&&t.push("line-height:"+Math.round(3*n/2)+"px");var i=e.get("textShadowColor"),r=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&r&&t.push("text-shadow:"+o+"px "+s+"px "+r+"px "+i),Ur(["decoration","align"],(function(n){var a=e.get(n);a&&t.push("text-"+n+":"+a)})),t.join(";")}(c)),null!=d&&a.push("padding:"+cv(d).join("px ")+"px"),a.join(";")+";"}function $V(e,t,n,a,i){var r=t&&t.painter;if(n){var o=r&&r.getViewportRoot();o&&function(e,t,n,a,i){as(ns,t,a,i,!0)&&as(e,n,ns[0],ns[1])}(e,o,n,a,i)}else{e[0]=a,e[1]=i;var s=r&&r.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var KV=function(){function e(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,mr.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var a=this._zr=e.getZr(),i=t.appendTo,r=i&&(Jr(i)?document.querySelector(i):ro(i)?i:Qr(i)&&i(e.getDom()));$V(this._styleCoord,a,r,e.getWidth()/2,e.getHeight()/2),(r||e.getDom()).appendChild(n),this._api=e,this._container=r;var o=this;n.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},n.onmousemove=function(e){if(e=e||window.event,!o._enterable){var t=a.handler;hs(a.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},n.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return e.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),n=(r="position",(o=(i=t).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i))?r?o[r]:o:null),a=t.style;"absolute"!==a.position&&"absolute"!==n&&(a.position="relative")}var i,r,o,s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},e.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,a=n.style,i=this._styleCoord;n.innerHTML?a.cssText=jV+WV(e,!this._firstShow,this._longHide)+HV(i[0],i[1],!0)+"border-color:"+fv(t)+";"+(e.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,t,n,a,i){var r=this.el;if(null!=e){var o="";if(Jr(i)&&"item"===n.get("trigger")&&!LV(n)&&(o=function(e,t,n){if(!Jr(n)||"inside"===n)return"";var a=e.get("backgroundColor"),i=e.get("borderWidth");t=fv(t);var r,o,s="left"===(r=n)?"right":"right"===r?"left":"top"===r?"bottom":"top",l=Math.max(1.5*Math.round(i),6),p="",c=UV+":";Vr(["left","right"],s)>-1?(p+="top:50%",c+="translateY(-50%) rotate("+(o="left"===s?-225:-45)+"deg)"):(p+="left:50%",c+="translateX(-50%) rotate("+(o="top"===s?225:45)+"deg)");var d=o*Math.PI/180,u=l+i,m=u*Math.abs(Math.cos(d))+u*Math.abs(Math.sin(d)),h=t+" solid "+i+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",(p+=";"+s+":-"+Math.round(100*((m-Math.SQRT2*i)/2+Math.SQRT2*i-(m-u)/2))/100+"px")+";"+c+";","border-bottom:"+h,"border-right:"+h,"background-color:"+a+";"].join("")+'"></div>'}(n,a,i)),Jr(e))r.innerHTML=e+o;else if(e){r.innerHTML="",Zr(e)||(e=[e]);for(var s=0;s<e.length;s++)ro(e[s])&&e[s].parentNode!==r&&r.appendChild(e[s]);if(o&&r.childNodes.length){var l=document.createElement("div");l.innerHTML=o,r.appendChild(l)}}}else r.innerHTML=""},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},e.prototype.moveTo=function(e,t){var n=this._styleCoord;if($V(n,this._zr,this._container,e,t),null!=n[0]&&null!=n[1]){var a=this.el.style;Ur(HV(n[0],n[1]),(function(e){a[e[0]]=e[1]}))}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",mr.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return e._longHide=!0}),500)},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Yr(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},e}(),YV=function(){function e(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),QV(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return e.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(e,t,n,a,i){var r=this;no(e)&&gd(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new Lm({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:o.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:lw(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),Ur(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],(function(e){r.el.style[e]=n.get(e)})),Ur(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],(function(e){r.el.style[e]=o.get(e)||0})),this._zr.add(this.el);var s=this;this.el.on("mouseover",(function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0})),this.el.on("mouseout",(function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}))},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),n=ZV(e.style);return[t.width+n.left+n.right,t.height+n.top+n.bottom]},e.prototype.moveTo=function(e,t){var n=this.el;if(n){var a=this._styleCoord;QV(a,this._zr,e,t),e=a[0],t=a[1];var i=n.style,r=XV(i.borderWidth||0),o=ZV(i);n.x=e+r+o.left,n.y=t+r+o.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Yr(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function XV(e){return Math.max(0,e)}function ZV(e){var t=XV(e.shadowBlur||0),n=XV(e.shadowOffsetX||0),a=XV(e.shadowOffsetY||0);return{left:XV(t-n),right:XV(t+n),top:XV(t-a),bottom:XV(t+a)}}function QV(e,t,n,a){e[0]=n,e[1]=a,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var JV=new Rm({shape:{x:-1,y:-1,width:2,height:2}}),eq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.init=function(e,t){if(!mr.node&&t.getDom()){var n,a=e.getComponent("tooltip"),i=this._renderMode="auto"===(n=a.get("renderMode"))?mr.domSupported?"html":"richText":n||"html";this._tooltipContent="richText"===i?new YV(t):new KV(t,{appendTo:a.get("appendToBody",!0)?"body":a.get("appendTo",!0)})}},t.prototype.render=function(e,t,n){if(!mr.node&&n.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n;var a=this._tooltipContent;a.update(e),a.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?Bw(this,"_updatePosition",50,"fixRate"):Nw(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");CN("itemTooltip",this._api,Yr((function(t,n,a){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,a):"leave"===t&&this._hide(a))}),this))},t.prototype._keepShow=function(){var e=this._tooltipModel,t=this._ecModel,n=this._api,a=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==a&&"click"!==a){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&i.manuallyShowTip(e,t,n,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})}))}},t.prototype.manuallyShowTip=function(e,t,n,a){if(a.from!==this.uid&&!mr.node&&n.getDom()){var i=nq(a,n);this._ticket="";var r=a.dataByCoordSys,o=function(e,t,n){var a=Fd(e).queryOptionMap,i=a.keys()[0];if(!i||"series"===i)return;var r=Nd(t,i,a.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=r.models[0];if(!o)return;var s,l=n.getViewOfComponentModel(o);if(l.group.traverse((function(t){var n=Zm(t).tooltipConfig;if(n&&n.name===e.name)return s=t,!0})),s)return{componentMainType:i,componentIndex:o.componentIndex,el:s}}(a,t,n);if(o){var s=o.el.getBoundingRect().clone();s.applyTransform(o.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:o.el,position:a.position,positionDefault:"bottom"},i)}else if(a.tooltip&&null!=a.x&&null!=a.y){var l=JV;l.x=a.x,l.y=a.y,l.update(),Zm(l).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:l},i)}else if(r)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:r,tooltipOption:a.tooltipOption},i);else if(null!=a.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,a))return;var p=MN(a,t),c=p.point[0],d=p.point[1];null!=c&&null!=d&&this._tryShow({offsetX:c,offsetY:d,target:p.el,position:a.position,positionDefault:"bottom"},i)}else null!=a.x&&null!=a.y&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},i))}},t.prototype.manuallyHideTip=function(e,t,n,a){var i=this._tooltipContent;this._tooltipModel&&i.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(nq(a,n))},t.prototype._manuallyAxisShowTip=function(e,t,n,a){var i=a.seriesIndex,r=a.dataIndex,o=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=i&&null!=r&&null!=o){var s=t.getSeriesByIndex(i);if(s)if("axis"===tq([s.getData().getItemModel(r),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:i,dataIndex:r,position:a.position}),!0}},t.prototype._tryShow=function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(n){var i,r;if("legend"===Zm(n).ssrType)return;this._lastDataByCoordSys=null,IS(n,(function(e){return null!=Zm(e).dataIndex?(i=e,!0):null!=Zm(e).tooltipConfig?(r=e,!0):void 0}),!0),i?this._showSeriesItemTooltip(e,i,t):r?this._showComponentItemTooltip(e,r,t):this._hide(t)}else this._lastDataByCoordSys=null,this._hide(t)}},t.prototype._showOrMove=function(e,t){var n=e.get("showDelay");t=Yr(t,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(t,n):t()},t.prototype._showAxisTooltip=function(e,t){var n=this._ecModel,a=this._tooltipModel,i=[t.offsetX,t.offsetY],r=tq([t.tooltipOption],a),o=this._renderMode,s=[],l=Qx("section",{blocks:[],noHeader:!0}),p=[],c=new pw;Ur(e,(function(e){Ur(e.dataByAxis,(function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value;if(t&&t.axis&&null!=i){var r=cN(i,t.axis,n,e.seriesDataIndices,e.valueLabelOpt),d=Qx("section",{header:r,noHeader:!yo(r),sortBlocks:!0,blocks:[]});l.blocks.push(d),Ur(e.seriesDataIndices,(function(l){var u=n.getSeriesByIndex(l.seriesIndex),m=l.dataIndexInside,h=u.getDataParams(m);if(!(h.dataIndex<0)){h.axisDim=e.axisDim,h.axisIndex=e.axisIndex,h.axisType=e.axisType,h.axisId=e.axisId,h.axisValue=iI(t.axis,{value:i}),h.axisValueLabel=r,h.marker=c.makeTooltipMarker("item",fv(h.color),o);var g=mx(u.formatTooltip(m,!0,null)),f=g.frag;if(f){var y=tq([u],a).get("valueFormatter");d.blocks.push(y?Nr({valueFormatter:y},f):f)}g.text&&p.push(g.text),s.push(h)}}))}}))})),l.blocks.reverse(),p.reverse();var d=t.position,u=r.get("order"),m=iw(l,c,o,u,n.get("useUTC"),r.get("textStyle"));m&&p.unshift(m);var h="richText"===o?"\n\n":"<br/>",g=p.join(h);this._showOrMove(r,(function(){this._updateContentNotChangedOnAxis(e,s)?this._updatePosition(r,d,i[0],i[1],this._tooltipContent,s):this._showTooltipContent(r,g,s,Math.random()+"",i[0],i[1],d,null,c)}))},t.prototype._showSeriesItemTooltip=function(e,t,n){var a=this._ecModel,i=Zm(t),r=i.seriesIndex,o=a.getSeriesByIndex(r),s=i.dataModel||o,l=i.dataIndex,p=i.dataType,c=s.getData(p),d=this._renderMode,u=e.positionDefault,m=tq([c.getItemModel(l),s,o&&(o.coordinateSystem||{}).model],this._tooltipModel,u?{position:u}:null),h=m.get("trigger");if(null==h||"item"===h){var g=s.getDataParams(l,p),f=new pw;g.marker=f.makeTooltipMarker("item",fv(g.color),d);var y=mx(s.formatTooltip(l,!1,p)),v=m.get("order"),b=m.get("valueFormatter"),x=y.frag,w=x?iw(b?Nr({valueFormatter:b},x):x,f,d,v,a.get("useUTC"),m.get("textStyle")):y.text,S="item_"+s.name+"_"+l;this._showOrMove(m,(function(){this._showTooltipContent(m,w,g,S,e.offsetX,e.offsetY,e.position,e.target,f)})),n({type:"showTip",dataIndexInside:l,dataIndex:c.getRawIndex(l),seriesIndex:r,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,t,n){var a=Zm(t),i=a.tooltipConfig.option||{};if(Jr(i)){i={content:i,formatter:i}}var r=[i],o=this._ecModel.getComponent(a.componentMainType,a.componentIndex);o&&r.push(o),r.push({formatter:i.content});var s=e.positionDefault,l=tq(r,this._tooltipModel,s?{position:s}:null),p=l.get("content"),c=Math.random()+"",d=new pw;this._showOrMove(l,(function(){var n=Fr(l.get("formatterParams")||{});this._showTooltipContent(l,p,n,c,e.offsetX,e.offsetY,e.position,t,d)})),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,t,n,a,i,r,o,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var p=this._tooltipContent;p.setEnterable(e.get("enterable"));var c=e.get("formatter");o=o||e.get("position");var d=t,u=this._getNearestPoint([i,r],n,e.get("trigger"),e.get("borderColor")).color;if(c)if(Jr(c)){var m=e.ecModel.get("useUTC"),h=Zr(n)?n[0]:n;d=c,h&&h.axisType&&h.axisType.indexOf("time")>=0&&(d=Hy(h.axisValue,d,m)),d=hv(d,n,!0)}else if(Qr(c)){var g=Yr((function(t,a){t===this._ticket&&(p.setContent(a,l,e,u,o),this._updatePosition(e,o,i,r,p,n,s))}),this);this._ticket=a,d=c(n,a,g)}else d=c;p.setContent(d,l,e,u,o),p.show(e,u),this._updatePosition(e,o,i,r,p,n,s)}},t.prototype._getNearestPoint=function(e,t,n,a){return"axis"===n||Zr(t)?{color:a||("html"===this._renderMode?"#fff":"none")}:Zr(t)?void 0:{color:a||t.color||t.borderColor}},t.prototype._updatePosition=function(e,t,n,a,i,r,o){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var p=i.getSize(),c=e.get("align"),d=e.get("verticalAlign"),u=o&&o.getBoundingRect().clone();if(o&&u.applyTransform(o.transform),Qr(t)&&(t=t([n,a],r,i.el,u,{viewSize:[s,l],contentSize:p.slice()})),Zr(t))n=$c(t[0],s),a=$c(t[1],l);else if(no(t)){var m=t;m.width=p[0],m.height=p[1];var h=Cv(m,{width:s,height:l});n=h.x,a=h.y,c=null,d=null}else if(Jr(t)&&o){var g=function(e,t,n,a){var i=n[0],r=n[1],o=Math.ceil(Math.SQRT2*a)+8,s=0,l=0,p=t.width,c=t.height;switch(e){case"inside":s=t.x+p/2-i/2,l=t.y+c/2-r/2;break;case"top":s=t.x+p/2-i/2,l=t.y-r-o;break;case"bottom":s=t.x+p/2-i/2,l=t.y+c+o;break;case"left":s=t.x-i-o,l=t.y+c/2-r/2;break;case"right":s=t.x+p+o,l=t.y+c/2-r/2}return[s,l]}(t,u,p,e.get("borderWidth"));n=g[0],a=g[1]}else{g=function(e,t,n,a,i,r,o){var s=n.getSize(),l=s[0],p=s[1];null!=r&&(e+l+r+2>a?e-=l+r:e+=r);null!=o&&(t+p+o>i?t-=p+o:t+=o);return[e,t]}(n,a,i,s,l,c?null:20,d?null:20);n=g[0],a=g[1]}if(c&&(n-=aq(c)?p[0]/2:"right"===c?p[0]:0),d&&(a-=aq(d)?p[1]/2:"bottom"===d?p[1]:0),LV(e)){g=function(e,t,n,a,i){var r=n.getSize(),o=r[0],s=r[1];return e=Math.min(e+o,a)-o,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}(n,a,i,s,l);n=g[0],a=g[1]}i.moveTo(n,a)},t.prototype._updateContentNotChangedOnAxis=function(e,t){var n=this._lastDataByCoordSys,a=this._cbParamsList,i=!!n&&n.length===e.length;return i&&Ur(n,(function(n,r){var o=n.dataByAxis||[],s=(e[r]||{}).dataByAxis||[];(i=i&&o.length===s.length)&&Ur(o,(function(e,n){var r=s[n]||{},o=e.seriesDataIndices||[],l=r.seriesDataIndices||[];(i=i&&e.value===r.value&&e.axisType===r.axisType&&e.axisId===r.axisId&&o.length===l.length)&&Ur(o,(function(e,t){var n=l[t];i=i&&e.seriesIndex===n.seriesIndex&&e.dataIndex===n.dataIndex})),a&&Ur(e.seriesDataIndices,(function(e){var n=e.seriesIndex,r=t[n],o=a[n];r&&o&&o.data!==r.data&&(i=!1)}))}))})),this._lastDataByCoordSys=e,this._cbParamsList=t,!!i},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,t){!mr.node&&t.getDom()&&(Nw(this,"_updatePosition"),this._tooltipContent.dispose(),IN("itemTooltip",t))},t.type="tooltip",t}(Sw);function tq(e,t,n){var a,i=t.ecModel;n?(a=new xy(n,i,i),a=new xy(t.option,a,i)):a=t;for(var r=e.length-1;r>=0;r--){var o=e[r];o&&(o instanceof xy&&(o=o.get("tooltip",!0)),Jr(o)&&(o={formatter:o}),o&&(a=new xy(o,a,i)))}return a}function nq(e,t){return e.dispatchAction||Yr(t.dispatchAction,t)}function aq(e){return"center"===e||"middle"===e}function iq(e){uI(BN),e.registerComponentModel(NV),e.registerComponentView(eq),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ko),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ko)}var rq=Ur;function oq(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function sq(e,t,n){var a={};return rq(t,(function(t){var i,r=a[t]=((i=function(){}).prototype.__hidden=i.prototype,new i);rq(e[t],(function(e,a){if(uO.isValidType(a)){var i={type:a,visual:e};n&&n(i,t),r[a]=new uO(i),"opacity"===a&&((i=Fr(i)).type="colorAlpha",r.__hidden.__alphaForOpacity=new uO(i))}}))})),a}function lq(e,t,n){var a;Ur(n,(function(e){t.hasOwnProperty(e)&&oq(t[e])&&(a=!0)})),a&&Ur(n,(function(n){t.hasOwnProperty(n)&&oq(t[n])?e[n]=Fr(t[n]):delete e[n]}))}pq(0),pq(1);function pq(e){var t=["x","y"],n=["width","height"];return{point:function(t,n,a){if(t){var i=a.range;return cq(t[e],i)}},rect:function(a,i,r){if(a){var o=r.range,s=[a[t[e]],a[t[e]]+a[n[e]]];return s[1]<s[0]&&s.reverse(),cq(s[0],o)||cq(s[1],o)||cq(o[0],s)||cq(o[1],s)}}}}function cq(e,t){return t[0]<=e&&e<=t[1]}function dq(e){e.eachComponent({mainType:"brush"},(function(t){(t.brushTargetManager=new xV(t.option,e)).setInputRanges(t.areas,e)}))}(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new ZA(t.getZr())).on("brush",Yr(this._onBrush,this)).mount()},t.prototype.render=function(e,t,n,a){this.model=e,this._updateController(e,t,n,a)},t.prototype.updateTransform=function(e,t,n,a){dq(t),this._updateController(e,t,n,a)},t.prototype.updateVisual=function(e,t,n,a){this.updateTransform(e,t,n,a)},t.prototype.updateView=function(e,t,n,a){this._updateController(e,t,n,a)},t.prototype._updateController=function(e,t,n,a){(!a||a.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var t=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:t,areas:Fr(n),$from:t}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:t,areas:Fr(n),$from:t})},t.type="brush"})(Sw),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.areas=[],n.brushOption={},n}ze(t,e),t.prototype.optionUpdated=function(e,t){var n=this.option;!t&&lq(n,e,["inBrush","outOfBrush"]);var a=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},a.hasOwnProperty("liftZ")||(a.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=jr(e,(function(e){return uq(this.option,e)}),this))},t.prototype.setBrushOption=function(e){this.brushOption=uq(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4}}(Pv);function uq(e,t){return Rr({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new xy(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var mq=["rect","polygon","lineX","lineY","keep","clear"];!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ze(t,e),t.prototype.render=function(e,t,n){var a,i,r;t.eachComponent({mainType:"brush"},(function(e){a=e.brushType,i=e.brushOption.brushMode||"single",r=r||!!e.areas.length})),this._brushType=a,this._brushMode=i,Ur(e.get("type",!0),(function(t){e.setIconStatus(t,("keep"===t?"multiple"===i:"clear"===t?r:t===a)?"emphasis":"normal")}))},t.prototype.updateView=function(e,t,n){this.render(e,t,n)},t.prototype.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return Ur(e.get("type",!0),(function(e){t[e]&&(n[e]=t[e])})),n},t.prototype.onclick=function(e,t,n){var a=this._brushType,i=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?a:a!==n&&n,brushMode:"keep"===n?"multiple"===i?"single":"multiple":i}})},t.getDefaultOption=function(e){return{show:!0,type:mq.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}}}(aV);(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}ze(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}}})(Pv),function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),e.get("show")){var a=this.group,i=e.getModel("textStyle"),r=e.getModel("subtextStyle"),o=e.get("textAlign"),s=uo(e.get("textBaseline"),e.get("textVerticalAlign")),l=new Lm({style:Qf(i,{text:e.get("text"),fill:i.getTextColor()},{disableBox:!0}),z2:10}),p=l.getBoundingRect(),c=e.get("subtext"),d=new Lm({style:Qf(r,{text:c,fill:r.getTextColor(),y:p.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),u=e.get("link"),m=e.get("sublink"),h=e.get("triggerEvent",!0);l.silent=!u&&!h,d.silent=!m&&!h,u&&l.on("click",(function(){yv(u,"_"+e.get("target"))})),m&&d.on("click",(function(){yv(m,"_"+e.get("subtarget"))})),Zm(l).eventData=Zm(d).eventData=h?{componentType:"title",componentIndex:e.componentIndex}:null,a.add(l),c&&a.add(d);var g=a.getBoundingRect(),f=e.getBoxLayoutParams();f.width=g.width,f.height=g.height;var y=Cv(f,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));o||("middle"===(o=e.get("left")||e.get("right"))&&(o="center"),"right"===o?y.x+=y.width:"center"===o&&(y.x+=y.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?y.y+=y.height:"middle"===s&&(y.y+=y.height/2),s=s||"top"),a.x=y.x,a.y=y.y,a.markRedraw();var v={align:o,verticalAlign:s};l.setStyle(v),d.setStyle(v),g=a.getBoundingRect();var b=y.margin,x=e.getItemStyle(["color","opacity"]);x.fill=e.get("backgroundColor");var w=new Rm({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:e.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});a.add(w)}},t.type="title"}(Sw);var hq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode="box",n}return ze(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,t=this.option,n=t.data||[],a=t.axisType,i=this._names=[];"category"===a?(e=[],Ur(n,(function(t,n){var a,r=Ed(Sd(t),"");no(t)?(a=Fr(t)).value=n:a=n,e.push(a),i.push(r)}))):e=n;var r={category:"ordinal",time:"time",value:"number"}[a]||"number";(this._data=new $_([{name:"value",type:r}],this)).initData(e,i)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Pv),gq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="timeline.slider",t.defaultOption=Cy(hq.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(hq);Gr(gq,ux.prototype);var fq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="timeline",t}(Sw),yq=function(e){function t(t,n,a,i){var r=e.call(this,t,n,a)||this;return r.type=i||"value",r}return ze(t,e),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(BI),vq=Math.PI,bq=Dd();!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.init=function(e,t){this.api=t},t.prototype.render=function(e,t,n){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var a=this._layout(e,n),i=this._createGroup("_mainGroup"),r=this._createGroup("_labelGroup"),o=this._axis=this._createAxis(a,e);e.formatTooltip=function(e){return Qx("nameValue",{noName:!0,value:o.scale.getLabel({value:e})})},Ur(["AxisLine","AxisTick","Control","CurrentPointer"],(function(t){this["_render"+t](a,i,o,e)}),this),this._renderAxisLabel(a,r,o,e),this._position(a,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,t){var n,a,i,r,o=e.get(["label","position"]),s=e.get("orient"),l=function(e,t){return Cv(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t),p={horizontal:"center",vertical:(n=null==o||"auto"===o?"horizontal"===s?l.y+l.height/2<t.getHeight()/2?"-":"+":l.x+l.width/2<t.getWidth()/2?"+":"-":Jr(o)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:o)>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:vq/2},u="vertical"===s?l.height:l.width,m=e.getModel("controlStyle"),h=m.get("show",!0),g=h?m.get("itemSize"):0,f=h?m.get("itemGap"):0,y=g+f,v=e.get(["label","rotate"])||0;v=v*vq/180;var b=m.get("position",!0),x=h&&m.get("showPlayBtn",!0),w=h&&m.get("showPrevBtn",!0),S=h&&m.get("showNextBtn",!0),C=0,_=u;"left"===b||"bottom"===b?(x&&(a=[0,0],C+=y),w&&(i=[C,0],C+=y),S&&(r=[_-g,0],_-=y)):(x&&(a=[_-g,0],_-=y),w&&(i=[0,0],C+=y),S&&(r=[_-g,0],_-=y));var T=[C,_];return e.get("inverse")&&T.reverse(),{viewRect:l,mainLength:u,orient:s,rotation:d[s],labelRotation:v,labelPosOpt:n,labelAlign:e.get(["label","align"])||p[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||c[s],playPosition:a,prevBtnPosition:i,nextBtnPosition:r,axisExtent:T,controlSize:g,controlGap:f}},t.prototype._position=function(e,t){var n=this._mainGroup,a=this._labelGroup,i=e.viewRect;if("vertical"===e.orient){var r=[1,0,0,1,0,0],o=i.x,s=i.y+i.height;_s(r,r,[-o,-s]),Ts(r,r,-vq/2),_s(r,r,[o,s]),(i=i.clone()).applyTransform(r)}var l=f(i),p=f(n.getBoundingRect()),c=f(a.getBoundingRect()),d=[n.x,n.y],u=[a.x,a.y];u[0]=d[0]=l[0][0];var m,h=e.labelPosOpt;null==h||Jr(h)?(y(d,p,l,1,m="+"===h?0:1),y(u,c,l,1,1-m)):(y(d,p,l,1,m=h>=0?0:1),u[1]=d[1]+h);function g(e){e.originX=l[0][0]-e.x,e.originY=l[1][0]-e.y}function f(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function y(e,t,n,a,i){e[a]+=n[a][i]-t[a][i]}n.setPosition(d),a.setPosition(u),n.rotation=a.rotation=e.rotation,g(n),g(a)},t.prototype._createAxis=function(e,t){var n=t.getData(),a=t.get("axisType"),i=function(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new gT({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new DT({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new yT}}(t,a);i.getTicks=function(){return n.mapArray(["value"],(function(e){return{value:e}}))};var r=n.getDataExtent("value");i.setExtent(r[0],r[1]),i.calcNiceTicks();var o=new yq("value",i,e.axisExtent,a);return o.model=t,o},t.prototype._createGroup=function(e){var t=this[e]=new Bc;return this.group.add(t),t},t.prototype._renderAxisLine=function(e,t,n,a){var i=n.getExtent();if(a.get(["lineStyle","show"])){var r=new zg({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:Nr({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});t.add(r);var o=this._progressLine=new zg({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:Lr({lineCap:"round",lineWidth:r.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});t.add(o)}},t.prototype._renderAxisTick=function(e,t,n,a){var i=this,r=a.getData(),o=n.scale.getTicks();this._tickSymbols=[],Ur(o,(function(e){var o=n.dataToCoord(e.value),s=r.getItemModel(e.value),l=s.getModel("itemStyle"),p=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["progress","itemStyle"]),d={x:o,y:0,onclick:Yr(i._changeTimeline,i,e.value)},u=xq(s,l,t,d);u.ensureState("emphasis").style=p.getItemStyle(),u.ensureState("progress").style=c.getItemStyle(),Vh(u);var m=Zm(u);s.get("tooltip")?(m.dataIndex=e.value,m.dataModel=a):m.dataIndex=m.dataModel=null,i._tickSymbols.push(u)}))},t.prototype._renderAxisLabel=function(e,t,n,a){var i=this;if(n.getLabelModel().get("show")){var r=a.getData(),o=n.getViewLabels();this._tickLabels=[],Ur(o,(function(a){var o=a.tickValue,s=r.getItemModel(o),l=s.getModel("label"),p=s.getModel(["emphasis","label"]),c=s.getModel(["progress","label"]),d=n.dataToCoord(a.tickValue),u=new Lm({x:d,y:0,rotation:e.labelRotation-e.rotation,onclick:Yr(i._changeTimeline,i,o),silent:!1,style:Qf(l,{text:a.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});u.ensureState("emphasis").style=Qf(p),u.ensureState("progress").style=Qf(c),t.add(u),Vh(u),bq(u).dataIndex=o,i._tickLabels.push(u)}))}},t.prototype._renderControl=function(e,t,n,a){var i=e.controlSize,r=e.rotation,o=a.getModel("controlStyle").getItemStyle(),s=a.getModel(["emphasis","controlStyle"]).getItemStyle(),l=a.getPlayState(),p=a.get("inverse",!0);function c(e,n,l,p){if(e){var c=_c(uo(a.get(["controlStyle",n+"BtnSize"]),i),i),d=function(e,t,n,a){var i=a.style,r=Vf(e.get(["controlStyle",t]),a||{},new Ls(n[0],n[1],n[2],n[3]));i&&r.setStyle(i);return r}(a,n+"Icon",[0,-c/2,c,c],{x:e[0],y:e[1],originX:i/2,originY:0,rotation:p?-r:0,rectHover:!0,style:o,onclick:l});d.ensureState("emphasis").style=s,t.add(d),Vh(d)}}c(e.nextBtnPosition,"next",Yr(this._changeTimeline,this,p?"-":"+")),c(e.prevBtnPosition,"prev",Yr(this._changeTimeline,this,p?"+":"-")),c(e.playPosition,l?"stop":"play",Yr(this._handlePlayClick,this,!l),!0)},t.prototype._renderCurrentPointer=function(e,t,n,a){var i=a.getData(),r=a.getCurrentIndex(),o=i.getItemModel(r).getModel("checkpointStyle"),s=this,l={onCreate:function(e){e.draggable=!0,e.drift=Yr(s._handlePointerDrag,s),e.ondragend=Yr(s._handlePointerDragend,s),wq(e,s._progressLine,r,n,a,!0)},onUpdate:function(e){wq(e,s._progressLine,r,n,a)}};this._currentPointer=xq(o,o,this._mainGroup,{},this._currentPointer,l)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,t){var n=this._toAxisCoord(e)[0],a=Yc(this._axis.getExtent().slice());n>a[1]&&(n=a[1]),n<a[0]&&(n=a[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var i=this._progressLine;i&&(i.shape.x2=n,i.dirty());var r=this._findNearestTick(n),o=this.model;(t||r!==o.getCurrentIndex()&&o.get("realtime"))&&this._changeTimeline(r)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var t=e.model;e._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return Af(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var t,n=this.model.getData(),a=1/0,i=this._axis;return n.each(["value"],(function(n,r){var o=i.dataToCoord(n),s=Math.abs(o-e);s<a&&(a=s,t=r)})),t},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),t=this._tickSymbols,n=this._tickLabels;if(t)for(var a=0;a<t.length;a++)t&&t[a]&&t[a].toggleState("progress",a<e);if(n)for(a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",bq(n[a]).dataIndex<=e)},t.type="timeline.slider"}(fq);function xq(e,t,n,a,i,r){var o=t.get("color");i?(i.setColor(o),n.add(i),r&&r.onUpdate(i)):((i=LS(e.get("symbol"),-1,-1,2,2,o)).setStyle("strokeNoScale",!0),n.add(i),r&&r.onCreate(i));var s=t.getItemStyle(["color"]);i.setStyle(s),a=Rr({rectHover:!0,z2:100},a,!0);var l=VS(e.get("symbolSize"));a.scaleX=l[0]/2,a.scaleY=l[1]/2;var p=qS(e.get("symbolOffset"),l);p&&(a.x=(a.x||0)+p[0],a.y=(a.y||0)+p[1]);var c=e.get("symbolRotate");return a.rotation=(c||0)*Math.PI/180||0,i.attr(a),i.updateTransform(),i}function wq(e,t,n,a,i,r){if(!e.dragging){var o=i.getModel("checkpointStyle"),s=a.dataToCoord(i.getData().get("value",n));if(r||!o.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function Sq(e,t){if(!e)return!1;for(var n=Zr(e)?e:[e],a=0;a<n.length;a++)if(n[a]&&n[a][t])return!0;return!1}function Cq(e){xd(e,"label",["show"])}var _q=Dd(),Tq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return ze(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(mr.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,t){this._mergeOption(e,t,!1,!1)},t.prototype._mergeOption=function(e,t,n,a){var i=this.mainType;n||t.eachSeries((function(e){var n=e.get(this.mainType,!0),r=_q(e)[i];n&&n.data?(r?r._mergeOption(n,t,!0):(a&&Cq(n),Ur(n.data,(function(e){e instanceof Array?(Cq(e[0]),Cq(e[1])):Cq(e)})),Nr(r=this.createMarkerModelFromSeries(n,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),r.__hostSeries=e),_q(e)[i]=r):_q(e)[i]=null}),this)},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=this.getRawValue(e),r=a.getName(e);return Qx("section",{header:this.name,blocks:[Qx("nameValue",{name:r,value:i,noName:!r,noValue:null==i})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,t){return _q(e)[t]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Pv);Gr(Tq,ux.prototype);!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,a){return new t(e,n,a)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}}(Tq);function Iq(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Eq(e,t,n,a,i,r){var o=[],s=eT(t,a)?t.getCalculationInfo("stackResultDimension"):a,l=Aq(t,s,e),p=t.indicesOfNearest(s,l)[0];o[i]=t.get(n,p),o[r]=t.get(s,p);var c=t.get(a,p),d=Xc(t.get(a,p));return(d=Math.min(d,20))>=0&&(o[r]=+o[r].toFixed(d)),[o,c]}var Mq={min:Xr(Eq,"min"),max:Xr(Eq,"max"),average:Xr(Eq,"average"),median:Xr(Eq,"median")};function kq(e,t){if(t){var n=e.getData(),a=e.coordinateSystem,i=a&&a.dimensions;if(!function(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(t)&&!Zr(t.coord)&&Zr(i)){var r=Pq(t,n,a,e);if((t=Fr(t)).type&&Mq[t.type]&&r.baseAxis&&r.valueAxis){var o=Vr(i,r.baseAxis.dim),s=Vr(i,r.valueAxis.dim),l=Mq[t.type](n,r.baseDataDim,r.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis]}if(null!=t.coord&&Zr(i))for(var p=t.coord,c=0;c<2;c++)Mq[p[c]]&&(p[c]=Aq(n,n.mapDimension(i[c]),p[c]));else t.coord=[];return t}}function Pq(e,t,n,a){var i={};return null!=e.valueIndex||null!=e.valueDim?(i.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=n.getAxis(function(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}(a,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=a.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function Dq(e,t){return!(e&&e.containData&&t.coord&&!Iq(t))||e.containData(t.coord)}function Oq(e,t){return e?function(e,n,a,i){return yx(i<2?e.coord&&e.coord[i]:e.value,t[i])}:function(e,n,a,i){return yx(e.value,t[i])}}function Aq(e,t,n){if("average"===n){var a=0,i=0;return e.each(t,(function(e,t){isNaN(e)||(a+=e,i++)})),a/i}return"median"===n?e.getMedian(t):e.getDataExtent(t)["max"===n?1:0]}var Fq=Dd(),Rq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.init=function(){this.markerGroupMap=_o()},t.prototype.render=function(e,t,n){var a=this,i=this.markerGroupMap;i.each((function(e){Fq(e).keep=!1})),t.eachSeries((function(e){var i=Tq.getMarkerModelFromSeries(e,a.type);i&&a.renderSeries(e,i,t,n)})),i.each((function(e){!Fq(e).keep&&a.group.remove(e.group)}))},t.prototype.markKeep=function(e){Fq(e).keep=!0},t.prototype.toggleBlurSeries=function(e,t){var n=this;Ur(e,(function(e){var a=Tq.getMarkerModelFromSeries(e,n.type);a&&a.getData().eachItemGraphicEl((function(e){e&&(t?Mh(e):kh(e))}))}))},t.type="marker",t}(Sw);function Bq(e,t,n){var a=t.coordinateSystem;e.each((function(i){var r,o=e.getItemModel(i),s=$c(o.get("x"),n.getWidth()),l=$c(o.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)r=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(a){var p=e.get(a.dimensions[0],i),c=e.get(a.dimensions[1],i);r=a.dataToPoint([p,c])}}else r=[s,l];isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),e.setItemLayout(i,r)}))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries((function(e){var t=Tq.getMarkerModelFromSeries(e,"markPoint");t&&(Bq(t.getData(),e,n),this.markerGroupMap.get(e.id).updateLayout())}),this)},t.prototype.renderSeries=function(e,t,n,a){var i=e.coordinateSystem,r=e.id,o=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new DE),p=function(e,t,n){var a;a=e?jr(e&&e.dimensions,(function(e){return Nr(Nr({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})})):[{name:"value",type:"float"}];var i=new $_(a,n),r=jr(n.get("data"),Xr(kq,t));e&&(r=Wr(r,Xr(Dq,e)));var o=Oq(!!e,a);return i.initData(r,null,o),i}(i,e,t);t.setData(p),Bq(t.getData(),e,a),p.each((function(e){var n=p.getItemModel(e),a=n.getShallow("symbol"),i=n.getShallow("symbolSize"),r=n.getShallow("symbolRotate"),s=n.getShallow("symbolOffset"),l=n.getShallow("symbolKeepAspect");if(Qr(a)||Qr(i)||Qr(r)||Qr(s)){var c=t.getRawValue(e),d=t.getDataParams(e);Qr(a)&&(a=a(c,d)),Qr(i)&&(i=i(c,d)),Qr(r)&&(r=r(c,d)),Qr(s)&&(s=s(c,d))}var u=n.getModel("itemStyle").getItemStyle(),m=SS(o,"color");u.fill||(u.fill=m),p.setItemVisual(e,{symbol:a,symbolSize:i,symbolRotate:r,symbolOffset:s,symbolKeepAspect:l,style:u})})),l.updateData(p),this.group.add(l.group),p.eachItemGraphicEl((function(e){e.traverse((function(e){Zm(e).dataModel=t}))})),this.markKeep(l),l.group.silent=t.get("silent")||e.get("silent")},t.type="markPoint"}(Rq);var Nq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,a){return new t(e,n,a)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Tq),Lq=Dd(),Vq=function(e,t,n,a){var i,r=e.getData();if(Zr(a))i=a;else{var o=a.type;if("min"===o||"max"===o||"average"===o||"median"===o||null!=a.xAxis||null!=a.yAxis){var s=void 0,l=void 0;if(null!=a.yAxis||null!=a.xAxis)s=t.getAxis(null!=a.yAxis?"y":"x"),l=co(a.yAxis,a.xAxis);else{var p=Pq(a,r,t,e);s=p.valueAxis,l=Aq(r,tT(r,p.valueDataDim),o)}var c="x"===s.dim?0:1,d=1-c,u=Fr(a),m={coord:[]};u.type=null,u.coord=[],u.coord[d]=-1/0,m.coord[d]=1/0;var h=n.get("precision");h>=0&&to(l)&&(l=+l.toFixed(Math.min(h,20))),u.coord[c]=m.coord[c]=l,i=[u,m,{type:o,valueIndex:a.valueIndex,value:l}]}else i=[]}var g=[kq(e,i[0]),kq(e,i[1]),Nr({},i[2])];return g[2].type=g[2].type||null,Rr(g[2],g[0]),Rr(g[2],g[1]),g};function qq(e){return!isNaN(e)&&!isFinite(e)}function Gq(e,t,n,a){var i=1-e,r=a.dimensions[e];return qq(t[i])&&qq(n[i])&&t[e]===n[e]&&a.getAxis(r).containData(t[e])}function zq(e,t){if("cartesian2d"===e.type){var n=t[0].coord,a=t[1].coord;if(n&&a&&(Gq(1,n,a,e)||Gq(0,n,a,e)))return!0}return Dq(e,t[0])&&Dq(e,t[1])}function Uq(e,t,n,a,i){var r,o=a.coordinateSystem,s=e.getItemModel(t),l=$c(s.get("x"),i.getWidth()),p=$c(s.get("y"),i.getHeight());if(isNaN(l)||isNaN(p)){if(a.getMarkerPosition)r=a.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,d=e.get(c[0],t),u=e.get(c[1],t);r=o.dataToPoint([d,u])}if(HE(o,"cartesian2d")){var m=o.getAxis("x"),h=o.getAxis("y");c=o.dimensions;qq(e.get(c[0],t))?r[0]=m.toGlobalCoord(m.getExtent()[n?0:1]):qq(e.get(c[1],t))&&(r[1]=h.toGlobalCoord(h.getExtent()[n?0:1]))}isNaN(l)||(r[0]=l),isNaN(p)||(r[1]=p)}else r=[l,p];e.setItemLayout(t,r)}var jq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries((function(e){var t=Tq.getMarkerModelFromSeries(e,"markLine");if(t){var a=t.getData(),i=Lq(t).from,r=Lq(t).to;i.each((function(t){Uq(i,t,!0,e,n),Uq(r,t,!1,e,n)})),a.each((function(e){a.setItemLayout(e,[i.getItemLayout(e),r.getItemLayout(e)])})),this.markerGroupMap.get(e.id).updateLayout()}}),this)},t.prototype.renderSeries=function(e,t,n,a){var i=e.coordinateSystem,r=e.id,o=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new XO);this.group.add(l.group);var p=function(e,t,n){var a;a=e?jr(e&&e.dimensions,(function(e){return Nr(Nr({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})})):[{name:"value",type:"float"}];var i=new $_(a,n),r=new $_(a,n),o=new $_([],n),s=jr(n.get("data"),Xr(Vq,t,e,n));e&&(s=Wr(s,Xr(zq,e)));var l=Oq(!!e,a);return i.initData(jr(s,(function(e){return e[0]})),null,l),r.initData(jr(s,(function(e){return e[1]})),null,l),o.initData(jr(s,(function(e){return e[2]}))),o.hasItemOption=!0,{from:i,to:r,line:o}}(i,e,t),c=p.from,d=p.to,u=p.line;Lq(t).from=c,Lq(t).to=d,t.setData(u);var m=t.get("symbol"),h=t.get("symbolSize"),g=t.get("symbolRotate"),f=t.get("symbolOffset");function y(t,n,i){var r=t.getItemModel(n);Uq(t,n,i,e,a);var s=r.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=SS(o,"color")),t.setItemVisual(n,{symbolKeepAspect:r.get("symbolKeepAspect"),symbolOffset:uo(r.get("symbolOffset",!0),f[i?0:1]),symbolRotate:uo(r.get("symbolRotate",!0),g[i?0:1]),symbolSize:uo(r.get("symbolSize"),h[i?0:1]),symbol:uo(r.get("symbol",!0),m[i?0:1]),style:s})}Zr(m)||(m=[m,m]),Zr(h)||(h=[h,h]),Zr(g)||(g=[g,g]),Zr(f)||(f=[f,f]),p.from.each((function(e){y(c,e,!0),y(d,e,!1)})),u.each((function(e){var t=u.getItemModel(e).getModel("lineStyle").getLineStyle();u.setItemLayout(e,[c.getItemLayout(e),d.getItemLayout(e)]),null==t.stroke&&(t.stroke=c.getItemVisual(e,"style").fill),u.setItemVisual(e,{fromSymbolKeepAspect:c.getItemVisual(e,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(e,"symbolOffset"),fromSymbolRotate:c.getItemVisual(e,"symbolRotate"),fromSymbolSize:c.getItemVisual(e,"symbolSize"),fromSymbol:c.getItemVisual(e,"symbol"),toSymbolKeepAspect:d.getItemVisual(e,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(e,"symbolOffset"),toSymbolRotate:d.getItemVisual(e,"symbolRotate"),toSymbolSize:d.getItemVisual(e,"symbolSize"),toSymbol:d.getItemVisual(e,"symbol"),style:t})})),l.updateData(u),p.line.eachItemGraphicEl((function(e){Zm(e).dataModel=t,e.traverse((function(e){Zm(e).dataModel=t}))})),this.markKeep(l),l.group.silent=t.get("silent")||e.get("silent")},t.type="markLine",t}(Rq);function Hq(e){e.registerComponentModel(Nq),e.registerComponentView(jq),e.registerPreprocessor((function(e){Sq(e.series,"markLine")&&(e.markLine=e.markLine||{})}))}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,a){return new t(e,n,a)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}}(Tq);var Wq=Dd(),$q=function(e,t,n,a){var i=a[0],r=a[1];if(i&&r){var o=kq(e,i),s=kq(e,r),l=o.coord,p=s.coord;l[0]=co(l[0],-1/0),l[1]=co(l[1],-1/0),p[0]=co(p[0],1/0),p[1]=co(p[1],1/0);var c=Br([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function Kq(e){return!isNaN(e)&&!isFinite(e)}function Yq(e,t,n,a){var i=1-e;return Kq(t[i])&&Kq(n[i])}function Xq(e,t){var n=t.coord[0],a=t.coord[1],i={coord:n,x:t.x0,y:t.y0},r={coord:a,x:t.x1,y:t.y1};return HE(e,"cartesian2d")?!(!n||!a||!Yq(1,n,a)&&!Yq(0,n,a))||function(e,t,n){return!(e&&e.containZone&&t.coord&&n.coord&&!Iq(t)&&!Iq(n))||e.containZone(t.coord,n.coord)}(e,i,r):Dq(e,i)||Dq(e,r)}function Zq(e,t,n,a,i){var r,o=a.coordinateSystem,s=e.getItemModel(t),l=$c(s.get(n[0]),i.getWidth()),p=$c(s.get(n[1]),i.getHeight());if(isNaN(l)||isNaN(p)){if(a.getMarkerPosition){var c=e.getValues(["x0","y0"],t),d=e.getValues(["x1","y1"],t),u=o.clampData(c),m=o.clampData(d),h=[];"x0"===n[0]?h[0]=u[0]>m[0]?d[0]:c[0]:h[0]=u[0]>m[0]?c[0]:d[0],"y0"===n[1]?h[1]=u[1]>m[1]?d[1]:c[1]:h[1]=u[1]>m[1]?c[1]:d[1],r=a.getMarkerPosition(h,n,!0)}else{var g=[v=e.get(n[0],t),b=e.get(n[1],t)];o.clampData&&o.clampData(g,g),r=o.dataToPoint(g,!0)}if(HE(o,"cartesian2d")){var f=o.getAxis("x"),y=o.getAxis("y"),v=e.get(n[0],t),b=e.get(n[1],t);Kq(v)?r[0]=f.toGlobalCoord(f.getExtent()["x0"===n[0]?0:1]):Kq(b)&&(r[1]=y.toGlobalCoord(y.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(r[0]=l),isNaN(p)||(r[1]=p)}else r=[l,p];return r}var Qq=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries((function(e){var t=Tq.getMarkerModelFromSeries(e,"markArea");if(t){var a=t.getData();a.each((function(t){var i=jr(Qq,(function(i){return Zq(a,t,i,e,n)}));a.setItemLayout(t,i),a.getItemGraphicEl(t).setShape("points",i)}))}}),this)},t.prototype.renderSeries=function(e,t,n,a){var i=e.coordinateSystem,r=e.id,o=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,{group:new Bc});this.group.add(l.group),this.markKeep(l);var p=function(e,t,n){var a,i,r=["x0","y0","x1","y1"];if(e){var o=jr(e&&e.dimensions,(function(e){var n=t.getData();return Nr(Nr({},n.getDimensionInfo(n.mapDimension(e))||{}),{name:e,ordinalMeta:null})}));i=jr(r,(function(e,t){return{name:e,type:o[t%2].type}})),a=new $_(i,n)}else a=new $_(i=[{name:"value",type:"float"}],n);var s=jr(n.get("data"),Xr($q,t,e,n));e&&(s=Wr(s,Xr(Xq,e)));var l=e?function(e,t,n,a){return yx(e.coord[Math.floor(a/2)][a%2],i[a])}:function(e,t,n,a){return yx(e.value,i[a])};return a.initData(s,null,l),a.hasItemOption=!0,a}(i,e,t);t.setData(p),p.each((function(t){var n=jr(Qq,(function(n){return Zq(p,t,n,e,a)})),r=i.getAxis("x").scale,s=i.getAxis("y").scale,l=r.getExtent(),c=s.getExtent(),d=[r.parse(p.get("x0",t)),r.parse(p.get("x1",t))],u=[s.parse(p.get("y0",t)),s.parse(p.get("y1",t))];Yc(d),Yc(u);var m=!!(l[0]>d[1]||l[1]<d[0]||c[0]>u[1]||c[1]<u[0]);p.setItemLayout(t,{points:n,allClipped:m});var h=p.getItemModel(t).getModel("itemStyle").getItemStyle(),g=SS(o,"color");h.fill||(h.fill=g,Jr(h.fill)&&(h.fill=tp(h.fill,.4))),h.stroke||(h.stroke=g),p.setItemVisual(t,"style",h)})),p.diff(Wq(l).data).add((function(e){var t=p.getItemLayout(e);if(!t.allClipped){var n=new Ng({shape:{points:t.points}});p.setItemGraphicEl(e,n),l.group.add(n)}})).update((function(e,n){var a=Wq(l).data.getItemGraphicEl(n),i=p.getItemLayout(e);i.allClipped?a&&l.group.remove(a):(a?cf(a,{shape:{points:i.points}},t,e):a=new Ng({shape:{points:i.points}}),p.setItemGraphicEl(e,a),l.group.add(a))})).remove((function(e){var t=Wq(l).data.getItemGraphicEl(e);l.group.remove(t)})).execute(),p.eachItemGraphicEl((function(e,n){var a=p.getItemModel(n),i=p.getItemVisual(n,"style");e.useStyle(p.getItemVisual(n,"style")),Xf(e,Zf(a),{labelFetcher:t,labelDataIndex:n,defaultText:p.getName(n)||"",inheritColor:Jr(i.fill)?tp(i.fill,1):"#000"}),jh(e,a),qh(e,null,null,a.get(["emphasis","disabled"])),Zm(e).dataModel=t})),Wq(l).data=p,l.group.silent=t.get("silent")||e.get("silent")},t.type="markArea"}(Rq);var Jq=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return ze(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),Zr(t)&&Ur(t,(function(e,a){Jr(e)&&(e={type:e}),t[a]=Rr(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var a=e[n].get("name");if(this.isSelected(a)){this.select(a),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(a){var i,r=a.name;if(n.push(r),a.legendVisualProvider){var o=a.legendVisualProvider.getAllNames();e.isSeriesFiltered(a)||(n=n.concat(o)),o.length?t=t.concat(o):i=!0}else i=!0;i&&Md(a)&&t.push(a.name)})),this._availableNames=n;var a=this.get("data")||t,i=_o(),r=jr(a,(function(e){return(Jr(e)||to(e))&&(e={name:e}),i.get(e.name)?null:(i.set(e.name,!0),new xy(e,this,this.ecModel))}),this);this._data=Wr(r,(function(e){return!!e}))},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&Ur(this._data,(function(e){t[e.get("name")]=!1}));t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;Ur(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;Ur(e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&Vr(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Pv),eG=Xr,tG=Ur,nG=Bc,aG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return ze(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new nG),this.group.add(this._selectorGroup=new nG),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),r=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===r?"right":"left");var o=e.get("selector",!0),s=e.get("selectorPosition",!0);!o||s&&"auto"!==s||(s="horizontal"===r?"end":"start"),this.renderInner(i,e,t,n,o,r,s);var l=e.getBoxLayoutParams(),p={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=Cv(l,p,c),u=this.layoutInner(e,i,d,a,o,s),m=Cv(Lr({width:u.width,height:u.height},l),p,c);this.group.x=m.x-u.x,this.group.y=m.y-u.y,this.group.markRedraw(),this.group.add(this._backgroundEl=oV(u,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,a,i,r,o){var s=this.getContentGroup(),l=_o(),p=t.get("selectedMode"),c=[];n.eachRawSeries((function(e){!e.get("legendHoverLink")&&c.push(e.id)})),tG(t.getData(),(function(i,r){var o=i.get("name");if(!this.newlineDisabled&&(""===o||"\n"===o)){var d=new nG;return d.newline=!0,void s.add(d)}var u=n.getSeriesByName(o)[0];if(!l.get(o)){if(u){var m=u.getData(),h=m.getVisual("legendLineStyle")||{},g=m.getVisual("legendIcon"),f=m.getVisual("style"),y=this._createItem(u,o,r,i,t,e,h,f,g,p,a);y.on("click",eG(iG,o,null,a,c)).on("mouseover",eG(oG,u.name,null,a,c)).on("mouseout",eG(sG,u.name,null,a,c)),n.ssr&&y.eachChild((function(e){var t=Zm(e);t.seriesIndex=u.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),l.set(o,!0)}else n.eachRawSeries((function(s){if(!l.get(o)&&s.legendVisualProvider){var d=s.legendVisualProvider;if(!d.containName(o))return;var u=d.indexOfName(o),m=d.getItemVisual(u,"style"),h=d.getItemVisual(u,"legendIcon"),g=Yl(m.fill);g&&0===g[3]&&(g[3]=.2,m=Nr(Nr({},m),{fill:np(g,"rgba")}));var f=this._createItem(s,o,r,i,t,e,{},m,h,p,a);f.on("click",eG(iG,null,o,a,c)).on("mouseover",eG(oG,null,o,a,c)).on("mouseout",eG(sG,null,o,a,c)),n.ssr&&f.eachChild((function(e){var t=Zm(e);t.seriesIndex=s.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),l.set(o,!0)}}),this);0}}),this),i&&this._createSelector(i,t,a,r,o)},t.prototype._createSelector=function(e,t,n,a,i){var r=this.getSelectorGroup();tG(e,(function(e){var a=e.type,i=new Lm({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===a?"legendAllSelect":"legendInverseSelect"})}});r.add(i),Xf(i,{normal:t.getModel("selectorLabel"),emphasis:t.getModel(["emphasis","selectorLabel"])},{defaultText:e.title}),Vh(i)}))},t.prototype._createItem=function(e,t,n,a,i,r,o,s,l,p,c){var d=e.visualDrawType,u=i.get("itemWidth"),m=i.get("itemHeight"),h=i.isSelected(t),g=a.get("symbolRotate"),f=a.get("symbolKeepAspect"),y=a.get("icon"),v=function(e,t,n,a,i,r,o){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),tG(e,(function(n,a){"inherit"===e[a]&&(e[a]=t[a])}))}var l=t.getModel("itemStyle"),p=l.getItemStyle(),c=0===e.lastIndexOf("empty",0)?"fill":"stroke",d=l.getShallow("decal");p.decal=d&&"inherit"!==d?dC(d,o):a.decal,"inherit"===p.fill&&(p.fill=a[i]);"inherit"===p.stroke&&(p.stroke=a[c]);"inherit"===p.opacity&&(p.opacity=("fill"===i?a:n).opacity);s(p,a);var u=t.getModel("lineStyle"),m=u.getLineStyle();if(s(m,n),"auto"===p.fill&&(p.fill=a.fill),"auto"===p.stroke&&(p.stroke=a.fill),"auto"===m.stroke&&(m.stroke=a.fill),!r){var h=t.get("inactiveBorderWidth"),g=p[c];p.lineWidth="auto"===h?a.lineWidth>0&&g?2:0:p.lineWidth,p.fill=t.get("inactiveColor"),p.stroke=t.get("inactiveBorderColor"),m.stroke=u.get("inactiveColor"),m.lineWidth=u.get("inactiveWidth")}return{itemStyle:p,lineStyle:m}}(l=y||l||"roundRect",a,o,s,d,h,c),b=new nG,x=a.getModel("textStyle");if(!Qr(e.getLegendIcon)||y&&"inherit"!==y){var w="inherit"===y&&e.getData().getVisual("symbol")?"inherit"===g?e.getData().getVisual("symbolRotate"):g:0;b.add(function(e){var t=e.icon||"roundRect",n=LS(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:u,itemHeight:m,icon:l,iconRotate:w,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:f}))}else b.add(e.getLegendIcon({itemWidth:u,itemHeight:m,icon:l,iconRotate:g,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:f}));var S="left"===r?u+5:-5,C=r,_=i.get("formatter"),T=t;Jr(_)&&_?T=_.replace("{name}",null!=t?t:""):Qr(_)&&(T=_(t));var I=h?x.getTextColor():a.get("inactiveColor");b.add(new Lm({style:Qf(x,{text:T,x:S,y:m/2,fill:I,align:C,verticalAlign:"middle"},{inheritColor:I})}));var E=new Rm({shape:b.getBoundingRect(),style:{fill:"transparent"}}),M=a.getModel("tooltip");return M.get("show")&&Uf({el:E,componentModel:i,itemName:t,itemTooltipOption:M.option}),b.add(E),b.eachChild((function(e){e.silent=!0})),E.silent=!p,this.getContentGroup().add(b),Vh(b),b.__legendDataIndex=n,b},t.prototype.layoutInner=function(e,t,n,a,i,r){var o=this.getContentGroup(),s=this.getSelectorGroup();Sv(e.get("orient"),o,e.get("itemGap"),n.width,n.height);var l=o.getBoundingRect(),p=[-l.x,-l.y];if(s.markRedraw(),o.markRedraw(),i){Sv("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],u=e.get("selectorButtonGap",!0),m=e.getOrient().index,h=0===m?"width":"height",g=0===m?"height":"width",f=0===m?"y":"x";"end"===r?d[m]+=l[h]+u:p[m]+=c[h]+u,d[1-m]+=l[g]/2-c[g]/2,s.x=d[0],s.y=d[1],o.x=p[0],o.y=p[1];var y={x:0,y:0};return y[h]=l[h]+u+c[h],y[g]=Math.max(l[g],c[g]),y[f]=Math.min(0,c[f]+d[1-m]),y}return o.x=p[0],o.y=p[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Sw);function iG(e,t,n,a){sG(e,t,n,a),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),oG(e,t,n,a)}function rG(e){for(var t,n=e.getZr().storage.getDisplayList(),a=0,i=n.length;a<i&&!(t=n[a].states.emphasis);)a++;return t&&t.hoverLayer}function oG(e,t,n,a){rG(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:a})}function sG(e,t,n,a){rG(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:a})}!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}ze(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,a){var i=Ev(t);e.prototype.init.call(this,t,n,a),lG(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),lG(this,this.option,t)},t.type="legend.scroll",t.defaultOption=Cy(Jq.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800})}(Jq);function lG(e,t,n){var a=[1,1];a[e.getOrient().index]=0,Iv(t,n,{type:"box",ignoreSize:!!a})}var pG=Bc,cG=["width","height"],dG=["x","y"];!function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}ze(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new pG),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new pG)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,a,i,r,o,s){var l=this;e.prototype.renderInner.call(this,t,n,a,i,r,o,s);var p=this._controllerGroup,c=n.get("pageIconSize",!0),d=Zr(c)?c:[c,c];m("pagePrev",0);var u=n.getModel("pageTextStyle");function m(e,t){var a=e+"DataIndex",r=Vf(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:Yr(l._pageGo,l,a,n,i)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});r.name=e,p.add(r)}p.add(new Lm({name:"pageText",style:{text:"xx/xx",fill:u.getTextColor(),font:u.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1)},t.prototype.layoutInner=function(e,t,n,a,i,r){var o=this.getSelectorGroup(),s=e.getOrient().index,l=cG[s],p=dG[s],c=cG[1-s],d=dG[1-s];i&&Sv("horizontal",o,e.get("selectorItemGap",!0));var u=e.get("selectorButtonGap",!0),m=o.getBoundingRect(),h=[-m.x,-m.y],g=Fr(n);i&&(g[l]=n[l]-m[l]-u);var f=this._layoutContentAndController(e,a,g,s,l,c,d,p);if(i){if("end"===r)h[s]+=f[l]+u;else{var y=m[l]+u;h[s]-=y,f[p]-=y}f[l]+=m[l]+u,h[1-s]+=f[d]+f[c]/2-m[c]/2,f[c]=Math.max(f[c],m[c]),f[d]=Math.min(f[d],m[d]+h[1-s]),o.x=h[0],o.y=h[1],o.markRedraw()}return f},t.prototype._layoutContentAndController=function(e,t,n,a,i,r,o,s){var l=this.getContentGroup(),p=this._containerGroup,c=this._controllerGroup;Sv(e.get("orient"),l,e.get("itemGap"),a?n.width:null,a?null:n.height),Sv("horizontal",c,e.get("pageButtonItemGap",!0));var d=l.getBoundingRect(),u=c.getBoundingRect(),m=this._showController=d[i]>n[i],h=[-d.x,-d.y];t||(h[a]=l[s]);var g=[0,0],f=[-u.x,-u.y],y=uo(e.get("pageButtonGap",!0),e.get("itemGap",!0));m&&("end"===e.get("pageButtonPosition",!0)?f[a]+=n[i]-u[i]:g[a]+=u[i]+y);f[1-a]+=d[r]/2-u[r]/2,l.setPosition(h),p.setPosition(g),c.setPosition(f);var v={x:0,y:0};if(v[i]=m?n[i]:d[i],v[r]=Math.max(d[r],u[r]),v[o]=Math.min(0,u[o]+f[1-a]),p.__rectSize=n[i],m){var b={x:0,y:0};b[i]=Math.max(n[i]-u[i]-y,0),b[r]=v[r],p.setClipPath(new Rm({shape:b})),p.__rectSize=b[i]}else c.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var x=this._getPageInfo(e);return null!=x.pageIndex&&cf(l,{x:x.contentPosition[0],y:x.contentPosition[1]},m?e:null),this._updatePageInfoView(e,x),v},t.prototype._pageGo=function(e,t,n){var a=this._getPageInfo(t)[e];null!=a&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;Ur(["pagePrev","pageNext"],(function(a){var i=null!=t[a+"DataIndex"],r=n.childOfName(a);r&&(r.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),r.cursor=i?"pointer":"default")}));var a=n.childOfName("pageText"),i=e.get("pageFormatter"),r=t.pageIndex,o=null!=r?r+1:0,s=t.pageCount;a&&i&&a.setStyle("text",Jr(i)?i.replace("{current}",null==o?"":o+"").replace("{total}",null==s?"":s+""):i({current:o,total:s}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,i=e.getOrient().index,r=cG[i],o=dG[i],s=this._findTargetItemIndex(t),l=n.children(),p=l[s],c=l.length,d=c?1:0,u={contentPosition:[n.x,n.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return u;var m=v(p);u.contentPosition[i]=-m.s;for(var h=s+1,g=m,f=m,y=null;h<=c;++h)(!(y=v(l[h]))&&f.e>g.s+a||y&&!b(y,g.s))&&(g=f.i>g.i?f:y)&&(null==u.pageNextDataIndex&&(u.pageNextDataIndex=g.i),++u.pageCount),f=y;for(h=s-1,g=m,f=m,y=null;h>=-1;--h)(y=v(l[h]))&&b(f,y.s)||!(g.i<f.i)||(f=g,null==u.pagePrevDataIndex&&(u.pagePrevDataIndex=g.i),++u.pageCount,++u.pageIndex),g=y;return u;function v(e){if(e){var t=e.getBoundingRect(),n=t[o]+e[o];return{s:n,e:n+t[r],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+a}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(a,i){var r=a.__legendDataIndex;null==n&&null!=r&&(n=i),r===e&&(t=i)})),null!=t?t:n):0;var t,n},t.type="legend.scroll"}(aG);var uG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="dataZoom.inside",t.defaultOption=Cy(KL.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(KL),mG=Dd();function hG(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function gG(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function fG(e,t,n,a){return e.coordinateSystem.containPoint([n,a])}function yG(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var n=mG(t),a=n.coordSysRecordMap||(n.coordSysRecordMap=_o());a.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){Ur(WL(e).infoList,(function(n){var i=n.model.uid,r=a.get(i)||a.set(i,function(e,t){var n={model:t,containsPoint:Xr(fG,t),dispatchAction:Xr(gG,e),dataZoomInfoMap:null,controller:null},a=n.controller=new hP(e.getZr());return Ur(["pan","zoom","scrollMove"],(function(e){a.on(e,(function(t){var a=[];n.dataZoomInfoMap.each((function(i){if(t.isAvailableBehavior(i.model.option)){var r=(i.getRange||{})[e],o=r&&r(i.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!i.model.get("disabled",!0)&&o&&a.push({dataZoomId:i.model.id,start:o[0],end:o[1]})}})),a.length&&n.dispatchAction(a)}))})),n}(t,n.model));(r.dataZoomInfoMap||(r.dataZoomInfoMap=_o())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})}))})),a.each((function(e){var t,n=e.controller,i=e.dataZoomInfoMap;if(i){var r=i.keys()[0];null!=r&&(t=i.get(r))}if(t){var o=function(e){var t,n="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each((function(e){var r=e.model,o=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");a[n+o]>a[n+t]&&(t=o),i=i&&r.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(i);n.enable(o.controlType,o.opt),n.setPointerChecker(e.containsPoint),Bw(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else hG(a,e)}))}))}var vG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return ze(t,e),t.prototype.render=function(t,n,a){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),function(e,t,n){mG(e).coordSysRecordMap.each((function(e){var a=e.dataZoomInfoMap.get(t.uid);a&&(a.getRange=n)}))}(a,t,{pan:Yr(bG.pan,this),zoom:Yr(bG.zoom,this),scrollMove:Yr(bG.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=mG(e).coordSysRecordMap,a=n.keys(),i=0;i<a.length;i++){var r=a[i],o=n.get(r),s=o.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||hG(n,o))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(XL),bG={zoom:function(e,t,n,a){var i=this.range,r=i.slice(),o=e.axisModels[0];if(o){var s=wG[t](null,[a.originX,a.originY],o,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(r[1]-r[0])+r[0],p=Math.max(1/a.scale,0);r[0]=(r[0]-l)*p+l,r[1]=(r[1]-l)*p+l;var c=this.dataZoomModel.findRepresentativeAxisProxy();if(c){var d=c.getMinMaxSpan();if(MA(0,r,[0,100],0,d.minSpan,d.maxSpan),this.range=r,i[0]!==r[0]||i[1]!==r[1])return r}}},pan:xG((function(e,t,n,a,i,r){var o=wG[a]([r.oldX,r.oldY],[r.newX,r.newY],t,i,n);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength})),scrollMove:xG((function(e,t,n,a,i,r){return wG[a]([0,0],[r.scrollDelta,r.scrollDelta],t,i,n).signal*(e[1]-e[0])*r.scrollDelta}))};function xG(e){return function(t,n,a,i){var r=this.range,o=r.slice(),s=t.axisModels[0];if(s)return MA(e(o,s,t,n,a,i),o,[0,100],"all"),this.range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}}var wG={grid:function(e,t,n,a,i){var r=n.axis,o={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],"x"===r.dim?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=r.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=r.inverse?-1:1),o},polar:function(e,t,n,a,i){var r=n.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),p=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=r.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=p[1]-p[0],o.pixelStart=p[0],o.signal=r.inverse?-1:1),o},singleAxis:function(e,t,n,a,i){var r=n.axis,o=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===r.orient?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=r.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=r.inverse?-1:1),s}};function SG(e){nV(e),e.registerComponentModel(uG),e.registerComponentView(vG),yG(e)}var CG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Cy(KL.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(KL),_G=Rm,TG="horizontal",IG="vertical",EG=["line","bar","candlestick","scatter","custom"],MG={easing:"cubicOut",duration:100,delay:0},kG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return ze(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=Yr(this._onBrush,this),this._onBrushEnd=Yr(this._onBrushEnd,this)},t.prototype.render=function(t,n,a,i){if(e.prototype.render.apply(this,arguments),Bw(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Nw(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new Bc;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,a=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},r=this._orient===TG?{right:i.width-a.x-a.width,top:i.height-30-7-n,width:a.width,height:30}:{right:7,top:a.y,width:30,height:a.height},o=Ev(e.option);Ur(["right","top","width","height"],(function(e){"ph"===o[e]&&(o[e]=r[e])}));var s=Cv(o,i);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===IG&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),i=a&&a.get("inverse"),r=this._displayables.sliderGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;r.attr(n!==TG||i?n===TG&&i?{scaleY:o?1:-1,scaleX:-1}:n!==IG||i?{scaleY:o?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:o?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:o?1:-1,scaleX:1});var s=e.getBoundingRect([r]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,a=e.get("brushSelect");n.add(new _G({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var i=new _G({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:Yr(this._onClickPanel,this)}),r=this.api.getZr();a?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",r.on("mousemove",this._onBrush),r.on("mouseup",this._onBrushEnd)):(r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)),n.add(i)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=this._shadowSize||[],a=e.series,i=a.getRawData(),r=a.getShadowDim&&a.getShadowDim(),o=r&&i.getDimensionInfo(r)?a.getShadowDim():e.otherDim;if(null!=o){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(i!==this._shadowData||o!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var p=i.getDataExtent(o),c=.3*(p[1]-p[0]);p=[p[0]-c,p[1]+c];var d,u=[0,t[1]],m=[0,t[0]],h=[[t[0],0],[0,0]],g=[],f=m[1]/(i.count()-1),y=0,v=Math.round(i.count()/t[0]);i.each([o],(function(e,t){if(v>0&&t%v)y+=f;else{var n=null==e||isNaN(e)||""===e,a=n?0:Wc(e,p,u,!0);n&&!d&&t?(h.push([h[h.length-1][0],0]),g.push([g[g.length-1][0],0])):!n&&d&&(h.push([y,0]),g.push([y,0])),h.push([y,a]),g.push([y,a]),y+=f,d=n}})),s=this._shadowPolygonPts=h,l=this._shadowPolylinePts=g}this._shadowData=i,this._shadowDim=o,this._shadowSize=[t[0],t[1]];for(var b=this.dataZoomModel,x=0;x<3;x++){var w=S(1===x);this._displayables.sliderGroup.add(w),this._displayables.dataShadowSegs.push(w)}}}function S(e){var t=b.getModel(e?"selectedDataBackground":"dataBackground"),n=new Bc,a=new Ng({shape:{points:s},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new Vg({shape:{points:l},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(a),n.add(i),n}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,a=this.ecModel;return e.eachTargetAxis((function(i,r){var o=e.getAxisProxy(i,r);o&&Ur(o.getTargetSeriesModels(),(function(e){if(!(n||!0!==t&&Vr(EG,e.get("type"))<0)){var o,s=a.getComponent(jL(i),r).axis,l=function(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}(i),p=e.coordinateSystem;null!=l&&p.getOtherAxis&&(o=p.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:i,otherDim:l,otherAxisInverse:o}}}),this)}),this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],a=t.handleLabels=[null,null],i=this._displayables.sliderGroup,r=this._size,o=this.dataZoomModel,s=this.api,l=o.get("borderRadius")||0,p=o.get("brushSelect"),c=t.filler=new _G({silent:p,style:{fill:o.get("fillerColor")},textConfig:{position:"inside"}});i.add(c),i.add(new _G({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1],r:l},style:{stroke:o.get("dataBackgroundColor")||o.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Ur([0,1],(function(t){var r=o.get("handleIcon");!RS[r]&&r.indexOf("path://")<0&&r.indexOf("image://")<0&&(r="path://"+r);var s=LS(r,-1,0,2,2,null,!0);s.attr({cursor:PG(this._orient),draggable:!0,drift:Yr(this._onDragMove,this,t),ondragend:Yr(this._onDragEnd,this),onmouseover:Yr(this._showDataInfo,this,!0),onmouseout:Yr(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),p=o.get("handleSize");this._handleHeight=$c(p,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(o.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=o.getModel(["emphasis","handleStyle"]).getItemStyle(),Vh(s);var c=o.get("handleColor");null!=c&&(s.style.fill=c),i.add(n[t]=s);var d=o.getModel("textStyle");e.add(a[t]=new Lm({silent:!0,invisible:!0,style:Qf(d,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:d.getTextColor(),font:d.getFont()}),z2:10}))}),this);var d=c;if(p){var u=$c(o.get("moveHandleSize"),r[1]),m=t.moveHandle=new Rm({style:o.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:r[1]-.5,height:u}}),h=.8*u,g=t.moveHandleIcon=LS(o.get("moveHandleIcon"),-h/2,-h/2,h,h,"#fff",!0);g.silent=!0,g.y=r[1]+u/2-.5,m.ensureState("emphasis").style=o.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var f=Math.min(r[1]/2,Math.max(u,10));(d=t.moveZone=new Rm({invisible:!0,shape:{y:r[1]-f,height:u+f}})).on("mouseover",(function(){s.enterEmphasis(m)})).on("mouseout",(function(){s.leaveEmphasis(m)})),i.add(m),i.add(g),i.add(d)}d.attr({draggable:!0,cursor:PG(this._orient),drift:Yr(this._onDragMove,this,"all"),ondragstart:Yr(this._showDataInfo,this,!0),ondragend:Yr(this._onDragEnd,this),onmouseover:Yr(this._showDataInfo,this,!0),onmouseout:Yr(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[Wc(e[0],[0,100],t,!0),Wc(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,a=this._handleEnds,i=this._getViewExtent(),r=n.findRepresentativeAxisProxy();if(r){var o=r.getMinMaxSpan(),s=[0,100];MA(t,a,i,n.get("zoomLock")?"all":e,null!=o.minSpan?Wc(o.minSpan,s,i,!0):null,null!=o.maxSpan?Wc(o.maxSpan,s,i,!0):null);var l=this._range,p=this._range=Yc([Wc(a[0],i,s,!0),Wc(a[1],i,s,!0)]);return!l||l[0]!==p[0]||l[1]!==p[1]}return!1},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,a=Yc(n.slice()),i=this._size;Ur([0,1],(function(e){var a=t.handles[e],r=this._handleHeight;a.attr({scaleX:r/2,scaleY:r/2,x:n[e]+(e?-1:1),y:i[1]/2-r/2})}),this),t.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:i[1]});var r={x:a[0],width:a[1]-a[0]};t.moveHandle&&(t.moveHandle.setShape(r),t.moveZone.setShape(r),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",r.x+r.width/2));for(var o=t.dataShadowSegs,s=[0,a[0],a[1],i[0]],l=0;l<o.length;l++){var p=o[l],c=p.getClipPath();c||(c=new Rm,p.setClipPath(c)),c.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:i[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,a=n.handleLabels,i=this._orient,r=["",""];if(t.get("showDetail")){var o=t.findRepresentativeAxisProxy();if(o){var s=o.getAxisModel().axis,l=this._range,p=e?o.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:o.getDataValueWindow();r=[this._formatLabel(p[0],s),this._formatLabel(p[1],s)]}}var c=Yc(this._handleEnds.slice());function d(e){var t=Of(n.handles[e].parent,this.group),o=Ff(0===e?"right":"left",t),s=this._handleWidth/2+5,l=Af([c[e]+(0===e?-s:s),this._size[1]/2],t);a[e].setStyle({x:l[0],y:l[1],verticalAlign:i===TG?"middle":o,align:i===TG?o:"center",text:r[e]})}d.call(this,0),d.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,a=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=t.getPixelPrecision());var r=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(i,20));return Qr(a)?a(e,r):Jr(a)?a.replace("{value}",r):r},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,a){this._dragging=!0,fs(a.event);var i=Af([t,n],this._displayables.sliderGroup.getLocalTransform(),!0),r=this._updateInterval(e,i[0]),o=this.dataZoomModel.get("realtime");this._updateView(!o),r&&o&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var a=this._handleEnds,i=(a[0]+a[1])/2,r=this._updateInterval("all",n[0]-i);this._updateView(),r&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,n=e.offsetY;this._brushStart=new ks(t,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var a=this._getViewExtent(),i=[0,100];this._range=Yc([Wc(n.x,a,i,!0),Wc(n.x+n.width,a,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(fs(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,a=this.dataZoomModel,i=n.brushRect;i||(i=n.brushRect=new _G({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var r=this._brushStart,o=this._displayables.sliderGroup,s=o.transformCoordToLocal(e,t),l=o.transformCoordToLocal(r.x,r.y),p=this._size;s[0]=Math.max(Math.min(p[0],s[0]),0),i.setShape({x:l[0],y:0,width:s[0]-l[0],height:p[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?MG:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=WL(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var a=this.api.getWidth(),i=this.api.getHeight();e={x:.2*a,y:.2*i,width:.6*a,height:.6*i}}return e},t.type="dataZoom.slider",t}(XL);function PG(e){return"vertical"===e?"ns-resize":"ew-resize"}function DG(e){e.registerComponentModel(CG),e.registerComponentView(kG),nV(e)}function OG(e){uI(SG),uI(DG)}var AG=function(e,t,n){var a=Fr((FG[e]||{})[t]);return n&&Zr(a)?a[a.length-1]:a},FG={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},RG=uO.mapVisual,BG=uO.eachVisual,NG=Zr,LG=Ur,VG=Yc,qG=Wc,GG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return ze(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},t.prototype.optionUpdated=function(e,t){var n=this.option;!t&&lq(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var t=this.stateList;e=Yr(e,this),this.controllerVisuals=sq(this.option.controller,t,e),this.targetVisuals=sq(this.option.target,t,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,n){t.push(n)})):t=bd(e),t},t.prototype.eachTargetSeries=function(e,t){Ur(this.getTargetSeriesIndices(),(function(n){var a=this.ecModel.getSeriesByIndex(n);a&&e.call(t,a)}),this)},t.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries((function(n){n===e&&(t=!0)})),t},t.prototype.formatValueText=function(e,t,n){var a,i=this.option,r=i.precision,o=this.dataBound,s=i.formatter;n=n||["<",">"],Zr(e)&&(e=e.slice(),a=!0);var l=t?e:a?[p(e[0]),p(e[1])]:p(e);return Jr(s)?s.replace("{value}",a?l[0]:l).replace("{value2}",a?l[1]:l):Qr(s)?a?s(e[0],e[1]):s(e):a?e[0]===o[0]?n[0]+" "+l[1]:e[1]===o[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function p(e){return e===o[0]?"min":e===o[1]?"max":(+e).toFixed(Math.min(r,20))}},t.prototype.resetExtent=function(){var e=this.option,t=VG([e.min,e.max]);this._dataExtent=t},t.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var n=e.dimensions,a=n.length-1;a>=0;a--){var i=n[a],r=e.getDimensionInfo(i);if(!r.isCalculationCoord)return r.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},a=t.target||(t.target={}),i=t.controller||(t.controller={});Rr(a,n),Rr(i,n);var r=this.isCategory();function o(n){NG(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")}}o.call(this,a),o.call(this,i),function(e,t,n){var a=e[t],i=e[n];a&&!i&&(i=e[n]={},LG(a,(function(e,t){if(uO.isValidType(t)){var n=AG(t,"inactive",r);null!=n&&(i[t]=n,"color"!==t||i.hasOwnProperty("opacity")||i.hasOwnProperty("colorAlpha")||(i.opacity=[0,0]))}})))}.call(this,a,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,a=this.get("inactiveColor"),i=this.getItemSymbol()||"roundRect";LG(this.stateList,(function(o){var s=this.itemSize,l=e[o];l||(l=e[o]={color:r?a:[a]}),null==l.symbol&&(l.symbol=t&&Fr(t)||(r?i:[i])),null==l.symbolSize&&(l.symbolSize=n&&Fr(n)||(r?s[0]:[s[0],s[0]])),l.symbol=RG(l.symbol,(function(e){return"none"===e?i:e}));var p=l.symbolSize;if(null!=p){var c=-1/0;BG(p,(function(e){e>c&&(c=e)})),l.symbolSize=RG(p,(function(e){return qG(e,[0,c],[0,s[0]],!0)}))}}),this)}.call(this,i)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Pv),zG=[20,140],UG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=zG[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=zG[1])},t.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):Zr(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),Ur(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)}),this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),t=Yc((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},t.prototype.getValueState=function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries((function(n){var a=[],i=n.getData();i.each(this.getDataDimensionIndex(i),(function(t,n){e[0]<=t&&t<=e[1]&&a.push(n)}),this),t.push({seriesId:n.id,dataIndex:a})}),this),t},t.prototype.getVisualMeta=function(e){var t=jG(this,"outOfRange",this.getExtent()),n=jG(this,"inRange",this.option.range.slice()),a=[];function i(t,n){a.push({value:t,color:e(t,n)})}for(var r=0,o=0,s=n.length,l=t.length;o<l&&(!n.length||t[o]<=n[0]);o++)t[o]<n[r]&&i(t[o],"outOfRange");for(var p=1;r<s;r++,p=0)p&&a.length&&i(n[r],"outOfRange"),i(n[r],"inRange");for(p=1;o<l;o++)(!n.length||n[n.length-1]<t[o])&&(p&&(a.length&&i(a[a.length-1].value,"outOfRange"),p=0),i(t[o],"outOfRange"));var c=a.length;return{stops:a,outerColors:[c?a[0].color:"transparent",c?a[c-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Cy(GG.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(GG);function jG(e,t,n){if(n[0]===n[1])return n.slice();for(var a=(n[1]-n[0])/200,i=n[0],r=[],o=0;o<=200&&i<n[1];o++)r.push(i),i+=a;return r.push(n[1]),r}var HG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return ze(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t},t.prototype.render=function(e,t,n,a){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,n,a):this.group.removeAll()},t.prototype.renderBackground=function(e){var t=this.visualMapModel,n=cv(t.get("padding")||0),a=e.getBoundingRect();e.add(new Rm({z2:-1,silent:!0,shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[3]+n[1],height:a.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,t,n){var a=(n=n||{}).forceState,i=this.visualMapModel,r={};if("color"===t){var o=i.get("contentColor");r.color=o}function s(e){return r[e]}function l(e,t){r[e]=t}var p=i.controllerVisuals[a||i.getValueState(e)];return Ur(uO.prepareVisualTypes(p),(function(a){var i=p[a];n.convertOpacityToAlpha&&"opacity"===a&&(a="colorAlpha",i=p.__alphaForOpacity),uO.dependsOn(a,t)&&i&&i.applyVisual(e,s,l)})),r[t]},t.prototype.positionGroup=function(e){var t=this.visualMapModel,n=this.api;_v(e,t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(e,t,n,a){},t.type="visualMap",t}(Sw),WG=[["left","right","width"],["top","bottom","height"]];function $G(e,t,n){var a=e.option,i=a.align;if(null!=i&&"auto"!==i)return i;for(var r={width:t.getWidth(),height:t.getHeight()},o="horizontal"===a.orient?1:0,s=WG[o],l=[0,null,10],p={},c=0;c<3;c++)p[WG[1-o][c]]=l[c],p[s[c]]=2===c?n[0]:a[s[c]];var d=[["x","width",3],["y","height",0]][o],u=Cv(p,r,a.padding);return s[(u.margin[d[2]]||0)+u[d[0]]+.5*u[d[1]]<.5*r[d[1]]?0:1]}function KG(e,t){return Ur(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var YG=Wc,XG=Ur,ZG=Math.min,QG=Math.max,JG=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return ze(t,e),t.prototype.init=function(t,n){e.prototype.init.call(this,t,n),this._hoverLinkFromSeriesMouseOver=Yr(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Yr(this._hideIndicator,this)},t.prototype.doRender=function(e,t,n,a){a&&"selectDataRange"===a.type&&a.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},t.prototype._renderEndsText=function(e,t,n){if(t){var a=t[1-n];a=null!=a?a+"":"";var i=this.visualMapModel,r=i.get("textGap"),o=i.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([o[0]/2,0===n?-r:o[1]+r],s),p=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Lm({style:Qf(d,{x:l[0],y:l[1],verticalAlign:"horizontal"===c?"middle":p,align:"horizontal"===c?p:"center",text:a})}))}},t.prototype._renderBar=function(e){var t=this.visualMapModel,n=this._shapes,a=t.itemSize,i=this._orient,r=this._useHandle,o=$G(t,this.api,a),s=n.mainGroup=this._createBarGroup(o),l=new Bc;s.add(l),l.add(n.outOfRange=ez()),l.add(n.inRange=ez(null,r?nz(this._orient):null,Yr(this._dragHandle,this,"all",!1),Yr(this._dragHandle,this,"all",!0))),l.setClipPath(new Rm({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var p=t.textStyleModel.getTextRect("国"),c=QG(p.width,p.height);r&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(t,s,0,a,c,i),this._createHandle(t,s,1,a,c,i)),this._createIndicator(t,s,a,c,i),e.add(s)},t.prototype._createHandle=function(e,t,n,a,i,r){var o=Yr(this._dragHandle,this,n,!1),s=Yr(this._dragHandle,this,n,!0),l=_c(e.get("handleSize"),a[0]),p=LS(e.get("handleIcon"),-l/2,-l/2,l,l,null,!0),c=nz(this._orient);p.attr({cursor:c,draggable:!0,drift:o,ondragend:s,onmousemove:function(e){fs(e.event)}}),p.x=a[0]/2,p.useStyle(e.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Hh(p,!0),t.add(p);var d=this.visualMapModel.textStyleModel,u=new Lm({cursor:c,draggable:!0,drift:o,onmousemove:function(e){fs(e.event)},ondragend:s,style:Qf(d,{x:0,y:0,text:""})});u.ensureState("blur").style={opacity:.1},u.stateTransition={duration:200},this.group.add(u);var m=[l,0],h=this._shapes;h.handleThumbs[n]=p,h.handleLabelPoints[n]=m,h.handleLabels[n]=u},t.prototype._createIndicator=function(e,t,n,a,i){var r=_c(e.get("indicatorSize"),n[0]),o=LS(e.get("indicatorIcon"),-r/2,-r/2,r,r,null,!0);o.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=e.getModel("indicatorStyle").getItemStyle();if(o instanceof Mm){var l=o.style;o.useStyle(Nr({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else o.useStyle(s);t.add(o);var p=this.visualMapModel.textStyleModel,c=new Lm({silent:!0,invisible:!0,style:Qf(p,{x:0,y:0,text:""})});this.group.add(c);var d=[("horizontal"===i?a/2:6)+n[0]/2,0],u=this._shapes;u.indicator=o,u.indicatorLabel=c,u.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,t,n,a){if(this._useHandle){if(this._dragging=!t,!t){var i=this._applyTransform([n,a],this._shapes.mainGroup,!0);this._updateInterval(e,i[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():tz(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),a=[0,e.itemSize[1]];this._handleEnds=[YG(t[0],n,a,!0),YG(t[1],n,a,!0)]},t.prototype._updateInterval=function(e,t){t=t||0;var n=this.visualMapModel,a=this._handleEnds,i=[0,n.itemSize[1]];MA(t,a,i,e,0);var r=n.getExtent();this._dataInterval=[YG(a[0],i,r,!0),YG(a[1],i,r,!0)]},t.prototype._updateView=function(e){var t=this.visualMapModel,n=t.getExtent(),a=this._shapes,i=[0,t.itemSize[1]],r=e?i:this._handleEnds,o=this._createBarVisual(this._dataInterval,n,r,"inRange"),s=this._createBarVisual(n,n,i,"outOfRange");a.inRange.setStyle({fill:o.barColor}).setShape("points",o.barPoints),a.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(r,o)},t.prototype._createBarVisual=function(e,t,n,a){var i={forceState:a,convertOpacityToAlpha:!0},r=this._makeColorGradient(e,i),o=[this.getControllerVisual(e[0],"symbolSize",i),this.getControllerVisual(e[1],"symbolSize",i)],s=this._createBarPoints(n,o);return{barColor:new Zg(0,0,0,1,r),barPoints:s,handlesColor:[r[0].color,r[r.length-1].color]}},t.prototype._makeColorGradient=function(e,t){var n=[],a=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var i=1;i<100;i++){var r=e[0]+a*i;if(r>e[1])break;n.push({color:this.getControllerVisual(r,"color",t),offset:i/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},t.prototype._createBarPoints=function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},t.prototype._createBarGroup=function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new Bc("horizontal"!==t||n?"horizontal"===t&&n?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||n?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,t){if(this._useHandle){var n=this._shapes,a=this.visualMapModel,i=n.handleThumbs,r=n.handleLabels,o=a.itemSize,s=a.getExtent();XG([0,1],(function(l){var p=i[l];p.setStyle("fill",t.handlesColor[l]),p.y=e[l];var c=YG(e[l],[0,o[1]],s,!0),d=this.getControllerVisual(c,"symbolSize");p.scaleX=p.scaleY=d/o[0],p.x=o[0]-d/2;var u=Af(n.handleLabelPoints[l],Of(p,this.group));r[l].setStyle({x:u[0],y:u[1],text:a.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},t.prototype._showIndicator=function(e,t,n,a){var i=this.visualMapModel,r=i.getExtent(),o=i.itemSize,s=[0,o[1]],l=this._shapes,p=l.indicator;if(p){p.attr("invisible",!1);var c=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),d=this.getControllerVisual(e,"symbolSize"),u=YG(e,r,s,!0),m=o[0]-d/2,h={x:p.x,y:p.y};p.y=u,p.x=m;var g=Af(l.indicatorLabelPoint,Of(p,this.group)),f=l.indicatorLabel;f.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),v="horizontal"===this._orient;f.setStyle({text:(n||"")+i.formatValueText(t),verticalAlign:v?y:"middle",align:v?"center":y});var b={x:m,y:u,style:{fill:c}},x={style:{x:g[0],y:g[1]}};if(i.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var w={duration:100,easing:"cubicInOut",additive:!0};p.x=h.x,p.y=h.y,p.animateTo(b,w),f.animateTo(x,w)}else p.attr(b),f.attr(x);this._firstShowIndicator=!1;var S=this._shapes.handleLabels;if(S)for(var C=0;C<S.length;C++)this.api.enterBlur(S[C])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,a=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);a[1]=ZG(QG(0,a[1]),n[1]),e._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=n[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,t){var n=this.visualMapModel,a=n.itemSize;if(n.option.hoverLink){var i=[0,a[1]],r=n.getExtent();e=ZG(QG(i[0],e),i[1]);var o=function(e,t,n){var a=6,i=e.get("hoverLinkDataSize");i&&(a=YG(i,t,n,!0)/2);return a}(n,r,i),s=[e-o,e+o],l=YG(e,i,r,!0),p=[YG(s[0],i,r,!0),YG(s[1],i,r,!0)];s[0]<i[0]&&(p[0]=-1/0),s[1]>i[1]&&(p[1]=1/0),t&&(p[0]===-1/0?this._showIndicator(l,p[1],"< ",o):p[1]===1/0?this._showIndicator(l,p[0],"> ",o):this._showIndicator(l,l,"≈ ",o));var c=this._hoverLinkDataIndices,d=[];(t||tz(n))&&(d=this._hoverLinkDataIndices=n.findTargetDataIndices(p));var u=function(e,t){var n={},a={};return i(e||[],n),i(t||[],a,n),[r(n),r(a)];function i(e,t,n){for(var a=0,i=e.length;a<i;a++){var r=Ed(e[a].seriesId,null);if(null==r)return;for(var o=bd(e[a].dataIndex),s=n&&n[r],l=0,p=o.length;l<p;l++){var c=o[l];s&&s[c]?s[c]=null:(t[r]||(t[r]={}))[c]=1}}}function r(e,t){var n=[];for(var a in e)if(e.hasOwnProperty(a)&&null!=e[a])if(t)n.push(+a);else{var i=r(e[a],!0);i.length&&n.push({seriesId:a,dataIndex:i})}return n}}(c,d);this._dispatchHighDown("downplay",KG(u[0],n)),this._dispatchHighDown("highlight",KG(u[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(IS(e.target,(function(e){var n=Zm(e);if(null!=n.dataIndex)return t=n,!0}),!0),t){var n=this.ecModel.getSeriesByIndex(t.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(n)){var i=n.getData(t.dataType),r=i.getStore().get(a.getDataDimensionIndex(i),t.dataIndex);isNaN(r)||this._showIndicator(r,r)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var n=0;n<t.length;n++)this.api.leaveBlur(t[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",KG(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,t,n,a){var i=Of(t,a?null:this.group);return Zr(e)?Af(e,i,n):Ff(e,i,n)},t.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(HG);function ez(e,t,n,a){return new Ng({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){fs(e.event)},ondragend:a})}function tz(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function nz(e){return"vertical"===e?"ns-resize":"ew-resize"}var az={type:"selectDataRange",event:"dataRangeSelected",update:"update"},iz=function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))},rz=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",(function(t){var a,i,r,o,s,l=e.pipelineContext;!t.isTargetSeries(e)||l&&l.large||n.push((a=t.stateList,i=t.targetVisuals,r=Yr(t.getValueState,t),o=t.getDataDimensionIndex(e.getData()),s={},Ur(a,(function(e){var t=uO.prepareVisualTypes(i[e]);s[e]=t})),{progress:function(e,t){var n,a;function l(e){return wS(t,a,e)}function p(e,n){CS(t,a,e,n)}null!=o&&(n=t.getDimensionIndex(o));for(var c=t.getStore();null!=(a=e.next());){var d=t.getRawDataItem(a);if(!d||!1!==d.visualMap)for(var u=null!=o?c.get(n,a):a,m=r(u),h=i[m],g=s[m],f=0,y=g.length;f<y;f++){var v=g[f];h[v]&&h[v].applyVisual(u,l,p)}}}}))})),n}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),a=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var i=t.getVisualMeta(Yr(oz,null,e,t))||{stops:[],outerColors:[]},r=t.getDataDimensionIndex(n);r>=0&&(i.dimension=r,a.push(i))}})),e.getData().setVisual("visualMeta",a)}}];function oz(e,t,n,a){for(var i=t.targetVisuals[a],r=uO.prepareVisualTypes(i),o={color:SS(e.getData(),"color")},s=0,l=r.length;s<l;s++){var p=r[s],c=i["opacity"===p?"__alphaForOpacity":p];c&&c.applyVisual(n,d,u)}return o.color;function d(e){return o[e]}function u(e,t){o[e]=t}}var sz=Ur;function lz(e){var t=e&&e.visualMap;Zr(t)||(t=t?[t]:[]),sz(t,(function(e){if(e){pz(e,"splitList")&&!pz(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&Zr(t)&&sz(t,(function(e){no(e)&&(pz(e,"start")&&!pz(e,"min")&&(e.min=e.start),pz(e,"end")&&!pz(e,"max")&&(e.max=e.end))}))}}))}function pz(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var cz=!1;function dz(e){cz||(cz=!0,e.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"})),e.registerAction(az,iz),Ur(rz,(function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)})),e.registerPreprocessor(lz))}function uz(e){e.registerComponentModel(UG),e.registerComponentView(JG),dz(e)}var mz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return ze(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],hz[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var i=this.option.categories;this.resetVisual((function(e,t){"categories"===a?(e.mappingMethod="category",e.categories=Fr(i)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=jr(this._pieceList,(function(e){return e=Fr(e),"inRange"!==t&&(e.visual=null),e})))}))},t.prototype.completeVisualOption=function(){var t=this.option,n={},a=uO.listVisualTypes(),i=this.isCategory();function r(e,t,n){return e&&e[t]&&e[t].hasOwnProperty(n)}Ur(t.pieces,(function(e){Ur(a,(function(t){e.hasOwnProperty(t)&&(n[t]=1)}))})),Ur(n,(function(e,n){var a=!1;Ur(this.stateList,(function(e){a=a||r(t,e,n)||r(t.target,e,n)}),this),!a&&Ur(this.stateList,(function(e){(t[e]||(t[e]={}))[n]=AG(n,"inRange"===e?"active":"inactive",i)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var n=this.option,a=this._pieceList,i=(t?n:e).selected||{};if(n.selected=i,Ur(a,(function(e,t){var n=this.getSelectedMapKey(e);i.hasOwnProperty(n)||(i[n]=!0)}),this),"single"===n.selectedMode){var r=!1;Ur(a,(function(e,t){var n=this.getSelectedMapKey(e);i[n]&&(r?i[n]=!1:r=!0)}),this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Fr(e)},t.prototype.getValueState=function(e){var t=uO.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],n=this._pieceList;return this.eachTargetSeries((function(a){var i=[],r=a.getData();r.each(this.getDataDimensionIndex(r),(function(t,a){uO.findPieceIndex(t,n)===e&&i.push(a)}),this),t.push({seriesId:a.id,dataIndex:i})}),this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],n=["",""],a=this,i=this._pieceList.slice();if(i.length){var r=i[0].interval[0];r!==-1/0&&i.unshift({interval:[-1/0,r]}),(r=i[i.length-1].interval[1])!==1/0&&i.push({interval:[r,1/0]})}else i.push({interval:[-1/0,1/0]});var o=-1/0;return Ur(i,(function(e){var t=e.interval;t&&(t[0]>o&&s([o,t[0]],"outOfRange"),s(t.slice()),o=t[1])}),this),{stops:t,outerColors:n}}function s(i,r){var o=a.getRepresentValue({interval:i});r||(r=a.getValueState(o));var s=e(o,r);i[0]===-1/0?n[0]=s:i[1]===1/0?n[1]=s:t.push({value:i[0],color:s},{value:i[1],color:s})}},t.type="visualMap.piecewise",t.defaultOption=Cy(GG.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(GG),hz={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),a=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var r=(a[1]-a[0])/i;+r.toFixed(n)!==r&&n<5;)n++;t.precision=n,r=+r.toFixed(n),t.minOpen&&e.push({interval:[-1/0,a[0]],close:[0,0]});for(var o=0,s=a[0];o<i;s+=r,o++){var l=o===i-1?a[1]:s+r;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[a[1],1/0],close:[0,0]}),ld(e),Ur(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;Ur(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),gz(t,e)},pieces:function(e){var t=this.option;Ur(t.pieces,(function(t,n){no(t)||(t={value:t});var a={text:"",index:n};if(null!=t.label&&(a.text=t.label),t.hasOwnProperty("value")){var i=a.value=t.value;a.interval=[i,i],a.close=[1,1]}else{for(var r=a.interval=[],o=a.close=[0,0],s=[1,0,1],l=[-1/0,1/0],p=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],u=0;u<3&&null==r[c];u++)r[c]=t[d[u]],o[c]=s[u],p[c]=2===u;null==r[c]&&(r[c]=l[c])}p[0]&&r[1]===1/0&&(o[0]=0),p[1]&&r[0]===-1/0&&(o[1]=0),r[0]===r[1]&&o[0]&&o[1]&&(a.value=r[0])}a.visual=uO.retrieveVisuals(t),e.push(a)}),this),gz(t,e),ld(e),Ur(e,(function(e){var t=e.close,n=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)}),this)}};function gz(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}var fz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return ze(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),a=t.textStyleModel,i=a.getFont(),r=a.getTextColor(),o=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),p=l.endsText,c=co(t.get("showLabel",!0),!p);p&&this._renderEndsText(e,p[0],s,c,o),Ur(l.viewPieceList,(function(a){var l=a.piece,p=new Bc;p.onclick=Yr(this._onItemClick,this,l),this._enableHoverLink(p,a.indexInModelPieceList);var d=t.getRepresentValue(l);if(this._createItemSymbol(p,d,[0,0,s[0],s[1]]),c){var u=this.visualMapModel.getValueState(d);p.add(new Lm({style:{x:"right"===o?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:o,font:i,fill:r,opacity:"outOfRange"===u?.5:1}}))}e.add(p)}),this),p&&this._renderEndsText(e,p[1],s,c,o),Sv(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var n=this;e.on("mouseover",(function(){return a("highlight")})).on("mouseout",(function(){return a("downplay")}));var a=function(e){var a=n.visualMapModel;a.option.hoverLink&&n.api.dispatchAction({type:e,batch:KG(a.findTargetDataIndices(t),a)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return $G(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},t.prototype._renderEndsText=function(e,t,n,a,i){if(t){var r=new Bc,o=this.visualMapModel.textStyleModel;r.add(new Lm({style:Qf(o,{x:a?"right"===i?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:a?i:"center",text:t})})),e.add(r)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=jr(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),n=e.get("text"),a=e.get("orient"),i=e.get("inverse");return("horizontal"===a?i:!i)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},t.prototype._createItemSymbol=function(e,t,n){e.add(LS(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},t.prototype._onItemClick=function(e){var t=this.visualMapModel,n=t.option,a=n.selectedMode;if(a){var i=Fr(n.selected),r=t.getSelectedMapKey(e);"single"===a||!0===a?(i[r]=!0,Ur(i,(function(e,t){i[t]=t===r}))):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}},t.type="visualMap.piecewise",t}(HG);function yz(e){e.registerComponentModel(mz),e.registerComponentView(fz),dz(e)}function vz(e){uI(uz),uI(yz)}Dd();var bz={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},xz=function(){function e(e){if(null==(this._condVal=Jr(e)?new RegExp(e):lo(e)?e:null)){var t="";0,gd(t)}}return e.prototype.evaluate=function(e){var t=typeof e;return Jr(t)?this._condVal.test(e):!!to(t)&&this._condVal.test(e+"")},e}(),wz=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Sz=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},e}(),Cz=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},e}(),_z=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Tz=function(){function e(){}return e.prototype.evaluate=function(){for(var e=!!this.valueParser,t=(0,this.getValue)(this.valueGetterParam),n=e?this.valueParser(t):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?n:t))return!1;return!0},e}();function Iz(e,t){if(!0===e||!1===e){var n=new wz;return n.value=e,n}var a="";return Mz(e)||gd(a),e.and?Ez("and",e,t):e.or?Ez("or",e,t):e.not?function(e,t){var n=e.not,a="";0;Mz(n)||gd(a);var i=new _z;i.child=Iz(n,t),i.child||gd(a);return i}(e,t):function(e,t){for(var n="",a=t.prepareGetValue(e),i=[],r=Kr(e),o=e.parser,s=o?bx(o):null,l=0;l<r.length;l++){var p=r[l];if("parser"!==p&&!t.valueGetterAttrMap.get(p)){var c=Mo(bz,p)?bz[p]:p,d=e[p],u=s?s(d):d,m=Tx(c,u)||"reg"===c&&new xz(u);m||gd(n),i.push(m)}}i.length||gd(n);var h=new Tz;return h.valueGetterParam=a,h.valueParser=s,h.getValue=t.getValue,h.subCondList=i,h}(e,t)}function Ez(e,t,n){var a=t[e],i="";Zr(a)||gd(i),a.length||gd(i);var r="and"===e?new Sz:new Cz;return r.children=jr(a,(function(e){return Iz(e,n)})),r.children.length||gd(i),r}function Mz(e){return no(e)&&!zr(e)}!function(){function e(e,t){this._cond=Iz(e,t)}e.prototype.evaluate=function(){return this._cond.evaluate()}}();(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}ze(t,e),t.prototype.init=function(t,n,a){e.prototype.init.call(this,t,n,a),this._sourceManager=new jx(this),Hx(this)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),Hx(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Gv}})(Pv),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}ze(t,e),t.type="dataset"}(Sw);am.CMD;Dd();var kz=Math.sin,Pz=Math.cos,Dz=Math.PI,Oz=2*Math.PI,Az=180/Dz,Fz=function(){function e(){}return e.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},e.prototype.moveTo=function(e,t){this._add("M",e,t)},e.prototype.lineTo=function(e,t){this._add("L",e,t)},e.prototype.bezierCurveTo=function(e,t,n,a,i,r){this._add("C",e,t,n,a,i,r)},e.prototype.quadraticCurveTo=function(e,t,n,a){this._add("Q",e,t,n,a)},e.prototype.arc=function(e,t,n,a,i,r){this.ellipse(e,t,n,n,0,a,i,r)},e.prototype.ellipse=function(e,t,n,a,i,r,o,s){var l=o-r,p=!s,c=Math.abs(l),d=pp(c-Oz)||(p?l>=Oz:-l>=Oz),u=l>0?l%Oz:l%Oz+Oz,m=!1;m=!!d||!pp(c)&&u>=Dz==!!p;var h=e+n*Pz(r),g=t+a*kz(r);this._start&&this._add("M",h,g);var f=Math.round(i*Az);if(d){var y=1/this._p,v=(p?1:-1)*(Oz-y);this._add("A",n,a,f,1,+p,e+n*Pz(r+v),t+a*kz(r+v)),y>.01&&this._add("A",n,a,f,0,+p,h,g)}else{var b=e+n*Pz(o),x=t+a*kz(o);this._add("A",n,a,f,+m,+p,b,x)}},e.prototype.rect=function(e,t,n,a){this._add("M",e,t),this._add("l",n,0),this._add("l",0,a),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(e,t,n,a,i,r,o,s,l){for(var p=[],c=this._p,d=1;d<arguments.length;d++){var u=arguments[d];if(isNaN(u))return void(this._invalid=!0);p.push(Math.round(u*c)/c)}this._d.push(e+p.join(" ")),this._start="Z"===e},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),Rz="none",Bz=Math.round;var Nz=["lineCap","miterLimit","lineJoin"],Lz=jr(Nz,(function(e){return"stroke-"+e.toLowerCase()}));function Vz(e,t,n,a){var i=null==t.opacity?1:t.opacity;if(n instanceof Mm)e("opacity",i);else{if(function(e){var t=e.fill;return null!=t&&t!==Rz}(t)){var r=sp(t.fill);e("fill",r.color);var o=null!=t.fillOpacity?t.fillOpacity*r.opacity*i:r.opacity*i;(a||o<1)&&e("fill-opacity",o)}else e("fill",Rz);if(function(e){var t=e.stroke;return null!=t&&t!==Rz}(t)){var s=sp(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?n.getLineScale():1,p=l?(t.lineWidth||0)/l:0,c=null!=t.strokeOpacity?t.strokeOpacity*s.opacity*i:s.opacity*i,d=t.strokeFirst;if((a||1!==p)&&e("stroke-width",p),(a||d)&&e("paint-order",d?"stroke":"fill"),(a||c<1)&&e("stroke-opacity",c),t.lineDash){var u=HS(n),m=u[0],h=u[1];m&&(h=Bz(h||0),e("stroke-dasharray",m.join(",")),(h||a)&&e("stroke-dashoffset",h))}else a&&e("stroke-dasharray",Rz);for(var g=0;g<Nz.length;g++){var f=Nz[g];if(a||t[f]!==xm[f]){var y=t[f]||xm[f];y&&e(Lz[g],y)}}}else a&&e("stroke",Rz)}}var qz="http://www.w3.org/2000/svg",Gz="http://www.w3.org/1999/xlink",zz="ecmeta_";function Uz(e){return document.createElementNS(qz,e)}function jz(e,t,n,a,i){return{tag:e,attrs:n||{},children:a,text:i,key:t}}function Hz(e,t){var n=(t=t||{}).newline?"\n":"";return function e(t){var a=t.children,i=t.tag,r=t.attrs,o=t.text;return function(e,t){var n=[];if(t)for(var a in t){var i=t[a],r=a;!1!==i&&(!0!==i&&null!=i&&(r+='="'+i+'"'),n.push(r))}return"<"+e+" "+n.join(" ")+">"}(i,r)+("style"!==i?ss(o):o||"")+(a?""+n+jr(a,(function(t){return e(t)})).join(n)+n:"")+("</"+i+">")}(e)}function Wz(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function $z(e,t,n,a){return jz("svg","root",{width:e,height:t,xmlns:qz,"xmlns:xlink":Gz,version:"1.1",baseProfile:"full",viewBox:!!a&&"0 0 "+e+" "+t},n)}var Kz=0;function Yz(){return Kz++}var Xz={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Zz="transform-origin";function Qz(e,t,n){var a=Nr({},e.shape);Nr(a,t),e.buildPath(n,a);var i=new Fz;return i.reset(bp(e)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function Jz(e,t){var n=t.originX,a=t.originY;(n||a)&&(e[Zz]=n+"px "+a+"px")}var eU={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function tU(e,t){var n=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[n]=e,n}function nU(e){return Jr(e)?Xz[e]?"cubic-bezier("+Xz[e]+")":Ol(e)?e:"":""}function aU(e,t,n,a){var i=e.animators,r=i.length,o=[];if(e instanceof Yg){var s=function(e,t,n){var a,i,r=e.shape.paths,o={};if(Ur(r,(function(e){var t=Wz(n.zrId);t.animation=!0,aU(e,{},t,!0);var r=t.cssAnims,s=t.cssNodes,l=Kr(r),p=l.length;if(p){var c=r[i=l[p-1]];for(var d in c){var u=c[d];o[d]=o[d]||{d:""},o[d].d+=u.d||""}for(var m in s){var h=s[m].animation;h.indexOf(i)>=0&&(a=h)}}})),a){t.d=!1;var s=tU(o,n);return a.replace(i,s)}}(e,t,n);if(s)o.push(s);else if(!r)return}else if(!r)return;for(var l={},p=0;p<r;p++){var c=i[p],d=[c.getMaxTime()/1e3+"s"],u=nU(c.getClip().easing),m=c.getDelay();u?d.push(u):d.push("linear"),m&&d.push(m/1e3+"s"),c.getLoop()&&d.push("infinite");var h=d.join(" ");l[h]=l[h]||[h,[]],l[h][1].push(c)}function g(i){var r,o=i[1],s=o.length,l={},p={},c={},d="animation-timing-function";function u(e,t,n){for(var a=e.getTracks(),i=e.getMaxTime(),r=0;r<a.length;r++){var o=a[r];if(o.needsAnimate()){var s=o.keyframes,l=o.propName;if(n&&(l=n(l)),l)for(var p=0;p<s.length;p++){var c=s[p],u=Math.round(c.time/i*100)+"%",m=nU(c.easing),h=c.rawValue;(Jr(h)||to(h))&&(t[u]=t[u]||{},t[u][l]=c.rawValue,m&&(t[u][d]=m))}}}}for(var m=0;m<s;m++){(C=(S=o[m]).targetName)?"shape"===C&&u(S,p):!a&&u(S,l)}for(var h in l){var g={};fc(g,e),Nr(g,l[h]);var f=xp(g),y=l[h][d];c[h]=f?{transform:f}:{},Jz(c[h],g),y&&(c[h][d]=y)}var v=!0;for(var h in p){c[h]=c[h]||{};var b=!r;y=p[h][d];b&&(r=new am);var x=r.len();r.reset(),c[h].d=Qz(e,p[h],r);var w=r.len();if(!b&&x!==w){v=!1;break}y&&(c[h][d]=y)}if(!v)for(var h in c)delete c[h].d;if(!a)for(m=0;m<s;m++){var S,C;"style"===(C=(S=o[m]).targetName)&&u(S,c,(function(e){return eU[e]}))}var _,T=Kr(c),I=!0;for(m=1;m<T.length;m++){var E=T[m-1],M=T[m];if(c[E][Zz]!==c[M][Zz]){I=!1;break}_=c[E][Zz]}if(I&&_){for(var h in c)c[h][Zz]&&delete c[h][Zz];t[Zz]=_}if(Wr(T,(function(e){return Kr(c[e]).length>0})).length)return tU(c,n)+" "+i[0]+" both"}for(var f in l){(s=g(l[f]))&&o.push(s)}if(o.length){var y=n.zrId+"-cls-"+Yz();n.cssNodes["."+y]={animation:o.join(",")},t.class=y}}function iU(e,t,n,a){var i=JSON.stringify(e),r=n.cssStyleCache[i];r||(r=n.zrId+"-cls-"+Yz(),n.cssStyleCache[i]=r,n.cssNodes["."+r+(a?":hover":"")]=e),t.class=t.class?t.class+" "+r:r}var rU=Math.round;function oU(e){return e&&Jr(e.src)}function sU(e){return e&&Qr(e.toDataURL)}function lU(e,t,n,a){Vz((function(i,r){var o="fill"===i||"stroke"===i;o&&yp(r)?bU(t,e,i,a):o&&hp(r)?xU(n,e,i,a):e[i]=o&&"none"===r?"transparent":r}),t,n,!1),function(e,t,n){var a=e.style;if(function(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}(a)){var i=function(e){var t=e.style,n=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}(e),r=n.shadowCache,o=r[i];if(!o){var s=e.getGlobalScale(),l=s[0],p=s[1];if(!l||!p)return;var c=a.shadowOffsetX||0,d=a.shadowOffsetY||0,u=a.shadowBlur,m=sp(a.shadowColor),h=m.opacity,g=m.color,f=u/2/l+" "+u/2/p;o=n.zrId+"-s"+n.shadowIdx++,n.defs[o]=jz("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[jz("feDropShadow","",{dx:c/l,dy:d/p,stdDeviation:f,"flood-color":g,"flood-opacity":h})]),r[i]=o}t.filter=vp(o)}}(n,e,a)}function pU(e,t){var n=Uc(t);n&&(n.each((function(t,n){null!=t&&(e[(zz+n).toLowerCase()]=t+"")})),t.isSilent()&&(e[zz+"silent"]="true"))}function cU(e){return pp(e[0]-1)&&pp(e[1])&&pp(e[2])&&pp(e[3]-1)}function dU(e,t,n){if(t&&(!function(e){return pp(e[4])&&pp(e[5])}(t)||!cU(t))){var a=n?10:1e4;e.transform=cU(t)?"translate("+rU(t[4]*a)/a+" "+rU(t[5]*a)/a+")":function(e){return"matrix("+cp(e[0])+","+cp(e[1])+","+cp(e[2])+","+cp(e[3])+","+dp(e[4])+","+dp(e[5])+")"}(t)}}function uU(e,t,n){for(var a=e.points,i=[],r=0;r<a.length;r++)i.push(rU(a[r][0]*n)/n),i.push(rU(a[r][1]*n)/n);t.points=i.join(" ")}function mU(e){return!e.smooth}var hU,gU,fU={circle:[(hU=["cx","cy","r"],gU=jr(hU,(function(e){return"string"==typeof e?[e,e]:e})),function(e,t,n){for(var a=0;a<gU.length;a++){var i=gU[a],r=e[i[0]];null!=r&&(t[i[1]]=rU(r*n)/n)}})],polyline:[uU,mU],polygon:[uU,mU]};function yU(e,t){var n=e.style,a=e.shape,i=fU[e.type],r={},o=t.animation,s="path",l=e.style.strokePercent,p=t.compress&&bp(e)||4;if(!i||t.willUpdate||i[1]&&!i[1](a)||o&&function(e){for(var t=e.animators,n=0;n<t.length;n++)if("shape"===t[n].targetName)return!0;return!1}(e)||l<1){var c=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;c&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var u=d.getVersion(),m=e,h=m.__svgPathBuilder;m.__svgPathVersion===u&&h&&l===m.__svgPathStrokePercent||(h||(h=m.__svgPathBuilder=new Fz),h.reset(p),d.rebuildPath(h,l),h.generateStr(),m.__svgPathVersion=u,m.__svgPathStrokePercent=l),r.d=h.getStr()}else{s=e.type;var g=Math.pow(10,p);i[0](a,r,g)}return dU(r,e.transform),lU(r,n,e,t),pU(r,e),t.animation&&aU(e,r,t),t.emphasis&&function(e,t,n){if(!e.ignore)if(e.isSilent())iU(p={"pointer-events":"none"},t,n,!0);else{var a=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},i=a.fill;if(!i){var r=e.style&&e.style.fill,o=e.states.select&&e.states.select.style&&e.states.select.style.fill,s=e.currentStates.indexOf("select")>=0&&o||r;s&&(i=rp(s))}var l=a.lineWidth;l&&(l/=!a.strokeNoScale&&e.transform?e.transform[0]:1);var p={cursor:"pointer"};i&&(p.fill=i),a.stroke&&(p.stroke=a.stroke),l&&(p["stroke-width"]=l),iU(p,t,n,!0)}}(e,r,t),jz(s,e.id+"",r)}function vU(e,t){return e instanceof Cm?yU(e,t):e instanceof Mm?function(e,t){var n=e.style,a=n.image;if(a&&!Jr(a)&&(oU(a)?a=a.src:sU(a)&&(a=a.toDataURL())),a){var i=n.x||0,r=n.y||0,o={href:a,width:n.width,height:n.height};return i&&(o.x=i),r&&(o.y=r),dU(o,e.transform),lU(o,n,e,t),pU(o,e),t.animation&&aU(e,o,t),jz("image",e.id+"",o)}}(e,t):e instanceof Tm?function(e,t){var n=e.style,a=n.text;if(null!=a&&(a+=""),a&&!isNaN(n.x)&&!isNaN(n.y)){var i=n.font||gr,r=n.x||0,o=function(e,t,n){return"top"===n?e+=t/2:"bottom"===n&&(e-=t/2),e}(n.y||0,Cc(i),n.textBaseline),s={"dominant-baseline":"central","text-anchor":up[n.textAlign]||n.textAlign};if(jm(n)){var l="",p=n.fontStyle,c=zm(n.fontSize);if(!parseFloat(c))return;var d=n.fontFamily||hr,u=n.fontWeight;l+="font-size:"+c+";font-family:"+d+";",p&&"normal"!==p&&(l+="font-style:"+p+";"),u&&"normal"!==u&&(l+="font-weight:"+u+";"),s.style=l}else s.style="font: "+i;return a.match(/\s/)&&(s["xml:space"]="preserve"),r&&(s.x=r),o&&(s.y=o),dU(s,e.transform),lU(s,n,e,t),pU(s,e),t.animation&&aU(e,s,t),jz("text",e.id+"",s,void 0,a)}}(e,t):void 0}function bU(e,t,n,a){var i,r=e[n],o={gradientUnits:r.global?"userSpaceOnUse":"objectBoundingBox"};if(gp(r))i="linearGradient",o.x1=r.x,o.y1=r.y,o.x2=r.x2,o.y2=r.y2;else{if(!fp(r))return void 0;i="radialGradient",o.cx=uo(r.x,.5),o.cy=uo(r.y,.5),o.r=uo(r.r,.5)}for(var s=r.colorStops,l=[],p=0,c=s.length;p<c;++p){var d=100*dp(s[p].offset)+"%",u=sp(s[p].color),m=u.color,h=u.opacity,g={offset:d};g["stop-color"]=m,h<1&&(g["stop-opacity"]=h),l.push(jz("stop",p+"",g))}var f=Hz(jz(i,"",o,l)),y=a.gradientCache,v=y[f];v||(v=a.zrId+"-g"+a.gradientIdx++,y[f]=v,o.id=v,a.defs[v]=jz(i,v,o,l)),t[n]=vp(v)}function xU(e,t,n,a){var i,r=e.style[n],o=e.getBoundingRect(),s={},l=r.repeat,p="no-repeat"===l,c="repeat-x"===l,d="repeat-y"===l;if(mp(r)){var u=r.imageWidth,m=r.imageHeight,h=void 0,g=r.image;if(Jr(g)?h=g:oU(g)?h=g.src:sU(g)&&(h=g.toDataURL()),"undefined"==typeof Image){var f="Image width/height must been given explictly in svg-ssr renderer.";fo(u,f),fo(m,f)}else if(null==u||null==m){var y=function(e,t){if(e){var n=e.elm,a=u||t.width,i=m||t.height;"pattern"===e.tag&&(c?(i=1,a/=o.width):d&&(a=1,i/=o.height)),e.attrs.width=a,e.attrs.height=i,n&&(n.setAttribute("width",a),n.setAttribute("height",i))}},v=tu(h,null,e,(function(e){p||y(S,e),y(i,e)}));v&&v.width&&v.height&&(u=u||v.width,m=m||v.height)}i=jz("image","img",{href:h,width:u,height:m}),s.width=u,s.height=m}else r.svgElement&&(i=Fr(r.svgElement),s.width=r.svgWidth,s.height=r.svgHeight);if(i){var b,x;p?b=x=1:c?(x=1,b=s.width/o.width):d?(b=1,x=s.height/o.height):s.patternUnits="userSpaceOnUse",null==b||isNaN(b)||(s.width=b),null==x||isNaN(x)||(s.height=x);var w=xp(r);w&&(s.patternTransform=w);var S=jz("pattern","",s,[i]),C=Hz(S),_=a.patternCache,T=_[C];T||(T=a.zrId+"-p"+a.patternIdx++,_[C]=T,s.id=T,S=a.defs[T]=jz("pattern",T,s,[i])),t[n]=vp(T)}}function wU(e,t,n){var a=n.clipPathCache,i=n.defs,r=a[e.id];if(!r){var o={id:r=n.zrId+"-c"+n.clipPathIdx++};a[e.id]=r,i[r]=jz("clipPath",r,o,[yU(e,n)])}t["clip-path"]=vp(r)}function SU(e){return document.createTextNode(e)}function CU(e,t,n){e.insertBefore(t,n)}function _U(e,t){e.removeChild(t)}function TU(e,t){e.appendChild(t)}function IU(e){return e.parentNode}function EU(e){return e.nextSibling}function MU(e,t){e.textContent=t}var kU=jz("","");function PU(e){return void 0===e}function DU(e){return void 0!==e}function OU(e,t,n){for(var a={},i=t;i<=n;++i){var r=e[i].key;void 0!==r&&(a[r]=i)}return a}function AU(e,t){var n=e.key===t.key;return e.tag===t.tag&&n}function FU(e){var t,n=e.children,a=e.tag;if(DU(a)){var i=e.elm=Uz(a);if(NU(kU,e),Zr(n))for(t=0;t<n.length;++t){var r=n[t];null!=r&&TU(i,FU(r))}else DU(e.text)&&!no(e.text)&&TU(i,SU(e.text))}else e.elm=SU(e.text);return e.elm}function RU(e,t,n,a,i){for(;a<=i;++a){var r=n[a];null!=r&&CU(e,FU(r),t)}}function BU(e,t,n,a){for(;n<=a;++n){var i=t[n];if(null!=i)if(DU(i.tag))_U(IU(i.elm),i.elm);else _U(e,i.elm)}}function NU(e,t){var n,a=t.elm,i=e&&e.attrs||{},r=t.attrs||{};if(i!==r){for(n in r){var o=r[n];i[n]!==o&&(!0===o?a.setAttribute(n,""):!1===o?a.removeAttribute(n):"style"===n?a.style.cssText=o:120!==n.charCodeAt(0)?a.setAttribute(n,o):"xmlns:xlink"===n||"xmlns"===n?a.setAttributeNS("http://www.w3.org/2000/xmlns/",n,o):58===n.charCodeAt(3)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,o):58===n.charCodeAt(5)?a.setAttributeNS(Gz,n,o):a.setAttribute(n,o))}for(n in i)n in r||a.removeAttribute(n)}}function LU(e,t){var n=t.elm=e.elm,a=e.children,i=t.children;e!==t&&(NU(e,t),PU(t.text)?DU(a)&&DU(i)?a!==i&&function(e,t,n){for(var a,i,r,o=0,s=0,l=t.length-1,p=t[0],c=t[l],d=n.length-1,u=n[0],m=n[d];o<=l&&s<=d;)null==p?p=t[++o]:null==c?c=t[--l]:null==u?u=n[++s]:null==m?m=n[--d]:AU(p,u)?(LU(p,u),p=t[++o],u=n[++s]):AU(c,m)?(LU(c,m),c=t[--l],m=n[--d]):AU(p,m)?(LU(p,m),CU(e,p.elm,EU(c.elm)),p=t[++o],m=n[--d]):AU(c,u)?(LU(c,u),CU(e,c.elm,p.elm),c=t[--l],u=n[++s]):(PU(a)&&(a=OU(t,o,l)),PU(i=a[u.key])||(r=t[i]).tag!==u.tag?CU(e,FU(u),p.elm):(LU(r,u),t[i]=void 0,CU(e,r.elm,p.elm)),u=n[++s]);(o<=l||s<=d)&&(o>l?RU(e,null==n[d+1]?null:n[d+1].elm,n,s,d):BU(e,t,o,l))}(n,a,i):DU(i)?(DU(e.text)&&MU(n,""),RU(n,null,i,0,i.length-1)):DU(a)?BU(n,a,0,a.length-1):DU(e.text)&&MU(n,""):e.text!==t.text&&(DU(a)&&BU(n,a,0,a.length-1),MU(n,t.text)))}var VU=0,qU=function(){function e(e,t,n){if(this.type="svg",this.refreshHover=GU("refreshHover"),this.configLayer=GU("configLayer"),this.storage=t,this._opts=n=Nr({},n),this.root=e,this._id="zr"+VU++,this._oldVNode=$z(n.width,n.height),e&&!n.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Uz("svg");NU(null,this._oldVNode),a.appendChild(i),e.appendChild(a)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",function(e,t){if(AU(e,t))LU(e,t);else{var n=e.elm,a=IU(n);FU(t),null!==a&&(CU(a,t.elm,EU(n)),BU(a,[e],0,0))}}(this._oldVNode,e),this._oldVNode=e}},e.prototype.renderOneToVNode=function(e){return vU(e,Wz(this._id))},e.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),n=this._width,a=this._height,i=Wz(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis;var r=[],o=this._bgVNode=function(e,t,n,a){var i;if(n&&"none"!==n)if(i=jz("rect","bg",{width:e,height:t,x:"0",y:"0"}),yp(n))bU({fill:n},i.attrs,"fill",a);else if(hp(n))xU({style:{fill:n},dirty:ko,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",a);else{var r=sp(n),o=r.color,s=r.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}(n,a,this._backgroundColor,i);o&&r.push(o);var s=e.compress?null:this._mainVNode=jz("g","main",{},[]);this._paintList(t,i,s?s.children:r),s&&r.push(s);var l=jr(Kr(i.defs),(function(e){return i.defs[e]}));if(l.length&&r.push(jz("defs","defs",{},l)),e.animation){var p=function(e,t,n){var a=(n=n||{}).newline?"\n":"",i=" {"+a,r=a+"}",o=jr(Kr(e),(function(t){return t+i+jr(Kr(e[t]),(function(n){return n+":"+e[t][n]+";"})).join(a)+r})).join(a),s=jr(Kr(t),(function(e){return"@keyframes "+e+i+jr(Kr(t[e]),(function(n){return n+i+jr(Kr(t[e][n]),(function(a){var i=t[e][n][a];return"d"===a&&(i='path("'+i+'")'),a+":"+i+";"})).join(a)+r})).join(a)+r})).join(a);return o||s?["<![CDATA[",o,s,"]]>"].join(a):""}(i.cssNodes,i.cssAnims,{newline:!0});if(p){var c=jz("style","stl",{},[],p);r.push(c)}}return $z(n,a,r,e.useViewBox)},e.prototype.renderToString=function(e){return e=e||{},Hz(this.renderToVNode({animation:uo(e.cssAnimation,!0),emphasis:uo(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:uo(e.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(e,t,n){for(var a,i,r=e.length,o=[],s=0,l=0,p=0;p<r;p++){var c=e[p];if(!c.invisible){var d=c.__clipPaths,u=d&&d.length||0,m=i&&i.length||0,h=void 0;for(h=Math.max(u-1,m-1);h>=0&&(!d||!i||d[h]!==i[h]);h--);for(var g=m-1;g>h;g--)a=o[--s-1];for(var f=h+1;f<u;f++){var y={};wU(d[f],y,t);var v=jz("g","clip-g-"+l++,y,[]);(a?a.children:n).push(v),o[s++]=v,a=v}i=d;var b=vU(c,t);b&&(a?a.children:n).push(b)}}},e.prototype.resize=function(e,t){var n=this._opts,a=this.root,i=this._viewport;if(null!=e&&(n.width=e),null!=t&&(n.height=t),a&&i&&(i.style.display="none",e=jS(a,0,n),t=jS(a,1,n),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var r=i.style;r.width=e+"px",r.height=t+"px"}if(hp(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",t));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",e),s.setAttribute("height",t))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(e){var t=this.renderToString(),n="data:image/svg+xml;";return e?(t=wp(t))&&n+"base64,"+t:n+"charset=UTF-8,"+encodeURIComponent(t)},e}();function GU(e){return function(){0}}function zU(e){e.registerPainter("svg",qU)}function UU(e,t,n){var a=br.createCanvas(),i=t.getWidth(),r=t.getHeight(),o=a.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=r+"px",a.setAttribute("data-zr-dom-id",e)),a.width=i*n,a.height=r*n,a}var jU=function(e){function t(t,n,a){var i,r=e.call(this)||this;r.motionBlur=!1,r.lastFrameAlpha=.7,r.dpr=1,r.virtual=!1,r.config={},r.incremental=!1,r.zlevel=0,r.maxRepaintRectCount=5,r.__dirty=!0,r.__firstTimePaint=!0,r.__used=!1,r.__drawIndex=0,r.__startIndex=0,r.__endIndex=0,r.__prevStartIndex=null,r.__prevEndIndex=null,a=a||ic,"string"==typeof t?i=UU(t,n,a):no(t)&&(t=(i=t).id),r.id=t,r.dom=i;var o=i.style;return o&&(Eo(i),i.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),r.painter=n,r.dpr=a,r}return ze(t,e),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=UU("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,t,n,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var i,r=[],o=this.maxRepaintRectCount,s=!1,l=new Ls(0,0,0,0);function p(e){if(e.isFinite()&&!e.isZero())if(0===r.length){(t=new Ls(0,0,0,0)).copy(e),r.push(t)}else{for(var t,n=!1,a=1/0,i=0,p=0;p<r.length;++p){var c=r[p];if(c.intersect(e)){var d=new Ls(0,0,0,0);d.copy(c),d.union(e),r[p]=d,n=!0;break}if(s){l.copy(e),l.union(c);var u=e.width*e.height,m=c.width*c.height,h=l.width*l.height-u-m;h<a&&(a=h,i=p)}}if(s&&(r[i].union(e),n=!0),!n)(t=new Ls(0,0,0,0)).copy(e),r.push(t);s||(s=r.length>=o)}}for(var c=this.__startIndex;c<this.__endIndex;++c){if(m=e[c]){var d=m.shouldBePainted(n,a,!0,!0);(h=m.__isRendered&&(1&m.__dirty||!d)?m.getPrevPaintRect():null)&&p(h);var u=d&&(1&m.__dirty||!m.__isRendered)?m.getPaintRect():null;u&&p(u)}}for(c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var m,h;d=(m=t[c])&&m.shouldBePainted(n,a,!0,!0);if(m&&(!d||!m.__zr)&&m.__isRendered)(h=m.getPrevPaintRect())&&p(h)}do{i=!1;for(c=0;c<r.length;)if(r[c].isZero())r.splice(c,1);else{for(var g=c+1;g<r.length;)r[c].intersect(r[g])?(i=!0,r[c].union(r[g]),r.splice(g,1)):g++;c++}}while(i);return this._paintRects=r,r},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,t){var n=this.dpr,a=this.dom,i=a.style,r=this.domBack;i&&(i.width=e+"px",i.height=t+"px"),a.width=e*n,a.height=t*n,r&&(r.width=e*n,r.height=t*n,1!==n&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,t,n){var a=this.dom,i=this.ctx,r=a.width,o=a.height;t=t||this.clearColor;var s=this.motionBlur&&!e,l=this.lastFrameAlpha,p=this.dpr,c=this;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,r/p,o/p));var d=this.domBack;function u(e,n,a,r){if(i.clearRect(e,n,a,r),t&&"transparent"!==t){var o=void 0;if(oo(t))o=(t.global||t.__width===a&&t.__height===r)&&t.__canvasGradient||zS(i,t,{x:0,y:0,width:a,height:r}),t.__canvasGradient=o,t.__width=a,t.__height=r;else so(t)&&(t.scaleX=t.scaleX||p,t.scaleY=t.scaleY||p,o=QS(i,t,{dirty:function(){c.setUnpainted(),c.painter.refresh()}}));i.save(),i.fillStyle=o||t,i.fillRect(e,n,a,r),i.restore()}s&&(i.save(),i.globalAlpha=l,i.drawImage(d,e,n,a,r),i.restore())}!n||s?u(0,0,r,o):n.length&&Ur(n,(function(e){u(e.x*p,e.y*p,e.width*p,e.height*p)}))},t}(Zo),HU=1e5,WU=314159,$U=.01;var KU=function(){function e(e,t,n,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=Nr({},n||{}),this.dpr=n.devicePixelRatio||ic,this._singleCanvas=i,this.root=e,e.style&&(Eo(e),e.innerHTML=""),this.storage=t;var r=this._zlevelList;this._prevDisplayList=[];var o=this._layers;if(i){var s=e,l=s.width,p=s.height;null!=n.width&&(l=n.width),null!=n.height&&(p=n.height),this.dpr=n.devicePixelRatio||1,s.width=l*this.dpr,s.height=p*this.dpr,this._width=l,this._height=p;var c=new jU(s,this,this.dpr);c.__builtin__=!0,c.initContext(),o[314159]=c,c.zlevel=WU,r.push(WU),this._domRoot=e}else{this._width=jS(e,0,n),this._height=jS(e,1,n);var d=this._domRoot=function(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);e.appendChild(d)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),n=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,n,e,this._redrawId);for(var i=0;i<a.length;i++){var r=a[i],o=this._layers[r];if(!o.__builtin__&&o.refresh){var s=0===i?this._backgroundColor:null;o.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(e){var t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){for(var a,i={inHover:!0,viewWidth:this._width,viewHeight:this._height},r=0;r<t;r++){var o=e[r];o.__inHover&&(n||(n=this._hoverlayer=this.getLayer(HU)),a||(a=n.ctx).save(),sC(a,o,i,r===t-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(HU)},e.prototype.paintOne=function(e,t){oC(e,t)},e.prototype._paintList=function(e,t,n,a){if(this._redrawId===a){n=n||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,n),r=i.finished,o=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),r)this.eachLayer((function(e){e.afterBrush&&e.afterBrush()}));else{var s=this;rl((function(){s._paintList(e,t,n,a)}))}}},e.prototype._compositeManually=function(){var e=this.getLayer(WU).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer((function(a){a.virtual&&e.drawImage(a.dom,0,0,t,n)}))},e.prototype._doPaintList=function(e,t,n){for(var a=this,i=[],r=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var s=this._zlevelList[o],l=this._layers[s];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||n)&&i.push(l)}for(var p=!0,c=!1,d=function(o){var s,l=i[o],d=l.ctx,m=r&&l.createRepaintRects(e,t,u._width,u._height),h=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,f=g&&Date.now(),y=l.zlevel===u._zlevelList[0]?u._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,y,m);else if(h===l.__startIndex){var v=e[h];v.incremental&&v.notClear&&!n||l.clear(!1,y,m)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=l.__startIndex);var b=function(t){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(s=h;s<l.__endIndex;s++){var i=e[s];if(i.__inHover&&(c=!0),a._doPaintEl(i,l,r,t,n,s===l.__endIndex-1),g)if(Date.now()-f>15)break}n.prevElClipPaths&&d.restore()};if(m)if(0===m.length)s=l.__endIndex;else for(var x=u.dpr,w=0;w<m.length;++w){var S=m[w];d.save(),d.beginPath(),d.rect(S.x*x,S.y*x,S.width*x,S.height*x),d.clip(),b(S),d.restore()}else d.save(),b(),d.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(p=!1)},u=this,m=0;m<i.length;m++)d(m);return mr.wxa&&Ur(this._layers,(function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()})),{finished:p,needsRefreshHover:c}},e.prototype._doPaintEl=function(e,t,n,a,i,r){var o=t.ctx;if(n){var s=e.getPaintRect();(!a||s&&s.intersect(a))&&(sC(o,e,i,r),e.setPrevPaintRect(s))}else sC(o,e,i,r)},e.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=WU);var n=this._layers[e];return n||((n=new jU("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?Rr(n,this._layerConfig[e],!0):this._layerConfig[e-$U]&&Rr(n,this._layerConfig[e-$U],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},e.prototype.insertLayer=function(e,t){var n=this._layers,a=this._zlevelList,i=a.length,r=this._domRoot,o=null,s=-1;if(!n[e]&&function(e){return!!e&&(!!e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)}(t)){if(i>0&&e>a[0]){for(s=0;s<i-1&&!(a[s]<e&&a[s+1]>e);s++);o=n[a[s]]}if(a.splice(s+1,0,e),n[e]=t,!t.virtual)if(o){var l=o.dom;l.nextSibling?r.insertBefore(t.dom,l.nextSibling):r.appendChild(t.dom)}else r.firstChild?r.insertBefore(t.dom,r.firstChild):r.appendChild(t.dom);t.painter||(t.painter=this)}},e.prototype.eachLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a];e.call(t,this._layers[i],i)}},e.prototype.eachBuiltinLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a],r=this._layers[i];r.__builtin__&&e.call(t,r,i)}},e.prototype.eachOtherLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a],r=this._layers[i];r.__builtin__||e.call(t,r,i)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(e){function t(e){r&&(r.__endIndex!==e&&(r.__dirty=!0),r.__endIndex=e)}if(this.eachBuiltinLayer((function(e,t){e.__dirty=e.__used=!1})),this._singleCanvas)for(var n=1;n<e.length;n++){if((s=e[n]).zlevel!==e[n-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var a,i,r=null,o=0;for(i=0;i<e.length;i++){var s,l=(s=e[i]).zlevel,p=void 0;a!==l&&(a=l,o=0),s.incremental?((p=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,o=1):p=this.getLayer(l+(o>0?$U:0),this._needsManuallyCompositing),p.__builtin__||Ar("ZLevel "+l+" has been used by unkown layer "+p.id),p!==r&&(p.__used=!0,p.__startIndex!==i&&(p.__dirty=!0),p.__startIndex=i,p.incremental?p.__drawIndex=-1:p.__drawIndex=i,t(i),r=p),1&s.__dirty&&!s.__inHover&&(p.__dirty=!0,p.incremental&&p.__drawIndex<0&&(p.__drawIndex=i))}t(i),this.eachBuiltinLayer((function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)}))},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(e){e.clear()},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Ur(this._layers,(function(e){e.setUnpainted()}))},e.prototype.configLayer=function(e,t){if(t){var n=this._layerConfig;n[e]?Rr(n[e],t,!0):n[e]=t;for(var a=0;a<this._zlevelList.length;a++){var i=this._zlevelList[a];if(i===e||i===e+$U)Rr(this._layers[i],n[e],!0)}}},e.prototype.delLayer=function(e){var t=this._layers,n=this._zlevelList,a=t[e];a&&(a.dom.parentNode.removeChild(a.dom),delete t[e],n.splice(Vr(n,e),1))},e.prototype.resize=function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var a=this._opts,i=this.root;if(null!=e&&(a.width=e),null!=t&&(a.height=t),e=jS(i,0,a),t=jS(i,1,a),n.style.display="",this._width!==e||t!==this._height){for(var r in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(WU).resize(e,t)}return this},e.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new jU("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var n=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var a=t.dom.width,i=t.dom.height;this.eachLayer((function(e){e.__builtin__?n.drawImage(e.dom,0,0,a,i):e.renderToCanvas&&(n.save(),e.renderToCanvas(n),n.restore())}))}else for(var r={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),s=0,l=o.length;s<l;s++){var p=o[s];sC(n,p,r,s===l-1)}return t.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function YU(e){e.registerPainter("canvas",KU)}const XU=["echartContainer"],ZU=e=>({legendKey:e,left:!0}),QU=e=>({background:e});function JU(e,n){1&e&&t.ɵɵelementContainer(0)}function ej(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,JU,1,0,"ng-container",8),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",e.widgetTitlePanel)}}function tj(e,n){1&e&&(t.ɵɵelementStart(0,"th",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"legend.Min")))}function nj(e,n){1&e&&(t.ɵɵelementStart(0,"th",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"legend.Max")))}function aj(e,n){1&e&&(t.ɵɵelementStart(0,"th",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"legend.Avg")))}function ij(e,n){1&e&&(t.ɵɵelementStart(0,"th",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"legend.Total")))}function rj(e,n){1&e&&(t.ɵɵelementStart(0,"th",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"legend.Latest")))}function oj(e,n){1&e&&t.ɵɵelementContainer(0)}function sj(e,n){if(1&e&&(t.ɵɵelement(0,"td",16),t.ɵɵpipe(1,"safe")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(1,1,n.legendData.data[e.dataIndex].min,"html"),t.ɵɵsanitizeHtml)}}function lj(e,n){if(1&e&&(t.ɵɵelement(0,"td",16),t.ɵɵpipe(1,"safe")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(1,1,n.legendData.data[e.dataIndex].max,"html"),t.ɵɵsanitizeHtml)}}function pj(e,n){if(1&e&&(t.ɵɵelement(0,"td",16),t.ɵɵpipe(1,"safe")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(1,1,n.legendData.data[e.dataIndex].avg,"html"),t.ɵɵsanitizeHtml)}}function cj(e,n){if(1&e&&(t.ɵɵelement(0,"td",16),t.ɵɵpipe(1,"safe")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(1,1,n.legendData.data[e.dataIndex].total,"html"),t.ɵɵsanitizeHtml)}}function dj(e,n){if(1&e&&(t.ɵɵelement(0,"td",16),t.ɵɵpipe(1,"safe")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(1,1,n.legendData.data[e.dataIndex].latest,"html"),t.ɵɵsanitizeHtml)}}function uj(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr")(1,"th"),t.ɵɵtemplate(2,oj,1,0,"ng-container",14),t.ɵɵelementEnd(),t.ɵɵtemplate(3,sj,2,4,"td",15)(4,lj,2,4,"td",15)(5,pj,2,4,"td",15)(6,cj,2,4,"td",15)(7,dj,2,4,"td",15),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2),i=t.ɵɵreference(8);t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",t.ɵɵpureFunction1(7,ZU,e)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===a.legendConfig.showMin),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===a.legendConfig.showMax),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===a.legendConfig.showAvg),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===a.legendConfig.showTotal),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===a.legendConfig.showLatest)}}function mj(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"table",10)(2,"thead")(3,"tr"),t.ɵɵelement(4,"th"),t.ɵɵtemplate(5,tj,3,3,"th",11)(6,nj,3,3,"th",11)(7,aj,3,3,"th",11)(8,ij,3,3,"th",11)(9,rj,3,3,"th",11),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"tbody"),t.ɵɵtemplate(11,uj,8,9,"tr",12),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵproperty("ngIf",!0===e.legendConfig.showMin),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===e.legendConfig.showMax),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===e.legendConfig.showAvg),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===e.legendConfig.showTotal),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!0===e.legendConfig.showLatest),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",e.legendKeys)}}function hj(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",18),t.ɵɵelement(2,"div",19)(3,"div",20),t.ɵɵpipe(4,"safe"),t.ɵɵelementEnd()()),2&e){const e=n.legendKey,a=n.left;t.ɵɵclassProp("left",a),t.ɵɵadvance(2),t.ɵɵstyleMap(t.ɵɵpureFunction1(8,QU,e.dataKey.color)),t.ɵɵadvance(),t.ɵɵproperty("innerHTML",t.ɵɵpipeBind2(4,5,e.dataKey.label,"html"),t.ɵɵsanitizeHtml)}}class gj{constructor(e,t,n){this.renderer=e,this.sanitizer=t,this.widgetComponent=n,this.updateXAxisTimeWindow=(e,t)=>{e.min=t.minTime,e.max=t.maxTime}}ngOnInit(){this.initEchart(),this.initLegend()}ngAfterViewInit(){this.myChart=function(e,t,n){var a=!(n&&n.ssr);if(a){var i=c_(e);if(i)return i}var r=new YC(e,t,n);return r.id="ec_"+l_++,o_[r.id]=r,a&&Ld(e,p_,r.id),jC(r),gC.trigger("afterinit",r),r}(this.echartContainer.nativeElement,null,{renderer:"svg"}),this.initResize(),this.xAxis=this.setupXAxis(),this.yAxis=this.setupYAxis(),this.option={...this.setupAnimationSettings(),formatter:e=>this.setupTooltipElement(e),backgroundColor:"transparent",darkMode:!1,tooltip:{show:!0,trigger:"axis",confine:!0,padding:[8,12],appendTo:"body",textStyle:{fontFamily:"Roboto",fontSize:12,fontWeight:"normal",lineHeight:16}},grid:[{backgroundColor:null,borderColor:"#ccc",borderWidth:1,bottom:45,left:5,right:5,show:!1,top:10}],xAxis:[this.xAxis],yAxis:[this.yAxis],series:this.setupChartLines(),dataZoom:[{type:"inside",disabled:!1,realtime:!0,filterMode:"none"},{type:"slider",show:!0,showDetail:!1,realtime:!0,filterMode:"none",bottom:5}]},this.myChart.setOption(this.option),this.updateAxisOffset(!1)}onDataUpdated(){const e=[];this.onResize(),this.updateXAxisTimeWindow(this.xAxis,this.ctx.defaultSubscription.timeWindow);for(const t in this.ctx.data){e[t]=[];for(const[n,a]of this.ctx.data[t].data)e[t].push({name:n,value:[n,a]})}const t=[];for(const n of e)t.push({data:n});this.option.series=t,this.myChart.setOption(this.option),this.updateAxisOffset()}updateAxisOffset(e=!0){const t=Ze(this.myChart,this.yAxis.mainType,this.yAxis.id),n=Qe(this.myChart,this.yAxis.mainType,this.yAxis.id,this.yAxis.name),a=Ze(this.myChart,this.xAxis.mainType,this.xAxis.id),i=t+n,r=a+Qe(this.myChart,this.yAxis.mainType,this.yAxis.id,this.yAxis.name)+35;this.option.grid[0].left===i&&this.option.grid[0].bottom===r||(this.option.grid[0].left=i,this.yAxis.nameGap=t,this.option.grid[0].bottom=r,this.xAxis.nameGap=a,this.myChart.setOption(this.option,{replaceMerge:["yAxis","xAxis","grid"],lazyUpdate:e}))}initEchart(){uI([iq,NN,vz,OG,Hq,gL,pP,sM,AM,ZM,cP,QB,SE,YU,zU])}initLegend(){this.showLegend=this.ctx.settings.showLegend,this.showLegend&&(this.legendConfig=this.ctx.settings.legendConfig,this.legendData=this.ctx.defaultSubscription.legendData,this.legendKeys=this.legendData.keys,this.legendClass=`legend-${this.legendConfig.position}`,this.legendConfig.sortDataKeys?this.legendKeys=this.legendData.keys.sort(((e,t)=>e.dataKey.label.localeCompare(t.dataKey.label))):this.legendKeys=this.legendData.keys)}initResize(){this.shapeResize$=new ResizeObserver((()=>{this.onResize()})),this.shapeResize$.observe(this.echartContainer.nativeElement)}onResize(){this.myChart.resize()}setupTooltipElement(e){const t=this.renderer.createElement("div");if(this.renderer.setStyle(t,"display","flex"),this.renderer.setStyle(t,"flex-direction","column"),this.renderer.setStyle(t,"align-items","flex-start"),this.renderer.setStyle(t,"gap","16px"),e.length){const n=this.renderer.createElement("div");this.renderer.setStyle(n,"display","flex"),this.renderer.setStyle(n,"flex-direction","column"),this.renderer.setStyle(n,"align-items","flex-start"),this.renderer.setStyle(n,"gap","4px"),this.renderer.appendChild(n,this.setTooltipDate(e));for(const[t,a]of e.entries())this.renderer.appendChild(n,this.constructTooltipSeriesElement(a,t));this.renderer.appendChild(t,n)}return t}constructTooltipSeriesElement(e,t){const n=this.renderer.createElement("div");this.renderer.setStyle(n,"display","flex"),this.renderer.setStyle(n,"flex-direction","row"),this.renderer.setStyle(n,"align-items","center"),this.renderer.setStyle(n,"align-self","stretch"),this.renderer.setStyle(n,"gap","12px");const a=this.renderer.createElement("div");this.renderer.setStyle(a,"display","flex"),this.renderer.setStyle(a,"align-items","center"),this.renderer.setStyle(a,"gap","8px"),this.renderer.appendChild(n,a);const i=this.renderer.createElement("div");this.renderer.setStyle(i,"width","8px"),this.renderer.setStyle(i,"height","8px"),this.renderer.setStyle(i,"border-radius","50%"),this.renderer.setStyle(i,"background",e.color),this.renderer.appendChild(a,i);const r=this.renderer.createElement("div");this.renderer.setProperty(r,"innerHTML",this.sanitizer.sanitize(g.HTML,e.seriesName)),this.renderer.setStyle(r,"font-family","Roboto"),this.renderer.setStyle(r,"font-size","12px"),this.renderer.setStyle(r,"font-style","normal"),this.renderer.setStyle(r,"font-weight",400),this.renderer.setStyle(r,"line-height","16px"),this.renderer.setStyle(r,"color","rgba(0, 0, 0, 0.76)"),this.renderer.appendChild(a,r);const o=ke(this.ctx.data[t].dataKey.decimals)?this.ctx.data[t].dataKey.decimals:this.ctx.decimals,s=ke(this.ctx.data[t].dataKey.units)?this.ctx.data[t].dataKey.units:this.ctx.units,l=Pe(e.value[1],o,s,!1),p=this.renderer.createElement("div");return this.renderer.setProperty(p,"innerHTML",this.sanitizer.sanitize(g.HTML,l)),this.renderer.setStyle(p,"flex","1"),this.renderer.setStyle(p,"text-align","end"),this.renderer.setStyle(p,"font-family","Roboto"),this.renderer.setStyle(p,"font-size","12px"),this.renderer.setStyle(p,"font-style","normal"),this.renderer.setStyle(p,"font-weight",500),this.renderer.setStyle(p,"line-height","16px"),this.renderer.setStyle(p,"color","rgba(0, 0, 0, 0.76)"),this.renderer.appendChild(n,p),n}setTooltipDate(e){const t=this.renderer.createElement("div");return this.renderer.appendChild(t,this.renderer.createText(new Date(e[0].value[0]).toLocaleString("en-GB"))),this.renderer.setStyle(t,"font-family","Roboto"),this.renderer.setStyle(t,"font-size","11px"),this.renderer.setStyle(t,"font-style","normal"),this.renderer.setStyle(t,"font-weight","400"),this.renderer.setStyle(t,"line-height","16px"),this.renderer.setStyle(t,"color","rgba(0, 0, 0, 0.76)"),t}setupAnimationSettings(){return{animation:!0,animationDelay:0,animationDelayUpdate:0,animationDuration:500,animationDurationUpdate:300,animationEasing:"cubicOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3}}setupChartLines(){const e=[];for(const[t,n]of this.ctx.datasources[0].dataKeys.entries())e.push({id:t,name:n.label,type:"line",showSymbol:!1,smooth:!1,step:!1,stackStrategy:"all",data:[],lineStyle:{color:n.color},itemStyle:{color:n.color}});return e}setupYAxis(){return{type:"value",position:"left",mainType:"yAxis",id:"yAxis",offset:0,nameLocation:"middle",nameRotate:90,alignTicks:!0,scale:!0,show:!0,axisLabel:{color:"rgba(0, 0, 0, 0.54)",fontFamily:"Roboto",fontSize:12,fontStyle:"normal",fontWeight:400,show:!0,formatter:e=>Pe(e,this.ctx.decimals,this.ctx.units,!1)},splitLine:{show:!0},axisLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.54)"}},axisTick:{lineStyle:{color:"rgba(0, 0, 0, 0.54)"},show:!0},nameTextStyle:{color:"rgba(0, 0, 0, 0.54)",fontFamily:"Roboto",fontSize:12,fontStyle:"normal",fontWeight:600}}}setupXAxis(){return{id:"xAxis",mainType:"xAxis",show:!0,type:"time",position:"bottom",offset:0,nameLocation:"middle",max:this.ctx.defaultSubscription.timeWindow.maxTime,min:this.ctx.defaultSubscription.timeWindow.minTime,nameTextStyle:{color:"rgba(0, 0, 0, 0.54)",fontStyle:"normal",fontWeight:600,fontFamily:"Roboto",fontSize:12},axisPointer:{shadowStyle:{color:"rgba(210,219,238,0.2)"}},splitLine:{show:!0},axisTick:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.54)"}},axisLine:{onZero:!1,show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.54)"}},axisLabel:{color:"rgba(0, 0, 0, 0.54)",fontFamily:"Roboto",fontSize:10,fontStyle:"normal",fontWeight:400,show:!0,hideOverlap:!0}}}static{this.ɵfac=function(e){return new(e||gj)(t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(Je.DomSanitizer),t.ɵɵdirectiveInject(et.WidgetComponent))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:gj,selectors:[["tb-gateway-statistics-chart"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(XU,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.echartContainer=e.first)}},inputs:{ctx:"ctx",widgetTitlePanel:"widgetTitlePanel"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:9,vars:4,consts:[["echartContainer",""],["legendItem",""],[1,"tb-time-series-chart-panel"],[1,"tb-time-series-chart-overlay"],[4,"ngIf"],[1,"tb-time-series-chart-content"],[1,"tb-time-series-chart-shape"],["class","tb-time-series-chart-legend",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"tb-time-series-chart-legend"],[1,"tb-time-series-chart-legend-table","vertical"],["class","tb-time-series-chart-legend-type-label right legend legend-row-color",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tb-time-series-chart-legend-type-label","right","legend","legend-row-color"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","tb-time-series-chart-legend-value legend",3,"innerHTML",4,"ngIf"],[1,"tb-time-series-chart-legend-value","legend",3,"innerHTML"],[1,"tb-time-series-chart-legend-item"],[1,"tb-time-series-chart-legend-item-label"],[1,"tb-time-series-chart-legend-item-label-circle"],[1,"legend","legend-label-color",3,"innerHTML"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",2),t.ɵɵelement(1,"div",3),t.ɵɵtemplate(2,ej,2,1,"ng-container",4),t.ɵɵelementStart(3,"div",5),t.ɵɵelement(4,"div",6,0),t.ɵɵtemplate(6,mj,12,6,"div",7)(7,hj,5,10,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.widgetComponent.dashboardWidget.showWidgetTitlePanel),t.ɵɵadvance(),t.ɵɵclassMap(n.legendClass),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.showLegend))},dependencies:t.ɵɵgetComponentDepsFactory(gj,[j,_]),styles:['@charset "UTF-8";.tb-time-series-chart-panel[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;gap:8px;padding:12px}.tb-time-series-chart-panel[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.tb-time-series-chart-overlay){z-index:1}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-overlay[_ngcontent-%COMP%]{position:absolute;inset:12px}.tb-time-series-chart-panel[_ngcontent-%COMP%]   div.tb-widget-title[_ngcontent-%COMP%]{padding:0}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]{flex:1;min-width:0;min-height:0;display:flex;flex-direction:column;gap:8px}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-top[_ngcontent-%COMP%]{flex-direction:column-reverse}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-right[_ngcontent-%COMP%]{flex-direction:row}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-left[_ngcontent-%COMP%]{flex-direction:row-reverse}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-shape[_ngcontent-%COMP%]{flex:1;min-width:0;min-height:0;display:flex;align-items:center;justify-content:center}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-right[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-left[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]{display:inline-grid;grid-auto-flow:column;grid-template-rows:repeat(auto-fit,minmax(16px,min-content));max-width:calc(25% - 8px);height:fit-content;max-height:100%}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-top[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-bottom[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]{align-self:center}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-top[_ngcontent-%COMP%]   .tb-time-series-chart-legend.tb-simple-legend[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-bottom[_ngcontent-%COMP%]   .tb-time-series-chart-legend.tb-simple-legend[_ngcontent-%COMP%]{justify-content:center}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-top[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]:not(.tb-simple-legend), .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content.legend-bottom[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]:not(.tb-simple-legend){width:100%}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch;column-gap:16px;row-gap:8px;flex-wrap:wrap;overflow:auto;width:fit-content;max-width:100%;max-height:calc(35% - 8px)}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]{border-spacing:0;table-layout:fixed}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table.vertical[_ngcontent-%COMP%]{width:100%;table-layout:auto}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table.vertical[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:95%}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:last-child), .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:last-child){padding-right:16px}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   th[_ngcontent-%COMP%], .tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{padding-bottom:8px}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item[_ngcontent-%COMP%]{align-items:flex-end}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-table[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item.left[_ngcontent-%COMP%]{align-items:flex-start}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;-webkit-user-select:none;user-select:none}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#ccc;white-space:nowrap;cursor:pointer}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item-label[_ngcontent-%COMP%]   .tb-time-series-chart-legend-item-label-circle[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#ccc}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-type-label[_ngcontent-%COMP%]{white-space:nowrap;text-align:left}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-type-label.right[_ngcontent-%COMP%]{text-align:right}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .tb-time-series-chart-content[_ngcontent-%COMP%]   .tb-time-series-chart-legend[_ngcontent-%COMP%]   .tb-time-series-chart-legend-value[_ngcontent-%COMP%]{white-space:nowrap;text-align:right}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{font-size:12px;font-style:normal;font-weight:500;letter-spacing:normal;line-height:16px}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .legend.legend-row-color[_ngcontent-%COMP%]{color:#00000061}.tb-time-series-chart-panel[_ngcontent-%COMP%]   .legend.legend-label-color[_ngcontent-%COMP%]{color:#000}']})}}const fj=["statisticChart"];function yj(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",12),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.openEditCommandDialog())})),t.ɵɵelementStart(2,"mat-icon",13),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",12),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.onDeleteClick())})),t.ɵɵelementStart(6,"mat-icon",13),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function vj(e,n){if(1&e&&t.ɵɵelement(0,"tb-gateway-statistics-chart",14,0),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("ctx",e.ctx)}}function bj(e,n){if(1&e&&t.ɵɵelement(0,"tb-custom-statistics-table",15),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("data",e.subscriptionData)}}function xj(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10),t.ɵɵtemplate(1,vj,2,1,"tb-gateway-statistics-chart",14)(2,bj,1,1,"tb-custom-statistics-table",15),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵconditional(e.isNumericData?1:2)}}function wj(e,n){1&e&&(t.ɵɵelementStart(0,"div",11),t.ɵɵelement(1,"div",16),t.ɵɵelementStart(2,"div",17),t.ɵɵtext(3,"attribute.no-telemetry-text"),t.ɵɵelementEnd()())}class Sj{constructor(e,t,n,a,i,r){this.fb=e,this.attributeService=t,this.destroyRef=n,this.dialog=a,this.dialogService=i,this.utils=r,this.subscriptionData=[],this.statisticForm=this.fb.group({command:[]}),this.isNumericData=!1,this.commands=[],this.subscribed=!1,this.dataTypeDefined=!1,this.subscriptionOptions={callbacks:{onDataUpdated:()=>this.ctx.ngZone.run((()=>{this.isDataOnlyNumbers(),this.isNumericData&&this.statisticChart?.onDataUpdated()})),onDataUpdateError:(e,t)=>this.ctx.ngZone.run((()=>{this.onDataUpdateError(t)}))},useDashboardTimewindow:!1,legendConfig:F(R.timeseries)},this.statisticForm.get("command").valueChanges.pipe(xn()).subscribe((e=>{this.subscribed=!1,this.subscriptionInfo&&e?.attributeOnGateway&&this.createSubscription(this.ctx.defaultSubscription.datasources[0].entity,e.attributeOnGateway)}))}ngAfterViewInit(){if(this.ctx.defaultSubscription.datasources.length){const e=this.ctx.defaultSubscription.datasources[0].entity;if(e.id.id===B)return;this.getGatewayGeneralConfig().pipe(xn(this.destroyRef)).subscribe((t=>{this.commands=t?.statistics.commands.reverse()??[],this.commands.length&&(this.statisticForm.get("command").setValue(this.commands[0]),this.createSubscription(e,this.commands[0].attributeOnGateway))}))}}openEditCommandDialog(){const e=this.statisticForm.get("command").value,t="string"==typeof e||!e,n="string"==typeof e?{attributeOnGateway:e}:e;let a;this.dialog.open(dr,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{titleText:t?"gateway.statistics.create-command":"gateway.statistics.edit-command",buttonText:t?"action.add":"action.apply",command:n,existingCommands:this.commands.map((e=>e.attributeOnGateway))}}).afterClosed().pipe(be((e=>re(this.getGatewayGeneralConfig(),ie(e)))),be((([e,t])=>(this.commands=[...e?.statistics.commands.filter((e=>e.attributeOnGateway!==t?.prev?.attributeOnGateway))??[],...t?.current?[{...t.current}]:[]],a=t?.current,this.updateStatisticsCommands(e,this.commands)))),xn(this.destroyRef)).subscribe((()=>{a&&this.statisticForm.get("command").patchValue(a)}))}onDeleteClick(){const e=this.statisticForm.get("command").value.attributeOnGateway;this.dialogService.confirm(this.ctx.translate.instant("gateway.statistics.delete-command",{command:e}),this.ctx.translate.instant("gateway.statistics.delete-command-data"),this.ctx.translate.instant("action.cancel"),this.ctx.translate.instant("action.confirm")).pipe(ve(Boolean),be((()=>this.getGatewayGeneralConfig())),be((t=>(this.commands=[...t.statistics.commands.filter((t=>t.attributeOnGateway!==e))],this.updateStatisticsCommands(t,this.commands)))),xn(this.destroyRef)).subscribe()}getGatewayGeneralConfig(){const e=this.ctx.defaultSubscription.datasources[0].entity;return e.id.id===B?ie(null):this.attributeService.getEntityAttributes(e.id,D.SHARED_SCOPE,["general_configuration"]).pipe(pe((e=>e[0]?.value)))}updateStatisticsCommands(e,t){const n=this.ctx.defaultSubscription.datasources[0].entity;return n.id.id!==B&&e?this.attributeService.saveEntityAttributes(n.id,D.SHARED_SCOPE,[{key:"general_configuration",value:{...e,statistics:{...e.statistics,commands:t}}}]):ie(null)}createSubscription(e,t){const n=[{type:N.entity,entityType:L.DEVICE,entityId:e.id.id,entityName:e.name,timeseries:[]}];n[0].timeseries=[{name:t,label:t,settings:{}}],this.subscriptionInfo=n,this.changeSubscription(n)}onDataUpdateError(e){const t=this.utils.parseException(e);let n=t.name;t.message&&(n+=": "+t.message),console.error(n)}isDataOnlyNumbers(){this.subscriptionData=this.ctx.defaultSubscription.data[0]?.data??[],this.subscriptionData.length&&!this.dataTypeDefined&&(this.isNumericData=this.subscriptionData.every((e=>!isNaN(+e[1]))),this.dataTypeDefined=!0),this.ctx.detectChanges()}changeSubscription(e){this.ctx.defaultSubscription?.unsubscribe(),this.ctx.datasources[0].entity&&this.ctx.subscriptionApi.createSubscriptionFromInfo(R.timeseries,e,this.subscriptionOptions,!1,!0).pipe(xn(this.destroyRef)).subscribe((e=>{this.dataTypeDefined=!1,this.ctx.defaultSubscription=e,this.ctx.settings.showLegend=!1,this.ctx.data=e.data,this.ctx.datasources=e.datasources,this.isDataOnlyNumbers(),this.subscribed=!0}))}static{this.ɵfac=function(e){return new(e||Sj)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(_e.AttributeService),t.ɵɵdirectiveInject(t.DestroyRef),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(_e.UtilsService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Sj,selectors:[["tb-gateway-statistics"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(fj,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.statisticChart=e.first)}},inputs:{ctx:"ctx"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:18,vars:13,consts:[["statisticChart",""],[1,"flex","flex-1","flex-col","max-h-full"],[1,"entry-container","flex","items-center"],[1,"tb-form-panel","stroked","w-full","flex-1",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"entry-container","flex","w-full","gap-2"],["formControlName","command",1,"flex-1",3,"onCreateNewClicked","commands"],["appearance","outline",1,"flex-1"],["matInput","","disabled","",3,"tbTruncateWithTooltip","value"],[1,"actions-container","flex","flex-col","p-2","min-w-16"],[1,"chart-box","flex","flex-1","flex-col","overflow-auto"],[1,"tb-no-data-available","h-full"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",1,"action-button",3,"click","matTooltip"],[1,"material-icons"],[1,"flex-1",3,"ctx"],[1,"h-full","flex-1",3,"data"],[1,"tb-no-data-bg"],["translate","",1,"tb-no-data-text"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.ɵɵtext(4,"gateway.statistics.entry"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",5)(6,"tb-statistics-commands-autocomplete",6),t.ɵɵlistener("onCreateNewClicked",(function(){return n.openEditCommandDialog()})),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-form-field",7)(8,"mat-label"),t.ɵɵtext(9),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(11,"input",8),t.ɵɵpipe(12,"translate"),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(14,"div",9),t.ɵɵtemplate(15,yj,8,6),t.ɵɵelementEnd()(),t.ɵɵtemplate(16,xj,3,1,"div",10)(17,wj,4,0,"div",11),t.ɵɵelementEnd()),2&e){let e,a,i,r;t.ɵɵadvance(2),t.ɵɵproperty("formGroup",n.statisticForm),t.ɵɵadvance(4),t.ɵɵproperty("commands",n.commands),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(10,7,"gateway.statistics.command")),t.ɵɵadvance(2),t.ɵɵproperty("tbTruncateWithTooltip",null!==(e=null==(e=n.statisticForm.get("command").value)?null:e.command)&&void 0!==e?e:t.ɵɵpipeBind1(12,9,"gateway.statistics.no-config-commands-found"))("value",null!==(a=null==(a=n.statisticForm.get("command").value)?null:a.command)&&void 0!==a?a:t.ɵɵpipeBind1(13,11,"gateway.statistics.no-config-commands-found")),t.ɵɵadvance(4),t.ɵɵconditional(null!=(i=n.statisticForm.get("command").value)&&i.attributeOnGateway?15:-1),t.ɵɵadvance(),t.ɵɵconditional(null!=(r=n.statisticForm.get("command").value)&&r.attributeOnGateway&&n.subscriptionData.length&&n.subscribed?16:17)}},dependencies:t.ɵɵgetComponentDepsFactory(Sj,[j,_,Dn,Vn,gj]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;padding:4px;display:flex;flex-direction:column}[_nghost-%COMP%]   .action-button[_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 599px){[_nghost-%COMP%]   .entry-container[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .actions-container[_ngcontent-%COMP%]{flex-direction:row}}']})}}var Cj;e("GatewayStatisticsComponent",Sj),e("BACnetRequestTypes",Cj),function(e){e.WriteProperty="writeProperty",e.ReadProperty="readProperty"}(Cj||e("BACnetRequestTypes",Cj={}));const _j=e("BACnetRequestTypesTranslates",new Map([[Cj.WriteProperty,"gateway.rpc.write-property"],[Cj.ReadProperty,"gateway.rpc.read-property"]]));var Tj;e("BACnetObjectTypes",Tj),function(e){e.BinaryInput="binaryInput",e.BinaryOutput="binaryOutput",e.AnalogInput="analogInput",e.AnalogOutput="analogOutput",e.BinaryValue="binaryValue",e.AnalogValue="analogValue"}(Tj||e("BACnetObjectTypes",Tj={}));const Ij=e("BACnetObjectTypesTranslates",new Map([[Tj.AnalogOutput,"gateway.rpc.analog-output"],[Tj.AnalogInput,"gateway.rpc.analog-input"],[Tj.BinaryOutput,"gateway.rpc.binary-output"],[Tj.BinaryInput,"gateway.rpc.binary-input"],[Tj.BinaryValue,"gateway.rpc.binary-value"],[Tj.AnalogValue,"gateway.rpc.analog-value"]]));var Ej;e("BLEMethods",Ej),function(e){e.WRITE="write",e.READ="read",e.SCAN="scan"}(Ej||e("BLEMethods",Ej={}));const Mj=e("BLEMethodsTranslates",new Map([[Ej.WRITE,"gateway.rpc.write"],[Ej.READ,"gateway.rpc.read"],[Ej.SCAN,"gateway.rpc.scan"]]));var kj,Pj;e("CANByteOrders",kj),function(e){e.LITTLE="LITTLE",e.BIG="BIG"}(kj||e("CANByteOrders",kj={})),e("SocketMethodProcessings",Pj),function(e){e.WRITE="write",e.READ="read"}(Pj||e("SocketMethodProcessings",Pj={}));const Dj=e("SocketMethodProcessingsTranslates",new Map([[Pj.WRITE,"gateway.rpc.write"],[Pj.READ,"gateway.rpc.read"]]));var Oj;e("SNMPMethods",Oj),function(e){e.SET="set",e.MULTISET="multiset",e.GET="get",e.BULKWALK="bulkwalk",e.TABLE="table",e.MULTIGET="multiget",e.GETNEXT="getnext",e.BULKGET="bulkget",e.WALKS="walk"}(Oj||e("SNMPMethods",Oj={}));const Aj=e("SNMPMethodsTranslations",new Map([[Oj.SET,"gateway.rpc.set"],[Oj.MULTISET,"gateway.rpc.multiset"],[Oj.GET,"gateway.rpc.get"],[Oj.BULKWALK,"gateway.rpc.bulk-walk"],[Oj.TABLE,"gateway.rpc.table"],[Oj.MULTIGET,"gateway.rpc.multi-get"],[Oj.GETNEXT,"gateway.rpc.get-next"],[Oj.BULKGET,"gateway.rpc.bulk-get"],[Oj.WALKS,"gateway.rpc.walk"]]));var Fj,Rj;e("SocketEncodings",Fj),function(e){e.UTF_8="utf-8"}(Fj||e("SocketEncodings",Fj={})),e("RestSecurityType",Rj),function(e){e.ANONYMOUS="anonymous",e.BASIC="basic"}(Rj||e("RestSecurityType",Rj={}));const Bj=e("RestSecurityTypeTranslationsMap",new Map([[Rj.ANONYMOUS,"gateway.broker.security-types.anonymous"],[Rj.BASIC,"gateway.broker.security-types.basic"]]));class Nj{transform(e){return e.map((e=>(e?.value??e).toString())).join(", ")}static{this.ɵfac=function(e){return new(e||Nj)}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"getRpcTemplateArrayView",type:Nj,pure:!0,standalone:!0})}}e("RpcTemplateArrayViewPipe",Nj);class Lj{constructor(){this.differs=a(f),this.keyValues=[]}transform(e){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ??=this.differs.find(e).create();const t=this.differ.diff(e);return t&&(this.keyValues=[],t.forEachItem((e=>{ke(e.currentValue)&&this.keyValues.push(this.makeKeyValuePair(e.key,e.currentValue))}))),this.keyValues}makeKeyValuePair(e,t){return{key:e,value:t}}static{this.ɵfac=function(e){return new(e||Lj)}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"keyValueIsNotEmpty",type:Lj,pure:!1,standalone:!0})}}e("KeyValueIsNotEmptyPipe",Lj);const Vj=e=>({$implicit:e,innerValue:!1}),qj=e=>({"padding-left":e}),Gj=(e,t)=>({"boolean-true":e,"boolean-false":t}),zj=e=>({$implicit:e,innerValue:!0});function Uj(e,n){if(1&e&&t.ɵɵelementContainer(0,13),2&e){const e=n.$implicit;t.ɵɵnextContext();const a=t.ɵɵreference(15);t.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,Vj,e))}}function jj(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",19),t.ɵɵtext(1),t.ɵɵpipe(2,"getRpcTemplateArrayView"),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,e.value)," ")}}function Hj(e,n){if(1&e&&t.ɵɵelementContainer(0,20),2&e){t.ɵɵnextContext();const e=t.ɵɵreference(12);t.ɵɵproperty("ngTemplateOutlet",e)}}function Wj(e,n){if(1&e&&t.ɵɵelementContainer(0,20),2&e){t.ɵɵnextContext(2);const e=t.ɵɵreference(10);t.ɵɵproperty("ngTemplateOutlet",e)}}function $j(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Wj,1,1,"ng-container",21),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵreference(8),a=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵclassMap(t.ɵɵpureFunction2(4,Gj,!0===e.value,!1===e.value)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",a.type===i.ConnectorType.SNMP&&"method"===e.key)("ngIfElse",n)}}function Kj(e,n){if(1&e&&t.ɵɵtext(0),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵtextInterpolate(e.value)}}function Yj(e,n){if(1&e&&(t.ɵɵtext(0),t.ɵɵpipe(1,"translate")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵtextInterpolate(t.ɵɵpipeBind1(1,1,n.SNMPMethodsTranslations.get(e.value)))}}function Xj(e,n){if(1&e&&t.ɵɵelementContainer(0,13),2&e){const e=n.$implicit;t.ɵɵnextContext(3);const a=t.ɵɵreference(15);t.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,zj,e))}}function Zj(e,n){if(1&e&&(t.ɵɵtemplate(0,Xj,1,4,"ng-container",12),t.ɵɵpipe(1,"keyvalue")),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(1,1,e.value,n.originalOrder))}}function Qj(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",14)(1,"div",15),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(4,jj,3,3,"div",16)(5,Hj,1,1,"ng-container",17)(6,$j,2,7,"div",18)(7,Kj,1,1,"ng-template",null,1,t.ɵɵtemplateRefExtractor)(9,Yj,2,3,"ng-template",null,2,t.ɵɵtemplateRefExtractor)(11,Zj,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=n.innerValue,i=t.ɵɵnextContext(2);t.ɵɵstyleMap(t.ɵɵpureFunction1(10,qj,a?"16px":"0")),t.ɵɵclassMap(i.getRpcParamsRowClasses(e.value)),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",a?e.key:t.ɵɵpipeBind1(3,8,"gateway.rpc."+e.key)," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",i.isArray(e.value)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",i.isObject(e.value)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!i.isObject(e.value)&&!i.isArray(e.value))}}function Jj(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header")(2,"mat-panel-title",7)(3,"span",8),t.ɵɵtext(4),t.ɵɵelementEnd()(),t.ɵɵelementStart(5,"mat-panel-description")(6,"button",9),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteTemplate(n,a))})),t.ɵɵelementStart(7,"mat-icon",10),t.ɵɵtext(8,"delete"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",11),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.applyTemplate(n,a))})),t.ɵɵelementStart(10,"mat-icon",10),t.ɵɵtext(11,"play_arrow"),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(12,Uj,1,4,"ng-container",12),t.ɵɵpipe(13,"keyValueIsNotEmpty"),t.ɵɵtemplate(14,Qj,13,12,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()}if(2&e){const e=n.$implicit;t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",e.name),t.ɵɵadvance(),t.ɵɵtextInterpolate(e.name),t.ɵɵadvance(8),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(13,3,e.config))}}class eH{constructor(e){this.attributeService=e,this.saveTemplate=new u,this.useTemplate=new u,this.ConnectorType=ct,this.originalOrder=()=>0,this.isObject=e=>De(e),this.isArray=e=>Array.isArray(e),this.SNMPMethodsTranslations=Aj}applyTemplate(e,t){e.stopPropagation(),this.useTemplate.emit(t)}deleteTemplate(e,t){e.stopPropagation();const n=this.rpcTemplates.findIndex((e=>e.name==t.name));this.rpcTemplates.splice(n,1);const a=`${this.connectorType}_template`;this.attributeService.saveEntityAttributes({id:this.ctx.defaultSubscription.targetDeviceId,entityType:L.DEVICE},D.SERVER_SCOPE,[{key:a,value:this.rpcTemplates}]).subscribe((()=>{}))}getRpcParamsRowClasses(e){return this.isObject(e)?"flex-col":"flex-row justify-between items-center"}static{this.ɵfac=function(e){return new(e||eH)(t.ɵɵdirectiveInject(_e.AttributeService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:eH,selectors:[["tb-gateway-service-rpc-connector-templates"]],inputs:{connectorType:"connectorType",ctx:"ctx",rpcTemplates:"rpcTemplates"},outputs:{saveTemplate:"saveTemplate",useTemplate:"useTemplate"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:4,vars:4,consts:[["RPCTemplateRef",""],["value",""],["SNMPMethod",""],["RPCObjectRow",""],[1,"mat-subtitle-1","title"],["hideToggle","",4,"ngFor","ngForOf"],["hideToggle",""],[1,"template-name"],["matTooltipPosition","above",3,"matTooltip"],["mat-icon-button","","matTooltip","Delete",3,"click"],[1,"material-icons"],["mat-icon-button","","matTooltip","Use",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rpc-params-row","flex"],[1,"template-key"],["tbTruncateWithTooltip","","class","array-value",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"class",4,"ngIf"],["tbTruncateWithTooltip","",1,"array-value"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(3,Jj,16,5,"mat-expansion-panel",5)),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,"gateway.rpc.templates-title")),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.rpcTemplates))},dependencies:t.ɵɵgetComponentDepsFactory(eH,[j,_,Nj,Lj]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;padding:0}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .template-key[_ngcontent-%COMP%]{color:#00000061;height:32px;line-height:32px}[_nghost-%COMP%]   .boolean-true[_ngcontent-%COMP%], [_nghost-%COMP%]   .boolean-false[_ngcontent-%COMP%]{border-radius:3px;height:32px;line-height:32px;padding:0 12px;width:fit-content;font-size:14px;text-transform:capitalize}[_nghost-%COMP%]   .boolean-false[_ngcontent-%COMP%]{color:#d12730;background-color:#d1273014}[_nghost-%COMP%]   .boolean-true[_ngcontent-%COMP%]{color:#198038;background-color:#19803814}[_nghost-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-top:10px;overflow:visible}[_nghost-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse;align-items:center;margin-right:0;flex:0}[_nghost-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-left:15px;color:#00000061}[_nghost-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 0 0 12px}[_nghost-%COMP%]   .mat-expansion-panel-header.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   .mat-content.mat-content-hide-toggle[_ngcontent-%COMP%]{margin-right:0}[_nghost-%COMP%]   .rpc-params-row[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap}[_nghost-%COMP%]   .rpc-params-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(:first-child){white-space:pre;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .template-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:block}[_nghost-%COMP%]     .mat-content{align-items:center}[_nghost-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex:1;margin:0}[_nghost-%COMP%]   .array-value[_ngcontent-%COMP%]{margin-left:10px}']})}}function tH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.rpc.template-name-required")," "))}function nH(e,n){1&e&&(t.ɵɵelementStart(0,"div",12),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.rpc.template-name-duplicate")," "))}e("GatewayServiceRPCConnectorTemplatesComponent",eH);class aH extends A{constructor(e,t,n,a,i){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.config=this.data.config,this.templates=this.data.templates,this.templateNameCtrl=this.fb.control("",[$.required])}validateDuplicateName(e){const t=e.value.trim();return!!this.templates.find((e=>e.name===t))}close(){this.dialogRef.close()}save(){this.templateNameCtrl.setValue(this.templateNameCtrl.value.trim()),this.templateNameCtrl.valid&&this.dialogRef.close(this.templateNameCtrl.value)}static{this.ɵfac=function(e){return new(e||aH)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:aH,selectors:[["tb-gateway-service-rpc-connector-template-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:20,vars:10,consts:[["color","primary",1,"justify-between"],["translate",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content","",1,"mat-content","flex","flex-col",2,"width","600px"],[1,"mat-block","tb-value-type",2,"flex-grow","0"],["matInput","","required","",3,"formControl"],[4,"ngIf"],["class","mat-mdc-form-field-error","style","margin-top: -15px; padding-left: 10px; font-size: 14px;",4,"ngIf"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"mat-mdc-form-field-error",2,"margin-top","-15px","padding-left","10px","font-size","14px"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-toolbar",0)(1,"h2",1),t.ɵɵtext(2,"gateway.rpc.save-template"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"button",2),t.ɵɵlistener("click",(function(){return n.close()})),t.ɵɵelementStart(4,"mat-icon",3),t.ɵɵtext(5,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(6,"div",4)(7,"mat-form-field",5)(8,"mat-label",1),t.ɵɵtext(9,"gateway.rpc.template-name"),t.ɵɵelementEnd(),t.ɵɵelement(10,"input",6),t.ɵɵtemplate(11,tH,3,3,"mat-error",7),t.ɵɵelementEnd(),t.ɵɵtemplate(12,nH,3,3,"div",8),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",9)(14,"button",10),t.ɵɵlistener("click",(function(){return n.close()})),t.ɵɵtext(15),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"button",11),t.ɵɵlistener("click",(function(){return n.save()})),t.ɵɵtext(18),t.ɵɵpipe(19,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(10),t.ɵɵproperty("formControl",n.templateNameCtrl),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.templateNameCtrl.hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.validateDuplicateName(n.templateNameCtrl)),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(16,6,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",!n.templateNameCtrl.valid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(19,8,"action.save")," "))},dependencies:t.ɵɵgetComponentDepsFactory(aH,[j,_]),encapsulation:2})}}function iH(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",6),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SecurityTypeTranslationsMap.get(e))," ")}}function rH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",16),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.username-required"))}function oH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",16),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.password-required"))}function sH(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",7)(2,"div",8),t.ɵɵtext(3,"gateway.username"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",9)(5,"mat-form-field",10),t.ɵɵelement(6,"input",11),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,rH,3,3,"mat-icon",12),t.ɵɵelementEnd()()(),t.ɵɵelementStart(9,"div",7)(10,"div",8),t.ɵɵtext(11,"gateway.password"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"div",9)(13,"mat-form-field",10),t.ɵɵelement(14,"input",13),t.ɵɵpipe(15,"translate"),t.ɵɵtemplate(16,oH,3,3,"mat-icon",12),t.ɵɵelementStart(17,"div",14),t.ɵɵelement(18,"tb-toggle-password",15),t.ɵɵelementEnd()()()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,6,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.securityFormGroup.get("username").hasError("required")&&e.securityFormGroup.get("username").touched),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,8,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.securityFormGroup.get("password").hasError("required")&&e.securityFormGroup.get("password").touched),t.ɵɵadvance(),t.ɵɵclassProp("hide-toggle",e.securityFormGroup.get("password").hasError("required"))}}e("GatewayServiceRPCConnectorTemplateDialogComponent",aH);class lH{constructor(e){this.fb=e,this.BrokerSecurityType=Rj,this.securityTypes=Object.values(Rj),this.SecurityTypeTranslationsMap=Bj,this.destroy$=new te,this.propagateChange=e=>{},this.securityFormGroup=this.fb.group({type:[Rj.ANONYMOUS,[]],username:["",[$.required,$.pattern(an)]],password:["",[$.required,$.pattern(an)]]}),this.observeSecurityForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}writeValue(e){e.type||(e.type=Rj.ANONYMOUS),this.securityFormGroup.reset(e),this.updateView(e)}validate(){return this.securityFormGroup.valid?null:{securityForm:{valid:!1}}}updateView(e){this.propagateChange(e)}updateValidators(e){e===Rj.BASIC?(this.securityFormGroup.get("username").enable({emitEvent:!1}),this.securityFormGroup.get("password").enable({emitEvent:!1})):(this.securityFormGroup.get("username").disable({emitEvent:!1}),this.securityFormGroup.get("password").disable({emitEvent:!1}))}observeSecurityForm(){this.securityFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateView(e))),this.securityFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateValidators(e)))}static{this.ɵfac=function(e){return new(e||lH)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:lH,selectors:[["tb-rest-connector-security"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>lH)),multi:!0},{provide:K,useExisting:c((()=>lH)),multi:!0}]),t.ɵɵStandaloneFeature],decls:7,vars:3,consts:[[1,"tb-form-row","space-between","same-padding","tb-flex","column",3,"formGroup"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],["translate","",1,"fields-label"],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"tb-form-row","space-between","tb-flex","fill-width"],["translate","",1,"fixed-title-width"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","username",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matInput","","type","password","name","value","formControlName","password",3,"placeholder"],["matSuffix","",1,"tb-flex","no-gap","align-center","fill-height"],[1,"tb-flex","align-center","fill-height"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.security"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"tb-toggle-select",3),t.ɵɵtemplate(5,iH,3,4,"tb-toggle-option",4),t.ɵɵelementEnd()(),t.ɵɵtemplate(6,sH,19,10,"ng-container",5),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.securityFormGroup),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.securityTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.securityFormGroup.get("type").value===n.BrokerSecurityType.BASIC))},dependencies:t.ɵɵgetComponentDepsFactory(lH,[_,j]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block;margin-bottom:10px}[_nghost-%COMP%]   .fields-label[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .hide-toggle[_ngcontent-%COMP%]{display:none}'],changeDetection:d.OnPush})}}e("RestConnectorSecurityComponent",lH);const pH=e=>({type:e});function cH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.bACnetRequestTypesTranslates.get(e))," ")}}function dH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.bACnetObjectTypesTranslates.get(e))," ")}}function uH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",9),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",10)(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-select",11),t.ɵɵtemplate(10,cH,3,4,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field")(12,"mat-label"),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",13),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div",14)(17,"mat-form-field",15)(18,"mat-label"),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-select",16),t.ɵɵtemplate(22,dH,3,4,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(23,"mat-form-field",15)(24,"mat-label"),t.ɵɵtext(25),t.ɵɵpipe(26,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(27,"input",17),t.ɵɵelementEnd()(),t.ɵɵelementStart(28,"mat-form-field",10)(29,"mat-label"),t.ɵɵtext(30),t.ɵɵpipe(31,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(32,"input",18),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,8,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,10,"gateway.rpc.requestType")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.bACnetRequestTypes),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(14,12,"gateway.rpc.requestTimeout")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(20,14,"gateway.rpc.objectType")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.bACnetObjectTypes),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(26,16,"gateway.rpc.identifier")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(31,18,"gateway.rpc.propertyId"))}}function mH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.bLEMethodsTranslates.get(e))," ")}}function hH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",20),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",21),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-form-field",10)(11,"mat-label"),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"mat-select",22),t.ɵɵtemplate(15,mH,3,4,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(16,"mat-slide-toggle",23),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,5,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,7,"gateway.rpc.characteristicUUID")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(13,9,"gateway.rpc.methodProcessing")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.bLEMethods),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,11,"gateway.rpc.withResponse")," ")}}function gH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,e)," ")}}function fH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",24),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",25),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-slide-toggle",26),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-slide-toggle",27),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"mat-slide-toggle",28),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",14)(20,"mat-form-field",15)(21,"mat-label"),t.ɵɵtext(22),t.ɵɵpipe(23,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(24,"input",29),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"mat-form-field",15)(26,"mat-label"),t.ɵɵtext(27),t.ɵɵpipe(28,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"mat-select",30),t.ɵɵtemplate(30,gH,3,4,"mat-option",12),t.ɵɵelementEnd()()(),t.ɵɵelementStart(31,"div",14)(32,"mat-form-field",15)(33,"mat-label"),t.ɵɵtext(34),t.ɵɵpipe(35,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(36,"input",31),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"mat-form-field",15)(38,"mat-label"),t.ɵɵtext(39),t.ɵɵpipe(40,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(41,"input",32),t.ɵɵelementEnd()(),t.ɵɵelementStart(42,"mat-form-field")(43,"mat-label"),t.ɵɵtext(44),t.ɵɵpipe(45,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(46,"input",33),t.ɵɵelementEnd(),t.ɵɵelementStart(47,"mat-form-field")(48,"mat-label"),t.ɵɵtext(49),t.ɵɵpipe(50,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(51,"input",34),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,12,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,14,"gateway.rpc.nodeID")),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,16,"gateway.rpc.isExtendedID")," "),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,18,"gateway.rpc.isFD")," "),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,20,"gateway.rpc.bitrateSwitch")," "),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(23,22,"gateway.rpc.dataLength")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(28,24,"gateway.rpc.dataByteorder")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.cANByteOrders),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(35,26,"gateway.rpc.dataBefore")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(40,28,"gateway.rpc.dataAfter")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(45,30,"gateway.rpc.dataInHEX")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(50,32,"gateway.rpc.dataExpression"))}}function yH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",35),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",36),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,2,"gateway.rpc.methodFilter")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,4,"gateway.rpc.valueExpression")))}function vH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",37),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",36),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-slide-toggle",38),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,3,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,5,"gateway.rpc.valueExpression")),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,7,"gateway.rpc.withResponse")," "))}function bH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",37),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",36),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-slide-toggle",38),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,3,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,5,"gateway.rpc.valueExpression")),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,7,"gateway.rpc.withResponse")," "))}function xH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SNMPMethodsTranslations.get(e))," ")}}function wH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",45)(1,"mat-form-field",46),t.ɵɵelement(2,"input",47),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-icon",48),t.ɵɵpipe(4,"translate"),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).index,a=t.ɵɵnextContext(3);return t.ɵɵresetView(a.removeSNMPoid(n))})),t.ɵɵtext(5,"delete "),t.ɵɵelementEnd()()}if(2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵproperty("formControl",e),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(4,2,"gateway.rpc.remove"))}}function SH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",39),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",10)(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-select",40),t.ɵɵtemplate(10,xH,3,4,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-slide-toggle",38),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"fieldset",41)(15,"span",42),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(18,wH,6,4,"div",43),t.ɵɵelementStart(19,"button",44),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.addSNMPoid())})),t.ɵɵtext(20),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,7,"gateway.rpc.requestFilter")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,9,"gateway.rpc.method")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.sNMPMethods),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(13,11,"gateway.rpc.withResponse")," "),t.ɵɵadvance(4),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(17,13,"gateway.rpc.oids"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",e.getFormArrayControls("oid")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(21,15,"gateway.rpc.add-oid")," ")}}function CH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function _H(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",59),t.ɵɵelementContainerStart(1,63),t.ɵɵelementStart(2,"mat-form-field",64),t.ɵɵelement(3,"input",65),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",64),t.ɵɵelement(5,"input",66),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-icon",67),t.ɵɵpipe(7,"translate"),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).index,a=t.ɵɵnextContext(4);return t.ɵɵresetView(a.removeHTTPHeader(n))})),t.ɵɵtext(8,"delete "),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()}if(2&e){const e=n.index;t.ɵɵadvance(),t.ɵɵproperty("formGroupName",e),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,2,"gateway.rpc.remove"))}}function TH(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",58)(1,"div",59)(2,"span",60),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"span",60),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(8,"span",61),t.ɵɵelementEnd(),t.ɵɵelement(9,"mat-divider"),t.ɵɵtemplate(10,_H,9,4,"div",62),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(3);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.rpc.header-name")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(7,5,"gateway.rpc.value")),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",e.getFormArrayControls("httpHeaders"))}}function IH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",49),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",14)(6,"mat-form-field",50)(7,"mat-label"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-select",51),t.ɵɵtemplate(11,CH,2,2,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(12,"mat-form-field",15)(13,"mat-label"),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(16,"input",52),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t.ɵɵtext(20),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(22,"input",53),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"mat-form-field",15)(24,"mat-label"),t.ɵɵtext(25),t.ɵɵpipe(26,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(27,"input",54),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"mat-form-field",15)(29,"mat-label"),t.ɵɵtext(30),t.ɵɵpipe(31,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(32,"input",55),t.ɵɵelementEnd()(),t.ɵɵelementStart(33,"mat-form-field")(34,"mat-label"),t.ɵɵtext(35),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(37,"input",36),t.ɵɵelementEnd(),t.ɵɵelementStart(38,"fieldset",56)(39,"span",42),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(42,TH,11,7,"div",57),t.ɵɵelementStart(43,"button",44),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.addHTTPHeader())})),t.ɵɵtext(44),t.ɵɵpipe(45,"translate"),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,11,"gateway.rpc.methodFilter")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,13,"gateway.rpc.httpMethod")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.hTTPMethods),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,15,"gateway.rpc.requestUrlExpression")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(21,17,"gateway.rpc.responseTimeout")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(26,19,"gateway.rpc.timeout")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(31,21,"gateway.rpc.tries")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(36,23,"gateway.rpc.valueExpression")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(41,25,"gateway.rpc.httpHeaders")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.getFormArrayControls("httpHeaders").length),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(45,27,"gateway.rpc.add-header")," ")}}function EH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function MH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",59),t.ɵɵelementContainerStart(1,63),t.ɵɵelementStart(2,"mat-form-field",64),t.ɵɵelement(3,"input",73),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",64),t.ɵɵelement(6,"input",74),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-icon",67),t.ɵɵpipe(8,"translate"),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).index,a=t.ɵɵnextContext(4);return t.ɵɵresetView(a.removeHTTPHeader(n))})),t.ɵɵtext(9,"delete "),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()}if(2&e){const e=n.index;t.ɵɵadvance(),t.ɵɵproperty("formGroupName",e),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(4,3,"gateway.rpc.set")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,5,"gateway.rpc.remove"))}}function kH(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",58)(1,"div",59)(2,"span",60),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"span",60),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(8,"span",61),t.ɵɵelementEnd(),t.ɵɵelement(9,"mat-divider"),t.ɵɵtemplate(10,MH,10,7,"div",62),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(3);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.rpc.header-name")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(7,5,"gateway.rpc.value")),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",e.getFormArrayControls("httpHeaders"))}}function PH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",68),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",59)(6,"mat-form-field",50)(7,"mat-label"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-select",51),t.ɵɵtemplate(11,EH,2,2,"mat-option",12),t.ɵɵelementEnd()(),t.ɵɵelementStart(12,"mat-form-field",15)(13,"mat-label"),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(16,"input",52),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"div",59)(18,"mat-form-field",15)(19,"mat-label"),t.ɵɵtext(20),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(22,"input",53),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"mat-form-field",15)(24,"mat-label"),t.ɵɵtext(25),t.ɵɵpipe(26,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(27,"input",69),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"mat-form-field",15)(29,"mat-label"),t.ɵɵtext(30),t.ɵɵpipe(31,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(32,"input",70),t.ɵɵelementEnd()(),t.ɵɵelementStart(33,"mat-form-field")(34,"mat-label"),t.ɵɵtext(35),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(37,"input",71),t.ɵɵelementEnd(),t.ɵɵelementStart(38,"mat-form-field")(39,"mat-label"),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(42,"input",72),t.ɵɵelementEnd(),t.ɵɵelementStart(43,"fieldset",56)(44,"span",42),t.ɵɵtext(45),t.ɵɵpipe(46,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(47,kH,11,7,"div",57),t.ɵɵelementStart(48,"button",44),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.addHTTPHeader())})),t.ɵɵtext(49),t.ɵɵpipe(50,"translate"),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,12,"gateway.rpc.methodFilter")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,14,"gateway.rpc.httpMethod")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.hTTPMethods),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,16,"gateway.rpc.requestUrlExpression")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(21,18,"gateway.rpc.responseTimeout")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(26,20,"gateway.rpc.timeout")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(31,22,"gateway.rpc.tries")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(36,24,"gateway.rpc.requestValueExpression")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(41,26,"gateway.rpc.responseValueExpression")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(46,28,"gateway.rpc.httpHeaders")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.getFormArrayControls("httpHeaders").length),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(50,30,"gateway.rpc.add-header")," ")}}function DH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.rpc.json-value-invalid")," "))}function OH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",75),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field")(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(9,"input",76),t.ɵɵelementStart(10,"mat-icon",77),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext(2);return t.ɵɵresetView(a.openEditJSONDialog(n))})),t.ɵɵtext(12,"edit "),t.ɵɵelementEnd(),t.ɵɵtemplate(13,DH,3,3,"mat-error",78),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,4,"gateway.statistics.command")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,6,"widget-config.datasource-parameters")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,8,"gateway.rpc-command-edit-params")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.commandForm.get("params").hasError("invalidJSON"))}}function AH(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,6),t.ɵɵtemplate(1,uH,33,20,"ng-template",7)(2,hH,19,13,"ng-template",7)(3,fH,52,34,"ng-template",7)(4,yH,10,6,"ng-template",7)(5,vH,13,9,"ng-template",7)(6,bH,13,9,"ng-template",7)(7,SH,22,17,"ng-template",7)(8,IH,46,29,"ng-template",7)(9,PH,51,32,"ng-template",7)(10,OH,14,10,"ng-template",8),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("ngSwitch",e.connectorType),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.BACNET),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.BLE),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.CAN),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.FTP),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.OCPP),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.XMPP),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.SNMP),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.REST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.REQUEST)}}class FH{constructor(e,t){this.fb=e,this.dialog=t,this.sendCommand=new u,this.saveTemplate=new u,this.ConnectorType=ct,this.bACnetRequestTypes=Object.values(Cj),this.bACnetObjectTypes=Object.values(Tj),this.bLEMethods=Object.values(Ej),this.cANByteOrders=Object.values(kj),this.sNMPMethods=Object.values(Oj),this.hTTPMethods=Object.values(ht),this.bACnetRequestTypesTranslates=_j,this.bACnetObjectTypesTranslates=Ij,this.bLEMethodsTranslates=Mj,this.SNMPMethodsTranslations=Aj,this.gatewayConnectorDefaultTypesTranslates=dt,this.urlPattern=/^[-a-zA-Zd_$:{}?~+=\/.0-9-]*$/,this.numbersOnlyPattern=/^[0-9]*$/,this.hexOnlyPattern=/^[0-9A-Fa-f ]+$/,this.propagateChange=e=>{},this.destroy$=new te}ngOnInit(){this.commandForm=this.connectorParamsFormGroupByType(this.connectorType),this.observeFormChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}connectorParamsFormGroupByType(e){let t;switch(e){case ct.BACNET:t=this.fb.group({method:[null,[$.required,$.pattern(an)]],requestType:[null,[$.required,$.pattern(an)]],requestTimeout:[null,[$.required,$.min(10),$.pattern(this.numbersOnlyPattern)]],objectType:[null,[]],identifier:[null,[$.required,$.min(1),$.pattern(this.numbersOnlyPattern)]],propertyId:[null,[$.required,$.pattern(an)]]});break;case ct.BLE:t=this.fb.group({methodRPC:[null,[$.required,$.pattern(an)]],characteristicUUID:["00002A00-0000-1000-8000-00805F9B34FB",[$.required,$.pattern(an)]],methodProcessing:[null,[$.required]],withResponse:[!1,[]]});break;case ct.CAN:t=this.fb.group({method:[null,[$.required,$.pattern(an)]],nodeID:[null,[$.required,$.min(0),$.pattern(this.numbersOnlyPattern)]],isExtendedID:[!1,[]],isFD:[!1,[]],bitrateSwitch:[!1,[]],dataLength:[null,[$.min(1),$.pattern(this.numbersOnlyPattern)]],dataByteorder:[null,[]],dataBefore:[null,[$.pattern(an),$.pattern(this.hexOnlyPattern)]],dataAfter:[null,[$.pattern(an),$.pattern(this.hexOnlyPattern)]],dataInHEX:[null,[$.pattern(an),$.pattern(this.hexOnlyPattern)]],dataExpression:[null,[$.pattern(an)]]});break;case ct.FTP:t=this.fb.group({methodFilter:[null,[$.required,$.pattern(an)]],valueExpression:[null,[$.required,$.pattern(an)]]});break;case ct.OCPP:case ct.XMPP:t=this.fb.group({methodRPC:[null,[$.required,$.pattern(an)]],valueExpression:[null,[$.required,$.pattern(an)]],withResponse:[!1,[]]});break;case ct.SNMP:t=this.fb.group({requestFilter:[null,[$.required,$.pattern(an)]],method:[null,[$.required]],withResponse:[!1,[]],oid:this.fb.array([],[$.required])});break;case ct.REST:t=this.fb.group({methodFilter:[null,[$.required,$.pattern(an)]],httpMethod:[null,[$.required]],requestUrlExpression:[null,[$.required,$.pattern(this.urlPattern)]],responseTimeout:[null,[$.required,$.min(10),$.pattern(this.numbersOnlyPattern)]],timeout:[null,[$.required,$.min(10),$.pattern(this.numbersOnlyPattern)]],tries:[null,[$.required,$.min(1),$.pattern(this.numbersOnlyPattern)]],valueExpression:[null,[$.required,$.pattern(an)]],httpHeaders:this.fb.array([]),security:[{},[$.required]]});break;case ct.REQUEST:t=this.fb.group({methodFilter:[null,[$.required,$.pattern(an)]],httpMethod:[null,[$.required]],requestUrlExpression:[null,[$.required,$.pattern(this.urlPattern)]],responseTimeout:[null,[$.required,$.min(10),$.pattern(this.numbersOnlyPattern)]],timeout:[null,[$.required,$.min(10),$.pattern(this.numbersOnlyPattern)]],tries:[null,[$.required,$.min(1),$.pattern(this.numbersOnlyPattern)]],requestValueExpression:[null,[$.required,$.pattern(an)]],responseValueExpression:[null,[$.pattern(an)]],httpHeaders:this.fb.array([])});break;default:t=this.fb.group({command:[null,[$.required,$.pattern(an)]],params:[{},[st]]})}return t}addSNMPoid(e=null){const t=this.commandForm.get("oid");t&&t.push(this.fb.control(e,[$.required,$.pattern(an)]),{emitEvent:!1})}removeSNMPoid(e){this.commandForm.get("oid").removeAt(e)}addHTTPHeader(e={headerName:null,value:null}){const t=this.commandForm.get("httpHeaders"),n=this.fb.group({headerName:[e.headerName,[$.required,$.pattern(an)]],value:[e.value,[$.required,$.pattern(an)]]});t&&t.push(n,{emitEvent:!1})}removeHTTPHeader(e){this.commandForm.get("httpHeaders").removeAt(e)}getFormArrayControls(e){return this.commandForm.get(e).controls}openEditJSONDialog(e){e&&e.stopPropagation(),this.dialog.open(tt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{jsonValue:this.commandForm.get("params").value,required:!0}}).afterClosed().subscribe((e=>{e&&this.commandForm.get("params").setValue(e)}))}save(){this.saveTemplate.emit()}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}clearFromArrayByName(e){const t=this.commandForm.get(e);for(;0!==t.length;)t.removeAt(0)}writeValue(e){if("object"==typeof e){switch(e=Oe(e),this.connectorType){case ct.SNMP:this.clearFromArrayByName("oid"),e.oid.forEach((e=>{this.addSNMPoid(e)})),delete e.oid;break;case ct.REQUEST:case ct.REST:this.clearFromArrayByName("httpHeaders"),e.httpHeaders&&Object.entries(e.httpHeaders).forEach((e=>{this.addHTTPHeader({headerName:e[0],value:e[1]})})),delete e.httpHeaders}this.commandForm.patchValue(e,{onlySelf:!1})}}observeFormChanges(){this.commandForm.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.connectorType!==ct.REST&&this.connectorType!==ct.REQUEST||(e.httpHeaders=e.httpHeaders.reduce(((e,t)=>(e[t.headerName]=t.value,e)),{})),this.commandForm.valid&&this.propagateChange({...this.commandForm.value,...e})}))}static{this.ɵfac=function(e){return new(e||FH)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(qe.MatDialog))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:FH,selectors:[["tb-gateway-service-rpc-connector"]],inputs:{connectorType:"connectorType"},outputs:{sendCommand:"sendCommand",saveTemplate:"saveTemplate"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>FH)),multi:!0}]),t.ɵɵStandaloneFeature],decls:12,vars:16,consts:[[1,"command-form","flex","flex-col",3,"formGroup"],[1,"mat-subtitle-1","title"],[3,"ngIf"],[1,"template-actions","flex","flex-row","justify-end","gap-2.5"],["mat-raised-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"ngSwitch"],[3,"ngSwitchCase"],["ngSwitchDefault",""],["matInput","","formControlName","method","placeholder","set_state"],[1,"mat-block"],["formControlName","requestType"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","requestTimeout","type","number","min","10","step","1","placeholder","1000"],[1,"flex","flex-1","flex-row","gap-2.5"],[1,"flex-1"],["formControlName","objectType"],["matInput","","formControlName","identifier","type","number","min","1","step","1","placeholder","1"],["matInput","","formControlName","propertyId","placeholder","presentValue"],[3,"value"],["matInput","","formControlName","methodRPC","placeholder","rpcMethod1"],["matInput","","formControlName","characteristicUUID","placeholder","00002A00-0000-1000-8000-00805F9B34FB"],["formControlName","methodProcessing"],["formControlName","withResponse",1,"mat-slide"],["matInput","","formControlName","method","placeholder","sendSameData"],["matInput","","formControlName","nodeID","type","number","placeholder","4","min","0","step","1"],["formControlName","isExtendedID",1,"mat-slide","margin"],["formControlName","isFD",1,"mat-slide","margin"],["formControlName","bitrateSwitch",1,"mat-slide","margin"],["matInput","","formControlName","dataLength","type","number","placeholder","2","min","1","step","1"],["formControlName","dataByteorder"],["matInput","","formControlName","dataBefore","placeholder","00AA"],["matInput","","formControlName","dataAfter","placeholder","0102"],["matInput","","formControlName","dataInHEX","placeholder","aa bb cc dd ee ff   aa bb aa bb cc d ee ff"],["matInput","","formControlName","dataExpression","placeholder","userSpeed if maxAllowedSpeed > userSpeed else maxAllowedSpeed"],["matInput","","formControlName","methodFilter","placeholder","read"],["matInput","","formControlName","valueExpression","placeholder","${params}"],["matInput","","formControlName","methodRPC","placeholder","rpc1"],["formControlName","withResponse",1,"mat-slide","margin"],["matInput","","formControlName","requestFilter","placeholder","setData"],["formControlName","method"],["formArrayName","oid",1,"fields","flex","flex-col","gap-2.5","border"],[1,"fields-label"],["class","flex flex-1 flex-row items-center justify-center gap-2.5",4,"ngFor","ngForOf"],["mat-raised-button","",1,"self-start",3,"click"],[1,"flex","flex-1","flex-row","items-center","justify-center","gap-2.5"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","flex-1"],["matInput","","required","",3,"formControl"],[1,"flex-[1_1_30px]",2,"cursor","pointer","max-width","30px","min-width","30px",3,"click","matTooltip"],["matInput","","formControlName","methodFilter","placeholder","post_attributes"],[1,"max-w-4/12","flex-[1_1_33%]"],["formControlName","httpMethod"],["matInput","","formControlName","requestUrlExpression","placeholder","http://127.0.0.1:5000/my_devices"],["matInput","","formControlName","responseTimeout","type","number","step","1","min","10","placeholder","10"],["matInput","","formControlName","timeout","type","number","step","1","min","10","placeholder","1000"],["matInput","","formControlName","tries","type","number","step","1","min","1","placeholder","3"],["formArrayName","httpHeaders",1,"fields","flex","flex-col","gap-2.5","border"],["class","flex flex-col gap-2.5 border",4,"ngIf"],[1,"flex","flex-col","gap-2.5","border"],[1,"flex","flex-row","items-center","justify-center","gap-2.5"],[1,"title","flex-1"],[2,"width","30px"],["class","flex flex-row items-center justify-center gap-2.5",4,"ngFor","ngForOf"],[3,"formGroupName"],["appearance","outline",1,"flex-1"],["matInput","","formControlName","headerName"],["matInput","","formControlName","value","placeholder","application/json"],[2,"cursor","pointer","width","30px",3,"click","matTooltip"],["matInput","","formControlName","methodFilter","placeholder","echo"],["matInput","","formControlName","timeout","type","number","step","1","min","10","placeholder","10"],["matInput","","formControlName","tries","type","number","step","1","min","1","placeholder","1"],["matInput","","formControlName","requestValueExpression","placeholder","${params}"],["matInput","","formControlName","responseValueExpression","placeholder","${temp}"],["matInput","","formControlName","headerName",3,"placeholder"],["matInput","","formControlName","value"],["matInput","","formControlName","command"],["matInput","","formControlName","params","type","JSON","tb-json-to-string",""],["aria-hidden","false","aria-label","help-icon","matIconSuffix","",1,"material-icons-outlined",2,"cursor","pointer",3,"click","matTooltip"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(4,AH,11,10,"ng-template",2),t.ɵɵelementStart(5,"div",3)(6,"button",4),t.ɵɵlistener("click",(function(){return n.save()})),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"button",5),t.ɵɵlistener("click",(function(){return n.sendCommand.emit()})),t.ɵɵtext(10),t.ɵɵpipe(11,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.commandForm),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(3,7,"gateway.rpc.title",t.ɵɵpureFunction1(14,pH,n.gatewayConnectorDefaultTypesTranslates.get(n.connectorType)))),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.connectorType),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.commandForm.invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(8,10,"gateway.rpc-command-save-template")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.commandForm.invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(11,12,"gateway.rpc-command-send")," "))},dependencies:t.ɵɵgetComponentDepsFactory(FH,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;padding:0}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .command-form[_ngcontent-%COMP%]{flex-wrap:nowrap}[_nghost-%COMP%]   .command-form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .mat-mdc-slide-toggle.margin[_ngcontent-%COMP%]{margin-bottom:10px;margin-left:10px}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]   .fields-label[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .border[_ngcontent-%COMP%]{padding:16px;margin-bottom:10px;box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .border[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]   .border[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   .border[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;margin-bottom:16px}']})}}function RH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",11),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function BH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",11),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.ModbusFunctionCodeTranslationsMap.get(e)))}}function NH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",12),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.address-required"))}function LH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",12),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function VH(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",13)(1,"mat-form-field",3)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",14),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,LH,3,3,"mat-icon",8),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.rpc.value")),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.rpcParametersFormGroup.get("value").hasError("required")&&e.rpcParametersFormGroup.get("value").touched)}}class qH{constructor(e){this.fb=e,this.ModbusEditableDataTypes=$t,this.ModbusFunctionCodeTranslationsMap=Zt,this.modbusDataTypes=Object.values(Wt),this.writeFunctionCodes=[5,6,15,16],this.defaultFunctionCodes=[3,4,6,16],this.readFunctionCodes=[1,2,3,4],this.bitsFunctionCodes=[...this.readFunctionCodes,...this.writeFunctionCodes],this.destroy$=new te,this.rpcParametersFormGroup=this.fb.group({type:[Wt.BYTES,[$.required]],functionCode:[this.defaultFunctionCodes[0],[$.required]],value:[{value:"",disabled:!0},[$.required,$.pattern(an)]],address:[null,[$.required]],objectsCount:[1,[$.required]]}),this.updateFunctionCodes(this.rpcParametersFormGroup.get("type").value),this.observeValueChanges(),this.observeKeyDataType(),this.observeFunctionCode()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}validate(){return this.rpcParametersFormGroup.valid?null:{rpcParametersFormGroup:{valid:!1}}}writeValue(e){this.rpcParametersFormGroup.patchValue(e,{emitEvent:!1})}observeValueChanges(){this.rpcParametersFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}observeKeyDataType(){this.rpcParametersFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.ModbusEditableDataTypes.includes(e)||this.rpcParametersFormGroup.get("objectsCount").patchValue(Kt[e],{emitEvent:!1}),this.updateFunctionCodes(e)}))}observeFunctionCode(){this.rpcParametersFormGroup.get("functionCode").valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateValueEnabling(e)))}updateValueEnabling(e){this.writeFunctionCodes.includes(e)?this.rpcParametersFormGroup.get("value").enable({emitEvent:!1}):(this.rpcParametersFormGroup.get("value").setValue(null),this.rpcParametersFormGroup.get("value").disable({emitEvent:!1}))}updateFunctionCodes(e){this.functionCodes=e===Wt.BITS?this.bitsFunctionCodes:this.defaultFunctionCodes,this.functionCodes.includes(this.rpcParametersFormGroup.get("functionCode").value)||this.rpcParametersFormGroup.get("functionCode").patchValue(this.functionCodes[0],{emitEvent:!1})}static{this.ɵfac=function(e){return new(e||qH)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:qH,selectors:[["tb-gateway-modbus-rpc-parameters"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>qH)),multi:!0},{provide:K,useExisting:c((()=>qH)),multi:!0}]),t.ɵɵStandaloneFeature],decls:35,vars:30,consts:[[3,"formGroup"],[1,"tb-form-hint","tb-primary-fill","no-padding-top","hint-container"],[1,"flex","flex-1","flex-row","gap-2.5"],[1,"flex-1"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","functionCode"],["matInput","","type","number","min","0","max","50000","name","value","formControlName","address",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matInput","","type","number","min","1","max","50000","name","value","formControlName","objectsCount",3,"placeholder","readonly"],["class","flex",4,"ngIf"],[3,"value"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[1,"flex"],["matInput","","name","value","formControlName","value",3,"placeholder"]],template:function(e,n){1&e&&(t.ɵɵelementContainerStart(0,0),t.ɵɵelementStart(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelement(4,"br"),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),t.ɵɵtext(10),t.ɵɵpipe(11,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-select",4),t.ɵɵtemplate(13,RH,2,2,"mat-option",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(14,"mat-form-field",3)(15,"mat-label"),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"mat-select",6),t.ɵɵtemplate(19,BH,3,4,"mat-option",5),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",2)(21,"mat-form-field",3)(22,"mat-label"),t.ɵɵtext(23),t.ɵɵpipe(24,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(25,"input",7),t.ɵɵpipe(26,"translate"),t.ɵɵtemplate(27,NH,3,3,"mat-icon",8),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"mat-form-field",3)(29,"mat-label"),t.ɵɵtext(30),t.ɵɵpipe(31,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(32,"input",9),t.ɵɵpipe(33,"translate"),t.ɵɵelementEnd()(),t.ɵɵtemplate(34,VH,8,7,"div",10),t.ɵɵelementContainerEnd()),2&e&&(t.ɵɵproperty("formGroup",n.rpcParametersFormGroup),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,14,"gateway.rpc.hint.modbus-response-reading"),""),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,16,"gateway.rpc.hint.modbus-writing-functions")," "),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(11,18,"gateway.rpc.type")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.modbusDataTypes),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(17,20,"gateway.rpc.functionCode")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.functionCodes),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(24,22,"gateway.rpc.address")),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(26,24,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.rpcParametersFormGroup.get("address").hasError("required")&&n.rpcParametersFormGroup.get("address").touched),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(31,26,"gateway.rpc.objectsCount")),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(33,28,"gateway.set")),t.ɵɵproperty("readonly",!n.ModbusEditableDataTypes.includes(n.rpcParametersFormGroup.get("type").value)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.writeFunctionCodes.includes(n.rpcParametersFormGroup.get("functionCode").value)))},dependencies:t.ɵɵgetComponentDepsFactory(qH,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .hint-container[_ngcontent-%COMP%]{margin-bottom:12px}'],changeDetection:d.OnPush})}}function GH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",6),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.rpc.responseTopicExpression")))}function zH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-form-field")(1,"mat-label"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",7),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.rpc.responseTimeout")))}class UH{constructor(e){this.fb=e,this.onChange=e=>{},this.onTouched=()=>{},this.destroy$=new te,this.rpcParametersFormGroup=this.fb.group({methodFilter:[null,[$.required,$.pattern(an)]],requestTopicExpression:[null,[$.required,$.pattern(an)]],responseTopicExpression:[{value:null,disabled:!0},[$.required,$.pattern(an)]],responseTimeout:[{value:null,disabled:!0},[$.min(10),$.pattern(rn)]],valueExpression:[null,[$.required,$.pattern(an)]],withResponse:[!1,[]]}),this.observeValueChanges(),this.observeWithResponse()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}validate(){return this.rpcParametersFormGroup.valid?null:{rpcParametersFormGroup:{valid:!1}}}writeValue(e){this.rpcParametersFormGroup.patchValue(e,{emitEvent:!1}),this.toggleResponseFields(e.withResponse)}observeValueChanges(){this.rpcParametersFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}observeWithResponse(){this.rpcParametersFormGroup.get("withResponse").valueChanges.pipe(me((e=>this.toggleResponseFields(e))),le(this.destroy$)).subscribe()}toggleResponseFields(e){const t=this.rpcParametersFormGroup.get("responseTopicExpression"),n=this.rpcParametersFormGroup.get("responseTimeout");e?(t.enable(),n.enable()):(t.disable(),n.disable())}static{this.ɵfac=function(e){return new(e||UH)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:UH,selectors:[["tb-gateway-mqtt-rpc-parameters"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>UH)),multi:!0},{provide:K,useExisting:c((()=>UH)),multi:!0}]),t.ɵɵStandaloneFeature],decls:21,vars:15,consts:[[3,"formGroup"],["matInput","","formControlName","methodFilter","placeholder","echo"],["matInput","","formControlName","requestTopicExpression","placeholder","sensor/${deviceName}/request/${methodName}/${requestId}"],["formControlName","withResponse",1,"margin",3,"click"],[4,"ngIf"],["matInput","","formControlName","valueExpression","placeholder","${params}"],["matInput","","formControlName","responseTopicExpression","placeholder","sensor/${deviceName}/response/${methodName}/${requestId}"],["matInput","","formControlName","responseTimeout","type","number","placeholder","10000","min","10","step","1"]],template:function(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,0),t.ɵɵelementStart(1,"mat-form-field")(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",1),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field")(7,"mat-label"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(10,"input",2),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-slide-toggle",3),t.ɵɵlistener("click",(function(e){return e.stopPropagation()})),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(14,GH,5,3,"mat-form-field",4)(15,zH,5,3,"mat-form-field",4),t.ɵɵelementStart(16,"mat-form-field")(17,"mat-label"),t.ɵɵtext(18),t.ɵɵpipe(19,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(20,"input",5),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){let e,a;t.ɵɵproperty("formGroup",n.rpcParametersFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,7,"gateway.rpc.method-name")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,9,"gateway.rpc.requestTopicExpression")),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(13,11,"gateway.rpc.withResponse")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==(e=n.rpcParametersFormGroup.get("withResponse"))?null:e.value),t.ɵɵadvance(),t.ɵɵproperty("ngIf",null==(a=n.rpcParametersFormGroup.get("withResponse"))?null:a.value),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(19,13,"gateway.rpc.valueExpression"))}},dependencies:t.ɵɵgetComponentDepsFactory(UH,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-mdc-slide-toggle.margin[_ngcontent-%COMP%]{margin-bottom:10px;margin-left:10px}'],changeDetection:d.OnPush})}}function jH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",26),t.ɵɵelement(1,"mat-icon",27),t.ɵɵelementStart(2,"span"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("svgIcon",a.valueTypes.get(e).icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,a.valueTypes.get(e).name))}}function HH(e,n){1&e&&(t.ɵɵelement(0,"input",28),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function WH(e,n){1&e&&(t.ɵɵelement(0,"input",29),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function $H(e,n){1&e&&(t.ɵɵelement(0,"input",30),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function KH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-select",31)(1,"mat-option",26),t.ɵɵtext(2,"true"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-option",26),t.ɵɵtext(4,"false"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(),t.ɵɵproperty("value",!0),t.ɵɵadvance(2),t.ɵɵproperty("value",!1))}function YH(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",32),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function XH(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",8)(1,"div",9)(2,"div",10),t.ɵɵtext(3,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",11)(5,"mat-form-field",12)(6,"mat-select",13)(7,"mat-select-trigger")(8,"div",14),t.ɵɵelement(9,"mat-icon",15),t.ɵɵelementStart(10,"span"),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(13,jH,5,5,"mat-option",16),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(14,"div",17)(15,"div",10),t.ɵɵtext(16,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"mat-form-field",18),t.ɵɵelementContainerStart(18,19),t.ɵɵtemplate(19,HH,2,3,"input",20)(20,WH,2,3,"input",21)(21,$H,2,3,"input",22)(22,KH,5,2,"mat-select",23),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(23,YH,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵelementStart(24,"button",25),t.ɵɵpipe(25,"translate"),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).index,a=t.ɵɵnextContext();return t.ɵɵresetView(a.removeArgument(n))})),t.ɵɵelementStart(26,"mat-icon"),t.ɵɵtext(27,"delete"),t.ɵɵelementEnd()()()}if(2&e){let e,a;const i=n.$implicit,r=t.ɵɵnextContext();t.ɵɵproperty("formGroup",i),t.ɵɵadvance(9),t.ɵɵproperty("svgIcon",null==(e=r.valueTypes.get(i.get("type").value))?null:e.icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(12,11,null==(a=r.valueTypes.get(i.get("type").value))?null:a.name)),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",r.valueTypeKeys),t.ɵɵadvance(5),t.ɵɵproperty("ngSwitch",i.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",r.MappingValueType.STRING),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",r.MappingValueType.INTEGER),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",r.MappingValueType.DOUBLE),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",r.MappingValueType.BOOLEAN),t.ɵɵadvance(),t.ɵɵproperty("ngIf",i.get(i.get("type").value+"Value").hasError("required")&&i.get(i.get("type").value+"Value").touched),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(25,13,"gateway.rpc.remove"))}}class ZH{constructor(e,t){this.fb=e,this.cdr=t,this.valueTypeKeys=Object.values(Yt),this.MappingValueType=Yt,this.valueTypes=Xt,this.onChange=e=>{},this.onTouched=()=>{},this.destroy$=new te,this.rpcParametersFormGroup=this.fb.group({method:[null,[$.required,$.pattern(an)]],arguments:this.fb.array([])}),this.observeValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}validate(){return this.rpcParametersFormGroup.valid?null:{rpcParametersFormGroup:{valid:!1}}}writeValue(e){this.clearArguments(),e.arguments?.map((({type:e,value:t})=>({type:e,[e+"Value"]:t}))).forEach((e=>this.addArgument(e))),this.cdr.markForCheck(),this.rpcParametersFormGroup.get("method").patchValue(e.method)}observeValueChanges(){this.rpcParametersFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{const t=e.arguments.map((({type:e,...t})=>({type:e,value:t[e+"Value"]})));this.onChange({method:e.method,arguments:t}),this.onTouched()}))}removeArgument(e){this.rpcParametersFormGroup.get("arguments").removeAt(e)}addArgument(e={}){const t=this.fb.group({type:[e.type??Yt.STRING],stringValue:[e.stringValue??{value:"",disabled:!(Se(e,{})||e.stringValue)},[$.required,$.pattern(an)]],integerValue:[{value:e.integerValue??0,disabled:!ke(e.integerValue)},[$.required,$.pattern(rn)]],doubleValue:[{value:e.doubleValue??0,disabled:!ke(e.doubleValue)},[$.required]],booleanValue:[{value:e.booleanValue??!1,disabled:!ke(e.booleanValue)},[$.required]]});this.observeTypeChange(t),this.rpcParametersFormGroup.get("arguments").push(t,{emitEvent:!1})}clearArguments(){const e=this.rpcParametersFormGroup.get("arguments");for(;0!==e.length;)e.removeAt(0)}observeTypeChange(e){e.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((t=>{e.disable({emitEvent:!1}),e.get("type").enable({emitEvent:!1}),e.get(t+"Value").enable({emitEvent:!1})}))}static{this.ɵfac=function(e){return new(e||ZH)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:ZH,selectors:[["tb-gateway-opc-rpc-parameters"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>ZH)),multi:!0},{provide:K,useExisting:c((()=>ZH)),multi:!0}]),t.ɵɵStandaloneFeature],decls:18,vars:14,consts:[[3,"formGroup"],[1,"tb-form-hint","tb-primary-fill","tb-flex","no-padding-top","hint-container"],[1,"tb-flex"],["matInput","","formControlName","method","placeholder","multiply"],["formArrayName","arguments",1,"tb-form-panel","stroked","arguments-container"],[1,"fields-label"],["class","flex flex-1 items-center justify-center gap-2.5",3,"formGroup",4,"ngFor","ngForOf"],["mat-raised-button","",1,"self-start",3,"click"],[1,"flex","flex-1","items-center","justify-center","gap-2.5",3,"formGroup"],[1,"tb-form-row","column-xs","type-container","items-center","justify-between"],["translate","",1,"tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","fill-width"],["formControlName","type"],[1,"tb-flex","align-center"],[1,"tb-mat-18",3,"svgIcon"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-row","column-xs","value-container","item-center","justify-between"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","tb-suffix-absolute","flex"],[3,"ngSwitch"],["matInput","","required","","formControlName","stringValue",3,"placeholder",4,"ngSwitchCase"],["matInput","","required","","formControlName","integerValue","type","number",3,"placeholder",4,"ngSwitchCase"],["matInput","","required","","formControlName","doubleValue","type","number",3,"placeholder",4,"ngSwitchCase"],["formControlName","booleanValue",4,"ngSwitchCase"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",1,"tb-box-button",3,"click","matTooltip"],[3,"value"],[1,"tb-mat-20",3,"svgIcon"],["matInput","","required","","formControlName","stringValue",3,"placeholder"],["matInput","","required","","formControlName","integerValue","type","number",3,"placeholder"],["matInput","","required","","formControlName","doubleValue","type","number",3,"placeholder"],["formControlName","booleanValue"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementContainerStart(0,0),t.ɵɵelementStart(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",2)(5,"mat-label"),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(8,"input",3),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"fieldset",4)(10,"strong")(11,"span",5),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd()(),t.ɵɵtemplate(14,XH,28,15,"div",6),t.ɵɵelementStart(15,"button",7),t.ɵɵlistener("click",(function(){return n.addArgument()})),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementContainerEnd()),2&e&&(t.ɵɵproperty("formGroup",n.rpcParametersFormGroup),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,6,"gateway.rpc.hint.opc-method")," "),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(7,8,"gateway.rpc.method")),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(13,10,"gateway.rpc.arguments")),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.rpcParametersFormGroup.get("arguments").controls),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(17,12,"gateway.rpc.add-argument")," "))},dependencies:t.ɵɵgetComponentDepsFactory(ZH,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .arguments-container[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   .type-container[_ngcontent-%COMP%]{width:40%}[_nghost-%COMP%]   .value-container[_ngcontent-%COMP%]{width:50%}[_nghost-%COMP%]   .hint-container[_ngcontent-%COMP%]{margin-bottom:12px}'],changeDetection:d.OnPush})}}function QH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",8),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SocketMethodProcessingsTranslates.get(e))," ")}}function JH(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",8),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",e.toUpperCase()," ")}}class eW extends Gi{constructor(){super(...arguments),this.SocketMethodProcessingsTranslates=Dj,this.socketMethodProcessings=Object.values(Pj),this.socketEncoding=Object.values(mt)}initFormGroup(){return this.fb.group({methodRPC:[null,[$.required,$.pattern(an)]],methodProcessing:[Pj.WRITE,[$.required]],encoding:[Fj.UTF_8,[$.required,$.pattern(an)]],withResponse:[!1,[]]})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(eW)))(n||eW)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:eW,selectors:[["tb-gateway-socket-rpc-parameters"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>eW)),multi:!0},{provide:K,useExisting:c((()=>eW)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:21,vars:15,consts:[[3,"formGroup"],[1,"w-full"],["matInput","","formControlName","methodRPC","placeholder","rpcMethod1"],[1,"mat-block"],["formControlName","methodProcessing"],[3,"value",4,"ngFor","ngForOf"],["formControlName","encoding"],["formControlName","withResponse",1,"mat-slide","margin"],[3,"value"]],template:function(e,n){1&e&&(t.ɵɵelementContainerStart(0,0),t.ɵɵelementStart(1,"mat-form-field",1)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",2),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field",3)(7,"mat-label"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-select",4),t.ɵɵtemplate(11,QH,3,4,"mat-option",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(12,"mat-form-field",3)(13,"mat-label"),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"mat-select",6),t.ɵɵtemplate(17,JH,2,2,"mat-option",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"mat-slide-toggle",7),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e&&(t.ɵɵproperty("formGroup",n.formGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,7,"gateway.rpc.methodRPC")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,9,"gateway.rpc.methodProcessing")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.socketMethodProcessings),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,11,"gateway.encoding")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.socketEncoding),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(20,13,"gateway.rpc.withResponse")," "))},dependencies:t.ɵɵgetComponentDepsFactory(eW,[j,_]),encapsulation:2,changeDetection:d.OnPush})}}const tW=e=>({border:e}),nW=e=>({type:e});function aW(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",15),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function iW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-min")," "))}function rW(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"mat-form-field")(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-select",9),t.ɵɵtemplate(6,aW,2,2,"mat-option",10),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"mat-form-field",11)(8,"mat-label"),t.ɵɵtext(9),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(11,"input",12),t.ɵɵtemplate(12,iW,3,3,"mat-error",13),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"button",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.sendCommand())})),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,6,"gateway.statistics.command")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.RPCCommands),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(10,8,"gateway.statistics.timeout")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.commandForm.get("time").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("disabled",e.commandForm.invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,10,"gateway.rpc-command-send")," ")}}function oW(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-gateway-service-rpc-connector",17),t.ɵɵlistener("sendCommand",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.sendCommand())}))("saveTemplate",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.saveTemplate())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("connectorType",e.connectorType)}}function sW(e,n){1&e&&t.ɵɵelement(0,"tb-gateway-modbus-rpc-parameters",24)}function lW(e,n){1&e&&t.ɵɵelement(0,"tb-gateway-mqtt-rpc-parameters",24)}function pW(e,n){1&e&&t.ɵɵelement(0,"tb-gateway-opc-rpc-parameters",24)}function cW(e,n){1&e&&t.ɵɵelement(0,"tb-gateway-socket-rpc-parameters",24)}function dW(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",18)(1,"div",19),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(4,20),t.ɵɵtemplate(5,sW,1,0,"tb-gateway-modbus-rpc-parameters",21)(6,lW,1,0,"tb-gateway-mqtt-rpc-parameters",21)(7,pW,1,0,"tb-gateway-opc-rpc-parameters",21)(8,cW,1,0,"tb-gateway-socket-rpc-parameters",21),t.ɵɵelementContainerEnd(),t.ɵɵelementStart(9,"div",22)(10,"button",23),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.saveTemplate())})),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"button",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.sendCommand())})),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(3,10,"gateway.rpc.title",t.ɵɵpureFunction1(17,nW,e.gatewayConnectorDefaultTypesTranslates.get(e.connectorType)))),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitch",e.connectorType),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.MODBUS),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.MQTT),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.OPCUA),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.SOCKET),t.ɵɵadvance(2),t.ɵɵproperty("disabled",e.commandForm.get("params").invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,13,"gateway.rpc-command-save-template")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",e.commandForm.get("params").invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,15,"gateway.rpc-command-send")," ")}}function uW(e,n){if(1&e&&t.ɵɵtemplate(0,oW,1,1,"tb-gateway-service-rpc-connector",16)(1,dW,16,19,"ng-template",null,1,t.ɵɵtemplateRefExtractor),2&e){const e=t.ɵɵreference(2),n=t.ɵɵnextContext();t.ɵɵproperty("ngIf",!n.typesWithUpdatedParams.has(n.connectorType))("ngIfElse",e)}}function mW(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",25)(1,"mat-icon",26),t.ɵɵtext(2,"schedule"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"span"),t.ɵɵtext(4),t.ɵɵpipe(5,"date"),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(5,1,e.resultTime,"yyyy/MM/dd HH:mm:ss"))}}function hW(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-gateway-service-rpc-connector-templates",27),t.ɵɵlistener("useTemplate",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.useTemplate(n))})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("rpcTemplates",e.templates)("ctx",e.ctx)("connectorType",e.connectorType)}}class gW{constructor(e,t,n,a,i){this.fb=e,this.dialog=t,this.utils=n,this.cd=a,this.attributeService=i,this.contentTypes=V,this.RPCCommands=["Ping","Stats","Devices","Update","Version","Restart","Reboot"],this.templates=[],this.ConnectorType=ct,this.gatewayConnectorDefaultTypesTranslates=dt,this.typesWithUpdatedParams=new Set([ct.MQTT,ct.OPCUA,ct.MODBUS,ct.SOCKET]),this.modbusReadFunctionCodes=[1,2,3,4],this.subscriptionOptions={callbacks:{onDataUpdated:()=>this.ctx.ngZone.run((()=>{this.updateTemplates()})),onDataUpdateError:(e,t)=>this.ctx.ngZone.run((()=>{this.onDataUpdateError(t)})),dataLoading:()=>{}}},this.commandForm=this.fb.group({command:[null,[$.required]],time:[60,[$.required,$.min(1)]],params:["{}",[st]],result:[null]})}ngOnInit(){if(this.isConnector=this.ctx.settings.isConnector,this.isConnector){this.connectorType=this.ctx.stateController.getStateParams().connector_rpc.value.type;const e=[{type:N.entity,entityType:L.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId,entityName:"Connector",attributes:[{name:`${this.connectorType}_template`}]}];this.ctx.subscriptionApi.createSubscriptionFromInfo(R.latest,e,this.subscriptionOptions,!1,!0).subscribe((e=>{this.subscription=e}))}else this.commandForm.get("command").setValue(this.RPCCommands[0])}sendCommand(e){this.resultTime=null;const t=e||this.commandForm.value,n=this.isConnector?`${this.connectorType}_`:"gateway_",a=this.isConnector?this.getCommandFromParamsByType(t.params):t.command.toLowerCase(),i=this.ctx.stateController.getStateParams().connector_rpc?.value.configurationJson.id,r=i?{...t.params,connectorId:i}:t.params;this.ctx.controlApi.sendTwoWayCommand(n+a,r,t.time).subscribe({next:e=>{this.resultTime=(new Date).getTime(),this.commandForm.get("result").setValue(JSON.stringify(e))},error:e=>{this.resultTime=(new Date).getTime(),console.error(e),this.commandForm.get("result").setValue(JSON.stringify(e.error))}})}getCommandFromParamsByType(e){switch(this.connectorType){case ct.MQTT:case ct.FTP:case ct.SNMP:case ct.REST:case ct.REQUEST:return e.methodFilter;case ct.MODBUS:return this.modbusReadFunctionCodes.includes(e.functionCode)?"get":"set";case ct.BACNET:case ct.CAN:case ct.OPCUA:return e.method;case ct.BLE:case ct.OCPP:case ct.SOCKET:case ct.XMPP:return e.methodRPC;default:return e.command}}saveTemplate(){this.dialog.open(aH,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{config:this.commandForm.value.params,templates:this.templates}}).afterClosed().subscribe((e=>{if(e){const t={name:e,config:this.commandForm.value.params,type:this.connectorType},n=this.templates,a=n.findIndex((e=>e.name==t.name));a>-1&&n.splice(a,1),n.push(t);const i=`${this.connectorType}_template`;this.attributeService.saveEntityAttributes({id:this.ctx.defaultSubscription.targetDeviceId,entityType:L.DEVICE},D.SERVER_SCOPE,[{key:i,value:n}]).subscribe((()=>{this.cd.detectChanges()}))}}))}useTemplate(e){this.commandForm.get("params").patchValue(e.config)}updateTemplates(){this.templates=this.subscription.data[0].data[0][1].length?JSON.parse(this.subscription.data[0].data[0][1]):[],this.cd.detectChanges()}onDataUpdateError(e){const t=this.utils.parseException(e);let n=t.name;t.message&&(n+=": "+t.message),console.error(n)}static{this.ɵfac=function(e){return new(e||gW)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.UtilsService),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(_e.AttributeService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:gW,selectors:[["tb-gateway-service-rpc"]],inputs:{ctx:"ctx",dialogRef:"dialogRef"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:12,vars:14,consts:[["connectorForm",""],["updatedParameters",""],[1,"flex","flex-1","flex-col"],[1,"command-form","flex","flex-row","gap-2.5","lt-sm:flex-col",3,"formGroup"],[4,"ngIf","ngIfElse"],[1,"result-block",3,"formGroup"],["class","result-time flex flex-1 flex-row items-center justify-center",4,"ngIf"],["readonly","true","formControlName","result",3,"contentType"],["class","border",3,"rpcTemplates","ctx","connectorType","useTemplate",4,"ngIf"],["formControlName","command"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1"],["matInput","","formControlName","time","type","number","min","1"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"],["formControlName","params",3,"connectorType","sendCommand","saveTemplate",4,"ngIf","ngIfElse"],["formControlName","params",3,"sendCommand","saveTemplate","connectorType"],[1,"rpc-parameters","flex","flex-col"],[1,"mat-subtitle-1","tb-form-panel-title"],[3,"ngSwitch"],["formControlName","params",4,"ngSwitchCase"],[1,"fex-row","template-actions","flex","flex-1","items-center","justify-end","gap-2.5"],["mat-raised-button","",3,"click","disabled"],["formControlName","params"],[1,"result-time","flex","flex-1","flex-row","items-center","justify-center"],[1,"material-icons"],[1,"border",3,"useTemplate","rpcTemplates","ctx","connectorType"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",2)(1,"div",3),t.ɵɵtemplate(2,rW,16,12,"ng-container",4)(3,uW,3,2,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"section",5)(6,"span"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,mW,6,4,"div",6),t.ɵɵelementEnd(),t.ɵɵelement(10,"tb-json-content",7),t.ɵɵelementEnd()(),t.ɵɵtemplate(11,hW,1,3,"tb-gateway-service-rpc-connector-templates",8)),2&e){const e=t.ɵɵreference(4);t.ɵɵclassMap(t.ɵɵpureFunction1(12,tW,n.isConnector)),t.ɵɵadvance(),t.ɵɵproperty("formGroup",n.commandForm),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!n.isConnector)("ngIfElse",e),t.ɵɵadvance(3),t.ɵɵproperty("formGroup",n.commandForm),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(8,10,"gateway.rpc-command-result")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.resultTime),t.ɵɵadvance(),t.ɵɵproperty("contentType",n.contentTypes.JSON),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.isConnector)}},dependencies:t.ɵɵgetComponentDepsFactory(gW,[j,_,FH,qH,UH,ZH,eH,eW]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;overflow:auto;display:flex;flex-direction:row;padding:0 5px}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{height:100%;overflow:auto}[_nghost-%COMP%] > tb-gateway-service-rpc-connector-templates[_ngcontent-%COMP%]:last-child{margin-left:10px}[_nghost-%COMP%]   tb-gateway-service-rpc-connector-templates[_ngcontent-%COMP%]{flex:1 1 30%;max-width:30%}[_nghost-%COMP%]   .command-form[_ngcontent-%COMP%]{flex-wrap:nowrap;padding:0 5px 5px}[_nghost-%COMP%]   .command-form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .rpc-parameters[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .result-block[_ngcontent-%COMP%]{padding:0 5px;display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   .result-block[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:600;position:relative;font-size:14px;margin-bottom:10px}[_nghost-%COMP%]   .result-block[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .result-time[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:32px;position:absolute;left:0;top:25px;z-index:5;color:#0000008a}[_nghost-%COMP%]   .result-block[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .result-time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .result-block[_ngcontent-%COMP%]   tb-json-content[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .border[_ngcontent-%COMP%]{padding:16px;box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}']})}}function fW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.configuration-delete-dialog-input-required")," "))}e("GatewayServiceRPCComponent",gW);class yW extends A{constructor(e,t,n,a,i){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.gatewayName=this.data.gatewayName,this.gatewayControl=this.fb.control("")}close(){this.dialogRef.close()}turnOff(){this.dialogRef.close(!0)}static{this.ɵfac=function(e){return new(e||yW)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:yW,selectors:[["tb-gateway-remote-configuration-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:24,vars:14,consts:[["color","warn"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content","",1,"mat-content","flex-col",2,"max-width","600px"],[3,"innerHTML"],[1,"mat-block","tb-value-type",2,"flex-grow","0"],["matInput","","required","",3,"formControl"],[4,"ngIf"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","warn","type","button","cdkFocusInitial","",3,"click"],["mat-button","","color","warn","type","button",3,"click","disabled"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-toolbar",0)(1,"mat-icon"),t.ɵɵtext(2,"warning"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"h2",1),t.ɵɵtext(4,"gateway.configuration-delete-dialog-header"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",2),t.ɵɵelementStart(6,"button",3),t.ɵɵlistener("click",(function(){return n.close()})),t.ɵɵelementStart(7,"mat-icon",4),t.ɵɵtext(8,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(9,"div",5),t.ɵɵelement(10,"span",6),t.ɵɵpipe(11,"translate"),t.ɵɵelementStart(12,"mat-form-field",7)(13,"mat-label",1),t.ɵɵtext(14,"gateway.configuration-delete-dialog-input"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",8),t.ɵɵtemplate(16,fW,3,3,"mat-error",9),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"div",10)(18,"button",11),t.ɵɵlistener("click",(function(){return n.close()})),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"button",12),t.ɵɵlistener("click",(function(){return n.turnOff()})),t.ɵɵtext(22),t.ɵɵpipe(23,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(10),t.ɵɵpropertyInterpolate2("innerHTML","",t.ɵɵpipeBind1(11,8,"gateway.configuration-delete-dialog-body")," <b>",n.gatewayName,"</b>",t.ɵɵsanitizeHtml),t.ɵɵadvance(5),t.ɵɵproperty("formControl",n.gatewayControl),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayControl.hasError("required")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(20,10,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.gatewayControl.value!==n.gatewayName),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(23,12,"gateway.configuration-delete-dialog-confirm")," "))},dependencies:t.ɵɵgetComponentDepsFactory(yW,[j,_]),encapsulation:2})}}var vW;e("GatewayRemoteConfigurationDialogComponent",yW),function(e){e.tls="tls",e.accessToken="accessToken"}(vW||(vW={}));const bW="configuration_drafts",xW="RemoteLoggingLevel",wW=new Map([[vW.tls,"gateway.security-types.tls"],[vW.accessToken,"gateway.security-types.access-token"]]);var SW,CW;!function(e){e.none="NONE",e.critical="CRITICAL",e.error="ERROR",e.warning="WARNING",e.info="INFO",e.debug="DEBUG"}(SW||(SW={})),function(e){e.memory="memory",e.file="file"}(CW||(CW={}));const _W=new Map([[CW.memory,"gateway.storage-types.memory-storage"],[CW.file,"gateway.storage-types.file-storage"]]);var TW;!function(e){e.mqtt="MQTT",e.modbus="Modbus",e.opcua="OPC-UA",e.ble="BLE",e.request="Request",e.can="CAN",e.bacnet="BACnet",e.custom="Custom"}(TW||(TW={}));const IW={config:{},name:"",configType:null,enabled:!1};function EW(e){return JSON.stringify(e.value)===JSON.stringify({})?{validJSON:!0}:null}function MW(e){return e.replace("_","").replace("-","").replace(/^\s+|\s+/g,"").toLowerCase()+".json"}function kW(e,t){return'[loggers]}}keys=root, service, connector, converter, tb_connection, storage, extension}}[handlers]}}keys=consoleHandler, serviceHandler, connectorHandler, converterHandler, tb_connectionHandler, storageHandler, extensionHandler}}[formatters]}}keys=LogFormatter}}[logger_root]}}level=ERROR}}handlers=consoleHandler}}[logger_connector]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=connector}}[logger_storage]}}level={ERROR}}}handlers=storageHandler}}formatter=LogFormatter}}qualname=storage}}[logger_tb_connection]}}level={ERROR}}}handlers=tb_connectionHandler}}formatter=LogFormatter}}qualname=tb_connection}}[logger_service]}}level={ERROR}}}handlers=serviceHandler}}formatter=LogFormatter}}qualname=service}}[logger_converter]}}level={ERROR}}}handlers=converterHandler}}formatter=LogFormatter}}qualname=converter}}[logger_extension]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=extension}}[handler_consoleHandler]}}class=StreamHandler}}level={ERROR}}}formatter=LogFormatter}}args=(sys.stdout,)}}[handler_connectorHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}connector.log", "d", 1, 7,)}}[handler_storageHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}storage.log", "d", 1, 7,)}}[handler_serviceHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}service.log", "d", 1, 7,)}}[handler_converterHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}converter.log", "d", 1, 3,)}}[handler_extensionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}extension.log", "d", 1, 3,)}}[handler_tb_connectionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}tb_connection.log", "d", 1, 3,)}}[formatter_LogFormatter]}}format="%(asctime)s - %(levelname)s - [%(filename)s] - %(module)s - %(lineno)d - %(message)s" }}datefmt="%Y-%m-%d %H:%M:%S"'.replace(/{ERROR}/g,e).replace(/{.\/logs\/}/g,t)}function PW(e){return{id:e,entityType:L.DEVICE}}function DW(e){const t={};return Object.prototype.hasOwnProperty.call(e,"thingsboard")&&(t.host=e.thingsboard.host,t.port=e.thingsboard.port,t.remoteConfiguration=e.thingsboard.remoteConfiguration,Object.prototype.hasOwnProperty.call(e.thingsboard.security,vW.accessToken)?(t.securityType=vW.accessToken,t.accessToken=e.thingsboard.security.accessToken):(t.securityType=vW.tls,t.caCertPath=e.thingsboard.security.caCert,t.privateKeyPath=e.thingsboard.security.privateKey,t.certPath=e.thingsboard.security.cert)),Object.prototype.hasOwnProperty.call(e,"storage")&&Object.prototype.hasOwnProperty.call(e.storage,"type")&&(e.storage.type===CW.memory?(t.storageType=CW.memory,t.readRecordsCount=e.storage.read_records_count,t.maxRecordsCount=e.storage.max_records_count):e.storage.type===CW.file&&(t.storageType=CW.file,t.dataFolderPath=e.storage.data_folder_path,t.maxFilesCount=e.storage.max_file_count,t.readRecordsCount=e.storage.read_records_count,t.maxRecordsCount=e.storage.max_records_count)),t}function OW(e){const t={};for(const n of e)n.enabled||(t[n.name]={connector:n.configType,config:n.config});return t}function AW(e){const t={thingsboard:FW(e)};return function(e,t){for(const n of t)if(n.enabled){const t=n.configType;Array.isArray(e[t])||(e[t]=[]);const a={name:n.name,config:n.config};e[t].push(a)}}(t,e.connectors),t}function FW(e){let t;t=e.securityType===vW.accessToken?{accessToken:e.accessToken}:{caCert:e.caCertPath,privateKey:e.privateKeyPath,cert:e.certPath};const n={host:e.host,remoteConfiguration:e.remoteConfiguration,port:e.port,security:t};let a;a=e.storageType===CW.memory?{type:CW.memory,read_records_count:e.readRecordsCount,max_records_count:e.maxRecordsCount}:{type:CW.file,data_folder_path:e.dataFolderPath,max_file_count:e.maxFilesCount,max_read_records_count:e.readRecordsCount,max_records_per_file:e.maxRecordsCount};const i=[];for(const t of e.connectors)if(t.enabled){const e={configuration:MW(t.name),name:t.name,type:t.configType};i.push(e)}return{thingsboard:n,connectors:i,storage:a,logs:window.btoa(kW(e.remoteLoggingLevel,e.remoteLoggingPathToLogs))}}const RW=["formContainer"],BW=(e,t,n)=>({"gap-1.25":e,"flex-row":t,"flex-col":n}),NW=(e,t,n)=>({"gap-1.25":e,"flex-row justify-end item-center":t,"flex-col justify-evenly item-center":n});function LW(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",28),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.key),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,e.value.toString())," ")}}function VW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.thingsboard-host-required "),t.ɵɵelementEnd())}function qW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.thingsboard-port-required "),t.ɵɵelementEnd())}function GW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.thingsboard-port-min "),t.ɵɵelementEnd())}function zW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.thingsboard-port-max "),t.ɵɵelementEnd())}function UW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.thingsboard-port-pattern "),t.ɵɵelementEnd())}function jW(e,n){1&e&&(t.ɵɵelementStart(0,"div",16)(1,"mat-form-field")(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",30),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field")(7,"mat-label"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(10,"input",31),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field")(12,"mat-label"),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",32),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.tls-path-ca-certificate")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,5,"gateway.tls-path-private-key")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(14,7,"gateway.tls-path-client-certificate")))}function HW(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",28),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function WW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.path-logs-required "),t.ɵɵelementEnd())}function $W(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",28),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.key),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,e.value.toString())," ")}}function KW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-pack-size-required "),t.ɵɵelementEnd())}function YW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-pack-size-min "),t.ɵɵelementEnd())}function XW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-pack-size-pattern "),t.ɵɵelementEnd())}function ZW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-records-required "),t.ɵɵelementEnd())}function QW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-records-min "),t.ɵɵelementEnd())}function JW(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-records-pattern "),t.ɵɵelementEnd())}function e$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-files-required "),t.ɵɵelementEnd())}function t$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-files-min "),t.ɵɵelementEnd())}function n$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-max-files-pattern "),t.ɵɵelementEnd())}function a$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.storage-path-required "),t.ɵɵelementEnd())}function i$(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",5)(1,"mat-form-field",8)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",33),t.ɵɵtemplate(6,e$,2,0,"mat-error",10)(7,t$,2,0,"mat-error",10)(8,n$,2,0,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-form-field",8)(10,"mat-label"),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",34),t.ɵɵtemplate(14,a$,2,0,"mat-error",10),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵclassMap(t.ɵɵpureFunction3(12,BW,e.layoutGap,e.alignment,!e.alignment)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,8,"gateway.storage-max-files")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.gatewayConfigurationGroup.get("maxFilesCount").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.gatewayConfigurationGroup.get("maxFilesCount").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.gatewayConfigurationGroup.get("maxFilesCount").hasError("pattern")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(12,10,"gateway.storage-path")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.gatewayConfigurationGroup.get("dataFolderPath").hasError("required"))}}function r$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",28),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function o$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.connector-type-required "),t.ɵɵelementEnd())}function s$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error",29),t.ɵɵtext(1," gateway.connector-name-required "),t.ɵɵelementEnd())}function l$(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"section",35)(1,"div",36)(2,"div",37),t.ɵɵelement(3,"mat-slide-toggle",38),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",39)(5,"mat-form-field",8)(6,"mat-label"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-select",40),t.ɵɵlistener("selectionChange",(function(){const n=t.ɵɵrestoreView(e).$implicit,a=t.ɵɵnextContext();return t.ɵɵresetView(a.changeConnectorType(n))})),t.ɵɵtemplate(10,r$,2,2,"mat-option",7),t.ɵɵelementEnd(),t.ɵɵtemplate(11,o$,2,0,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",8)(13,"mat-label"),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"input",41),t.ɵɵlistener("blur",(function(){const n=t.ɵɵrestoreView(e),a=n.$implicit,i=n.index,r=t.ɵɵnextContext();return t.ɵɵresetView(r.changeConnectorName(a,i))})),t.ɵɵelementEnd(),t.ɵɵtemplate(17,s$,2,0,"mat-error",10),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",42)(19,"button",43),t.ɵɵpipe(20,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e),i=a.$implicit,r=a.index,o=t.ɵɵnextContext();return t.ɵɵresetView(o.openConfigDialog(n,r,i.get("config").value,i.get("name").value))})),t.ɵɵelementStart(21,"mat-icon"),t.ɵɵtext(22,"more_horiz"),t.ɵɵelementEnd()(),t.ɵɵelementStart(23,"button",43),t.ɵɵpipe(24,"translate"),t.ɵɵlistener("click",(function(){const n=t.ɵɵrestoreView(e).index,a=t.ɵɵnextContext();return t.ɵɵresetView(a.removeConnector(n))})),t.ɵɵelementStart(25,"mat-icon"),t.ɵɵtext(26,"close"),t.ɵɵelementEnd()()()()()}if(2&e){const e=n.$implicit,a=n.index,i=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("formGroupName",a),t.ɵɵadvance(3),t.ɵɵclassMap(t.ɵɵpureFunction3(24,BW,i.layoutGap,i.alignment,!i.alignment)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,16,"gateway.connector-type")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",i.connectorTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.get("configType").hasError("required")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,18,"gateway.connector-name")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.get("name").hasError("required")),t.ɵɵadvance(),t.ɵɵclassMap(t.ɵɵpureFunction3(28,NW,i.layoutGap,i.alignment,!i.alignment)),t.ɵɵadvance(),t.ɵɵclassProp("mat-warn",e.get("config").invalid),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(20,20,"gateway.update-config")),t.ɵɵproperty("disabled",i.isReadOnlyForm),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(24,22,"gateway.delete")),t.ɵɵproperty("disabled",i.isReadOnlyForm)}}function p$(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",44),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.exportConfig())})),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,3,"gateway.download-tip")),t.ɵɵproperty("disabled",!e.gatewayConfigurationGroup.dirty||e.gatewayConfigurationGroup.invalid),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,5,"action.download")," ")}}function c$(e,n){if(1&e&&(t.ɵɵelementStart(0,"button",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,3,"gateway.save-tip")),t.ɵɵproperty("disabled",!e.gatewayConfigurationGroup.dirty||e.gatewayConfigurationGroup.invalid),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,5,"action.save")," ")}}class d$ extends q{constructor(e,t,n,a,i,r,o,s,l,p,c){super(e),this.store=e,this.elementRef=t,this.utils=n,this.ngZone=a,this.fb=i,this.window=r,this.dialog=o,this.translate=s,this.deviceService=l,this.attributeService=p,this.importExport=c,this.alignment=!0,this.layoutGap=!0,this.securityTypes=wW,this.gatewayLogLevels=Object.keys(SW).map((e=>SW[e])),this.connectorTypes=Object.keys(TW),this.storageTypes=_W,this.toastTargetId="gateway-configuration-widget"+this.utils.guid(),this.isReadOnlyForm=!1}get connectors(){return this.gatewayConfigurationGroup.get("connectors")}ngOnInit(){this.initWidgetSettings(this.ctx.settings),this.ctx.datasources&&this.ctx.datasources.length&&(this.deviceNameForm=this.ctx.datasources[0].name),this.buildForm(),this.ctx.updateWidgetParams(),this.formResize$=new ResizeObserver((()=>{this.resize()})),this.formResize$.observe(this.formContainerRef.nativeElement)}ngOnDestroy(){this.formResize$&&this.formResize$.disconnect(),this.subscribeGateway$.unsubscribe(),this.subscribeStorageType$.unsubscribe()}initWidgetSettings(e){let t;t=e.gatewayTitle&&e.gatewayTitle.length?this.utils.customTranslation(e.gatewayTitle,e.gatewayTitle):this.translate.instant("gateway.gateway"),this.ctx.widgetTitle=t,this.isReadOnlyForm=!!e.readOnly&&e.readOnly,this.archiveFileName=e.archiveFileName?.length?e.archiveFileName:"gatewayConfiguration",this.gatewayType=e.gatewayType?.length?e.gatewayType:"Gateway",this.gatewayNameExists=this.utils.customTranslation(e.gatewayNameExists,e.gatewayNameExists)||this.translate.instant("gateway.gateway-exists"),this.successfulSaved=this.utils.customTranslation(e.successfulSave,e.successfulSave)||this.translate.instant("gateway.gateway-saved"),this.updateWidgetDisplaying()}resize(){this.ngZone.run((()=>{this.updateWidgetDisplaying(),this.ctx.detectChanges()}))}updateWidgetDisplaying(){this.ctx.$container&&this.ctx.$container[0].offsetWidth<=425?(this.layoutGap=!1,this.alignment=!1):(this.layoutGap=!0,this.alignment=!0)}saveAttribute(e,t,n){const a=this.gatewayConfigurationGroup.get("gateway").value,i={key:e,value:t};return this.attributeService.saveEntityAttributes(PW(a),n,[i])}createConnector(e=IW){this.connectors.push(this.fb.group({enabled:[e.enabled],configType:[e.configType,[$.required]],name:[e.name,[$.required]],config:[e.config,[$.nullValidator,EW]]}))}getFormField(e){return this.gatewayConfigurationGroup.get(e)}buildForm(){this.gatewayConfigurationGroup=this.fb.group({gateway:[null,[]],accessToken:[null,[$.required]],securityType:[vW.accessToken],host:[this.window.location.hostname,[$.required]],port:[1883,[$.required,$.min(1),$.max(65535),$.pattern(/^-?[0-9]+$/)]],remoteConfiguration:[!0],caCertPath:["/etc/thingsboard-gateway/ca.pem"],privateKeyPath:["/etc/thingsboard-gateway/privateKey.pem"],certPath:["/etc/thingsboard-gateway/certificate.pem"],remoteLoggingLevel:[SW.debug],remoteLoggingPathToLogs:["./logs/",[$.required]],storageType:[CW.memory],readRecordsCount:[100,[$.required,$.min(1),$.pattern(/^-?[0-9]+$/)]],maxRecordsCount:[1e4,[$.required,$.min(1),$.pattern(/^-?[0-9]+$/)]],maxFilesCount:[5,[$.required,$.min(1),$.pattern(/^-?[0-9]+$/)]],dataFolderPath:["./data/",[$.required]],connectors:this.fb.array([])}),this.isReadOnlyForm&&this.gatewayConfigurationGroup.disable({emitEvent:!1}),this.subscribeStorageType$=this.getFormField("storageType").valueChanges.subscribe((e=>{e===CW.memory?(this.getFormField("maxFilesCount").disable(),this.getFormField("dataFolderPath").disable()):(this.getFormField("maxFilesCount").enable(),this.getFormField("dataFolderPath").enable())})),this.subscribeGateway$=this.getFormField("gateway").valueChanges.subscribe((e=>{null!==e?oe([this.deviceService.getDeviceCredentials(e).pipe(me((e=>{this.getFormField("accessToken").patchValue(e.credentialsId)}))),...this.getAttributes(e)]).subscribe((()=>{this.gatewayConfigurationGroup.markAsPristine(),this.ctx.detectChanges()})):this.getFormField("accessToken").patchValue("")}))}gatewayExist(){this.ctx.showErrorToast(this.gatewayNameExists,"top","left",this.toastTargetId)}exportConfig(){const e=this.gatewayConfigurationGroup.value,t={};var n,a,i;t["tb_gateway.yaml"]=function(e){let t;t="thingsboard:\n",t+="  host: "+e.host+"\n",t+="  remoteConfiguration: "+e.remoteConfiguration+"\n",t+="  port: "+e.port+"\n",t+="  security:\n",e.securityType===vW.accessToken?t+="    access-token: "+e.accessToken+"\n":(t+="    ca_cert: "+e.caCertPath+"\n",t+="    privateKey: "+e.privateKeyPath+"\n",t+="    cert: "+e.certPath+"\n"),t+="storage:\n",e.storageType===CW.memory?(t+="  type: memory\n",t+="  read_records_count: "+e.readRecordsCount+"\n",t+="  max_records_count: "+e.maxRecordsCount+"\n"):(t+="  type: file\n",t+="  data_folder_path: "+e.dataFolderPath+"\n",t+="  max_file_count: "+e.maxFilesCount+"\n",t+="  max_read_records_count: "+e.readRecordsCount+"\n",t+="  max_records_per_file: "+e.maxRecordsCount+"\n"),t+="connectors:\n";for(const n of e.connectors)n.enabled&&(t+="  -\n",t+="    name: "+n.name+"\n",t+="    type: "+n.configType+"\n",t+="    configuration: "+MW(n.name)+"\n");return t}(e),function(e,t){for(const n of t)n.enabled&&(e[MW(n.name)]=JSON.stringify(n.config))}(t,e.connectors),n=t,a=e.remoteLoggingLevel,i=e.remoteLoggingPathToLogs,n["logs.conf"]=kW(a,i),this.importExport.exportJSZip(t,this.archiveFileName),this.saveAttribute(xW,this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),D.SHARED_SCOPE)}addNewConnector(){this.createConnector()}removeConnector(e){e>-1&&(this.connectors.removeAt(e),this.connectors.markAsDirty())}openConfigDialog(e,t,n,a){e&&(e.stopPropagation(),e.preventDefault()),this.dialog.open(tt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{jsonValue:n,required:!0,title:this.translate.instant("gateway.title-connectors-json",{typeName:a})}}).afterClosed().subscribe((e=>{e&&(this.connectors.at(t).get("config").patchValue(e),this.ctx.detectChanges())}))}createConnectorName(e,t,n=0){const a=n?t+n:t;return-1===e.findIndex((e=>e.name===a))?a:this.createConnectorName(e,t,++n)}validateConnectorName(e,t,n,a=0){for(let i=0;i<e.length;i++){const r=0===a?t:t+a;i!==n&&e[i].name===r&&this.validateConnectorName(e,t,n,++a)}return 0===a?t:t+a}changeConnectorType(e){if(!e.get("name").value){const t=e.get("configType").value,n=this.gatewayConfigurationGroup.value.connectors;e.get("name").patchValue(this.createConnectorName(n,TW[t]))}}changeConnectorName(e,t){const n=this.gatewayConfigurationGroup.value.connectors;e.get("name").patchValue(this.validateConnectorName(n,e.get("name").value,t))}save(){const e=this.gatewayConfigurationGroup.value;oe([this.saveAttribute("configuration",window.btoa(JSON.stringify(AW(e))),D.SHARED_SCOPE),this.saveAttribute(bW,window.btoa(JSON.stringify(OW(e.connectors))),D.SERVER_SCOPE),this.saveAttribute(xW,this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),D.SHARED_SCOPE)]).subscribe((()=>{this.ctx.showSuccessToast(this.successfulSaved,2e3,"top","left",this.toastTargetId),this.gatewayConfigurationGroup.markAsPristine()}))}getAttributes(e){const t=[];return t.push(oe([this.getAttribute("current_configuration",D.CLIENT_SCOPE,e),this.getAttribute(bW,D.SERVER_SCOPE,e)]).pipe(me((([e,t])=>{this.setFormGatewaySettings(e),this.setFormConnectorsDraft(t),this.isReadOnlyForm&&this.gatewayConfigurationGroup.disable({emitEvent:!1})})))),t.push(this.getAttribute(xW,D.SHARED_SCOPE,e).pipe(me((e=>this.processLoggingLevel(e))))),t}getAttribute(e,t,n){return this.attributeService.getEntityAttributes(PW(n),t,[e])}setFormGatewaySettings(e){if(this.connectors.clear(),e.length>0){const t=JSON.parse(window.atob(e[0].value));for(const e of Object.keys(t)){const n=t[e];if("thingsboard"===e)null!==n&&Object.keys(n).length>0&&this.gatewayConfigurationGroup.patchValue(DW(n));else for(const t of Object.keys(n)){let a="No name";Object.prototype.hasOwnProperty.call(n[t],"name")&&(a=n[t].name);const i={enabled:!0,configType:e,config:n[t].config,name:a};this.createConnector(i)}}}}setFormConnectorsDraft(e){if(e.length>0){const t=JSON.parse(window.atob(e[0].value));for(const e of Object.keys(t)){const n={enabled:!1,configType:t[e].connector,config:t[e].config,name:e};this.createConnector(n)}}}processLoggingLevel(e){let t=SW.debug;e.length>0&&SW[e[0].value.toLowerCase()]&&(t=SW[e[0].value.toLowerCase()]),this.getFormField("remoteLoggingLevel").patchValue(t)}static{this.ɵfac=function(e){return new(e||d$)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(_e.UtilsService),t.ɵɵdirectiveInject(t.NgZone),t.ɵɵdirectiveInject(H.UntypedFormBuilder),t.ɵɵdirectiveInject(Ce),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(_e.DeviceService),t.ɵɵdirectiveInject(_e.AttributeService),t.ɵɵdirectiveInject(nt.ImportExportService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:d$,selectors:[["tb-gateway-form"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(RW,7),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.formContainerRef=e.first)}},inputs:{ctx:"ctx",isStateForm:"isStateForm"},standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:104,vars:104,consts:[["formContainer",""],["tb-toast","",1,"gateway-form",3,"ngSubmit","formGroup","toastTarget"],["multi","true",1,"mat-body-2"],[1,"tb-panel-title"],["formControlName","gateway","required","",3,"gatewayNameExist","deviceName","isStateForm","newGatewayType"],[1,"flex"],["formControlName","securityType"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1"],["matInput","","type","text","formControlName","host"],["translate","",4,"ngIf"],["matInput","","type","number","formControlName","port"],["class","flex flex-col",4,"ngIf"],["formControlName","remoteConfiguration"],["formControlName","remoteLoggingLevel"],["matInput","","type","text","formControlName","remoteLoggingPathToLogs"],[1,"flex","flex-col"],["formControlName","storageType"],["matInput","","type","number","formControlName","readRecordsCount"],["matInput","","type","number","formControlName","maxRecordsCount"],["class","flex",3,"class",4,"ngIf"],[1,"gateway-config","flex","flex-col"],["formArrayName","connectors",4,"ngFor","ngForOf"],[1,"no-data-found","items-center","justify-center"],["mat-raised-button","","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"form-action-buttons","flex","flex-row","items-center","justify-end"],["mat-raised-button","","color","primary","type","button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled","matTooltip",4,"ngIf"],[3,"value"],["translate",""],["matInput","","type","text","formControlName","caCertPath"],["matInput","","type","text","formControlName","privateKeyPath"],["matInput","","type","text","formControlName","certPath"],["matInput","","type","number","formControlName","maxFilesCount"],["matInput","","type","text","formControlName","dataFolderPath"],["formArrayName","connectors"],[1,"flex","flex-row","items-stretch","justify-between","gap-2",3,"formGroupName"],[1,"flex","flex-col","justify-center"],["formControlName","enabled"],[1,"flex-full","flex"],["formControlName","configType",3,"selectionChange"],["matInput","","type","text","formControlName","name",3,"blur"],[1,"action-buttons","flex"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-raised-button","","color","primary","type","button",3,"click","disabled","matTooltip"],["mat-raised-button","","color","primary","type","submit",3,"disabled","matTooltip"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"form",1,0),t.ɵɵlistener("ngSubmit",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.save())})),t.ɵɵelementStart(2,"mat-accordion",2)(3,"mat-expansion-panel")(4,"mat-expansion-panel-header")(5,"mat-panel-title")(6,"div",3),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵpipe(9,"uppercase"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"tb-entity-gateway-select",4),t.ɵɵlistener("gatewayNameExist",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.gatewayExist())})),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field",5)(12,"mat-label"),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"mat-select",6),t.ɵɵtemplate(16,LW,3,4,"mat-option",7),t.ɵɵpipe(17,"keyvalue"),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",5)(19,"mat-form-field",8)(20,"mat-label"),t.ɵɵtext(21),t.ɵɵpipe(22,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(23,"input",9),t.ɵɵtemplate(24,VW,2,0,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"mat-form-field",8)(26,"mat-label"),t.ɵɵtext(27),t.ɵɵpipe(28,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(29,"input",11),t.ɵɵtemplate(30,qW,2,0,"mat-error",10)(31,GW,2,0,"mat-error",10)(32,zW,2,0,"mat-error",10)(33,UW,2,0,"mat-error",10),t.ɵɵelementEnd()(),t.ɵɵtemplate(34,jW,16,9,"div",12),t.ɵɵelementStart(35,"mat-checkbox",13),t.ɵɵtext(36),t.ɵɵpipe(37,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(38,"div",5)(39,"mat-form-field",8)(40,"mat-label"),t.ɵɵtext(41),t.ɵɵpipe(42,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(43,"mat-select",14),t.ɵɵtemplate(44,HW,2,2,"mat-option",7),t.ɵɵelementEnd()(),t.ɵɵelementStart(45,"mat-form-field",8)(46,"mat-label"),t.ɵɵtext(47),t.ɵɵpipe(48,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(49,"input",15),t.ɵɵtemplate(50,WW,2,0,"mat-error",10),t.ɵɵelementEnd()()(),t.ɵɵelementStart(51,"mat-expansion-panel")(52,"mat-expansion-panel-header")(53,"mat-panel-title")(54,"div",3),t.ɵɵtext(55),t.ɵɵpipe(56,"translate"),t.ɵɵpipe(57,"uppercase"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(58,"div",16)(59,"mat-form-field")(60,"mat-label"),t.ɵɵtext(61),t.ɵɵpipe(62,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(63,"mat-select",17),t.ɵɵtemplate(64,$W,3,4,"mat-option",7),t.ɵɵpipe(65,"keyvalue"),t.ɵɵelementEnd()(),t.ɵɵelementStart(66,"div",5)(67,"mat-form-field",8)(68,"mat-label"),t.ɵɵtext(69),t.ɵɵpipe(70,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(71,"input",18),t.ɵɵtemplate(72,KW,2,0,"mat-error",10)(73,YW,2,0,"mat-error",10)(74,XW,2,0,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(75,"mat-form-field",8)(76,"mat-label"),t.ɵɵtext(77),t.ɵɵpipe(78,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(79,"input",19),t.ɵɵtemplate(80,ZW,2,0,"mat-error",10)(81,QW,2,0,"mat-error",10)(82,JW,2,0,"mat-error",10),t.ɵɵelementEnd()(),t.ɵɵtemplate(83,i$,15,16,"div",20),t.ɵɵelementEnd()(),t.ɵɵelementStart(84,"mat-expansion-panel")(85,"mat-expansion-panel-header")(86,"mat-panel-title")(87,"div",3),t.ɵɵtext(88),t.ɵɵpipe(89,"translate"),t.ɵɵpipe(90,"uppercase"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(91,"div",21),t.ɵɵtemplate(92,l$,27,32,"section",22),t.ɵɵelementStart(93,"span",23),t.ɵɵtext(94),t.ɵɵpipe(95,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(96,"div")(97,"button",24),t.ɵɵpipe(98,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.addNewConnector())})),t.ɵɵtext(99),t.ɵɵpipe(100,"translate"),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(101,"section",25),t.ɵɵtemplate(102,p$,4,7,"button",26)(103,c$,4,7,"button",27),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("toastTarget",n.toastTargetId),t.ɵɵproperty("formGroup",n.gatewayConfigurationGroup),t.ɵɵadvance(7),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(9,54,t.ɵɵpipeBind1(8,52,"gateway.thingsboard"))),t.ɵɵadvance(3),t.ɵɵproperty("deviceName",n.deviceNameForm)("isStateForm",n.isStateForm)("newGatewayType",n.gatewayType),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(14,56,"gateway.security-type")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(17,58,n.securityTypes)),t.ɵɵadvance(2),t.ɵɵclassMap(t.ɵɵpureFunction3(92,BW,n.layoutGap,n.alignment,!n.alignment)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(22,60,"gateway.thingsboard-host")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("host").hasError("required")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(28,62,"gateway.thingsboard-port")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("port").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("port").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("port").hasError("max")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("port").hasError("pattern")),t.ɵɵadvance(),t.ɵɵproperty("ngIf","tls"===n.gatewayConfigurationGroup.get("securityType").value),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(37,64,"gateway.remote")),t.ɵɵadvance(2),t.ɵɵclassMap(t.ɵɵpureFunction3(96,BW,n.layoutGap,n.alignment,!n.alignment)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(42,66,"gateway.remote-logging-level")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.gatewayLogLevels),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(48,68,"gateway.path-logs")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("remoteLoggingPathToLogs").hasError("required")),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(57,72,t.ɵɵpipeBind1(56,70,"gateway.storage"))),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(62,74,"gateway.storage-type")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(65,76,n.storageTypes)),t.ɵɵadvance(2),t.ɵɵclassMap(t.ɵɵpureFunction3(100,BW,n.layoutGap,n.alignment,!n.alignment)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(70,78,"gateway.storage-pack-size")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("readRecordsCount").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("readRecordsCount").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("readRecordsCount").hasError("pattern")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(78,80,"file"!==n.gatewayConfigurationGroup.get("storageType").value?"gateway.storage-max-records":"gateway.storage-max-file-records")," "),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("maxRecordsCount").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("maxRecordsCount").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("maxRecordsCount").hasError("pattern")),t.ɵɵadvance(),t.ɵɵproperty("ngIf","file"===n.gatewayConfigurationGroup.get("storageType").value),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(90,84,t.ɵɵpipeBind1(89,82,"gateway.connectors-config"))),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.connectors.controls),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.connectors.length),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(95,86,"gateway.no-connectors")),t.ɵɵadvance(3),t.ɵɵclassProp("!hidden",n.isReadOnlyForm),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(98,88,"gateway.connector-add")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(100,90,"action.add")," "),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.isReadOnlyForm),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!n.gatewayConfigurationGroup.get("remoteConfiguration").value),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.gatewayConfigurationGroup.get("remoteConfiguration").value))},dependencies:t.ɵɵgetComponentDepsFactory(d$,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]{height:100%;padding:5px;background-color:transparent;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .form-action-buttons[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .gateway-config[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{position:relative;display:flex;height:40px}']})}}e("GatewayFormComponent",d$);class u${transform(e,t){return Yi.parseVersion(e)>=Yi.parseVersion(Ea.get(t))}static{this.ɵfac=function(e){return new(e||u$)}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"isLatestVersionConfig",type:u$,pure:!0,standalone:!0})}}class m${constructor(e){this.translate=e}transform(e){return e.hasError("required")?this.translate.instant("gateway.port-required"):e.hasError("min")||e.hasError("max")?this.translate.instant("gateway.port-limits-error",{min:Ia.MIN,max:Ia.MAX}):""}static{this.ɵfac=function(e){return new(e||m$)(t.ɵɵdirectiveInject(He.TranslateService,16))}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"getGatewayPortTooltip",type:m$,pure:!0,standalone:!0})}}class h${transform(e,t,n,a){switch(e){case ct.OPCUA:return this.getOpcConnectorHelpLink(t,n);case ct.MQTT:return this.getMqttConnectorHelpLink(t,n,a);case ct.BACNET:return this.getBacnetConnectorHelpLink(t,n);case ct.REST:return this.getRestConnectorHelpLink(n)}}getOpcConnectorHelpLink(e,t){if(t!==Ma.CONST)return`widget/lib/gateway/${e}-${t}_fn`}getMqttConnectorHelpLink(e,t,n){if(t!==ea.CONST)return n?e!==Na.ATTRIBUTES&&e!==Na.TIMESERIES||n!==Jn.JSON?`widget/lib/gateway/mqtt-${n}-expression_fn`:"widget/lib/gateway/mqtt-json-key-expression_fn":"widget/lib/gateway/mqtt-expression_fn"}getBacnetConnectorHelpLink(e,t){if(t!==Ma.CONST)return`widget/lib/gateway/bacnet-device-${e}-${t}_fn`}getRestConnectorHelpLink(e){if(e!==fa.CONST)return"widget/lib/gateway/rest-json_fn"}static{this.ɵfac=function(e){return new(e||h$)}}static{this.ɵpipe=t.ɵɵdefinePipe({name:"getConnectorMappingHelpLink",type:h$,pure:!0,standalone:!0})}}function g$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",a.gatewayConnectorDefaultTypesTranslatesMap.get(e)," ")}}function f$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",22),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.connectorForm.get("name").hasError("duplicateName")?"gateway.connector-duplicate-name":"gateway.name-required"))}}function y$(e,n){1&e&&(t.ɵɵelementStart(0,"div",8)(1,"div",9),t.ɵɵtext(2,"gateway.connectors-table-class"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",10),t.ɵɵelement(4,"input",23),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,1,"gateway.set")))}function v$(e,n){1&e&&(t.ɵɵelementStart(0,"div",8)(1,"div",9),t.ɵɵtext(2,"gateway.connectors-table-key"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",10),t.ɵɵelement(4,"input",24),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,1,"gateway.set")))}function b$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function x$(e,n){1&e&&(t.ɵɵelementStart(0,"div",8)(1,"mat-slide-toggle",25)(2,"mat-label",26),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,2,"gateway.fill-connector-defaults-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,4,"gateway.fill-connector-defaults")," "))}function w$(e,n){1&e&&(t.ɵɵelementStart(0,"div",8)(1,"mat-slide-toggle",27)(2,"mat-label",26),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,2,"gateway.send-change-data-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,4,"gateway.send-change-data")," "))}class S$ extends A{constructor(e,t,n,a,i,r){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.isLatestVersionConfig=r,this.connectorType=ct,this.gatewayConnectorDefaultTypesTranslatesMap=dt,this.gatewayLogLevel=Object.values(lt),this.submitted=!1,this.destroy$=new te,this.updateConnectorTypesByVersion(),this.connectorForm=this.fb.group({type:[ct.MQTT,[]],name:["",[$.required,this.uniqNameRequired(),$.pattern(an)]],logLevel:[lt.INFO,[]],useDefaults:[!0,[]],sendDataOnlyOnChange:[!1,[]],class:["",[]],key:["auto",[]]})}ngOnInit(){this.observeTypeChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),super.ngOnDestroy()}helpLinkId(){return O+"/docs/iot-gateway/configuration/"}cancel(){this.dialogRef.close(null)}add(){this.submitted=!0;const e=this.connectorForm.getRawValue();if(e.useDefaults){const t=Ht(e.type),n=this.data.gatewayVersion;n&&(e.configVersion=n),e.configurationJson=(this.isLatestVersionConfig.transform(n,e.type)?t[Ea.get(e.type)]:t[pt.Legacy])??t,this.connectorForm.valid&&this.dialogRef.close(e)}else this.connectorForm.valid&&this.dialogRef.close(e)}uniqNameRequired(){return e=>{const t=e.value.trim().toLowerCase();return this.data.dataSourceData.some((({value:{name:e}})=>e.toLowerCase()===t))?{duplicateName:{valid:!1}}:null}}updateConnectorTypesByVersion(){const e=ut.keys();for(let t of e)if(t===pt.Legacy||Yi.parseVersion(this.data.gatewayVersion)>=Yi.parseVersion(t)){this.connectorTypes=ut.get(t);break}}observeTypeChange(){this.connectorForm.get("type").valueChanges.pipe(me((e=>{const t=this.connectorForm.get("useDefaults");e===ct.GRPC||e===ct.CUSTOM?t.setValue(!1):t.value||t.setValue(!0)})),le(this.destroy$)).subscribe()}static{this.ɵfac=function(e){return new(e||S$)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(u$))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:S$,selectors:[["tb-add-connector-dialog"]],standalone:!0,features:[t.ɵɵProvidersFeature([u$]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:43,vars:25,consts:[[1,"add-connector",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","autocomplete","off","name","value","formControlName","name",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["class","tb-form-row column-xs",4,"ngIf"],["formControlName","logLevel"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","name","value","formControlName","class",3,"placeholder"],["matInput","","name","value","formControlName","key",3,"placeholder"],["formControlName","useDefaults",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","sendDataOnlyOnChange",1,"mat-slide"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"mat-toolbar",1)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",2)(6,"div",3),t.ɵɵelementStart(7,"button",4),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",5),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9),t.ɵɵtext(14,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"mat-form-field",10)(16,"mat-select",11),t.ɵɵtemplate(17,g$,2,2,"mat-option",12),t.ɵɵelementEnd()()(),t.ɵɵelementStart(18,"div",8)(19,"div",13),t.ɵɵtext(20,"gateway.name"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",10),t.ɵɵelement(22,"input",14),t.ɵɵpipe(23,"translate"),t.ɵɵtemplate(24,f$,3,3,"mat-icon",15),t.ɵɵelementEnd()(),t.ɵɵtemplate(25,y$,6,3,"div",16)(26,v$,6,3,"div",16),t.ɵɵelementStart(27,"div",8)(28,"div",9),t.ɵɵtext(29,"gateway.remote-logging-level"),t.ɵɵelementEnd(),t.ɵɵelementStart(30,"mat-form-field",10)(31,"mat-select",17),t.ɵɵtemplate(32,b$,2,2,"mat-option",12),t.ɵɵelementEnd()()(),t.ɵɵtemplate(33,x$,6,6,"div",16)(34,w$,6,6,"div",16),t.ɵɵpipe(35,"withReportStrategy"),t.ɵɵelementEnd()(),t.ɵɵelementStart(36,"div",18)(37,"button",19),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(38),t.ɵɵpipe(39,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(40,"button",20),t.ɵɵlistener("click",(function(){return n.add()})),t.ɵɵtext(41),t.ɵɵpipe(42,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.connectorForm),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,14,"gateway.add-connector")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.helpLinkId()),t.ɵɵadvance(11),t.ɵɵproperty("ngForOf",n.connectorTypes),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(23,16,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.connectorForm.get("name").hasError("required")&&n.connectorForm.get("name").touched||n.connectorForm.get("name").hasError("duplicateName")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.connectorForm.get("type").value===n.connectorType.CUSTOM),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.connectorForm.get("type").value===n.connectorType.GRPC),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.gatewayLogLevel),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.connectorForm.get("type").value!==n.connectorType.GRPC&&n.connectorForm.get("type").value!==n.connectorType.CUSTOM),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.connectorForm.get("type").value===n.connectorType.MQTT&&!t.ɵɵpipeBind2(35,18,n.data.gatewayVersion,n.connectorType.MQTT)),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(39,21,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.connectorForm.invalid||!n.connectorForm.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(42,23,"action.add")," "))},dependencies:t.ɵɵgetComponentDepsFactory(S$,[j,_,nr]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .add-connector[_ngcontent-%COMP%]{min-width:400px;width:500px}']})}}e("AddConnectorDialogComponent",S$);const C$=()=>({maxWidth:"970px"});function _$(e,n){1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵtext(1,"gateway.device-info.source"),t.ɵɵelementEnd())}function T$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SourceTypeTranslationsMap.get(e))," ")}}function I$(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"mat-form-field",18)(2,"mat-select",19),t.ɵɵtemplate(3,T$,3,4,"mat-option",20),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.sourceTypes)}}function E$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",22),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-info.device-name-expression-required"))}function M$(e,n){if(1&e&&(t.ɵɵelement(0,"div",23),t.ɵɵpipe(1,"getConnectorMappingHelpLink")),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("tb-help-popup",t.ɵɵpipeBind4(1,2,e.connectorType,"name-field",e.mappingFormGroup.get("deviceNameExpressionSource").value,e.convertorType))("tb-help-popup-style",t.ɵɵpureFunction0(7,C$))}}function k$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SourceTypeTranslationsMap.get(e))," ")}}function P$(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"mat-form-field",18)(2,"mat-select",26),t.ɵɵtemplate(3,k$,3,4,"mat-option",20),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",e.sourceTypes)}}function D$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",22),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-info.device-profile-expression-required"))}function O$(e,n){if(1&e&&(t.ɵɵelement(0,"div",23),t.ɵɵpipe(1,"getConnectorMappingHelpLink")),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("tb-help-popup",t.ɵɵpipeBind4(1,2,e.connectorType,"profile-name",e.mappingFormGroup.get("deviceProfileExpressionSource").value,e.convertorType))("tb-help-popup-style",t.ɵɵpureFunction0(7,C$))}}function A$(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",24)(1,"div",9),t.ɵɵtext(2,"gateway.device-info.profile-name"),t.ɵɵelementEnd(),t.ɵɵtemplate(3,P$,4,1,"div",10),t.ɵɵelementStart(4,"div",11)(5,"mat-form-field",12),t.ɵɵelement(6,"input",25),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,D$,3,3,"mat-icon",14)(9,O$,2,8,"div",15),t.ɵɵpipe(10,"getConnectorMappingHelpLink"),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵproperty("ngIf",e.useSource),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,4,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingFormGroup.get("deviceProfileExpression").hasError("required")&&e.mappingFormGroup.get("deviceProfileExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind4(10,6,e.connectorType,"profile-name",e.mappingFormGroup.get("deviceProfileExpressionSource").value,e.convertorType))}}class F$ extends q{get deviceInfoType(){return this.deviceInfoTypeValue}set deviceInfoType(e){this.deviceInfoTypeValue!==e&&(this.deviceInfoTypeValue=e)}constructor(e,t,n,a){super(e),this.store=e,this.translate=t,this.dialog=n,this.fb=a,this.SourceTypeTranslationsMap=Ba,this.DeviceInfoType=gi,this.useSource=!0,this.required=!1,this.connectorType=ct.MQTT,this.sourceTypes=Object.values(ea),this.destroy$=new te,this.propagateChange=e=>{}}ngOnInit(){this.mappingFormGroup=this.fb.group({deviceNameExpression:["",this.required?[$.required,$.pattern(an)]:[$.pattern(an)]]}),this.useSource&&this.mappingFormGroup.addControl("deviceNameExpressionSource",this.fb.control(this.sourceTypes[0],[])),this.deviceInfoType===gi.FULL&&(this.useSource&&this.mappingFormGroup.addControl("deviceProfileExpressionSource",this.fb.control(this.sourceTypes[0],[])),this.mappingFormGroup.addControl("deviceProfileExpression",this.fb.control("",this.required?[$.required,$.pattern(an)]:[$.pattern(an)]))),this.mappingFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateView(e)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),super.ngOnDestroy()}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}writeValue(e){this.mappingFormGroup.patchValue(e,{emitEvent:!1})}validate(){return this.mappingFormGroup.valid?null:{mappingForm:{valid:!1}}}updateView(e){this.propagateChange(e)}static{this.ɵfac=function(e){return new(e||F$)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:F$,selectors:[["tb-device-info-table"]],inputs:{useSource:"useSource",required:"required",connectorType:"connectorType",convertorType:"convertorType",sourceTypes:"sourceTypes",deviceInfoType:"deviceInfoType"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>F$)),multi:!0},{provide:K,useExisting:c((()=>F$)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:23,vars:18,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-table","no-padding","no-gap"],[1,"tb-form-table-header"],["translate","",1,"tb-form-table-header-cell","w-1/5"],["class","tb-form-table-header-cell w-1/5","translate","",4,"ngIf"],["translate","",1,"tb-form-table-header-cell","w-1/2"],[1,"tb-form-table-body","no-gap"],[1,"tb-form-table-row","tb-form-row","no-border","same-padding","pt-4"],["translate","",1,"tb-required","w-1/5"],["class","no-gap w-1/5",4,"ngIf"],[1,"tb-form-table-row-cell","tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","deviceNameExpression",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matSuffix","","class","see-example p-1","tb-help-popup-placement","left",3,"tb-help-popup","tb-help-popup-style",4,"ngIf"],["class","tb-form-table-row tb-form-row no-border same-padding pb-4",4,"ngIf"],[1,"no-gap","w-1/5"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","!w-full"],["formControlName","deviceNameExpressionSource"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],[1,"tb-form-table-row","tb-form-row","no-border","same-padding","pb-4"],["matInput","","name","value","formControlName","deviceProfileExpression",3,"placeholder"],["formControlName","deviceProfileExpressionSource"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1),t.ɵɵtext(2,"device.device"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",2)(4,"div",3)(5,"div",4),t.ɵɵtext(6,"gateway.device-info.entity-field"),t.ɵɵelementEnd(),t.ɵɵtemplate(7,_$,2,0,"div",5),t.ɵɵelementStart(8,"div",6),t.ɵɵtext(9," gateway.device-info.expression "),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"div",7)(11,"div",8)(12,"div",9),t.ɵɵtext(13,"gateway.device-info.name"),t.ɵɵelementEnd(),t.ɵɵtemplate(14,I$,4,1,"div",10),t.ɵɵelementStart(15,"div",11)(16,"mat-form-field",12),t.ɵɵelement(17,"input",13),t.ɵɵpipe(18,"translate"),t.ɵɵtemplate(19,E$,3,3,"mat-icon",14)(20,M$,2,8,"div",15),t.ɵɵpipe(21,"getConnectorMappingHelpLink"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(22,A$,11,11,"div",16),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.mappingFormGroup),t.ɵɵadvance(),t.ɵɵclassProp("tb-required",n.required),t.ɵɵadvance(6),t.ɵɵproperty("ngIf",n.useSource),t.ɵɵadvance(4),t.ɵɵclassProp("pb-4",n.deviceInfoType!==n.DeviceInfoType.FULL),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.useSource),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(18,11,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.mappingFormGroup.get("deviceNameExpression").hasError("required")&&n.mappingFormGroup.get("deviceNameExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind4(21,13,n.connectorType,"name-field",n.mappingFormGroup.get("deviceNameExpressionSource").value,n.convertorType)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.deviceInfoType===n.DeviceInfoType.FULL))},dependencies:t.ɵɵgetComponentDepsFactory(F$,[j,_,h$]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}'],changeDetection:d.OnPush})}}Ge([I()],F$.prototype,"useSource",void 0),Ge([I()],F$.prototype,"required",void 0);const R$=()=>({maxWidth:"970px"});function B$(e,n){if(1&e&&t.ɵɵelement(0,"mat-icon",19),2&e){let e;const n=t.ɵɵnextContext();t.ɵɵproperty("svgIcon",null==(e=n.valueTypes.get(n.valueTypeFormGroup.get("type").value))?null:e.icon)}}function N$(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵelement(1,"mat-icon",22),t.ɵɵelementStart(2,"span"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e){let e,a;const i=n.$implicit,r=t.ɵɵnextContext(2);t.ɵɵproperty("value",i),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("svgIcon",null==(e=r.valueTypes.get(i))?null:e.icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,null==(a=r.valueTypes.get(i))?null:a.name))}}function L$(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,N$,5,5,"mat-option",20),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.valueTypeKeys)}}function V$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-option",23)(1,"span"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.raw")))}function q$(e,n){1&e&&(t.ɵɵelement(0,"input",24),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function G$(e,n){1&e&&(t.ɵɵelement(0,"input",25),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function z$(e,n){1&e&&(t.ɵɵelement(0,"input",26),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function U$(e,n){1&e&&(t.ɵɵelement(0,"input",27),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(1,1,"gateway.set"))}function j$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-select",28)(1,"mat-option",21),t.ɵɵtext(2,"true"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-option",21),t.ɵɵtext(4,"false"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(),t.ɵɵproperty("value",!0),t.ɵɵadvance(2),t.ɵɵproperty("value",!1))}function H$(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",29),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function W$(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",30),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("tb-help-popup",e.helpLink)("tb-help-popup-style",t.ɵɵpureFunction0(2,R$))}}class $${constructor(e){this.fb=e,this.valueTypeKeys=Object.values(Yt),this.valueTypes=Xt,this.MappingValueType=Yt,this.destroy$=new te,this.onChange=e=>{},this.valueTypeFormGroup=this.fb.group({type:[Yt.STRING],stringValue:[{value:"",disabled:this.rawData},[$.required,$.pattern(an)]],integerValue:[{value:0,disabled:!0},[$.required,$.pattern(rn)]],doubleValue:[{value:0,disabled:!0},[$.required]],booleanValue:[{value:!1,disabled:!0},[$.required]],rawValue:[{value:"",disabled:!this.rawData},[$.required,$.pattern(an)]]}),this.valueTypeFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((({type:e,...t})=>{this.onChange({type:e,value:t[e+"Value"]})})),this.observeTypeChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}observeTypeChange(){this.valueTypeFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.toggleTypeInputs(e)))}toggleTypeInputs(e){this.valueTypeFormGroup.disable({emitEvent:!1}),this.valueTypeFormGroup.get("type").enable({emitEvent:!1}),this.valueTypeFormGroup.get(e+"Value").enable({emitEvent:!1})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){const t=this.getValueType(e?.value),n={stringValue:"",rawValue:"",integerValue:0,doubleValue:0,booleanValue:!1,type:t};n[t+"Value"]=e?.value,this.toggleTypeInputs(t),this.valueTypeFormGroup.patchValue(n,{emitEvent:!1})}validate(){return this.valueTypeFormGroup.valid?null:{valueTypeFormGroup:{valid:!1}}}getValueType(e){if(this.rawData)return"raw";switch(typeof e){case"boolean":return Yt.BOOLEAN;case"number":return Number.isInteger(e)?Yt.INTEGER:Yt.DOUBLE;default:return Yt.STRING}}static{this.ɵfac=function(e){return new(e||$$)(t.ɵɵdirectiveInject(H.UntypedFormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:$$,selectors:[["tb-type-value-field"]],inputs:{rawData:"rawData",helpLink:"helpLink"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>$$)),multi:!0},{provide:K,useExisting:c((()=>$$)),multi:!0}]),t.ɵɵStandaloneFeature],decls:29,vars:17,consts:[["raw",""],[3,"formGroup"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","fill-width"],["formControlName","type"],[1,"tb-flex","align-center"],["class","tb-mat-18",3,"svgIcon",4,"ngIf"],[4,"ngIf","ngIfElse"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","flex","tb-suffix-absolute"],[3,"ngSwitch"],["matInput","","required","","formControlName","stringValue",3,"placeholder",4,"ngSwitchCase"],["matInput","","required","","formControlName","integerValue","type","number",3,"placeholder",4,"ngSwitchCase"],["matInput","","required","","formControlName","doubleValue","type","number",3,"placeholder",4,"ngSwitchCase"],["matInput","","required","","formControlName","rawValue",3,"placeholder",4,"ngSwitchCase"],["formControlName","booleanValue",4,"ngSwitchCase"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matSuffix","","class","see-example p-1","tb-help-popup-placement","left",3,"tb-help-popup","tb-help-popup-style","click",4,"ngIf"],[1,"tb-mat-18",3,"svgIcon"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"tb-mat-20",3,"svgIcon"],["value","raw"],["matInput","","required","","formControlName","stringValue",3,"placeholder"],["matInput","","required","","formControlName","integerValue","type","number",3,"placeholder"],["matInput","","required","","formControlName","doubleValue","type","number",3,"placeholder"],["matInput","","required","","formControlName","rawValue",3,"placeholder"],["formControlName","booleanValue"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"click","tb-help-popup","tb-help-popup-style"]],template:function(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,1),t.ɵɵelementStart(1,"div",2)(2,"div",3),t.ɵɵtext(3,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",6)(7,"mat-select-trigger")(8,"div",7),t.ɵɵtemplate(9,B$,1,1,"mat-icon",8),t.ɵɵelementStart(10,"span"),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(14,L$,2,1,"ng-container",9)(15,V$,4,3,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(17,"div",2)(18,"div",3),t.ɵɵtext(19,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(20,"mat-form-field",10),t.ɵɵelementContainerStart(21,11),t.ɵɵtemplate(22,q$,2,3,"input",12)(23,G$,2,3,"input",13)(24,z$,2,3,"input",14)(25,U$,2,3,"input",15)(26,j$,5,2,"mat-select",16),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(27,H$,3,3,"mat-icon",17)(28,W$,1,3,"div",18),t.ɵɵelementEnd()(),t.ɵɵelementContainerEnd()),2&e){let e,a;const i=t.ɵɵreference(16);t.ɵɵproperty("formGroup",n.valueTypeFormGroup),t.ɵɵadvance(9),t.ɵɵproperty("ngIf",!n.rawData),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(12,13,null==(e=n.valueTypes.get(n.valueTypeFormGroup.get("type").value))?null:e.name)||t.ɵɵpipeBind1(13,15,"gateway.raw")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",!n.rawData)("ngIfElse",i),t.ɵɵadvance(7),t.ɵɵproperty("ngSwitch",n.valueTypeFormGroup.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingValueType.STRING),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingValueType.INTEGER),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingValueType.DOUBLE),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase","raw"),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingValueType.BOOLEAN),t.ɵɵadvance(),t.ɵɵproperty("ngIf",(null==(a=n.valueTypeFormGroup.get(n.valueTypeFormGroup.get("type").value))?null:a.hasError("required"))&&n.valueTypeFormGroup.get(n.valueTypeFormGroup.get("type").value).touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.helpLink)}},dependencies:t.ɵɵgetComponentDepsFactory($$,[_,j]),styles:['@charset "UTF-8";[_nghost-%COMP%]{gap:16px;display:grid;width:100%}']})}}function K$(e,n){if(1&e&&t.ɵɵelement(0,"tb-type-value-field",14),2&e){const e=t.ɵɵnextContext(3);t.ɵɵproperty("helpLink",e.helpLink)}}function Y$(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6)(1,"div",7),t.ɵɵelementContainerStart(2,8),t.ɵɵelementStart(3,"mat-expansion-panel",9)(4,"mat-expansion-panel-header",10)(5,"mat-panel-title")(6,"div",11),t.ɵɵtext(7),t.ɵɵelementEnd()()(),t.ɵɵtemplate(8,K$,1,1,"ng-template",12),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"button",13),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"delete"),t.ɵɵelementEnd()()()}if(2&e){let e;const a=n.$implicit,i=n.last;t.ɵɵadvance(2),t.ɵɵproperty("formGroup",a),t.ɵɵadvance(),t.ɵɵproperty("expanded",i),t.ɵɵadvance(4),t.ɵɵtextInterpolate(null!==(e=null==(e=a.get("typeValue").value)?null:e.value)&&void 0!==e?e:""),t.ɵɵadvance(2),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(10,4,"gateway.delete-argument"))}}function X$(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵtemplate(1,Y$,13,6,"div",5),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.valueListFormArray.controls)("ngForTrackBy",e.trackByKey)}}function Z$(e,n){1&e&&(t.ɵɵelementStart(0,"div",15)(1,"span",16),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate("gateway.no-value"))}Ge([I()],$$.prototype,"rawData",void 0);class Q${constructor(e){this.fb=e,this.destroy$=new te,this.onChange=e=>{}}ngOnInit(){this.valueListFormArray=this.fb.array([]),this.valueListFormArray.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e.map((({typeValue:e})=>({...e}))))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByKey(e,t){return t}addKey(){const e=this.fb.group({typeValue:[]});this.valueListFormArray.push(e)}deleteKey(e,t){e&&e.stopPropagation(),this.valueListFormArray.removeAt(t),this.valueListFormArray.markAsDirty()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){for(const t of e){const e={typeValue:[t]},n=this.fb.group(e);this.valueListFormArray.push(n)}}validate(){return this.valueListFormArray.valid?null:{valueListForm:{valid:!1}}}static{this.ɵfac=function(e){return new(e||Q$)(t.ɵɵdirectiveInject(H.UntypedFormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Q$,selectors:[["tb-type-value-panel"]],inputs:{helpLink:"helpLink"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>Q$)),multi:!0},{provide:K,useExisting:c((()=>Q$)),multi:!0}]),t.ɵɵStandaloneFeature],decls:8,vars:5,consts:[["noKeys",""],[1,"tb-form-panel","no-border","no-padding"],["class","tb-form-panel no-border no-padding key-panel",4,"ngIf","ngIfElse"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-form-panel","no-border","no-padding","key-panel"],["class","tb-form-panel no-border no-padding tb-flex no-flex row center fill-width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],["tbTruncateWithTooltip","",1,"title-container"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["formControlName","typeValue",3,"helpLink"],[1,"tb-flex","no-flex","center","align-center","key-panel"],["translate","",1,"tb-prompt"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",1),t.ɵɵtemplate(1,X$,2,2,"div",2),t.ɵɵelementStart(2,"div")(3,"button",3),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.addKey())})),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(6,Z$,3,1,"ng-template",null,0,t.ɵɵtemplateRefExtractor)}if(2&e){const e=t.ɵɵreference(7);t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.valueListFormArray.controls.length)("ngIfElse",e),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,3,"gateway.add-value")," ")}},dependencies:t.ɵɵgetComponentDepsFactory(Q$,[j,_,$$]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .title-container[_ngcontent-%COMP%]{max-width:11vw}[_nghost-%COMP%]   .key-panel[_ngcontent-%COMP%]{height:250px;overflow:auto}[_nghost-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:56px;height:56px;padding:16px;color:#0000008a}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}']})}}const J$=()=>({maxWidth:"970px"});function eK(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",19),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵtext(3),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",e.get("key").value," "),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",":","  ")}}function tK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.key-required"))}function nK(e,n){if(1&e&&(t.ɵɵelement(0,"div",41),t.ɵɵpipe(1,"getConnectorMappingHelpLink")),2&e){const e=t.ɵɵnextContext(3).$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("tb-help-popup",t.ɵɵpipeBind4(1,2,n.connectorType,n.keysType,e.get("type").value,n.convertorType))("tb-help-popup-style",t.ɵɵpureFunction0(7,J$))}}function aK(e,n){if(1&e&&t.ɵɵelement(0,"mat-icon",44),2&e){let e;const n=t.ɵɵnextContext(4).$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("svgIcon",null==(e=a.valueTypes.get(n.get("type").value))?null:e.icon)}}function iK(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){let e;const n=t.ɵɵnextContext(4).$implicit,a=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,null!==(e=null==(e=a.valueTypes.get(n.get("type").value))?null:e.name)&&void 0!==e?e:a.valueTypes.get(n.get("type").value))," ")}}function rK(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.raw")))}function oK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-select-trigger")(1,"div",42),t.ɵɵtemplate(2,aK,1,1,"mat-icon",43)(3,iK,3,3,"span",36)(4,rK,3,3,"ng-template",null,2,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()()),2&e){let e;const n=t.ɵɵreference(5),a=t.ɵɵnextContext(3).$implicit,i=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==(e=i.valueTypes.get(a.get("type").value))?null:e.icon),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!i.rawData)("ngIfElse",n)}}function sK(e,n){if(1&e&&t.ɵɵelement(0,"mat-icon",48),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(6);t.ɵɵpropertyInterpolate("svgIcon",n.valueTypes.get(e).icon)}}function lK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",46),t.ɵɵtemplate(1,sK,1,1,"mat-icon",47),t.ɵɵelementStart(2,"span"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e){let e,a;const i=n.$implicit,r=t.ɵɵnextContext(6);t.ɵɵproperty("value",i),t.ɵɵadvance(),t.ɵɵproperty("ngIf",null==(e=r.valueTypes.get(i))?null:e.icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,3,null!==(a=null==(a=r.valueTypes.get(i))?null:a.name)&&void 0!==a?a:r.valueTypes.get(i))," ")}}function pK(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,lK,5,5,"mat-option",45),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(5);t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.valueTypeKeys)}}function cK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-option",46)(1,"span"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("value","raw"),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,2,"gateway.raw")))}function dK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function uK(e,n){if(1&e&&(t.ɵɵelement(0,"div",41),t.ɵɵpipe(1,"getConnectorMappingHelpLink")),2&e){const e=t.ɵɵnextContext(3).$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("tb-help-popup",t.ɵɵpipeBind4(1,2,n.connectorType,n.keysType,e.get("type").value,n.convertorType))("tb-help-popup-style",t.ɵɵpureFunction0(7,J$))}}function mK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4)(1,"div",24)(2,"div",25),t.ɵɵtext(3,"gateway.platform-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",26)(5,"div",27),t.ɵɵpipe(6,"translate"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-form-field",28),t.ɵɵelement(10,"input",29),t.ɵɵpipe(11,"translate"),t.ɵɵtemplate(12,tK,3,3,"mat-icon",30)(13,nK,2,8,"div",31),t.ɵɵpipe(14,"getConnectorMappingHelpLink"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(15,"div",24)(16,"div",25),t.ɵɵtext(17,"gateway.connector-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"div",32)(19,"div",33),t.ɵɵtext(20,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",34)(22,"mat-select",35),t.ɵɵtemplate(23,oK,6,3,"mat-select-trigger",18)(24,pK,2,1,"ng-container",36)(25,cK,4,4,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()()(),t.ɵɵelementStart(27,"div",37)(28,"div",27),t.ɵɵpipe(29,"translate"),t.ɵɵtext(30),t.ɵɵpipe(31,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(32,"mat-form-field",38),t.ɵɵelement(33,"input",39),t.ɵɵpipe(34,"translate"),t.ɵɵtemplate(35,dK,3,3,"mat-icon",30)(36,uK,2,8,"div",31),t.ɵɵpipe(37,"getConnectorMappingHelpLink"),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵreference(26),n=t.ɵɵnextContext(2).$implicit,a=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(6,13,"gateway.JSONPath-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(8,15,"gateway.key")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(11,17,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.get("key").hasError("required")&&n.get("key").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind4(14,19,a.connectorType,a.keysType,n.get("type").value,a.convertorType)),t.ɵɵadvance(10),t.ɵɵproperty("ngIf",!a.rawData),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!a.rawData)("ngIfElse",e),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(29,24,"gateway.JSONPath-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(31,26,"gateway.value")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(34,28,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.get("value").hasError("required")&&n.get("value").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind4(37,30,a.connectorType,a.keysType,n.get("type").value,a.convertorType))}}function hK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.key-required"))}function gK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function fK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4)(1,"div",26)(2,"div",33),t.ɵɵtext(3,"gateway.key"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",28),t.ɵɵelement(5,"input",29),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,hK,3,3,"mat-icon",30),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",26)(9,"div",33),t.ɵɵtext(10,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field",49),t.ɵɵelement(12,"input",39),t.ɵɵpipe(13,"translate"),t.ɵɵtemplate(14,gK,3,3,"mat-icon",30),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,4,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("key").hasError("required")&&e.get("key").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(13,6,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("value").hasError("required")&&e.get("value").touched)}}function yK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.method-required"))}function vK(e,n){1&e&&t.ɵɵelement(0,"tb-type-value-panel",54)}function bK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4)(1,"div",26)(2,"div",27),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field",28),t.ɵɵelement(7,"input",50),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,yK,3,3,"mat-icon",30),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"div",14)(11,"mat-expansion-panel",51)(12,"mat-expansion-panel-header",52)(13,"mat-panel-title")(14,"div",53),t.ɵɵpipe(15,"translate"),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(18,vK,1,0,"ng-template",20),t.ɵɵelementEnd()()()),2&e){let e;const n=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,7,"gateway.hints.method-name")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,9,"gateway.method-name")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,11,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.get("method").hasError("required")&&n.get("method").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(15,13,"gateway.hints.arguments")),t.ɵɵadvance(2),t.ɵɵtextInterpolate2(" ",t.ɵɵpipeBind1(17,15,"gateway.arguments"),""," ("+(null==(e=n.get("arguments").value)?null:e.length)+")"," ")}}function xK(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",55),2&e){const e=t.ɵɵnextContext(4);t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Key)}}function wK(e,n){if(1&e&&t.ɵɵtemplate(0,mK,38,35,"div",22)(1,fK,15,8,"div",22)(2,bK,19,17,"div",22)(3,xK,1,2,"tb-report-strategy",23),2&e){const e=t.ɵɵnextContext(3);t.ɵɵproperty("ngIf",e.keysType!==e.MappingKeysType.CUSTOM&&e.keysType!==e.MappingKeysType.RPC_METHODS),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.keysType===e.MappingKeysType.CUSTOM),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.keysType===e.MappingKeysType.RPC_METHODS),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.withReportStrategy&&(e.keysType===e.MappingKeysType.ATTRIBUTES||e.keysType===e.MappingKeysType.TIMESERIES))}}function SK(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",13)(1,"div",14),t.ɵɵelementContainerStart(2,15),t.ɵɵelementStart(3,"mat-expansion-panel",16)(4,"mat-expansion-panel-header",17)(5,"mat-panel-title"),t.ɵɵtemplate(6,eK,4,2,"ng-container",18),t.ɵɵelementStart(7,"div",19),t.ɵɵtext(8),t.ɵɵelementEnd()()(),t.ɵɵtemplate(9,wK,4,4,"ng-template",20),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"button",21),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"delete"),t.ɵɵelementEnd()()()}if(2&e){const e=n.$implicit,a=n.last,i=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("formGroup",e),t.ɵɵadvance(),t.ɵɵproperty("expanded",a),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",i.keysType!==i.MappingKeysType.RPC_METHODS),t.ɵɵadvance(2),t.ɵɵtextInterpolate(i.valueTitle(e)),t.ɵɵadvance(2),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(11,5,i.deleteKeyTitle))}}function CK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",11),t.ɵɵtemplate(1,SK,14,7,"div",12),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.keysListFormArray.controls)("ngForTrackBy",e.trackByKey)}}function _K(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",56)(1,"span",57),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.noKeysText)}}class TK extends q{constructor(e,t,n){super(n),this.fb=e,this.popover=t,this.store=n,this.valueTypeEnum=Yt,this.valueTypes=Xt,this.valueTypeKeys=Object.values(Yt),this.rawData=!1,this.withReportStrategy=!0,this.keysDataApplied=new u,this.MappingKeysType=Na,this.ReportStrategyDefaultValue=en,this.ConnectorType=ct,this.errorText=""}ngOnInit(){this.keysListFormArray=this.prepareKeysFormArray(this.keys)}trackByKey(e,t){return t}addKey(){let e;e=this.keysType===Na.RPC_METHODS?this.fb.group({method:["",[$.required]],arguments:[[],[]]}):this.keysType===Na.CUSTOM?this.fb.group({key:["",[$.required,$.pattern(an)]],value:["",[$.required,$.pattern(an)]]}):this.fb.group({key:["",[$.required,$.pattern(an)]],type:[this.rawData?"raw":this.valueTypeKeys[0]],value:["",[$.required,$.pattern(an)]],reportStrategy:[{value:null,disabled:this.isReportStrategyDisabled()}]}),this.keysListFormArray.push(e)}deleteKey(e,t){e&&e.stopPropagation(),this.keysListFormArray.removeAt(t),this.keysListFormArray.markAsDirty()}cancel(){this.popover?.hide()}applyKeysData(){let e=this.keysListFormArray.value.map((({reportStrategy:e,...t})=>({...t,...e&&{reportStrategy:e}})));if(this.keysType===Na.CUSTOM){e={};for(let t of this.keysListFormArray.value)e[t.key]=t.value}this.keysDataApplied.emit(e)}prepareKeysFormArray(e){const t=[];return e&&(this.keysType===Na.CUSTOM&&(e=Object.keys(e).map((t=>({key:t,value:e[t],type:""})))),e.forEach((e=>{let n;if(this.keysType===Na.RPC_METHODS)n=this.fb.group({method:[e.method,[$.required]],arguments:[[...e.arguments],[]]});else if(this.keysType===Na.CUSTOM){const{key:t,value:a}=e;n=this.fb.group({key:[t,[$.required,$.pattern(an)]],value:[a,[$.required,$.pattern(an)]]})}else{const{key:t,value:a,type:i,reportStrategy:r}=e;n=this.fb.group({key:[t,[$.required,$.pattern(an)]],type:[i],value:[a,[$.required,$.pattern(an)]],reportStrategy:[{value:r,disabled:this.isReportStrategyDisabled()}]})}t.push(n)}))),this.fb.array(t)}valueTitle(e){const t=this.keysType===Na.RPC_METHODS?e.get("method").value:e.get("value").value;return ke(t)?"object"==typeof t?JSON.stringify(t):t:""}isReportStrategyDisabled(){return!(this.withReportStrategy&&(this.keysType===Na.ATTRIBUTES||this.keysType===Na.TIMESERIES))}static{this.ɵfac=function(e){return new(e||TK)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(at.TbPopoverComponent),t.ɵɵdirectiveInject(Ye.Store))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:TK,selectors:[["tb-mapping-data-keys-panel"]],inputs:{panelTitle:"panelTitle",addKeyTitle:"addKeyTitle",deleteKeyTitle:"deleteKeyTitle",noKeysText:"noKeysText",keys:"keys",keysType:"keysType",connectorType:"connectorType",convertorType:"convertorType",sourceType:"sourceType",valueTypeEnum:"valueTypeEnum",valueTypes:"valueTypes",valueTypeKeys:"valueTypeKeys",rawData:"rawData",withReportStrategy:"withReportStrategy"},outputs:{keysDataApplied:"keysDataApplied"},standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:16,consts:[["noKeys",""],["rawOption",""],["rawText",""],[1,"tb-mapping-keys-panel"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel-title"],["class","tb-form-panel no-border no-padding key-panel",4,"ngIf","ngIfElse"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-flex","flex-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"tb-form-panel","no-border","no-padding","key-panel"],["class","tb-form-panel no-border no-padding tb-flex no-flex row center fill-width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"flex","flex-row","flex-wrap"],[4,"ngIf"],["tbTruncateWithTooltip","",1,"title-container"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["class","tb-form-panel no-border no-padding",4,"ngIf"],["formControlName","reportStrategy",3,"isExpansionMode","defaultValue",4,"ngIf"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","key",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matSuffix","","class","see-example p-1","tb-help-popup-placement","left",3,"tb-help-popup","tb-help-popup-style",4,"ngIf"],[1,"tb-form-row"],["translate","",1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","fill-width"],["formControlName","type"],[4,"ngIf","ngIfElse"],[1,"tb-form-row","column-xs","flex","items-center","justify-between"],["appearance","outline","subscriptSizing","dynamic",1,"no-gap","flex","flex-1"],["matInput","","required","","formControlName","value",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],[1,"tb-flex","align-center"],["class","tb-mat-18",3,"svgIcon",4,"ngIf"],[1,"tb-mat-18",3,"svgIcon"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","tb-mat-20",3,"svgIcon",4,"ngIf"],[1,"tb-mat-20",3,"svgIcon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","tb-suffix-absolute","flex"],["matInput","","name","value","formControlName","method",3,"placeholder"],[1,"tb-settings"],[1,"flex","flex-wrap"],[1,"title-container",3,"tb-hint-tooltip-icon"],["formControlName","arguments"],["formControlName","reportStrategy",3,"isExpansionMode","defaultValue"],[1,"tb-flex","no-flex","center","align-center","key-panel"],["translate","",1,"tb-prompt"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"div",5),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,CK,2,2,"div",6),t.ɵɵelementStart(6,"div")(7,"button",7),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.addKey())})),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(10,_K,3,1,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(12,"div",8)(13,"button",9),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",10),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.applyKeysData())})),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(11);t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,8,n.panelTitle),""," ("+n.keysListFormArray.controls.length+")",""),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.keysListFormArray.controls.length)("ngIfElse",e),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,10,n.addKeyTitle)," "),t.ɵɵadvance(6),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,12,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.keysListFormArray.invalid||!n.keysListFormArray.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,14,"action.apply")," ")}},dependencies:t.ɵɵgetComponentDepsFactory(TK,[j,_,Xn,Q$,h$]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-mapping-keys-panel[_ngcontent-%COMP%]{width:77vw;max-width:700px}[_nghost-%COMP%]   .tb-mapping-keys-panel[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{max-width:11vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-mapping-keys-panel[_ngcontent-%COMP%]   .key-panel[_ngcontent-%COMP%]{height:500px;overflow:auto}[_nghost-%COMP%]   .tb-mapping-keys-panel[_ngcontent-%COMP%]   tb-value-input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .tb-mapping-keys-panel[_ngcontent-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:56px;height:56px;padding:16px;color:#0000008a}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}']})}}Ge([I()],TK.prototype,"rawData",void 0),Ge([I()],TK.prototype,"withReportStrategy",void 0);const IK=()=>({maxWidth:"970px"}),EK=(e,t)=>[e,t];function MK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.topic-required"))}function kK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.QualityTranslationsMap.get(e))," ")}}function PK(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.ConvertorTypeTranslationsMap.get(e))," ")}}function DK(e,n){if(1&e&&t.ɵɵelement(0,"tb-device-info-table",41),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("convertorType",e.ConvertorTypeEnum.JSON)("deviceInfoType",e.DeviceInfoType.FULL)}}function OK(e,n){if(1&e&&t.ɵɵelement(0,"tb-device-info-table",42),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("deviceInfoType",e.DeviceInfoType.FULL)("convertorType",e.ConvertorTypeEnum.BYTES)("sourceTypes",t.ɵɵpureFunction2(3,EK,e.sourceTypesEnum.MSG,e.sourceTypesEnum.CONST))}}function AK(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",37),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function FK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function RK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function BK(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",14)(1,"div",31)(2,"div",32),t.ɵɵtext(3,"gateway.attributes"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",43)(5,"mat-chip-listbox",44),t.ɵɵtemplate(6,FK,2,1,"mat-chip",45),t.ɵɵelementStart(7,"mat-chip",46),t.ɵɵelement(8,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",48,0),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(10),i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.ATTRIBUTES))})),t.ɵɵelementStart(12,"tb-icon",49),t.ɵɵtext(13,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(14,"div",31)(15,"div",32),t.ɵɵtext(16,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"div",43)(18,"mat-chip-listbox",44),t.ɵɵtemplate(19,RK,2,1,"mat-chip",45),t.ɵɵelementStart(20,"mat-chip",46),t.ɵɵelement(21,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(22,"button",48,1),t.ɵɵpipe(24,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(23),i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.TIMESERIES))})),t.ɵɵelementStart(25,"tb-icon",49),t.ɵɵtext(26,"edit"),t.ɵɵelementEnd()()()()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵproperty("tbEllipsisChipList",e.converterAttributes),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.converterAttributes),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,6,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",e.converterTelemetry),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.converterTelemetry),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(24,8,"action.edit"))}}function NK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.extension-required"))}function LK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function VK(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",14)(1,"div",21)(2,"div",50),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field",23),t.ɵɵelement(7,"input",51),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,NK,3,3,"mat-icon",25),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"div",52)(11,"div",35),t.ɵɵtext(12,"gateway.extension-configuration"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",15),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div",31)(17,"div",32),t.ɵɵtext(18,"gateway.keys"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",43)(20,"mat-chip-listbox",44),t.ɵɵtemplate(21,LK,2,1,"mat-chip",45),t.ɵɵelementStart(22,"mat-chip",46),t.ɵɵelement(23,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(24,"button",48,2),t.ɵɵpipe(26,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(25),i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.CUSTOM))})),t.ɵɵelementStart(27,"tb-icon",49),t.ɵɵtext(28,"edit"),t.ɵɵelementEnd()()()()()()}if(2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,8,"gateway.extension-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,10,"gateway.extension")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,12,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("converter.custom.extension").hasError("required")&&e.mappingForm.get("converter.custom.extension").touched),t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,14,"gateway.extension-configuration-hint")),t.ɵɵadvance(6),t.ɵɵproperty("tbEllipsisChipList",e.customKeys),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.customKeys),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(26,16,"action.edit"))}}function qK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21)(1,"div",22),t.ɵɵtext(2,"gateway.topic-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",23),t.ɵɵelement(4,"input",24),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,MK,3,3,"mat-icon",25),t.ɵɵelement(7,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",21)(9,"div",27),t.ɵɵpipe(10,"translate"),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",23)(14,"mat-select",28),t.ɵɵtemplate(15,kK,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementContainerStart(16,30),t.ɵɵelementStart(17,"div",31)(18,"div",32),t.ɵɵtext(19,"gateway.payload-type"),t.ɵɵelementEnd(),t.ɵɵelementStart(20,"tb-toggle-select",33),t.ɵɵtemplate(21,PK,3,4,"tb-toggle-option",29),t.ɵɵelementEnd()(),t.ɵɵelementStart(22,"div",34)(23,"div",35),t.ɵɵtext(24,"gateway.data-conversion"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"div",15),t.ɵɵtext(26),t.ɵɵpipe(27,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(28,36),t.ɵɵtemplate(29,DK,1,2,"ng-template",17)(30,OK,1,6,"ng-template",17)(31,AK,1,2,"tb-report-strategy",37)(32,BK,27,10,"div",38)(33,VK,29,18,"div",38),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,16,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("topicFilter").hasError("required")&&e.mappingForm.get("topicFilter").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/topic-filter_fn")("tb-help-popup-style",t.ɵɵpureFunction0(24,IK)),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(10,18,"gateway.response-topic-Qos-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,20,"gateway.mqtt-qos")," "),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",e.qualityTypes),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",e.convertorTypes),t.ɵɵadvance(5),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(27,22,e.DataConversionTranslationsMap.get(e.converterType))," "),t.ɵɵadvance(2),t.ɵɵproperty("formGroupName",e.converterType)("ngSwitch",e.converterType),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConvertorTypeEnum.JSON),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConvertorTypeEnum.BYTES),t.ɵɵadvance(),t.ɵɵconditional(e.data.withReportStrategy?31:-1),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.converterType===e.ConvertorTypeEnum.BYTES||e.converterType===e.ConvertorTypeEnum.JSON),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.converterType===e.ConvertorTypeEnum.CUSTOM)}}function GK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.RequestTypesTranslationsMap.get(e))," ")}}function zK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.topic-required"))}function UK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21)(1,"div",22),t.ɵɵtext(2,"gateway.topic-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",23),t.ɵɵelement(4,"input",57),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,zK,3,3,"mat-icon",25),t.ɵɵelement(7,"div",26),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,5,"gateway.set")),t.ɵɵproperty("formControl",e.mappingForm.get("requestValue").get(e.requestMappingType).get("topicFilter")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue").get(e.requestMappingType).get("topicFilter").hasError("required")&&e.mappingForm.get("requestValue").get(e.requestMappingType).get("topicFilter").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/topic-filter_fn")("tb-help-popup-style",t.ɵɵpureFunction0(7,IK))}}function jK(e,n){if(1&e&&t.ɵɵelement(0,"tb-device-info-table",58),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("deviceInfoType",e.DeviceInfoType.FULL)}}function HK(e,n){if(1&e&&t.ɵɵelement(0,"tb-device-info-table",58),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("deviceInfoType",e.DeviceInfoType.PARTIAL)}}function WK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SourceTypeTranslationsMap.get(e))," ")}}function $K(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-info.device-name-expression-required"))}function KK(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(3);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SourceTypeTranslationsMap.get(e))," ")}}function YK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.attribute-name-expression-required"))}function XK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.response-value-expression-required"))}function ZK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.response-topic-expression-required"))}function QK(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",34)(1,"div",59),t.ɵɵtext(2,"gateway.from-device-request-settings"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",60),t.ɵɵtext(4," gateway.from-device-request-settings-hint "),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",61)(6,"div",62)(7,"div",63),t.ɵɵtext(8,"gateway.device-info.device-name-expression"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",64)(10,"div",65)(11,"mat-form-field",23)(12,"mat-select",66),t.ɵɵtemplate(13,WK,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementStart(14,"mat-form-field",23),t.ɵɵelement(15,"input",67),t.ɵɵpipe(16,"translate"),t.ɵɵtemplate(17,$K,3,3,"mat-icon",25),t.ɵɵelement(18,"div",26),t.ɵɵelementEnd()()(),t.ɵɵelementStart(19,"div",21)(20,"div",22),t.ɵɵtext(21,"gateway.attribute-name-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"div",64)(23,"div",65)(24,"mat-form-field",23)(25,"mat-select",68),t.ɵɵtemplate(26,KK,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementStart(27,"mat-form-field",23),t.ɵɵelement(28,"input",69),t.ɵɵpipe(29,"translate"),t.ɵɵtemplate(30,YK,3,3,"mat-icon",25),t.ɵɵelement(31,"div",26),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(32,"div",34)(33,"div",59),t.ɵɵtext(34,"gateway.to-device-response-settings"),t.ɵɵelementEnd(),t.ɵɵelementStart(35,"div",60),t.ɵɵtext(36," gateway.to-device-response-settings-hint "),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"div",21)(38,"div",22),t.ɵɵtext(39,"gateway.response-value-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(40,"mat-form-field",23),t.ɵɵelement(41,"input",70),t.ɵɵpipe(42,"translate"),t.ɵɵtemplate(43,XK,3,3,"mat-icon",25),t.ɵɵelement(44,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(45,"div",21)(46,"div",22),t.ɵɵtext(47,"gateway.response-topic-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(48,"mat-form-field",23),t.ɵɵelement(49,"input",71),t.ɵɵpipe(50,"translate"),t.ɵɵtemplate(51,ZK,3,3,"mat-icon",25),t.ɵɵelement(52,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(53,"div",72)(54,"mat-slide-toggle",73)(55,"mat-label",74),t.ɵɵpipe(56,"translate"),t.ɵɵtext(57),t.ɵɵpipe(58,"translate"),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(13),t.ɵɵproperty("ngForOf",e.sourceTypes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,20,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeRequests.deviceInfo.deviceNameExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeRequests.deviceInfo.deviceNameExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(32,IK)),t.ɵɵadvance(8),t.ɵɵproperty("ngForOf",e.sourceTypes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(29,22,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeRequests.attributeNameExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeRequests.attributeNameExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(33,IK)),t.ɵɵadvance(10),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(42,24,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeRequests.valueExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeRequests.valueExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(34,IK)),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(50,26,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeRequests.topicExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeRequests.topicExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(35,IK)),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(56,28,"gateway.retain-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(58,30,"gateway.retain")," ")}}function JK(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-filter-required"))}function eY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.attribute-filter-required"))}function tY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.response-value-expression-required"))}function nY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.response-topic-expression-required"))}function aY(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21)(1,"div",50),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",23),t.ɵɵelement(6,"input",75),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,JK,3,3,"mat-icon",25),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",21)(10,"div",50),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"mat-form-field",23),t.ɵɵelement(15,"input",76),t.ɵɵpipe(16,"translate"),t.ɵɵtemplate(17,eY,3,3,"mat-icon",25),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",21)(19,"div",22),t.ɵɵtext(20,"gateway.response-value-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",23),t.ɵɵelement(22,"input",70),t.ɵɵpipe(23,"translate"),t.ɵɵtemplate(24,tY,3,3,"mat-icon",25),t.ɵɵelement(25,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(26,"div",21)(27,"div",22),t.ɵɵtext(28,"gateway.response-topic-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"mat-form-field",23),t.ɵɵelement(30,"input",71),t.ɵɵpipe(31,"translate"),t.ɵɵtemplate(32,nY,3,3,"mat-icon",25),t.ɵɵelement(33,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(34,"div",72)(35,"mat-slide-toggle",73)(36,"mat-label",74),t.ɵɵpipe(37,"translate"),t.ɵɵtext(38),t.ɵɵpipe(39,"translate"),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,18,"gateway.device-name-filter-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,20,"gateway.device-name-filter")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,22,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeUpdates.deviceNameFilter").hasError("required")&&e.mappingForm.get("requestValue.attributeUpdates.deviceNameFilter").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(11,24,"gateway.attribute-filter-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(13,26,"gateway.attribute-filter")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,28,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeUpdates.attributeFilter").hasError("required")&&e.mappingForm.get("requestValue.attributeUpdates.attributeFilter").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(23,30,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeUpdates.valueExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeUpdates.valueExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(38,IK)),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(31,32,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.attributeUpdates.topicExpression").hasError("required")&&e.mappingForm.get("requestValue.attributeUpdates.topicExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(39,IK)),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(37,34,"gateway.retain-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(39,36,"gateway.retain")," ")}}function iY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-filter-required"))}function rY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.method-filter-required"))}function oY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.request-topic-expression-required"))}function sY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-expression-required"))}function lY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.response-topic-expression-required"))}function pY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(4);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.QualityTranslationsMap.get(e))," ")}}function cY(e,n){if(1&e&&t.ɵɵelement(0,"tb-error-icon",84),2&e){const e=t.ɵɵnextContext(4);t.ɵɵproperty("tooltipText",e.responseTimeoutErrorTooltip)}}function dY(e,n){1&e&&(t.ɵɵelementStart(0,"span",85),t.ɵɵtext(1,"gateway.suffix.ms"),t.ɵɵelementEnd())}function uY(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",21)(2,"div",22),t.ɵɵtext(3,"gateway.response-topic-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",23),t.ɵɵelement(5,"input",81),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,lY,3,3,"mat-icon",25),t.ɵɵelement(8,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",21)(10,"div",27),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"mat-form-field",23)(15,"mat-select",82),t.ɵɵtemplate(16,pY,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementStart(17,"div",21)(18,"div",22),t.ɵɵtext(19,"gateway.response-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(20,"mat-form-field",23),t.ɵɵelement(21,"input",83),t.ɵɵpipe(22,"translate"),t.ɵɵtemplate(23,cY,1,1,"tb-error-icon",84)(24,dY,2,0,"span",85),t.ɵɵelementEnd()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(3);t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.responseTopicExpression").hasError("required")&&e.mappingForm.get("requestValue.serverSideRpc.responseTopicExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(17,IK)),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(11,11,"gateway.response-topic-Qos-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(13,13,"gateway.response-topic-Qos")," "),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",e.qualityTypes),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(22,15,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional((e.mappingForm.get("requestValue.serverSideRpc.responseTimeout").hasError("required")||e.mappingForm.get("requestValue.serverSideRpc.responseTimeout").hasError("min"))&&e.mappingForm.get("requestValue.serverSideRpc.responseTimeout").touched?23:24)}}function mY(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",77)(1,"tb-toggle-select",33)(2,"tb-toggle-option",40),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"tb-toggle-option",40),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(8,"div",21)(9,"div",50),t.ɵɵpipe(10,"translate"),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",23),t.ɵɵelement(14,"input",75),t.ɵɵpipe(15,"translate"),t.ɵɵtemplate(16,iY,3,3,"mat-icon",25),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"div",21)(18,"div",50),t.ɵɵpipe(19,"translate"),t.ɵɵtext(20),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"mat-form-field",23),t.ɵɵelement(23,"input",78),t.ɵɵpipe(24,"translate"),t.ɵɵtemplate(25,rY,3,3,"mat-icon",25),t.ɵɵelementEnd()(),t.ɵɵelementStart(26,"div",21)(27,"div",22),t.ɵɵtext(28,"gateway.request-topic-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"mat-form-field",23),t.ɵɵelement(30,"input",79),t.ɵɵpipe(31,"translate"),t.ɵɵtemplate(32,oY,3,3,"mat-icon",25),t.ɵɵelement(33,"div",26),t.ɵɵelementEnd()(),t.ɵɵelementStart(34,"div",21)(35,"div",22),t.ɵɵtext(36,"gateway.value-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"mat-form-field",23),t.ɵɵelement(38,"input",70),t.ɵɵpipe(39,"translate"),t.ɵɵtemplate(40,sY,3,3,"mat-icon",25),t.ɵɵelement(41,"div",26),t.ɵɵelementEnd()(),t.ɵɵtemplate(42,uY,25,18,"ng-container",80)),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("value",e.ServerSideRPCType.TWO_WAY),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,21,"gateway.with-response")," "),t.ɵɵadvance(2),t.ɵɵproperty("value",e.ServerSideRPCType.ONE_WAY),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(7,23,"gateway.without-response")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(10,25,"gateway.device-name-filter-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,27,"gateway.device-name-filter")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,29,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.deviceNameFilter").hasError("required")&&e.mappingForm.get("requestValue.serverSideRpc.deviceNameFilter").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(19,31,"gateway.method-filter-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(21,33,"gateway.method-filter")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(24,35,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.methodFilter").hasError("required")&&e.mappingForm.get("requestValue.serverSideRpc.methodFilter").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(31,37,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.requestTopicExpression").hasError("required")&&e.mappingForm.get("requestValue.serverSideRpc.requestTopicExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(41,IK)),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(39,39,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.valueExpression").hasError("required")&&e.mappingForm.get("requestValue.serverSideRpc.valueExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/mqtt-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(42,IK)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.mappingForm.get("requestValue.serverSideRpc.type").value===e.ServerSideRPCType.TWO_WAY)}}function hY(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21)(1,"div",32),t.ɵɵtext(2,"gateway.request-type"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",23)(4,"mat-select",53),t.ɵɵtemplate(5,GK,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementContainerStart(6,54)(7,55),t.ɵɵtemplate(8,UK,8,8,"div",56)(9,jK,1,1,"ng-template",17)(10,HK,1,1,"ng-template",17)(11,QK,59,36,"ng-template",17)(12,aY,40,40,"ng-template",17)(13,mY,43,43,"ng-template",17),t.ɵɵelementContainerEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.requestTypes),t.ɵɵadvance(2),t.ɵɵproperty("formGroup",e.mappingForm.get("requestValue").get(e.requestMappingType))("ngSwitch",e.requestMappingType),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.requestMappingType===e.RequestTypeEnum.ATTRIBUTE_REQUEST||e.requestMappingType===e.RequestTypeEnum.CONNECT_REQUEST||e.requestMappingType===e.RequestTypeEnum.DISCONNECT_REQUEST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.RequestTypeEnum.CONNECT_REQUEST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.RequestTypeEnum.DISCONNECT_REQUEST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.RequestTypeEnum.ATTRIBUTE_REQUEST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.RequestTypeEnum.ATTRIBUTE_UPDATE),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.RequestTypeEnum.SERVER_SIDE_RPC)}}function gY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",40),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SourceTypeTranslationsMap.get(e))," ")}}function fY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",39),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-node-required"))}function yY(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",37),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function vY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function bY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function xY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function wY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function SY(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",86)(1,"div",87)(2,"div",88),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(6,"div",89)(7,"mat-form-field",90)(8,"mat-select",91),t.ɵɵtemplate(9,gY,3,4,"mat-option",29),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"mat-form-field",90),t.ɵɵelement(11,"input",92),t.ɵɵpipe(12,"translate"),t.ɵɵtemplate(13,fY,3,3,"mat-icon",25),t.ɵɵelement(14,"div",26),t.ɵɵpipe(15,"getConnectorMappingHelpLink"),t.ɵɵelementEnd()(),t.ɵɵelement(16,"tb-device-info-table",93),t.ɵɵtemplate(17,yY,1,2,"tb-report-strategy",37),t.ɵɵelementStart(18,"div",31)(19,"div",32),t.ɵɵtext(20,"gateway.attributes"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"div",43)(22,"mat-chip-listbox",44),t.ɵɵtemplate(23,vY,2,1,"mat-chip",45),t.ɵɵelementStart(24,"mat-chip",46),t.ɵɵelement(25,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(26,"button",48,3),t.ɵɵpipe(28,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(27),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.ATTRIBUTES))})),t.ɵɵelementStart(29,"tb-icon",49),t.ɵɵtext(30,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(31,"div",31)(32,"div",32),t.ɵɵtext(33,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(34,"div",43)(35,"mat-chip-listbox",44),t.ɵɵtemplate(36,bY,2,1,"mat-chip",45),t.ɵɵelementStart(37,"mat-chip",46),t.ɵɵelement(38,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(39,"button",48,4),t.ɵɵpipe(41,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(40),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.TIMESERIES))})),t.ɵɵelementStart(42,"tb-icon",49),t.ɵɵtext(43,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(44,"div",31)(45,"div",32),t.ɵɵtext(46,"gateway.attribute-updates"),t.ɵɵelementEnd(),t.ɵɵelementStart(47,"div",43)(48,"mat-chip-listbox",44),t.ɵɵtemplate(49,xY,2,1,"mat-chip",45),t.ɵɵelementStart(50,"mat-chip",46),t.ɵɵelement(51,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(52,"button",48,5),t.ɵɵpipe(54,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(53),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.ATTRIBUTES_UPDATES))})),t.ɵɵelementStart(55,"tb-icon",49),t.ɵɵtext(56,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(57,"div",31)(58,"div",32),t.ɵɵtext(59,"gateway.rpc-methods"),t.ɵɵelementEnd(),t.ɵɵelementStart(60,"div",43)(61,"mat-chip-listbox",44),t.ɵɵtemplate(62,wY,2,1,"mat-chip",45),t.ɵɵelementStart(63,"mat-chip",46),t.ɵɵelement(64,"label",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(65,"button",48,6),t.ɵɵpipe(67,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(66),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.RPC_METHODS))})),t.ɵɵelementStart(68,"tb-icon",49),t.ɵɵtext(69,"edit"),t.ɵɵelementEnd()()()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,23,"gateway.device-node-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,25,"gateway.device-node")," "),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",t.ɵɵpureFunction2(41,EK,e.OPCUaSourceTypesEnum.PATH,e.OPCUaSourceTypesEnum.IDENTIFIER)),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(12,27,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mappingForm.get("deviceNodePattern").hasError("required")&&e.mappingForm.get("deviceNodePattern").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup",t.ɵɵpipeBind3(15,29,e.ConnectorType.OPCUA,"device-node",e.mappingForm.get("deviceNodeSource").value))("tb-help-popup-style",t.ɵɵpureFunction0(44,IK)),t.ɵɵadvance(2),t.ɵɵproperty("connectorType",e.ConnectorType.OPCUA)("sourceTypes",e.OPCUaSourceTypes)("deviceInfoType",e.DeviceInfoType.FULL),t.ɵɵadvance(),t.ɵɵconditional(e.data.withReportStrategy?17:-1),t.ɵɵadvance(5),t.ɵɵproperty("tbEllipsisChipList",e.opcAttributes),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.opcAttributes),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(28,33,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",e.opcTelemetry),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.opcTelemetry),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(41,35,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",e.opcAttributesUpdates),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.opcAttributesUpdates),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(54,37,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",e.opcRpcMethods),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.opcRpcMethods),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(67,39,"action.edit"))}}class CY extends A{constructor(e,t,n,a,i,r,o,s,l){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.translate=l,this.MappingType=Da,this.qualityTypes=za,this.QualityTranslationsMap=na,this.convertorTypes=Object.values(Jn),this.ConvertorTypeEnum=Jn,this.ConvertorTypeTranslationsMap=aa,this.sourceTypes=Object.values(ea),this.OPCUaSourceTypes=Object.values(Ma),this.OPCUaSourceTypesEnum=Ma,this.sourceTypesEnum=ea,this.SourceTypeTranslationsMap=Ba,this.requestTypes=Object.values(ia),this.RequestTypeEnum=ia,this.RequestTypesTranslationsMap=ra,this.DeviceInfoType=gi,this.ServerSideRPCType=Wa,this.MappingKeysType=Na,this.MappingHintTranslationsMap=Ha,this.MappingTypeTranslationsMap=Oa,this.DataConversionTranslationsMap=oa,this.HelpLinkByMappingTypeMap=ja,this.ConnectorType=ct,this.ReportStrategyDefaultValue=en,this.keysPopupClosed=!0,this.destroy$=new te,this.createMappingForm()}get converterAttributes(){if(this.converterType)return this.mappingForm.get("converter").get(this.converterType).value.attributes.map((e=>e.key))}get converterTelemetry(){if(this.converterType)return this.mappingForm.get("converter").get(this.converterType).value.timeseries.map((e=>e.key))}get opcAttributes(){return this.mappingForm.get("attributes").value?.map((e=>e.key))||[]}get opcTelemetry(){return this.mappingForm.get("timeseries").value?.map((e=>e.key))||[]}get opcRpcMethods(){return this.mappingForm.get("rpc_methods").value?.map((e=>e.method))||[]}get opcAttributesUpdates(){return this.mappingForm.get("attributes_updates")?.value?.map((e=>e.key))||[]}get converterType(){return this.mappingForm.get("converter")?.get("type").value}get customKeys(){return Object.keys(this.mappingForm.get("converter").get("custom").value.extensionConfig)}get requestMappingType(){return this.mappingForm.get("requestType").value}get responseTimeoutErrorTooltip(){const e=this.mappingForm.get("requestValue.serverSideRpc.responseTimeout");return e.hasError("required")?this.translate.instant("gateway.response-timeout-required"):e.hasError("min")?this.translate.instant("gateway.response-timeout-limits-error",{min:1}):""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),super.ngOnDestroy()}createMappingForm(){switch(this.data.mappingType){case Da.DATA:this.mappingForm=this.fb.group({}),this.createDataMappingForm();break;case Da.REQUESTS:this.mappingForm=this.fb.group({}),this.createRequestMappingForm();break;case Da.OPCUA:this.createOPCUAMappingForm()}}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){this.mappingForm.valid&&this.dialogRef.close(this.prepareMappingData())}manageKeys(e,t,n){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const a=t._elementRef.nativeElement;if(this.popoverService.hasPopover(a))this.popoverService.hidePopover(a);else{const e=(this.data.mappingType!==Da.OPCUA?this.mappingForm.get("converter").get(this.converterType):this.mappingForm).get(n),t={keys:e.value,keysType:n,rawData:this.mappingForm.get("converter.type")?.value===Jn.BYTES,panelTitle:La.get(n),addKeyTitle:Va.get(n),deleteKeyTitle:qa.get(n),noKeysText:Ga.get(n),withReportStrategy:this.data.withReportStrategy,connectorType:this.data.mappingType===Da.OPCUA?ct.OPCUA:ct.MQTT,convertorType:this.converterType};this.data.mappingType===Da.OPCUA&&(t.valueTypeKeys=Object.values(Ma),t.valueTypeEnum=Ma,t.valueTypes=Ba,t.sourceType=this.mappingForm.get("deviceNodeSource").value),this.keysPopupClosed=!1,this.popoverComponent=this.popoverService.displayPopover(a,this.renderer,this.viewContainerRef,TK,"leftBottom",!1,null,t,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.pipe(le(this.destroy$)).subscribe((t=>{this.popoverComponent.hide(),e.patchValue(t),e.markAsDirty()})),this.popoverComponent.tbHideStart.pipe(le(this.destroy$)).subscribe((()=>{this.keysPopupClosed=!0}))}}prepareMappingData(){const e=this.mappingForm.value;switch(Te(e),this.data.mappingType){case Da.DATA:const{converter:t,topicFilter:n,subscriptionQos:a}=e,{reportStrategy:i,...r}=t[t.type];return{topicFilter:n,subscriptionQos:a,...i?{reportStrategy:i}:{},converter:{type:t.type,...r}};case Da.REQUESTS:return{requestType:e.requestType,requestValue:e.requestValue[e.requestType]};default:return e}}getFormValueData(){if(this.data.value&&Object.keys(this.data.value).length)switch(this.data.mappingType){case Da.DATA:const{converter:e,topicFilter:t,subscriptionQos:n,reportStrategy:a}=this.data.value;return{topicFilter:t,subscriptionQos:n,converter:{type:e.type,[e.type]:{...e,...a?{reportStrategy:a}:{}}}};case Da.REQUESTS:return{requestType:this.data.value.requestType,requestValue:{[this.data.value.requestType]:this.data.value.requestValue}};default:return this.data.value}}createDataMappingForm(){this.mappingForm.addControl("topicFilter",this.fb.control("",[$.required,$.pattern(an)])),this.mappingForm.addControl("subscriptionQos",this.fb.control(0)),this.mappingForm.addControl("converter",this.fb.group({type:[Jn.JSON,[]],json:this.fb.group({deviceInfo:[{},[]],attributes:[[],[]],timeseries:[[],[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]}),bytes:this.fb.group({deviceInfo:[{},[]],attributes:[[],[]],timeseries:[[],[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]}),custom:this.fb.group({extension:["",[$.required,$.pattern(an)]],extensionConfig:[{},[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]})})),this.mappingForm.patchValue(this.getFormValueData()),this.mappingForm.get("converter.type").valueChanges.pipe(xe(this.mappingForm.get("converter.type").value),le(this.destroy$)).subscribe((e=>{const t=this.mappingForm.get("converter");t.get("json").disable({emitEvent:!1}),t.get("bytes").disable({emitEvent:!1}),t.get("custom").disable({emitEvent:!1}),t.get(e).enable({emitEvent:!1})}))}createRequestMappingForm(){this.mappingForm.addControl("requestType",this.fb.control(ia.CONNECT_REQUEST,[])),this.mappingForm.addControl("requestValue",this.fb.group({connectRequests:this.fb.group({topicFilter:["",[$.required,$.pattern(an)]],deviceInfo:[{},[]]}),disconnectRequests:this.fb.group({topicFilter:["",[$.required,$.pattern(an)]],deviceInfo:[{},[]]}),attributeRequests:this.fb.group({topicFilter:["",[$.required,$.pattern(an)]],deviceInfo:this.fb.group({deviceNameExpressionSource:[ea.MSG,[]],deviceNameExpression:["",[$.required]]}),attributeNameExpressionSource:[ea.MSG,[]],attributeNameExpression:["",[$.required,$.pattern(an)]],topicExpression:["",[$.required,$.pattern(an)]],valueExpression:["",[$.required,$.pattern(an)]],retain:[!1,[]]}),attributeUpdates:this.fb.group({deviceNameFilter:["",[$.required,$.pattern(an)]],attributeFilter:["",[$.required,$.pattern(an)]],topicExpression:["",[$.required,$.pattern(an)]],valueExpression:["",[$.required,$.pattern(an)]],retain:[!0,[]]}),serverSideRpc:this.fb.group({type:[Wa.TWO_WAY,[]],deviceNameFilter:["",[$.required,$.pattern(an)]],methodFilter:["",[$.required,$.pattern(an)]],requestTopicExpression:["",[$.required,$.pattern(an)]],responseTopicExpression:["",[$.required,$.pattern(an)]],valueExpression:["",[$.required,$.pattern(an)]],responseTopicQoS:[0,[]],responseTimeout:[1e4,[$.required,$.min(1)]]}),reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]})),this.mappingForm.get("requestType").valueChanges.pipe(xe(this.mappingForm.get("requestType").value),le(this.destroy$)).subscribe((e=>{const t=this.mappingForm.get("requestValue");t.get("connectRequests").disable({emitEvent:!1}),t.get("disconnectRequests").disable({emitEvent:!1}),t.get("attributeRequests").disable({emitEvent:!1}),t.get("attributeUpdates").disable({emitEvent:!1}),t.get("serverSideRpc").disable({emitEvent:!1}),t.get(e).enable()})),this.mappingForm.get("requestValue.serverSideRpc.type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{const t=this.mappingForm.get("requestValue.serverSideRpc");e===Wa.ONE_WAY?(t.get("responseTopicExpression").disable({emitEvent:!1}),t.get("responseTopicQoS").disable({emitEvent:!1}),t.get("responseTimeout").disable({emitEvent:!1})):(t.get("responseTopicExpression").enable({emitEvent:!1}),t.get("responseTopicQoS").enable({emitEvent:!1}),t.get("responseTimeout").enable({emitEvent:!1}))})),this.mappingForm.patchValue(this.getFormValueData())}createOPCUAMappingForm(){this.mappingForm=this.fb.group({deviceNodeSource:[Ma.PATH,[]],deviceNodePattern:["",[$.required]],deviceInfo:[{},[]],attributes:[[],[]],timeseries:[[],[]],rpc_methods:[[],[]],attributes_updates:[[],[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]}),this.mappingForm.patchValue(this.getFormValueData())}static{this.ɵfac=function(e){return new(e||CY)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(He.TranslateService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:CY,selectors:[["tb-mapping-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:26,vars:19,consts:[["attributesButton",""],["telemetryButton",""],["keysButton",""],["opcAttributesButton",""],["opcTelemetryButton",""],["attributesUpdatesButton",""],["rpcMethodsButton",""],[1,"key-mapping",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-hint","tb-primary-fill"],[3,"ngSwitch"],[3,"ngSwitchCase"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex"],["matInput","","name","value","formControlName","topicFilter",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],[1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","subscriptionQos"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","converter"],[1,"tb-form-row","space-between","tb-flex"],["translate","",1,"fixed-title-width"],["formControlName","type","appearance","fill"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[3,"formGroupName","ngSwitch"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"],["class","tb-form-panel no-border no-padding",4,"ngIf"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[3,"value"],["formControlName","deviceInfo","required","true",3,"convertorType","deviceInfoType"],["formControlName","deviceInfo","required","true",3,"deviceInfoType","convertorType","sourceTypes"],[1,"tb-flex","ellipsis-chips-container"],[1,"tb-flex",3,"tbEllipsisChipList"],[4,"ngFor","ngForOf"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","name","value","formControlName","extension",3,"placeholder"],[1,"tb-form-row","space-between","same-padding","tb-flex","column"],["formControlName","requestType"],["formGroupName","requestValue"],[3,"formGroup","ngSwitch"],["class","tb-form-row column-xs",4,"ngIf"],["matInput","","name","value",3,"formControl","placeholder"],["formControlName","deviceInfo","required","true",3,"deviceInfoType"],["translate","",1,"tb-form-panel-title","tb-required"],["translate","",1,"tb-form-hint","tb-primary-fill"],["formGroupName","deviceInfo",1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-flex","no-flex","align-center"],["translate","",1,"tb-required"],[1,"flex","flex-1","gap-2"],[1,"flex","w-1/4"],["formControlName","deviceNameExpressionSource"],["matInput","","name","value","formControlName","deviceNameExpression",3,"placeholder"],["formControlName","attributeNameExpressionSource"],["matInput","","name","value","formControlName","attributeNameExpression",3,"placeholder"],["matInput","","name","value","formControlName","valueExpression",3,"placeholder"],["matInput","","name","value","formControlName","topicExpression",3,"placeholder"],[1,"tb-form-row"],["formControlName","retain",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["matInput","","name","value","formControlName","deviceNameFilter",3,"placeholder"],["matInput","","name","value","formControlName","attributeFilter",3,"placeholder"],[1,"tb-flex","row","center","align-center","no-gap","fill-width"],["matInput","","name","value","formControlName","methodFilter",3,"placeholder"],["matInput","","name","value","formControlName","requestTopicExpression",3,"placeholder"],[4,"ngIf"],["matInput","","name","value","formControlName","responseTopicExpression",3,"placeholder"],["formControlName","responseTopicQoS"],["matInput","","name","value","type","number","min","1","formControlName","responseTimeout",3,"placeholder"],["matSuffix","",3,"tooltipText"],["translate","","matSuffix","",1,"block","pr-2"],[1,"device-node-row","tb-form-row","column-xs","pr-4"],["translate","",1,"tb-flex","no-flex","align-center","w-1/5"],[1,"tb-required",3,"tb-hint-tooltip-icon"],[1,"flex","w-1/5"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","deviceNodeSource"],["matInput","","name","value","formControlName","deviceNodePattern",3,"placeholder"],["formControlName","deviceInfo","required","true",3,"connectorType","sourceTypes","deviceInfoType"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",7)(1,"mat-toolbar",8)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",9)(6,"div",10),t.ɵɵelementStart(7,"button",11),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",12),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",13)(11,"div",14)(12,"div",15),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(15,16),t.ɵɵtemplate(16,qK,34,25,"ng-template",17)(17,hY,14,9,"ng-template",17)(18,SY,70,45,"ng-template",17),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()(),t.ɵɵelementStart(19,"div",18)(20,"button",19),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(21),t.ɵɵpipe(22,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"button",20),t.ɵɵlistener("click",(function(){return n.add()})),t.ɵɵtext(24),t.ɵɵpipe(25,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.mappingForm),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,11,n.MappingTypeTranslationsMap.get(null==n.data?null:n.data.mappingType))),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.HelpLinkByMappingTypeMap.get(n.data.mappingType)),t.ɵɵadvance(7),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(14,13,n.MappingHintTranslationsMap.get(null==n.data?null:n.data.mappingType))," "),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitch",n.data.mappingType),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingType.DATA),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingType.REQUESTS),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.MappingType.OPCUA),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(22,15,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.mappingForm.invalid||!n.mappingForm.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(25,17,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(CY,[j,_,h$,Gn,F$,Qn,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{display:grid;height:100%}[_nghost-%COMP%]   .key-mapping[_ngcontent-%COMP%]{max-width:900px;display:flex;flex-direction:column}[_nghost-%COMP%]   .key-mapping[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{min-height:64px}[_nghost-%COMP%]   .key-mapping[_ngcontent-%COMP%]   tb-toggle-select[_ngcontent-%COMP%]{padding:4px 0}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{height:670px}[_nghost-%COMP%]   .ellipsis-chips-container[_ngcontent-%COMP%]{max-width:70%}[_nghost-%COMP%]     .key-mapping .mat-mdc-chip-listbox .mdc-evolution-chip-set__chips{justify-content:flex-end;align-items:center;flex-wrap:nowrap}[_nghost-%COMP%]     .tb-form-row .fixed-title-width{min-width:40px;width:35%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .tb-form-row .mat-mdc-form-field{width:0}[_nghost-%COMP%]     .device-node-row.tb-form-row{gap:12px}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}']})}}e("MappingDialogComponent",CY);const _Y=["searchInput"],TY=()=>({minWidth:"96px",textAlign:"center"});function IY(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",7)(1,"div",24)(2,"span",25),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelement(5,"span",9),t.ɵɵelementStart(6,"button",11),t.ɵɵpipe(7,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageMapping(n))})),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"button",11),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"search"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,e.mappingTypeTranslationsMap.get(e.mappingType))),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,7,"action.search"))}}function EY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-header-cell",29),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();t.ɵɵclassProp("request-column",n.mappingType===n.mappingTypeEnum.REQUESTS),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,3,e.title)," ")}}function MY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",30),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵclassProp("request-column",i.mappingType===i.mappingTypeEnum.REQUESTS),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e[a.def]," ")}}function kY(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,26),t.ɵɵtemplate(1,EY,3,5,"mat-header-cell",27)(2,MY,2,3,"mat-cell",28),t.ɵɵelementContainerEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("matColumnDef",e.def)}}function PY(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",31)}function DY(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",11),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageMapping(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",11),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteMapping(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function OY(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,DY,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",32),t.ɵɵelementContainer(4,33),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",34)(6,"button",35),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",36),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",37,2),t.ɵɵelementContainer(11,33),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(3),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,TY)),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function AY(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",38)}function FY(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class RY{set mappingType(e){this.mappingTypeValue!==e&&(this.mappingTypeValue=e)}get mappingType(){return this.mappingTypeValue}constructor(e,t,n,a){this.translate=e,this.dialog=t,this.dialogService=n,this.fb=a,this.required=!1,this.withReportStrategy=!0,this.mappingTypeTranslationsMap=Oa,this.mappingTypeEnum=Da,this.displayedColumns=[],this.mappingColumns=[],this.textSearchMode=!1,this.hidePageSize=!1,this.activeValue=!1,this.dirtyValue=!1,this.textSearch=this.fb.control("",{nonNullable:!0}),this.onChange=()=>{},this.onTouched=()=>{},this.destroy$=new te,this.mappingFormGroup=this.fb.array([]),this.dirtyValue=!this.activeValue,this.dataSource=new BY}ngOnInit(){this.setMappingColumns(),this.displayedColumns.push(...this.mappingColumns.map((e=>e.def)),"actions"),this.mappingFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateTableData(e),this.onChange(e),this.onTouched()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.textSearch.valueChanges.pipe(de(150),ce(((e,t)=>(e??"")===t.trim())),le(this.destroy$)).subscribe((e=>{const t=e.trim();this.updateTableData(this.mappingFormGroup.value,t.trim())}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.mappingFormGroup.clear(),this.pushDataAsFormArrays(e)}validate(){return!this.required||this.mappingFormGroup.controls.length?null:{mappingFormGroup:{valid:!1}}}enterFilterMode(){this.textSearchMode=!0,setTimeout((()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)}),10)}exitFilterMode(){this.updateTableData(this.mappingFormGroup.value),this.textSearchMode=!1,this.textSearch.reset()}manageMapping(e,t){e&&e.stopPropagation();const n=ke(t)?this.mappingFormGroup.at(t).value:{};this.dialog.open(CY,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{mappingType:this.mappingType,value:n,buttonTitle:Ae(t)?"action.add":"action.apply",withReportStrategy:this.withReportStrategy}}).afterClosed().pipe(ye(1),le(this.destroy$)).subscribe((e=>{e&&(ke(t)?this.mappingFormGroup.at(t).patchValue(e):this.pushDataAsFormArrays([e]),this.mappingFormGroup.markAsDirty())}))}updateTableData(e,t){let n=e.map((e=>this.getMappingValue(e)));t&&(n=n.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(n)}deleteMapping(e,t){e&&e.stopPropagation();const n=this.mappingFormGroup.controls[t].value,a=n.deviceInfo?.deviceNameExpression??n.topicFilter??this.getRequestDetails(n);this.dialogService.confirm(this.translate.instant("gateway.delete-mapping-title",{name:a}),this.translate.instant("gateway.delete-mapping-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((e=>{e&&(this.mappingFormGroup.removeAt(t),this.mappingFormGroup.markAsDirty())}))}pushDataAsFormArrays(e){e?.length&&e.forEach((e=>this.mappingFormGroup.push(this.fb.control(e))))}getMappingValue(e){switch(this.mappingType){case Da.DATA:const t=aa.get(e.converter?.type);return{topicFilter:e.topicFilter,QoS:e.subscriptionQos,converter:t?this.translate.instant(t):""};case Da.REQUESTS:return{requestType:e.requestType,type:this.translate.instant(ra.get(e.requestType)),details:this.getRequestDetails(e)};case Da.OPCUA:const n=e.deviceInfo?.deviceNameExpression,a=e.deviceInfo?.deviceProfileExpression,{deviceNodePattern:i}=e;return{deviceNodePattern:i,deviceNamePattern:n,deviceProfileExpression:a};default:return{}}}getRequestDetails(e){let t;return t=e.requestType===ia.ATTRIBUTE_UPDATE?e.requestValue.attributeFilter:e.requestType===ia.SERVER_SIDE_RPC?e.requestValue.methodFilter:e.requestValue.topicFilter,t}setMappingColumns(){switch(this.mappingType){case Da.DATA:this.mappingColumns.push({def:"topicFilter",title:"gateway.topic-filter"},{def:"QoS",title:"gateway.mqtt-qos"},{def:"converter",title:"gateway.payload-type"});break;case Da.REQUESTS:this.mappingColumns.push({def:"type",title:"gateway.type"},{def:"details",title:"gateway.details"});break;case Da.OPCUA:this.mappingColumns.push({def:"deviceNodePattern",title:"gateway.device-node"},{def:"deviceNamePattern",title:"gateway.device-name"},{def:"deviceProfileExpression",title:"gateway.device-profile"})}}static{this.ɵfac=function(e){return new(e||RY)(t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:RY,selectors:[["tb-mapping-table"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(_Y,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.searchInputField=e.first)}},inputs:{required:"required",withReportStrategy:"withReportStrategy",mappingType:"mappingType"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>RY)),multi:!0},{provide:K,useExisting:c((()=>RY)),multi:!0}]),t.ɵɵStandaloneFeature],decls:40,vars:33,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-mapping-table","tb-absolute-fill"],[1,"tb-mapping-table-content","flex","flex-col"],[1,"mat-mdc-table-toolbar"],["class","mat-toolbar-tools",4,"ngIf"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container"],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"tb-mapping-table-title"],[3,"matColumnDef"],["class","table-value-column",3,"request-column",4,"matHeaderCellDef"],["tbTruncateWithTooltip","","class","table-value-column",3,"request-column",4,"matCellDef"],[1,"table-value-column"],["tbTruncateWithTooltip","",1,"table-value-column"],[1,"w-12"],[1,"lt-lg:!hidden","flex","flex-1","flex-row","items-stretch","justify-end"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,IY,14,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"div",7)(7,"button",8),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"mat-icon"),t.ɵɵtext(10,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",9)(12,"mat-label"),t.ɵɵtext(13," "),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",10,0),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"button",11),t.ɵɵpipe(18,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(19,"mat-icon"),t.ɵɵtext(20,"close"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(21,"div",12)(22,"table",13),t.ɵɵtemplate(23,kY,3,1,"ng-container",14),t.ɵɵelementContainerStart(24,15),t.ɵɵtemplate(25,PY,1,0,"mat-header-cell",16)(26,OY,12,6,"mat-cell",17),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(27,AY,1,0,"mat-header-row",18)(28,FY,1,0,"mat-row",19),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"section",20),t.ɵɵpipe(30,"async"),t.ɵɵelementStart(31,"button",21),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageMapping(a))})),t.ɵɵelementStart(32,"mat-icon",22),t.ɵɵtext(33,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(34,"span"),t.ɵɵtext(35),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(37,"span",23),t.ɵɵpipe(38,"async"),t.ɵɵtext(39," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!1===t.ɵɵpipeBind1(4,19,n.dataSource.isEmpty())),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,21,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,23,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,25,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.mappingColumns),t.ɵɵadvance(4),t.ɵɵproperty("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",n.displayedColumns),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(30,27,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(36,29,"gateway.add-mapping")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(38,31,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(RY,[j,_,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content.tb-outlined-border[_ngcontent-%COMP%]{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .tb-mapping-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{table-layout:fixed;min-width:450px}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .table-value-column[_ngcontent-%COMP%]{padding:0 12px;width:21%}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .table-value-column.request-column[_ngcontent-%COMP%]{width:35%}[_nghost-%COMP%]   .tb-mapping-table[_ngcontent-%COMP%]   .tb-mapping-table-content[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:calc(100% - 120px)}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-mapping-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell .mat-icon{height:24px;width:24px;font-size:24px;color:#757575}'],changeDetection:d.OnPush})}}e("MappingTableComponent",RY),Ge([I()],RY.prototype,"required",void 0),Ge([I()],RY.prototype,"withReportStrategy",void 0);let BY=class extends G{constructor(){super()}};function NY(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",7),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SecurityTypeTranslationsMap.get(e))," ")}}function LY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",18),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.username-required"))}function VY(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",8)(1,"div",9),t.ɵɵtext(2,"gateway.username"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",10)(4,"mat-form-field",11),t.ɵɵelement(5,"input",12),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,LY,3,3,"mat-icon",13),t.ɵɵelementEnd()()(),t.ɵɵelementStart(8,"div",8)(9,"div",14),t.ɵɵtext(10,"gateway.password"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"div",10)(12,"mat-form-field",11),t.ɵɵelement(13,"input",15),t.ɵɵpipe(14,"translate"),t.ɵɵelementStart(15,"div",16),t.ɵɵelement(16,"tb-toggle-password",17),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,3,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.securityFormGroup.get("username").hasError("required")&&e.securityFormGroup.get("username").touched),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,5,"gateway.set"))}}function qY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",7),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e," ")}}function GY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",18),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.username-required"))}function zY(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",8)(2,"div",14),t.ɵɵtext(3,"gateway.mode"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",10)(5,"mat-form-field",11)(6,"mat-select",25),t.ɵɵtemplate(7,qY,2,2,"mat-option",4),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(8,"div",8)(9,"div",14),t.ɵɵtext(10,"gateway.username"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"div",10)(12,"mat-form-field",11),t.ɵɵelement(13,"input",12),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,GY,3,3,"mat-icon",13),t.ɵɵelementEnd()()(),t.ɵɵelementStart(16,"div",8)(17,"div",14),t.ɵɵtext(18,"gateway.password"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",10)(20,"mat-form-field",11),t.ɵɵelement(21,"input",15),t.ɵɵpipe(22,"translate"),t.ɵɵelementStart(23,"div",16),t.ɵɵelement(24,"tb-toggle-password",17),t.ɵɵelementEnd()()()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(7),t.ɵɵproperty("ngForOf",e.modeTypes),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,4,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.securityFormGroup.get("username").hasError("required")&&e.securityFormGroup.get("username").touched),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(22,6,"gateway.set"))}}function UY(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",19),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",8)(4,"div",20),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",10)(8,"mat-form-field",11),t.ɵɵelement(9,"input",21),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(11,"div",8)(12,"div",20),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"div",10)(16,"mat-form-field",11),t.ɵɵelement(17,"input",22),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(19,"div",8)(20,"div",20),t.ɵɵtext(21),t.ɵɵpipe(22,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"div",10)(24,"mat-form-field",11),t.ɵɵelement(25,"input",23),t.ɵɵpipe(26,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(27,zY,25,8,"ng-container",24)),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,8,"gateway.path-hint")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(6,10,"gateway.CA-certificate-path")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(10,12,"gateway.set")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(14,14,"gateway.private-key-path")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(18,16,"gateway.set")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(22,18,"gateway.client-cert-path")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(26,20,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.mode()===e.SecurityMode.extendedCertificates)}}e("MappingDatasource",BY);class jY{constructor(e,t){this.fb=e,this.cdr=t,this.title="gateway.security",this.mode=l($a.certificates),this.BrokerSecurityType=ka,this.SecurityMode=$a,this.securityTypes=Object.values(ka),this.modeTypes=Object.values(Pa),this.SecurityTypeTranslationsMap=Ra,this.destroy$=new te,o((()=>{this.mode()===$a.basic&&(this.securityTypes=this.securityTypes.filter((e=>e!==ka.CERTIFICATES)))}))}ngOnInit(){this.securityFormGroup=this.fb.group({type:[ka.ANONYMOUS,[]],username:["",[$.required,$.pattern(an)]],password:["",[$.pattern(an)]],pathToCACert:["",[$.pattern(an)]],pathToPrivateKey:["",[$.pattern(an)]],pathToClientCert:["",[$.pattern(an)]]}),this.mode()===$a.extendedCertificates&&this.securityFormGroup.addControl("mode",this.fb.control(Pa.NONE,[])),this.securityFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{Te(e),this.onChange(e),this.onTouched()})),this.securityFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateValidators(e)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(e){if(e)e.type||(e.type=ka.ANONYMOUS),this.updateValidators(e.type),this.securityFormGroup.reset(e,{emitEvent:!1});else{const e={type:ka.ANONYMOUS};this.securityFormGroup.reset(e,{emitEvent:!1})}this.cdr.markForCheck()}validate(){return this.securityFormGroup.get("type").value!==ka.BASIC||this.securityFormGroup.valid?null:{securityForm:{valid:!1}}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}updateValidators(e){if(e)if(this.securityFormGroup.get("username").disable({emitEvent:!1}),this.securityFormGroup.get("password").disable({emitEvent:!1}),this.securityFormGroup.get("pathToCACert").disable({emitEvent:!1}),this.securityFormGroup.get("pathToPrivateKey").disable({emitEvent:!1}),this.securityFormGroup.get("pathToClientCert").disable({emitEvent:!1}),this.securityFormGroup.get("mode")?.disable({emitEvent:!1}),e===ka.BASIC)this.securityFormGroup.get("username").enable({emitEvent:!1}),this.securityFormGroup.get("password").enable({emitEvent:!1});else if(e===ka.CERTIFICATES&&(this.securityFormGroup.get("pathToCACert").enable({emitEvent:!1}),this.securityFormGroup.get("pathToPrivateKey").enable({emitEvent:!1}),this.securityFormGroup.get("pathToClientCert").enable({emitEvent:!1}),this.mode()===$a.extendedCertificates)){const e=this.securityFormGroup.get("mode");e&&!e.value&&e.setValue(Pa.NONE,{emitEvent:!1}),e?.enable({emitEvent:!1}),this.securityFormGroup.get("username").enable({emitEvent:!1}),this.securityFormGroup.get("password").enable({emitEvent:!1})}}static{this.ɵfac=function(e){return new(e||jY)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:jY,selectors:[["tb-security-config"]],inputs:{title:"title",mode:[1,"mode"]},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>jY)),multi:!0},{provide:K,useExisting:c((()=>jY)),multi:!0}]),t.ɵɵStandaloneFeature],decls:10,vars:8,consts:[[1,"tb-form-row","space-between","same-padding","tb-flex","column",3,"formGroup"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],[1,"fixed-title-width","tb-required"],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],[1,"tb-form-row","space-between","tb-flex","fill-width"],["translate","",1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","username",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["translate","",1,"fixed-title-width"],["matInput","","type","password","name","value","formControlName","password",3,"placeholder"],["matSuffix","",1,"tb-flex","no-gap","align-center","fill-height"],[1,"tb-flex","align-center","fill-height"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[1,"tb-form-hint","tb-primary-fill"],["tbTruncateWithTooltip","",1,"fixed-title-width"],["matInput","","name","value","formControlName","pathToCACert",3,"placeholder"],["matInput","","name","value","formControlName","pathToPrivateKey",3,"placeholder"],["matInput","","name","value","formControlName","pathToClientCert",3,"placeholder"],[4,"ngIf"],["formControlName","mode"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"tb-toggle-select",3),t.ɵɵtemplate(6,NY,3,4,"tb-toggle-option",4),t.ɵɵelementEnd()(),t.ɵɵelementContainerStart(7,5),t.ɵɵtemplate(8,VY,17,7,"ng-template",6)(9,UY,28,22,"ng-template",6),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.securityFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,6,n.title)),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.securityTypes),t.ɵɵadvance(),t.ɵɵproperty("ngSwitch",n.securityFormGroup.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.BrokerSecurityType.BASIC),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.BrokerSecurityType.CERTIFICATES))},dependencies:t.ɵɵgetComponentDepsFactory(jY,[j,_,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}'],changeDetection:d.OnPush})}}e("SecurityConfigComponent",jY);const HY=()=>({min:1e3}),WY=()=>({min:50}),$Y=()=>({min:100});function KY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.server-url-required"))}function YY(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",9),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind2(1,1,"gateway.timeout-error",t.ɵɵpureFunction0(4,HY)))}function XY(e,n){1&e&&(t.ɵɵelementStart(0,"span",10),t.ɵɵtext(1,"gateway.suffix.ms"),t.ɵɵelementEnd())}function ZY(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",22),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.value),t.ɵɵadvance(),t.ɵɵtextInterpolate(e.name)}}function QY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind2(1,1,"gateway.scan-period-error",t.ɵɵpureFunction0(4,HY)))}function JY(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind2(1,1,"gateway.poll-period-error",t.ɵɵpureFunction0(4,WY)))}function eX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1)(1,"div",6),t.ɵɵpipe(2,"translate"),t.ɵɵelementStart(3,"div",7),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(6,"mat-form-field",3),t.ɵɵelement(7,"input",23),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,JY,3,5,"mat-icon",5),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,4,"gateway.hints.poll-period")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,6,"gateway.poll-period")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,8,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(e.serverConfigFormGroup.get("pollPeriodInMillis").hasError("required")||e.serverConfigFormGroup.get("pollPeriodInMillis").hasError("min"))&&e.serverConfigFormGroup.get("pollPeriodInMillis").touched)}}function tX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind2(1,1,"gateway.sub-check-period-error",t.ɵɵpureFunction0(4,$Y)))}class nX{constructor(e){this.fb=e,this.hideNewFields=!1,this.securityPolicyTypes=Fa,this.SecurityMode=$a,this.destroy$=new te,this.serverConfigFormGroup=this.fb.group({url:["",[$.required,$.pattern(an)]],timeoutInMillis:[1e3,[$.required,$.min(1e3)]],scanPeriodInMillis:[z,[$.required,$.min(1e3)]],pollPeriodInMillis:[5e3,[$.required,$.min(50)]],enableSubscriptions:[!0,[]],subCheckPeriodInMillis:[100,[$.required,$.min(100)]],showMap:[!1,[]],security:[Aa.BASIC128,[]],identity:[]}),this.serverConfigFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}ngAfterViewInit(){this.hideNewFields&&this.serverConfigFormGroup.get("pollPeriodInMillis").disable({emitEvent:!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}validate(){return this.serverConfigFormGroup.valid?null:{serverConfigFormGroup:{valid:!1}}}writeValue(e){const{timeoutInMillis:t=1e3,scanPeriodInMillis:n=z,pollPeriodInMillis:a=5e3,enableSubscriptions:i=!0,subCheckPeriodInMillis:r=100,showMap:o=!1,security:s=Aa.BASIC128,identity:l={}}=e;this.serverConfigFormGroup.reset({...e,timeoutInMillis:t,scanPeriodInMillis:n,pollPeriodInMillis:a,enableSubscriptions:i,subCheckPeriodInMillis:r,showMap:o,security:s,identity:l},{emitEvent:!1})}static{this.ɵfac=function(e){return new(e||nX)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:nX,selectors:[["tb-opc-server-config"]],inputs:{hideNewFields:"hideNewFields"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>nX)),multi:!0},{provide:K,useExisting:c((()=>nX)),multi:!0}]),t.ɵɵStandaloneFeature],decls:63,vars:56,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row","column-xs"],["tbTruncateWithTooltip","","translate","",1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","url",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],[1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip",""],["matInput","","type","number","min","1000","name","value","formControlName","timeoutInMillis",3,"placeholder"],["matSuffix","",3,"tooltipText"],["translate","","matSuffix","",1,"block","pr-2"],["formControlName","security"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","1000","name","value","formControlName","scanPeriodInMillis",3,"placeholder"],["class","tb-form-row column-xs",4,"ngIf"],["matInput","","type","number","min","100","name","value","formControlName","subCheckPeriodInMillis",3,"placeholder"],[1,"tb-form-row"],["formControlName","enableSubscriptions",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","showMap",1,"mat-slide"],["formControlName","identity",3,"mode"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[3,"value"],["matInput","","type","number","min","50","name","value","formControlName","pollPeriodInMillis",3,"placeholder"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.server-url"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",3),t.ɵɵelement(5,"input",4),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,KY,3,3,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",1)(9,"div",6),t.ɵɵpipe(10,"translate"),t.ɵɵelementStart(11,"div",7),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(14,"mat-form-field",3),t.ɵɵelement(15,"input",8),t.ɵɵpipe(16,"translate"),t.ɵɵtemplate(17,YY,2,5,"tb-error-icon",9)(18,XY,2,0,"span",10),t.ɵɵelementEnd()(),t.ɵɵelementStart(19,"div",1)(20,"div",6),t.ɵɵpipe(21,"translate"),t.ɵɵelementStart(22,"div",7),t.ɵɵtext(23),t.ɵɵpipe(24,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(25,"mat-form-field",3)(26,"mat-select",11),t.ɵɵtemplate(27,ZY,2,2,"mat-option",12),t.ɵɵelementEnd()()(),t.ɵɵelementStart(28,"div",1)(29,"div",6),t.ɵɵpipe(30,"translate"),t.ɵɵelementStart(31,"div",7),t.ɵɵtext(32),t.ɵɵpipe(33,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(34,"mat-form-field",3),t.ɵɵelement(35,"input",13),t.ɵɵpipe(36,"translate"),t.ɵɵtemplate(37,QY,3,5,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵtemplate(38,eX,10,10,"div",14),t.ɵɵelementStart(39,"div",1)(40,"div",6),t.ɵɵpipe(41,"translate"),t.ɵɵelementStart(42,"div",7),t.ɵɵtext(43),t.ɵɵpipe(44,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(45,"mat-form-field",3),t.ɵɵelement(46,"input",15),t.ɵɵpipe(47,"translate"),t.ɵɵtemplate(48,tX,3,5,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(49,"div",16)(50,"mat-slide-toggle",17)(51,"mat-label",18),t.ɵɵpipe(52,"translate"),t.ɵɵelementStart(53,"div",7),t.ɵɵtext(54),t.ɵɵpipe(55,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(56,"div",16)(57,"mat-slide-toggle",19)(58,"mat-label",18),t.ɵɵpipe(59,"translate"),t.ɵɵtext(60),t.ɵɵpipe(61,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelement(62,"tb-security-config",20),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.serverConfigFormGroup),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,24,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.serverConfigFormGroup.get("url").hasError("required")&&n.serverConfigFormGroup.get("url").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(10,26,"gateway.hints.opc-timeout")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(13,28,"gateway.timeout")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,30,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional((n.serverConfigFormGroup.get("timeoutInMillis").hasError("required")||n.serverConfigFormGroup.get("timeoutInMillis").hasError("min"))&&n.serverConfigFormGroup.get("timeoutInMillis").touched?17:18),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(21,32,"gateway.hints.security-policy")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(24,34,"gateway.security-policy")),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.securityPolicyTypes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(30,36,"gateway.hints.scan-period")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(33,38,"gateway.scan-period")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(36,40,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(n.serverConfigFormGroup.get("scanPeriodInMillis").hasError("required")||n.serverConfigFormGroup.get("scanPeriodInMillis").hasError("min"))&&n.serverConfigFormGroup.get("scanPeriodInMillis").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!n.hideNewFields),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(41,42,"gateway.hints.sub-check-period")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(44,44,"gateway.sub-check-period")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(47,46,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(n.serverConfigFormGroup.get("subCheckPeriodInMillis").hasError("required")||n.serverConfigFormGroup.get("subCheckPeriodInMillis").hasError("min"))&&n.serverConfigFormGroup.get("subCheckPeriodInMillis").touched),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(52,48,"gateway.hints.enable-subscription")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(55,50,"gateway.enable-subscription")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(59,52,"gateway.hints.show-map")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(61,54,"gateway.show-map")," "),t.ɵɵadvance(2),t.ɵɵproperty("mode",n.SecurityMode.extendedCertificates))},dependencies:t.ɵɵgetComponentDepsFactory(nX,[j,_,jY,qn,Qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}'],changeDetection:d.OnPush})}}e("OpcServerConfigComponent",nX),Ge([I()],nX.prototype,"hideNewFields",void 0);class aX extends zi{constructor(){super(...arguments),this.withReportStrategy=!0,this.mappingTypes=Da,this.isLegacy=!0}initBasicFormGroup(){return this.fb.group({mapping:[],server:[]})}mapConfigToFormValue(e){return{server:e.server?Zi.mapServerToUpgradedVersion(e.server):{},mapping:e.server?.mapping?Zi.mapMappingToUpgradedVersion(e.server.mapping):[]}}getMappedValue(e){return{server:Zi.mapServerToDowngradedVersion(e)}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(aX)))(n||aX)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:aX,selectors:[["tb-opc-ua-legacy-basic-config"]],inputs:{withReportStrategy:"withReportStrategy"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>aX)),multi:!0},{provide:K,useExisting:c((()=>aX)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:11,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","server",3,"hideNewFields"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","mapping",3,"required","withReportStrategy","mappingType"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-opc-server-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-mapping-table",5),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,11,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,13,"gateway.server"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("hideNewFields",n.isLegacy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,15,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("required",!0)("withReportStrategy",n.withReportStrategy)("mappingType",n.mappingTypes.OPCUA))},dependencies:t.ɵɵgetComponentDepsFactory(aX,[j,_,jY,RY,nX]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}e("OpcUaLegacyBasicConfigComponent",aX),Ge([I()],aX.prototype,"withReportStrategy",void 0);class iX extends zi{constructor(){super(...arguments),this.withReportStrategy=!0,this.mappingTypes=Da,this.isLegacy=!1}initBasicFormGroup(){return this.fb.group({mapping:[],server:[]})}mapConfigToFormValue(e){return{server:e.server??{},mapping:e.mapping??[]}}getMappedValue(e){return{server:e.server,mapping:e.mapping}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(iX)))(n||iX)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:iX,selectors:[["tb-opc-ua-basic-config"]],inputs:{withReportStrategy:"withReportStrategy"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>iX)),multi:!0},{provide:K,useExisting:c((()=>iX)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:11,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","server",3,"hideNewFields"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","mapping",3,"required","withReportStrategy","mappingType"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-opc-server-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-mapping-table",5),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,11,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,13,"gateway.server"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("hideNewFields",n.isLegacy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,15,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("required",!0)("withReportStrategy",n.withReportStrategy)("mappingType",n.mappingTypes.OPCUA))},dependencies:t.ɵɵgetComponentDepsFactory(iX,[j,_,jY,RY,nX]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}e("OpcUaBasicConfigComponent",iX),Ge([I()],iX.prototype,"withReportStrategy",void 0);class rX extends zi{constructor(){super(...arguments),this.withReportStrategy=!0,this.MappingType=Da}initBasicFormGroup(){return this.fb.group({mapping:[],requestsMapping:[],broker:[],workers:[]})}getRequestDataArray(e){const t=[];return Fe(e)&&Object.keys(e).forEach((n=>{for(const a of e[n])t.push({requestType:n,requestValue:a})})),t}getRequestDataObject(e){return e.reduce(((e,{requestType:t,requestValue:n})=>(e[t].push(n),e)),{connectRequests:[],disconnectRequests:[],attributeRequests:[],attributeUpdates:[],serverSideRpc:[]})}getBrokerMappedValue(e,t){return{...e,maxNumberOfWorkers:t.maxNumberOfWorkers??100,maxMessageNumberPerWorker:t.maxMessageNumberPerWorker??10}}writeValue(e){this.basicFormGroup.setValue(this.mapConfigToFormValue(e),{emitEvent:!1})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(rX)))(n||rX)}})()}static{this.ɵdir=t.ɵɵdefineDirective({type:rX,inputs:{withReportStrategy:"withReportStrategy"},features:[t.ɵɵInheritDefinitionFeature]})}}function oX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",8),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.max-number-of-workers-required"))}function sX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",8),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.max-messages-queue-for-worker-required"))}e("MqttBasicConfigDirective",rX),Ge([I()],rX.prototype,"withReportStrategy",void 0);class lX{constructor(e){this.fb=e,this.destroy$=new te,this.workersConfigFormGroup=this.fb.group({maxNumberOfWorkers:[100,[$.required,$.min(1)]],maxMessageNumberPerWorker:[10,[$.required,$.min(1)]]}),this.workersConfigFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){const{maxNumberOfWorkers:t,maxMessageNumberPerWorker:n}=e;this.workersConfigFormGroup.reset({maxNumberOfWorkers:t||100,maxMessageNumberPerWorker:n||10},{emitEvent:!1})}validate(){return this.workersConfigFormGroup.valid?null:{workersConfigFormGroup:{valid:!1}}}static{this.ɵfac=function(e){return new(e||lX)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:lX,selectors:[["tb-workers-config-control"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>lX)),multi:!0},{provide:K,useExisting:c((()=>lX)),multi:!0}]),t.ɵɵStandaloneFeature],decls:21,vars:21,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width","tb-required",2,"width","50%",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip",""],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","type","number","min","1","formControlName","maxNumberOfWorkers",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matInput","","name","value","type","number","min","1","formControlName","maxMessageNumberPerWorker",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵpipe(3,"translate"),t.ɵɵelementStart(4,"div",3),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"mat-form-field",4),t.ɵɵelement(8,"input",5),t.ɵɵpipe(9,"translate"),t.ɵɵtemplate(10,oX,3,3,"mat-icon",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"div",1)(12,"div",2),t.ɵɵpipe(13,"translate"),t.ɵɵelementStart(14,"div",3),t.ɵɵtext(15),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"mat-form-field",4),t.ɵɵelement(18,"input",7),t.ɵɵpipe(19,"translate"),t.ɵɵtemplate(20,sX,3,3,"mat-icon",6),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.workersConfigFormGroup),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,9,"gateway.max-number-of-workers-hint")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(6,11,"gateway.max-number-of-workers")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(9,13,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.workersConfigFormGroup.get("maxNumberOfWorkers").hasError("min")||n.workersConfigFormGroup.get("maxNumberOfWorkers").hasError("required")&&n.workersConfigFormGroup.get("maxNumberOfWorkers").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(13,15,"gateway.max-messages-queue-for-worker-hint")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(16,17,"gateway.max-messages-queue-for-worker")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(19,19,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.workersConfigFormGroup.get("maxMessageNumberPerWorker").hasError("min")||n.workersConfigFormGroup.get("maxMessageNumberPerWorker").hasError("required")&&n.workersConfigFormGroup.get("maxMessageNumberPerWorker").touched))},dependencies:t.ɵɵgetComponentDepsFactory(lX,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}function pX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",13),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function cX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",13),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.brokerConfigFormGroup.get("port")))}}function dX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",14),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.value),t.ɵɵadvance(),t.ɵɵtextInterpolate(e.name)}}function uX(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",15),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.generate("clientId"))})),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"autorenew"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.generate-client-id"))}e("WorkersConfigControlComponent",lX);class mX{constructor(e,t){this.fb=e,this.cdr=t,this.mqttVersions=ta,this.portLimits=Ia,this.destroy$=new te,this.brokerConfigFormGroup=this.fb.group({host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],version:[5,[]],clientId:["tb_gw_"+Re(5),[$.pattern(an)]],security:[]}),this.brokerConfigFormGroup.valueChanges.subscribe((e=>{this.onChange(e),this.onTouched()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generate(e){this.brokerConfigFormGroup.get(e)?.patchValue("tb_gw_"+Re(5))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){const{version:t=5,clientId:n=`tb_gw_${Re(5)}`,security:a={}}=e;this.brokerConfigFormGroup.reset({...e,version:t,clientId:n,security:a},{emitEvent:!1}),this.cdr.markForCheck()}validate(){return this.brokerConfigFormGroup.valid?null:{brokerConfigFormGroup:{valid:!1}}}static{this.ɵfac=function(e){return new(e||mX)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:mX,selectors:[["tb-broker-config-control"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>mX)),multi:!0},{provide:K,useExisting:c((()=>mX)),multi:!0}]),t.ɵɵStandaloneFeature],decls:29,vars:16,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["translate","",1,"fixed-title-width"],["formControlName","version"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","value","formControlName","clientId",3,"placeholder"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["formControlName","security"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[3,"value"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"click","matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",3),t.ɵɵelement(5,"input",4),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,pX,3,3,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",1)(9,"div",2),t.ɵɵtext(10,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field",3),t.ɵɵelement(12,"input",6),t.ɵɵpipe(13,"translate"),t.ɵɵtemplate(14,cX,3,3,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"div",1)(16,"div",7),t.ɵɵtext(17,"gateway.mqtt-version"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"mat-form-field",3)(19,"mat-select",8),t.ɵɵtemplate(20,dX,2,2,"mat-option",9),t.ɵɵelementEnd()()(),t.ɵɵelementStart(21,"div",1)(22,"div",7),t.ɵɵtext(23,"gateway.client-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(24,"mat-form-field",3),t.ɵɵelement(25,"input",10),t.ɵɵpipe(26,"translate"),t.ɵɵtemplate(27,uX,4,3,"button",11),t.ɵɵelementEnd()(),t.ɵɵelement(28,"tb-security-config",12),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.brokerConfigFormGroup),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,10,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.brokerConfigFormGroup.get("host").hasError("required")&&n.brokerConfigFormGroup.get("host").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(13,12,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(n.brokerConfigFormGroup.get("port").hasError("required")||n.brokerConfigFormGroup.get("port").hasError("min")||n.brokerConfigFormGroup.get("port").hasError("max"))&&n.brokerConfigFormGroup.get("port").touched),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.mqttVersions),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(26,14,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!n.brokerConfigFormGroup.get("clientId").value))},dependencies:t.ɵɵgetComponentDepsFactory(mX,[j,_,jY,m$]),encapsulation:2,changeDetection:d.OnPush})}}e("BrokerConfigControlComponent",mX);class hX extends rX{mapConfigToFormValue(e){const{broker:t,mapping:n=[],requestsMapping:a}=e;return{workers:t&&(t.maxNumberOfWorkers||t.maxMessageNumberPerWorker)?{maxNumberOfWorkers:t.maxNumberOfWorkers,maxMessageNumberPerWorker:t.maxMessageNumberPerWorker}:{},mapping:n??[],broker:t??{},requestsMapping:this.getRequestDataArray(a)}}getMappedValue(e){const{broker:t,workers:n,mapping:a,requestsMapping:i}=e||{};return{broker:this.getBrokerMappedValue(t,n),mapping:a,requestsMapping:i?.length?this.getRequestDataObject(i):{}}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(hX)))(n||hX)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:hX,selectors:[["tb-mqtt-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>hX)),multi:!0},{provide:K,useExisting:c((()=>hX)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:24,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","broker"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","mapping",3,"withReportStrategy","required","mappingType"],["formControlName","requestsMapping",3,"withReportStrategy","mappingType"],[1,"tb-form-panel","no-border","no-padding"],["formControlName","workers"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-broker-config-control",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-mapping-table",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-tab",1),t.ɵɵpipe(12,"translate"),t.ɵɵelementStart(13,"div",4),t.ɵɵelement(14,"tb-mapping-table",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"mat-tab",1),t.ɵɵpipe(16,"translate"),t.ɵɵelementStart(17,"div",7),t.ɵɵelement(18,"tb-workers-config-control",8),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,14,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,16,"gateway.broker.connection"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,18,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("withReportStrategy",n.withReportStrategy)("required",!0)("mappingType",n.MappingType.DATA),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(12,20,"gateway.requests-mapping")),t.ɵɵadvance(3),t.ɵɵproperty("withReportStrategy",n.withReportStrategy)("mappingType",n.MappingType.REQUESTS),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(16,22,"gateway.workers-settings")))},dependencies:t.ɵɵgetComponentDepsFactory(hX,[j,_,lX,mX,RY]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}e("MqttBasicConfigComponent",hX);class gX extends rX{mapConfigToFormValue(e){const{broker:t,mapping:n=[],connectRequests:a=[],disconnectRequests:i=[],attributeRequests:r=[],attributeUpdates:o=[],serverSideRpc:s=[]}=e,l=Bi.mapRequestsToUpgradedVersion({connectRequests:a,disconnectRequests:i,attributeRequests:r,attributeUpdates:o,serverSideRpc:s});return{workers:t&&(t.maxNumberOfWorkers||t.maxMessageNumberPerWorker)?{maxNumberOfWorkers:t.maxNumberOfWorkers,maxMessageNumberPerWorker:t.maxMessageNumberPerWorker}:{},mapping:Bi.mapMappingToUpgradedVersion(n)||[],broker:t||{},requestsMapping:this.getRequestDataArray(l)}}getMappedValue(e){const{broker:t,workers:n,mapping:a,requestsMapping:i}=e||{},r=i?.length?this.getRequestDataObject(i):{};return{broker:this.getBrokerMappedValue(t,n),mapping:Bi.mapMappingToDowngradedVersion(a),...Bi.mapRequestsToDowngradedVersion(r)}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(gX)))(n||gX)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:gX,selectors:[["tb-mqtt-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>gX)),multi:!0},{provide:K,useExisting:c((()=>gX)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:24,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","broker"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","mapping",3,"withReportStrategy","required","mappingType"],["formControlName","requestsMapping",3,"withReportStrategy","mappingType"],[1,"tb-form-panel","no-border","no-padding"],["formControlName","workers"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-broker-config-control",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-mapping-table",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-tab",1),t.ɵɵpipe(12,"translate"),t.ɵɵelementStart(13,"div",4),t.ɵɵelement(14,"tb-mapping-table",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"mat-tab",1),t.ɵɵpipe(16,"translate"),t.ɵɵelementStart(17,"div",7),t.ɵɵelement(18,"tb-workers-config-control",8),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,14,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,16,"gateway.broker.connection"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,18,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("withReportStrategy",n.withReportStrategy)("required",!0)("mappingType",n.MappingType.DATA),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(12,20,"gateway.requests-mapping")),t.ɵɵadvance(3),t.ɵɵproperty("withReportStrategy",n.withReportStrategy)("mappingType",n.MappingType.REQUESTS),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(16,22,"gateway.workers-settings")))},dependencies:t.ɵɵgetComponentDepsFactory(gX,[j,_,lX,mX,RY]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}e("MqttLegacyBasicConfigComponent",gX);class fX extends A{constructor(e,t,n,a,i){super(t,n,i),this.fb=e,this.store=t,this.router=n,this.data=a,this.dialogRef=i,this.portLimits=Ia,this.modbusProtocolTypes=Object.values(Ka),this.modbusMethodTypes=Object.values(Ya),this.modbusSerialMethodTypes=Object.values(Xa),this.modbusParities=Object.values(Za),this.modbusByteSizes=ni,this.modbusBaudrates=ti,this.modbusOrderType=Object.values(Qa),this.ModbusProtocolType=Ka,this.ModbusParityLabelsMap=li,this.ModbusProtocolLabelsMap=si,this.ModbusMethodLabelsMap=oi,this.ReportStrategyDefaultValue=en,this.modbusHelpLink=O+"/docs/iot-gateway/config/modbus/#section-master-description-and-configuration-parameters",this.serialSpecificControlKeys=["serialPort","baudrate","stopbits","bytesize","parity","strict"],this.tcpUdpSpecificControlKeys=["port","security","host"],this.destroy$=new te,this.showSecurityControl=this.fb.control(!1),this.initializeSlaveFormGroup(),this.updateSlaveFormGroup(),this.updateControlsEnabling(this.data.value.type),this.observeTypeChange(),this.observeShowSecurity(),this.showSecurityControl.patchValue(!!this.data.value.security&&!Se(this.data.value.security,{}))}get protocolType(){return this.slaveConfigFormGroup.get("type").value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){this.dialogRef.close(null)}add(){this.slaveConfigFormGroup.valid&&this.dialogRef.close(this.getSlaveResultData())}initializeSlaveFormGroup(){this.slaveConfigFormGroup=this.fb.group({type:[Ka.TCP],host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],serialPort:["",[$.required,$.pattern(an)]],method:[Ya.SOCKET,[$.required]],baudrate:[this.modbusBaudrates[0]],stopbits:[1],bytesize:[ni[0]],parity:[Za.None],strict:[!0],unitId:[null,[$.required]],deviceName:["",[$.required,$.pattern(an)]],deviceType:["",[$.required,$.pattern(an)]],timeout:[35],byteOrder:[Qa.BIG],wordOrder:[Qa.BIG],retries:[!0],retryOnEmpty:[!0],retryOnInvalid:[!0],pollPeriod:[1e3,[$.required]],connectAttemptTimeMs:[500,[$.required]],connectAttemptCount:[5,[$.required]],waitAfterFailedAttemptsMs:[3e4,[$.required]],values:[{}],security:[{}]}),this.addFieldsToFormGroup()}updateSlaveFormGroup(){this.slaveConfigFormGroup.patchValue({...this.data.value,port:this.data.value.type===Ka.Serial?null:this.data.value.port,serialPort:this.data.value.type===Ka.Serial?this.data.value.port:"",values:{attributes:this.data.value.attributes??[],timeseries:this.data.value.timeseries??[],attributeUpdates:this.data.value.attributeUpdates??[],rpc:this.data.value.rpc??[]}})}observeTypeChange(){this.slaveConfigFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateControlsEnabling(e),this.updateMethodType(e)}))}updateMethodType(e){this.slaveConfigFormGroup.get("method").value!==Ya.RTU&&this.slaveConfigFormGroup.get("method").patchValue(e===Ka.Serial?Xa.ASCII:Ya.SOCKET,{emitEvent:!1})}updateControlsEnabling(e){const[t,n]=e===Ka.Serial?[this.serialSpecificControlKeys,this.tcpUdpSpecificControlKeys]:[this.tcpUdpSpecificControlKeys,this.serialSpecificControlKeys];t.forEach((e=>this.slaveConfigFormGroup.get(e)?.enable({emitEvent:!1}))),n.forEach((e=>this.slaveConfigFormGroup.get(e)?.disable({emitEvent:!1}))),this.updateSecurityEnabling(this.showSecurityControl.value)}observeShowSecurity(){this.showSecurityControl.valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateSecurityEnabling(e)))}updateSecurityEnabling(e){e&&this.protocolType!==Ka.Serial?this.slaveConfigFormGroup.get("security").enable({emitEvent:!1}):this.slaveConfigFormGroup.get("security").disable({emitEvent:!1})}static{this.ɵfac=function(e){return new(e||fX)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef))}}static{this.ɵdir=t.ɵɵdefineDirective({type:fX,features:[t.ɵɵInheritDefinitionFeature]})}}e("ModbusSlaveDialogAbstract",fX);const yX=()=>({maxWidth:"970px"});function vX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",20),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate3(" ",e.get("tag").value,"",": ","",e.get("value").value," ")}}function bX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21)(1,"div",22),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementStart(4,"span",23),t.ɵɵtext(5),t.ɵɵelementEnd()(),t.ɵɵelementStart(6,"div",24),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"span",25),t.ɵɵtext(10),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"div",24),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementStart(14,"span",25),t.ɵɵtext(15),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(3,6,n.keysType===n.ModbusValueKey.RPC_REQUESTS?"gateway.method":"gateway.key"),": "),t.ɵɵadvance(3),t.ɵɵtextInterpolate(e.get("tag").value),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(8,8,"gateway.address"),": "),t.ɵɵadvance(3),t.ɵɵtextInterpolate(e.get("address").value),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(13,10,"gateway.type"),": "),t.ɵɵadvance(3),t.ɵɵtextInterpolate(e.get("type").value)}}function xX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(4);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.keysType===e.ModbusValueKey.RPC_REQUESTS?"gateway.method-required":"gateway.key-required"))}}function wX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",46),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function SX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",46),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(5);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.ModbusFunctionCodeTranslationsMap.get(e))," ")}}function CX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",30)(1,"div",35),t.ɵɵtext(2,"gateway.function-code"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",32)(4,"mat-select",47),t.ɵɵtemplate(5,SX,3,4,"mat-option",37),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.functionCodesMap.get(e.get("id").value)||n.defaultFunctionCodes)}}function _X(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.objects-count-required"))}function TX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.modbus.max-bit"))}function IX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",30)(1,"div",48),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.bit"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",49),t.ɵɵelement(5,"input",50),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,TX,3,3,"mat-icon",34),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext(3).$implicit;t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.bit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("bit").hasError("max")&&e.get("bit").touched)}}function EX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",46),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(6);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.BitTargetTypeTranslationMap.get(e)))}}function MX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",30)(1,"div",48),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.bit-target-type"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",51)(5,"mat-form-field",52)(6,"mat-select",53),t.ɵɵtemplate(7,EX,3,4,"mat-option",37),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext(5);t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,2,"gateway.hints.modbus.bit-target-type")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",e.bitTargetTypes)}}function kX(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,IX,8,7,"div",38)(2,MX,8,4,"div",38),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.get("objectsCount").value>1),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!n.hideNewFields)}}function PX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.address-required"))}function DX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",46),t.ɵɵelement(1,"mat-icon",62),t.ɵɵelementStart(2,"span"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(5);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("svgIcon",a.ModifierTypesMap.get(e).icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,a.ModifierTypesMap.get(e).name))}}function OX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.modifier-invalid"))}function AX(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",54)(1,"mat-expansion-panel",15)(2,"mat-expansion-panel-header",16)(3,"mat-panel-title")(4,"mat-slide-toggle",55),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(5,"mat-label",56),t.ɵɵpipe(6,"translate"),t.ɵɵtext(7),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(9,"div",51)(10,"div",57)(11,"div",35),t.ɵɵtext(12,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",52)(14,"mat-select",58)(15,"mat-select-trigger")(16,"div",59),t.ɵɵelement(17,"mat-icon",60),t.ɵɵelementStart(18,"span"),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(21,DX,5,5,"mat-option",37),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(22,"div",30)(23,"div",35),t.ɵɵtext(24,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"mat-form-field",49),t.ɵɵelement(26,"input",61),t.ɵɵpipe(27,"translate"),t.ɵɵtemplate(28,OX,3,3,"mat-icon",34),t.ɵɵelementEnd()()()()}if(2&e){let e,n;const a=t.ɵɵnextContext(2).$implicit,i=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵproperty("expanded",i.enableModifiersControlMap.get(a.get("id").value).value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",i.enableModifiersControlMap.get(a.get("id").value)),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(6,9,"gateway.hints.modbus.modifier")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(8,11,"gateway.modifier")," "),t.ɵɵadvance(10),t.ɵɵproperty("svgIcon",null==(e=i.ModifierTypesMap.get(a.get("modifierType").value))?null:e.icon),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(20,13,null==(n=i.ModifierTypesMap.get(a.get("modifierType").value))?null:n.name)),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",i.modifierTypes),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(27,15,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",a.get("modifierValue").hasError("pattern")&&a.get("modifierValue").touched)}}function FX(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",45),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function RX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",30)(1,"div",63),t.ɵɵtext(2,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",32),t.ɵɵelement(4,"input",64),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,FX,3,3,"mat-icon",34),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,2,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("value").hasError("required")&&e.get("value").touched)}}function BX(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",65),2&e){const e=t.ɵɵnextContext(4);t.ɵɵproperty("defaultValue",e.ReportStrategyDefaultValue.Key)("isExpansionMode",!0)}}function NX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",26),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelement(3,"div",27),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",28)(5,"div",29),t.ɵɵtext(6,"gateway.platform-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",30)(8,"div",31),t.ɵɵpipe(9,"translate"),t.ɵɵtext(10),t.ɵɵpipe(11,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",32),t.ɵɵelement(13,"input",33),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,xX,3,3,"mat-icon",34),t.ɵɵelementEnd()()(),t.ɵɵelementStart(16,"div",28)(17,"div",29),t.ɵɵtext(18,"gateway.connector-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",30)(20,"div",35),t.ɵɵtext(21," gateway.type "),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"mat-form-field",32)(23,"mat-select",36),t.ɵɵtemplate(24,wX,2,2,"mat-option",37),t.ɵɵelementEnd()()(),t.ɵɵtemplate(25,CX,6,1,"div",38),t.ɵɵelementStart(26,"div",30)(27,"div",39),t.ɵɵpipe(28,"translate"),t.ɵɵtext(29,"gateway.objects-count"),t.ɵɵelementEnd(),t.ɵɵelementStart(30,"mat-form-field",32),t.ɵɵelement(31,"input",40),t.ɵɵpipe(32,"translate"),t.ɵɵtemplate(33,_X,3,3,"mat-icon",34),t.ɵɵelementEnd()(),t.ɵɵtemplate(34,kX,3,2,"ng-container",41),t.ɵɵelementStart(35,"div",30)(36,"div",39),t.ɵɵpipe(37,"translate"),t.ɵɵtext(38,"gateway.address"),t.ɵɵelementEnd(),t.ɵɵelementStart(39,"mat-form-field",32),t.ɵɵelement(40,"input",42),t.ɵɵpipe(41,"translate"),t.ɵɵtemplate(42,PX,3,3,"mat-icon",34),t.ɵɵelementEnd()(),t.ɵɵtemplate(43,AX,29,17,"div",43)(44,RX,7,4,"div",38)(45,BX,1,2,"tb-report-strategy",44),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,20,"gateway.hints.modbus.data-keys")," "),t.ɵɵadvance(2),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/modbus-functions-data-types_fn")("tb-help-popup-style",t.ɵɵpureFunction0(36,yX)),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(9,22,n.keysType===n.ModbusValueKey.RPC_REQUESTS?"gateway.hints.modbus.method":"gateway.hints.modbus.key")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(11,24,n.keysType===n.ModbusValueKey.RPC_REQUESTS?"gateway.method-name":"gateway.key")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,26,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("tag").hasError("required")&&e.get("tag").touched),t.ɵɵadvance(9),t.ɵɵproperty("ngForOf",n.modbusDataTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.withFunctionCode),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(28,28,"gateway.hints.modbus.objects-count")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(32,30,"gateway.set")),t.ɵɵproperty("readonly",!n.ModbusEditableDataTypes.includes(e.get("type").value)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("objectsCount").hasError("required")&&e.get("objectsCount").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.get("type").value===n.ModbusDataType.BITS),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(37,32,"gateway.hints.modbus.address")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(41,34,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("address").hasError("required")&&e.get("address").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.showModifiersMap.get(e.get("id").value)),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.isMaster),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.withReportStrategy)}}function LX(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",12)(1,"div",13),t.ɵɵelementContainerStart(2,14),t.ɵɵelementStart(3,"mat-expansion-panel",15)(4,"mat-expansion-panel-header",16)(5,"mat-panel-title"),t.ɵɵtemplate(6,vX,2,3,"div",17)(7,bX,16,12,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()(),t.ɵɵtemplate(9,NX,46,37,"ng-template",18),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"button",19),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"delete"),t.ɵɵelementEnd()()()}if(2&e){const e=n.$implicit,a=n.last,i=t.ɵɵreference(8),r=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("formGroup",e),t.ɵɵadvance(),t.ɵɵproperty("expanded",a),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r.isMaster)("ngIfElse",i),t.ɵɵadvance(4),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(11,5,r.deleteKeyTitle))}}function VX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10),t.ɵɵtemplate(1,LX,14,7,"div",11),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.keysListFormArray.controls)("ngForTrackBy",e.trackByControlId)}}function qX(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",66)(1,"span",67),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.noKeysText)}}class GX{constructor(e,t){this.fb=e,this.popover=t,this.isMaster=!1,this.hideNewFields=!1,this.keysDataApplied=new u,this.withFunctionCode=!0,this.withReportStrategy=!0,this.enableModifiersControlMap=new Map,this.showModifiersMap=new Map,this.functionCodesMap=new Map,this.defaultFunctionCodes=[],this.modbusDataTypes=Object.values(Wt),this.modifierTypes=Object.values(mi),this.bitTargetTypes=Object.values(ii),this.BitTargetTypeTranslationMap=ri,this.ModbusEditableDataTypes=$t,this.ModbusFunctionCodeTranslationsMap=Zt,this.ModifierTypesMap=hi,this.ReportStrategyDefaultValue=en,this.ModbusDataType=Wt,this.ModbusValueKey=ei,this.destroy$=new te,this.defaultReadFunctionCodes=[3,4],this.bitsReadFunctionCodes=[1,2],this.defaultWriteFunctionCodes=[6,16],this.bitsWriteFunctionCodes=[5,15]}ngOnInit(){this.withFunctionCode=!this.isMaster||this.keysType!==ei.ATTRIBUTES&&this.keysType!==ei.TIMESERIES,this.withReportStrategy=!(this.isMaster||this.keysType!==ei.ATTRIBUTES&&this.keysType!==ei.TIMESERIES||this.hideNewFields),this.keysListFormArray=this.prepareKeysFormArray(this.values),this.defaultFunctionCodes=this.getDefaultFunctionCodes()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByControlId(e,t){return t.value.id}addKey(){const e=Re(5),t=this.fb.group({tag:["",[$.required,$.pattern(an)]],value:[{value:"",disabled:!this.isMaster},[$.required,$.pattern(an)]],type:[Wt.BYTES,[$.required]],address:[null,[$.required]],objectsCount:[1,[$.required]],functionCode:[{value:this.getDefaultFunctionCodes()[0],disabled:!this.withFunctionCode},[$.required]],reportStrategy:[{value:null,disabled:!this.withReportStrategy}],modifierType:[{value:mi.MULTIPLIER,disabled:!0}],modifierValue:[{value:1,disabled:!0},[$.pattern(on)]],bit:[{value:null,disabled:!0}],bitTargetType:[{value:ii.IntegerType,disabled:!0}],id:[{value:e,disabled:!0}]});this.showModifiersMap.set(e,!1),this.enableModifiersControlMap.set(e,this.fb.control(!1)),this.observeKeyDataType(t),this.observeObjectsCount(t),this.observeEnableModifier(t),this.keysListFormArray.push(t)}deleteKey(e,t){e&&e.stopPropagation(),this.keysListFormArray.removeAt(t),this.keysListFormArray.markAsDirty()}cancel(){this.popover.hide()}applyKeysData(){this.keysDataApplied.emit(this.getFormValue())}getFormValue(){return this.mapKeysWithModifier(this.withReportStrategy?this.cleanUpEmptyStrategies(this.keysListFormArray.value):this.keysListFormArray.value)}cleanUpEmptyStrategies(e){return e.map((e=>{const{reportStrategy:t,...n}=e;return t?e:n}))}mapKeysWithModifier(e){return e.map(((e,t)=>{if(this.showModifiersMap.get(this.keysListFormArray.controls[t].get("id").value)){const{modifierType:t,modifierValue:n,...a}=e;return t?{...a,[t]:n}:a}return e}))}prepareKeysFormArray(e){const t=[];return e&&e.forEach((e=>{const n=this.createDataKeyFormGroup(e);this.observeKeyDataType(n),this.observeObjectsCount(n),this.observeEnableModifier(n),this.functionCodesMap.set(n.get("id").value,this.getFunctionCodes(e.type)),t.push(n)})),this.fb.array(t)}createDataKeyFormGroup(e){const{tag:t,value:n,type:a,address:i,objectsCount:r,functionCode:o,multiplier:s,divider:l,reportStrategy:p,bit:c,bitTargetType:d}=e,u=Re(5),m=this.shouldShowModifier(a);return this.showModifiersMap.set(u,m),this.enableModifiersControlMap.set(u,this.fb.control((s||l)&&m)),this.fb.group({tag:[t,[$.required,$.pattern(an)]],value:[{value:n,disabled:!this.isMaster},[$.required,$.pattern(an)]],type:[a,[$.required]],address:[i,[$.required]],objectsCount:[r,[$.required]],functionCode:[{value:o,disabled:!this.withFunctionCode},[$.required]],modifierType:[{value:l?mi.DIVIDER:mi.MULTIPLIER,disabled:!this.enableModifiersControlMap.get(u).value}],bit:[{value:c,disabled:a!==Wt.BITS||r<2},[$.max(r-1)]],bitTargetType:[{value:d??ii.IntegerType,disabled:a!==Wt.BITS||this.hideNewFields}],modifierValue:[{value:s??l??1,disabled:!this.enableModifiersControlMap.get(u).value},[$.pattern(on)]],id:[{value:u,disabled:!0}],reportStrategy:[{value:p,disabled:!this.withReportStrategy}]})}shouldShowModifier(e){return!(this.isMaster||this.keysType!==ei.ATTRIBUTES&&this.keysType!==ei.TIMESERIES||this.ModbusEditableDataTypes.includes(e))}observeKeyDataType(e){e.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((t=>{this.ModbusEditableDataTypes.includes(t)||e.get("objectsCount").patchValue(Kt[t],{emitEvent:!1}),this.toggleBitsFields(e);const n=this.shouldShowModifier(t);this.showModifiersMap.set(e.get("id").value,n),this.updateFunctionCodes(e,t)}))}observeObjectsCount(e){e.get("objectsCount").valueChanges.pipe(ue((()=>e.get("type").value===Wt.BITS)),le(this.destroy$)).subscribe((()=>this.toggleBitsFields(e)))}toggleBitsFields(e){const{objectsCount:t,type:n,bit:a,bitTargetType:i}=e.controls,r=n.value===Wt.BITS,o=t.value>1;r&&o?(a.enable({emitEvent:!1}),a.setValidators($.max(t.value-1))):a.disable({emitEvent:!1}),a.updateValueAndValidity({emitEvent:!1}),i[r?"enable":"disable"]({emitEvent:!1})}observeEnableModifier(e){this.enableModifiersControlMap.get(e.get("id").value).valueChanges.pipe(le(this.destroy$)).subscribe((t=>this.toggleModifierControls(e,t)))}toggleModifierControls(e,t){const n=e.get("modifierType"),a=e.get("modifierValue");n[t?"enable":"disable"]({emitEvent:!1}),a[t?"enable":"disable"]({emitEvent:!1}),n.markAsDirty(),a.markAsDirty()}updateFunctionCodes(e,t){const n=this.getFunctionCodes(t);this.functionCodesMap.set(e.get("id").value,n),n.includes(e.get("functionCode").value)||e.get("functionCode").patchValue(n[0],{emitEvent:!1})}getFunctionCodes(e){const t=[...e===Wt.BITS?this.bitsWriteFunctionCodes:[],...this.defaultWriteFunctionCodes];if(this.keysType===ei.ATTRIBUTES_UPDATES)return t.sort(((e,t)=>e-t));const n=[...this.defaultReadFunctionCodes];return e===Wt.BITS&&n.push(...this.bitsReadFunctionCodes),this.keysType===ei.RPC_REQUESTS&&n.push(...t),n.sort(((e,t)=>e-t))}getDefaultFunctionCodes(){return this.keysType===ei.ATTRIBUTES_UPDATES?this.defaultWriteFunctionCodes:this.keysType===ei.RPC_REQUESTS?[...this.defaultReadFunctionCodes,...this.defaultWriteFunctionCodes]:this.defaultReadFunctionCodes}static{this.ɵfac=function(e){return new(e||GX)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(at.TbPopoverComponent))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:GX,selectors:[["tb-modbus-data-keys-panel"]],inputs:{isMaster:"isMaster",hideNewFields:"hideNewFields",panelTitle:"panelTitle",addKeyTitle:"addKeyTitle",deleteKeyTitle:"deleteKeyTitle",noKeysText:"noKeysText",keysType:"keysType",values:"values"},outputs:{keysDataApplied:"keysDataApplied"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:19,vars:16,consts:[["noKeys",""],["tagName",""],[1,"tb-modbus-keys-panel"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel-title"],["class","tb-form-panel no-border no-padding key-panel",4,"ngIf","ngIfElse"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-flex","flex-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"tb-form-panel","no-border","no-padding","key-panel"],["class","tb-form-panel no-border no-padding tb-flex no-flex row center fill-width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],["class","title-container","tbTruncateWithTooltip","",4,"ngIf","ngIfElse"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["tbTruncateWithTooltip","",1,"title-container"],[1,"tb-flex"],[1,"title-container","tb-flex"],["tbTruncateWithTooltip","",1,"key-label"],[1,"title-container"],[1,"key-label"],[1,"tb-form-hint","tb-primary-fill","tb-flex","align-center"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","tag",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["translate","",1,"fixed-title-width"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-row column-xs",4,"ngIf"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","1","max","50000","name","value","formControlName","objectsCount",3,"placeholder","readonly"],[4,"ngIf"],["matInput","","type","number","min","0","max","50000","name","value","formControlName","address",3,"placeholder"],["class","tb-form-panel stroked tb-slide-toggle",4,"ngIf"],["class","stroked tb-form-panel","formControlName","reportStrategy",3,"defaultValue","isExpansionMode",4,"ngIf"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[3,"value"],["formControlName","functionCode"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","tb-suffix-absolute","flex"],["matInput","","formControlName","bit","step","1","type","number","min","0",3,"placeholder"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","fill-width"],["formControlName","bitTargetType"],[1,"tb-form-panel","stroked","tb-slide-toggle"],[1,"mat-slide",3,"click","formControl"],[3,"tb-hint-tooltip-icon"],[1,"tb-form-row","column-xs","w-full"],["formControlName","modifierType"],[1,"tb-flex","align-center"],[1,"tb-mat-18",3,"svgIcon"],["matInput","","required","","formControlName","modifierValue","step","0.1","type","number",3,"placeholder"],[1,"tb-mat-20",3,"svgIcon"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","value",3,"placeholder"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"defaultValue","isExpansionMode"],[1,"tb-flex","no-flex","center","align-center","key-panel"],["translate","",1,"tb-prompt"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2)(1,"div",3)(2,"div",4),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,VX,2,2,"div",5),t.ɵɵelementStart(6,"div")(7,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.addKey())})),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(10,qX,3,1,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(12,"div",7)(13,"button",8),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",9),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.applyKeysData())})),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(11);t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,8,n.panelTitle),""," ("+n.keysListFormArray.controls.length+")",""),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.keysListFormArray.controls.length)("ngIfElse",e),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,10,n.addKeyTitle)," "),t.ɵɵadvance(6),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,12,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.keysListFormArray.invalid||!n.keysListFormArray.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,14,"action.apply")," ")}},dependencies:t.ɵɵgetComponentDepsFactory(GX,[j,_,Xn,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-modbus-keys-panel[_ngcontent-%COMP%]{width:77vw;max-width:700px}[_nghost-%COMP%]   .tb-modbus-keys-panel[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .tb-modbus-keys-panel[_ngcontent-%COMP%]   .key-label[_ngcontent-%COMP%]{font-weight:400}[_nghost-%COMP%]   .tb-modbus-keys-panel[_ngcontent-%COMP%]   .key-panel[_ngcontent-%COMP%]{height:500px;overflow:auto}[_nghost-%COMP%]   .tb-modbus-keys-panel[_ngcontent-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:56px;height:56px;padding:16px;color:#0000008a}']})}}e("ModbusDataKeysPanelComponent",GX),Ge([I()],GX.prototype,"isMaster",void 0),Ge([I()],GX.prototype,"hideNewFields",void 0);const zX=()=>({$implicit:null}),UX=e=>({$implicit:e});function jX(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",7),t.ɵɵelementContainer(2,8),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(),n=t.ɵɵreference(4);t.ɵɵadvance(),t.ɵɵproperty("formGroup",e.valuesFormGroup),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",n)("ngTemplateOutletContext",t.ɵɵpureFunction0(3,zX))}}function HX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-tab",11),t.ɵɵpipe(1,"translate"),t.ɵɵelementStart(2,"div",7),t.ɵɵelementContainer(3,8),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2),i=t.ɵɵreference(4);t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(1,4,a.ModbusValuesTranslationsMap.get(e))),t.ɵɵadvance(2),t.ɵɵproperty("formGroup",a.valuesFormGroup.get(e)),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",t.ɵɵpureFunction1(6,UX,e))}}function WX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-tab-group",9),t.ɵɵtemplate(1,HX,4,8,"mat-tab",10),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("formGroup",e.valuesFormGroup),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.modbusRegisterTypes)}}function $X(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.tag," ")}}function KX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.tag," ")}}function YX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.tag," ")}}function XX(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.tag," ")}}function ZX(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",12)(1,"div",13),t.ɵɵtext(2,"gateway.attributes"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",14)(4,"mat-chip-listbox",15),t.ɵɵtemplate(5,$X,2,1,"mat-chip",16),t.ɵɵelementStart(6,"mat-chip",17),t.ɵɵelement(7,"label",18),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"button",19,2),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵreference(9),r=t.ɵɵnextContext();return t.ɵɵresetView(r.manageKeys(n,i,r.ModbusValueKey.ATTRIBUTES,a))})),t.ɵɵelementStart(11,"tb-icon",20),t.ɵɵtext(12,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(13,"div",12)(14,"div",13),t.ɵɵtext(15,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div",14)(17,"mat-chip-listbox",15),t.ɵɵtemplate(18,KX,2,1,"mat-chip",16),t.ɵɵelementStart(19,"mat-chip",17),t.ɵɵelement(20,"label",18),t.ɵɵelementEnd()(),t.ɵɵelementStart(21,"button",19,3),t.ɵɵpipe(23,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵreference(22),r=t.ɵɵnextContext();return t.ɵɵresetView(r.manageKeys(n,i,r.ModbusValueKey.TIMESERIES,a))})),t.ɵɵelementStart(24,"tb-icon",20),t.ɵɵtext(25,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(26,"div",12)(27,"div",13),t.ɵɵtext(28,"gateway.attribute-updates"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"div",14)(30,"mat-chip-listbox",15),t.ɵɵtemplate(31,YX,2,1,"mat-chip",16),t.ɵɵelementStart(32,"mat-chip",17),t.ɵɵelement(33,"label",18),t.ɵɵelementEnd()(),t.ɵɵelementStart(34,"button",19,4),t.ɵɵpipe(36,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵreference(35),r=t.ɵɵnextContext();return t.ɵɵresetView(r.manageKeys(n,i,r.ModbusValueKey.ATTRIBUTES_UPDATES,a))})),t.ɵɵelementStart(37,"tb-icon",20),t.ɵɵtext(38,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(39,"div",12)(40,"div",13),t.ɵɵtext(41,"gateway.rpc-requests"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"div",14)(43,"mat-chip-listbox",15),t.ɵɵtemplate(44,XX,2,1,"mat-chip",16),t.ɵɵelementStart(45,"mat-chip",17),t.ɵɵelement(46,"label",18),t.ɵɵelementEnd()(),t.ɵɵelementStart(47,"button",19,5),t.ɵɵpipe(49,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵreference(48),r=t.ɵɵnextContext();return t.ɵɵresetView(r.manageKeys(n,i,r.ModbusValueKey.RPC_REQUESTS,a))})),t.ɵɵelementStart(50,"tb-icon",20),t.ɵɵtext(51,"edit"),t.ɵɵelementEnd()()()()}if(2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵproperty("tbEllipsisChipList",a.getValueGroup(a.ModbusValueKey.ATTRIBUTES,e).value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",a.getValueGroup(a.ModbusValueKey.ATTRIBUTES,e).value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,16,"action.edit")),t.ɵɵproperty("disabled",a.disabled),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",a.getValueGroup(a.ModbusValueKey.TIMESERIES,e).value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",a.getValueGroup(a.ModbusValueKey.TIMESERIES,e).value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(23,18,"action.edit")),t.ɵɵproperty("disabled",a.disabled),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",a.getValueGroup(a.ModbusValueKey.ATTRIBUTES_UPDATES,e).value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",a.getValueGroup(a.ModbusValueKey.ATTRIBUTES_UPDATES,e).value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(36,20,"action.edit")),t.ɵɵproperty("disabled",a.disabled),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",a.getValueGroup(a.ModbusValueKey.RPC_REQUESTS,e).value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",a.getValueGroup(a.ModbusValueKey.RPC_REQUESTS,e).value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(49,22,"action.edit")),t.ɵɵproperty("disabled",a.disabled)}}class QX{constructor(e,t,n,a,i,r){this.fb=e,this.popoverService=t,this.renderer=n,this.viewContainerRef=a,this.cdr=i,this.destroyRef=r,this.singleMode=!1,this.hideNewFields=!1,this.disabled=!1,this.modbusRegisterTypes=Object.values(Ja),this.modbusValueKeys=Object.values(ei),this.ModbusValuesTranslationsMap=ai,this.ModbusValueKey=ei}ngOnInit(){this.initializeValuesFormGroup(),this.observeValuesChanges()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){if(this.singleMode)this.valuesFormGroup.setValue(this.getSingleRegisterState(e),{emitEvent:!1});else{const{holding_registers:t,coils_initializer:n,input_registers:a,discrete_inputs:i}=e;this.valuesFormGroup.setValue({holding_registers:this.getSingleRegisterState(t),coils_initializer:this.getSingleRegisterState(n),input_registers:this.getSingleRegisterState(a),discrete_inputs:this.getSingleRegisterState(i)},{emitEvent:!1})}this.cdr.markForCheck()}validate(){return this.valuesFormGroup.valid?null:{valuesFormGroup:{valid:!1}}}setDisabledState(e){this.disabled=e,this.cdr.markForCheck()}getValueGroup(e,t){return t?this.valuesFormGroup.get(t).get(e):this.valuesFormGroup.get(e)}manageKeys(e,t,n,a){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const i=t._elementRef.nativeElement;if(this.popoverService.hasPopover(i))return void this.popoverService.hidePopover(i);const r=this.getValueGroup(n,a),o={values:r.value,isMaster:!this.singleMode,keysType:n,panelTitle:pi.get(n),addKeyTitle:ci.get(n),deleteKeyTitle:di.get(n),noKeysText:ui.get(n),hideNewFields:this.hideNewFields};this.popoverComponent=this.popoverService.displayPopover(i,this.renderer,this.viewContainerRef,GX,"leftBottom",!1,null,o,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.pipe(xn(this.destroyRef)).subscribe((e=>{this.popoverComponent.hide(),r.patchValue(e),r.markAsDirty(),this.cdr.markForCheck()}))}initializeValuesFormGroup(){const e=()=>this.fb.group(this.modbusValueKeys.reduce(((e,t)=>(e[t]=this.fb.control([[],[]]),e)),{}));this.singleMode?this.valuesFormGroup=e():this.valuesFormGroup=this.fb.group(this.modbusRegisterTypes.reduce(((t,n)=>(t[n]=e(),t)),{}))}observeValuesChanges(){this.valuesFormGroup.valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>{this.onChange(e),this.onTouched()}))}getSingleRegisterState(e){return{attributes:e?.attributes??[],timeseries:e?.timeseries??[],attributeUpdates:e?.attributeUpdates??[],rpc:e?.rpc??[]}}static{this.ɵfac=function(e){return new(e||QX)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(t.DestroyRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:QX,selectors:[["tb-modbus-values"]],inputs:{singleMode:"singleMode",hideNewFields:"hideNewFields"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>QX)),multi:!0},{provide:K,useExisting:c((()=>QX)),multi:!0}]),t.ɵɵStandaloneFeature],decls:5,vars:2,consts:[["multipleView",""],["singleView",""],["attributesButton",""],["telemetryButton",""],["attributesUpdatesButton",""],["rpcRequestsButton",""],[4,"ngIf","ngIfElse"],[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroup"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[1,"tb-form-row","space-between","tb-flex"],["translate","",1,"fixed-title-width"],[1,"tb-flex","ellipsis-chips-container"],[1,"tb-flex",3,"tbEllipsisChipList"],[4,"ngFor","ngForOf"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","disabled","matTooltip"],["matButtonIcon",""]],template:function(e,n){if(1&e&&t.ɵɵtemplate(0,jX,3,4,"ng-container",6)(1,WX,2,2,"ng-template",null,0,t.ɵɵtemplateRefExtractor)(3,ZX,52,24,"ng-template",null,1,t.ɵɵtemplateRefExtractor),2&e){const e=t.ɵɵreference(2);t.ɵɵproperty("ngIf",n.singleMode)("ngIfElse",e)}},dependencies:t.ɵɵgetComponentDepsFactory(QX,[j,_,Gn]),styles:['@charset "UTF-8";[_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{min-height:320px}  .mdc-evolution-chip-set__chips{align-items:center}'],changeDetection:d.OnPush})}}function JX(e,n){1&e&&(t.ɵɵelementStart(0,"div",2)(1,"div",10),t.ɵɵtext(2,"gateway.server-hostname"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",5)(4,"mat-form-field",6),t.ɵɵelement(5,"input",16),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,1,"gateway.set")))}function eZ(e,n){1&e&&(t.ɵɵelementStart(0,"div",17)(1,"mat-slide-toggle",18)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,1,"gateway.request-client-certificate")," "))}e("ModbusValuesComponent",QX),Ge([I()],QX.prototype,"singleMode",void 0),Ge([I()],QX.prototype,"hideNewFields",void 0);class tZ{constructor(e,t){this.fb=e,this.cdr=t,this.isMaster=!1,this.disabled=!1,this.destroy$=new te,this.securityConfigFormGroup=this.fb.group({certfile:["",[$.pattern(an)]],keyfile:["",[$.pattern(an)]],password:["",[$.pattern(an)]],server_hostname:["",[$.pattern(an)]],reqclicert:[{value:!1,disabled:!0}]}),this.observeValueChanges()}ngOnChanges(){this.updateMasterEnabling()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this.disabled?this.securityConfigFormGroup.disable({emitEvent:!1}):this.securityConfigFormGroup.enable({emitEvent:!1}),this.updateMasterEnabling(),this.cdr.markForCheck()}validate(){return this.securityConfigFormGroup.valid?null:{securityConfigFormGroup:{valid:!1}}}writeValue(e){const{certfile:t,password:n,keyfile:a,server_hostname:i}=e,r={certfile:t??"",password:n??"",keyfile:a??"",server_hostname:i??"",reqclicert:!!e.reqclicert};this.securityConfigFormGroup.reset(r,{emitEvent:!1})}updateMasterEnabling(){this.isMaster?(this.disabled||this.securityConfigFormGroup.get("reqclicert").enable({emitEvent:!1}),this.securityConfigFormGroup.get("server_hostname").disable({emitEvent:!1})):(this.disabled||this.securityConfigFormGroup.get("server_hostname").enable({emitEvent:!1}),this.securityConfigFormGroup.get("reqclicert").disable({emitEvent:!1}))}observeValueChanges(){this.securityConfigFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}static{this.ɵfac=function(e){return new(e||tZ)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:tZ,selectors:[["tb-modbus-security-config"]],inputs:{isMaster:"isMaster"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>tZ)),multi:!0},{provide:K,useExisting:c((()=>tZ)),multi:!0}]),t.ɵɵNgOnChangesFeature,t.ɵɵStandaloneFeature],decls:33,vars:21,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-hint","tb-primary-fill"],[1,"tb-form-row","space-between","tb-flex","fill-width"],["tbTruncateWithTooltip","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip","","translate",""],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","certfile",3,"placeholder"],[1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["matInput","","name","value","formControlName","keyfile",3,"placeholder"],["translate","",1,"fixed-title-width"],["matInput","","type","password","name","value","formControlName","password",3,"placeholder"],["matSuffix","",1,"tb-flex","no-gap","align-center","fill-height"],[1,"tb-flex","align-center","fill-height"],["class","tb-form-row space-between tb-flex fill-width",4,"ngIf"],["class","tb-form-row",4,"ngIf"],["matInput","","name","value","formControlName","server_hostname",3,"placeholder"],[1,"tb-form-row"],["formControlName","reqclicert",1,"mat-slide"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",2)(5,"div",3),t.ɵɵpipe(6,"translate"),t.ɵɵelementStart(7,"span",4),t.ɵɵtext(8,"gateway.client-cert-path"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",5)(10,"mat-form-field",6),t.ɵɵelement(11,"input",7),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(13,"div",2)(14,"div",8),t.ɵɵpipe(15,"translate"),t.ɵɵelementStart(16,"span",4),t.ɵɵtext(17,"gateway.private-key-path"),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",5)(19,"mat-form-field",6),t.ɵɵelement(20,"input",9),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(22,"div",2)(23,"div",10),t.ɵɵtext(24,"gateway.password"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"div",5)(26,"mat-form-field",6),t.ɵɵelement(27,"input",11),t.ɵɵpipe(28,"translate"),t.ɵɵelementStart(29,"div",12),t.ɵɵelement(30,"tb-toggle-password",13),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(31,JX,7,3,"div",14)(32,eZ,5,3,"div",15),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.securityConfigFormGroup),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,9,"gateway.hints.path-in-os")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(6,11,"gateway.hints.ca-cert")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(12,13,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(15,15,"gateway.private-key-path")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(21,17,"gateway.set")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(28,19,"gateway.set")),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",!n.isMaster),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.isMaster))},dependencies:t.ɵɵgetComponentDepsFactory(tZ,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}function nZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusProtocolLabelsMap.get(e))}}function aZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function iZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",53),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,aZ,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.host")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("host").hasError("required")&&e.slaveConfigFormGroup.get("host").touched)}}function rZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.slaveConfigFormGroup.get("port")))}}function oZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",55),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,rZ,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,5,"gateway.hints.modbus.port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("min",e.portLimits.MIN),t.ɵɵpropertyInterpolate("max",e.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(e.slaveConfigFormGroup.get("port").hasError("required")||e.slaveConfigFormGroup.get("port").hasError("min")||e.slaveConfigFormGroup.get("port").hasError("max"))&&e.slaveConfigFormGroup.get("port").touched)}}function sZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.port-required"))}function lZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",56),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,sZ,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.serial-port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("serialPort").hasError("required")&&e.slaveConfigFormGroup.get("serialPort").touched)}}function pZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusMethodLabelsMap.get(e))}}function cZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function dZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function uZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusParityLabelsMap.get(e))}}function mZ(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",17)(2,"div",18),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4,"gateway.baudrate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",19)(6,"mat-select",57),t.ɵɵtemplate(7,cZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(8,"div",17)(9,"div",18),t.ɵɵpipe(10,"translate"),t.ɵɵtext(11,"gateway.bytesize"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",19)(13,"mat-select",58),t.ɵɵtemplate(14,dZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(15,"div",17)(16,"div",18),t.ɵɵpipe(17,"translate"),t.ɵɵtext(18,"gateway.stopbits"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"mat-form-field",19),t.ɵɵelement(20,"input",59),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(22,"div",17)(23,"div",18),t.ɵɵpipe(24,"translate"),t.ɵɵtext(25,"gateway.parity"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"mat-form-field",19)(27,"mat-select",60),t.ɵɵtemplate(28,uZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(29,"div",36)(30,"mat-slide-toggle",61)(31,"mat-label",38),t.ɵɵpipe(32,"translate"),t.ɵɵtext(33),t.ɵɵpipe(34,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,10,"gateway.hints.modbus.baudrate")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusBaudrates),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(10,12,"gateway.hints.modbus.bytesize")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusByteSizes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(17,14,"gateway.hints.modbus.stopbits")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(21,16,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(24,18,"gateway.hints.modbus.parity")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusParities),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(32,20,"gateway.hints.modbus.strict")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(34,22,"gateway.strict")," ")}}function hZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.unit-id-required"))}function gZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-required"))}function fZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-profile-required"))}function yZ(e,n){1&e&&(t.ɵɵelementStart(0,"div",36)(1,"mat-slide-toggle",62)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,1,"gateway.send-data-on-change")," "))}function vZ(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",63),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("defaultValue",e.ReportStrategyDefaultValue.Device)("isExpansionMode",!0)}}function bZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function xZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function wZ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",64)(1,"mat-expansion-panel",65)(2,"mat-expansion-panel-header",66)(3,"mat-panel-title")(4,"mat-slide-toggle",67),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(5,"mat-label"),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelement(8,"tb-modbus-security-config",68),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("expanded",e.showSecurityControl.value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",e.showSecurityControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(7,3,"gateway.tls-connection")," ")}}e("ModbusSecurityConfigComponent",tZ),Ge([I()],tZ.prototype,"isMaster",void 0);class SZ extends fX{constructor(e,t,n,a,i){super(e,t,n,a,i),this.fb=e,this.store=t,this.router=n,this.data=a,this.dialogRef=i}getSlaveResultData(){const{values:e,type:t,serialPort:n,...a}=this.slaveConfigFormGroup.value,i={...a,type:t,...e};return t===Ka.Serial&&(i.port=n),i.reportStrategy||delete i.reportStrategy,Te(i),i}addFieldsToFormGroup(){this.slaveConfigFormGroup.addControl("reportStrategy",this.fb.control(null))}static{this.ɵfac=function(e){return new(e||SZ)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:SZ,selectors:[["tb-modbus-slave-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:141,vars:97,consts:[["serialPort",""],["reportStrategy",""],[1,"slaves-config-container"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content","",1,"tb-form-panel",3,"formGroup"],[1,"stroked","tb-form-panel"],[1,"tb-form-panel","no-border","no-padding","padding-top"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],["translate","",1,"fixed-title-width"],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-row column-xs",4,"ngIf"],["class","tb-form-row column-xs",4,"ngIf","ngIfElse"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","method"],[4,"ngIf"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","0","name","value","formControlName","unitId",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","deviceName",3,"placeholder"],["matInput","","name","value","formControlName","deviceType",3,"placeholder"],["class","tb-form-row",4,"ngIf","ngIfElse"],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate","",1,"tb-form-panel-title"],["matInput","","type","number","min","0","name","value","formControlName","timeout",3,"placeholder"],["formControlName","byteOrder"],["formControlName","wordOrder"],["class","tb-form-panel stroked tb-slide-toggle",4,"ngIf"],[1,"tb-form-row"],["formControlName","retries",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","retryOnEmpty",1,"mat-slide"],["formControlName","retryOnInvalid",1,"mat-slide"],[1,"fixed-title-width-260","tb-required",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip","","translate",""],["matInput","","type","number","min","100","name","value","formControlName","pollPeriod",3,"placeholder"],["translate","",1,"fixed-title-width-260","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","500","name","value","formControlName","connectAttemptTimeMs",3,"placeholder"],["matInput","","type","number","min","1","name","value","formControlName","connectAttemptCount",3,"placeholder"],["matInput","","type","number","min","30000","name","value","formControlName","waitAfterFailedAttemptsMs",3,"placeholder"],["formControlName","values",3,"singleMode","hideNewFields"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["matInput","","name","value","formControlName","serialPort",3,"placeholder"],["formControlName","baudrate"],["formControlName","bytesize"],["matInput","","type","number","min","0","name","value","formControlName","stopbits",3,"placeholder"],["formControlName","parity"],["formControlName","strict",1,"mat-slide"],["formControlName","sendDataOnlyOnChange",1,"mat-slide"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"defaultValue","isExpansionMode"],[1,"tb-form-panel","stroked","tb-slide-toggle"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"mat-slide","justify-start",3,"click","formControl"],["formControlName","security",1,"security-config"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2)(1,"mat-toolbar",3)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",4)(6,"div",5),t.ɵɵelementStart(7,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(8,"mat-icon",7),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),t.ɵɵtext(15,"gateway.server-connection"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"tb-toggle-select",13),t.ɵɵtemplate(17,nZ,2,2,"tb-toggle-option",14),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",10),t.ɵɵtemplate(19,iZ,8,7,"div",15)(20,oZ,8,9,"div",16)(21,lZ,8,7,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(23,"div",17)(24,"div",18),t.ɵɵpipe(25,"translate"),t.ɵɵtext(26," gateway.method "),t.ɵɵelementEnd(),t.ɵɵelementStart(27,"mat-form-field",19)(28,"mat-select",20),t.ɵɵtemplate(29,pZ,2,2,"mat-option",14),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(30,mZ,35,24,"ng-container",21),t.ɵɵelementStart(31,"div",17)(32,"div",22),t.ɵɵpipe(33,"translate"),t.ɵɵtext(34,"gateway.unit-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(35,"mat-form-field",19),t.ɵɵelement(36,"input",23),t.ɵɵpipe(37,"translate"),t.ɵɵtemplate(38,hZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵelementStart(39,"div",17)(40,"div",25),t.ɵɵtext(41,"gateway.device-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"mat-form-field",19),t.ɵɵelement(43,"input",26),t.ɵɵpipe(44,"translate"),t.ɵɵtemplate(45,gZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵelementStart(46,"div",17)(47,"div",25),t.ɵɵtext(48,"gateway.device-profile"),t.ɵɵelementEnd(),t.ɵɵelementStart(49,"mat-form-field",19),t.ɵɵelement(50,"input",27),t.ɵɵpipe(51,"translate"),t.ɵɵtemplate(52,fZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵtemplate(53,yZ,5,3,"div",28)(54,vZ,1,2,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(56,"div",29)(57,"mat-expansion-panel",30)(58,"mat-expansion-panel-header")(59,"mat-panel-title")(60,"div",31),t.ɵɵtext(61,"gateway.advanced-connection-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(62,"div",10)(63,"div",17)(64,"div",18),t.ɵɵpipe(65,"translate"),t.ɵɵtext(66,"gateway.connection-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(67,"mat-form-field",19),t.ɵɵelement(68,"input",32),t.ɵɵpipe(69,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(70,"div",17)(71,"div",18),t.ɵɵpipe(72,"translate"),t.ɵɵtext(73,"gateway.byte-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(74,"mat-form-field",19)(75,"mat-select",33),t.ɵɵtemplate(76,bZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(77,"div",17)(78,"div",18),t.ɵɵpipe(79,"translate"),t.ɵɵtext(80,"gateway.word-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(81,"mat-form-field",19)(82,"mat-select",34),t.ɵɵtemplate(83,xZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵtemplate(84,wZ,9,5,"div",35),t.ɵɵelementStart(85,"div",36)(86,"mat-slide-toggle",37)(87,"mat-label",38),t.ɵɵpipe(88,"translate"),t.ɵɵtext(89),t.ɵɵpipe(90,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(91,"div",36)(92,"mat-slide-toggle",39)(93,"mat-label",38),t.ɵɵpipe(94,"translate"),t.ɵɵtext(95),t.ɵɵpipe(96,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(97,"div",36)(98,"mat-slide-toggle",40)(99,"mat-label",38),t.ɵɵpipe(100,"translate"),t.ɵɵtext(101),t.ɵɵpipe(102,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(103,"div",17)(104,"div",41),t.ɵɵpipe(105,"translate"),t.ɵɵelementStart(106,"span",42),t.ɵɵtext(107," gateway.poll-period "),t.ɵɵelementEnd()(),t.ɵɵelementStart(108,"mat-form-field",19),t.ɵɵelement(109,"input",43),t.ɵɵpipe(110,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(111,"div",17)(112,"div",44),t.ɵɵpipe(113,"translate"),t.ɵɵtext(114,"gateway.connect-attempt-time"),t.ɵɵelementEnd(),t.ɵɵelementStart(115,"mat-form-field",19),t.ɵɵelement(116,"input",45),t.ɵɵpipe(117,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(118,"div",17)(119,"div",44),t.ɵɵpipe(120,"translate"),t.ɵɵtext(121,"gateway.connect-attempt-count"),t.ɵɵelementEnd(),t.ɵɵelementStart(122,"mat-form-field",19),t.ɵɵelement(123,"input",46),t.ɵɵpipe(124,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(125,"div",17)(126,"div",44),t.ɵɵpipe(127,"translate"),t.ɵɵtext(128,"gateway.wait-after-failed-attempts"),t.ɵɵelementEnd(),t.ɵɵelementStart(129,"mat-form-field",19),t.ɵɵelement(130,"input",47),t.ɵɵpipe(131,"translate"),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(132,"div",29),t.ɵɵelement(133,"tb-modbus-values",48),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(134,"div",49)(135,"button",50),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(136),t.ɵɵpipe(137,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(138,"button",51),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.add())})),t.ɵɵtext(139),t.ɵɵpipe(140,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(22),a=t.ɵɵreference(55);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,45,"gateway.server-slave")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.modbusHelpLink),t.ɵɵadvance(4),t.ɵɵproperty("formGroup",n.slaveConfigFormGroup),t.ɵɵadvance(7),t.ɵɵproperty("ngForOf",n.modbusProtocolTypes),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial)("ngIfElse",e),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(25,47,"gateway.hints.modbus.framer-type")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.protocolType===n.ModbusProtocolType.Serial?n.modbusSerialMethodTypes:n.modbusMethodTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType===n.ModbusProtocolType.Serial),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(33,49,"gateway.hints.modbus.unit-id")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(37,51,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("unitId").hasError("required")&&n.slaveConfigFormGroup.get("unitId").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(44,53,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceName").hasError("required")&&n.slaveConfigFormGroup.get("deviceName").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(51,55,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceType").hasError("required")&&n.slaveConfigFormGroup.get("deviceType").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.data.hideNewFields)("ngIfElse",a),t.ɵɵadvance(11),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(65,57,"gateway.hints.modbus.connection-timeout")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(69,59,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(72,61,"gateway.hints.modbus.byte-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(79,63,"gateway.hints.modbus.word-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(88,65,"gateway.hints.modbus.retries")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(90,67,"gateway.retries")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(94,69,"gateway.hints.modbus.retries-on-empty")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(96,71,"gateway.retries-on-empty")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(100,73,"gateway.hints.modbus.retries-on-invalid")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(102,75,"gateway.retries-on-invalid")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(105,77,"gateway.hints.modbus.poll-period")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(110,79,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(113,81,"gateway.hints.modbus.connect-attempt-time")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(117,83,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(120,85,"gateway.hints.modbus.connect-attempt-count")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(124,87,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(127,89,"gateway.hints.modbus.wait-after-failed-attempts")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(131,91,"gateway.set")),t.ɵɵadvance(3),t.ɵɵproperty("singleMode",!0)("hideNewFields",n.data.hideNewFields),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(137,93,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.slaveConfigFormGroup.invalid||!n.slaveConfigFormGroup.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(140,95,n.data.buttonTitle)," ")}},dependencies:t.ɵɵgetComponentDepsFactory(SZ,[j,_,QX,tZ,m$,Xn,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .slaves-config-container[_ngcontent-%COMP%]{width:80vw;max-width:900px}[_nghost-%COMP%]   .slave-name-label[_ngcontent-%COMP%]{margin-right:16px;color:#000000de}[_nghost-%COMP%]   .fixed-title-width-260[_ngcontent-%COMP%]{min-width:260px}[_nghost-%COMP%]     .security-config .fixed-title-width{min-width:230px}'],changeDetection:d.OnPush})}}function CZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusProtocolLabelsMap.get(e))}}function _Z(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function TZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",53),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,_Z,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.host")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("host").hasError("required")&&e.slaveConfigFormGroup.get("host").touched)}}function IZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.slaveConfigFormGroup.get("port")))}}function EZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",55),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,IZ,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,5,"gateway.hints.modbus.port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("min",e.portLimits.MIN),t.ɵɵpropertyInterpolate("max",e.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(e.slaveConfigFormGroup.get("port").hasError("required")||e.slaveConfigFormGroup.get("port").hasError("min")||e.slaveConfigFormGroup.get("port").hasError("max"))&&e.slaveConfigFormGroup.get("port").touched)}}function MZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.port-required"))}function kZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17)(1,"div",22),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",19),t.ɵɵelement(5,"input",56),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,MZ,3,3,"mat-icon",24),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.serial-port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("serialPort").hasError("required")&&e.slaveConfigFormGroup.get("serialPort").touched)}}function PZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusMethodLabelsMap.get(e))}}function DZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function OZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function AZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusParityLabelsMap.get(e))}}function FZ(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",17)(2,"div",18),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4,"gateway.baudrate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",19)(6,"mat-select",57),t.ɵɵtemplate(7,DZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(8,"div",17)(9,"div",18),t.ɵɵpipe(10,"translate"),t.ɵɵtext(11,"gateway.bytesize"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",19)(13,"mat-select",58),t.ɵɵtemplate(14,OZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(15,"div",17)(16,"div",18),t.ɵɵpipe(17,"translate"),t.ɵɵtext(18,"gateway.stopbits"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"mat-form-field",19),t.ɵɵelement(20,"input",59),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(22,"div",17)(23,"div",18),t.ɵɵpipe(24,"translate"),t.ɵɵtext(25,"gateway.parity"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"mat-form-field",19)(27,"mat-select",60),t.ɵɵtemplate(28,AZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(29,"div",36)(30,"mat-slide-toggle",61)(31,"mat-label",38),t.ɵɵpipe(32,"translate"),t.ɵɵtext(33),t.ɵɵpipe(34,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,10,"gateway.hints.modbus.baudrate")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusBaudrates),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(10,12,"gateway.hints.modbus.bytesize")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusByteSizes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(17,14,"gateway.hints.modbus.stopbits")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(21,16,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(24,18,"gateway.hints.modbus.parity")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusParities),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(32,20,"gateway.hints.modbus.strict")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(34,22,"gateway.strict")," ")}}function RZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.unit-id-required"))}function BZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-required"))}function NZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",54),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-profile-required"))}function LZ(e,n){1&e&&(t.ɵɵelementStart(0,"div",36)(1,"mat-slide-toggle",62)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,1,"gateway.send-data-on-change")," "))}function VZ(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",63),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("defaultValue",e.ReportStrategyDefaultValue.Device)("isExpansionMode",!0)}}function qZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function GZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",52),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function zZ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",64)(1,"mat-expansion-panel",65)(2,"mat-expansion-panel-header",66)(3,"mat-panel-title")(4,"mat-slide-toggle",67),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(5,"mat-label"),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelement(8,"tb-modbus-security-config",68),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("expanded",e.showSecurityControl.value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",e.showSecurityControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(7,3,"gateway.tls-connection")," ")}}e("ModbusSlaveDialogComponent",SZ);class UZ extends fX{constructor(e,t,n,a,i){super(e,t,n,a,i),this.fb=e,this.store=t,this.router=n,this.data=a,this.dialogRef=i}getSlaveResultData(){const{values:e,type:t,serialPort:n,...a}=this.slaveConfigFormGroup.value,i={...a,type:t,...e};return t===Ka.Serial&&(i.port=n),Te(i),i}addFieldsToFormGroup(){this.slaveConfigFormGroup.addControl("sendDataOnlyOnChange",this.fb.control(!1))}static{this.ɵfac=function(e){return new(e||UZ)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:UZ,selectors:[["tb-modbus-legacy-slave-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:141,vars:97,consts:[["serialPort",""],["reportStrategy",""],[1,"slaves-config-container"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content","",1,"tb-form-panel",3,"formGroup"],[1,"stroked","tb-form-panel"],[1,"tb-form-panel","no-border","no-padding","padding-top"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],["translate","",1,"fixed-title-width"],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-row column-xs",4,"ngIf"],["class","tb-form-row column-xs",4,"ngIf","ngIfElse"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","method"],[4,"ngIf"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","0","name","value","formControlName","unitId",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","deviceName",3,"placeholder"],["matInput","","name","value","formControlName","deviceType",3,"placeholder"],["class","tb-form-row",4,"ngIf","ngIfElse"],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate","",1,"tb-form-panel-title"],["matInput","","type","number","min","0","name","value","formControlName","timeout",3,"placeholder"],["formControlName","byteOrder"],["formControlName","wordOrder"],["class","tb-form-panel stroked tb-slide-toggle",4,"ngIf"],[1,"tb-form-row"],["formControlName","retries",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","retryOnEmpty",1,"mat-slide"],["formControlName","retryOnInvalid",1,"mat-slide"],[1,"fixed-title-width-260","tb-required",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip","","translate",""],["matInput","","type","number","min","100","name","value","formControlName","pollPeriod",3,"placeholder"],["translate","",1,"fixed-title-width-260","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","500","name","value","formControlName","connectAttemptTimeMs",3,"placeholder"],["matInput","","type","number","min","1","name","value","formControlName","connectAttemptCount",3,"placeholder"],["matInput","","type","number","min","30000","name","value","formControlName","waitAfterFailedAttemptsMs",3,"placeholder"],["formControlName","values",3,"singleMode","hideNewFields"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["matInput","","name","value","formControlName","serialPort",3,"placeholder"],["formControlName","baudrate"],["formControlName","bytesize"],["matInput","","type","number","min","0","name","value","formControlName","stopbits",3,"placeholder"],["formControlName","parity"],["formControlName","strict",1,"mat-slide"],["formControlName","sendDataOnlyOnChange",1,"mat-slide"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"defaultValue","isExpansionMode"],[1,"tb-form-panel","stroked","tb-slide-toggle"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"mat-slide","justify-start",3,"click","formControl"],["formControlName","security",1,"security-config"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2)(1,"mat-toolbar",3)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",4)(6,"div",5),t.ɵɵelementStart(7,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(8,"mat-icon",7),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),t.ɵɵtext(15,"gateway.server-connection"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"tb-toggle-select",13),t.ɵɵtemplate(17,CZ,2,2,"tb-toggle-option",14),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",10),t.ɵɵtemplate(19,TZ,8,7,"div",15)(20,EZ,8,9,"div",16)(21,kZ,8,7,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(23,"div",17)(24,"div",18),t.ɵɵpipe(25,"translate"),t.ɵɵtext(26," gateway.method "),t.ɵɵelementEnd(),t.ɵɵelementStart(27,"mat-form-field",19)(28,"mat-select",20),t.ɵɵtemplate(29,PZ,2,2,"mat-option",14),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(30,FZ,35,24,"ng-container",21),t.ɵɵelementStart(31,"div",17)(32,"div",22),t.ɵɵpipe(33,"translate"),t.ɵɵtext(34,"gateway.unit-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(35,"mat-form-field",19),t.ɵɵelement(36,"input",23),t.ɵɵpipe(37,"translate"),t.ɵɵtemplate(38,RZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵelementStart(39,"div",17)(40,"div",25),t.ɵɵtext(41,"gateway.device-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"mat-form-field",19),t.ɵɵelement(43,"input",26),t.ɵɵpipe(44,"translate"),t.ɵɵtemplate(45,BZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵelementStart(46,"div",17)(47,"div",25),t.ɵɵtext(48,"gateway.device-profile"),t.ɵɵelementEnd(),t.ɵɵelementStart(49,"mat-form-field",19),t.ɵɵelement(50,"input",27),t.ɵɵpipe(51,"translate"),t.ɵɵtemplate(52,NZ,3,3,"mat-icon",24),t.ɵɵelementEnd()(),t.ɵɵtemplate(53,LZ,5,3,"div",28)(54,VZ,1,2,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(56,"div",29)(57,"mat-expansion-panel",30)(58,"mat-expansion-panel-header")(59,"mat-panel-title")(60,"div",31),t.ɵɵtext(61,"gateway.advanced-connection-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(62,"div",10)(63,"div",17)(64,"div",18),t.ɵɵpipe(65,"translate"),t.ɵɵtext(66,"gateway.connection-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(67,"mat-form-field",19),t.ɵɵelement(68,"input",32),t.ɵɵpipe(69,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(70,"div",17)(71,"div",18),t.ɵɵpipe(72,"translate"),t.ɵɵtext(73,"gateway.byte-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(74,"mat-form-field",19)(75,"mat-select",33),t.ɵɵtemplate(76,qZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵelementStart(77,"div",17)(78,"div",18),t.ɵɵpipe(79,"translate"),t.ɵɵtext(80,"gateway.word-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(81,"mat-form-field",19)(82,"mat-select",34),t.ɵɵtemplate(83,GZ,2,2,"mat-option",14),t.ɵɵelementEnd()()(),t.ɵɵtemplate(84,zZ,9,5,"div",35),t.ɵɵelementStart(85,"div",36)(86,"mat-slide-toggle",37)(87,"mat-label",38),t.ɵɵpipe(88,"translate"),t.ɵɵtext(89),t.ɵɵpipe(90,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(91,"div",36)(92,"mat-slide-toggle",39)(93,"mat-label",38),t.ɵɵpipe(94,"translate"),t.ɵɵtext(95),t.ɵɵpipe(96,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(97,"div",36)(98,"mat-slide-toggle",40)(99,"mat-label",38),t.ɵɵpipe(100,"translate"),t.ɵɵtext(101),t.ɵɵpipe(102,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(103,"div",17)(104,"div",41),t.ɵɵpipe(105,"translate"),t.ɵɵelementStart(106,"span",42),t.ɵɵtext(107," gateway.poll-period "),t.ɵɵelementEnd()(),t.ɵɵelementStart(108,"mat-form-field",19),t.ɵɵelement(109,"input",43),t.ɵɵpipe(110,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(111,"div",17)(112,"div",44),t.ɵɵpipe(113,"translate"),t.ɵɵtext(114,"gateway.connect-attempt-time"),t.ɵɵelementEnd(),t.ɵɵelementStart(115,"mat-form-field",19),t.ɵɵelement(116,"input",45),t.ɵɵpipe(117,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(118,"div",17)(119,"div",44),t.ɵɵpipe(120,"translate"),t.ɵɵtext(121,"gateway.connect-attempt-count"),t.ɵɵelementEnd(),t.ɵɵelementStart(122,"mat-form-field",19),t.ɵɵelement(123,"input",46),t.ɵɵpipe(124,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(125,"div",17)(126,"div",44),t.ɵɵpipe(127,"translate"),t.ɵɵtext(128,"gateway.wait-after-failed-attempts"),t.ɵɵelementEnd(),t.ɵɵelementStart(129,"mat-form-field",19),t.ɵɵelement(130,"input",47),t.ɵɵpipe(131,"translate"),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(132,"div",29),t.ɵɵelement(133,"tb-modbus-values",48),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(134,"div",49)(135,"button",50),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(136),t.ɵɵpipe(137,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(138,"button",51),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.add())})),t.ɵɵtext(139),t.ɵɵpipe(140,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(22),a=t.ɵɵreference(55);t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,45,"gateway.server-slave")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.modbusHelpLink),t.ɵɵadvance(4),t.ɵɵproperty("formGroup",n.slaveConfigFormGroup),t.ɵɵadvance(7),t.ɵɵproperty("ngForOf",n.modbusProtocolTypes),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial)("ngIfElse",e),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(25,47,"gateway.hints.modbus.framer-type")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.protocolType===n.ModbusProtocolType.Serial?n.modbusSerialMethodTypes:n.modbusMethodTypes),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType===n.ModbusProtocolType.Serial),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(33,49,"gateway.hints.modbus.unit-id")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(37,51,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("unitId").hasError("required")&&n.slaveConfigFormGroup.get("unitId").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(44,53,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceName").hasError("required")&&n.slaveConfigFormGroup.get("deviceName").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(51,55,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceType").hasError("required")&&n.slaveConfigFormGroup.get("deviceType").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.data.hideNewFields)("ngIfElse",a),t.ɵɵadvance(11),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(65,57,"gateway.hints.modbus.connection-timeout")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(69,59,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(72,61,"gateway.hints.modbus.byte-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(79,63,"gateway.hints.modbus.word-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(88,65,"gateway.hints.modbus.retries")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(90,67,"gateway.retries")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(94,69,"gateway.hints.modbus.retries-on-empty")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(96,71,"gateway.retries-on-empty")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(100,73,"gateway.hints.modbus.retries-on-invalid")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(102,75,"gateway.retries-on-invalid")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(105,77,"gateway.hints.modbus.poll-period")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(110,79,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(113,81,"gateway.hints.modbus.connect-attempt-time")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(117,83,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(120,85,"gateway.hints.modbus.connect-attempt-count")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(124,87,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(127,89,"gateway.hints.modbus.wait-after-failed-attempts")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(131,91,"gateway.set")),t.ɵɵadvance(3),t.ɵɵproperty("singleMode",!0)("hideNewFields",n.data.hideNewFields),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(137,93,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.slaveConfigFormGroup.invalid||!n.slaveConfigFormGroup.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(140,95,n.data.buttonTitle)," ")}},dependencies:t.ɵɵgetComponentDepsFactory(UZ,[j,_,QX,tZ,m$,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .slaves-config-container[_ngcontent-%COMP%]{width:80vw;max-width:900px}[_nghost-%COMP%]   .slave-name-label[_ngcontent-%COMP%]{margin-right:16px;color:#000000de}[_nghost-%COMP%]   .fixed-title-width-260[_ngcontent-%COMP%]{min-width:260px}[_nghost-%COMP%]     .security-config .fixed-title-width{min-width:230px}'],changeDetection:d.OnPush})}}function jZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",38),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusProtocolLabelsMap.get(e))}}function HZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function WZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10)(1,"div",14),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",12),t.ɵɵelement(5,"input",39),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,HZ,3,3,"mat-icon",16),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.host")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("host").hasError("required")&&e.slaveConfigFormGroup.get("host").touched)}}function $Z(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.slaveConfigFormGroup.get("port")))}}function KZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10)(1,"div",14),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",12),t.ɵɵelement(5,"input",41),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,$Z,3,3,"mat-icon",16),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,5,"gateway.hints.modbus.port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("min",e.portLimits.MIN),t.ɵɵpropertyInterpolate("max",e.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(e.slaveConfigFormGroup.get("port").hasError("required")||e.slaveConfigFormGroup.get("port").hasError("min")||e.slaveConfigFormGroup.get("port").hasError("max"))&&e.slaveConfigFormGroup.get("port").touched)}}function YZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.port-required"))}function XZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10)(1,"div",14),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",12),t.ɵɵelement(5,"input",42),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,YZ,3,3,"mat-icon",16),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.modbus.serial-port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.slaveConfigFormGroup.get("port").hasError("required")&&e.slaveConfigFormGroup.get("port").touched)}}function ZZ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",38),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.ModbusMethodLabelsMap.get(e))}}function QZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.unit-id-required"))}function JZ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-required"))}function eQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-profile-required"))}function tQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",38),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function nQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10)(1,"div",11),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.baudrate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",12)(5,"mat-select",43),t.ɵɵtemplate(6,tQ,2,2,"mat-option",6),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,2,"gateway.hints.modbus.baudrate")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",e.modbusBaudrates)}}function aQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",38),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function iQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",38),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function rQ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",44)(1,"mat-expansion-panel",45)(2,"mat-expansion-panel-header",46)(3,"mat-panel-title")(4,"mat-slide-toggle",47),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(5,"mat-label"),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelement(8,"tb-modbus-security-config",48),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("expanded",e.showSecurityControl.value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",e.showSecurityControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(7,3,"gateway.tls-connection")," ")}}e("ModbusLegacySlaveDialogComponent",UZ);class oQ{constructor(e){this.fb=e,this.ModbusProtocolLabelsMap=si,this.ModbusMethodLabelsMap=oi,this.portLimits=Ia,this.modbusProtocolTypes=Object.values(Ka),this.modbusMethodTypes=Object.values(Ya),this.modbusSerialMethodTypes=Object.values(Xa),this.modbusOrderType=Object.values(Qa),this.ModbusProtocolType=Ka,this.modbusBaudrates=ti,this.isSlaveEnabled=!1,this.serialSpecificControlKeys=["serialPort","baudrate"],this.tcpUdpSpecificControlKeys=["port","security","host"],this.destroy$=new te,this.showSecurityControl=this.fb.control(!1),this.slaveConfigFormGroup=this.fb.group({type:[Ka.TCP],host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],serialPort:["",[$.required,$.pattern(an)]],method:[Ya.SOCKET],unitId:[null,[$.required]],baudrate:[this.modbusBaudrates[0]],deviceName:["",[$.required,$.pattern(an)]],deviceType:["",[$.required,$.pattern(an)]],pollPeriod:[1e3,[$.required]],sendDataToThingsBoard:[!1],byteOrder:[Qa.BIG],wordOrder:[Qa.BIG],security:[],identity:this.fb.group({vendorName:["",[$.pattern(an)]],productCode:["",[$.pattern(an)]],vendorUrl:["",[$.pattern(an)]],productName:["",[$.pattern(an)]],modelName:["",[$.pattern(an)]]}),values:[]}),this.observeValueChanges(),this.observeTypeChange(),this.observeShowSecurity()}get protocolType(){return this.slaveConfigFormGroup.get("type").value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}validate(){return this.slaveConfigFormGroup.valid?null:{slaveConfigFormGroup:{valid:!1}}}writeValue(e){this.showSecurityControl.patchValue(!!e.security&&!Se(e.security,{})),this.updateSlaveConfig(e)}setDisabledState(e){this.isSlaveEnabled=!e,this.updateFormEnableState()}observeValueChanges(){this.slaveConfigFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{e.type===Ka.Serial&&(e.port=e.serialPort,delete e.serialPort),this.onChange(e),this.onTouched()}))}observeTypeChange(){this.slaveConfigFormGroup.get("type").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateFormEnableState(),this.updateMethodType(e)}))}updateMethodType(e){this.slaveConfigFormGroup.get("method").value!==Ya.RTU&&this.slaveConfigFormGroup.get("method").patchValue(e===Ka.Serial?Xa.ASCII:Ya.SOCKET,{emitEvent:!1})}updateFormEnableState(){this.isSlaveEnabled?(this.slaveConfigFormGroup.enable({emitEvent:!1}),this.showSecurityControl.enable({emitEvent:!1})):(this.slaveConfigFormGroup.disable({emitEvent:!1}),this.showSecurityControl.disable({emitEvent:!1})),this.updateEnablingByProtocol(),this.updateSecurityEnable(this.showSecurityControl.value)}observeShowSecurity(){this.showSecurityControl.valueChanges.pipe(le(this.destroy$)).subscribe((e=>this.updateSecurityEnable(e)))}updateSecurityEnable(e){e&&this.isSlaveEnabled&&this.protocolType!==Ka.Serial?this.slaveConfigFormGroup.get("security").enable({emitEvent:!1}):this.slaveConfigFormGroup.get("security").disable({emitEvent:!1})}updateEnablingByProtocol(){const e=this.protocolType===Ka.Serial,t=e?this.serialSpecificControlKeys:this.tcpUdpSpecificControlKeys,n=e?this.tcpUdpSpecificControlKeys:this.serialSpecificControlKeys;this.isSlaveEnabled&&t.forEach((e=>this.slaveConfigFormGroup.get(e)?.enable({emitEvent:!1}))),n.forEach((e=>this.slaveConfigFormGroup.get(e)?.disable({emitEvent:!1})))}updateSlaveConfig(e){const{vendorName:t="",productCode:n="",vendorUrl:a="",productName:i="",modelName:r=""}=e.identity??{},o={vendorName:t,productCode:n,vendorUrl:a,productName:i,modelName:r},{type:s=Ka.TCP,method:l=Ya.RTU,unitId:p=0,deviceName:c="",deviceType:d="",pollPeriod:u=1e3,sendDataToThingsBoard:m=!1,byteOrder:h=Qa.BIG,wordOrder:g=Qa.BIG,security:f={},values:y={},baudrate:v=this.modbusBaudrates[0],host:b="",port:x=null}=e,w={type:s,method:l,unitId:p,deviceName:c,deviceType:d,pollPeriod:u,sendDataToThingsBoard:!!m,byteOrder:h,wordOrder:g,security:f,identity:o,values:y,baudrate:v,host:s===Ka.Serial?"":b,port:s===Ka.Serial?null:x,serialPort:s===Ka.Serial?x:""};this.slaveConfigFormGroup.setValue(w,{emitEvent:!1})}static{this.ɵfac=function(e){return new(e||oQ)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:oQ,selectors:[["tb-modbus-slave-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>oQ)),multi:!0},{provide:K,useExisting:c((()=>oQ)),multi:!0}]),t.ɵɵStandaloneFeature],decls:112,vars:59,consts:[["serialPort",""],[1,"slave-container",3,"formGroup"],[1,"slave-content","tb-form-panel","no-border","no-padding","padding-top"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],["translate","",1,"fixed-title-width"],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-panel","no-border","no-padding","padding-top"],["class","tb-form-row column-xs",4,"ngIf"],["class","tb-form-row column-xs",4,"ngIf","ngIfElse"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","method"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","0","name","value","formControlName","unitId",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","deviceName",3,"placeholder"],["matInput","","name","value","formControlName","deviceType",3,"placeholder"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["tbTruncateWithTooltip","","translate",""],["matInput","","type","number","min","100","name","value","formControlName","pollPeriod",3,"placeholder"],[1,"tb-form-row"],["formControlName","sendDataToThingsBoard",1,"mat-slide"],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate","",1,"tb-form-panel-title"],["formControlName","byteOrder"],["formControlName","wordOrder"],["class","tb-form-panel stroked tb-slide-toggle",4,"ngIf"],[3,"formGroup"],["matInput","","name","value","formControlName","vendorName",3,"placeholder"],["matInput","","name","value","formControlName","productCode",3,"placeholder"],["matInput","","name","value","formControlName","vendorUrl",3,"placeholder"],["matInput","","name","value","formControlName","productName",3,"placeholder"],["matInput","","name","value","formControlName","modelName",3,"placeholder"],["formControlName","values"],[3,"value"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["matInput","","name","value","formControlName","serialPort",3,"placeholder"],["formControlName","baudrate"],[1,"tb-form-panel","stroked","tb-slide-toggle"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"mat-slide",3,"click","formControl"],["formControlName","security"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.ɵɵtext(4,"gateway.server-slave-config"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"tb-toggle-select",5),t.ɵɵtemplate(6,jZ,2,2,"tb-toggle-option",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"div",7),t.ɵɵtemplate(8,WZ,8,7,"div",8)(9,KZ,8,9,"div",9)(10,XZ,8,7,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(12,"div",10)(13,"div",11),t.ɵɵpipe(14,"translate"),t.ɵɵtext(15," gateway.method "),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"mat-form-field",12)(17,"mat-select",13),t.ɵɵtemplate(18,ZZ,2,2,"mat-option",6),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(19,"div",10)(20,"div",14),t.ɵɵpipe(21,"translate"),t.ɵɵtext(22,"gateway.unit-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"mat-form-field",12),t.ɵɵelement(24,"input",15),t.ɵɵpipe(25,"translate"),t.ɵɵtemplate(26,QZ,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(27,"div",10)(28,"div",17),t.ɵɵtext(29,"gateway.device-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(30,"mat-form-field",12),t.ɵɵelement(31,"input",18),t.ɵɵpipe(32,"translate"),t.ɵɵtemplate(33,JZ,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(34,"div",10)(35,"div",17),t.ɵɵtext(36,"gateway.device-profile"),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"mat-form-field",12),t.ɵɵelement(38,"input",19),t.ɵɵpipe(39,"translate"),t.ɵɵtemplate(40,eQ,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(41,"div",10)(42,"div",20),t.ɵɵpipe(43,"translate"),t.ɵɵelementStart(44,"span",21),t.ɵɵtext(45," gateway.poll-period "),t.ɵɵelementEnd()(),t.ɵɵelementStart(46,"mat-form-field",12),t.ɵɵelement(47,"input",22),t.ɵɵpipe(48,"translate"),t.ɵɵelementEnd()(),t.ɵɵtemplate(49,nQ,7,4,"div",8),t.ɵɵelementStart(50,"div",23)(51,"mat-slide-toggle",24)(52,"mat-label"),t.ɵɵtext(53),t.ɵɵpipe(54,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(55,"div",25)(56,"mat-expansion-panel",26)(57,"mat-expansion-panel-header")(58,"mat-panel-title")(59,"div",27),t.ɵɵtext(60,"gateway.advanced-connection-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(61,"div",7)(62,"div",10)(63,"div",11),t.ɵɵpipe(64,"translate"),t.ɵɵtext(65,"gateway.byte-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(66,"mat-form-field",12)(67,"mat-select",28),t.ɵɵtemplate(68,aQ,2,2,"mat-option",6),t.ɵɵelementEnd()()(),t.ɵɵelementStart(69,"div",10)(70,"div",11),t.ɵɵpipe(71,"translate"),t.ɵɵtext(72,"gateway.word-order"),t.ɵɵelementEnd(),t.ɵɵelementStart(73,"mat-form-field",12)(74,"mat-select",29),t.ɵɵtemplate(75,iQ,2,2,"mat-option",6),t.ɵɵelementEnd()()(),t.ɵɵtemplate(76,rQ,9,5,"div",30),t.ɵɵelementContainerStart(77,31),t.ɵɵelementStart(78,"div",10)(79,"div",4),t.ɵɵtext(80,"gateway.vendor-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(81,"mat-form-field",12),t.ɵɵelement(82,"input",32),t.ɵɵpipe(83,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(84,"div",10)(85,"div",4),t.ɵɵtext(86,"gateway.product-code"),t.ɵɵelementEnd(),t.ɵɵelementStart(87,"mat-form-field",12),t.ɵɵelement(88,"input",33),t.ɵɵpipe(89,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(90,"div",10)(91,"div",4),t.ɵɵtext(92,"gateway.vendor-url"),t.ɵɵelementEnd(),t.ɵɵelementStart(93,"mat-form-field",12),t.ɵɵelement(94,"input",34),t.ɵɵpipe(95,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(96,"div",10)(97,"div",4),t.ɵɵtext(98,"gateway.product-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(99,"mat-form-field",12),t.ɵɵelement(100,"input",35),t.ɵɵpipe(101,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(102,"div",10)(103,"div",4),t.ɵɵtext(104,"gateway.model-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(105,"mat-form-field",12),t.ɵɵelement(106,"input",36),t.ɵɵpipe(107,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()()(),t.ɵɵelementStart(108,"div",25)(109,"div",27),t.ɵɵtext(110,"gateway.values"),t.ɵɵelementEnd(),t.ɵɵelement(111,"tb-modbus-values",37),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵreference(11);t.ɵɵproperty("formGroup",n.slaveConfigFormGroup),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.modbusProtocolTypes),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial)("ngIfElse",e),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(14,29,"gateway.hints.modbus.framer-type")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.protocolType===n.ModbusProtocolType.Serial?n.modbusSerialMethodTypes:n.modbusMethodTypes),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(21,31,"gateway.hints.modbus.unit-id")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(25,33,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("unitId").hasError("required")&&n.slaveConfigFormGroup.get("unitId").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(32,35,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceName").hasError("required")&&n.slaveConfigFormGroup.get("deviceName").touched),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(39,37,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.slaveConfigFormGroup.get("deviceType").hasError("required")&&n.slaveConfigFormGroup.get("deviceType").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(43,39,"gateway.hints.modbus.poll-period")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(48,41,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.protocolType===n.ModbusProtocolType.Serial),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(54,43,"gateway.send-data-to-platform")," "),t.ɵɵadvance(10),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(64,45,"gateway.hints.modbus.byte-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(71,47,"gateway.hints.modbus.word-order")),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.modbusOrderType),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.protocolType!==n.ModbusProtocolType.Serial),t.ɵɵadvance(),t.ɵɵproperty("formGroup",n.slaveConfigFormGroup.get("identity")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(83,49,"gateway.set")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(89,51,"gateway.set")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(95,53,"gateway.set")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(101,55,"gateway.set")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(107,57,"gateway.set"))}},dependencies:t.ɵɵgetComponentDepsFactory(oQ,[j,_,QX,tZ,m$,qn]),encapsulation:2,changeDetection:d.OnPush})}}e("ModbusSlaveConfigComponent",oQ);const sQ=["searchInput"],lQ=()=>["deviceName","info","unitId","type","actions"],pQ=()=>({minWidth:"96px",textAlign:"center"});function cQ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9)(1,"div",28)(2,"span",29),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelement(5,"span",11),t.ɵɵelementStart(6,"button",13),t.ɵɵpipe(7,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageSlave(n))})),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"button",13),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.servers-slaves")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,7,"action.search")))}function dQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30)(1,"div",31),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.device-name")))}function uQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",30)(1,"div",31),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.deviceName)}}function mQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.info")," "))}function hQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",30)(1,"div",31),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){let e;const a=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null!==(e=a.host)&&void 0!==e?e:a.port)}}function gQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.unit-id")," "))}function fQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",30)(1,"div",31),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.unitId)}}function yQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30)(1,"div"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.type")))}function vQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",30),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",a.ModbusProtocolLabelsMap.get(e.type)," ")}}function bQ(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",32)}function xQ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",13),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageSlave(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",13),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteSlave(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function wQ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,xQ,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",33),t.ɵɵelementContainer(4,34),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",35)(6,"button",36),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",37),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",38,2),t.ɵɵelementContainer(11,34),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(3),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,pQ)),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function SQ(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",39)}function CQ(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class _Q{constructor(e,t,n,a,i){this.translate=e,this.dialog=t,this.dialogService=n,this.fb=a,this.cdr=i,this.isLegacy=!1,this.textSearchMode=!1,this.textSearch=this.fb.control("",{nonNullable:!0}),this.ModbusProtocolLabelsMap=si,this.onChange=()=>{},this.onTouched=()=>{},this.destroy$=new te,this.masterFormGroup=this.fb.group({slaves:this.fb.array([])}),this.dataSource=new TQ}get slaves(){return this.masterFormGroup.get("slaves")}ngOnInit(){this.masterFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateTableData(e.slaves),this.onChange(e),this.onTouched()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.textSearch.valueChanges.pipe(de(150),ce(((e,t)=>(e??"")===t.trim())),le(this.destroy$)).subscribe((e=>this.updateTableData(this.slaves.value,e.trim())))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.slaves.clear(),this.pushDataAsFormArrays(e.slaves)}enterFilterMode(){this.textSearchMode=!0,this.cdr.detectChanges();const e=this.searchInputField.nativeElement;e.focus(),e.setSelectionRange(0,0)}exitFilterMode(){this.updateTableData(this.slaves.value),this.textSearchMode=!1,this.textSearch.reset()}manageSlave(e,t){e&&e.stopPropagation();const n=ke(t),a=n?this.slaves.at(t).value:{};this.getSlaveDialog(a,n?"action.apply":"action.add").afterClosed().pipe(ye(1),le(this.destroy$)).subscribe((e=>{e&&(n?this.slaves.at(t).patchValue(e):this.slaves.push(this.fb.control(e)),this.masterFormGroup.markAsDirty())}))}getSlaveDialog(e,t){return this.isLegacy?this.dialog.open(UZ,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,hideNewFields:!0,buttonTitle:t}}):this.dialog.open(SZ,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,hideNewFields:!1}})}deleteSlave(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-slave-title",{name:this.slaves.controls[t].value.deviceName}),this.translate.instant("gateway.delete-slave-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(ye(1),le(this.destroy$)).subscribe((e=>{e&&(this.slaves.removeAt(t),this.masterFormGroup.markAsDirty())}))}updateTableData(e,t){t&&(e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(e)}pushDataAsFormArrays(e){e?.length&&e.forEach((e=>this.slaves.push(this.fb.control(e))))}static{this.ɵfac=function(e){return new(e||_Q)(t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:_Q,selectors:[["tb-modbus-master-table"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(sQ,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.searchInputField=e.first)}},inputs:{isLegacy:"isLegacy"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>_Q)),multi:!0}]),t.ɵɵStandaloneFeature],decls:55,vars:41,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-master-table","tb-absolute-fill"],[1,"tb-form-panel","no-border","no-padding","padding-top","hint-container"],["tbTruncateWithTooltip","",1,"tb-form-hint","tb-primary-fill","tb-flex"],[1,"tb-master-table-content","flex","flex-col"],[1,"mat-mdc-table-toolbar"],["class","mat-toolbar-tools",4,"ngIf"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","table-value-column",4,"matHeaderCellDef"],["class","table-value-column",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"tb-master-table-title"],[1,"table-value-column"],["tbTruncateWithTooltip",""],[1,"w-12"],[1,"lt-lg:!hidden","flex","flex-1","flex-row","items-stretch","justify-end"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"div",5),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(5,"div",6)(6,"mat-toolbar",7),t.ɵɵtemplate(7,cQ,14,9,"div",8),t.ɵɵpipe(8,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"mat-toolbar",7)(10,"div",9)(11,"button",10),t.ɵɵpipe(12,"translate"),t.ɵɵelementStart(13,"mat-icon"),t.ɵɵtext(14,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"mat-form-field",11)(16,"mat-label"),t.ɵɵtext(17," "),t.ɵɵelementEnd(),t.ɵɵelement(18,"input",12,0),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"button",13),t.ɵɵpipe(22,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(23,"mat-icon"),t.ɵɵtext(24,"close"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(25,"div",14)(26,"table",15),t.ɵɵelementContainerStart(27,16),t.ɵɵtemplate(28,dQ,4,3,"mat-header-cell",17)(29,uQ,3,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(30,16),t.ɵɵtemplate(31,mQ,3,3,"mat-header-cell",17)(32,hQ,3,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(33,16),t.ɵɵtemplate(34,gQ,3,3,"mat-header-cell",17)(35,fQ,3,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(36,16),t.ɵɵtemplate(37,yQ,4,3,"mat-header-cell",17)(38,vQ,2,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(39,19),t.ɵɵtemplate(40,bQ,1,0,"mat-header-cell",20)(41,wQ,12,6,"mat-cell",21),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(42,SQ,1,0,"mat-header-row",22)(43,CQ,1,0,"mat-row",23),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"section",24),t.ɵɵpipe(45,"async"),t.ɵɵelementStart(46,"button",25),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageSlave(a))})),t.ɵɵelementStart(47,"mat-icon",26),t.ɵɵtext(48,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(49,"span"),t.ɵɵtext(50),t.ɵɵpipe(51,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(52,"span",27),t.ɵɵpipe(53,"async"),t.ɵɵtext(54," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,23,"gateway.hints.modbus-master")),t.ɵɵadvance(3),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!1===t.ɵɵpipeBind1(8,25,n.dataSource.isEmpty())),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(12,27,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(20,29,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(22,31,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","deviceName"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","info"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","unitId"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","type"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(39,lQ))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(40,lQ)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(45,33,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(51,35,"gateway.add-slave")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(53,37,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(_Q,[j,_,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 60px);background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .tb-master-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{table-layout:fixed;min-width:450px}[_nghost-%COMP%]   .tb-master-table[_ngcontent-%COMP%]   .tb-master-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .table-value-column[_ngcontent-%COMP%]{padding:0 12px;width:15%}[_nghost-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:calc(100% - 120px)}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-master-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]   .hint-container[_ngcontent-%COMP%]{z-index:1000}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell .mat-icon{height:24px;width:24px;font-size:24px;color:#757575}'],changeDetection:d.OnPush})}}e("ModbusMasterTableComponent",_Q),Ge([rt()],_Q.prototype,"isLegacy",void 0);class TQ extends G{constructor(){super()}}e("SlavesDatasource",TQ);class IQ extends zi{constructor(){super(),this.enableSlaveControl=new X(!1),this.enableSlaveControl.valueChanges.pipe(xn()).subscribe((e=>{this.updateSlaveEnabling(e),this.basicFormGroup.get("slave").updateValueAndValidity({emitEvent:!!this.onChange})}))}writeValue(e){super.writeValue(e),this.onEnableSlaveControl(e)}validate(){const{master:e,slave:t}=this.basicFormGroup.value,n=!e?.slaves?.length&&(Se(t,{})||!t);return!this.basicFormGroup.valid||n?{basicFormGroup:{valid:!1}}:null}initBasicFormGroup(){return this.fb.group({master:[],slave:[]})}updateSlaveEnabling(e){e?this.basicFormGroup.get("slave").enable({emitEvent:!1}):this.basicFormGroup.get("slave").disable({emitEvent:!1})}onEnableSlaveControl(e){this.enableSlaveControl.setValue(!!e.slave&&!Se(e.slave,{}))}static{this.ɵfac=function(e){return new(e||IQ)}}static{this.ɵdir=t.ɵɵdefineDirective({type:IQ,features:[t.ɵɵInheritDefinitionFeature]})}}e("ModbusBasicConfigDirective",IQ);class EQ extends IQ{constructor(){super(...arguments),this.isLegacy=!1}mapConfigToFormValue({master:e,slave:t}){return{master:e?.slaves?e:{slaves:[]},slave:t??{}}}getMappedValue(e){return{master:e.master,slave:e.slave}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(EQ)))(n||EQ)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:EQ,selectors:[["tb-modbus-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>EQ)),multi:!0},{provide:K,useExisting:c((()=>EQ)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:19,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","master",3,"isLegacy"],[1,"tb-form-panel","no-border","no-padding","padding-top"],[1,"tb-form-hint","tb-primary-fill","tb-flex","center"],[1,"tb-form-row"],[1,"mat-slide",3,"formControl"],["formControlName","slave"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-modbus-master-table",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4)(10,"div",5),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",6)(14,"mat-slide-toggle",7)(15,"mat-label"),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelement(18,"tb-modbus-slave-config",8),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(5,11,"gateway.master-connections")),t.ɵɵadvance(2),t.ɵɵproperty("isLegacy",n.isLegacy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(8,13,"gateway.server-config")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(12,15,"gateway.hints.modbus-server")),t.ɵɵadvance(3),t.ɵɵproperty("formControl",n.enableSlaveControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(17,17,"gateway.enable")," "))},dependencies:t.ɵɵgetComponentDepsFactory(EQ,[j,_,oQ,_Q,Gn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}'],changeDetection:d.OnPush})}}e("ModbusBasicConfigComponent",EQ);class MQ extends IQ{constructor(){super(...arguments),this.isLegacy=!0}mapConfigToFormValue(e){return{master:e.master?.slaves?e.master:{slaves:[]},slave:e.slave?Xi.mapSlaveToUpgradedVersion(e.slave):{}}}getMappedValue(e){return{master:e.master,slave:e.slave?Xi.mapSlaveToDowngradedVersion(e.slave):{}}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(MQ)))(n||MQ)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:MQ,selectors:[["tb-modbus-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>MQ)),multi:!0},{provide:K,useExisting:c((()=>MQ)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:19,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","master",3,"isLegacy"],[1,"tb-form-panel","no-border","no-padding","padding-top"],[1,"tb-form-hint","tb-primary-fill","tb-flex","center"],[1,"tb-form-row"],[1,"mat-slide",3,"formControl"],["formControlName","slave"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-modbus-master-table",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4)(10,"div",5),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",6)(14,"mat-slide-toggle",7)(15,"mat-label"),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelement(18,"tb-modbus-slave-config",8),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(5,11,"gateway.master-connections")),t.ɵɵadvance(2),t.ɵɵproperty("isLegacy",n.isLegacy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(8,13,"gateway.server-config")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(12,15,"gateway.hints.modbus-server")),t.ɵɵadvance(3),t.ɵɵproperty("formControl",n.enableSlaveControl),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(17,17,"gateway.enable")," "))},dependencies:t.ɵɵgetComponentDepsFactory(MQ,[j,_,oQ,_Q,Gn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}'],changeDetection:d.OnPush})}}e("ModbusLegacyBasicConfigComponent",MQ);const kQ=()=>({maxWidth:"970px"});function PQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",20),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.get("key").value," ")}}function DQ(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate(e.get("methodRPC").value)}}function OQ(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate(e.get("attributeOnThingsBoard").value)}}function AQ(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate2(" ",e.get("requestExpression").value+" - ","",e.get("attributeNameExpression").value," ")}}function FQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21),t.ɵɵtemplate(1,DQ,2,1,"ng-container",22)(2,OQ,2,1,"ng-container",22)(3,AQ,2,2,"ng-container",22),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(3);t.ɵɵproperty("ngSwitch",e.keysType),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.SocketValueKey.RPC_METHODS),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.SocketValueKey.ATTRIBUTES_UPDATES),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.SocketValueKey.ATTRIBUTES_REQUESTS)}}function RQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.key-required"))}function BQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function NQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function LQ(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",42),2&e){const e=t.ɵɵnextContext(5);t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Key)}}function VQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3)(1,"div",24)(2,"div",25),t.ɵɵtext(3,"gateway.platform-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",26)(5,"div",27),t.ɵɵpipe(6,"translate"),t.ɵɵpipe(7,"translate"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",28)(11,"mat-form-field",29),t.ɵɵelement(12,"input",30),t.ɵɵpipe(13,"translate"),t.ɵɵtemplate(14,RQ,3,3,"mat-icon",31),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(15,"div",24)(16,"div",25),t.ɵɵtext(17,"gateway.connector-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"div",26)(19,"div",32)(20,"span",33),t.ɵɵtext(21),t.ɵɵpipe(22,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(23,"div",34),t.ɵɵelementEnd(),t.ɵɵelementStart(24,"label",35),t.ɵɵtext(25,"from"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"mat-form-field",36),t.ɵɵelement(27,"input",37),t.ɵɵpipe(28,"translate"),t.ɵɵtemplate(29,BQ,3,3,"mat-icon",31),t.ɵɵelementEnd(),t.ɵɵelementStart(30,"label",38),t.ɵɵtext(31,"to"),t.ɵɵelementEnd(),t.ɵɵelementStart(32,"mat-form-field",36),t.ɵɵelement(33,"input",39),t.ɵɵpipe(34,"translate"),t.ɵɵtemplate(35,NQ,3,3,"mat-icon",31),t.ɵɵelementEnd()(),t.ɵɵtemplate(36,LQ,1,2,"tb-report-strategy",40),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",n.keysType===n.SocketValueKey.ATTRIBUTES?t.ɵɵpipeBind1(6,12,"gateway.hints.socket.key-attribute"):t.ɵɵpipeBind1(7,14,"gateway.hints.socket.key-telemetry")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,16,"gateway.key")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(13,18,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("key").hasError("required")&&e.get("key").touched),t.ɵɵadvance(7),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(22,20,"gateway.byte")),t.ɵɵadvance(2),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/byte_fn")("tb-help-popup-style",t.ɵɵpureFunction0(26,kQ)),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(28,22,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("byteFrom").hasError("required")&&e.get("byteFrom").touched),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(34,24,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("byteTo").hasError("required")&&e.get("byteTo").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.withReportStrategy&&(n.keysType===n.SocketValueKey.ATTRIBUTES||n.keysType===n.SocketValueKey.TIMESERIES))}}function qQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.method-required"))}function GQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",51),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",e.toUpperCase()," ")}}function zQ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",26)(2,"div",43),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",28)(6,"mat-form-field",29),t.ɵɵelement(7,"input",44),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,qQ,3,3,"mat-icon",31),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",26)(11,"div",45),t.ɵɵpipe(12,"translate"),t.ɵɵtext(13," gateway.encoding "),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"div",28)(15,"mat-form-field",29)(16,"mat-select",46),t.ɵɵtemplate(17,GQ,2,2,"mat-option",47),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(18,"div",48)(19,"mat-slide-toggle",49),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(20,"mat-label",50),t.ɵɵpipe(21,"translate"),t.ɵɵtext(22),t.ɵɵpipe(23,"translate"),t.ɵɵelementEnd()()()()}if(2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,7,"gateway.method-name")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("methodRPC").hasError("required")&&e.get("methodRPC").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(12,11,"gateway.hints.encoding")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.socketEncoding),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(21,13,"gateway.hints.socket.with-response")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(23,15,"gateway.rpc.withResponse")," ")}}function UQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",51),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(2,2,e)," ")}}function jQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",51),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(2,2,e)," ")}}function HQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.request-expression-required"))}function WQ(e,n){1&e&&t.ɵɵelement(0,"div",34),2&e&&t.ɵɵproperty("tb-help-popup","widget/lib/gateway/request-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(2,kQ))}function $Q(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",51),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(2,2,e)," ")}}function KQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.attribute-name-expression-required"))}function YQ(e,n){1&e&&t.ɵɵelement(0,"div",34),2&e&&t.ɵɵproperty("tb-help-popup","widget/lib/gateway/attribute-name-expression_fn")("tb-help-popup-style",t.ɵɵpureFunction0(2,kQ))}function XQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3)(1,"div",26)(2,"div",45),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4," gateway.type "),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",28)(6,"mat-form-field",29)(7,"mat-select",52),t.ɵɵtemplate(8,UQ,3,4,"mat-option",47),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(9,"div",26)(10,"div",43),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",53)(14,"mat-form-field",29)(15,"mat-select",54),t.ɵɵtemplate(16,jQ,3,4,"mat-option",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"mat-form-field",29),t.ɵɵelement(18,"input",55),t.ɵɵpipe(19,"translate"),t.ɵɵtemplate(20,HQ,3,3,"mat-icon",31)(21,WQ,1,3,"div",56),t.ɵɵelementEnd()()(),t.ɵɵelementStart(22,"div",26)(23,"div",43),t.ɵɵtext(24),t.ɵɵpipe(25,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"div",53)(27,"mat-form-field",29)(28,"mat-select",57),t.ɵɵtemplate(29,$Q,3,4,"mat-option",47),t.ɵɵelementEnd()(),t.ɵɵelementStart(30,"mat-form-field",29),t.ɵɵelement(31,"input",58),t.ɵɵpipe(32,"translate"),t.ɵɵtemplate(33,KQ,3,3,"mat-icon",31)(34,YQ,1,3,"div",56),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,12,"gateway.hints.socket.attribute-requests-type")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.requestsType),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,14,"gateway.request-expression")," "),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.expressionType),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(19,16,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("requestExpression").hasError("required")&&e.get("requestExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.get("requestExpressionSource").value===n.ExpressionType.Expression),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(25,18,"gateway.attribute-name-expression")," "),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",n.expressionType),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(32,20,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("attributeNameExpression").hasError("required")&&e.get("attributeNameExpression").touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.get("attributeNameExpressionSource").value===n.ExpressionType.Expression)}}function ZQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",51),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",e.toUpperCase()," ")}}function QQ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",41),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.socket.attribute-on-platform-required"))}function JQ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3)(1,"div",26)(2,"div",45),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4," gateway.encoding "),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",28)(6,"mat-form-field",29)(7,"mat-select",46),t.ɵɵtemplate(8,ZQ,2,2,"mat-option",47),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(9,"div",26)(10,"div",43),t.ɵɵtext(11),t.ɵɵpipe(12,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",28)(14,"mat-form-field",29),t.ɵɵelement(15,"input",59),t.ɵɵpipe(16,"translate"),t.ɵɵtemplate(17,QQ,3,3,"mat-icon",31),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext(2).$implicit,n=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,5,"gateway.hints.encoding")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.socketEncoding),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(12,7,"gateway.attribute-on-platform")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.get("attributeOnThingsBoard").hasError("required")&&e.get("attributeOnThingsBoard").touched)}}function eJ(e,n){if(1&e&&t.ɵɵtemplate(0,VQ,37,27,"div",23)(1,zQ,24,17,"div",23)(2,XQ,35,22,"div",23)(3,JQ,18,11,"div",23),2&e){const e=t.ɵɵnextContext(3);t.ɵɵproperty("ngIf",e.keysType===e.SocketValueKey.TIMESERIES||e.keysType===e.SocketValueKey.ATTRIBUTES),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.keysType===e.SocketValueKey.RPC_METHODS),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.keysType===e.SocketValueKey.ATTRIBUTES_REQUESTS),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.keysType===e.SocketValueKey.ATTRIBUTES_UPDATES)}}function tJ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",12)(1,"div",13),t.ɵɵelementContainerStart(2,14),t.ɵɵelementStart(3,"mat-expansion-panel",15)(4,"mat-expansion-panel-header",16)(5,"mat-panel-title"),t.ɵɵtemplate(6,PQ,2,1,"div",17)(7,FQ,4,4,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()(),t.ɵɵtemplate(9,eJ,4,4,"ng-template",18),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"button",19),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"delete"),t.ɵɵelementEnd()()()}if(2&e){const e=n.$implicit,a=n.last,i=t.ɵɵreference(8),r=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("formGroup",e),t.ɵɵadvance(),t.ɵɵproperty("expanded",a),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r.keysType===r.SocketValueKey.TIMESERIES||r.keysType===r.SocketValueKey.ATTRIBUTES)("ngIfElse",i),t.ɵɵadvance(4),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(11,5,r.deleteKeyTitle))}}function nJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10),t.ɵɵtemplate(1,tJ,14,7,"div",11),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.keysListFormArray.controls)("ngForTrackBy",e.trackByKey)}}function aJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",60)(1,"span",61),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.noKeysText)}}class iJ extends q{constructor(e,t,n){super(n),this.fb=e,this.popover=t,this.store=n,this.withReportStrategy=!0,this.keysDataApplied=new u,this.SocketValueKey=la,this.socketEncoding=Object.values(mt),this.requestsType=Object.values(ca),this.expressionType=Object.values(da),this.ExpressionType=da,this.ReportStrategyDefaultValue=en}ngOnInit(){this.keysListFormArray=this.prepareKeysFormArray(this.keys)}trackByKey(e,t){return t}addKey(){let e;e=this.keysType===la.RPC_METHODS?this.fb.group({methodRPC:["",[$.required]],encoding:[mt.UTF16,[$.required]],withResponse:[!0]}):this.keysType===la.ATTRIBUTES_UPDATES?this.fb.group({encoding:[mt.UTF16,[$.required]],attributeOnThingsBoard:["",[$.required]]}):this.keysType===la.ATTRIBUTES_REQUESTS?this.fb.group({type:[ca.Shared],requestExpressionSource:[da.Constant],attributeNameExpressionSource:[da.Constant],requestExpression:["",[$.required]],attributeNameExpression:["",[$.required]]}):this.fb.group({key:["",[$.required,$.pattern(an)]],byteFrom:[0,[$.required]],byteTo:[0,[$.required]],reportStrategy:[{value:null,disabled:this.isReportStrategyDisabled()}]}),this.keysListFormArray.push(e)}deleteKey(e,t){e&&e.stopPropagation(),this.keysListFormArray.removeAt(t),this.keysListFormArray.markAsDirty()}cancel(){this.popover?.hide()}applyKeysData(){let e=this.keysListFormArray.value.map((({reportStrategy:e,...t})=>({...t,...e&&{reportStrategy:e}})));this.keysDataApplied.emit(e)}prepareKeysFormArray(e){const t=[];return e?.forEach((e=>{let n;if(this.keysType===la.RPC_METHODS){const t=e;n=this.fb.group({methodRPC:[t.methodRPC,[$.required]],encoding:[t.encoding,[$.required]],withResponse:[t.withResponse]})}else if(this.keysType===la.ATTRIBUTES_REQUESTS){const t=e;n=this.fb.group({type:[t.type??ca.Shared],requestExpressionSource:[t.requestExpressionSource??da.Constant],attributeNameExpressionSource:[t.attributeNameExpressionSource??da.Constant],requestExpression:[t.requestExpression,[$.required]],attributeNameExpression:[t.attributeNameExpression,[$.required]]})}else if(this.keysType===la.ATTRIBUTES_UPDATES)n=this.fb.group({encoding:[e.encoding??mt.UTF16],attributeOnThingsBoard:[e.attributeOnThingsBoard,[$.required]]});else{const{key:t,byteFrom:a,byteTo:i,reportStrategy:r}=e;n=this.fb.group({key:[t,[$.required,$.pattern(an)]],byteFrom:[a??0,[$.required]],byteTo:[i??0,[$.required]],reportStrategy:[{value:r,disabled:this.isReportStrategyDisabled()}]})}t.push(n)})),this.fb.array(t)}isReportStrategyDisabled(){return!(this.withReportStrategy&&(this.keysType===la.ATTRIBUTES||this.keysType===la.TIMESERIES))}static{this.ɵfac=function(e){return new(e||iJ)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(at.TbPopoverComponent),t.ɵɵdirectiveInject(Ye.Store))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:iJ,selectors:[["tb-device-data-keys-panel"]],inputs:{panelTitle:"panelTitle",addKeyTitle:"addKeyTitle",deleteKeyTitle:"deleteKeyTitle",noKeysText:"noKeysText",keys:"keys",keysType:"keysType",withReportStrategy:"withReportStrategy"},outputs:{keysDataApplied:"keysDataApplied"},standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:19,vars:16,consts:[["noKeys",""],["valueTitle",""],[1,"tb-device-keys-panel"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel-title"],["class","tb-form-panel no-border no-padding key-panel",4,"ngIf","ngIfElse"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-flex","flex-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"tb-form-panel","no-border","no-padding","key-panel"],["class","tb-form-panel no-border no-padding tb-flex no-flex row center fill-width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],["class","title-container",4,"ngIf","ngIfElse"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"title-container"],[1,"title-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","tb-form-panel no-border no-padding",4,"ngIf"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","key",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],[1,"fixed-title-width","tb-flex","align-center"],[1,"tb-required"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],["for","byteFrom",1,"tb-small-label"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap","flex-1"],["matInput","","required","","formControlName","byteFrom","type","number","id","byteFrom",3,"placeholder"],["for","byteTo",1,"tb-small-label"],["matInput","","required","","formControlName","byteTo","type","number","id","byteTo",3,"placeholder"],["formControlName","reportStrategy",3,"isExpansionMode","defaultValue",4,"ngIf"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["formControlName","reportStrategy",3,"isExpansionMode","defaultValue"],[1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","methodRPC",3,"placeholder"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","encoding"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-row"],["formControlName","withResponse",1,"mat-slide",3,"click"],[3,"tb-hint-tooltip-icon"],[3,"value"],["formControlName","type"],[1,"tb-flex"],["formControlName","requestExpressionSource"],["matInput","","name","value","formControlName","requestExpression",3,"placeholder"],["matSuffix","","class","see-example p-1","tb-help-popup-placement","left",3,"tb-help-popup","tb-help-popup-style",4,"ngIf"],["formControlName","attributeNameExpressionSource"],["matInput","","name","value","formControlName","attributeNameExpression",3,"placeholder"],["matInput","","name","value","formControlName","attributeOnThingsBoard",3,"placeholder"],[1,"tb-flex","no-flex","center","align-center","key-panel"],["translate","",1,"tb-prompt"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2)(1,"div",3)(2,"div",4),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,nJ,2,2,"div",5),t.ɵɵelementStart(6,"div")(7,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.addKey())})),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd()()(),t.ɵɵtemplate(10,aJ,3,1,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(12,"div",7)(13,"button",8),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",9),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.applyKeysData())})),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(11);t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,8,n.panelTitle),""," ("+n.keysListFormArray.controls.length+")"," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.keysListFormArray.controls.length)("ngIfElse",e),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,10,n.addKeyTitle)," "),t.ɵɵadvance(6),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(15,12,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.keysListFormArray.invalid||!n.keysListFormArray.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,14,"action.apply")," ")}},dependencies:t.ɵɵgetComponentDepsFactory(iJ,[j,_,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]{width:77vw;max-width:700px}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{max-width:11vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .key-panel[_ngcontent-%COMP%]{height:500px;overflow:auto}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:56px;height:56px;padding:16px;color:#0000008a}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .tb-small-label[_ngcontent-%COMP%]{font-size:16px;padding-right:0}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}'],changeDetection:d.OnPush})}}e("DeviceDataKeysPanelComponent",iJ),Ge([I()],iJ.prototype,"withReportStrategy",void 0);const rJ=()=>({maxWidth:"970px"});function oJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.address-filter-required"))}function sJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-name-required"))}function lJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",40),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.device-profile-required"))}function pJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",41),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",e.toUpperCase()," ")}}function cJ(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",27),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function dJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function uJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function mJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.type," ")}}function hJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.encoding," ")}}function gJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.methodRPC," ")}}class fJ extends A{constructor(e,t,n,a,i,r,o,s,l,p){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.destroyRef=l,this.cdr=p,this.deviceFormGroup=this.fb.group({address:["",[$.required,$.pattern(an)]],deviceName:["",[$.required,$.pattern(an)]],deviceType:["",[$.required,$.pattern(an)]],encoding:[mt.UTF8],telemetry:[[]],attributes:[[]],attributeRequests:[[]],attributeUpdates:[[]],serverSideRpc:[[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]}),this.keysPopupClosed=!0,this.SocketValueKey=la,this.socketDeviceHelpLink=O+"/docs/iot-gateway/config/socket/#device-subsection",this.socketEncoding=Object.values(mt),this.ReportStrategyDefaultValue=en,this.deviceFormGroup.patchValue(this.data.value,{emitEvent:!1})}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.deviceFormGroup.valid){const e=this.deviceFormGroup.value;Te(e),this.dialogRef.close(e)}}manageKeys(e,t,n){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const a=t._elementRef.nativeElement;if(this.popoverService.hasPopover(a))return void this.popoverService.hidePopover(a);const i=this.deviceFormGroup.get(n),r={keys:i.value,keysType:n,panelTitle:pa.get(n),addKeyTitle:ua.get(n),deleteKeyTitle:ma.get(n),noKeysText:ha.get(n),withReportStrategy:this.data.withReportStrategy};this.keysPopupClosed=!1,this.popoverComponent=this.popoverService.displayPopover(a,this.renderer,this.viewContainerRef,iJ,"leftBottom",!1,null,r,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.pipe(xn(this.destroyRef)).subscribe((e=>{this.popoverComponent.hide(),i.patchValue(e),i.markAsDirty(),this.cdr.markForCheck()})),this.popoverComponent.tbHideStart.pipe(xn(this.destroyRef)).subscribe((()=>{this.keysPopupClosed=!0}))}static{this.ɵfac=function(e){return new(e||fJ)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.DestroyRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:fJ,selectors:[["tb-device-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:119,vars:57,consts:[["socketTelemetryButton",""],["attributesButton",""],["attributeRequestsButton",""],["attributesUpdatesButton",""],["rpcMethodsButton",""],[1,"dialog-mapping",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width"],["translate","",1,"tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","address",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","name","value","formControlName","deviceName",3,"placeholder"],["matInput","","name","value","formControlName","deviceType",3,"placeholder"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","encoding"],[3,"value",4,"ngFor","ngForOf"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"],[1,"tb-form-row","space-between","tb-flex"],["translate","",1,"fixed-title-width"],[1,"tb-flex","ellipsis-chips-container"],[1,"tb-flex",3,"tbEllipsisChipList"],[4,"ngFor","ngForOf"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[3,"value"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",5)(1,"mat-toolbar",6)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",7)(6,"div",8),t.ɵɵelementStart(7,"button",9),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(8,"mat-icon",10),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",11)(11,"div",12)(12,"div",13)(13,"div",14)(14,"div",15),t.ɵɵtext(15," gateway.address-filter "),t.ɵɵelementEnd()(),t.ɵɵelementStart(16,"div",16)(17,"mat-form-field",17),t.ɵɵelement(18,"input",18),t.ɵɵpipe(19,"translate"),t.ɵɵtemplate(20,oJ,3,3,"mat-icon",19),t.ɵɵelement(21,"div",20),t.ɵɵelementEnd()()(),t.ɵɵelementStart(22,"div",13)(23,"div",21),t.ɵɵtext(24,"gateway.device-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"div",16)(26,"mat-form-field",17),t.ɵɵelement(27,"input",22),t.ɵɵpipe(28,"translate"),t.ɵɵtemplate(29,sJ,3,3,"mat-icon",19),t.ɵɵelementEnd()()(),t.ɵɵelementStart(30,"div",13)(31,"div",21),t.ɵɵtext(32,"gateway.device-profile"),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"div",16)(34,"mat-form-field",17),t.ɵɵelement(35,"input",23),t.ɵɵpipe(36,"translate"),t.ɵɵtemplate(37,lJ,3,3,"mat-icon",19),t.ɵɵelementEnd()()(),t.ɵɵelementStart(38,"div",13)(39,"div",24),t.ɵɵpipe(40,"translate"),t.ɵɵtext(41," gateway.encoding "),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"div",16)(43,"mat-form-field",17)(44,"mat-select",25),t.ɵɵtemplate(45,pJ,2,2,"mat-option",26),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(46,cJ,1,2,"tb-report-strategy",27),t.ɵɵelementStart(47,"div",28)(48,"div",29),t.ɵɵtext(49,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(50,"div",30)(51,"mat-chip-listbox",31),t.ɵɵtemplate(52,dJ,2,1,"mat-chip",32),t.ɵɵelementStart(53,"mat-chip",33),t.ɵɵelement(54,"label",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(55,"button",35,0),t.ɵɵpipe(57,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(56);return t.ɵɵresetView(n.manageKeys(a,i,n.SocketValueKey.TIMESERIES))})),t.ɵɵelementStart(58,"tb-icon",36),t.ɵɵtext(59,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(60,"div",28)(61,"div",29),t.ɵɵtext(62,"gateway.attributes"),t.ɵɵelementEnd(),t.ɵɵelementStart(63,"div",30)(64,"mat-chip-listbox",31),t.ɵɵtemplate(65,uJ,2,1,"mat-chip",32),t.ɵɵelementStart(66,"mat-chip",33),t.ɵɵelement(67,"label",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(68,"button",35,1),t.ɵɵpipe(70,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(69);return t.ɵɵresetView(n.manageKeys(a,i,n.SocketValueKey.ATTRIBUTES))})),t.ɵɵelementStart(71,"tb-icon",36),t.ɵɵtext(72,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(73,"div",28)(74,"div",29),t.ɵɵtext(75,"gateway.attribute-requests"),t.ɵɵelementEnd(),t.ɵɵelementStart(76,"div",30)(77,"mat-chip-listbox",31),t.ɵɵtemplate(78,mJ,2,1,"mat-chip",32),t.ɵɵelementStart(79,"mat-chip",33),t.ɵɵelement(80,"label",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(81,"button",35,2),t.ɵɵpipe(83,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(82);return t.ɵɵresetView(n.manageKeys(a,i,n.SocketValueKey.ATTRIBUTES_REQUESTS))})),t.ɵɵelementStart(84,"tb-icon",36),t.ɵɵtext(85,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(86,"div",28)(87,"div",29),t.ɵɵtext(88,"gateway.attribute-updates"),t.ɵɵelementEnd(),t.ɵɵelementStart(89,"div",30)(90,"mat-chip-listbox",31),t.ɵɵtemplate(91,hJ,2,1,"mat-chip",32),t.ɵɵelementStart(92,"mat-chip",33),t.ɵɵelement(93,"label",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(94,"button",35,3),t.ɵɵpipe(96,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(95);return t.ɵɵresetView(n.manageKeys(a,i,n.SocketValueKey.ATTRIBUTES_UPDATES))})),t.ɵɵelementStart(97,"tb-icon",36),t.ɵɵtext(98,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(99,"div",28)(100,"div",29),t.ɵɵtext(101,"gateway.rpc-methods"),t.ɵɵelementEnd(),t.ɵɵelementStart(102,"div",30)(103,"mat-chip-listbox",31),t.ɵɵtemplate(104,gJ,2,1,"mat-chip",32),t.ɵɵelementStart(105,"mat-chip",33),t.ɵɵelement(106,"label",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(107,"button",35,4),t.ɵɵpipe(109,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(108);return t.ɵɵresetView(n.manageKeys(a,i,n.SocketValueKey.RPC_METHODS))})),t.ɵɵelementStart(110,"tb-icon",36),t.ɵɵtext(111,"edit"),t.ɵɵelementEnd()()()()()(),t.ɵɵelementStart(112,"div",37)(113,"button",38),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(114),t.ɵɵpipe(115,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(116,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.add())})),t.ɵɵtext(117),t.ɵɵpipe(118,"translate"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵproperty("formGroup",n.deviceFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,32,"gateway.device")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.socketDeviceHelpLink),t.ɵɵadvance(12),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(19,34,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.deviceFormGroup.get("address").hasError("required")&&n.deviceFormGroup.get("address").touched),t.ɵɵadvance(),t.ɵɵproperty("tb-help-popup","widget/lib/gateway/address-filter_fn")("tb-help-popup-style",t.ɵɵpureFunction0(56,rJ)),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(28,36,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.deviceFormGroup.get("deviceName").hasError("required")&&n.deviceFormGroup.get("deviceName").touched),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(36,38,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.deviceFormGroup.get("deviceType").hasError("required")&&n.deviceFormGroup.get("deviceType").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(40,40,"gateway.hints.encoding")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.socketEncoding),t.ɵɵadvance(),t.ɵɵconditional(n.data.withReportStrategy?46:-1),t.ɵɵadvance(5),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("telemetry").value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.deviceFormGroup.get("telemetry").value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(57,42,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("attributes").value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.deviceFormGroup.get("attributes").value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(70,44,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("attributeRequests").value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.deviceFormGroup.get("attributeRequests").value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(83,46,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("attributeUpdates").value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.deviceFormGroup.get("attributeUpdates").value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(96,48,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("serverSideRpc").value),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.deviceFormGroup.get("serverSideRpc").value),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(109,50,"action.edit")),t.ɵɵadvance(7),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(115,52,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.deviceFormGroup.invalid||!n.deviceFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(118,54,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(fJ,[j,_,Gn,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{display:grid;height:100%}[_nghost-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]{width:77vw;max-width:800px}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]{max-width:900px;display:flex;flex-direction:column}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{min-height:64px}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]   tb-toggle-select[_ngcontent-%COMP%]{padding:4px 0}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{height:670px}[_nghost-%COMP%]   .ellipsis-chips-container[_ngcontent-%COMP%]{max-width:70%}[_nghost-%COMP%]     .dialog-mapping .mat-mdc-chip-listbox .mdc-evolution-chip-set__chips{justify-content:flex-end;align-items:center}[_nghost-%COMP%]     .tb-form-row .fixed-title-width{min-width:40px;width:35%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}[_nghost-%COMP%]     .tb-form-row .mat-mdc-form-field{width:0}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}[_nghost-%COMP%]     .device-config{gap:12px;padding-left:10px;padding-right:10px}[_nghost-%COMP%]     .device-node-pattern-field{flex-basis:3%}'],changeDetection:d.OnPush})}}e("DeviceDialogComponent",fJ);const yJ=["searchInput"],vJ=()=>["address","deviceName","actions"],bJ=()=>({minWidth:"96px",textAlign:"center"});function xJ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",7)(1,"div",26)(2,"span",27),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelement(5,"span",9),t.ɵɵelementStart(6,"button",11),t.ɵɵpipe(7,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageDevices(n))})),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"button",11),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.devices")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,7,"action.search")))}function wJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",28),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.address-filter")," "))}function SJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.address)}}function CJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.device-name")))}function _J(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.deviceName)}}function TJ(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",30)}function IJ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",11),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageDevices(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",11),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteDevice(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function EJ(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,IJ,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",31),t.ɵɵelementContainer(4,32),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",33)(6,"button",34),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",35),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",36,2),t.ɵɵelementContainer(11,32),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(3),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,bJ)),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function MJ(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",37)}function kJ(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class PJ{constructor(e,t,n,a,i){this.translate=e,this.dialog=t,this.dialogService=n,this.fb=a,this.cdr=i,this.withReportStrategy=!0,this.textSearchMode=!1,this.textSearch=this.fb.control("",{nonNullable:!0}),this.onChange=()=>{},this.destroy$=new te,this.devicesFormGroup=this.fb.array([]),this.dataSource=new DJ}ngOnInit(){this.devicesFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.updateTableData(e),this.onChange(e)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.textSearch.valueChanges.pipe(de(150),ce(((e,t)=>(e??"")===t.trim())),le(this.destroy$)).subscribe((e=>this.updateTableData(this.devicesFormGroup.value,e.trim())))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){this.devicesFormGroup.clear(),this.pushDataAsFormArrays(e)}enterFilterMode(){this.textSearchMode=!0,this.cdr.detectChanges();const e=this.searchInputField.nativeElement;e.focus(),e.setSelectionRange(0,0)}exitFilterMode(){this.updateTableData(this.devicesFormGroup.value),this.textSearchMode=!1,this.textSearch.reset()}manageDevices(e,t){e&&e.stopPropagation();const n=ke(t),a=n?this.devicesFormGroup.at(t).value:{};this.getDeviceDialog(a,n?"action.apply":"action.add").afterClosed().pipe(ye(1),le(this.destroy$)).subscribe((e=>{e&&(n?this.devicesFormGroup.at(t).patchValue(e):this.devicesFormGroup.push(this.fb.control(e)),this.devicesFormGroup.markAsDirty())}))}validate(){return this.devicesFormGroup.controls.length?null:{devicesFormGroup:{valid:!1}}}getDeviceDialog(e,t){return this.dialog.open(fJ,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,withReportStrategy:this.withReportStrategy}})}deleteDevice(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-device-title",{name:this.devicesFormGroup.controls[t].value.deviceName}),this.translate.instant("gateway.delete-device-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(ye(1),le(this.destroy$)).subscribe((e=>{e&&(this.devicesFormGroup.removeAt(t),this.devicesFormGroup.markAsDirty())}))}updateTableData(e,t){t&&(e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(e)}pushDataAsFormArrays(e){e?.length&&e.forEach((e=>this.devicesFormGroup.push(this.fb.control(e))))}static{this.ɵfac=function(e){return new(e||PJ)(t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:PJ,selectors:[["tb-devices-config-table"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(yJ,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.searchInputField=e.first)}},inputs:{withReportStrategy:"withReportStrategy"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>PJ)),multi:!0},{provide:K,useExisting:c((()=>PJ)),multi:!0}]),t.ɵɵStandaloneFeature],decls:45,vars:36,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-device-table","tb-absolute-fill"],[1,"tb-device-table-content","flex","flex-col"],[1,"mat-mdc-table-toolbar"],["class","mat-toolbar-tools",4,"ngIf"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","table-value-column",4,"matHeaderCellDef"],["class","table-value-column",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"tb-device-table-title"],[1,"table-value-column"],["tbTruncateWithTooltip",""],[1,"w-12"],[1,"lt-lg:!hidden","flex","flex-1","flex-row","items-stretch","justify-end"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,xJ,14,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"div",7)(7,"button",8),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"mat-icon"),t.ɵɵtext(10,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",9)(12,"mat-label"),t.ɵɵtext(13," "),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",10,0),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"button",11),t.ɵɵpipe(18,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(19,"mat-icon"),t.ɵɵtext(20,"close"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(21,"div",12)(22,"table",13),t.ɵɵelementContainerStart(23,14),t.ɵɵtemplate(24,wJ,3,3,"mat-header-cell",15)(25,SJ,3,1,"mat-cell",16),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(26,14),t.ɵɵtemplate(27,CJ,4,3,"mat-header-cell",15)(28,_J,3,1,"mat-cell",16),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(29,17),t.ɵɵtemplate(30,TJ,1,0,"mat-header-cell",18)(31,EJ,12,6,"mat-cell",19),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(32,MJ,1,0,"mat-header-row",20)(33,kJ,1,0,"mat-row",21),t.ɵɵelementEnd(),t.ɵɵelementStart(34,"section",22),t.ɵɵpipe(35,"async"),t.ɵɵelementStart(36,"button",23),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageDevices(a))})),t.ɵɵelementStart(37,"mat-icon",24),t.ɵɵtext(38,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(39,"span"),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(42,"span",25),t.ɵɵpipe(43,"async"),t.ɵɵtext(44," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!1===t.ɵɵpipeBind1(4,20,n.dataSource.isEmpty())),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,22,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,24,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,26,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","address"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","deviceName"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(34,vJ))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(35,vJ)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(35,28,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(41,30,"gateway.add-device")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(43,32,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(PJ,[j,_,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .tb-device-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{table-layout:fixed;min-width:450px}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .table-value-column[_ngcontent-%COMP%]{padding:0 12px;width:35%}[_nghost-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:calc(100% - 120px)}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-device-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell .mat-icon{height:24px;width:24px;font-size:24px;color:#757575}'],changeDetection:d.OnPush})}}e("DevicesConfigTableComponent",PJ),Ge([I()],PJ.prototype,"withReportStrategy",void 0);let DJ=class extends G{constructor(){super()}};function OJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",14),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function AJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",15),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.address-required"))}function FJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",15),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.socketConfigFormGroup.get("port")))}}function RJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",15),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.socketConfigFormGroup.get("bufferSize").hasError("min")?"gateway.buffer-size-range":"gateway.buffer-size-required"))}}e("DevicesDatasource",DJ);class BJ{constructor(e){this.fb=e,this.portLimits=Ia,this.socketTypes=Object.values(sa),this.onChange=e=>{},this.destroy$=new te,this.socketConfigFormGroup=this.fb.group({address:["",[$.required,$.pattern(an)]],type:[sa.TCP],port:[5e4,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],bufferSize:[1024,[$.required,$.min(1),$.pattern(an)]]}),this.socketConfigFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){const{address:t="",type:n=sa.TCP,port:a=5e4,bufferSize:i=1024}=e??{};this.socketConfigFormGroup.reset({address:t,type:n,port:a,bufferSize:i})}validate(){return this.socketConfigFormGroup.valid?null:{socketConfigFormGroup:{valid:!1}}}static{this.ɵfac=function(e){return new(e||BJ)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:BJ,selectors:[["tb-socket-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>BJ)),multi:!0},{provide:K,useExisting:c((()=>BJ)),multi:!0}]),t.ɵɵStandaloneFeature],decls:34,vars:25,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row","column-xs"],[1,"fixed-title-width"],["tbTruncateWithTooltip",""],["formControlName","type","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],["translate","",1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","address",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","name","value","min","1","formControlName","bufferSize",3,"placeholder"],[3,"value"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(6,"tb-toggle-select",4),t.ɵɵtemplate(7,OJ,2,2,"tb-toggle-option",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",1)(9,"div",6),t.ɵɵtext(10,"gateway.address"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"div",7)(12,"mat-form-field",8),t.ɵɵelement(13,"input",9),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,AJ,3,3,"mat-icon",10),t.ɵɵelementEnd()()(),t.ɵɵelementStart(16,"div",1)(17,"div",6),t.ɵɵtext(18,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",7)(20,"mat-form-field",8),t.ɵɵelement(21,"input",11),t.ɵɵpipe(22,"translate"),t.ɵɵtemplate(23,FJ,3,3,"mat-icon",10),t.ɵɵelementEnd()()(),t.ɵɵelementStart(24,"div",1)(25,"div",12),t.ɵɵpipe(26,"translate"),t.ɵɵtext(27),t.ɵɵpipe(28,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"div",7)(30,"mat-form-field",8),t.ɵɵelement(31,"input",13),t.ɵɵpipe(32,"translate"),t.ɵɵtemplate(33,RJ,3,3,"mat-icon",10),t.ɵɵelementEnd()()()()),2&e&&(t.ɵɵproperty("formGroup",n.socketConfigFormGroup),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,13,"gateway.connection-type")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.socketTypes),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,15,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.socketConfigFormGroup.get("address").hasError("required")&&n.socketConfigFormGroup.get("address").touched),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(22,17,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",(n.socketConfigFormGroup.get("port").hasError("required")||n.socketConfigFormGroup.get("port").hasError("min")||n.socketConfigFormGroup.get("port").hasError("max"))&&n.socketConfigFormGroup.get("port").touched),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(26,19,"gateway.hints.buffer-size")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(28,21,"gateway.buffer-size")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(32,23,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.socketConfigFormGroup.get("bufferSize").hasError("required")||n.socketConfigFormGroup.get("bufferSize").hasError("min")&&n.socketConfigFormGroup.get("bufferSize").touched))},dependencies:t.ɵɵgetComponentDepsFactory(BJ,[j,_,m$,qn]),encapsulation:2,changeDetection:d.OnPush})}}e("SocketConfigComponent",BJ);class NJ extends zi{constructor(){super(...arguments),this.isLegacy=!1}getMappedValue(e){return e}initBasicFormGroup(){return this.fb.group({socket:[],devices:[]})}mapConfigToFormValue(e){return{socket:e.socket??{},devices:e.devices??[]}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(NJ)))(n||NJ)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:NJ,selectors:[["tb-socket-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>NJ)),multi:!0},{provide:K,useExisting:c((()=>NJ)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:10,vars:14,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","socket"],["formControlName","devices",3,"withReportStrategy"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-socket-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-devices-config-table",4),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,8,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,10,"gateway.socket"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,12,"gateway.devices"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("withReportStrategy",!n.isLegacy))},dependencies:t.ɵɵgetComponentDepsFactory(NJ,[j,_,BJ,PJ]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}e("SocketBasicConfigComponent",NJ);class LJ extends zi{constructor(){super(...arguments),this.isLegacy=!0}getMappedValue(e){return Qi.mapSocketToDowngradedVersion(e)}initBasicFormGroup(){return this.fb.group({socket:[],devices:[]})}mapConfigToFormValue(e){return{socket:Qi.mapSocketToUpgradedVersion(e),devices:e?.devices?Qi.mapDevicesToUpgradedVersion(e.devices):[]}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(LJ)))(n||LJ)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:LJ,selectors:[["tb-socket-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>LJ)),multi:!0},{provide:K,useExisting:c((()=>LJ)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:10,vars:14,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","socket"],["formControlName","devices",3,"withReportStrategy"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-socket-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-devices-config-table",4),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,8,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,10,"gateway.socket"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,12,"gateway.devices"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("withReportStrategy",!n.isLegacy))},dependencies:t.ɵɵgetComponentDepsFactory(LJ,[j,_,BJ,PJ]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}function VJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",6),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.name-required"))}function qJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",6),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function GJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",6),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.applicationConfigFormGroup.get("port")))}}function zJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",6),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.object-id-required"))}function UJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",6),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.vendor-id-required"))}function jJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",21),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.SegmentationTypeTranslationsMap.get(e))," ")}}e("SocketLegacyBasicConfigComponent",LJ);class HJ extends Gi{constructor(){super(...arguments),this.segmentationTypes=Object.values(fi),this.SegmentationTypeTranslationsMap=yi,this.portLimits=Ia}get applicationConfigFormGroup(){return this.formGroup}initFormGroup(){return this.fb.group({objectName:["",[$.required,$.pattern(an)]],host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],mask:[""],objectIdentifier:[null,[$.required]],vendorIdentifier:[null,[$.required]],maxApduLengthAccepted:[],segmentationSupported:[fi.BOTH],networkNumber:[],deviceDiscoveryTimeoutInSec:[]})}mapOnChangeValue(e){return Te(e),e}onWriteValue(e){const{maxApduLengthAccepted:t=1476,segmentationSupported:n=fi.BOTH,networkNumber:a=3,deviceDiscoveryTimeoutInSec:i=5,...r}=e;this.formGroup.reset({...r,maxApduLengthAccepted:t,segmentationSupported:n,networkNumber:a,deviceDiscoveryTimeoutInSec:i},{emitEvent:!1})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(HJ)))(n||HJ)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:HJ,selectors:[["tb-bacnet-application-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>HJ)),multi:!0},{provide:K,useExisting:c((()=>HJ)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:83,vars:53,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","autocomplete","off","name","value","formControlName","objectName",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["translate","",1,"fixed-title-width"],["matInput","","name","value","formControlName","mask",3,"placeholder"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","type","number","min","0","name","value","formControlName","objectIdentifier",3,"placeholder"],["matInput","","type","number","min","0","name","value","formControlName","vendorIdentifier",3,"placeholder"],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-panel","no-border","no-padding","padding-top"],["matInput","","type","number","min","0","name","value","formControlName","maxApduLengthAccepted",3,"placeholder"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","segmentationSupported"],[3,"value"],["matInput","","type","number","min","0","name","value","formControlName","networkNumber",3,"placeholder"],["matInput","","type","number","min","0","name","value","formControlName","deviceDiscoveryTimeoutInSec",3,"placeholder"],["translate","","matSuffix","",1,"block","pr-2"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.bacnet.object-name"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",3)(5,"mat-form-field",4),t.ɵɵelement(6,"input",5),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,VJ,3,3,"mat-icon",6),t.ɵɵelementEnd()()(),t.ɵɵelementStart(9,"div",1)(10,"div",2),t.ɵɵtext(11,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",4),t.ɵɵelement(13,"input",7),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,qJ,3,3,"mat-icon",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(16,"div",1)(17,"div",2),t.ɵɵtext(18,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"mat-form-field",4),t.ɵɵelement(20,"input",8),t.ɵɵpipe(21,"translate"),t.ɵɵtemplate(22,GJ,3,3,"mat-icon",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(23,"div",1)(24,"div",9),t.ɵɵtext(25,"gateway.network-mask"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"mat-form-field",4),t.ɵɵelement(27,"input",10),t.ɵɵpipe(28,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(29,"div",1)(30,"div",11),t.ɵɵpipe(31,"translate"),t.ɵɵtext(32,"gateway.object-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"mat-form-field",4),t.ɵɵelement(34,"input",12),t.ɵɵpipe(35,"translate"),t.ɵɵtemplate(36,zJ,3,3,"mat-icon",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(37,"div",1)(38,"div",11),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40,"gateway.vendor-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(41,"mat-form-field",4),t.ɵɵelement(42,"input",13),t.ɵɵpipe(43,"translate"),t.ɵɵtemplate(44,UJ,3,3,"mat-icon",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(45,"div",14)(46,"mat-expansion-panel",15)(47,"mat-expansion-panel-header")(48,"mat-panel-title")(49,"div",16),t.ɵɵtext(50,"gateway.advanced-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(51,"div",17)(52,"div",1)(53,"div",11),t.ɵɵpipe(54,"translate"),t.ɵɵtext(55,"gateway.bacnet.apdu-length"),t.ɵɵelementEnd(),t.ɵɵelementStart(56,"mat-form-field",4),t.ɵɵelement(57,"input",18),t.ɵɵpipe(58,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(59,"div",1)(60,"div",19),t.ɵɵpipe(61,"translate"),t.ɵɵtext(62,"gateway.bacnet.segmentation.label"),t.ɵɵelementEnd(),t.ɵɵelementStart(63,"mat-form-field",4)(64,"mat-select",20),t.ɵɵrepeaterCreate(65,jJ,3,4,"mat-option",21,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()(),t.ɵɵelementStart(67,"div",1)(68,"div",19),t.ɵɵpipe(69,"translate"),t.ɵɵtext(70,"gateway.bacnet.network-number"),t.ɵɵelementEnd(),t.ɵɵelementStart(71,"mat-form-field",4),t.ɵɵelement(72,"input",22),t.ɵɵpipe(73,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(74,"div",1)(75,"div",19),t.ɵɵpipe(76,"translate"),t.ɵɵtext(77,"gateway.bacnet.device-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(78,"mat-form-field",4),t.ɵɵelement(79,"input",23),t.ɵɵpipe(80,"translate"),t.ɵɵelementStart(81,"span",24),t.ɵɵtext(82,"gateway.suffix.s"),t.ɵɵelementEnd()()()()()()()),2&e&&(t.ɵɵproperty("formGroup",n.applicationConfigFormGroup),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,23,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.applicationConfigFormGroup.get("objectName").hasError("required")&&n.applicationConfigFormGroup.get("objectName").touched?8:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,25,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.applicationConfigFormGroup.get("host").hasError("required")&&n.applicationConfigFormGroup.get("host").touched?15:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(21,27,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional((n.applicationConfigFormGroup.get("port").hasError("required")||n.applicationConfigFormGroup.get("port").hasError("min")||n.applicationConfigFormGroup.get("port").hasError("max"))&&n.applicationConfigFormGroup.get("port").touched?22:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(28,29,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(31,31,"gateway.hints.bacnet.object-id")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(35,33,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.applicationConfigFormGroup.get("objectIdentifier").hasError("required")&&n.applicationConfigFormGroup.get("objectIdentifier").touched?36:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(39,35,"gateway.hints.bacnet.vendor-id")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(43,37,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.applicationConfigFormGroup.get("vendorIdentifier").hasError("required")&&n.applicationConfigFormGroup.get("vendorIdentifier").touched?44:-1),t.ɵɵadvance(9),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(54,39,"gateway.hints.bacnet.apdu-length")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(58,41,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(61,43,"gateway.hints.bacnet.segmentation")),t.ɵɵadvance(5),t.ɵɵrepeater(n.segmentationTypes),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(69,45,"gateway.hints.bacnet.network-number")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(73,47,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(76,49,"gateway.hints.bacnet.device-timeout")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(80,51,"gateway.set")))},dependencies:t.ɵɵgetComponentDepsFactory(HJ,[j,_,m$]),encapsulation:2,changeDetection:d.OnPush})}}function WJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",11),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.key-required"))}function $J(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",14),t.ɵɵpipe(1,"translate"),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",15)(6,"mat-form-field",6),t.ɵɵelement(7,"input",16),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,WJ,3,3,"mat-icon",11),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",e.keyType===e.BacnetDeviceKeysType.TIMESERIES?t.ɵɵpipeBind1(1,4,"gateway.hints.socket.key-telemetry"):t.ɵɵpipeBind1(2,6,"gateway.hints.socket.key-attribute")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,8,"gateway.key")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,10,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.formGroup.get("key").hasError("required")&&e.formGroup.get("key").touched?9:-1)}}function KJ(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",11),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.method-required"))}function YJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",14),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",15)(5,"mat-form-field",6),t.ɵɵelement(6,"input",17),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,KJ,3,3,"mat-icon",11),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(1,4,"gateway.hints.method")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,6,"gateway.method")," "),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,8,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.formGroup.get("method").hasError("required")&&e.formGroup.get("method").touched?8:-1)}}function XJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",8),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext(2);t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.BacnetRequestTypeTranslationsMap.get(e))," ")}}function ZJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3)(1,"div",18)(2,"div",14),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"tb-toggle-select",19),t.ɵɵrepeaterCreate(7,XJ,3,4,"tb-toggle-option",8,t.ɵɵrepeaterTrackByIndex),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,2,"gateway.hints.bacnet.request-type")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,4,"gateway.bacnet.request-type.label")),t.ɵɵadvance(3),t.ɵɵrepeater(e.requestTypes)}}function QJ(e,n){1&e&&(t.ɵɵelementStart(0,"div",3)(1,"div",4),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.request-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",6),t.ɵɵelement(5,"input",20),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,2,"gateway.hints.bacnet.request-timeout")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,4,"gateway.set")))}function JJ(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",8),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.BacnetKeyObjectTypeTranslationsMap.get(e))," ")}}function e1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",11),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.object-id-required"))}function t1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",8),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.BacnetPropertyIdTranslationsMap.get(e))," ")}}function n1(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",13),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Key)}}class a1 extends Gi{constructor(){super(...arguments),this.withReportStrategy=!0,this.propertyIds=Ii.get(Ci.analogOutput),this.objectTypes=Object.values(Ci),this.requestTypes=Object.values(Mi),this.ReportStrategyDefaultValue=en,this.BacnetDeviceKeysType=vi,this.BacnetKeyObjectTypeTranslationsMap=_i,this.BacnetPropertyIdTranslationsMap=Ei,this.BacnetRequestTypeTranslationsMap=ki}ngOnInit(){this.formGroup=this.initKeyFormGroup(),this.observeValueChanges(),this.observeObjectType()}isReportStrategyDisabled(){return!(this.withReportStrategy&&(this.keyType===vi.ATTRIBUTES||this.keyType===vi.TIMESERIES))}initKeyFormGroup(){return this.fb.group({key:[{value:"",disabled:this.keyType===vi.RPC_METHODS},[$.required,$.pattern(an)]],method:[{value:"",disabled:this.keyType!==vi.RPC_METHODS},[$.required,$.pattern(an)]],objectType:[Ci.analogOutput],objectId:[0,[$.required]],propertyId:[Ti.presentValue],requestTimeout:[{value:0,disabled:this.keyType!==vi.RPC_METHODS}],requestType:[{value:Mi.Write,disabled:this.keyType!==vi.RPC_METHODS}],reportStrategy:[{value:null,disabled:this.isReportStrategyDisabled()}]})}observeObjectType(){this.formGroup.get("objectType").valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>{this.propertyIds=Ii.get(e),this.propertyIds.includes(this.formGroup.get("propertyId").value)||this.formGroup.get("propertyId").patchValue(this.propertyIds[0],{emitEvent:!1})}))}initFormGroup(){return this.fb.group({})}mapOnChangeValue({reportStrategy:e,...t}){return e?{...t,reportStrategy:e}:t}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(a1)))(n||a1)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:a1,selectors:[["tb-bacnet-device-data-key"]],inputs:{keyType:"keyType",withReportStrategy:[2,"withReportStrategy","withReportStrategy",m]},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>a1)),multi:!0},{provide:K,useExisting:c((()=>a1)),multi:!0}]),t.ɵɵInputTransformsFeature,t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:35,vars:15,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],[1,"tb-flex","no-gap","raw-value-option"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","objectType"],[3,"value"],[1,"tb-form-table-row-cell","tb-flex","no-gap"],["matInput","","type","number","min","0","name","value","formControlName","objectId",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["formControlName","propertyId"],["formControlName","reportStrategy",3,"isExpansionMode","defaultValue"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],[1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","key",3,"placeholder"],["matInput","","name","value","formControlName","method",3,"placeholder"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],["formControlName","requestType","appearance","fill"],["matInput","","type","number","min","0","name","value","formControlName","requestTimeout",3,"placeholder"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.platform-side"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",3),t.ɵɵtemplate(5,$J,10,12)(6,YJ,9,10),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"div",1)(8,"div",2),t.ɵɵtext(9,"gateway.connector-side"),t.ɵɵelementEnd(),t.ɵɵtemplate(10,ZJ,9,6,"div",3)(11,QJ,7,6,"div",3),t.ɵɵelementStart(12,"div",3)(13,"div",4),t.ɵɵpipe(14,"translate"),t.ɵɵtext(15,"gateway.object-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"div",5)(17,"mat-form-field",6)(18,"mat-select",7),t.ɵɵrepeaterCreate(19,JJ,3,4,"mat-option",8,t.ɵɵrepeaterTrackByIndex),t.ɵɵelementEnd()()(),t.ɵɵelementStart(21,"div",9)(22,"mat-form-field",6),t.ɵɵelement(23,"input",10),t.ɵɵpipe(24,"translate"),t.ɵɵtemplate(25,e1,3,3,"mat-icon",11),t.ɵɵelementEnd()()(),t.ɵɵelementStart(26,"div",3)(27,"div",4),t.ɵɵpipe(28,"translate"),t.ɵɵtext(29,"gateway.property-id"),t.ɵɵelementEnd(),t.ɵɵelementStart(30,"mat-form-field",6)(31,"mat-select",12),t.ɵɵrepeaterCreate(32,t1,3,4,"mat-option",8,t.ɵɵrepeaterTrackByIndex),t.ɵɵelementEnd()()(),t.ɵɵtemplate(34,n1,1,2,"tb-report-strategy",13),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.formGroup),t.ɵɵadvance(5),t.ɵɵconditional(n.keyType!==n.BacnetDeviceKeysType.RPC_METHODS?5:6),t.ɵɵadvance(5),t.ɵɵconditional(n.keyType===n.BacnetDeviceKeysType.RPC_METHODS?10:-1),t.ɵɵadvance(),t.ɵɵconditional(n.keyType===n.BacnetDeviceKeysType.RPC_METHODS?11:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(14,9,"gateway.hints.bacnet.key-object-id")),t.ɵɵadvance(6),t.ɵɵrepeater(n.objectTypes),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(24,11,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.formGroup.get("objectId").hasError("required")&&n.formGroup.get("objectId").touched?25:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(28,13,"gateway.hints.bacnet.property-id")),t.ɵɵadvance(5),t.ɵɵrepeater(n.propertyIds),t.ɵɵadvance(2),t.ɵɵconditional(n.isReportStrategyDisabled()?-1:34))},dependencies:t.ɵɵgetComponentDepsFactory(a1,[j,_,Xn]),encapsulation:2,changeDetection:d.OnPush})}}function i1(e,n){if(1&e&&t.ɵɵelement(0,"tb-bacnet-device-data-key",17),2&e){const e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext(2);t.ɵɵproperty("formControl",e)("keyType",n.keysType)("withReportStrategy",n.withReportStrategy)}}function r1(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9)(1,"div",10),t.ɵɵelementContainerStart(2,11),t.ɵɵelementStart(3,"mat-expansion-panel",12)(4,"mat-expansion-panel-header",13)(5,"mat-panel-title")(6,"div",14),t.ɵɵtext(7),t.ɵɵelementEnd()()(),t.ɵɵtemplate(8,i1,1,3,"ng-template",15),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"button",16),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"delete"),t.ɵɵelementEnd()()()}if(2&e){let e;const a=n.$implicit,i=n.$index,r=n.$count,o=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("formGroup",a),t.ɵɵadvance(),t.ɵɵproperty("expanded",i===r-1),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",null!==(e=null==a.value?null:a.value.key)&&void 0!==e?e:null==a.value?null:a.value.method," "),t.ɵɵadvance(2),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(10,4,o.deleteKeyTitle))}}function o1(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵrepeaterCreate(1,r1,13,6,"div",9,t.ɵɵrepeaterTrackByIndex),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵrepeater(e.keysListFormArray.controls)}}function s1(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4)(1,"span",18),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.noKeysText)}}class l1 extends q{constructor(e,t,n){super(n),this.fb=e,this.popover=t,this.store=n,this.withReportStrategy=!0,this.keysDataApplied=p(),this.ReportStrategyDefaultValue=en}ngOnInit(){this.keysListFormArray=this.prepareKeysFormArray(this.keys)}addKey(){this.keysListFormArray.push(this.fb.control({}))}deleteKey(e,t){e&&e.stopPropagation(),this.keysListFormArray.removeAt(t),this.keysListFormArray.markAsDirty()}cancel(){this.popover?.hide()}applyKeysData(){this.keysDataApplied.emit(this.keysListFormArray.value)}prepareKeysFormArray(e){const t=[];return e?.forEach((e=>{t.push(this.fb.control(e))})),this.fb.array(t)}static{this.ɵfac=function(e){return new(e||l1)(t.ɵɵdirectiveInject(H.UntypedFormBuilder),t.ɵɵdirectiveInject(at.TbPopoverComponent),t.ɵɵdirectiveInject(Ye.Store))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:l1,selectors:[["tb-bacnet-device-data-keys-panel"]],inputs:{panelTitle:"panelTitle",addKeyTitle:"addKeyTitle",deleteKeyTitle:"deleteKeyTitle",noKeysText:"noKeysText",keys:"keys",keysType:"keysType",withReportStrategy:[2,"withReportStrategy","withReportStrategy",m]},outputs:{keysDataApplied:"keysDataApplied"},standalone:!0,features:[t.ɵɵInputTransformsFeature,t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:18,vars:15,consts:[[1,"tb-device-keys-panel"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel-title"],[1,"tb-form-panel","no-border","no-padding","key-panel"],[1,"tb-flex","no-flex","center","align-center","key-panel"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-flex","flex-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"title-container"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[3,"formControl","keyType","withReportStrategy"],["translate","",1,"tb-prompt"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,o1,3,0,"div",3)(6,s1,3,1,"div",4),t.ɵɵelementStart(7,"div")(8,"button",5),t.ɵɵlistener("click",(function(){return n.addKey()})),t.ɵɵtext(9),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(11,"div",6)(12,"button",7),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"button",8),t.ɵɵlistener("click",(function(){return n.applyKeysData()})),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,7,n.panelTitle),""," ("+n.keysListFormArray.controls.length+")"," "),t.ɵɵadvance(2),t.ɵɵconditional(n.keysListFormArray.controls.length?5:6),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(10,9,n.addKeyTitle)," "),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(14,11,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.keysListFormArray.invalid||!n.keysListFormArray.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(17,13,"action.apply")," "))},dependencies:t.ɵɵgetComponentDepsFactory(l1,[j,_,a1]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]{width:77vw;max-width:700px}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{max-width:11vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .key-panel[_ngcontent-%COMP%]{height:500px;overflow:auto}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:56px;height:56px;padding:16px;color:#0000008a}[_nghost-%COMP%]   .tb-device-keys-panel[_ngcontent-%COMP%]   .tb-small-label[_ngcontent-%COMP%]{font-size:16px;padding-right:0}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}'],changeDetection:d.OnPush})}}function p1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",16),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function c1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",16),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.deviceFormGroup.get("port")))}}function d1(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",12)(1,"mat-expansion-panel",34)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"div",35),t.ɵɵtext(5,"gateway.advanced-configuration-settings"),t.ɵɵelementEnd()()(),t.ɵɵelement(6,"tb-string-items-list",36),t.ɵɵpipe(7,"translate"),t.ɵɵpipe(8,"translate"),t.ɵɵelementEnd()()),2&e){let e;const n=t.ɵɵnextContext();t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(7,2,"gateway.bacnet.alt-responses-address")),t.ɵɵpropertyInterpolate("placeholder",null!=(e=n.deviceFormGroup.get("altResponsesAddresses").value)&&e.length?"":t.ɵɵpipeBind1(8,4,"gateway.address"))}}function u1(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",19),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function m1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",16),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.hints.poll-period-required"))}function h1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function g1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function f1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function y1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.method," ")}}class v1 extends A{constructor(e,t,n,a,i,r,o,s,l,p){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.cdr=l,this.destroyRef=p,this.deviceFormGroup=this.fb.group({host:["",[$.required,$.pattern(an)]],port:["",[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],deviceInfo:[],altResponsesAddresses:[{value:[],disabled:this.data.hideNewFields}],pollPeriod:[1e4,[$.required,$.min(0)]],timeseries:[[]],attributes:[[]],attributeUpdates:[[]],serverSideRpc:[[]],reportStrategy:[{value:null,disabled:!this.data.withReportStrategy}]}),this.keysPopupClosed=!0,this.BacnetDeviceKeysType=vi,this.DeviceInfoType=gi,this.portLimits=Ia,this.deviceHelpLink=O+"/docs/iot-gateway/config/bacnet/#device-object-settings",this.sourceTypes=Object.values(da),this.ConnectorType=ct,this.ReportStrategyDefaultValue=en,this.deviceFormGroup.patchValue(this.data.value,{emitEvent:!1})}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.deviceFormGroup.valid){const{altResponsesAddresses:e,reportStrategy:t,...n}=this.deviceFormGroup.value;this.dialogRef.close({altResponsesAddresses:e??[],...t?{reportStrategy:t}:{},...n})}}manageKeys(e,t,n){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const a=t._elementRef.nativeElement;if(this.popoverService.hasPopover(a))return void this.popoverService.hidePopover(a);const i=this.deviceFormGroup.get(n),r={keys:i.value,keysType:n,panelTitle:bi.get(n),addKeyTitle:xi.get(n),deleteKeyTitle:wi.get(n),noKeysText:Si.get(n),withReportStrategy:this.data.withReportStrategy};this.keysPopupClosed=!1,this.popoverComponent=this.popoverService.displayPopover(a,this.renderer,this.viewContainerRef,l1,"leftBottom",!1,null,r,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.subscribe((e=>{this.popoverComponent.hide(),i.patchValue(e),i.markAsDirty(),this.cdr.markForCheck()})),this.popoverComponent.tbHideStart.pipe(xn(this.destroyRef)).subscribe((()=>{this.keysPopupClosed=!0}))}static{this.ɵfac=function(e){return new(e||v1)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(t.DestroyRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:v1,selectors:[["tb-bacnet-device-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:100,vars:47,consts:[["attributesButton",""],["socketTelemetryButton",""],["attributesUpdatesButton",""],["rpcMethodsButton",""],[1,"dialog-mapping",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["formControlName","deviceInfo","required","true",3,"deviceInfoType","sourceTypes","connectorType"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"],[1,"fixed-title-width","tb-required"],["tbTruncateWithTooltip","","translate",""],["matInput","","type","number","min","0","name","value","formControlName","pollPeriod",3,"placeholder"],[1,"tb-form-row","space-between","tb-flex"],["translate","",1,"fixed-title-width"],[1,"tb-flex","ellipsis-chips-container"],[1,"tb-flex",3,"tbEllipsisChipList"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"tb-settings","chips-panel","w-full"],["translate","",1,"tb-form-panel-title"],["editable","","floatLabel","always","formControlName","altResponsesAddresses",1,"chips-list",3,"label","placeholder"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",4)(1,"mat-toolbar",5)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",6)(6,"div",7),t.ɵɵelementStart(7,"button",8),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(8,"mat-icon",9),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13),t.ɵɵtext(14,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"mat-form-field",14),t.ɵɵelement(16,"input",15),t.ɵɵpipe(17,"translate"),t.ɵɵtemplate(18,p1,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(19,"div",12)(20,"div",13),t.ɵɵtext(21,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"mat-form-field",14),t.ɵɵelement(23,"input",17),t.ɵɵpipe(24,"translate"),t.ɵɵtemplate(25,c1,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵtemplate(26,d1,9,6,"div",12),t.ɵɵelement(27,"tb-device-info-table",18),t.ɵɵtemplate(28,u1,1,2,"tb-report-strategy",19),t.ɵɵelementStart(29,"div",12)(30,"div",20)(31,"span",21),t.ɵɵtext(32,"gateway.poll-period"),t.ɵɵelementEnd()(),t.ɵɵelementStart(33,"mat-form-field",14),t.ɵɵelement(34,"input",22),t.ɵɵpipe(35,"translate"),t.ɵɵtemplate(36,m1,3,3,"mat-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(37,"div",23)(38,"div",24),t.ɵɵtext(39,"gateway.attributes"),t.ɵɵelementEnd(),t.ɵɵelementStart(40,"div",25)(41,"mat-chip-listbox",26),t.ɵɵrepeaterCreate(42,h1,2,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(44,"mat-chip",27),t.ɵɵelement(45,"label",28),t.ɵɵelementEnd()(),t.ɵɵelementStart(46,"button",29,0),t.ɵɵpipe(48,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(47);return t.ɵɵresetView(n.manageKeys(a,i,n.BacnetDeviceKeysType.ATTRIBUTES))})),t.ɵɵelementStart(49,"tb-icon",30),t.ɵɵtext(50,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(51,"div",23)(52,"div",24),t.ɵɵtext(53,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(54,"div",25)(55,"mat-chip-listbox",26),t.ɵɵrepeaterCreate(56,g1,2,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(58,"mat-chip",27),t.ɵɵelement(59,"label",28),t.ɵɵelementEnd()(),t.ɵɵelementStart(60,"button",29,1),t.ɵɵpipe(62,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(61);return t.ɵɵresetView(n.manageKeys(a,i,n.BacnetDeviceKeysType.TIMESERIES))})),t.ɵɵelementStart(63,"tb-icon",30),t.ɵɵtext(64,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(65,"div",23)(66,"div",24),t.ɵɵtext(67,"gateway.attribute-updates"),t.ɵɵelementEnd(),t.ɵɵelementStart(68,"div",25)(69,"mat-chip-listbox",26),t.ɵɵrepeaterCreate(70,f1,2,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(72,"mat-chip",27),t.ɵɵelement(73,"label",28),t.ɵɵelementEnd()(),t.ɵɵelementStart(74,"button",29,2),t.ɵɵpipe(76,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(75);return t.ɵɵresetView(n.manageKeys(a,i,n.BacnetDeviceKeysType.ATTRIBUTES_UPDATES))})),t.ɵɵelementStart(77,"tb-icon",30),t.ɵɵtext(78,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(79,"div",23)(80,"div",24),t.ɵɵtext(81,"gateway.rpc-methods"),t.ɵɵelementEnd(),t.ɵɵelementStart(82,"div",25)(83,"mat-chip-listbox",26),t.ɵɵrepeaterCreate(84,y1,2,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(86,"mat-chip",27),t.ɵɵelement(87,"label",28),t.ɵɵelementEnd()(),t.ɵɵelementStart(88,"button",29,3),t.ɵɵpipe(90,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(89);return t.ɵɵresetView(n.manageKeys(a,i,n.BacnetDeviceKeysType.RPC_METHODS))})),t.ɵɵelementStart(91,"tb-icon",30),t.ɵɵtext(92,"edit"),t.ɵɵelementEnd()()()()()(),t.ɵɵelementStart(93,"div",31)(94,"button",32),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(95),t.ɵɵpipe(96,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(97,"button",33),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.add())})),t.ɵɵtext(98),t.ɵɵpipe(99,"translate"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵproperty("formGroup",n.deviceFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,27,"gateway.device")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.deviceHelpLink),t.ɵɵadvance(10),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(17,29,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.deviceFormGroup.get("host").hasError("required")&&n.deviceFormGroup.get("host").touched?18:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(24,31,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional((n.deviceFormGroup.get("port").hasError("required")||n.deviceFormGroup.get("port").hasError("min")||n.deviceFormGroup.get("port").hasError("max"))&&n.deviceFormGroup.get("port").touched?25:-1),t.ɵɵadvance(),t.ɵɵconditional(n.data.hideNewFields?-1:26),t.ɵɵadvance(),t.ɵɵproperty("deviceInfoType",n.DeviceInfoType.FULL)("sourceTypes",n.sourceTypes)("connectorType",n.ConnectorType.BACNET),t.ɵɵadvance(),t.ɵɵconditional(n.data.withReportStrategy?28:-1),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(35,33,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.deviceFormGroup.get("pollPeriod").hasError("required")&&n.deviceFormGroup.get("pollPeriod").touched?36:-1),t.ɵɵadvance(5),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("attributes").value),t.ɵɵadvance(),t.ɵɵrepeater(n.deviceFormGroup.get("attributes").value),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(48,35,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("timeseries").value),t.ɵɵadvance(),t.ɵɵrepeater(n.deviceFormGroup.get("timeseries").value),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(62,37,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("attributeUpdates").value),t.ɵɵadvance(),t.ɵɵrepeater(n.deviceFormGroup.get("attributeUpdates").value),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(76,39,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.deviceFormGroup.get("serverSideRpc").value),t.ɵɵadvance(),t.ɵɵrepeater(n.deviceFormGroup.get("serverSideRpc").value),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(90,41,"action.edit")),t.ɵɵadvance(7),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(96,43,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.deviceFormGroup.invalid||!n.deviceFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(99,45,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(v1,[j,_,Gn,qn,m$,F$,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{display:grid;height:100%}[_nghost-%COMP%]   .tb-form-panel[_ngcontent-%COMP%]{width:77vw;max-width:800px}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]{max-width:900px;display:flex;flex-direction:column}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{min-height:64px}[_nghost-%COMP%]   .dialog-mapping[_ngcontent-%COMP%]   tb-toggle-select[_ngcontent-%COMP%]{padding:4px 0}[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{height:670px}[_nghost-%COMP%]   .ellipsis-chips-container[_ngcontent-%COMP%]{max-width:70%}[_nghost-%COMP%]   .chips-panel[_ngcontent-%COMP%]{padding:6px 6px 6px 0}[_nghost-%COMP%]     .dialog-mapping .mat-mdc-chip-listbox .mdc-evolution-chip-set__chips{justify-content:flex-end;align-items:center}[_nghost-%COMP%]     .tb-form-row .fixed-title-width{min-width:40px;width:35%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}[_nghost-%COMP%]     .tb-form-row .mat-mdc-form-field{width:0}[_nghost-%COMP%]     .tb-form-row .chips-list .mat-mdc-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}[_nghost-%COMP%]     .device-config{gap:12px;padding-left:10px;padding-right:10px}[_nghost-%COMP%]     .device-node-pattern-field{flex-basis:3%}'],changeDetection:d.OnPush})}}const b1=()=>["deviceName","host","port","actions"],x1=()=>({minWidth:"96px",textAlign:"center"});function w1(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",7)(1,"div",26)(2,"span",27),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelement(5,"span",9),t.ɵɵelementStart(6,"button",11),t.ɵɵpipe(7,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageDevices(n))})),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"button",11),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.devices")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,7,"action.search")))}function S1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.device-name")))}function C1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==e.deviceInfo?null:e.deviceInfo.deviceNameExpression)}}function _1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",28),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.host")," "))}function T1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.host)}}function I1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",28),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.port")," "))}function E1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",28)(1,"div",29),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.port)}}function M1(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",30)}function k1(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",11),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageDevices(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",11),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteDevice(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function P1(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,k1,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",31),t.ɵɵelementContainer(4,32),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",33)(6,"button",34),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",35),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",36,2),t.ɵɵelementContainer(11,32),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(3),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,x1)),t.ɵɵadvance(),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function D1(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",37)}function O1(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class A1 extends Wi{constructor(){super(...arguments),this.hideNewFields=!1}getDatasource(){return new F1}manageDevices(e,t){e&&e.stopPropagation();const n=ke(t),a=n?this.entityFormArray.at(t).value:{};this.getDeviceDialog(a,n?"action.apply":"action.add").afterClosed().pipe(ye(1),xn(this.destroyRef)).subscribe((e=>{e&&(n?this.entityFormArray.at(t).patchValue(e):this.entityFormArray.push(this.fb.control(e)),this.entityFormArray.markAsDirty())}))}deleteDevice(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-device-title",{name:this.entityFormArray.controls[t].value.deviceInfo?.deviceNameExpression}),this.translate.instant("gateway.delete-device-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(ye(1),xn(this.destroyRef)).subscribe((e=>{e&&(this.entityFormArray.removeAt(t),this.entityFormArray.markAsDirty())}))}getDeviceDialog(e,t){return this.dialog.open(v1,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,withReportStrategy:this.withReportStrategy,hideNewFields:this.hideNewFields}})}updateTableData(e,t){t&&(e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())||e.deviceNameExpression?.toString().toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(e)}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(A1)))(n||A1)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:A1,selectors:[["tb-bacnet-devices-config-table"]],inputs:{hideNewFields:[2,"hideNewFields","hideNewFields",m]},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>A1)),multi:!0},{provide:K,useExisting:c((()=>A1)),multi:!0}]),t.ɵɵInputTransformsFeature,t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:48,vars:37,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-device-table","tb-absolute-fill"],[1,"tb-device-table-content","flex","flex-col"],[1,"mat-mdc-table-toolbar"],["class","mat-toolbar-tools",4,"ngIf"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","table-value-column",4,"matHeaderCellDef"],["class","table-value-column",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"tb-device-table-title"],[1,"table-value-column"],["tbTruncateWithTooltip",""],[1,"w-12"],[1,"lt-lg:!hidden","flex","flex-1","flex-row","items-stretch","justify-end"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,w1,14,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"div",7)(7,"button",8),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"mat-icon"),t.ɵɵtext(10,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",9)(12,"mat-label"),t.ɵɵtext(13," "),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",10,0),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"button",11),t.ɵɵpipe(18,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(19,"mat-icon"),t.ɵɵtext(20,"close"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(21,"div",12)(22,"table",13),t.ɵɵelementContainerStart(23,14),t.ɵɵtemplate(24,S1,4,3,"mat-header-cell",15)(25,C1,3,1,"mat-cell",16),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(26,14),t.ɵɵtemplate(27,_1,3,3,"mat-header-cell",15)(28,T1,3,1,"mat-cell",16),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(29,14),t.ɵɵtemplate(30,I1,3,3,"mat-header-cell",15)(31,E1,3,1,"mat-cell",16),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(32,17),t.ɵɵtemplate(33,M1,1,0,"mat-header-cell",18)(34,P1,12,6,"mat-cell",19),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(35,D1,1,0,"mat-header-row",20)(36,O1,1,0,"mat-row",21),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"section",22),t.ɵɵpipe(38,"async"),t.ɵɵelementStart(39,"button",23),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageDevices(a))})),t.ɵɵelementStart(40,"mat-icon",24),t.ɵɵtext(41,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"span"),t.ɵɵtext(43),t.ɵɵpipe(44,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(45,"span",25),t.ɵɵpipe(46,"async"),t.ɵɵtext(47," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵproperty("ngIf",!1===t.ɵɵpipeBind1(4,21,n.dataSource.isEmpty())),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,23,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(16,25,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,27,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","deviceName"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","host"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","port"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(35,b1))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(36,b1)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(38,29,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(44,31,"gateway.add-device")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(46,33,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(A1,[j,_,qn]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .tb-device-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{table-layout:fixed;min-width:450px}[_nghost-%COMP%]   .tb-device-table[_ngcontent-%COMP%]   .tb-device-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .table-value-column[_ngcontent-%COMP%]{padding:0 12px;width:21%}[_nghost-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:calc(100% - 120px)}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-device-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell .mat-icon{height:24px;width:24px;font-size:24px;color:#757575}'],changeDetection:d.OnPush})}}class F1 extends G{constructor(){super()}}class R1 extends zi{initBasicFormGroup(){return this.fb.group({application:[],devices:[]})}mapConfigToFormValue(e){return{application:e.application??{},devices:e.devices??[]}}getMappedValue(e){return{application:e.application,devices:e.devices??[]}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(R1)))(n||R1)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:R1,selectors:[["tb-bacnet-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>R1)),multi:!0},{provide:K,useExisting:c((()=>R1)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:11,vars:15,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","application"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","devices",3,"hideNewFields","withReportStrategy"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-bacnet-application-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-bacnet-devices-config-table",5),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.application"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.devices"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("hideNewFields",n.isLegacy)("withReportStrategy",n.withReportStrategy))},dependencies:t.ɵɵgetComponentDepsFactory(R1,[j,_,HJ,A1]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}class B1 extends zi{constructor(){super(...arguments),this.isLegacy=!0}initBasicFormGroup(){return this.fb.group({application:[],devices:[]})}mapConfigToFormValue(e){return{application:e.general?Ji.mapApplicationToUpgradedVersion(e.general):{},devices:e.devices?.length?Ji.mapDevicesToUpgradedVersion(e.devices):[]}}getMappedValue(e){return{general:e.application?Ji.mapApplicationToDowngradedVersion(e.application):{},devices:e.devices?.length?Ji.mapDevicesToDowngradedVersion(e.devices):[]}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(B1)))(n||B1)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:B1,selectors:[["tb-bacnet-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>B1)),multi:!0},{provide:K,useExisting:c((()=>B1)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:11,vars:15,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","application"],[1,"tb-form-panel","no-border","no-padding","padding-top","tb-flex","fill-height"],["formControlName","devices",3,"hideNewFields","withReportStrategy"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-bacnet-application-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"div",4),t.ɵɵelement(10,"tb-bacnet-devices-config-table",5),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.application"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.devices"),"*"),t.ɵɵadvance(3),t.ɵɵproperty("hideNewFields",n.isLegacy)("withReportStrategy",n.withReportStrategy))},dependencies:t.ɵɵgetComponentDepsFactory(B1,[j,_,HJ,A1]),styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     .mat-mdc-tab-group, [_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{height:100%}'],changeDetection:d.OnPush})}}function N1(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",5),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function L1(e,n){if(1&e&&(t.ɵɵelement(0,"tb-error-icon",8),t.ɵɵpipe(1,"getGatewayPortTooltip"),t.ɵɵpipe(2,"translate")),2&e){t.ɵɵnextContext();const e=t.ɵɵreadContextLet(16);t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(2,3,t.ɵɵpipeBind1(1,1,e)))}}class V1 extends Gi{constructor(){super(...arguments),this.portLimits=Ia}get serverConfigFormGroup(){return this.formGroup}initFormGroup(){return this.fb.group({host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],SSL:[!1],security:this.fb.group({cert:[""],key:[""]})})}mapOnChangeValue(e){return Te(e),e}onWriteValue(e){this.formGroup.reset(e,{emitEvent:!1})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(V1)))(n||V1)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:V1,selectors:[["tb-rest-server-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>V1)),multi:!0},{provide:K,useExisting:c((()=>V1)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:46,vars:43,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],[1,"tb-form-row","column-xs"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],["matSuffix","",3,"tooltipText"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","space-between","tb-flex","fill-width"],["formControlName","SSL",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],[3,"formGroup"],["tbTruncateWithTooltip","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],[1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","cert",3,"placeholder"],["matInput","","name","value","formControlName","key",3,"placeholder"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-form-field",3),t.ɵɵelement(6,"input",4),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,N1,3,3,"mat-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",6)(10,"div",2),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",3),t.ɵɵelement(14,"input",7),t.ɵɵpipe(15,"translate"),t.ɵɵdeclareLet(16),t.ɵɵtemplate(17,L1,3,5,"tb-error-icon",8),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",9)(19,"div",10),t.ɵɵtext(20,"gateway.security"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"div",11)(22,"mat-slide-toggle",12)(23,"mat-label",13),t.ɵɵpipe(24,"translate"),t.ɵɵtext(25),t.ɵɵpipe(26,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementContainerStart(27,14),t.ɵɵelementStart(28,"div",11)(29,"div",15),t.ɵɵpipe(30,"translate"),t.ɵɵtext(31),t.ɵɵpipe(32,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"div",16)(34,"mat-form-field",3),t.ɵɵelement(35,"input",17),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(37,"div",11)(38,"div",15),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"div",16)(43,"mat-form-field",3),t.ɵɵelement(44,"input",18),t.ɵɵpipe(45,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()()),2&e){t.ɵɵproperty("formGroup",n.serverConfigFormGroup),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,18,"gateway.hints.rest.host")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,20,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.serverConfigFormGroup.get("host").hasError("required")&&n.serverConfigFormGroup.get("host").touched?8:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(11,22,"gateway.hints.rest.port")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,24,"gateway.set")),t.ɵɵadvance(2);const e=t.ɵɵstoreLet(n.serverConfigFormGroup.get("port"));t.ɵɵadvance(),t.ɵɵconditional((e.hasError("required")||e.hasError("min")||e.hasError("max"))&&e.touched?17:-1),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(24,27,"gateway.hints.rest.ssl-verify")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(26,29,"gateway.rest.ssl-verify")," "),t.ɵɵadvance(2),t.ɵɵproperty("formGroup",n.serverConfigFormGroup.get("security")),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(30,31,"gateway.hints.rest.cert")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(32,33,"gateway.certificate")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(36,35,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(39,37,"gateway.hints.rest.key")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(41,39,"gateway.key")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(45,41,"gateway.set"))}},dependencies:t.ɵɵgetComponentDepsFactory(V1,[j,_,m$,qn,Qn]),encapsulation:2,changeDetection:d.OnPush})}}const q1=()=>({min:1});function G1(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",4),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.ResponseTypeTranslationsMap.get(e)))}}function z1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",4),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function U1(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",4),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function j1(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,7),t.ɵɵelementStart(1,"div",8)(2,"div",9),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",10)(6,"mat-form-field",11)(7,"mat-select",12),t.ɵɵrepeaterCreate(8,z1,2,2,"mat-option",4,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(10,"div",8)(11,"div",9),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"div",10)(15,"mat-form-field",11)(16,"mat-select",13),t.ɵɵrepeaterCreate(17,U1,2,2,"mat-option",4,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("formGroup",e.responseConfigFormGroup.get(e.ResponseType.CONST)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.rest.on-success")),t.ɵɵadvance(5),t.ɵɵrepeater(e.responseStatuses),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(13,5,"gateway.rest.on-error")),t.ɵɵadvance(5),t.ɵɵrepeater(e.responseStatuses)}}function H1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",17),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.response-timeout-required"))}function W1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",17),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind2(1,1,"gateway.response-timeout-limits-error",t.ɵɵpureFunction0(4,q1)))}function $1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",17),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.timeout-pattern"))}function K1(e,n){1&e&&(t.ɵɵelementStart(0,"span",18),t.ɵɵtext(1,"gateway.suffix.s"),t.ɵɵelementEnd())}function Y1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",17),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.response-attribute-required"))}function X1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",17),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.response-attribute-pattern"))}function Z1(e,n){if(1&e&&(t.ɵɵdeclareLet(0),t.ɵɵelementContainerStart(1,7),t.ɵɵelementStart(2,"div",8)(3,"mat-slide-toggle",14)(4,"mat-label"),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(7,"div",8)(8,"div",15),t.ɵɵtext(9,"gateway.timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-form-field",11),t.ɵɵelement(11,"input",16),t.ɵɵpipe(12,"translate"),t.ɵɵdeclareLet(13),t.ɵɵtemplate(14,H1,2,3,"tb-error-icon",17)(15,W1,2,5,"tb-error-icon",17)(16,$1,2,3,"tb-error-icon",17)(17,K1,2,0,"span",18),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",8)(19,"div",15),t.ɵɵtext(20,"gateway.rest.response-attribute"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",11),t.ɵɵelement(22,"input",19),t.ɵɵpipe(23,"translate"),t.ɵɵtemplate(24,Y1,2,3,"tb-error-icon",17)(25,X1,2,3,"tb-error-icon",17),t.ɵɵelementEnd()(),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵnextContext(),n=e.responseConfigFormGroup.get(e.ResponseType.ADVANCED);t.ɵɵadvance(),t.ɵɵproperty("formGroup",n),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,6,"gateway.rest.response-expected")," "),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(12,8,"gateway.set"));const a=n.get("timeout").touched;t.ɵɵadvance(3),t.ɵɵconditional(n.get("timeout").hasError("required")&&a?14:n.get("timeout").hasError("min")&&a?15:n.get("timeout").hasError("pattern")&&a?16:17),t.ɵɵadvance(8),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(23,10,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.get("responseAttribute").hasError("required")&&n.get("responseAttribute").touched?24:n.get("responseAttribute").hasError("pattern")&&n.get("responseAttribute").touched?25:-1)}}class Q1 extends Gi{get responseConfigFormGroup(){return this.formGroup}constructor(){super(),this.ResponseTypeTranslationsMap=ba,this.ResponseType=ya,this.responseTypes=Object.values(ya),this.responseStatuses=Object.values(va),this.observeIsExpected()}initFormGroup(){return this.fb.group({type:[ya.DEFAULT],[ya.CONST]:this.fb.group({successResponse:[va.OK],unsuccessfulResponse:[va.ERROR]}),[ya.ADVANCED]:this.fb.group({responseExpected:[!0],timeout:[null,[$.required,$.min(.001),$.pattern(nn)]],responseAttribute:["",[$.required,$.pattern(an)]]})})}mapOnChangeValue({type:e,...t}){return{type:e,...t[e]??{}}}onWriteValue(e){const{type:t=ya.DEFAULT,...n}=e??{};this.toggleIsExpected(n.responseExpected,t),this.responseConfigFormGroup.patchValue({type:t,[t]:n},{emitEvent:!1})}toggleIsExpected(e,t){const n=e&&t===ya.ADVANCED;this.responseConfigFormGroup.get(ya.ADVANCED).get("timeout")[n?"enable":"disable"]({emitEvent:!1}),this.responseConfigFormGroup.get(ya.ADVANCED).get("responseAttribute")[n?"enable":"disable"]({emitEvent:!1})}observeIsExpected(){se(this.responseConfigFormGroup.get("type").valueChanges,this.responseConfigFormGroup.get(ya.ADVANCED).get("responseExpected").valueChanges).pipe(xn()).subscribe((()=>this.toggleIsExpected(this.responseConfigFormGroup.get(ya.ADVANCED).get("responseExpected").value,this.responseConfigFormGroup.get("type").value)))}static{this.ɵfac=function(e){return new(e||Q1)}}static{this.ɵcmp=t.ɵɵdefineComponent({type:Q1,selectors:[["tb-rest-response-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>Q1)),multi:!0},{provide:K,useExisting:c((()=>Q1)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:11,vars:7,consts:[[1,"tb-form-row","space-between","same-padding","tb-flex","column","size-full",3,"formGroup"],[1,"tb-flex","row","space-between","align-center","no-gap","fill-width"],[1,"fixed-title-width","tb-required"],["formControlName","type","appearance","fill"],[3,"value"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"formGroup"],[1,"tb-form-row"],[1,"fixed-title-width"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["formControlName","successResponse"],["formControlName","unsuccessfulResponse"],["formControlName","responseExpected",1,"mat-slide"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","type","number","min","0","name","value","formControlName","timeout",3,"placeholder"],["matSuffix","",3,"tooltipText"],["translate","","matSuffix","",1,"block","pr-2"],["matInput","","type","text","name","value","formControlName","responseAttribute",3,"placeholder"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"tb-toggle-select",3),t.ɵɵrepeaterCreate(6,G1,3,4,"tb-toggle-option",4,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()(),t.ɵɵelementContainerStart(8,5),t.ɵɵtemplate(9,j1,19,7,"ng-template",6)(10,Z1,26,12,"ng-template",6),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.responseConfigFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,5,"gateway.response")),t.ɵɵadvance(3),t.ɵɵrepeater(n.responseTypes),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitch",n.responseConfigFormGroup.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.ResponseType.CONST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.ResponseType.ADVANCED))},dependencies:t.ɵɵgetComponentDepsFactory(Q1,[j,_,Qn]),encapsulation:2,changeDetection:d.OnPush})}}function J1(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",15),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.endpoint-required"))}function e0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",17),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function t0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",15),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.http-methods-required"))}function n0(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",17),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.RestConvertorTypeTranslationsMap.get(e)))}}function a0(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",27),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function i0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",40),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function r0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",40),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function o0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",28)(1,"div",20)(2,"div",21),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",33)(6,"mat-chip-listbox",34),t.ɵɵrepeaterCreate(7,i0,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(9,"mat-chip",35),t.ɵɵelement(10,"label",36),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"button",37,0),t.ɵɵpipe(13,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(12),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.ATTRIBUTES))})),t.ɵɵelementStart(14,"tb-icon",38),t.ɵɵtext(15,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(16,"div",20)(17,"div",39),t.ɵɵtext(18,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",33)(20,"mat-chip-listbox",34),t.ɵɵrepeaterCreate(21,r0,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(23,"mat-chip",35),t.ɵɵelement(24,"label",36),t.ɵɵelementEnd()(),t.ɵɵelementStart(25,"button",37,1),t.ɵɵpipe(27,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(26),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.TIMESERIES))})),t.ɵɵelementStart(28,"tb-icon",38),t.ɵɵtext(29,"edit"),t.ɵɵelementEnd()()()()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,5,"gateway.attributes")),t.ɵɵadvance(3),t.ɵɵproperty("tbEllipsisChipList",e.converterAttributes),t.ɵɵadvance(),t.ɵɵrepeater(e.converterAttributes),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(13,7,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",e.converterTelemetry),t.ɵɵadvance(),t.ɵɵrepeater(e.converterTelemetry),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(27,9,"action.edit"))}}function s0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",15),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.extension-required"))}function l0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",40),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function p0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",28)(1,"div",11)(2,"div",12),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-form-field",41),t.ɵɵelement(7,"input",42),t.ɵɵpipe(8,"translate"),t.ɵɵtemplate(9,s0,2,3,"tb-error-icon",15),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"div",43)(11,"div",24),t.ɵɵtext(12),t.ɵɵpipe(13,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"div",25),t.ɵɵtext(15),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"div",20)(18,"div",21),t.ɵɵtext(19),t.ɵɵpipe(20,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"div",44)(22,"mat-chip-listbox",34),t.ɵɵtemplate(23,l0,3,1,"mat-chip",45),t.ɵɵelementStart(24,"mat-chip",35),t.ɵɵelement(25,"label",36),t.ɵɵelementEnd()(),t.ɵɵelementStart(26,"button",37,2),t.ɵɵpipe(28,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(27),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a,i.MappingKeysType.CUSTOM))})),t.ɵɵelementStart(29,"tb-icon",38),t.ɵɵtext(30,"edit"),t.ɵɵelementEnd()()()()()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,10,"gateway.hints.rest.extension")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,12,"gateway.extension")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(8,14,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("converter.extension").hasError("required")&&e.mappingFormGroup.get("converter.extension").touched?9:-1),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(13,16,"gateway.extension-configuration")),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(16,18,"gateway.extension-configuration-hint")),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(20,20,"gateway.keys")),t.ɵɵadvance(3),t.ɵɵproperty("tbEllipsisChipList",e.customKeys),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",e.customKeys),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(28,22,"action.edit"))}}class c0 extends A{constructor(e,t,n,a,i,r,o,s,l,p){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.destroyRef=l,this.cd=p,this.mappingFormGroup=this.fb.group({endpoint:["",[$.required,$.pattern(an)]],HTTPMethods:[[ht.POST],[$.required]],security:[{type:ka.ANONYMOUS}],converter:this.fb.group({type:[ga.JSON,[]],deviceInfo:[],reportStrategy:[],attributes:[[]],timeseries:[[]],extension:["",[$.required,$.pattern(an)]],extensionConfig:[]}),response:[]}),this.keysPopupClosed=!0,this.helpLink=`${O}/docs/iot-gateway/config/rest/#mapping-section`,this.httpMethods=Object.values(ht),this.converterTypes=Object.values(ga),this.restSourceTypes=Object.values(fa),this.SecurityMode=$a,this.MappingKeysType=Na,this.DeviceInfoType=gi,this.RestConvertorTypeTranslationsMap=_a,this.RestDataConversionTranslationsMap=Ta,this.RestConverterType=ga,this.ConnectorType=ct,this.ReportStrategyDefaultValue=en,this.setInitialFormValue(),this.observeConverterTypeChange(),this.toggleConverterFieldsByType(this.converterType)}get converterType(){return this.mappingFormGroup.get("converter")?.get("type").value}get converterAttributes(){if(this.converterType)return this.mappingFormGroup.get("converter").value.attributes.map((e=>e.key))}get converterTelemetry(){if(this.converterType)return this.mappingFormGroup.get("converter").value.timeseries.map((e=>e.key))}get customKeys(){return Object.keys(this.mappingFormGroup.get("converter").value.extensionConfig??{})}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.mappingFormGroup.valid){const{converter:e,...t}=this.mappingFormGroup.value,{reportStrategy:n,...a}=e,i={...t,reportStrategy:n,converter:a};Te(i),this.dialogRef.close(i)}}manageKeys(e,t,n){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const a=t._elementRef.nativeElement;if(this.popoverService.hasPopover(a))this.popoverService.hidePopover(a);else{const e=this.mappingFormGroup.get("converter").get(n),t={keys:e.value,keysType:n,panelTitle:La.get(n),addKeyTitle:Va.get(n),deleteKeyTitle:qa.get(n),noKeysText:Ga.get(n),withReportStrategy:this.data.withReportStrategy,convertorType:this.converterType,connectorType:ct.REST};this.keysPopupClosed=!1,this.popoverComponent=this.popoverService.displayPopover(a,this.renderer,this.viewContainerRef,TK,"leftBottom",!1,null,t,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.pipe(xn(this.destroyRef)).subscribe((t=>{this.popoverComponent.hide(),e.patchValue(t),e.markAsDirty(),this.cd.markForCheck()})),this.popoverComponent.tbHideStart.pipe(xn(this.destroyRef)).subscribe((()=>{this.keysPopupClosed=!0}))}}setInitialFormValue(){const{converter:e,reportStrategy:t,...n}=this.data.value;this.mappingFormGroup.patchValue({...n,converter:{...e,...t?{reportStrategy:t}:{}}},{emitEvent:!1})}observeConverterTypeChange(){this.mappingFormGroup.get("converter").get("type").valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>this.toggleConverterFieldsByType(e)))}toggleConverterFieldsByType(e){const t=e===ga.JSON;this.mappingFormGroup.get("converter").get("attributes")[t?"enable":"disable"]({emitEvent:!1}),this.mappingFormGroup.get("converter").get("timeseries")[t?"enable":"disable"]({emitEvent:!1}),this.mappingFormGroup.get("converter").get("extension")[t?"disable":"enable"]({emitEvent:!1}),this.mappingFormGroup.get("converter").get("extensionConfig")[t?"disable":"enable"]({emitEvent:!1})}static{this.ɵfac=function(e){return new(e||c0)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.DestroyRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:c0,selectors:[["tb-rest-mapping-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:59,vars:45,consts:[["attributesButton",""],["telemetryButton",""],["keysButton",""],[1,"h-full","w-[77vw]","max-w-3xl",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","endpoint",3,"placeholder"],["matSuffix","",3,"tooltipText"],["formControlName","HTTPMethods","multiple",""],[3,"value"],["formControlName","security",3,"mode"],["formGroupName","converter"],[1,"tb-form-row","space-between","tb-flex"],[1,"fixed-title-width"],["formControlName","type","appearance","fill"],[1,"tb-form-panel","stroked"],[1,"tb-form-panel-title"],[1,"tb-form-hint","tb-primary-fill"],["formControlName","deviceInfo","required","true",1,"device-info",3,"sourceTypes","convertorType","deviceInfoType","connectorType"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"],[1,"tb-form-panel","no-border","no-padding","w-full"],["formControlName","response"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"tb-flex","max-w-70%"],[1,"tb-flex","gw-chip-list",3,"tbEllipsisChipList"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],["translate","",1,"fixed-title-width"],["tbTruncateWithTooltip",""],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex"],["matInput","","name","value","formControlName","extension",3,"placeholder"],[1,"tb-form-row","space-between","same-padding","tb-flex","column"],[1,"tb-flex","ellipsis-chips-container"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",3)(1,"mat-toolbar",4)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",5)(6,"div",6),t.ɵɵelementStart(7,"button",7),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",8),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),t.ɵɵpipe(14,"translate"),t.ɵɵtext(15),t.ɵɵpipe(16,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"mat-form-field",13),t.ɵɵelement(18,"input",14),t.ɵɵpipe(19,"translate"),t.ɵɵtemplate(20,J1,2,3,"tb-error-icon",15),t.ɵɵelementEnd()(),t.ɵɵelementStart(21,"div",11)(22,"div",12),t.ɵɵpipe(23,"translate"),t.ɵɵtext(24),t.ɵɵpipe(25,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"mat-form-field",13)(27,"mat-select",16),t.ɵɵrepeaterCreate(28,e0,2,2,"mat-option",17,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd(),t.ɵɵtemplate(30,t0,2,3,"tb-error-icon",15),t.ɵɵelementEnd()(),t.ɵɵelement(31,"tb-security-config",18),t.ɵɵelementContainerStart(32,19),t.ɵɵelementStart(33,"div",20)(34,"div",21),t.ɵɵtext(35),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"tb-toggle-select",22),t.ɵɵrepeaterCreate(38,n0,3,4,"tb-toggle-option",17,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()(),t.ɵɵelementStart(40,"div",23)(41,"div",24),t.ɵɵtext(42),t.ɵɵpipe(43,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"div",25),t.ɵɵtext(45),t.ɵɵpipe(46,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(47,"tb-device-info-table",26),t.ɵɵtemplate(48,a0,1,2,"tb-report-strategy",27)(49,o0,30,11,"div",28)(50,p0,31,24,"div",28),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelement(51,"tb-rest-response-config",29),t.ɵɵelementEnd()(),t.ɵɵelementStart(52,"div",30)(53,"button",31),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(54),t.ɵɵpipe(55,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(56,"button",32),t.ɵɵlistener("click",(function(){return n.add()})),t.ɵɵtext(57),t.ɵɵpipe(58,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.mappingFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,23,"gateway.data-mapping")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.helpLink),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(14,25,"gateway.hints.rest.endpoint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(16,27,"gateway.rest.endpoint")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(19,29,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.mappingFormGroup.get("endpoint").hasError("required")&&n.mappingFormGroup.get("endpoint").touched?20:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(23,31,"gateway.hints.rest.http-methods")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(25,33,"gateway.rest.http-methods")),t.ɵɵadvance(4),t.ɵɵrepeater(n.httpMethods),t.ɵɵadvance(2),t.ɵɵconditional(n.mappingFormGroup.get("HTTPMethods").hasError("required")&&n.mappingFormGroup.get("HTTPMethods").touched?30:-1),t.ɵɵadvance(),t.ɵɵproperty("mode",n.SecurityMode.basic),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(36,35,"gateway.payload-type")),t.ɵɵadvance(3),t.ɵɵrepeater(n.converterTypes),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(43,37,"gateway.data-conversion")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(46,39,n.RestDataConversionTranslationsMap.get(n.converterType))," "),t.ɵɵadvance(2),t.ɵɵproperty("sourceTypes",n.restSourceTypes)("convertorType",n.RestConverterType.JSON)("deviceInfoType",n.DeviceInfoType.FULL)("connectorType",n.ConnectorType.REST),t.ɵɵadvance(),t.ɵɵconditional(n.data.withReportStrategy?48:-1),t.ɵɵadvance(),t.ɵɵconditional(n.converterType===n.RestConverterType.JSON?49:50),t.ɵɵadvance(5),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(55,41,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.mappingFormGroup.invalid||!n.mappingFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(58,43,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(c0,[j,_,Gn,F$,jY,Q1,Qn,Xn]),styles:['@charset "UTF-8";[_nghost-%COMP%]  .device-info .fixed-title-width{min-width:0}'],changeDetection:d.OnPush})}}const d0=()=>["endpoint","httpMethods","securityType","actions"];function u0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6)(1,"div",29),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"span",8),t.ɵɵelementStart(5,"button",10),t.ɵɵpipe(6,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageMapping(n))})),t.ɵɵelementStart(7,"mat-icon"),t.ɵɵtext(8,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",10),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,"gateway.data-mapping")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(6,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,7,"action.search")))}function m0(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30)(1,"div",31),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.rest.endpoint")))}function h0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",32)(1,"div",31),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.endpoint)}}function g0(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",33),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.rest.http-methods")," "))}function f0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",38),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function y0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",34)(1,"mat-chip-listbox",35),t.ɵɵrepeaterCreate(2,f0,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(4,"mat-chip",36),t.ɵɵelement(5,"label",37),t.ɵɵelementEnd()()()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵproperty("tbEllipsisChipList",e.HTTPMethods),t.ɵɵadvance(),t.ɵɵrepeater(e.HTTPMethods)}}function v0(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",39),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.security-type")," "))}function b0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",39)(1,"div",31),t.ɵɵtext(2),t.ɵɵpipe(3,"titlecase"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,null==e.security?null:e.security.type))}}function x0(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",40)}function w0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",10),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageMapping(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",10),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteMapping(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function S0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,w0,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",41),t.ɵɵelementContainer(4,42),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",43)(6,"button",44),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",45),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",46,2),t.ɵɵelementContainer(11,42),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(4),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function C0(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",47)}function _0(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class T0 extends Wi{getDatasource(){return new I0}manageMapping(e,t){e&&e.stopPropagation();const n=ke(t),a=n?this.entityFormArray.at(t).value:{};this.getMappingDialog(a,n?"action.apply":"action.add").afterClosed().pipe(xn(this.destroyRef)).subscribe((e=>{e&&(n?this.entityFormArray.at(t).patchValue(e):this.entityFormArray.push(this.fb.control(e)),this.entityFormArray.markAsDirty())}))}deleteMapping(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-mapping-title",{name:this.entityFormArray.at(t).value.endpoint}),this.translate.instant("gateway.delete-mapping-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(xn(this.destroyRef)).subscribe((e=>{e&&(this.entityFormArray.removeAt(t),this.entityFormArray.markAsDirty())}))}updateTableData(e,t){t&&(e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase())||e.type?.toLowerCase().includes(t.toLowerCase())))))),this.dataSource.loadData(e)}getMappingDialog(e,t){return this.dialog.open(c0,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,withReportStrategy:this.withReportStrategy}})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(T0)))(n||T0)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:T0,selectors:[["tb-rest-mapping-table"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>T0)),multi:!0},{provide:K,useExisting:c((()=>T0)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:47,vars:37,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-absolute-fill","size-full"],[1,"flex","size-full","flex-col"],[1,"gw-table-toolbar","mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"gw-connector-table"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","!w-1/5",4,"matHeaderCellDef"],["class","w-1/5",4,"matCellDef"],["class","w-1/3 !pl-0",4,"matHeaderCellDef"],["class","w-1/3",4,"matCellDef"],["class","w-1/6",4,"matHeaderCellDef"],["class","w-1/6",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"!w-1/5"],["tbTruncateWithTooltip",""],[1,"w-1/5"],[1,"w-1/3","!pl-0"],[1,"w-1/3"],[1,"tb-flex",3,"tbEllipsisChipList"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text","http-method-label","font-medium"],["tbTruncateWithTooltip","",1,"http-method-label","font-medium"],[1,"w-1/6"],[1,"w-12"],[1,"lt-lg:!hidden","flex","min-w-24","flex-1","flex-row","items-stretch","justify-end","text-center"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,u0,13,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"button",7),t.ɵɵpipe(7,"translate"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",8)(11,"mat-label"),t.ɵɵtext(12," "),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",9,0),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",10),t.ɵɵpipe(17,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"table",12),t.ɵɵelementContainerStart(22,13),t.ɵɵtemplate(23,m0,4,3,"mat-header-cell",14)(24,h0,3,1,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(25,13),t.ɵɵtemplate(26,g0,3,3,"mat-header-cell",16)(27,y0,6,1,"mat-cell",17),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(28,13),t.ɵɵtemplate(29,v0,3,3,"mat-header-cell",18)(30,b0,4,3,"mat-cell",19),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(31,20),t.ɵɵtemplate(32,x0,1,0,"mat-header-cell",21)(33,S0,12,3,"mat-cell",22),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(34,C0,1,0,"mat-header-row",23)(35,_0,1,0,"mat-row",24),t.ɵɵelementEnd(),t.ɵɵelementStart(36,"section",25),t.ɵɵpipe(37,"async"),t.ɵɵelementStart(38,"button",26),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageMapping(a))})),t.ɵɵelementStart(39,"mat-icon",27),t.ɵɵtext(40,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(41,"span"),t.ɵɵtext(42),t.ɵɵpipe(43,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(44,"span",28),t.ɵɵpipe(45,"async"),t.ɵɵtext(46," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵconditional(!1===t.ɵɵpipeBind1(4,21,n.dataSource.isEmpty())?3:-1),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,23,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,25,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,27,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","endpoint"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","httpMethods"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","securityType"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(35,d0))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(36,d0)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(37,29,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(43,31,"gateway.add-mapping")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(45,33,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(T0,[j,_,qn,Gn]),styles:[".http-method-label[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:d.OnPush})}}let I0=class extends G{constructor(){super()}};function E0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",13),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" : ",e.value.value," ")}}function M0(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.key-required"))}function k0(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon",21),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,"gateway.value-required"))}function P0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",16)(1,"div",17),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",18)(5,"mat-form-field",19),t.ɵɵelement(6,"input",20),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,M0,3,3,"mat-icon",21),t.ɵɵelementEnd()()(),t.ɵɵelementStart(9,"div",16)(10,"div",22),t.ɵɵtext(11,"gateway.value"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",19),t.ɵɵelement(13,"input",23),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,k0,3,3,"mat-icon",21),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,5,"gateway.key")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.get("key").hasError("required")&&e.get("key").touched?8:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.get("value").hasError("required")&&e.get("value").touched?15:-1)}}function D0(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9)(1,"div",10),t.ɵɵelementContainerStart(2,11),t.ɵɵelementStart(3,"mat-expansion-panel",12)(4,"mat-expansion-panel-header")(5,"mat-panel-title")(6,"div",13),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵtemplate(8,E0,2,1,"div",13),t.ɵɵelementEnd()(),t.ɵɵtemplate(9,P0,16,11,"ng-template",14),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"button",15),t.ɵɵpipe(11,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.deleteKey(n,a))})),t.ɵɵelementStart(12,"mat-icon"),t.ɵɵtext(13,"delete"),t.ɵɵelementEnd()()()}if(2&e){const e=n.$implicit,a=n.$index,i=n.$count;t.ɵɵadvance(2),t.ɵɵproperty("formGroup",e),t.ɵɵadvance(),t.ɵɵproperty("expanded",a===i-1),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",null==e.value?null:e.value.key," "),t.ɵɵadvance(),t.ɵɵconditional(null!=e.value&&e.value.value?8:-1),t.ɵɵadvance(2),t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(11,5,"gateway.rest.delete-http-header"))}}function O0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵrepeaterCreate(1,D0,14,7,"div",9,t.ɵɵrepeaterTrackByIndex),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵrepeater(e.keysListFormArray.controls)}}function A0(e,n){1&e&&(t.ɵɵelementStart(0,"div",4)(1,"span",24),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.rest.no-http-headers")))}class F0 extends q{constructor(e,t){super(t),this.fb=e,this.store=t,this.withReportStrategy=!0,this.keysDataApplied=p(),this.ReportStrategyDefaultValue=en}ngOnInit(){this.keysListFormArray=this.prepareKeysFormArray(this.keys)}addKey(){this.keysListFormArray.push(this.fb.group({key:["",[$.required,$.pattern(an)]],value:["",[$.required,$.pattern(an)]]}))}deleteKey(e,t){e&&e.stopPropagation(),this.keysListFormArray.removeAt(t),this.keysListFormArray.markAsDirty()}cancel(){this.popover?.hide()}applyKeysData(){this.keysDataApplied.emit(this.keysListFormArray.value.reduce(((e,{key:t,value:n})=>({...e,[t]:n})),{}))}prepareKeysFormArray(e){const t=[];return Object.keys(e)?.forEach((n=>{t.push(this.fb.group({key:[n,[$.required,$.pattern(an)]],value:[e[n],[$.required,$.pattern(an)]]}))})),this.fb.array(t)}static{this.ɵfac=function(e){return new(e||F0)(t.ɵɵdirectiveInject(H.UntypedFormBuilder),t.ɵɵdirectiveInject(Ye.Store))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:F0,selectors:[["tb-rest-http-headers-panel"]],inputs:{keys:"keys",popover:"popover",withReportStrategy:[2,"withReportStrategy","withReportStrategy",m]},outputs:{keysDataApplied:"keysDataApplied"},standalone:!0,features:[t.ɵɵInputTransformsFeature,t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:18,vars:15,consts:[[1,"w-[77vw]","max-w-2xl"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel-title"],[1,"tb-form-panel","no-border","no-padding","h-[500px]"],[1,"tb-flex","no-flex","center","align-center","h-[500px]"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-flex","flex-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[1,"tb-form-panel","no-border","no-padding","tb-flex","no-flex","row","center","fill-width"],[1,"tb-form-panel","stroked","tb-flex"],[3,"formGroup"],[1,"tb-settings",3,"expanded"],["tbTruncateWithTooltip","",1,"max-w-[11vw]"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",1,"gw-delete-icon-button",3,"click","matTooltip"],[1,"tb-form-row"],[1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","key",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","type","text","name","value","formControlName","value",3,"placeholder"],[1,"tb-prompt"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(5,O0,3,0,"div",3)(6,A0,4,3,"div",4),t.ɵɵelementStart(7,"div")(8,"button",5),t.ɵɵlistener("click",(function(){return n.addKey()})),t.ɵɵtext(9),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(11,"div",6)(12,"button",7),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"button",8),t.ɵɵlistener("click",(function(){return n.applyKeysData()})),t.ɵɵtext(16),t.ɵɵpipe(17,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind1(4,7,"gateway.rest.http-headers"),""," ("+n.keysListFormArray.controls.length+")"," "),t.ɵɵadvance(2),t.ɵɵconditional(n.keysListFormArray.controls.length?5:6),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(10,9,"gateway.rest.add-http-header")," "),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(14,11,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.keysListFormArray.invalid||!n.keysListFormArray.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(17,13,"action.apply")," "))},dependencies:t.ɵɵgetComponentDepsFactory(F0,[j,_]),encapsulation:2,changeDetection:d.OnPush})}}const R0=()=>({min:1}),B0=()=>({maxWidth:"970px"});function N0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",13),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.RestRequestTypesTranslationsMap.get(e)))}}function L0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.endpoint-required"))}function V0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.endpoint-pattern"))}function q0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",13),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function G0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.http-methods-required"))}function z0(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",13),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,e))}}function U0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.rest.endpoint"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",21),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,L0,2,3,"tb-error-icon",22)(8,V0,2,3,"tb-error-icon",22),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",9)(10,"div",19),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12,"gateway.rest.http-methods"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",20)(14,"mat-select",23),t.ɵɵrepeaterCreate(15,q0,2,2,"mat-option",13,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd(),t.ɵɵtemplate(17,G0,2,3,"tb-error-icon",22),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",9)(19,"div",24),t.ɵɵpipe(20,"translate"),t.ɵɵtext(21,"gateway.type"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"mat-form-field",20)(23,"mat-select",25),t.ɵɵrepeaterCreate(24,z0,3,4,"mat-option",13,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,6,"gateway.hints.rest.endpoint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,8,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("endpoint").hasError("required")&&e.mappingFormGroup.get("endpoint").touched?7:e.mappingFormGroup.get("endpoint").hasError("pattern")&&e.mappingFormGroup.get("endpoint").touched?8:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(11,10,"gateway.hints.rest.http-methods")),t.ɵɵadvance(5),t.ɵɵrepeater(e.httpMethods),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("HTTPMethods").hasError("required")&&e.mappingFormGroup.get("HTTPMethods").touched?17:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(20,12,"gateway.hints.rest.scope-type")),t.ɵɵadvance(5),t.ɵɵrepeater(e.requestsScopeType)}}function j0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-required"))}function H0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-pattern"))}function W0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.device-name-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",26),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,j0,2,3,"tb-error-icon",22)(8,H0,2,3,"tb-error-icon",22),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.device-name-filter-hint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("deviceNameFilter").hasError("required")&&e.mappingFormGroup.get("deviceNameFilter").touched?7:e.mappingFormGroup.get("deviceNameFilter").hasError("pattern")&&e.mappingFormGroup.get("deviceNameFilter").touched?8:-1)}}function $0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.method-filter-required"))}function K0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.method-filter-pattern"))}function Y0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.method-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",27),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,$0,2,3,"tb-error-icon",22)(8,K0,2,3,"tb-error-icon",22),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.rest.method-filter")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("methodFilter").hasError("required")&&e.mappingFormGroup.get("methodFilter").touched?7:e.mappingFormGroup.get("methodFilter").hasError("pattern")&&e.mappingFormGroup.get("methodFilter").touched?8:-1)}}function X0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.attribute-filter-required"))}function Z0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.attribute-filter-pattern"))}function Q0(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.attribute-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",28),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,X0,2,3,"tb-error-icon",22)(8,Z0,2,3,"tb-error-icon",22),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.hints.rest.attribute-filter")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("attributeFilter").hasError("required")&&e.mappingFormGroup.get("attributeFilter").touched?7:e.mappingFormGroup.get("attributeFilter").hasError("pattern")&&e.mappingFormGroup.get("attributeFilter").touched?8:-1)}}function J0(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.request-url-expression-required"))}function e2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.request-url-expression-pattern"))}function t2(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",13),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function n2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.value-expression-required"))}function a2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.value-expression-pattern"))}function i2(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",29)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.rest.request-url-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",30),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,J0,2,3,"tb-error-icon",22)(8,e2,2,3,"tb-error-icon",22),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",9)(10,"div",19),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12,"gateway.rest.http-method"),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"mat-form-field",20)(14,"mat-select",31),t.ɵɵrepeaterCreate(15,t2,2,2,"mat-option",13,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()(),t.ɵɵelementStart(17,"div",9)(18,"div",19),t.ɵɵpipe(19,"translate"),t.ɵɵtext(20,"gateway.value-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",20),t.ɵɵelement(22,"input",32),t.ɵɵpipe(23,"translate"),t.ɵɵtemplate(24,n2,2,3,"tb-error-icon",22)(25,a2,2,3,"tb-error-icon",22),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,7,"gateway.hints.rest.attribute-url-expression")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("requestUrlExpression").hasError("required")&&e.mappingFormGroup.get("requestUrlExpression").touched?7:e.mappingFormGroup.get("requestUrlExpression").hasError("pattern")&&e.mappingFormGroup.get("requestUrlExpression").touched?8:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(11,11,"gateway.hints.rest.http-method")),t.ɵɵadvance(5),t.ɵɵrepeater(e.httpMethods),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(19,13,"gateway.hints.rest.value-expression")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(23,15,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("valueExpression").hasError("required")&&e.mappingFormGroup.get("valueExpression").touched?24:e.mappingFormGroup.get("valueExpression").hasError("pattern")&&e.mappingFormGroup.get("valueExpression").touched?25:-1)}}function r2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind2(1,1,"gateway.response-timeout-limits-error",t.ɵɵpureFunction0(4,R0)))}function o2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.timeout-pattern"))}function s2(e,n){1&e&&(t.ɵɵelementStart(0,"span",34),t.ɵɵtext(1,"gateway.suffix.s"),t.ɵɵelementEnd())}function l2(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",10),t.ɵɵtext(2,"gateway.response-timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",20),t.ɵɵelement(4,"input",33),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,r2,2,5,"tb-error-icon",22)(7,o2,2,3,"tb-error-icon",22)(8,s2,2,0,"span",34),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,2,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("responseTimeout").hasError("min")&&e.mappingFormGroup.get("responseTimeout").touched?6:e.mappingFormGroup.get("responseTimeout").hasError("pattern")&&e.mappingFormGroup.get("responseTimeout").touched?7:8)}}function p2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-required"))}function c2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-pattern"))}function d2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.attribute-name-expression-required"))}function u2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.attribute-name-expression-pattern"))}function m2(e,n){1&e&&t.ɵɵelement(0,"div",38),2&e&&t.ɵɵproperty("tb-help-popup","widget/lib/gateway/rest-json_fn")("tb-help-popup-style",t.ɵɵpureFunction0(2,B0))}function h2(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",19),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.device-name-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",20),t.ɵɵelement(5,"input",35),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,p2,2,3,"tb-error-icon",22)(8,c2,2,3,"tb-error-icon",22),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",9)(10,"div",36),t.ɵɵtext(11,"gateway.attribute-name-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"mat-form-field",20),t.ɵɵelement(13,"input",37),t.ɵɵpipe(14,"translate"),t.ɵɵtemplate(15,d2,2,3,"tb-error-icon",22)(16,u2,2,3,"tb-error-icon",22)(17,m2,1,3,"div",38),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,5,"gateway.device-name-filter-hint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("deviceNameExpression").hasError("required")&&e.mappingFormGroup.get("deviceNameExpression").touched?7:e.mappingFormGroup.get("deviceNameExpression").hasError("pattern")&&e.mappingFormGroup.get("deviceNameExpression").touched?8:-1),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(14,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("attributeNameExpression").hasError("required")&&e.mappingFormGroup.get("attributeNameExpression").touched?15:e.mappingFormGroup.get("attributeNameExpression").hasError("pattern")&&e.mappingFormGroup.get("attributeNameExpression").touched?16:17)}}function g2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind2(1,1,"gateway.response-timeout-limits-error",t.ɵɵpureFunction0(4,R0)))}function f2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.timeout-pattern"))}function y2(e,n){1&e&&(t.ɵɵelementStart(0,"span",34),t.ɵɵtext(1,"gateway.suffix.s"),t.ɵɵelementEnd())}function v2(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",9)(1,"div",10),t.ɵɵtext(2,"gateway.timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-form-field",20),t.ɵɵelement(4,"input",39),t.ɵɵpipe(5,"translate"),t.ɵɵtemplate(6,g2,2,5,"tb-error-icon",22)(7,f2,2,3,"tb-error-icon",22)(8,y2,2,0,"span",34),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(5,2,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("timeout").hasError("min")&&e.mappingFormGroup.get("timeout").touched?6:e.mappingFormGroup.get("timeout").hasError("pattern")&&e.mappingFormGroup.get("timeout").touched?7:8)}}function b2(e,n){1&e&&(t.ɵɵelementStart(0,"div",14)(1,"mat-slide-toggle",40)(2,"mat-label",41),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,2,"gateway.hints.rest.update-ssl")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,4,"gateway.rest.ssl-verify")," "))}function x2(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",53),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.value)}}function w2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind2(1,1,"gateway.response-timeout-limits-error",t.ɵɵpureFunction0(4,R0)))}function S2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.timeout-pattern"))}function C2(e,n){1&e&&(t.ɵɵelementStart(0,"span",34),t.ɵɵtext(1,"gateway.suffix.s"),t.ɵɵelementEnd())}function _2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.tries-min"))}function T2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",22),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.tries-pattern"))}function I2(e,n){1&e&&(t.ɵɵelementStart(0,"div",14)(1,"mat-slide-toggle",54)(2,"mat-label"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,1,"gateway.rest.allow-redirects")," "))}function E2(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",8)(1,"mat-expansion-panel",42)(2,"mat-expansion-panel-header")(3,"mat-panel-title",43)(4,"div",44),t.ɵɵtext(5,"gateway.advanced-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(6,"div",45)(7,"div",10),t.ɵɵtext(8,"gateway.rest.http-headers"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",46)(10,"mat-chip-listbox",47),t.ɵɵpipe(11,"keyvalue"),t.ɵɵrepeaterCreate(12,x2,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵpipe(14,"keyvalue"),t.ɵɵelementStart(15,"mat-chip",48),t.ɵɵelement(16,"label",49),t.ɵɵelementEnd()(),t.ɵɵelementStart(17,"button",50,0),t.ɵɵpipe(19,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵreference(18),i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageKeys(n,a))})),t.ɵɵelementStart(20,"tb-icon",51),t.ɵɵtext(21,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(22,"div",9)(23,"div",10),t.ɵɵtext(24,"gateway.timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"mat-form-field",20),t.ɵɵelement(26,"input",39),t.ɵɵpipe(27,"translate"),t.ɵɵtemplate(28,w2,2,5,"tb-error-icon",22)(29,S2,2,3,"tb-error-icon",22)(30,C2,2,0,"span",34),t.ɵɵelementEnd()(),t.ɵɵelementStart(31,"div",9)(32,"div",10),t.ɵɵtext(33,"gateway.rest.tries"),t.ɵɵelementEnd(),t.ɵɵelementStart(34,"mat-form-field",20),t.ɵɵelement(35,"input",52),t.ɵɵpipe(36,"translate"),t.ɵɵtemplate(37,_2,2,3,"tb-error-icon",22)(38,T2,2,3,"tb-error-icon",22),t.ɵɵelementEnd()(),t.ɵɵtemplate(39,I2,5,3,"div",14),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(10),t.ɵɵproperty("tbEllipsisChipList",t.ɵɵpipeBind1(11,7,e.mappingFormGroup.get("httpHeaders").value)),t.ɵɵadvance(2),t.ɵɵrepeater(t.ɵɵpipeBind1(14,9,e.mappingFormGroup.get("httpHeaders").value)),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(19,11,"action.edit")),t.ɵɵadvance(9),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(27,13,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("timeout").hasError("min")&&e.mappingFormGroup.get("timeout").touched?28:e.mappingFormGroup.get("timeout").hasError("pattern")&&e.mappingFormGroup.get("timeout").touched?29:30),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(36,15,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("tries").hasError("min")&&e.mappingFormGroup.get("tries").touched?37:e.mappingFormGroup.get("tries").hasError("pattern")&&e.mappingFormGroup.get("tries").touched?38:-1),t.ɵɵadvance(2),t.ɵɵconditional(e.requestType===e.RestRequestType.ATTRIBUTE_UPDATE?39:-1)}}class M2 extends A{constructor(e,t,n,a,i,r,o,s,l,p){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.cdr=l,this.destroyRef=p,this.requestTypes=Object.values(xa),this.requestsScopeType=Object.values(Sa),this.httpMethods=Object.values(ht),this.helpLink=`${O}/docs/iot-gateway/config/rest/#attribute-request-section`,this.RestRequestTypesTranslationsMap=wa,this.SecurityMode=$a,this.RestRequestType=xa,this.mappingFormGroup=this.fb.group({requestType:[xa.ATTRIBUTE_REQUEST],endpoint:["",[$.required,$.pattern(an)]],HTTPMethods:[[ht.POST],[$.required]],HTTPMethod:[ht.POST,[$.required]],type:[Sa.Shared],security:[{type:ka.ANONYMOUS}],timeout:[null,[$.min(.001),$.pattern(nn)]],deviceNameExpression:["",[$.required,$.pattern(an)]],attributeNameExpression:["",[$.required,$.pattern(an)]],SSLVerify:[!1],deviceNameFilter:["",[$.required,$.pattern(an)]],methodFilter:["",[$.required,$.pattern(an)]],attributeFilter:["",[$.required,$.pattern(an)]],requestUrlExpression:[this.data.defaultRequestUrl,[$.required,$.pattern(an)]],valueExpression:["",[$.required,$.pattern(an)]],responseTimeout:[null,[$.min(.001),$.pattern(nn)]],tries:[null,[$.min(1),$.pattern(nn)]],allowRedirects:[!1],httpHeaders:[{}]}),this.keysPopupClosed=!0,this.mappingFormGroup.patchValue(this.data.value,{emitEvent:!1}),this.observeRequestTypeChange(),this.toggleFieldsByRequestType(this.mappingFormGroup.get("requestType").value)}get requestType(){return this.mappingFormGroup.get("requestType").value}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.mappingFormGroup.valid){const{requestType:e,...t}=this.mappingFormGroup.value;Te(t),this.dialogRef.close({requestType:e,requestValue:t})}}manageKeys(e,t){e.stopPropagation();const n=t._elementRef.nativeElement;if(this.popoverService.hasPopover(n))return void this.popoverService.hidePopover(n);this.popoverService.hasPopover(n)&&this.popoverService.hidePopover(n),this.keysPopupClosed=!1;const a=this.popoverService.displayPopover(n,this.renderer,this.viewContainerRef,F0,"leftBottom",!1,null,{keys:this.mappingFormGroup.get("httpHeaders").value,withReportStrategy:this.data.withReportStrategy},{},{},{},!0);a.tbComponentRef.instance.popover=a,a.tbComponentRef.instance.keysDataApplied.subscribe((e=>{a.hide(),this.mappingFormGroup.get("httpHeaders").patchValue(e),this.mappingFormGroup.get("httpHeaders").markAsDirty(),this.cdr.markForCheck()})),a.tbHideStart.pipe(xn(this.destroyRef)).subscribe((()=>{this.keysPopupClosed=!0}))}observeRequestTypeChange(){this.mappingFormGroup.get("requestType").valueChanges.pipe(ce(),xn(this.destroyRef)).subscribe((e=>this.toggleFieldsByRequestType(e)))}toggleFieldsByRequestType(e){this.mappingFormGroup.disable({emitEvent:!1}),Ca.get("all").forEach((e=>this.mappingFormGroup.get(e).enable({emitEvent:!1}))),Ca.get(e).forEach((e=>this.mappingFormGroup.get(e).enable({emitEvent:!1})))}static{this.ɵfac=function(e){return new(e||M2)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(t.DestroyRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:M2,selectors:[["tb-rest-requests-mapping-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:37,vars:23,consts:[["button",""],[1,"h-full","w-[77vw]","max-w-3xl",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row"],["translate","",1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex"],["formControlName","requestType"],[3,"value"],[1,"tb-form-row","tb-flex","fill-width"],["formControlName","security",3,"mode"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","type","text","name","value","formControlName","endpoint",3,"placeholder"],["matSuffix","",3,"tooltipText"],["formControlName","HTTPMethods","multiple",""],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","type"],["matInput","","type","text","name","value","formControlName","deviceNameFilter",3,"placeholder"],["matInput","","type","text","name","value","formControlName","methodFilter",3,"placeholder"],["matInput","","type","text","name","value","formControlName","attributeFilter",3,"placeholder"],[1,"tb-form-row","request-url-row"],["matInput","","type","text","name","value","formControlName","requestUrlExpression",3,"placeholder"],["formControlName","HTTPMethod"],["matInput","","type","text","name","value","formControlName","valueExpression",3,"placeholder"],["matInput","","type","number","min","0","name","value","formControlName","responseTimeout",3,"placeholder"],["translate","","matSuffix","",1,"block","pr-2"],["matInput","","type","text","name","value","formControlName","deviceNameExpression",3,"placeholder"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","type","text","name","value","formControlName","attributeNameExpression",3,"placeholder"],["matSuffix","","tb-help-popup-placement","left",1,"see-example","p-1",3,"tb-help-popup","tb-help-popup-style"],["matInput","","type","number","min","0","name","value","formControlName","timeout",3,"placeholder"],["formControlName","SSLVerify",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],[1,"tb-settings"],[1,"justify-end"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","space-between","tb-flex"],[1,"tb-flex","gw-chip-list"],[1,"tb-flex",3,"tbEllipsisChipList"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],["matInput","","type","number","min","0","name","value","formControlName","tries",3,"placeholder"],["tbTruncateWithTooltip",""],["formControlName","allowRedirects",1,"mat-slide"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",1)(1,"mat-toolbar",2)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",3)(6,"div",4),t.ɵɵelementStart(7,"button",5),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",6),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),t.ɵɵtext(14,"gateway.request-type"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"mat-form-field",11)(16,"mat-select",12),t.ɵɵrepeaterCreate(17,N0,3,4,"mat-option",13,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()(),t.ɵɵtemplate(19,U0,26,14)(20,W0,9,7,"div",9)(21,Y0,9,7,"div",9)(22,Q0,9,7,"div",9)(23,i2,26,17)(24,l2,9,4,"div",9)(25,h2,18,11)(26,v2,9,4,"div",9)(27,b2,6,6,"div",14),t.ɵɵelement(28,"tb-security-config",15),t.ɵɵtemplate(29,E2,40,17,"div",8),t.ɵɵelementEnd()(),t.ɵɵelementStart(30,"div",16)(31,"button",17),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(32),t.ɵɵpipe(33,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(34,"button",18),t.ɵɵlistener("click",(function(){return n.add()})),t.ɵɵtext(35),t.ɵɵpipe(36,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.mappingFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,17,"gateway.requests-mapping")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.helpLink),t.ɵɵadvance(11),t.ɵɵrepeater(n.requestTypes),t.ɵɵadvance(2),t.ɵɵconditional(n.requestType===n.RestRequestType.ATTRIBUTE_REQUEST?19:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType!==n.RestRequestType.ATTRIBUTE_REQUEST?20:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.SERVER_SIDE_RPC?21:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.ATTRIBUTE_UPDATE?22:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType!==n.RestRequestType.ATTRIBUTE_REQUEST?23:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.SERVER_SIDE_RPC?24:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.ATTRIBUTE_REQUEST?25:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.ATTRIBUTE_REQUEST?26:-1),t.ɵɵadvance(),t.ɵɵconditional(n.requestType===n.RestRequestType.ATTRIBUTE_UPDATE?27:-1),t.ɵɵadvance(),t.ɵɵproperty("mode",n.SecurityMode.basic),t.ɵɵadvance(),t.ɵɵconditional(n.requestType!==n.RestRequestType.ATTRIBUTE_REQUEST?29:-1),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(33,19,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.mappingFormGroup.invalid||!n.mappingFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(36,21,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(M2,[j,_,Gn,jY,Qn]),styles:["[_nghost-%COMP%]   .tb-form-row.request-url-row[_ngcontent-%COMP%]{gap:6px}"],changeDetection:d.OnPush})}}const k2=()=>["type","details","actions"],P2=()=>({});function D2(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6)(1,"div",26),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"span",8),t.ɵɵelementStart(5,"button",10),t.ɵɵpipe(6,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageMapping(n))})),t.ɵɵelementStart(7,"mat-icon"),t.ɵɵtext(8,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",10),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,"gateway.requests-mapping")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(6,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,7,"action.search")))}function O2(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",27)(1,"div",28),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.type")))}function A2(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",29)(1,"div",28),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,a.RestRequestTypesTranslationsMap.get(e.requestType)))}}function F2(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.details")," "))}function R2(e,n){if(1&e&&t.ɵɵtext(0),2&e){let e;const n=t.ɵɵnextContext().$implicit,a=t.ɵɵnextContext();t.ɵɵtextInterpolate1(" ",a.Object.values(null!==(e=n.requestValue.httpHeaders)&&void 0!==e?e:t.ɵɵpureFunction0(1,P2)).join(", ")," ")}}function B2(e,n){if(1&e&&t.ɵɵtext(0),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵtextInterpolate1(" ",e.requestValue.methodFilter," ")}}function N2(e,n){if(1&e&&t.ɵɵtext(0),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵtextInterpolate1(" ",e.requestValue.endpoint," ")}}function L2(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",29)(1,"div",28),t.ɵɵtemplate(2,R2,1,2)(3,B2,1,1)(4,N2,1,1),t.ɵɵelementEnd()()),2&e){let e;const a=n.$implicit;t.ɵɵadvance(2),t.ɵɵconditional("attributeUpdates"===(e=a.requestType)?2:"serverSideRpc"===e?3:4)}}function V2(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",31)}function q2(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",10),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageMapping(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",10),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteMapping(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function G2(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,q2,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",32),t.ɵɵelementContainer(4,33),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",34)(6,"button",35),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",36),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",37,2),t.ɵɵelementContainer(11,33),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(4),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function z2(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",38)}function U2(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class j2 extends Wi{constructor(){super(...arguments),this.Object=Object,this.RestRequestTypesTranslationsMap=wa}getDatasource(){return new H2}manageMapping(e,t){e&&e.stopPropagation();const n=ke(t),{requestType:a=xa.ATTRIBUTE_REQUEST,requestValue:i={}}=n?this.entityFormArray.at(t).value:{};this.getMappingDialog({requestType:a,...i},n?"action.apply":"action.add").afterClosed().pipe(xn(this.destroyRef)).subscribe((e=>{e&&(n?this.entityFormArray.at(t).patchValue(e):this.entityFormArray.push(this.fb.control(e)),this.entityFormArray.markAsDirty())}))}deleteMapping(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-mapping-title",{name:this.getRequestDetails(this.entityFormArray.at(t).value)}),this.translate.instant("gateway.delete-mapping-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(xn(this.destroyRef)).subscribe((e=>{e&&(this.entityFormArray.removeAt(t),this.entityFormArray.markAsDirty())}))}updateTableData(e,t){t&&(e=e.filter((e=>{const n=this.getRequestDetails(e);return Object.values(e).some((e=>Me(e)&&this.translate.instant(wa.get(e)).toLowerCase().includes(t.toLowerCase())||n?.toLowerCase().includes(t.toLowerCase())))}))),this.dataSource.loadData(e)}getRequestDetails(e){let t;switch(e.requestType){case"attributeUpdates":t=Object.values(e.requestValue.httpHeaders).join(", ");break;case"serverSideRpc":t=e.requestValue.methodFilter;break;default:t=e.requestValue.endpoint}return t}validate(){return null}getMappingDialog(e,t){return this.dialog.open(M2,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,defaultRequestUrl:this.defaultRequestUrl,withReportStrategy:this.withReportStrategy}})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(j2)))(n||j2)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:j2,selectors:[["tb-rest-request-mapping-table"]],inputs:{defaultRequestUrl:"defaultRequestUrl"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>j2)),multi:!0},{provide:K,useExisting:c((()=>j2)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:44,vars:36,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-absolute-fill","size-full"],[1,"flex","size-full","flex-col"],[1,"gw-table-toolbar","mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"gw-connector-table"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","!w-1/3",4,"matHeaderCellDef"],["class","w-1/3",4,"matCellDef"],["class","w-1/3 !pl-0",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"!w-1/3"],["tbTruncateWithTooltip",""],[1,"w-1/3"],[1,"w-1/3","!pl-0"],[1,"w-12"],[1,"lt-lg:!hidden","flex","min-w-24","flex-1","flex-row","items-stretch","justify-end","text-center"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,D2,13,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"button",7),t.ɵɵpipe(7,"translate"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",8)(11,"mat-label"),t.ɵɵtext(12," "),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",9,0),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",10),t.ɵɵpipe(17,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"table",12),t.ɵɵelementContainerStart(22,13),t.ɵɵtemplate(23,O2,4,3,"mat-header-cell",14)(24,A2,4,3,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(25,13),t.ɵɵtemplate(26,F2,3,3,"mat-header-cell",16)(27,L2,5,1,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(28,17),t.ɵɵtemplate(29,V2,1,0,"mat-header-cell",18)(30,G2,12,3,"mat-cell",19),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(31,z2,1,0,"mat-header-row",20)(32,U2,1,0,"mat-row",21),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"section",22),t.ɵɵpipe(34,"async"),t.ɵɵelementStart(35,"button",23),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageMapping(a))})),t.ɵɵelementStart(36,"mat-icon",24),t.ɵɵtext(37,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(38,"span"),t.ɵɵtext(39),t.ɵɵpipe(40,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(41,"span",25),t.ɵɵpipe(42,"async"),t.ɵɵtext(43," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵconditional(!1===t.ɵɵpipeBind1(4,20,n.dataSource.isEmpty())?3:-1),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,22,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,24,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,26,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","type"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","details"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(34,k2))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(35,k2)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(34,28,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(40,30,"gateway.add-mapping")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(42,32,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(j2,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}let H2=class extends G{constructor(){super()}};class W2 extends zi{initBasicFormGroup(){return this.fb.group({server:[],mapping:[],requestsMapping:[]})}getRequestDataArray(e){const t=[];return Fe(e)&&Object.keys(e).forEach((n=>{for(const a of e[n])t.push({requestType:n,requestValue:a})})),t}getRequestDataObject(e){return e.reduce(((e,{requestType:t,requestValue:n})=>(e[t]?.push(n),e)),{attributeRequests:[],attributeUpdates:[],serverSideRpc:[]})}updateDefaultUrl({host:e,port:t,SSL:n}){this.defaultRequestUrl=e&&t?`${n?"https":"http"}//${e}:${t}/`:document.location.origin}writeValue(e){this.basicFormGroup.setValue(this.mapConfigToFormValue(e),{emitEvent:!1})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(W2)))(n||W2)}})()}static{this.ɵdir=t.ɵɵdefineDirective({type:W2,features:[t.ɵɵInheritDefinitionFeature]})}}class $2 extends W2{mapConfigToFormValue(e){return{server:e.server??{},mapping:e.mapping??[],requestsMapping:this.getRequestDataArray(e.requestsMapping)}}getMappedValue(e){return this.updateDefaultUrl(e?.server??{}),{server:e.server??{},mapping:e.mapping??[],requestsMapping:this.getRequestDataObject(e.requestsMapping??[])}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory($2)))(n||$2)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:$2,selectors:[["tb-rest-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>$2)),multi:!0},{provide:K,useExisting:c((()=>$2)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:13,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","server"],["formControlName","mapping"],["formControlName","requestsMapping",3,"defaultRequestUrl"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-rest-server-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-rest-mapping-table",4),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-tab",1),t.ɵɵpipe(11,"translate"),t.ɵɵelement(12,"tb-rest-request-mapping-table",5),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.server"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(11,15,"gateway.requests-mapping")),t.ɵɵadvance(2),t.ɵɵproperty("defaultRequestUrl",n.defaultRequestUrl))},dependencies:t.ɵɵgetComponentDepsFactory($2,[j,_,V1,T0,j2]),encapsulation:2,changeDetection:d.OnPush})}}class K2 extends W2{mapConfigToFormValue({attributeRequests:e=[],attributeUpdates:t=[],serverSideRpc:n=[],mapping:a=[],...i}){return{server:{...i??{}},mapping:er.mapMappingToUpgradedVersion(a),requestsMapping:this.getRequestDataArray({attributeRequests:e,attributeUpdates:t,serverSideRpc:n})}}getMappedValue({requestsMapping:e,mapping:t=[],server:n={}}){this.updateDefaultUrl(n);const{attributeRequests:a=[],attributeUpdates:i=[],serverSideRpc:r=[]}=this.getRequestDataObject(e);return{...n,mapping:er.mapMappingToDowngradedVersion(t),attributeRequests:a,attributeUpdates:i,serverSideRpc:r}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(K2)))(n||K2)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:K2,selectors:[["tb-rest-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>K2)),multi:!0},{provide:K,useExisting:c((()=>K2)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:13,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","server"],["formControlName","mapping"],["formControlName","requestsMapping",3,"defaultRequestUrl"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-rest-server-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-rest-mapping-table",4),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-tab",1),t.ɵɵpipe(11,"translate"),t.ɵɵelement(12,"tb-rest-request-mapping-table",5),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.server"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.data-mapping"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(11,15,"gateway.requests-mapping")),t.ɵɵadvance(2),t.ɵɵproperty("defaultRequestUrl",n.defaultRequestUrl))},dependencies:t.ɵɵgetComponentDepsFactory(K2,[j,_,V1,T0,j2]),encapsulation:2,changeDetection:d.OnPush})}}class Y2 extends zi{initBasicFormGroup(){return this.fb.group({parameters:[],paths:[],requestsMapping:[]})}getRequestDataArray(e){const t=[];return Fe(e)&&Object.keys(e).forEach((n=>{for(const a of e[n])t.push({requestType:n,requestValue:a})})),t}getRequestDataObject(e){return e.reduce(((e,{requestType:t,requestValue:n})=>(e[t]?.push(n),e)),{attributeUpdates:[],serverSideRpc:[]})}writeValue(e){this.basicFormGroup.setValue(this.mapConfigToFormValue(e),{emitEvent:!1})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(Y2)))(n||Y2)}})()}static{this.ɵdir=t.ɵɵdefineDirective({type:Y2,features:[t.ɵɵInheritDefinitionFeature]})}}function X2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",5),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.host-required"))}function Z2(e,n){if(1&e&&(t.ɵɵelement(0,"tb-error-icon",5),t.ɵɵpipe(1,"getGatewayPortTooltip")),2&e){t.ɵɵnextContext();const e=t.ɵɵreadContextLet(14);t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,e))}}class Q2 extends Gi{constructor(){super(...arguments),this.portLimits=Ia,this.SecurityMode=$a}get parametersConfigFormGroup(){return this.formGroup}initFormGroup(){return this.fb.group({host:["",[$.required,$.pattern(an)]],port:[null,[$.required,$.min(Ia.MIN),$.max(Ia.MAX)]],TLSSupport:[!1],security:[]})}onWriteValue(e){this.formGroup.reset(e,{emitEvent:!1})}mapOnChangeValue(e){return Te(e),e}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(Q2)))(n||Q2)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:Q2,selectors:[["tb-ftp-parameters-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>Q2)),multi:!0},{provide:K,useExisting:c((()=>Q2)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:23,vars:20,consts:[[1,"tb-form-panel","no-border","no-padding","padding-top",3,"formGroup"],[1,"tb-form-row"],["translate","",1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","host",3,"placeholder"],["matSuffix","",3,"tooltipText"],[1,"tb-form-row","column-xs"],["matInput","","type","number","name","value","formControlName","port",3,"min","max","placeholder"],[1,"tb-form-row","space-between","tb-flex","fill-width"],["formControlName","TLSSupport",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","security",3,"title","mode"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.host"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",3),t.ɵɵelement(5,"input",4),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,X2,2,3,"tb-error-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"div",6)(9,"div",2),t.ɵɵtext(10,"gateway.port"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field",3),t.ɵɵelement(12,"input",7),t.ɵɵpipe(13,"translate"),t.ɵɵdeclareLet(14),t.ɵɵtemplate(15,Z2,2,3,"tb-error-icon",5),t.ɵɵelementEnd()(),t.ɵɵelementStart(16,"div",8)(17,"mat-slide-toggle",9)(18,"mat-label",10),t.ɵɵpipe(19,"translate"),t.ɵɵtext(20),t.ɵɵpipe(21,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelement(22,"tb-security-config",11),t.ɵɵelementEnd()),2&e){t.ɵɵproperty("formGroup",n.parametersConfigFormGroup),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,11,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.parametersConfigFormGroup.get("host").hasError("required")&&n.parametersConfigFormGroup.get("host").touched?7:-1),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("min",n.portLimits.MIN),t.ɵɵpropertyInterpolate("max",n.portLimits.MAX),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(13,13,"gateway.set")),t.ɵɵadvance(2);const e=t.ɵɵstoreLet(n.parametersConfigFormGroup.get("port"));t.ɵɵadvance(),t.ɵɵconditional((e.hasError("required")||e.hasError("min")||e.hasError("max"))&&e.touched?15:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(19,16,"gateway.hints.ftp.tls-support")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(21,18,"gateway.ftp.tls-support")),t.ɵɵadvance(2),t.ɵɵproperty("title","gateway.security")("mode",n.SecurityMode.basic)}},dependencies:t.ɵɵgetComponentDepsFactory(Q2,[j,_,m$,Qn,jY]),encapsulation:2,changeDetection:d.OnPush})}}function J2(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.ftp.device-name-pattern-required"))}function e3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.ftp.device-type-pattern-required"))}function t3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.ftp.path-expression-required"))}function n3(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",23),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,e))}}function a3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.poll-period-required"))}function i3(e,n){1&e&&(t.ɵɵelementStart(0,"span",26),t.ɵɵtext(1,"gateway.suffix.s"),t.ɵɵelementEnd())}function r3(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",27),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Device)}}function o3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",47),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function s3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip")(1,"div",47),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e)}}function l3(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",23),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,e))}}class p3 extends A{constructor(e,t,n,a,i,r,o,s,l,p){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.popoverService=r,this.renderer=o,this.viewContainerRef=s,this.destroyRef=l,this.cd=p,this.pathFormGroup=this.fb.group({devicePatternName:["",[$.required,$.pattern(an)]],devicePatternType:["",[$.required,$.pattern(an)]],delimiter:["",[$.pattern(an)]],path:["",[$.required,$.pattern(an)]],txtFileDataView:[Pi.TABLE],pollPeriod:[5,[$.required,$.pattern(nn)]],readMode:[Di.FULL],maxFileSize:[5,[$.pattern(nn)]],withSortingFiles:[!1],reportStrategy:[],attributes:[[]],timeseries:[[]]}),this.keysPopupClosed=!0,this.helpLink=`${O}/docs/iot-gateway/config/ftp/#section-paths`,this.ConnectorType=ct,this.ReportStrategyDefaultValue=en,this.ftpFileDataViewTypes=Object.values(Pi),this.ftpReadModeTypes=Object.values(Di),this.MappingKeysType=Na,this.pathFormGroup.patchValue(this.data.value)}get converterAttributes(){return this.pathFormGroup.get("attributes").value.map((e=>e.key))}get converterTelemetry(){return this.pathFormGroup.get("timeseries").value.map((e=>e.key))}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.pathFormGroup.valid){const e=this.pathFormGroup.value;Te(e),this.dialogRef.close(e)}}manageKeys(e,t,n){e?.stopPropagation(),this.popoverComponent&&!this.popoverComponent.tbHidden&&this.popoverComponent.hide();const a=t._elementRef.nativeElement;if(this.popoverService.hasPopover(a))this.popoverService.hidePopover(a);else{const e=this.pathFormGroup.get(n),t={keys:e.value,keysType:n,panelTitle:La.get(n),addKeyTitle:Va.get(n),deleteKeyTitle:qa.get(n),noKeysText:Ga.get(n),withReportStrategy:this.data.withReportStrategy,connectorType:ct.FTP};this.keysPopupClosed=!1,this.popoverComponent=this.popoverService.displayPopover(a,this.renderer,this.viewContainerRef,TK,"leftBottom",!1,null,t,{},{},{},!0),this.popoverComponent.tbComponentRef.instance.keysDataApplied.pipe(xn(this.destroyRef)).subscribe((t=>{this.popoverComponent.hide(),e.patchValue(t),e.markAsDirty(),this.cd.markForCheck()})),this.popoverComponent.tbHideStart.pipe(xn(this.destroyRef)).subscribe((()=>{this.keysPopupClosed=!0}))}}static{this.ɵfac=function(e){return new(e||p3)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(it.TbPopoverService),t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.DestroyRef),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:p3,selectors:[["tb-ftp-path-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:126,vars:79,consts:[["attributesButton",""],["telemetryButton",""],[1,"h-full","w-[77vw]","max-w-3xl",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row"],[1,"fixed-title-width","tb-required"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","name","value","formControlName","devicePatternName",3,"placeholder"],["matSuffix","",3,"tooltipText"],["matInput","","name","value","formControlName","devicePatternType",3,"placeholder"],[1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["matInput","","name","value","formControlName","path",3,"placeholder"],[1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["matInput","","name","value","formControlName","delimiter",3,"placeholder"],[1,"tb-form-row","space-between","tb-flex"],["translate","",1,"fixed-title-width",3,"tb-hint-tooltip-icon"],["formControlName","txtFileDataView","appearance","fill",1,"gw-toggle-select"],[3,"value"],["translate","",1,"fixed-title-width"],["matInput","","type","number","min","0","name","value","formControlName","pollPeriod",3,"placeholder"],["translate","","matSuffix","",1,"block","pr-2"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"],[1,"tb-form-panel","no-border","no-padding","w-full"],[1,"fixed-title-width"],[1,"tb-flex","max-w-70%"],[1,"tb-flex","gw-chip-list",3,"tbEllipsisChipList"],[1,"mat-mdc-chip","ellipsis-chip"],[1,"ellipsis-text"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["matButtonIcon",""],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate","",1,"tb-form-panel-title"],["formControlName","readMode","appearance","fill",1,"gw-toggle-select"],["matInput","","type","number","min","1","name","value","formControlName","maxFileSize",3,"placeholder"],[1,"tb-form-row","tb-flex","fill-width"],["formControlName","withSortingFiles",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["tbTruncateWithTooltip",""]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2)(1,"mat-toolbar",3)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",4)(6,"div",5),t.ɵɵelementStart(7,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(8,"mat-icon",7),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),t.ɵɵtext(14),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"mat-form-field",12),t.ɵɵelement(17,"input",13),t.ɵɵpipe(18,"translate"),t.ɵɵtemplate(19,J2,2,3,"tb-error-icon",14),t.ɵɵelementEnd()(),t.ɵɵelementStart(20,"div",10)(21,"div",11),t.ɵɵtext(22),t.ɵɵpipe(23,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(24,"mat-form-field",12),t.ɵɵelement(25,"input",15),t.ɵɵpipe(26,"translate"),t.ɵɵtemplate(27,e3,2,3,"tb-error-icon",14),t.ɵɵelementEnd()(),t.ɵɵelementStart(28,"div",10)(29,"div",16),t.ɵɵpipe(30,"translate"),t.ɵɵtext(31),t.ɵɵpipe(32,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"mat-form-field",12),t.ɵɵelement(34,"input",17),t.ɵɵpipe(35,"translate"),t.ɵɵtemplate(36,t3,2,3,"tb-error-icon",14),t.ɵɵelementEnd()(),t.ɵɵelementStart(37,"div",10)(38,"div",18),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"mat-form-field",12),t.ɵɵelement(43,"input",19),t.ɵɵpipe(44,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(45,"div",20)(46,"div",21),t.ɵɵpipe(47,"translate"),t.ɵɵtext(48,"gateway.ftp.file-data-view"),t.ɵɵelementEnd(),t.ɵɵelementStart(49,"tb-toggle-select",22),t.ɵɵrepeaterCreate(50,n3,3,4,"tb-toggle-option",23,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()(),t.ɵɵelementStart(52,"div",20)(53,"div",24),t.ɵɵtext(54,"gateway.ftp.poll-period"),t.ɵɵelementEnd(),t.ɵɵelementStart(55,"mat-form-field",12),t.ɵɵelement(56,"input",25),t.ɵɵpipe(57,"translate"),t.ɵɵtemplate(58,a3,2,3,"tb-error-icon",14)(59,i3,2,0,"span",26),t.ɵɵelementEnd()(),t.ɵɵtemplate(60,r3,1,2,"tb-report-strategy",27),t.ɵɵelementStart(61,"div",28)(62,"div",20)(63,"div",29),t.ɵɵtext(64),t.ɵɵpipe(65,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(66,"div",30)(67,"mat-chip-listbox",31),t.ɵɵrepeaterCreate(68,o3,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(70,"mat-chip",32),t.ɵɵelement(71,"label",33),t.ɵɵelementEnd()(),t.ɵɵelementStart(72,"button",34,0),t.ɵɵpipe(74,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(73);return t.ɵɵresetView(n.manageKeys(a,i,n.MappingKeysType.ATTRIBUTES))})),t.ɵɵelementStart(75,"tb-icon",35),t.ɵɵtext(76,"edit"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(77,"div",20)(78,"div",24),t.ɵɵtext(79,"gateway.timeseries"),t.ɵɵelementEnd(),t.ɵɵelementStart(80,"div",30)(81,"mat-chip-listbox",31),t.ɵɵrepeaterCreate(82,s3,3,1,"mat-chip",null,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementStart(84,"mat-chip",32),t.ɵɵelement(85,"label",33),t.ɵɵelementEnd()(),t.ɵɵelementStart(86,"button",34,1),t.ɵɵpipe(88,"translate"),t.ɵɵlistener("click",(function(a){t.ɵɵrestoreView(e);const i=t.ɵɵreference(87);return t.ɵɵresetView(n.manageKeys(a,i,n.MappingKeysType.TIMESERIES))})),t.ɵɵelementStart(89,"tb-icon",35),t.ɵɵtext(90,"edit"),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(91,"div",36)(92,"mat-expansion-panel",37)(93,"mat-expansion-panel-header")(94,"mat-panel-title")(95,"div",38),t.ɵɵtext(96,"gateway.advanced-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(97,"div",20)(98,"div",21),t.ɵɵpipe(99,"translate"),t.ɵɵtext(100,"gateway.ftp.read-mode"),t.ɵɵelementEnd(),t.ɵɵelementStart(101,"tb-toggle-select",39),t.ɵɵrepeaterCreate(102,l3,3,4,"tb-toggle-option",23,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()(),t.ɵɵelementStart(104,"div",20)(105,"div",21),t.ɵɵpipe(106,"translate"),t.ɵɵtext(107,"gateway.ftp.max-file-size"),t.ɵɵelementEnd(),t.ɵɵelementStart(108,"mat-form-field",12),t.ɵɵelement(109,"input",40),t.ɵɵpipe(110,"translate"),t.ɵɵelementStart(111,"span",26),t.ɵɵtext(112,"gateway.suffix.mb"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(113,"div",41)(114,"mat-slide-toggle",42)(115,"mat-label",43),t.ɵɵpipe(116,"translate"),t.ɵɵtext(117),t.ɵɵpipe(118,"translate"),t.ɵɵelementEnd()()()()()()(),t.ɵɵelementStart(119,"div",44)(120,"button",45),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.cancel())})),t.ɵɵtext(121),t.ɵɵpipe(122,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(123,"button",46),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.add())})),t.ɵɵtext(124),t.ɵɵpipe(125,"translate"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵproperty("formGroup",n.pathFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,33,"gateway.ftp.path")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.helpLink),t.ɵɵadvance(8),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(15,35,"gateway.ftp.device-name-pattern")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(18,37,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.pathFormGroup.get("devicePatternName").hasError("required")&&n.pathFormGroup.get("devicePatternName").touched?19:-1),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(23,39,"gateway.ftp.device-type-pattern")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(26,41,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.pathFormGroup.get("devicePatternType").hasError("required")&&n.pathFormGroup.get("devicePatternType").touched?27:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(30,43,"gateway.hints.ftp.path-expression")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(32,45,"gateway.ftp.path-expression")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(35,47,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.pathFormGroup.get("path").hasError("required")&&n.pathFormGroup.get("path").touched?36:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(39,49,"gateway.hints.ftp.delimiter")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(41,51,"gateway.ftp.delimiter")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(44,53,"gateway.set")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(47,55,"gateway.hints.ftp.file-data-view")),t.ɵɵadvance(4),t.ɵɵrepeater(n.ftpFileDataViewTypes),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(57,57,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.pathFormGroup.get("pollPeriod").hasError("required")&&n.pathFormGroup.get("pollPeriod").touched?58:59),t.ɵɵadvance(2),t.ɵɵconditional(n.data.withReportStrategy?60:-1),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(65,59,"gateway.attributes")),t.ɵɵadvance(3),t.ɵɵproperty("tbEllipsisChipList",n.converterAttributes),t.ɵɵadvance(),t.ɵɵrepeater(n.converterAttributes),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(74,61,"action.edit")),t.ɵɵadvance(9),t.ɵɵproperty("tbEllipsisChipList",n.converterTelemetry),t.ɵɵadvance(),t.ɵɵrepeater(n.converterTelemetry),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(88,63,"action.edit")),t.ɵɵadvance(12),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(99,65,"gateway.hints.ftp.read-mode")),t.ɵɵadvance(4),t.ɵɵrepeater(n.ftpReadModeTypes),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(106,67,"gateway.hints.ftp.max-file-size")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(110,69,"gateway.set")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(116,71,"gateway.hints.ftp.sorting-files")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(118,73,"gateway.ftp.sorting-files")," "),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(122,75,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.pathFormGroup.invalid||!n.pathFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(125,77,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(p3,[j,_,Qn,Xn,Gn]),encapsulation:2,changeDetection:d.OnPush})}}const c3=()=>["devicePatternName","devicePatternType","path","actions"];function d3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6)(1,"div",28),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"span",8),t.ɵɵelementStart(5,"button",10),t.ɵɵpipe(6,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.managePath(n))})),t.ɵɵelementStart(7,"mat-icon"),t.ɵɵtext(8,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",10),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,"gateway.ftp.paths")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(6,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,7,"action.search")))}function u3(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",29)(1,"div",30),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.ftp.pattern-name")))}function m3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",31)(1,"div",30),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.devicePatternName)}}function h3(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",32),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.ftp.pattern-type")," "))}function g3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",31)(1,"div",30),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.devicePatternType)}}function f3(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",33),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.ftp.path")," "))}function y3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",33)(1,"div",30),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(e.path)}}function v3(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",34)}function b3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",10),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.managePath(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",10),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deletePath(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function x3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,b3,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",35),t.ɵɵelementContainer(4,36),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",37)(6,"button",38),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",39),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",40,2),t.ɵɵelementContainer(11,36),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(4),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function w3(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",41)}function S3(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class C3 extends Wi{getDatasource(){return new _3}managePath(e,t){e&&e.stopPropagation();const n=ke(t),a=n?this.entityFormArray.at(t).value:{};this.getMappingDialog(a,n?"action.apply":"action.add").afterClosed().pipe(xn(this.destroyRef)).subscribe((e=>{e&&(n?this.entityFormArray.at(t).patchValue(e):this.entityFormArray.push(this.fb.control(e)),this.entityFormArray.markAsDirty())}))}deletePath(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.ftp.delete-path-title",{name:this.entityFormArray.at(t).value.path}),this.translate.instant("gateway.ftp.delete-path-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(xn(this.destroyRef)).subscribe((e=>{e&&(this.entityFormArray.removeAt(t),this.entityFormArray.markAsDirty())}))}getMappingDialog(e,t){return this.dialog.open(p3,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,withReportStrategy:this.withReportStrategy}})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(C3)))(n||C3)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:C3,selectors:[["tb-ftp-paths-table"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>C3)),multi:!0},{provide:K,useExisting:c((()=>C3)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:47,vars:37,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-absolute-fill","size-full"],[1,"flex","size-full","flex-col"],[1,"gw-table-toolbar","mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"gw-connector-table"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","!w-1/5",4,"matHeaderCellDef"],["class","w-1/5",4,"matCellDef"],["class","w-1/5 !pl-0",4,"matHeaderCellDef"],["class","w-1/3",4,"matHeaderCellDef"],["class","w-1/3",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"!w-1/5"],["tbTruncateWithTooltip",""],[1,"w-1/5"],[1,"w-1/5","!pl-0"],[1,"w-1/3"],[1,"w-12"],[1,"lt-lg:!hidden","flex","min-w-24","flex-1","flex-row","items-stretch","justify-end","text-center"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,d3,13,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"button",7),t.ɵɵpipe(7,"translate"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",8)(11,"mat-label"),t.ɵɵtext(12," "),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",9,0),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",10),t.ɵɵpipe(17,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"table",12),t.ɵɵelementContainerStart(22,13),t.ɵɵtemplate(23,u3,4,3,"mat-header-cell",14)(24,m3,3,1,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(25,13),t.ɵɵtemplate(26,h3,3,3,"mat-header-cell",16)(27,g3,3,1,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(28,13),t.ɵɵtemplate(29,f3,3,3,"mat-header-cell",17)(30,y3,3,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(31,19),t.ɵɵtemplate(32,v3,1,0,"mat-header-cell",20)(33,x3,12,3,"mat-cell",21),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(34,w3,1,0,"mat-header-row",22)(35,S3,1,0,"mat-row",23),t.ɵɵelementEnd(),t.ɵɵelementStart(36,"section",24),t.ɵɵpipe(37,"async"),t.ɵɵelementStart(38,"button",25),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.managePath(a))})),t.ɵɵelementStart(39,"mat-icon",26),t.ɵɵtext(40,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(41,"span"),t.ɵɵtext(42),t.ɵɵpipe(43,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(44,"span",27),t.ɵɵpipe(45,"async"),t.ɵɵtext(46," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵconditional(!1===t.ɵɵpipeBind1(4,21,n.dataSource.isEmpty())?3:-1),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,23,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,25,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,27,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","devicePatternName"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","devicePatternType"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","path"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(35,c3))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(36,c3)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(37,29,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(43,31,"gateway.ftp.add-path")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(45,33,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(C3,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}class _3 extends G{constructor(){super()}}function T3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",12),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,a.FtpRequestTypesTranslationsMap.get(e)))}}function I3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-required"))}function E3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.rest.device-name-filter-pattern"))}function M3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.attribute-filter-required"))}function k3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.attribute-filter-pattern"))}function P3(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",12),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,e))}}function D3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.ftp.path-required"))}function O3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.hints.ftp.path-pattern"))}function A3(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",8)(1,"div",13),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.attribute-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",14),t.ɵɵelement(5,"input",22),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,M3,2,3,"tb-error-icon",16)(8,k3,2,3,"tb-error-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",23)(10,"div",9),t.ɵɵtext(11,"gateway.ftp.writing-mode"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"tb-toggle-select",24),t.ɵɵrepeaterCreate(13,P3,3,4,"tb-toggle-option",12,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"div",8)(16,"div",17),t.ɵɵtext(17,"gateway.ftp.path"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"mat-form-field",14),t.ɵɵelement(19,"input",25),t.ɵɵpipe(20,"translate"),t.ɵɵtemplate(21,D3,2,3,"tb-error-icon",16)(22,O3,2,3,"tb-error-icon",16),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,5,"gateway.attribute-filter-hint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,7,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("attributeFilter").hasError("required")&&e.mappingFormGroup.get("attributeFilter").touched?7:e.mappingFormGroup.get("attributeFilter").hasError("pattern")&&e.mappingFormGroup.get("attributeFilter").touched?8:-1),t.ɵɵadvance(6),t.ɵɵrepeater(e.ftpAttributeUpdateWritingModes),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(20,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("path").hasError("required")&&e.mappingFormGroup.get("path").touched?21:e.mappingFormGroup.get("path").hasError("pattern")&&e.mappingFormGroup.get("path").touched?22:-1)}}function F3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.method-filter-required"))}function R3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.method-filter-pattern"))}function B3(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",12),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,2,e))}}function N3(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",8)(1,"div",13),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3,"gateway.method-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-form-field",14),t.ɵɵelement(5,"input",26),t.ɵɵpipe(6,"translate"),t.ɵɵtemplate(7,F3,2,3,"tb-error-icon",16)(8,R3,2,3,"tb-error-icon",16),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"div",23)(10,"div",9),t.ɵɵtext(11,"gateway.ftp.writing-mode"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"tb-toggle-select",27),t.ɵɵrepeaterCreate(13,B3,3,4,"tb-toggle-option",12,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,3,"gateway.method-filter-hint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,5,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(e.mappingFormGroup.get("methodFilter").hasError("required")&&e.mappingFormGroup.get("methodFilter").touched?7:e.mappingFormGroup.get("methodFilter").hasError("pattern")&&e.mappingFormGroup.get("methodFilter").touched?8:-1),t.ɵɵadvance(6),t.ɵɵrepeater(e.FtpServerSideRpcMethodFilters)}}function L3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.value-expression-required"))}function V3(e,n){1&e&&(t.ɵɵelement(0,"tb-error-icon",16),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("tooltipText",t.ɵɵpipeBind1(1,1,"gateway.value-expression-pattern"))}class q3 extends A{constructor(e,t,n,a,i){super(e,t,a),this.store=e,this.router=t,this.data=n,this.dialogRef=a,this.fb=i,this.requestTypes=Object.values(Oi),this.helpLink=`${O}/docs/iot-gateway/config/ftp/#section-attributeupdates`,this.FtpRequestTypesTranslationsMap=Ai,this.FtpRequestType=Oi,this.ftpAttributeUpdateWritingModes=Object.values(Fi),this.FtpServerSideRpcMethodFilters=Object.values(Ri),this.mappingFormGroup=this.fb.group({requestType:[Oi.ATTRIBUTE_UPDATE],deviceNameFilter:["",[$.required,$.pattern(an)]],attributeFilter:["",[$.required,$.pattern(an)]],methodFilter:["",[$.required,$.pattern(an)]],valueExpression:["",[$.required,$.pattern(an)]],writingMode:[Fi.WRITE],methodWritingMode:[Ri.read],path:["",[$.required,$.pattern(an)]]}),this.keysPopupClosed=!0,this.setInitialValue(),this.observeRequestTypeChange()}cancel(){this.keysPopupClosed&&this.dialogRef.close(null)}add(){if(this.mappingFormGroup.valid){const{requestType:e,...t}=this.mappingFormGroup.value;e===Oi.SERVER_SIDE_RPC&&(t.methodFilter=t.methodWritingMode,delete t.methodWritingMode),this.dialogRef.close({requestType:e,requestValue:t})}}observeRequestTypeChange(){this.toggleFieldsByRequestType(this.mappingFormGroup.get("requestType").value),this.mappingFormGroup.get("requestType").valueChanges.pipe(xn()).subscribe((e=>this.toggleFieldsByRequestType(e)))}toggleFieldsByRequestType(e){const t=e===Oi.SERVER_SIDE_RPC;this.mappingFormGroup.get("attributeFilter")[t?"disable":"enable"]({emitEvent:!1}),this.mappingFormGroup.get("writingMode")[t?"disable":"enable"]({emitEvent:!1}),this.mappingFormGroup.get("path")[t?"disable":"enable"]({emitEvent:!1}),this.mappingFormGroup.get("methodFilter")[t?"enable":"disable"]({emitEvent:!1}),this.mappingFormGroup.get("methodWritingMode")[t?"enable":"disable"]({emitEvent:!1})}setInitialValue(){const{requestType:e,writingMode:t,...n}=this.data.value;e===Oi.SERVER_SIDE_RPC?this.mappingFormGroup.patchValue({requestType:e,methodWritingMode:t??Ri.read,...n},{emitEvent:!1}):this.mappingFormGroup.patchValue(this.data.value,{emitEvent:!1})}static{this.ɵfac=function(e){return new(e||q3)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(Xe.Router),t.ɵɵdirectiveInject(Ve),t.ɵɵdirectiveInject(qe.MatDialogRef),t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:q3,selectors:[["tb-ftp-requests-mapping-dialog"]],standalone:!0,features:[t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:45,vars:24,consts:[[1,"h-full","w-[77vw]","max-w-3xl",3,"formGroup"],["color","primary"],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-row"],["translate","",1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex"],["formControlName","requestType"],[3,"value"],["translate","",1,"fixed-title-width","tb-required",3,"tb-hint-tooltip-icon"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","type","text","name","value","formControlName","deviceNameFilter",3,"placeholder"],["matSuffix","",3,"tooltipText"],["translate","",1,"fixed-title-width","tb-required"],["matInput","","type","text","name","value","formControlName","valueExpression",3,"placeholder"],["mat-dialog-actions","",1,"justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["matInput","","type","text","name","value","formControlName","attributeFilter",3,"placeholder"],[1,"tb-form-row","space-between","tb-flex"],["formControlName","writingMode","appearance","fill",1,"gw-toggle-select"],["matInput","","type","text","name","value","formControlName","path",3,"placeholder"],["matInput","","type","text","name","value","formControlName","methodFilter",3,"placeholder"],["formControlName","methodWritingMode","appearance","fill",1,"gw-toggle-select"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"mat-toolbar",1)(2,"h2"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(5,"span",2)(6,"div",3),t.ɵɵelementStart(7,"button",4),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵelementStart(8,"mat-icon",5),t.ɵɵtext(9,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9),t.ɵɵtext(14,"gateway.request-type"),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"mat-form-field",10)(16,"mat-select",11),t.ɵɵrepeaterCreate(17,T3,3,4,"mat-option",12,t.ɵɵrepeaterTrackByIdentity),t.ɵɵelementEnd()()(),t.ɵɵelementStart(19,"div",8)(20,"div",13),t.ɵɵpipe(21,"translate"),t.ɵɵtext(22,"gateway.device-name-filter"),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"mat-form-field",14),t.ɵɵelement(24,"input",15),t.ɵɵpipe(25,"translate"),t.ɵɵtemplate(26,I3,2,3,"tb-error-icon",16)(27,E3,2,3,"tb-error-icon",16),t.ɵɵelementEnd()(),t.ɵɵtemplate(28,A3,23,11)(29,N3,15,7),t.ɵɵelementStart(30,"div",8)(31,"div",17),t.ɵɵtext(32,"gateway.value-expression"),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"mat-form-field",14),t.ɵɵelement(34,"input",18),t.ɵɵpipe(35,"translate"),t.ɵɵtemplate(36,L3,2,3,"tb-error-icon",16)(37,V3,2,3,"tb-error-icon",16),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(38,"div",19)(39,"button",20),t.ɵɵlistener("click",(function(){return n.cancel()})),t.ɵɵtext(40),t.ɵɵpipe(41,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(42,"button",21),t.ɵɵlistener("click",(function(){return n.add()})),t.ɵɵtext(43),t.ɵɵpipe(44,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.mappingFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,12,"gateway.requests-mapping")),t.ɵɵadvance(3),t.ɵɵproperty("tb-help",n.helpLink),t.ɵɵadvance(11),t.ɵɵrepeater(n.requestTypes),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(21,14,"gateway.device-name-filter-hint")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(25,16,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.mappingFormGroup.get("deviceNameFilter").hasError("required")&&n.mappingFormGroup.get("deviceNameFilter").touched?26:n.mappingFormGroup.get("deviceNameFilter").hasError("pattern")&&n.mappingFormGroup.get("deviceNameFilter").touched?27:-1),t.ɵɵadvance(2),t.ɵɵconditional(n.mappingFormGroup.get("requestType").value===n.FtpRequestType.ATTRIBUTE_UPDATE?28:29),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(35,18,"gateway.set")),t.ɵɵadvance(2),t.ɵɵconditional(n.mappingFormGroup.get("valueExpression").hasError("required")&&n.mappingFormGroup.get("valueExpression").touched?36:n.mappingFormGroup.get("valueExpression").hasError("pattern")&&n.mappingFormGroup.get("valueExpression").touched?37:-1),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(41,20,"action.cancel")," "),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.mappingFormGroup.invalid||!n.mappingFormGroup.dirty||!n.keysPopupClosed),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(44,22,n.data.buttonTitle)," "))},dependencies:t.ɵɵgetComponentDepsFactory(q3,[j,_,Qn]),encapsulation:2,changeDetection:d.OnPush})}}const G3=()=>["type","details","actions"];function z3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6)(1,"div",26),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelement(4,"span",8),t.ɵɵelementStart(5,"button",10),t.ɵɵpipe(6,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.manageMapping(n))})),t.ɵɵelementStart(7,"mat-icon"),t.ɵɵtext(8,"add"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"button",10),t.ɵɵpipe(10,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.enterFilterMode())})),t.ɵɵelementStart(11,"mat-icon"),t.ɵɵtext(12,"search"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,"gateway.requests-mapping")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(6,5,"action.add")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,7,"action.search")))}function U3(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",27)(1,"div",28),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,"gateway.type")))}function j3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",29)(1,"div",28),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,1,a.FtpRequestTypesTranslationsMap.get(e.requestType)))}}function H3(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",30),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.details")," "))}function W3(e,n){if(1&e&&t.ɵɵtext(0),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵtextInterpolate1(" ",e.requestValue.methodFilter," ")}}function $3(e,n){if(1&e&&t.ɵɵtext(0),2&e){const e=t.ɵɵnextContext().$implicit;t.ɵɵtextInterpolate1(" ",e.requestValue.path," ")}}function K3(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",29)(1,"div",28),t.ɵɵtemplate(2,W3,1,1)(3,$3,1,1),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵconditional(e.requestType===a.FtpRequestType.SERVER_SIDE_RPC?2:3)}}function Y3(e,n){1&e&&t.ɵɵelement(0,"mat-header-cell",31)}function X3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",10),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.manageMapping(n,a))})),t.ɵɵelementStart(2,"tb-icon"),t.ɵɵtext(3,"edit"),t.ɵɵelementEnd()(),t.ɵɵelementStart(4,"button",10),t.ɵɵpipe(5,"translate"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext().index,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteMapping(n,a))})),t.ɵɵelementStart(6,"tb-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd()()}2&e&&(t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.edit")),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(5,4,"action.delete")))}function Z3(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtemplate(1,X3,8,6,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(3,"div",32),t.ɵɵelementContainer(4,33),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",34)(6,"button",35),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(7,"mat-icon",36),t.ɵɵtext(8,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(9,"mat-menu",37,2),t.ɵɵelementContainer(11,33),t.ɵɵelementEnd()()()}if(2&e){const e=t.ɵɵreference(2),n=t.ɵɵreference(10);t.ɵɵadvance(4),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(2),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngTemplateOutlet",e)}}function Q3(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",38)}function J3(e,n){1&e&&t.ɵɵelement(0,"mat-row")}class e4 extends Wi{constructor(){super(...arguments),this.FtpRequestTypesTranslationsMap=Ai,this.FtpRequestType=Oi}getDatasource(){return new t4}manageMapping(e,t){e&&e.stopPropagation();const n=ke(t),{requestType:a=Oi.ATTRIBUTE_UPDATE,requestValue:i={}}=n?this.entityFormArray.at(t).value:{};this.getMappingDialog({requestType:a,...i},n?"action.apply":"action.add").afterClosed().pipe(xn(this.destroyRef)).subscribe((e=>{e&&(n?this.entityFormArray.at(t).patchValue(e):this.entityFormArray.push(this.fb.control(e)),this.entityFormArray.markAsDirty())}))}deleteMapping(e,t){e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("gateway.delete-mapping-title",{name:this.getRequestDetails(this.entityFormArray.at(t).value)}),this.translate.instant("gateway.delete-mapping-description"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).pipe(ue(Boolean),xn(this.destroyRef)).subscribe((()=>{this.entityFormArray.removeAt(t),this.entityFormArray.markAsDirty()}))}updateTableData(e,t){t&&(e=e.filter((e=>{const n=this.getRequestDetails(e);return Object.values(e).some((e=>Me(e)&&this.translate.instant(Ai.get(e)).toLowerCase().includes(t.toLowerCase())||n?.toLowerCase().includes(t.toLowerCase())))}))),this.dataSource.loadData(e)}getRequestDetails(e){return e.requestType===Oi.SERVER_SIDE_RPC?e.requestValue.methodFilter:e.requestValue.path}validate(){return null}getMappingDialog(e,t){return this.dialog.open(q3,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{value:e,buttonTitle:t,withReportStrategy:this.withReportStrategy}})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(e4)))(n||e4)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:e4,selectors:[["tb-ftp-request-mapping-table"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>e4)),multi:!0},{provide:K,useExisting:c((()=>e4)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:44,vars:36,consts:[["searchInput",""],["rowActions",""],["cellActionsMenu","matMenu"],[1,"tb-absolute-fill","size-full"],[1,"flex","size-full","flex-col"],[1,"gw-table-toolbar","mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],[1,"flex-1"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"gw-connector-table"],["mat-table","",3,"dataSource"],[3,"matColumnDef"],["class","!w-1/3",4,"matHeaderCellDef"],["class","w-1/3",4,"matCellDef"],["class","w-1/3 !pl-0",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["class","w-12",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],["translate","",1,"no-data-found","items-center","justify-center"],[1,"title-container"],[1,"!w-1/3"],["tbTruncateWithTooltip",""],[1,"w-1/3"],[1,"w-1/3","!pl-0"],[1,"w-12"],[1,"lt-lg:!hidden","flex","min-w-24","flex-1","flex-row","items-stretch","justify-end","text-center"],[3,"ngTemplateOutlet"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3)(1,"div",4)(2,"mat-toolbar",5),t.ɵɵtemplate(3,z3,13,9,"div",6),t.ɵɵpipe(4,"async"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-toolbar",5)(6,"button",7),t.ɵɵpipe(7,"translate"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"search"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",8)(11,"mat-label"),t.ɵɵtext(12," "),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",9,0),t.ɵɵpipe(15,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"button",10),t.ɵɵpipe(17,"translate"),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.exitFilterMode())})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"close"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"table",12),t.ɵɵelementContainerStart(22,13),t.ɵɵtemplate(23,U3,4,3,"mat-header-cell",14)(24,j3,4,3,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(25,13),t.ɵɵtemplate(26,H3,3,3,"mat-header-cell",16)(27,K3,4,1,"mat-cell",15),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(28,17),t.ɵɵtemplate(29,Y3,1,0,"mat-header-cell",18)(30,Z3,12,3,"mat-cell",19),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(31,Q3,1,0,"mat-header-row",20)(32,J3,1,0,"mat-row",21),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"section",22),t.ɵɵpipe(34,"async"),t.ɵɵelementStart(35,"button",23),t.ɵɵlistener("click",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.manageMapping(a))})),t.ɵɵelementStart(36,"mat-icon",24),t.ɵɵtext(37,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(38,"span"),t.ɵɵtext(39),t.ɵɵpipe(40,"translate"),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(41,"span",25),t.ɵɵpipe(42,"async"),t.ɵɵtext(43," widget.no-data-found "),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",n.textSearchMode),t.ɵɵadvance(),t.ɵɵconditional(!1===t.ɵɵpipeBind1(4,20,n.dataSource.isEmpty())?3:-1),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(7,22,"action.search")),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(15,24,"common.enter-search")),t.ɵɵproperty("formControl",n.textSearch),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,26,"action.close")),t.ɵɵadvance(5),t.ɵɵproperty("dataSource",n.dataSource),t.ɵɵadvance(),t.ɵɵproperty("matColumnDef","type"),t.ɵɵadvance(3),t.ɵɵproperty("matColumnDef","details"),t.ɵɵadvance(6),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpureFunction0(34,G3))("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",t.ɵɵpureFunction0(35,G3)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.textSearchMode||!1===t.ɵɵpipeBind1(34,28,n.dataSource.isEmpty())),t.ɵɵadvance(6),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(40,30,"gateway.add-mapping")),t.ɵɵadvance(2),t.ɵɵclassProp("!hidden",!n.textSearchMode||!1===t.ɵɵpipeBind1(42,32,n.dataSource.isEmpty())))},dependencies:t.ɵɵgetComponentDepsFactory(e4,[j,_,qn]),encapsulation:2,changeDetection:d.OnPush})}}class t4 extends G{constructor(){super()}}class n4 extends Y2{mapConfigToFormValue({attributeUpdates:e=[],serverSideRpc:t=[],paths:n=[],...a}){return{parameters:{...a??{}},paths:tr.mapPathsToUpgradedVersion(n??[]),requestsMapping:this.getRequestDataArray({attributeUpdates:e,serverSideRpc:t})}}getMappedValue({requestsMapping:e,paths:t=[],parameters:n={}}){const{attributeUpdates:a=[],serverSideRpc:i=[]}=this.getRequestDataObject(e);return{...n,paths:tr.mapPathsToDowngradedVersion(t??[]),attributeUpdates:a,serverSideRpc:i}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(n4)))(n||n4)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:n4,selectors:[["tb-ftp-legacy-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>n4)),multi:!0},{provide:K,useExisting:c((()=>n4)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:13,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","parameters"],["formControlName","paths",3,"withReportStrategy"],["formControlName","requestsMapping"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-ftp-parameters-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-ftp-paths-table",4),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-tab",1),t.ɵɵpipe(11,"translate"),t.ɵɵelement(12,"tb-ftp-request-mapping-table",5),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.parameters"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.ftp.paths"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("withReportStrategy",n.withReportStrategy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(11,15,"gateway.requests-mapping")))},dependencies:t.ɵɵgetComponentDepsFactory(n4,[j,_,Q2,C3,e4]),encapsulation:2,changeDetection:d.OnPush})}}class a4 extends Y2{mapConfigToFormValue(e){return{parameters:e.parameters??{},paths:e.paths??[],requestsMapping:this.getRequestDataArray(e.requestsMapping)}}getMappedValue(e){return{parameters:e.parameters??{},paths:e.paths??[],requestsMapping:this.getRequestDataObject(e.requestsMapping??[])}}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(a4)))(n||a4)}})()}static{this.ɵcmp=t.ɵɵdefineComponent({type:a4,selectors:[["tb-ftp-basic-config"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>a4)),multi:!0},{provide:K,useExisting:c((()=>a4)),multi:!0}]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:13,vars:17,consts:[[3,"formGroup"],[3,"label"],[3,"ngTemplateOutlet"],["formControlName","parameters"],["formControlName","paths",3,"withReportStrategy"],["formControlName","requestsMapping"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-tab-group",0)(1,"mat-tab",1),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",1),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-ftp-parameters-config",3),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"mat-tab",1),t.ɵɵpipe(8,"translate"),t.ɵɵelement(9,"tb-ftp-paths-table",4),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"mat-tab",1),t.ɵɵpipe(11,"translate"),t.ɵɵelement(12,"tb-ftp-request-mapping-table",5),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,9,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.generalTabContent),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,11,"gateway.parameters"),"*"),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(8,13,"gateway.ftp.paths"),"*"),t.ɵɵadvance(2),t.ɵɵproperty("withReportStrategy",n.withReportStrategy),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(11,15,"gateway.requests-mapping")))},dependencies:t.ɵɵgetComponentDepsFactory(a4,[j,_,Q2,C3,e4]),encapsulation:2,changeDetection:d.OnPush})}}const i4=(e,t)=>({hasErrors:e,noErrors:t}),r4=()=>({minWidth:"144px",maxWidth:"144px",textAlign:"center"}),o4=()=>({minWidth:"144px",maxWidth:"144px",width:"144px",textAlign:"center"}),s4=e=>({"tb-current-entity":e});function l4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",32),t.ɵɵpipe(1,"translate"),t.ɵɵpipe(2,"async"),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.onAddConnector(n))})),t.ɵɵelementStart(3,"mat-icon"),t.ɵɵtext(4,"add"),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,2,"action.add")),t.ɵɵproperty("disabled",t.ɵɵpipeBind1(2,4,e.isLoading$))}}function p4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"section",33)(1,"button",34),t.ɵɵlistener("click",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.onAddConnector(n))})),t.ɵɵelementStart(2,"mat-icon",35),t.ɵɵtext(3,"add"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"span"),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()()}2&e&&(t.ɵɵadvance(5),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(6,1,"gateway.add-connector")))}function c4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",36),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.connectors-table-enabled")," "))}function d4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell")(1,"mat-slide-toggle",37),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return n.stopPropagation(),t.ɵɵresetView(i.onEnableConnector(a))})),t.ɵɵelementEnd()()}if(2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("checked",a.activeConnectors.includes(e.key))}}function u4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",38),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.connectors-table-name"),""))}function m4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",e.key," ")}}function h4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",39),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.connectors-table-type")," "))}function g4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",40),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",a.returnType(e)," ")}}function f4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",39),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.configuration")," "))}function y4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-cell",40)(1,"div",41),t.ɵɵtext(2),t.ɵɵelementEnd()()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵclassMap(a.isConnectorSynced(e)?"status-sync":"status-unsync"),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",a.isConnectorSynced(e)?"sync":"out of sync"," ")}}function v4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell",39),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.connectors-table-status")," "))}function b4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell",40)(1,"span",42),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.connectorLogs(a,n))})),t.ɵɵelementEnd()()}if(2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵclassMap(t.ɵɵpureFunction2(3,i4,+a.getErrorsCount(e)>0,0==+a.getErrorsCount(e)||""===a.getErrorsCount(e))),t.ɵɵpropertyInterpolate("matTooltip","Errors: "+a.getErrorsCount(e))}}function x4(e,n){1&e&&(t.ɵɵelementStart(0,"mat-header-cell"),t.ɵɵelement(1,"div",43),t.ɵɵelementStart(2,"div",44),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,r4)),t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(4,3,"gateway.connectors-table-actions")))}function w4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-cell")(1,"div",45)(2,"button",46),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.connectorRpc(a,n))})),t.ɵɵelementStart(3,"mat-icon"),t.ɵɵtext(4,"private_connectivity"),t.ɵɵelementEnd()(),t.ɵɵelementStart(5,"button",47),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.connectorLogs(a,n))})),t.ɵɵelementStart(6,"mat-icon"),t.ɵɵtext(7,"list"),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"button",48),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteConnector(a,n))})),t.ɵɵelementStart(9,"mat-icon"),t.ɵɵtext(10,"delete"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(11,"div",49)(12,"button",50),t.ɵɵlistener("click",(function(n){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.stopPropagation())})),t.ɵɵelementStart(13,"mat-icon",51),t.ɵɵtext(14,"more_vert"),t.ɵɵelementEnd()(),t.ɵɵelementStart(15,"mat-menu",52,1)(17,"button",46),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.connectorRpc(a,n))})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"private_connectivity"),t.ɵɵelementEnd()(),t.ɵɵelementStart(20,"button",47),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.connectorLogs(a,n))})),t.ɵɵelementStart(21,"mat-icon"),t.ɵɵtext(22,"list"),t.ɵɵelementEnd()(),t.ɵɵelementStart(23,"button",48),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.deleteConnector(a,n))})),t.ɵɵelementStart(24,"mat-icon"),t.ɵɵtext(25,"delete"),t.ɵɵelementEnd()()()()()}if(2&e){const e=n.$implicit,a=t.ɵɵreference(16);t.ɵɵadvance(),t.ɵɵstyleMap(t.ɵɵpureFunction0(5,o4)),t.ɵɵadvance(),t.ɵɵproperty("disabled",!e.value.configurationJson.id),t.ɵɵadvance(10),t.ɵɵproperty("matMenuTriggerFor",a),t.ɵɵadvance(5),t.ɵɵproperty("disabled",!e.value.configurationJson.id)}}function S4(e,n){1&e&&t.ɵɵelement(0,"mat-header-row",53)}function C4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-row",54),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).$implicit,i=t.ɵɵnextContext();return t.ɵɵresetView(i.selectConnector(n,a))})),t.ɵɵelementEnd()}if(2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵclassMap(t.ɵɵpureFunction1(2,s4,a.isSameConnector(e)))}}function _4(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",55),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵtextInterpolate1("v",e.connectorForm.get("configVersion").value,"")}}function T4(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-select",56)(1,"tb-toggle-option",57),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"tb-toggle-option",57),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("value",e.ConnectorConfigurationModes.BASIC),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,4,"gateway.basic")," "),t.ɵɵadvance(2),t.ɵɵproperty("value",e.ConnectorConfigurationModes.ADVANCED),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,6,"gateway.advanced")," ")}}function I4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-mqtt-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function E4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-mqtt-legacy-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function M4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,I4,2,4,"tb-mqtt-basic-config",64),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,E4,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.MQTT))("ngIfElse",e)}}function k4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-opc-ua-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function P4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-opc-ua-legacy-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function D4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,k4,2,4,"tb-opc-ua-basic-config",64),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,P4,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.OPCUA))("ngIfElse",e)}}function O4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-modbus-basic-config",67),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){t.ɵɵnextContext(4);const e=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",e)}}function A4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-modbus-legacy-basic-config",67),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){t.ɵɵnextContext(4);const e=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",e)}}function F4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,O4,1,1,"tb-modbus-basic-config",66),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,A4,1,1,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.MODBUS))("ngIfElse",e)}}function R4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-socket-basic-config",67),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){t.ɵɵnextContext(4);const e=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",e)}}function B4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-socket-legacy-basic-config",67),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){t.ɵɵnextContext(4);const e=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",e)}}function N4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,R4,1,1,"tb-socket-basic-config",66),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,B4,1,1,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.SOCKET))("ngIfElse",e)}}function L4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-bacnet-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function V4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-bacnet-legacy-basic-config",65),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function q4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,L4,2,4,"tb-bacnet-basic-config",64),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,V4,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.BACNET))("ngIfElse",e)}}function G4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-rest-basic-config",69),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function z4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-rest-legacy-basic-config",69),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function U4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,G4,2,4,"tb-rest-basic-config",68),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,z4,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.REST))("ngIfElse",e)}}function j4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-ftp-basic-config",69),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function H4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-ftp-legacy-basic-config",69),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(4);return t.ɵɵresetView(n.basicConfigInitSubject.next())})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext(4),n=t.ɵɵreference(41);t.ɵɵproperty("generalTabContent",n)("withReportStrategy",t.ɵɵpipeBind1(1,2,e.connectorForm.get("configVersion").value))}}function W4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,j4,2,4,"tb-ftp-basic-config",68),t.ɵɵpipe(2,"isLatestVersionConfig"),t.ɵɵtemplate(3,H4,2,4,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵelementContainerEnd()),2&e){const e=t.ɵɵreference(4),n=t.ɵɵnextContext(3);t.ɵɵadvance(),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(2,2,n.connectorForm.get("configVersion").value,n.ConnectorType.FTP))("ngIfElse",e)}}function $4(e,n){if(1&e&&(t.ɵɵelementContainerStart(0)(1,62),t.ɵɵtemplate(2,M4,5,5,"ng-container",63)(3,D4,5,5,"ng-container",63)(4,F4,5,5,"ng-container",63)(5,N4,5,5,"ng-container",63)(6,q4,5,5,"ng-container",63)(7,U4,5,5,"ng-container",63)(8,W4,5,5,"ng-container",63),t.ɵɵelementContainerEnd()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵproperty("ngSwitch",e.initialConnector.type),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.MQTT),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.OPCUA),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.MODBUS),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.SOCKET),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.BACNET),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.REST),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",e.ConnectorType.FTP)}}function K4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-tab-group")(1,"mat-tab",70),t.ɵɵpipe(2,"translate"),t.ɵɵelementContainer(3,71),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-tab",70),t.ɵɵpipe(5,"translate"),t.ɵɵelement(6,"tb-json-object-edit",72),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()),2&e){t.ɵɵnextContext(2);const e=t.ɵɵreference(41);t.ɵɵadvance(),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,6,"gateway.general")),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",e),t.ɵɵadvance(),t.ɵɵpropertyInterpolate1("label","",t.ɵɵpipeBind1(5,8,"gateway.configuration"),"*"),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(7,10,"gateway.configuration")),t.ɵɵproperty("fillHeight",!0)}}function Y4(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"section",58),t.ɵɵtemplate(1,$4,9,8,"ng-container",59)(2,K4,8,12,"ng-template",null,2,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(4,"div",60)(5,"button",61),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.onSaveConnector())})),t.ɵɵtext(6),t.ɵɵpipe(7,"translate"),t.ɵɵelementEnd()()()}if(2&e){let e;const n=t.ɵɵreference(3),a=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵproperty("ngIf",(null==(e=a.connectorForm.get("mode"))?null:e.value)===a.ConnectorConfigurationModes.BASIC)("ngIfElse",n),t.ɵɵadvance(4),t.ɵɵproperty("disabled",!a.connectorForm.dirty||a.connectorForm.invalid),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(7,4,"action.save")," ")}}function X4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-icon",89),t.ɵɵpipe(1,"translate"),t.ɵɵtext(2," warning "),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("matTooltip",t.ɵɵpipeBind1(1,1,e.connectorForm.get("name").hasError("duplicateName")?"gateway.connector-duplicate-name":"gateway.name-required"))}}function Z4(e,n){1&e&&(t.ɵɵelementStart(0,"div",74)(1,"div",85),t.ɵɵtext(2,"gateway.connectors-table-class"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",76)(4,"mat-form-field",77),t.ɵɵelement(5,"input",90),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,1,"gateway.set")))}function Q4(e,n){1&e&&(t.ɵɵelementStart(0,"div",74)(1,"div",85),t.ɵɵtext(2,"gateway.connectors-table-key"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",76)(4,"mat-form-field",77),t.ɵɵelement(5,"input",91),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(6,1,"gateway.set")))}function J4(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",57),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function e5(e,n){1&e&&(t.ɵɵelementStart(0,"div",74)(1,"mat-slide-toggle",92)(2,"mat-label",93),t.ɵɵpipe(3,"translate"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,2,"gateway.send-change-data-hint")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(5,4,"gateway.send-change-data")," "))}function t5(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",94),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("isExpansionMode",!0)("defaultValue",e.ReportStrategyDefaultValue.Connector)}}function n5(e,n){if(1&e&&(t.ɵɵelementStart(0,"section",73)(1,"div",74)(2,"div",75),t.ɵɵtext(3,"gateway.name"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",76)(5,"mat-form-field",77),t.ɵɵelement(6,"input",78),t.ɵɵpipe(7,"translate"),t.ɵɵtemplate(8,X4,3,3,"mat-icon",79),t.ɵɵelementEnd()()(),t.ɵɵtemplate(9,Z4,7,3,"div",80)(10,Q4,7,3,"div",80),t.ɵɵelementStart(11,"div",81)(12,"div",82),t.ɵɵtext(13,"gateway.logs-configuration"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"div",83)(15,"mat-slide-toggle",84)(16,"mat-label"),t.ɵɵtext(17),t.ɵɵpipe(18,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(19,"div",74)(20,"div",85),t.ɵɵtext(21,"gateway.remote-logging-level"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"div",76)(23,"mat-form-field",77)(24,"mat-select",86),t.ɵɵtemplate(25,J4,2,2,"mat-option",87),t.ɵɵelementEnd()()()()(),t.ɵɵtemplate(26,e5,6,6,"div",80),t.ɵɵpipe(27,"withReportStrategy"),t.ɵɵtemplate(28,t5,1,2,"tb-report-strategy",88),t.ɵɵpipe(29,"withReportStrategy"),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("formGroup",e.connectorForm),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("placeholder",t.ɵɵpipeBind1(7,9,"gateway.set")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.connectorForm.get("name").hasError("required")&&e.connectorForm.get("name").touched||e.connectorForm.get("name").hasError("duplicateName")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.connectorForm.get("type").value===e.ConnectorType.CUSTOM),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.connectorForm.get("type").value===e.ConnectorType.GRPC),t.ɵɵadvance(7),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(18,11,"gateway.enable-remote-logging")," "),t.ɵɵadvance(8),t.ɵɵproperty("ngForOf",e.gatewayLogLevel),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.connectorForm.get("type").value===e.ConnectorType.MQTT&&!t.ɵɵpipeBind2(27,13,e.connectorForm.get("configVersion").value,e.ConnectorType.MQTT)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",t.ɵɵpipeBind2(29,16,e.connectorForm.get("configVersion").value,e.connectorForm.get("type").value))}}class a5{isErrorState(e){return e&&e.invalid}}e("ForceErrorStateMatcher",a5);class i5 extends q{constructor(e,t,n,a,i,r,o,s,l,p,c){super(e),this.store=e,this.fb=t,this.translate=n,this.attributeService=a,this.dialogService=i,this.dialog=r,this.telemetryWsService=o,this.zone=s,this.utils=l,this.withReportStrategy=p,this.cd=c,this.ConnectorType=ct,this.allowBasicConfig=new Set([ct.MQTT,ct.OPCUA,ct.MODBUS,ct.SOCKET,ct.BACNET,ct.REST,ct.FTP]),this.gatewayLogLevel=Object.values(lt),this.displayedColumns=["enabled","key","type","syncStatus","errors","actions"],this.GatewayConnectorTypesTranslatesMap=dt,this.ConnectorConfigurationModes=Qt,this.ReportStrategyDefaultValue=en,this.basicConfigInitSubject=new te,this.activeData=[],this.inactiveData=[],this.sharedAttributeData=[],this.subscriptionOptions={callbacks:{onDataUpdated:()=>this.ctx.ngZone.run((()=>{this.onErrorsUpdated()})),onDataUpdateError:(e,t)=>this.ctx.ngZone.run((()=>{this.onDataUpdateError(t)}))}},this.destroy$=new te,this.attributeUpdateSubject=new te,this.initDataSources(),this.initConnectorForm(),this.observeAttributeChange()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=this.getSortingDataAccessor(),this.ctx.$scope.gatewayConnectors=this,this.loadConnectors(),this.loadGatewayState(),this.observeModeChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),super.ngOnDestroy()}onSaveConnector(){this.saveConnector(this.getUpdatedConnectorData(this.connectorForm.value),!1)}saveConnector(e,t=!0){const n=t||this.activeConnectors.includes(this.initialConnector.name)?D.SHARED_SCOPE:D.SERVER_SCOPE;oe(this.getEntityAttributeTasks(e,n)).pipe(ye(1)).subscribe((n=>{this.showToast(t?this.translate.instant("gateway.connector-created"):this.translate.instant("gateway.connector-updated")),this.initialConnector=e,this.updateData(!0),this.connectorForm.markAsPristine()}))}getEntityAttributeTasks(e,t){const n=[],a=[{key:e.name,value:e}],i=[],r=!this.activeConnectors.includes(e.name)&&t===D.SHARED_SCOPE||!this.inactiveConnectors.includes(e.name)&&t===D.SERVER_SCOPE,o=this.initialConnector&&this.initialConnector.name!==e.name;return o&&(i.push({key:this.initialConnector.name}),this.removeConnectorFromList(this.initialConnector.name,!0),this.removeConnectorFromList(this.initialConnector.name,!1)),r&&(t===D.SHARED_SCOPE?this.activeConnectors.push(e.name):this.inactiveConnectors.push(e.name)),(o||r)&&n.push(this.getSaveEntityAttributesTask(t)),n.push(this.attributeService.saveEntityAttributes(this.device,t,a)),i.length&&n.push(this.attributeService.deleteEntityAttributes(this.device,t,i)),n}getSaveEntityAttributesTask(e){const t=e===D.SHARED_SCOPE?"active_connectors":"inactive_connectors",n=e===D.SHARED_SCOPE?this.activeConnectors:this.inactiveConnectors;return this.attributeService.saveEntityAttributes(this.device,e,[{key:t,value:n}])}removeConnectorFromList(e,t){const n=t?this.activeConnectors:this.inactiveConnectors,a=n.indexOf(e);-1!==a&&n.splice(a,1)}getUpdatedConnectorData(e){const t={...e};return t.configuration=`${Be(t.name)}.json`,delete t.basicConfig,t.type!==ct.GRPC&&delete t.key,t.type!==ct.CUSTOM&&delete t.class,this.allowBasicConfig.has(t.type)||delete t.mode,this.withReportStrategy.transform(t.configVersion,t.type)&&(t.configurationJson.reportStrategy=t.reportStrategy,Ae(t.reportStrategy)&&delete t.reportStrategy,Ae(t.configurationJson.reportStrategy)&&delete t.configurationJson.reportStrategy),this.gatewayVersion&&!t.configVersion&&(t.configVersion=this.gatewayVersion),t.ts=Date.now(),t}updateData(e=!1){this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=w[this.sort.direction.toUpperCase()],this.attributeDataSource.loadAttributes(this.device,D.CLIENT_SCOPE,this.pageLink,e).subscribe((e=>{this.activeData=e.data.filter((e=>this.activeConnectors.includes(e.key))),this.combineData(),this.generateSubscription(),this.setClientData(e)})),this.inactiveConnectorsDataSource.loadAttributes(this.device,D.SHARED_SCOPE,this.pageLink,e).subscribe((e=>{this.sharedAttributeData=e.data.filter((e=>this.activeConnectors.includes(e.key))),this.combineData()})),this.serverDataSource.loadAttributes(this.device,D.SERVER_SCOPE,this.pageLink,e).subscribe((e=>{this.inactiveData=e.data.filter((e=>this.inactiveConnectors.includes(e.key))),this.combineData()}))}isConnectorSynced(e){const t=e.value;if(!t.ts||e.skipSync||!this.isGatewayActive)return!1;if(-1===this.activeData.findIndex((e=>("string"==typeof e.value?JSON.parse(e.value):e.value).name===t.name)))return!1;return-1!==this.sharedAttributeData.findIndex((e=>{const n=e.value,a=n.name===t.name,i=Se(n.configurationJson,{})&&a,r=this.hasSameConfig(n.configurationJson,t.configurationJson),o=n.ts&&n.ts<=t.ts;return a&&o&&(r||i)}))}hasSameConfig(e,t){const{name:n,id:a,enableRemoteLogging:i,logLevel:r,reportStrategy:o,configVersion:s,...l}=e,{name:p,id:c,enableRemoteLogging:d,logLevel:u,reportStrategy:m,configVersion:h,...g}=t;return Se(l,g)}combineData(){const e=[...this.activeData,...this.inactiveData,...this.sharedAttributeData].reduce(((e,t)=>{const n=e.findIndex((e=>e.key===t.key));return-1===n?e.push(t):t.lastUpdateTs>e[n].lastUpdateTs&&!this.isConnectorSynced(e[n])&&(e[n]={...t,skipSync:!0}),e}),[]);this.dataSource.data=e.map((e=>({...e,value:"string"==typeof e.value?JSON.parse(e.value):e.value})))}clearOutConnectorForm(){this.initialConnector=null,this.connectorForm.setValue({mode:Qt.BASIC,name:"",type:ct.MQTT,sendDataOnlyOnChange:!1,enableRemoteLogging:!1,logLevel:lt.INFO,key:"auto",class:"",configuration:"",configurationJson:{},basicConfig:{},configVersion:"",reportStrategy:[{value:{},disabled:!0}]},{emitEvent:!1}),this.connectorForm.markAsPristine()}selectConnector(e,t){e&&e.stopPropagation();const n=t.value;n?.name!==this.initialConnector?.name&&this.confirmConnectorChange().subscribe((e=>{e&&this.setFormValue(n)}))}isSameConnector(e){if(!this.initialConnector)return!1;const t=e.value;return this.initialConnector.name===t.name}showToast(e){this.store.dispatch({type:"[Notification] Show",notification:{message:e,type:"success",duration:1e3,verticalPosition:"top",horizontalPosition:"left",target:"dashboardRoot",forceDismiss:!0}})}returnType(e){const t=e.value;return this.GatewayConnectorTypesTranslatesMap.get(t.type)}deleteConnector(e,t){t?.stopPropagation();const n=`Delete connector "${e.key}"?`;this.dialogService.confirm(n,"All connector data will be deleted.","Cancel","Delete").pipe(ye(1),be((t=>{if(!t)return;const n=[],a=this.activeConnectors.includes(e.value?.name)?D.SHARED_SCOPE:D.SERVER_SCOPE;return n.push(this.attributeService.deleteEntityAttributes(this.device,a,[e])),this.removeConnectorFromList(e.key,!0),this.removeConnectorFromList(e.key,!1),n.push(this.getSaveEntityAttributesTask(a)),oe(n)}))).subscribe((()=>{this.initialConnector&&this.initialConnector.name!==e.key||(this.clearOutConnectorForm(),this.cd.detectChanges()),this.updateData(!0)}))}connectorLogs(e,t){t&&t.stopPropagation();const n=Oe(this.ctx.stateController.getStateParams());n.connector_logs=e,n.targetEntityParamName="connector_logs",this.ctx.stateController.openState("connector_logs",n)}connectorRpc(e,t){t&&t.stopPropagation();const n=Oe(this.ctx.stateController.getStateParams());n.connector_rpc=e,n.targetEntityParamName="connector_rpc",this.ctx.stateController.openState("connector_rpc",n)}onEnableConnector(e){e.value.ts=(new Date).getTime(),this.updateActiveConnectorKeys(e.key),this.attributeUpdateSubject.next(e)}getErrorsCount(e){const t=e.key,n=this.subscription&&this.subscription.data.find((e=>e&&e.dataKey.name===`${t}_ERRORS_COUNT`));return n&&this.activeConnectors.includes(t)?n.data[0][1]||0:"Inactive"}onAddConnector(e){e?.stopPropagation(),this.confirmConnectorChange().pipe(ye(1),ue(Boolean),be((()=>this.openAddConnectorDialog())),ue(Boolean)).subscribe((e=>this.addConnector(e)))}addConnector(e){e.configurationJson||(e.configurationJson={}),this.gatewayVersion&&!e.configVersion&&(e.configVersion=this.gatewayVersion),e.basicConfig=e.configurationJson,this.initialConnector=e;const t=this.connectorForm.get("type").value;this.setInitialConnectorValues(e),this.saveConnector(this.getUpdatedConnectorData(e)),t!==e.type&&this.allowBasicConfig.has(e.type)?this.basicConfigInitSubject.pipe(ye(1)).subscribe((()=>{this.patchConnectorBasicConfig(e.basicConfig)})):this.patchConnectorBasicConfig(e.basicConfig)}setInitialConnectorValues(e){const{basicConfig:t,mode:n,enableRemoteLogging:a,...i}=e;this.toggleReportStrategy(e),this.connectorForm.get("mode").setValue(this.allowBasicConfig.has(e.type)?e.mode??Qt.BASIC:null,{emitEvent:!1}),this.connectorForm.get("enableRemoteLogging").setValue(a,{emitEvent:!1}),this.connectorForm.patchValue(i,{emitEvent:!1})}openAddConnectorDialog(){return this.ctx.ngZone.run((()=>this.dialog.open(S$,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dataSourceData:this.dataSource.data,gatewayVersion:this.gatewayVersion}}).afterClosed()))}uniqNameRequired(){return e=>{const t=e.value?.trim().toLowerCase(),n=this.dataSource.data.some((e=>e.value.name.toLowerCase()===t)),a=this.initialConnector?.name.toLowerCase()===t;return n&&!a?{duplicateName:{valid:!1}}:null}}initDataSources(){const e={property:"key",direction:w.ASC};this.pageLink=new S(1e3,0,null,e),this.attributeDataSource=new zn(this.attributeService,this.telemetryWsService,this.zone,this.translate),this.inactiveConnectorsDataSource=new zn(this.attributeService,this.telemetryWsService,this.zone,this.translate),this.serverDataSource=new zn(this.attributeService,this.telemetryWsService,this.zone,this.translate),this.dataSource=new b([])}initConnectorForm(){this.connectorForm=this.fb.group({mode:[Qt.BASIC],name:["",[$.required,this.uniqNameRequired(),$.pattern(an)]],type:["",[$.required]],enableRemoteLogging:[!1],logLevel:["",[$.required]],sendDataOnlyOnChange:[!1],key:["auto"],class:[""],configuration:[""],configurationJson:[{},[$.required]],basicConfig:[{}],configVersion:[""],reportStrategy:[{value:{},disabled:!0}]})}getSortingDataAccessor(){return(e,t)=>{switch(t){case"syncStatus":return this.isConnectorSynced(e)?1:0;case"enabled":return this.activeConnectors.includes(e.key)?1:0;case"errors":const n=this.getErrorsCount(e);return"string"==typeof n?this.sort.direction.toUpperCase()===w.DESC?-1:1/0:n;default:return e[t]||e.value[t]}}}loadConnectors(){this.device&&this.device.id!==B&&oe([this.attributeService.getEntityAttributes(this.device,D.SHARED_SCOPE,["active_connectors"]),this.attributeService.getEntityAttributes(this.device,D.SERVER_SCOPE,["inactive_connectors"]),this.attributeService.getEntityAttributes(this.device,D.CLIENT_SCOPE,["Version"])]).pipe(le(this.destroy$)).subscribe((e=>{this.activeConnectors=this.parseConnectors(e[0]),this.inactiveConnectors=this.parseConnectors(e[1]),this.gatewayVersion=e[2][0]?.value,this.updateData(!0)}))}loadGatewayState(){this.attributeService.getEntityAttributes(this.device,D.SERVER_SCOPE).pipe(le(this.destroy$)).subscribe((e=>{const t=e.find((e=>"active"===e.key)).value,n=e.find((e=>"lastDisconnectTime"===e.key))?.value,a=e.find((e=>"lastConnectTime"===e.key))?.value;this.isGatewayActive=this.getGatewayStatus(t,a,n)}))}parseConnectors(e){const t=e?.[0]?.value||[];return Me(t)?JSON.parse(t):t}observeModeChange(){this.connectorForm.get("mode").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{e===Qt.BASIC&&this.patchConnectorBasicConfig(this.connectorForm.get("configurationJson").value)}))}observeAttributeChange(){this.attributeUpdateSubject.pipe(de(300),me((e=>this.executeAttributeUpdates(e))),le(this.destroy$)).subscribe()}updateActiveConnectorKeys(e){if(this.activeConnectors.includes(e)){const t=this.activeConnectors.indexOf(e);-1!==t&&this.activeConnectors.splice(t,1),this.inactiveConnectors.push(e)}else{const t=this.inactiveConnectors.indexOf(e);-1!==t&&this.inactiveConnectors.splice(t,1),this.activeConnectors.push(e)}}executeAttributeUpdates(e){oe(this.getAttributeExecutionTasks(e)).pipe(ye(1),me((()=>this.updateData(!0))),le(this.destroy$)).subscribe()}getAttributeExecutionTasks(e){const t=this.activeConnectors.includes(e.key),n=t?D.SERVER_SCOPE:D.SHARED_SCOPE,a=t?D.SHARED_SCOPE:D.SERVER_SCOPE;return[this.attributeService.saveEntityAttributes(this.device,D.SHARED_SCOPE,[{key:"active_connectors",value:this.activeConnectors}]),this.attributeService.saveEntityAttributes(this.device,D.SERVER_SCOPE,[{key:"inactive_connectors",value:this.inactiveConnectors}]),this.attributeService.deleteEntityAttributes(this.device,n,[e]),this.attributeService.saveEntityAttributes(this.device,a,[e])]}onDataUpdateError(e){const t=this.utils.parseException(e);let n=t.name;t.message&&(n+=": "+t.message),console.error(n)}onErrorsUpdated(){this.cd.detectChanges()}onDataUpdated(){const e=this.ctx.defaultSubscription.data,t=e.find((e=>"active"===e.dataKey.name)).data[0][1],n=e.find((e=>"lastDisconnectTime"===e.dataKey.name)).data[0][1],a=e.find((e=>"lastConnectTime"===e.dataKey.name)).data[0][1];this.isGatewayActive=this.getGatewayStatus(t,a,n),this.cd.detectChanges()}getGatewayStatus(e,t,n){return!!e&&(!n||t>n)}generateSubscription(){if(this.subscription&&this.subscription.unsubscribe(),this.device){const e=[{type:N.entity,entityType:L.DEVICE,entityId:this.device.id,entityName:"Gateway",timeseries:[]}];this.dataSource.data.forEach((t=>{e[0].timeseries.push({name:`${t.key}_ERRORS_COUNT`,label:`${t.key}_ERRORS_COUNT`})})),this.ctx.subscriptionApi.createSubscriptionFromInfo(R.latest,e,this.subscriptionOptions,!1,!0).subscribe((e=>{this.subscription=e}))}}createBasicConfigWatcher(){this.basicConfigSub&&this.basicConfigSub.unsubscribe(),this.basicConfigSub=this.connectorForm.get("basicConfig").valueChanges.pipe(ue((()=>!!this.initialConnector)),le(this.destroy$)).subscribe((e=>{const t=this.connectorForm.get("configurationJson"),n=this.connectorForm.get("type").value,a=this.connectorForm.get("mode").value;if(!Se(e,t?.value)&&this.allowBasicConfig.has(n)&&a===Qt.BASIC){const n={...t.value,...e};this.connectorForm.get("configurationJson").patchValue(n,{emitEvent:!1})}}))}createJsonConfigWatcher(){this.jsonConfigSub&&this.jsonConfigSub.unsubscribe(),this.jsonConfigSub=this.connectorForm.get("configurationJson").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{const t=this.connectorForm.get("basicConfig"),n=this.connectorForm.get("type").value,a=this.connectorForm.get("mode").value;!Se(e,t?.value)&&this.allowBasicConfig.has(n)&&a===Qt.ADVANCED&&this.connectorForm.get("basicConfig").patchValue(e,{emitEvent:!1})}))}confirmConnectorChange(){return this.initialConnector&&this.connectorForm.dirty?this.dialogService.confirm(this.translate.instant("gateway.change-connector-title"),this.translate.instant("gateway.change-connector-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0):ie(!0)}setFormValue(e){this.connectorForm.disabled&&this.connectorForm.enable();const t=Yi.getConfig({configuration:"",key:"auto",configurationJson:{},...e},this.gatewayVersion);this.gatewayVersion&&!t.configVersion&&(t.configVersion=this.gatewayVersion),t.basicConfig=t.configurationJson,this.initialConnector=t,this.updateConnector(t)}updateConnector(e){this.jsonConfigSub?.unsubscribe(),this.allowBasicConfig.has(e.type)?this.updateBasicConfigConnector(e):(this.setInitialConnectorValues(e),this.connectorForm.markAsPristine(),this.createJsonConfigWatcher())}updateBasicConfigConnector(e){this.basicConfigSub?.unsubscribe();const t=this.connectorForm.get("type").value;this.setInitialConnectorValues(e),t!==e.type&&this.allowBasicConfig.has(e.type)&&e.mode!==Qt.ADVANCED?this.basicConfigInitSubject.asObservable().pipe(ye(1)).subscribe((()=>{this.patchConnectorBasicConfig(e.basicConfig)})):this.patchConnectorBasicConfig(e.basicConfig)}patchConnectorBasicConfig(e){this.connectorForm.get("basicConfig").patchValue(e,{emitEvent:!1}),this.connectorForm.markAsPristine(),this.createBasicConfigWatcher(),this.createJsonConfigWatcher()}toggleReportStrategy(e){const t=this.connectorForm.get("reportStrategy"),n=this.connectorForm.get("sendDataOnlyOnChange");this.connectorForm.get("reportStrategy").reset(e.reportStrategy,{emitEvent:!1}),this.withReportStrategy.transform(e.configVersion,e.type)?(t.enable({emitEvent:!1}),n.disable({emitEvent:!1})):(t.disable({emitEvent:!1}),e.type===ct.MQTT&&n.enable({emitEvent:!1}))}setClientData(e){if(this.initialConnector){const t=e.data.find((e=>e.key===this.initialConnector.name));t&&(t.value="string"==typeof t.value?JSON.parse(t.value):t.value,this.isConnectorSynced(t)&&t.value.configurationJson&&this.setFormValue({...t.value,mode:this.connectorForm.get("mode").value??t.value.mode}))}}static{this.ɵfac=function(e){return new(e||i5)(t.ɵɵdirectiveInject(Ye.Store),t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(He.TranslateService),t.ɵɵdirectiveInject(_e.AttributeService),t.ɵɵdirectiveInject(_e.DialogService),t.ɵɵdirectiveInject(qe.MatDialog),t.ɵɵdirectiveInject(_e.TelemetryWebsocketService),t.ɵɵdirectiveInject(t.NgZone),t.ɵɵdirectiveInject(_e.UtilsService),t.ɵɵdirectiveInject(nr),t.ɵɵdirectiveInject(t.ChangeDetectorRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:i5,selectors:[["tb-gateway-connector"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(v,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.sort=e.first)}},inputs:{ctx:"ctx",device:"device"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:ot,useClass:a5},nr]),t.ɵɵInheritDefinitionFeature,t.ɵɵStandaloneFeature],decls:42,vars:21,consts:[["generalTabContent",""],["cellActionsMenu","matMenu"],["defaultConfig",""],["legacy",""],[1,"connector-container","tb-form-panel","no-border"],[1,"table-section","tb-form-panel","no-padding","section-container","flex"],[1,"mat-mdc-table-toolbar","justify-between"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],[1,"table-container"],["class","mat-headline-5 tb-absolute-fill tb-add-new items-center justify-center",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","enabled","sticky",""],["style","width: 60px;min-width: 60px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","key"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-sort-header","","style","width: 30%",4,"matHeaderCellDef"],["style","text-transform: uppercase",4,"matCellDef"],["matColumnDef","syncStatus"],["matColumnDef","errors"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",3,"class","click",4,"matRowDef","matRowDefColumns"],[1,"tb-form-panel","section-container","flex",3,"formGroup"],[1,"tb-form-panel-title","tb-flex","no-flex","space-between","align-center"],[1,"tb-form-panel-title"],["class","version-placeholder",4,"ngIf"],["formControlName","mode","appearance","fill",4,"ngIf"],["translate","",1,"no-data-found","items-center","justify-center"],["class","tb-form-panel section-container no-border no-padding tb-flex space-between",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],[1,"mat-headline-5","tb-absolute-fill","tb-add-new","items-center","justify-center"],["mat-button","",1,"connector",3,"click"],[1,"tb-mat-96"],[2,"width","60px","min-width","60px"],[3,"click","checked"],["mat-sort-header","",2,"width","40%"],["mat-sort-header","",2,"width","30%"],[2,"text-transform","uppercase"],[1,"status"],["matTooltipPosition","above",1,"dot",3,"click","matTooltip"],[1,"gt-md:!hidden",2,"width","48px","min-width","48px","max-width","48px"],[1,"lt-lg:!hidden"],[1,"lt-md:!hidden","flex-row","justify-end"],["mat-icon-button","","matTooltip","RPC","matTooltipPosition","above",3,"click","disabled"],["mat-icon-button","","matTooltip","Logs","matTooltipPosition","above",3,"click"],["mat-icon-button","","matTooltip","Delete connector","matTooltipPosition","above",3,"click"],[1,"gt-sm:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],["xPosition","before"],[1,"mat-row-select"],[1,"mat-row-select",3,"click"],[1,"version-placeholder"],["formControlName","mode","appearance","fill"],[3,"value"],[1,"tb-form-panel","section-container","no-border","no-padding","tb-flex","space-between"],[4,"ngIf","ngIfElse"],[1,"flex","justify-end"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","basicConfig",3,"generalTabContent","withReportStrategy","initialized",4,"ngIf","ngIfElse"],["formControlName","basicConfig",3,"initialized","generalTabContent","withReportStrategy"],["formControlName","basicConfig",3,"generalTabContent","initialized",4,"ngIf","ngIfElse"],["formControlName","basicConfig",3,"initialized","generalTabContent"],["class","h-full","formControlName","basicConfig",3,"generalTabContent","withReportStrategy","initialized",4,"ngIf","ngIfElse"],["formControlName","basicConfig",1,"h-full",3,"initialized","generalTabContent","withReportStrategy"],[3,"label"],[3,"ngTemplateOutlet"],["jsonRequired","","formControlName","configurationJson",1,"configuration-json",3,"fillHeight","label"],[1,"tb-form-panel","no-border","no-padding","padding-top","section-container","flex",3,"formGroup"],[1,"tb-form-row","column-xs"],["translate","",1,"fixed-title-width","tb-required"],[1,"tb-flex","no-gap"],["appearance","outline","subscriptSizing","dynamic",1,"tb-flex","no-gap"],["matInput","","autocomplete","off","name","value","formControlName","name",3,"placeholder"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["class","tb-form-row column-xs",4,"ngIf"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row"],["formControlName","enableRemoteLogging",1,"mat-slide"],["translate","",1,"fixed-title-width"],["formControlName","logLevel"],[3,"value",4,"ngFor","ngForOf"],["class","stroked tb-form-panel","formControlName","reportStrategy",3,"isExpansionMode","defaultValue",4,"ngIf"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["matInput","","name","value","formControlName","class",3,"placeholder"],["matInput","","name","value","formControlName","key",3,"placeholder"],["formControlName","sendDataOnlyOnChange",1,"mat-slide"],[3,"tb-hint-tooltip-icon"],["formControlName","reportStrategy",1,"stroked","tb-form-panel",3,"isExpansionMode","defaultValue"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",4)(1,"section",5)(2,"mat-toolbar",6)(3,"h2"),t.ɵɵtext(4),t.ɵɵpipe(5,"translate"),t.ɵɵelementEnd(),t.ɵɵtemplate(6,l4,5,6,"button",7),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",8),t.ɵɵtemplate(8,p4,7,3,"section",9),t.ɵɵelementStart(9,"table",10),t.ɵɵelementContainerStart(10,11),t.ɵɵtemplate(11,c4,3,3,"mat-header-cell",12)(12,d4,2,1,"mat-cell",13),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(13,14),t.ɵɵtemplate(14,u4,3,3,"mat-header-cell",15)(15,m4,2,1,"mat-cell",13),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(16,16),t.ɵɵtemplate(17,h4,3,3,"mat-header-cell",17)(18,g4,2,1,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(19,19),t.ɵɵtemplate(20,f4,3,3,"mat-header-cell",17)(21,y4,3,3,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(22,20),t.ɵɵtemplate(23,v4,3,3,"mat-header-cell",17)(24,b4,2,6,"mat-cell",18),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(25,21),t.ɵɵtemplate(26,x4,5,6,"mat-header-cell",22)(27,w4,26,6,"mat-cell",13),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(28,S4,1,0,"mat-header-row",23)(29,C4,1,4,"mat-row",24),t.ɵɵelementEnd()()(),t.ɵɵelementStart(30,"section",25)(31,"div",26)(32,"div",27),t.ɵɵtext(33),t.ɵɵpipe(34,"translate"),t.ɵɵtemplate(35,_4,2,1,"span",28),t.ɵɵelementEnd(),t.ɵɵtemplate(36,T4,7,8,"tb-toggle-select",29),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"span",30),t.ɵɵtext(38," gateway.select-connector "),t.ɵɵelementEnd(),t.ɵɵtemplate(39,Y4,8,6,"section",31),t.ɵɵelementEnd()(),t.ɵɵtemplate(40,n5,30,19,"ng-template",null,0,t.ɵɵtemplateRefExtractor)),2&e&&(t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,17,"gateway.connectors")),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!(null!=n.dataSource&&(null!=n.dataSource.data&&n.dataSource.data.length))),t.ɵɵadvance(),t.ɵɵproperty("dataSource",n.dataSource)("matSortActive",n.pageLink.sortOrder.property)("matSortDirection",n.pageLink.sortDirection()),t.ɵɵadvance(19),t.ɵɵproperty("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.ɵɵadvance(),t.ɵɵproperty("matRowDefColumns",n.displayedColumns),t.ɵɵadvance(),t.ɵɵproperty("formGroup",n.connectorForm),t.ɵɵadvance(3),t.ɵɵtextInterpolate2(" ",null!=n.initialConnector&&n.initialConnector.type?n.GatewayConnectorTypesTranslatesMap.get(n.initialConnector.type):""," ",t.ɵɵpipeBind1(34,19,"gateway.configuration")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.connectorForm.get("configVersion").value),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.initialConnector&&n.allowBasicConfig.has(n.initialConnector.type)),t.ɵɵadvance(),t.ɵɵclassProp("!hidden",n.initialConnector),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.initialConnector))},dependencies:t.ɵɵgetComponentDepsFactory(i5,[j,_,nr,u$,hX,gX,iX,aX,EQ,MQ,NJ,LJ,Xn,R1,B1,K2,$2,a4,n4]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block;overflow-x:auto;padding:0}[_nghost-%COMP%]   .version-placeholder[_ngcontent-%COMP%]{color:gray;font-size:12px}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]{height:100%;width:100%;flex-direction:row}@media screen and (max-width: 1279px){[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:not(.table-section){max-width:unset}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:not(.table-section){max-width:50%}}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]{min-height:35vh;overflow:hidden}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .connector-container[_ngcontent-%COMP%]   .section-container[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:transparent;color:#000000de!important}[_nghost-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{margin:0 8px}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{text-align:center;border-radius:16px;font-weight:500;width:fit-content;padding:5px 15px}[_nghost-%COMP%]   .status-sync[_ngcontent-%COMP%]{background:#1980380f;color:#198038}[_nghost-%COMP%]   .status-unsync[_ngcontent-%COMP%]{background:#cb25300f;color:#cb2530}[_nghost-%COMP%]   mat-row[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .dot[_ngcontent-%COMP%]{height:12px;width:12px;background-color:#bbb;border-radius:50%;display:inline-block}[_nghost-%COMP%]   .hasErrors[_ngcontent-%COMP%]{background-color:#cb2530}[_nghost-%COMP%]   .noErrors[_ngcontent-%COMP%]{background-color:#198038}[_nghost-%COMP%]     .connector-container .mat-mdc-tab-group, [_nghost-%COMP%]     .connector-container .mat-mdc-tab-body-wrapper{height:100%}[_nghost-%COMP%]     .connector-container .mat-mdc-tab-body.mat-mdc-tab-body-active{position:absolute}[_nghost-%COMP%]     .connector-container .tb-form-row .fixed-title-width{min-width:120px;width:30%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .connector-container .tb-add-new{display:flex;z-index:999;pointer-events:none;background-color:#fff}[_nghost-%COMP%]     .connector-container .tb-add-new button.connector{height:auto;padding-right:12px;font-size:20px;border-style:dashed;border-width:2px;border-radius:8px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;color:#00000061}@media screen and (min-width: 960px){[_nghost-%COMP%]     .configuration-json .ace_tooltip{transform:translate(-250px,-120px)}}']})}}e("GatewayConnectorComponent",i5);class r5{constructor(e){this.deviceService=e}download(e){e&&e.stopPropagation(),this.deviceId&&this.deviceService.downloadGatewayDockerComposeFile(this.deviceId).subscribe((()=>{}))}static{this.ɵfac=function(e){return new(e||r5)(t.ɵɵdirectiveInject(_e.DeviceService))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:r5,selectors:[["tb-gateway-command"]],inputs:{deviceId:"deviceId"},standalone:!0,features:[t.ɵɵStandaloneFeature],decls:32,vars:9,consts:[["mat-dialog-content","",1,"tb-form-panel","no-border",2,"padding","16px 16px 8px"],[1,"tb-no-data-text"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","no-border","no-padding","space-between"],["translate","",1,"tb-no-data-text","tb-commands-hint"],["mat-stroked-button","","color","primary","href","https://docs.docker.com/compose/install/","target","_blank"],["mat-stroked-button","","color","primary",3,"click"],["usePlainMarkdown","","containerClass","start-code","data","\n          ```bash\n          docker compose up\n          {:copy-code}\n          ```\n      "]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1),t.ɵɵtext(2),t.ɵɵpipe(3,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",2)(5,"div",3),t.ɵɵtext(6,"device.connectivity.install-necessary-client-tools"),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",4)(8,"div",5),t.ɵɵtext(9,"gateway.install-docker-compose"),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"a",6)(11,"mat-icon"),t.ɵɵtext(12,"description"),t.ɵɵelementEnd(),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(15,"div",2)(16,"div",3),t.ɵɵtext(17,"gateway.download-configuration-file"),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"div",4)(19,"div",5),t.ɵɵtext(20,"gateway.download-docker-compose"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"button",7),t.ɵɵlistener("click",(function(e){return n.download(e)})),t.ɵɵelementStart(22,"mat-icon"),t.ɵɵtext(23,"download"),t.ɵɵelementEnd(),t.ɵɵtext(24),t.ɵɵpipe(25,"translate"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(26,"div",2)(27,"div",3),t.ɵɵtext(28,"gateway.launch-gateway"),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"div",5),t.ɵɵtext(30,"gateway.launch-docker-compose"),t.ɵɵelementEnd(),t.ɵɵelement(31,"tb-markdown",8),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(3,3,"gateway.docker-label")),t.ɵɵadvance(11),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(14,5,"common.documentation")," "),t.ɵɵadvance(11),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(25,7,"action.download")," "))},dependencies:t.ɵɵgetComponentDepsFactory(r5,[j,_]),styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-commands-hint[_ngcontent-%COMP%]{color:inherit;font-weight:400;flex:1}[_nghost-%COMP%]     .tb-markdown-view .start-code .code-wrapper{padding:0}[_nghost-%COMP%]     .tb-markdown-view .start-code .code-wrapper pre[class*=language-]{margin:0;background:#f3f6fa;border-color:#305680;padding-right:38px;overflow:scroll;padding-bottom:4px;min-height:42px;scrollbar-width:thin}[_nghost-%COMP%]     .tb-markdown-view .start-code .code-wrapper pre[class*=language-]::-webkit-scrollbar{width:4px;height:4px}[_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn{right:-2px}[_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn p{color:#305680}[_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn p, [_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn div{background-color:#f3f6fa}[_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn div img{display:none}[_nghost-%COMP%]     .tb-markdown-view .start-code button.clipboard-btn div:after{content:"";position:initial;display:block;width:18px;height:18px;background:#305680;mask-image:url(/assets/copy-code-icon.svg);-webkit-mask-image:url(/assets/copy-code-icon.svg);mask-repeat:no-repeat;-webkit-mask-repeat:no-repeat}']})}}var o5,s5,l5;e("DeviceGatewayCommandComponent",r5),e("GatewayBasicConfigTab",o5),function(e){e[e.general=0]="general",e[e.logs=1]="logs",e[e.storage=2]="storage",e[e.grpc=3]="grpc",e[e.statistics=4]="statistics",e[e.other=5]="other"}(o5||e("GatewayBasicConfigTab",o5={})),e("StorageTypes",s5),function(e){e.MEMORY="memory",e.FILE="file",e.SQLITE="sqlite"}(s5||e("StorageTypes",s5={})),e("LocalLogsConfigs",l5),function(e){e.service="service",e.connector="connector",e.converter="converter",e.tb_connection="tb_connection",e.storage="storage",e.extension="extension"}(l5||e("LocalLogsConfigs",l5={}));const p5=e("LocalLogsConfigTranslateMap",new Map([[l5.service,"Service"],[l5.connector,"Connector"],[l5.converter,"Converter"],[l5.tb_connection,"TB Connection"],[l5.storage,"Storage"],[l5.extension,"Extension"]])),c5=e("StorageTypesTranslationMap",new Map([[s5.MEMORY,"gateway.storage-types.memory-storage"],[s5.FILE,"gateway.storage-types.file-storage"],[s5.SQLITE,"gateway.storage-types.sqlite"]]));var d5;e("LogSavingPeriod",d5),function(e){e.days="D",e.hours="H",e.minutes="M",e.seconds="S"}(d5||e("LogSavingPeriod",d5={}));const u5=e("LogSavingPeriodTranslations",new Map([[d5.days,"gateway.logs.days"],[d5.hours,"gateway.logs.hours"],[d5.minutes,"gateway.logs.minutes"],[d5.seconds,"gateway.logs.seconds"]]));var m5;e("SecurityTypes",m5),function(e){e.ACCESS_TOKEN="accessToken",e.USERNAME_PASSWORD="usernamePassword",e.TLS_ACCESS_TOKEN="tlsAccessToken",e.TLS_PRIVATE_KEY="tlsPrivateKey"}(m5||e("SecurityTypes",m5={}));const h5=e("SecurityTypesTranslationsMap",new Map([[m5.ACCESS_TOKEN,"gateway.security-types.access-token"],[m5.USERNAME_PASSWORD,"gateway.security-types.username-password"],[m5.TLS_ACCESS_TOKEN,"gateway.security-types.tls-access-token"]])),g5=e("logsHandlerClass","thingsboard_gateway.tb_utility.tb_rotating_file_handler.TimedRotatingFileHandler"),f5=e("logsLegacyHandlerClass","thingsboard_gateway.tb_utility.tb_handler.TimedRotatingFileHandler");function y5(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",10),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,a.storageTypesTranslationMap.get(e))," ")}}function v5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-read-record-count-required")," "))}function b5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-read-record-count-min")," "))}function x5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-read-record-count-pattern")," "))}function w5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-required")," "))}function S5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-min")," "))}function C5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-pattern")," "))}function _5(e,n){if(1&e&&(t.ɵɵelementStart(0,"section",11)(1,"mat-form-field",12)(2,"mat-label",13),t.ɵɵtext(3,"gateway.storage-read-record-count"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",14),t.ɵɵtemplate(5,v5,3,3,"mat-error",15)(6,b5,3,3,"mat-error",15)(7,x5,3,3,"mat-error",15),t.ɵɵelementStart(8,"mat-icon",16),t.ɵɵpipe(9,"translate"),t.ɵɵtext(10,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",12)(12,"mat-label",13),t.ɵɵtext(13,"gateway.storage-max-records"),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",17),t.ɵɵtemplate(15,w5,3,3,"mat-error",15)(16,S5,3,3,"mat-error",15)(17,C5,3,3,"mat-error",15),t.ɵɵelementStart(18,"mat-icon",16),t.ɵɵpipe(19,"translate"),t.ɵɵtext(20,"info_outlined "),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵproperty("ngIf",e.storageFormGroup.get("read_records_count").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("read_records_count").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("read_records_count").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(9,8,"gateway.hints.read-record-count")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_count").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_count").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_count").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(19,10,"gateway.hints.max-records-count"))}}function T5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-data-folder-path-required")," "))}function I5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-files-required")," "))}function E5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-files-min")," "))}function M5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-files-pattern")," "))}function k5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-read-record-count-required")," "))}function P5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-read-record-count-min")," "))}function D5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-read-record-count-pattern")," "))}function O5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-required")," "))}function A5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-min")," "))}function F5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-pattern")," "))}function R5(e,n){if(1&e&&(t.ɵɵelementStart(0,"section")(1,"div",11)(2,"mat-form-field",12)(3,"mat-label",13),t.ɵɵtext(4,"gateway.storage-data-folder-path"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",18),t.ɵɵtemplate(6,T5,3,3,"mat-error",15),t.ɵɵelementStart(7,"mat-icon",19),t.ɵɵpipe(8,"translate"),t.ɵɵtext(9,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",12)(11,"mat-label",13),t.ɵɵtext(12,"gateway.storage-max-files"),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",20),t.ɵɵtemplate(14,I5,3,3,"mat-error",15)(15,E5,3,3,"mat-error",15)(16,M5,3,3,"mat-error",15),t.ɵɵelementStart(17,"mat-icon",16),t.ɵɵpipe(18,"translate"),t.ɵɵtext(19,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"mat-form-field",12)(22,"mat-label",13),t.ɵɵtext(23,"gateway.storage-max-read-record-count"),t.ɵɵelementEnd(),t.ɵɵelement(24,"input",21),t.ɵɵtemplate(25,k5,3,3,"mat-error",15)(26,P5,3,3,"mat-error",15)(27,D5,3,3,"mat-error",15),t.ɵɵelementStart(28,"mat-icon",16),t.ɵɵpipe(29,"translate"),t.ɵɵtext(30,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(31,"mat-form-field",12)(32,"mat-label",13),t.ɵɵtext(33,"gateway.storage-max-records"),t.ɵɵelementEnd(),t.ɵɵelement(34,"input",22),t.ɵɵtemplate(35,O5,3,3,"mat-error",15)(36,A5,3,3,"mat-error",15)(37,F5,3,3,"mat-error",15),t.ɵɵelementStart(38,"mat-icon",16),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40,"info_outlined "),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(6),t.ɵɵproperty("ngIf",e.storageFormGroup.get("data_folder_path").hasError("required")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,14,"gateway.hints.data-folder")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_file_count").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_file_count").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_file_count").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,16,"gateway.hints.max-file-count")),t.ɵɵadvance(8),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_read_records_count").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_read_records_count").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_read_records_count").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(29,18,"gateway.hints.max-read-count")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(39,20,"gateway.hints.max-records"))}}function B5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-path-required")," "))}function N5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-check-in-hours-required")," "))}function L5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-check-in-hours-min")," "))}function V5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-check-in-hours-pattern")," "))}function q5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-in-days-required")," "))}function G5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-in-days-min")," "))}function z5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.messages-ttl-in-days-pattern")," "))}function U5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-required")," "))}function j5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-min")," "))}function H5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.storage-max-records-pattern")," "))}function W5(e,n){if(1&e&&(t.ɵɵelementStart(0,"section")(1,"div",11)(2,"mat-form-field",12)(3,"mat-label",13),t.ɵɵtext(4,"gateway.storage-path"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",23),t.ɵɵtemplate(6,B5,3,3,"mat-error",15),t.ɵɵelementStart(7,"mat-icon",16),t.ɵɵpipe(8,"translate"),t.ɵɵtext(9,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"mat-form-field",12)(11,"mat-label",13),t.ɵɵtext(12,"gateway.messages-ttl-check-in-hours"),t.ɵɵelementEnd(),t.ɵɵelement(13,"input",24),t.ɵɵtemplate(14,N5,3,3,"mat-error",15)(15,L5,3,3,"mat-error",15)(16,V5,3,3,"mat-error",15),t.ɵɵelementStart(17,"mat-icon",16),t.ɵɵpipe(18,"translate"),t.ɵɵtext(19,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(20,"div",11)(21,"mat-form-field",12)(22,"mat-label",13),t.ɵɵtext(23,"gateway.messages-ttl-in-days"),t.ɵɵelementEnd(),t.ɵɵelement(24,"input",25),t.ɵɵtemplate(25,q5,3,3,"mat-error",15)(26,G5,3,3,"mat-error",15)(27,z5,3,3,"mat-error",15),t.ɵɵelementStart(28,"mat-icon",26),t.ɵɵpipe(29,"translate"),t.ɵɵtext(30,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(31,"mat-form-field",12)(32,"mat-label",13),t.ɵɵtext(33,"gateway.storage-max-records"),t.ɵɵelementEnd(),t.ɵɵelement(34,"input",22),t.ɵɵtemplate(35,U5,3,3,"mat-error",15)(36,j5,3,3,"mat-error",15)(37,H5,3,3,"mat-error",15),t.ɵɵelementStart(38,"mat-icon",26),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40,"info_outlined "),t.ɵɵelementEnd()()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(6),t.ɵɵproperty("ngIf",e.storageFormGroup.get("data_file_path").hasError("required")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,14,"gateway.hints.data-folder")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_check_in_hours").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_check_in_hours").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_check_in_hours").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,16,"gateway.hints.ttl-check-hour")),t.ɵɵadvance(8),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_in_days").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_in_days").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("messages_ttl_in_days").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(29,18,"gateway.hints.ttl-messages-day")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",e.storageFormGroup.get("max_records_per_file").hasError("pattern")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(39,20,"gateway.hints.max-records"))}}class $5{constructor(e){this.fb=e,this.initialized=new u,this.StorageTypes=s5,this.storageTypes=Object.values(s5),this.storageTypesTranslationMap=c5,this.onChange=()=>{},this.storageFormGroup=this.initStorageFormGroup(),this.observeStorageTypeChanges(),this.storageFormGroup.valueChanges.pipe(xn()).subscribe((e=>{this.onChange(e)}))}ngAfterViewInit(){this.initialized.emit({storage:this.storageFormGroup.value})}writeValue(e){this.storageFormGroup.patchValue(e,{emitEvent:!1})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(){return this.storageFormGroup.valid?null:{storageFormGroup:{valid:!1}}}removeAllStorageValidators(){for(const e in this.storageFormGroup.controls)"type"!==e&&(this.storageFormGroup.controls[e].clearValidators(),this.storageFormGroup.controls[e].setErrors(null),this.storageFormGroup.controls[e].updateValueAndValidity())}initStorageFormGroup(){return this.fb.group({type:[s5.MEMORY,[$.required]],read_records_count:[100,[$.required,$.min(1),$.pattern(nn)]],max_records_count:[1e5,[$.required,$.min(1),$.pattern(nn)]],data_folder_path:["./data/",[$.required]],max_file_count:[10,[$.min(1),$.pattern(nn)]],max_read_records_count:[10,[$.min(1),$.pattern(nn)]],max_records_per_file:[1e4,[$.min(1),$.pattern(nn)]],data_file_path:["./data/data.db",[$.required]],messages_ttl_check_in_hours:[1,[$.min(1),$.pattern(nn)]],messages_ttl_in_days:[7,[$.min(1),$.pattern(nn)]]})}observeStorageTypeChanges(){this.storageFormGroup.get("type").valueChanges.pipe(xn()).subscribe((e=>{switch(this.removeAllStorageValidators(),e){case s5.MEMORY:this.addMemoryStorageValidators(this.storageFormGroup);break;case s5.FILE:this.addFileStorageValidators(this.storageFormGroup);break;case s5.SQLITE:this.addSqliteStorageValidators(this.storageFormGroup)}}))}addMemoryStorageValidators(e){e.get("read_records_count").addValidators([$.required,$.min(1),$.pattern(nn)]),e.get("max_records_count").addValidators([$.required,$.min(1),$.pattern(nn)]),e.get("read_records_count").updateValueAndValidity({emitEvent:!1}),e.get("max_records_count").updateValueAndValidity({emitEvent:!1})}addFileStorageValidators(e){["max_file_count","max_read_records_count","max_records_per_file"].forEach((t=>{e.get(t).addValidators([$.required,$.min(1),$.pattern(nn)]),e.get(t).updateValueAndValidity({emitEvent:!1})}))}addSqliteStorageValidators(e){["messages_ttl_check_in_hours","messages_ttl_in_days","max_records_per_file"].forEach((t=>{e.get(t).addValidators([$.required,$.min(1),$.pattern(nn)]),e.get(t).updateValueAndValidity({emitEvent:!1})}))}static{this.ɵfac=function(e){return new(e||$5)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:$5,selectors:[["tb-gateway-storage-configuration"]],outputs:{initialized:"initialized"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>$5)),multi:!0},{provide:K,useExisting:c((()=>$5)),multi:!0}]),t.ɵɵStandaloneFeature],decls:15,vars:9,consts:[[1,"mat-content","mat-padding","flex","w-full","flex-col","gap-2",3,"formGroup"],[1,"tb-form-panel","no-padding-bottom","w-full"],["translate","",1,"tb-form-panel-title"],["translate","",1,"tb-form-panel-hint"],["formControlName","type",1,"flex"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-panel-hint"],[3,"ngSwitch"],["class","tb-form-row no-border no-padding tb-standard-fields column-xs",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"value"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],["appearance","outline",1,"flex"],["translate",""],["type","number","matInput","","formControlName","read_records_count"],[4,"ngIf"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],["type","number","matInput","","formControlName","max_records_count"],["matInput","","formControlName","data_folder_path"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-form-field-infix","pointer-event","suffix-icon",2,"cursor","pointer",3,"matTooltip"],["matInput","","type","number","formControlName","max_file_count"],["matInput","","type","number","formControlName","max_read_records_count"],["matInput","","type","number","formControlName","max_records_per_file"],["matInput","","formControlName","data_file_path"],["matInput","","type","number","formControlName","messages_ttl_check_in_hours"],["matInput","","type","number","formControlName","messages_ttl_in_days"],["matIconSuffix","",1,"cursor-pointer",3,"matTooltip"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2),t.ɵɵtext(3,"gateway.storage"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",3),t.ɵɵtext(5,"gateway.hints.storage"),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"tb-toggle-select",4),t.ɵɵtemplate(7,y5,3,4,"tb-toggle-option",5),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"div",6),t.ɵɵtext(9),t.ɵɵpipe(10,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(11,7),t.ɵɵtemplate(12,_5,21,12,"section",8)(13,R5,41,22,"section",9)(14,W5,41,22,"section",9),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.storageFormGroup),t.ɵɵadvance(7),t.ɵɵproperty("ngForOf",n.storageTypes),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(10,7,"gateway.hints."+n.storageFormGroup.get("type").value)),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitch",n.storageFormGroup.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.StorageTypes.MEMORY),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.StorageTypes.FILE),t.ɵɵadvance(),t.ɵɵproperty("ngSwitchCase",n.StorageTypes.SQLITE))},dependencies:t.ɵɵgetComponentDepsFactory($5,[j,_]),encapsulation:2})}}function K5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-required")," "))}function Y5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-min")," "))}function X5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-max")," "))}function Z5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-pattern")," "))}function Q5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-timeout-required")," "))}function J5(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-timeout-min")," "))}function e6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-timeout-pattern")," "))}function t6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-required")," "))}function n6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-min")," "))}function a6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-keep-alive-pattern")," "))}function i6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-time-between-pings-required")," "))}function r6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-time-between-pings-min")," "))}function o6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-time-between-pings-pattern")," "))}function s6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-max-pings-without-data-required")," "))}function l6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-max-pings-without-data-min")," "))}function p6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-max-pings-without-data-pattern")," "))}function c6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-ping-interval-without-data-required")," "))}function d6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-ping-interval-without-data-min")," "))}function u6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.grpc-min-ping-interval-without-data-pattern")," "))}class m6{constructor(e){this.fb=e,this.initialized=new u,this.onChange=()=>{},this.grpcFormGroup=this.initGrpcFormGroup(),this.grpcFormGroup.valueChanges.pipe(xn()).subscribe((e=>{this.onChange(e)})),this.grpcFormGroup.get("enabled").valueChanges.pipe(xn()).subscribe((e=>{this.toggleRpcFields(e)}))}ngAfterViewInit(){this.initialized.emit({grpc:this.grpcFormGroup.value})}writeValue(e){e&&this.toggleRpcFields(e.enabled),this.grpcFormGroup.patchValue(e,{emitEvent:!1})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(){return this.grpcFormGroup.valid?null:{grpcFormGroup:{valid:!1}}}toggleRpcFields(e){const t=this.grpcFormGroup;e?(t.get("serverPort").enable({emitEvent:!1}),t.get("keepAliveTimeMs").enable({emitEvent:!1}),t.get("keepAliveTimeoutMs").enable({emitEvent:!1}),t.get("keepalivePermitWithoutCalls").enable({emitEvent:!1}),t.get("maxPingsWithoutData").enable({emitEvent:!1}),t.get("minTimeBetweenPingsMs").enable({emitEvent:!1}),t.get("minPingIntervalWithoutDataMs").enable({emitEvent:!1})):(t.get("serverPort").disable({emitEvent:!1}),t.get("keepAliveTimeMs").disable({emitEvent:!1}),t.get("keepAliveTimeoutMs").disable({emitEvent:!1}),t.get("keepalivePermitWithoutCalls").disable({emitEvent:!1}),t.get("maxPingsWithoutData").disable({emitEvent:!1}),t.get("minTimeBetweenPingsMs").disable({emitEvent:!1}),t.get("minPingIntervalWithoutDataMs").disable({emitEvent:!1}))}initGrpcFormGroup(){return this.fb.group({enabled:[!1],serverPort:[9595,[$.required,$.min(1),$.max(65535),$.pattern(nn)]],keepAliveTimeMs:[1e4,[$.required,$.min(1),$.pattern(nn)]],keepAliveTimeoutMs:[5e3,[$.required,$.min(1),$.pattern(nn)]],keepalivePermitWithoutCalls:[!0],maxPingsWithoutData:[0,[$.required,$.min(0),$.pattern(nn)]],minTimeBetweenPingsMs:[1e4,[$.required,$.min(1),$.pattern(nn)]],minPingIntervalWithoutDataMs:[5e3,[$.required,$.min(1),$.pattern(nn)]]})}static{this.ɵfac=function(e){return new(e||m6)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:m6,selectors:[["tb-gateway-grpc-configuration"]],outputs:{initialized:"initialized"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>m6)),multi:!0},{provide:K,useExisting:c((()=>m6)),multi:!0}]),t.ɵɵStandaloneFeature],decls:75,vars:47,consts:[[1,"mat-content","mat-padding","flex","flex-col","gap-2",3,"formGroup"],[1,"tb-form-panel","no-padding-bottom","w-full"],["color","primary","formControlName","enabled",1,"mat-slide"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["color","primary","formControlName","keepalivePermitWithoutCalls",1,"mat-slide"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],["appearance","outline",1,"flex"],["translate",""],["matInput","","formControlName","serverPort","type","number","min","0"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],[4,"ngIf"],["matInput","","formControlName","keepAliveTimeoutMs","type","number","min","0"],["matInput","","formControlName","keepAliveTimeMs","type","number","min","0"],["matInput","","formControlName","minTimeBetweenPingsMs","type","number","min","0"],["matInput","","formControlName","maxPingsWithoutData","type","number","min","0"],["matInput","","formControlName","minPingIntervalWithoutDataMs","type","number","min","0"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"mat-slide-toggle",2),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",3),t.ɵɵpipe(6,"translate"),t.ɵɵelementStart(7,"mat-slide-toggle",4),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(10,"section")(11,"section",5)(12,"mat-form-field",6)(13,"mat-label",7),t.ɵɵtext(14,"gateway.server-port"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",8),t.ɵɵelementStart(16,"mat-icon",9),t.ɵɵpipe(17,"translate"),t.ɵɵtext(18,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(19,K5,3,3,"mat-error",10)(20,Y5,3,3,"mat-error",10)(21,X5,3,3,"mat-error",10)(22,Z5,3,3,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(23,"mat-form-field",6)(24,"mat-label",7),t.ɵɵtext(25,"gateway.grpc-keep-alive-timeout"),t.ɵɵelementEnd(),t.ɵɵelement(26,"input",11),t.ɵɵelementStart(27,"mat-icon",9),t.ɵɵpipe(28,"translate"),t.ɵɵtext(29,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(30,Q5,3,3,"mat-error",10)(31,J5,3,3,"mat-error",10)(32,e6,3,3,"mat-error",10),t.ɵɵelementEnd()(),t.ɵɵelementStart(33,"section",5)(34,"mat-form-field",6)(35,"mat-label",7),t.ɵɵtext(36,"gateway.grpc-keep-alive"),t.ɵɵelementEnd(),t.ɵɵelement(37,"input",12),t.ɵɵelementStart(38,"mat-icon",9),t.ɵɵpipe(39,"translate"),t.ɵɵtext(40,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(41,t6,3,3,"mat-error",10)(42,n6,3,3,"mat-error",10)(43,a6,3,3,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"mat-form-field",6)(45,"mat-label",7),t.ɵɵtext(46,"gateway.grpc-min-time-between-pings"),t.ɵɵelementEnd(),t.ɵɵelement(47,"input",13),t.ɵɵelementStart(48,"mat-icon",9),t.ɵɵpipe(49,"translate"),t.ɵɵtext(50,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(51,i6,3,3,"mat-error",10)(52,r6,3,3,"mat-error",10)(53,o6,3,3,"mat-error",10),t.ɵɵelementEnd()(),t.ɵɵelementStart(54,"section",5)(55,"mat-form-field",6)(56,"mat-label",7),t.ɵɵtext(57,"gateway.grpc-max-pings-without-data"),t.ɵɵelementEnd(),t.ɵɵelement(58,"input",14),t.ɵɵelementStart(59,"mat-icon",9),t.ɵɵpipe(60,"translate"),t.ɵɵtext(61,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(62,s6,3,3,"mat-error",10)(63,l6,3,3,"mat-error",10)(64,p6,3,3,"mat-error",10),t.ɵɵelementEnd(),t.ɵɵelementStart(65,"mat-form-field",6)(66,"mat-label",7),t.ɵɵtext(67,"gateway.grpc-min-ping-interval-without-data"),t.ɵɵelementEnd(),t.ɵɵelement(68,"input",15),t.ɵɵelementStart(69,"mat-icon",9),t.ɵɵpipe(70,"translate"),t.ɵɵtext(71,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(72,c6,3,3,"mat-error",10)(73,d6,3,3,"mat-error",10)(74,u6,3,3,"mat-error",10),t.ɵɵelementEnd()()()()()),2&e&&(t.ɵɵproperty("formGroup",n.grpcFormGroup),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,29,"gateway.grpc")," "),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(6,31,"gateway.hints.permit-without-calls")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,33,"gateway.permit-without-calls")," "),t.ɵɵadvance(8),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,35,"gateway.hints.server-port")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("serverPort").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("serverPort").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("serverPort").hasError("max")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("serverPort").hasError("pattern")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(28,37,"gateway.hints.grpc-keep-alive-timeout")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeoutMs").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeoutMs").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeoutMs").hasError("pattern")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(39,39,"gateway.hints.grpc-keep-alive")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeMs").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeMs").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("keepAliveTimeMs").hasError("pattern")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(49,41,"gateway.hints.grpc-min-time-between-pings")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minTimeBetweenPingsMs").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minTimeBetweenPingsMs").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minTimeBetweenPingsMs").hasError("pattern")),t.ɵɵadvance(6),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(60,43,"gateway.hints.grpc-max-pings-without-data")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("maxPingsWithoutData").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("maxPingsWithoutData").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("maxPingsWithoutData").hasError("pattern")),t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(70,45,"gateway.hints.grpc-min-ping-interval-without-data")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minPingIntervalWithoutDataMs").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minPingIntervalWithoutDataMs").hasError("min")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.grpcFormGroup.get("minPingIntervalWithoutDataMs").hasError("pattern")))},dependencies:t.ɵɵgetComponentDepsFactory(m6,[j,_]),encapsulation:2})}}function h6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.date-format-required")," "))}function g6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.log-format-required")," "))}function f6(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",29),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function y6(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",30),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit,a=t.ɵɵnextContext();t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(a.localLogsConfigTranslateMap.get(e))}}function v6(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",29),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e),t.ɵɵadvance(),t.ɵɵtextInterpolate(e)}}function b6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.file-path-required")," "))}function x6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.saving-period-required")," "))}function w6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.saving-period-min")," "))}function S6(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",29),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.key),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,2,e.value)," ")}}function C6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.backup-count-required")," "))}function _6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.logs.backup-count-min")," "))}class T6{constructor(e){this.fb=e,this.initialized=new u,this.logSavingPeriods=u5,this.localLogsConfigs=Object.keys(l5),this.localLogsConfigTranslateMap=p5,this.gatewayLogLevel=Object.values(lt),this.remoteLogLevel=Object.values(lt).filter((e=>e!==lt.NONE)),this.onChange=()=>{},this.logsFormGroup=this.initLogsFormGroup(),this.showRemoteLogsControl=this.fb.control(!1),this.logsFormGroup.valueChanges.pipe(xn()).subscribe((e=>{this.onChange(e)})),this.logSelector=this.fb.control(l5.service);for(const e of Object.keys(l5))this.addLocalLogConfig(e,{});this.showRemoteLogsControl.valueChanges.pipe(xn()).subscribe((e=>this.logsFormGroup.get("logLevel")[e?"enable":"disable"]()))}ngAfterViewInit(){this.initialized.emit({logs:this.logsFormGroup.value})}writeValue(e){this.logsFormGroup.patchValue(e,{emitEvent:!1}),this.updateRemoteLogs(e?.logLevel??lt.NONE)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}getLogFormGroup(e){return this.logsFormGroup.get(`local.${e}`)}validate(){return this.logsFormGroup.valid?null:{logsFormGroup:{valid:!1}}}initLogsFormGroup(){return this.fb.group({dateFormat:["%Y-%m-%d %H:%M:%S",[$.required,$.pattern(/^[^\s].*[^\s]$/)]],logFormat:["%(asctime)s.%(msecs)03d - |%(levelname)s| - [%(filename)s] - %(module)s - %(funcName)s - %(lineno)d - %(message)s",[$.required,$.pattern(/^[^\s].*[^\s]$/)]],type:["remote",[$.required]],logLevel:[{value:lt.INFO,disabled:!0}],local:this.fb.group({})})}addLocalLogConfig(e,t){const n=this.logsFormGroup.get("local"),a=this.fb.group({logLevel:[t.logLevel||lt.INFO,[$.required]],filePath:[t.filePath||"./logs",[$.required]],backupCount:[t.backupCount||7,[$.required,$.min(0)]],savingTime:[t.savingTime||3,[$.required,$.min(0)]],savingPeriod:[t.savingPeriod||d5.days,[$.required]]});n.addControl(e,a,{emitEvent:!1})}updateRemoteLogs(e){const t=e&&e!==lt.NONE;this.showRemoteLogsControl.patchValue(t,{emitEvent:!1}),this.logsFormGroup.get("logLevel")[t?"enable":"disable"]({emitEvent:!1}),this.logsFormGroup.get("logLevel").patchValue(e===lt.NONE?lt.INFO:e,{emitEvent:!1})}static{this.ɵfac=function(e){return new(e||T6)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:T6,selectors:[["tb-gateway-logs-configuration"]],outputs:{initialized:"initialized"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>T6)),multi:!0},{provide:K,useExisting:c((()=>T6)),multi:!0}]),t.ɵɵStandaloneFeature],decls:72,vars:33,consts:[[1,"mat-content","mat-padding","flex","flex-col","gap-2",3,"formGroup"],[1,"tb-form-panel","no-padding-bottom"],[1,"flex","flex-col"],["appearance","outline"],["translate",""],["matInput","","formControlName","dateFormat"],[4,"ngIf"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],["matInput","","formControlName","logFormat","rows","2"],[1,"tb-form-panel"],[1,"tb-settings",3,"expanded"],[1,"flex-wrap"],[1,"mat-slide",3,"click","formControl"],[3,"tb-hint-tooltip-icon"],["formControlName","logLevel"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","local",1,"tb-form-panel","no-padding-bottom"],["translate","",1,"tb-form-panel-title"],[1,"toggle-group",3,"formControl"],["class","first-capital",3,"value",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],["appearance","outline",1,"flex"],["matInput","","formControlName","filePath"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","saving-period"],["matInput","","formControlName","savingTime","type","number","min","0"],["appearance","outline","hideRequiredMarker","",2,"min-width","110px","width","30%"],["formControlName","savingPeriod"],["matInput","","formControlName","backupCount","type","number","min","0"],[3,"value"],[1,"first-capital",3,"value"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label",4),t.ɵɵtext(5,"gateway.logs.date-format"),t.ɵɵelementEnd(),t.ɵɵelement(6,"input",5),t.ɵɵtemplate(7,h6,3,3,"mat-error",6),t.ɵɵelementStart(8,"mat-icon",7),t.ɵɵpipe(9,"translate"),t.ɵɵtext(10,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",3)(12,"mat-label",4),t.ɵɵtext(13,"gateway.logs.log-format"),t.ɵɵelementEnd(),t.ɵɵelement(14,"textarea",8),t.ɵɵtemplate(15,g6,3,3,"mat-error",6),t.ɵɵelementStart(16,"mat-icon",7),t.ɵɵpipe(17,"translate"),t.ɵɵtext(18,"info_outlined "),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(19,"div",9)(20,"mat-expansion-panel",10)(21,"mat-expansion-panel-header",11)(22,"mat-panel-title")(23,"mat-slide-toggle",12),t.ɵɵlistener("click",(function(e){return e.stopPropagation()})),t.ɵɵelementStart(24,"mat-label")(25,"div",13),t.ɵɵpipe(26,"translate"),t.ɵɵtext(27),t.ɵɵpipe(28,"translate"),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(29,"mat-form-field",3)(30,"mat-label",4),t.ɵɵtext(31,"gateway.logs.level"),t.ɵɵelementEnd(),t.ɵɵelementStart(32,"mat-select",14),t.ɵɵtemplate(33,f6,2,2,"mat-option",15),t.ɵɵelementEnd()()()(),t.ɵɵelementStart(34,"div",16)(35,"div",17),t.ɵɵtext(36,"gateway.logs.local"),t.ɵɵelementEnd(),t.ɵɵelementStart(37,"tb-toggle-select",18),t.ɵɵtemplate(38,y6,2,2,"tb-toggle-option",19),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(39,20),t.ɵɵelementStart(40,"div",21)(41,"mat-form-field",22)(42,"mat-label",4),t.ɵɵtext(43,"gateway.logs.level"),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"mat-select",14),t.ɵɵtemplate(45,v6,2,2,"mat-option",15),t.ɵɵelementEnd()(),t.ɵɵelementStart(46,"mat-form-field",22)(47,"mat-label",4),t.ɵɵtext(48,"gateway.logs.file-path"),t.ɵɵelementEnd(),t.ɵɵelement(49,"input",23),t.ɵɵtemplate(50,b6,3,3,"mat-error",6),t.ɵɵelementEnd()(),t.ɵɵelementStart(51,"div",21)(52,"div",24)(53,"mat-form-field",22)(54,"mat-label",4),t.ɵɵtext(55,"gateway.logs.saving-period"),t.ɵɵelementEnd(),t.ɵɵelement(56,"input",25),t.ɵɵtemplate(57,x6,3,3,"mat-error",6)(58,w6,3,3,"mat-error",6),t.ɵɵelementEnd(),t.ɵɵelementStart(59,"mat-form-field",26)(60,"mat-select",27),t.ɵɵtemplate(61,S6,3,4,"mat-option",15),t.ɵɵpipe(62,"keyvalue"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(63,"mat-form-field",22)(64,"mat-label",4),t.ɵɵtext(65,"gateway.logs.backup-count"),t.ɵɵelementEnd(),t.ɵɵelement(66,"input",28),t.ɵɵtemplate(67,C6,3,3,"mat-error",6)(68,_6,3,3,"mat-error",6),t.ɵɵelementStart(69,"mat-icon",7),t.ɵɵpipe(70,"translate"),t.ɵɵtext(71,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()()),2&e&&(t.ɵɵproperty("formGroup",n.logsFormGroup),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",n.logsFormGroup.get("dateFormat").hasError("required")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(9,21,"gateway.hints.date-form")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",n.logsFormGroup.get("logFormat").hasError("required")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(17,23,"gateway.hints.log-format")),t.ɵɵadvance(4),t.ɵɵproperty("expanded",n.showRemoteLogsControl.value),t.ɵɵadvance(3),t.ɵɵproperty("formControl",n.showRemoteLogsControl),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(26,25,"gateway.hints.remote-log")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(28,27,"gateway.logs.remote")),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.remoteLogLevel),t.ɵɵadvance(4),t.ɵɵproperty("formControl",n.logSelector),t.ɵɵadvance(),t.ɵɵproperty("ngForOf",n.localLogsConfigs),t.ɵɵadvance(),t.ɵɵproperty("formGroup",n.getLogFormGroup(n.logSelector.value)),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",n.gatewayLogLevel),t.ɵɵadvance(5),t.ɵɵproperty("ngIf",n.logsFormGroup.get("local."+n.logSelector.value+".filePath").hasError("required")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",n.logsFormGroup.get("local."+n.logSelector.value+".savingTime").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.logsFormGroup.get("local."+n.logSelector.value+".savingTime").hasError("min")),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(62,29,n.logSavingPeriods)),t.ɵɵadvance(6),t.ɵɵproperty("ngIf",n.logsFormGroup.get("local."+n.logSelector.value+".backupCount").hasError("required")),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.logsFormGroup.get("local."+n.logSelector.value+".backupCount").hasError("min")),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(70,31,"gateway.hints.backup-count")))},dependencies:t.ɵɵgetComponentDepsFactory(T6,[j,_]),encapsulation:2})}}function I6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"security.clientId-required")," "))}function E6(e,n){if(1&e&&(t.ɵɵelement(0,"tb-copy-button",6),t.ɵɵpipe(1,"translate")),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("tooltipText",t.ɵɵpipeBind1(1,2,"gateway.copy-client-id")),t.ɵɵproperty("copyText",e.usernameFormGroup.get("clientId").value)}}function M6(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",13),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.generate("clientId"))})),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"autorenew"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"device.generate-client-id"))}function k6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"security.username-required")," "))}function P6(e,n){if(1&e&&(t.ɵɵelement(0,"tb-copy-button",6),t.ɵɵpipe(1,"translate")),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("tooltipText",t.ɵɵpipeBind1(1,2,"gateway.copy-username")),t.ɵɵproperty("copyText",e.usernameFormGroup.get("username").value)}}function D6(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",13),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.generate("username"))})),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"autorenew"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"device.generate-user-name"))}function O6(e,n){if(1&e&&(t.ɵɵelement(0,"tb-copy-button",6),t.ɵɵpipe(1,"translate")),2&e){const e=t.ɵɵnextContext();t.ɵɵpropertyInterpolate("tooltipText",t.ɵɵpipeBind1(1,2,"gateway.copy-password")),t.ɵɵproperty("copyText",e.usernameFormGroup.get("password").value)}}function A6(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",13),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.generate("password"))})),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"autorenew"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"device.generate-password"))}function F6(e,n){1&e&&(t.ɵɵelement(0,"tb-error",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("error",t.ɵɵpipeBind1(1,1,"device.client-id-or-user-name-necessary"))}function R6(e,n){1&e&&(t.ɵɵelement(0,"tb-error",14),t.ɵɵpipe(1,"translate")),2&e&&t.ɵɵproperty("error",t.ɵɵpipeBind1(1,1,"gateway.hints.username-required-with-password"))}class B6{constructor(e){this.fb=e,this.onChange=()=>{},this.initForm(),this.usernameFormGroup.valueChanges.pipe(xn()).subscribe((e=>this.onChange(e)))}writeValue(e){this.usernameFormGroup.patchValue(e,{emitEvent:!1})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){e?this.usernameFormGroup.disable({emitEvent:!1}):this.usernameFormGroup.enable({emitEvent:!1})}validate(){return this.usernameFormGroup.valid?null:{usernameFormGroup:{valid:!1}}}initForm(){this.usernameFormGroup=this.createSecurityFormGroup()}createSecurityFormGroup(){return this.fb.group({clientId:[null,[$.pattern(/^[^.\s]+$/)]],username:[null,[$.pattern(/^[^.\s]+$/)]],password:[null,[$.pattern(/^[^.\s]+$/)]]},{validators:[this.atLeastOneRequired,this.usernameRequired]})}atLeastOneRequired(e){const t=e.get("clientId").value,n=e.get("username").value;return t||n?null:{atLeastOneRequired:!0}}usernameRequired(e){const t=e.get("username").value,n=e.get("password").value;return!t&&n?{usernameRequired:!0}:null}generate(e){this.usernameFormGroup.get(e).patchValue(Re(20))}static{this.ɵfac=function(e){return new(e||B6)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:B6,selectors:[["tb-gateway-username-configuration"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>B6)),multi:!0},{provide:K,useExisting:c((()=>B6)),multi:!0}]),t.ɵɵStandaloneFeature],decls:33,vars:17,consts:[[3,"formGroup"],[1,"xs:flex-col","no-border","no-padding","tb-standard-fields","flex","gap-2"],["appearance","outline",1,"flex","flex-1"],["translate",""],["matInput","","formControlName","clientId"],[4,"ngIf"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"matTooltip"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],["matInput","","formControlName","username"],["appearance","outline","subscriptSizing","dynamic",2,"width","100%"],["matInput","","formControlName","password"],["class","block",3,"error",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"click","matTooltip"],[1,"block",3,"error"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"section",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label",3),t.ɵɵtext(4,"security.clientId"),t.ɵɵelementEnd(),t.ɵɵelement(5,"input",4),t.ɵɵtemplate(6,I6,3,3,"mat-error",5)(7,E6,2,4,"tb-copy-button",6)(8,M6,4,3,"button",7),t.ɵɵelementStart(9,"mat-icon",8),t.ɵɵpipe(10,"translate"),t.ɵɵtext(11,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(12,"mat-form-field",2)(13,"mat-label",3),t.ɵɵtext(14,"security.username"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",9),t.ɵɵtemplate(16,k6,3,3,"mat-error",5)(17,P6,2,4,"tb-copy-button",6)(18,D6,4,3,"button",7),t.ɵɵelementStart(19,"mat-icon",8),t.ɵɵpipe(20,"translate"),t.ɵɵtext(21,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(22,"mat-form-field",10)(23,"mat-label",3),t.ɵɵtext(24,"gateway.password"),t.ɵɵelementEnd(),t.ɵɵelement(25,"input",11),t.ɵɵtemplate(26,O6,2,4,"tb-copy-button",6)(27,A6,4,3,"button",7),t.ɵɵelementStart(28,"mat-icon",8),t.ɵɵpipe(29,"translate"),t.ɵɵtext(30,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵtemplate(31,F6,2,3,"tb-error",12)(32,R6,2,3,"tb-error",12)),2&e&&(t.ɵɵproperty("formGroup",n.usernameFormGroup),t.ɵɵadvance(6),t.ɵɵproperty("ngIf",n.usernameFormGroup.get("clientId").hasError("required")),t.ɵɵadvance(),t.ɵɵconditional(n.usernameFormGroup.get("clientId").value?7:8),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(10,11,"gateway.hints.client-id")),t.ɵɵadvance(7),t.ɵɵproperty("ngIf",n.usernameFormGroup.get("username").hasError("required")),t.ɵɵadvance(),t.ɵɵconditional(n.usernameFormGroup.get("username").value?17:18),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(20,13,"gateway.hints.username")),t.ɵɵadvance(7),t.ɵɵconditional(n.usernameFormGroup.get("password").value?26:27),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(29,15,"gateway.hints.password")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.usernameFormGroup.hasError("atLeastOneRequired")&&n.usernameFormGroup.touched),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.usernameFormGroup.hasError("usernameRequired")&&n.usernameFormGroup.touched))},dependencies:t.ɵɵgetComponentDepsFactory(B6,[j,_]),encapsulation:2})}}class N6{constructor(e,t){this.deviceService=e,this.destroyRef=t,this.initialCredentialsSubject=new ae(null)}get initialCredentials(){return this.initialCredentialsSubject.value}get initialCredentials$(){return this.initialCredentialsSubject.asObservable()}updateCredentials(e){let t={};switch(e.type){case m5.USERNAME_PASSWORD:this.shouldUpdateCredentials(e)&&(t=this.generateMqttCredentials(e));break;case m5.ACCESS_TOKEN:case m5.TLS_ACCESS_TOKEN:this.shouldUpdateAccessToken(e)&&(t={credentialsType:U.ACCESS_TOKEN,credentialsId:e.accessToken,credentialsValue:null})}return this.initialCredentialsSubject.next({...this.initialCredentials,...t}),Object.keys(t).length?this.deviceService.saveDeviceCredentials(this.initialCredentials):ie(null)}setInitialCredentials(e){this.deviceService.getDeviceCredentials(e.id).pipe(xn(this.destroyRef)).subscribe((e=>{this.initialCredentialsSubject.next({...e,version:null})}))}shouldUpdateSecurityConfig(e){switch(e.type){case m5.USERNAME_PASSWORD:return this.shouldUpdateCredentials(e);case m5.ACCESS_TOKEN:case m5.TLS_ACCESS_TOKEN:return this.shouldUpdateAccessToken(e)}}credentialsToSecurityConfig(e){const t=e.credentialsType===U.MQTT_BASIC?m5.USERNAME_PASSWORD:m5.ACCESS_TOKEN;if(e.credentialsType!==U.MQTT_BASIC)return{type:t,accessToken:e.credentialsId};if(e.credentialsValue){const{clientId:n,userName:a,password:i}=JSON.parse(e.credentialsValue);return{type:t,clientId:n,username:a,password:i}}}shouldUpdateCredentials(e){if(this.initialCredentials.credentialsType!==U.MQTT_BASIC)return!0;const t=JSON.parse(this.initialCredentials.credentialsValue);return!(t.clientId===e.clientId&&t.userName===e.username&&t.password===e.password)}shouldUpdateAccessToken(e){return this.initialCredentials.credentialsType!==U.ACCESS_TOKEN||this.initialCredentials.credentialsId!==e.accessToken}generateMqttCredentials(e){const{clientId:t,username:n,password:a}=e,i={...t&&{clientId:t},...n&&{userName:n},...a&&{password:a}};return{credentialsType:U.MQTT_BASIC,credentialsValue:JSON.stringify(i)}}static{this.ɵfac=function(e){return new(e||N6)(t.ɵɵinject(_e.DeviceService),t.ɵɵinject(t.DestroyRef))}}static{this.ɵprov=t.ɵɵdefineInjectable({token:N6,factory:N6.ɵfac})}}function L6(e,n){if(1&e&&(t.ɵɵelementStart(0,"tb-toggle-option",8),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e){const e=n.$implicit;t.ɵɵproperty("value",e.key),t.ɵɵadvance(),t.ɵɵtextInterpolate1("",t.ɵɵpipeBind1(2,2,e.value)," ")}}function V6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"security.access-token-required")," "))}function q6(e,n){if(1&e&&(t.ɵɵelement(0,"tb-copy-button",13),t.ɵɵpipe(1,"translate")),2&e){const e=t.ɵɵnextContext(2);t.ɵɵpropertyInterpolate("tooltipText",t.ɵɵpipeBind1(1,2,"device.copy-access-token")),t.ɵɵproperty("copyText",e.securityFormGroup.get("accessToken").value)}}function G6(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",16),t.ɵɵpipe(1,"translate"),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext(2);return t.ɵɵresetView(n.generateAccessToken())})),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"autorenew"),t.ɵɵelementEnd()()}2&e&&t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(1,1,"device.generate-access-token"))}function z6(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field",9)(1,"mat-label",10),t.ɵɵtext(2,"security.access-token"),t.ɵɵelementEnd(),t.ɵɵelement(3,"input",11),t.ɵɵtemplate(4,V6,3,3,"mat-error",12)(5,q6,2,4,"tb-copy-button",13)(6,G6,4,3,"button",14),t.ɵɵelementStart(7,"mat-icon",15),t.ɵɵpipe(8,"translate"),t.ɵɵtext(9,"info_outlined "),t.ɵɵelementEnd()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵproperty("ngIf",e.securityFormGroup.get("accessToken").hasError("required")),t.ɵɵadvance(),t.ɵɵconditional(e.securityFormGroup.get("accessToken").value?5:6),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(8,3,"gateway.hints.token"))}}function U6(e,n){1&e&&(t.ɵɵelement(0,"tb-file-input",17),t.ɵɵpipe(1,"translate"),t.ɵɵpipe(2,"translate"),t.ɵɵpipe(3,"translate")),2&e&&(t.ɵɵpropertyInterpolate("hint",t.ɵɵpipeBind1(1,5,"gateway.hints.ca-cert")),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(2,7,"security.ca-cert")),t.ɵɵpropertyInterpolate("dropLabel",t.ɵɵpipeBind1(3,9,"gateway.drop-file")),t.ɵɵproperty("allowedExtensions","pem,cert,key")("accept",".pem, application/pem,.cert, application/cert, .key,application/key"))}class j6{constructor(e,t,n){this.fb=e,this.cd=t,this.gatewayCredentialsService=n,this.initialized=new u,this.securityTypes=h5,this.onChange=()=>{},this.securityFormGroup=this.createSecurityFormGroup(),this.setupFormListeners()}ngAfterViewInit(){const{usernamePassword:e,...t}=this.securityFormGroup.value;this.initialized.emit({thingsboard:{security:e?{...t,...e}:t}})}writeValue(e){e?this.updateFormBySecurityConfig(e):this.updateFormBySecurityConfig(this.gatewayCredentialsService.credentialsToSecurityConfig(this.gatewayCredentialsService.initialCredentials))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(){return this.securityFormGroup.valid?null:{securityFormGroup:{valid:!1}}}updateFormBySecurityConfig(e){const{clientId:t,username:n,password:a,...i}=e??{};i?.type===m5.USERNAME_PASSWORD?this.securityFormGroup.patchValue({...i,usernamePassword:{clientId:t,username:n,password:a}},{emitEvent:!1}):this.securityFormGroup.patchValue(i,{emitEvent:!1}),this.toggleBySecurityType(this.securityFormGroup.get("type").value)}createSecurityFormGroup(){return this.fb.group({type:[m5.ACCESS_TOKEN,[$.required]],accessToken:[null,[$.required,$.pattern(/^[^.\s]+$/)]],caCert:[null,[$.required]],usernamePassword:[]})}setupFormListeners(){this.securityFormGroup.valueChanges.pipe(xn()).subscribe((({usernamePassword:e,...t})=>{this.onChange(e?{...t,...e}:t)})),this.securityFormGroup.get("type").valueChanges.pipe(xn()).subscribe((e=>{this.toggleBySecurityType(e)})),this.securityFormGroup.get("caCert").valueChanges.pipe(xn()).subscribe((()=>this.cd.detectChanges()))}toggleBySecurityType(e){switch(this.securityFormGroup.disable({emitEvent:!1}),this.securityFormGroup.get("type").enable({emitEvent:!1}),e){case m5.ACCESS_TOKEN:this.securityFormGroup.get("accessToken").enable({emitEvent:!1});break;case m5.TLS_PRIVATE_KEY:this.securityFormGroup.get("caCert").enable({emitEvent:!1});break;case m5.TLS_ACCESS_TOKEN:this.securityFormGroup.get("accessToken").enable({emitEvent:!1}),this.securityFormGroup.get("caCert").enable({emitEvent:!1});break;case m5.USERNAME_PASSWORD:this.securityFormGroup.get("usernamePassword").enable({emitEvent:!1})}}generateAccessToken(){this.securityFormGroup.get("accessToken").patchValue(Re(20))}static{this.ɵfac=function(e){return new(e||j6)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(N6))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:j6,selectors:[["tb-gateway-security-configuration"]],outputs:{initialized:"initialized"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>j6)),multi:!0},{provide:K,useExisting:c((()=>j6)),multi:!0}]),t.ɵɵStandaloneFeature],decls:10,vars:8,consts:[[1,"tb-form-panel"],["translate","",1,"tb-form-panel-title"],[3,"formGroup"],["formControlName","type",1,"toggle-group","flex"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",4,"ngIf"],["formControlName","usernamePassword"],["formControlName","caCert",3,"hint","label","allowedExtensions","accept","dropLabel",4,"ngIf"],[3,"value"],["appearance","outline"],["translate",""],["matInput","","formControlName","accessToken"],[4,"ngIf"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"matTooltip"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"click","matTooltip"],["formControlName","caCert",3,"hint","label","allowedExtensions","accept","dropLabel"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"div",1),t.ɵɵtext(2,"security.security"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(3,2),t.ɵɵelementStart(4,"tb-toggle-select",3),t.ɵɵtemplate(5,L6,3,4,"tb-toggle-option",4),t.ɵɵpipe(6,"keyvalue"),t.ɵɵelementEnd(),t.ɵɵtemplate(7,z6,10,5,"mat-form-field",5),t.ɵɵelement(8,"tb-gateway-username-configuration",6),t.ɵɵtemplate(9,U6,4,11,"tb-file-input",7),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("formGroup",n.securityFormGroup),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(6,6,n.securityTypes)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.securityFormGroup.get("type").value.toLowerCase().includes("accesstoken")),t.ɵɵadvance(),t.ɵɵclassProp("hidden","usernamePassword"!==n.securityFormGroup.get("type").value),t.ɵɵadvance(),t.ɵɵproperty("ngIf",n.securityFormGroup.get("type").value.toLowerCase().includes("tls")))},dependencies:t.ɵɵgetComponentDepsFactory(j6,[j,_,B6]),encapsulation:2})}}const H6=["configGroup"];function W6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.thingsboard-host-required")))}function $6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-required")))}function K6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-min")))}function Y6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-max")))}function X6(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.thingsboard-port-pattern")))}function Z6(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-gateway-security-configuration",20),t.ɵɵlistener("initialized",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext(2);return t.ɵɵresetView(a.onInitialized(n))})),t.ɵɵelementEnd()}}function Q6(e,n){if(1&e&&t.ɵɵelement(0,"tb-report-strategy",21),2&e){const e=t.ɵɵnextContext(2);t.ɵɵproperty("defaultValue",e.ReportStrategyDefaultValue.Gateway)}}function J6(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",7)(1,"div",8)(2,"div",9),t.ɵɵpipe(3,"translate"),t.ɵɵelementStart(4,"mat-slide-toggle",10),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"div",9),t.ɵɵpipe(8,"translate"),t.ɵɵelementStart(9,"mat-slide-toggle",11),t.ɵɵtext(10),t.ɵɵpipe(11,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(12,"div",12)(13,"mat-form-field",13)(14,"mat-label",14),t.ɵɵtext(15,"gateway.thingsboard-host"),t.ɵɵelementEnd(),t.ɵɵelement(16,"input",15),t.ɵɵelementStart(17,"mat-icon",16),t.ɵɵpipe(18,"translate"),t.ɵɵtext(19,"info_outlined "),t.ɵɵelementEnd(),t.ɵɵtemplate(20,W6,3,3,"mat-error"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"mat-form-field",13)(22,"mat-label",14),t.ɵɵtext(23,"gateway.thingsboard-port"),t.ɵɵelementEnd(),t.ɵɵelement(24,"input",17),t.ɵɵtemplate(25,$6,3,3,"mat-error")(26,K6,3,3,"mat-error")(27,Y6,3,3,"mat-error")(28,X6,3,3,"mat-error"),t.ɵɵelementStart(29,"mat-icon",16),t.ɵɵpipe(30,"translate"),t.ɵɵtext(31,"info_outlined "),t.ɵɵelementEnd()()()(),t.ɵɵtemplate(32,Z6,1,0,"tb-gateway-security-configuration",18),t.ɵɵpipe(33,"async"),t.ɵɵtemplate(34,Q6,1,1,"tb-report-strategy",19),t.ɵɵelementEnd()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,10,"gateway.hints.remote-configuration")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,12,"gateway.remote-configuration")," "),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(8,14,"gateway.hints.remote-shell")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(11,16,"gateway.remote-shell")," "),t.ɵɵadvance(7),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(18,18,"gateway.hints.host")),t.ɵɵadvance(3),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.host").hasError("required")?20:-1),t.ɵɵadvance(5),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.port").hasError("required")?25:e.basicFormGroup.get("thingsboard.port").hasError("min")?26:e.basicFormGroup.get("thingsboard.port").hasError("max")?27:e.basicFormGroup.get("thingsboard.port").hasError("pattern")?28:-1),t.ɵɵadvance(4),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(30,20,"gateway.hints.port")),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(33,22,e.initialCredentials$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.withReportStrategy)}}function e7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-slide-toggle",23)(1,"mat-label",33),t.ɵɵpipe(2,"translate"),t.ɵɵtext(3),t.ɵɵpipe(4,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(5,"mat-slide-toggle",34)(6,"mat-label",33),t.ɵɵpipe(7,"translate"),t.ɵɵtext(8),t.ɵɵpipe(9,"translate"),t.ɵɵelementEnd()()),2&e&&(t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(2,4,"gateway.hints.enable-general-statistics")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,6,"gateway.statistics.general-statistics")," "),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(7,8,"gateway.hints.enable-custom-statistics")),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(9,10,"gateway.statistics.custom-statistics")," "))}function t7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-slide-toggle",23),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.statistics")," "))}function n7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.send-period-required")))}function a7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.send-period-min")))}function i7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.send-period-pattern")))}function r7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.custom-send-period-required")))}function o7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.custom-send-period-min")))}function s7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.custom-send-period-pattern")))}function l7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.time-series-name-required")))}function p7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"gateway.statistics.time-series-name-pattern")," "))}function c7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.time-series-name-already-exists")))}function d7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-required")))}function u7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-min")))}function m7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.timeout-pattern")))}function h7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.command-required")))}function g7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.command-pattern")))}function f7(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",35)(1,"section",36)(2,"section",37)(3,"mat-form-field",38)(4,"mat-label",14),t.ɵɵtext(5,"gateway.statistics.name"),t.ɵɵelementEnd(),t.ɵɵelement(6,"input",39),t.ɵɵtemplate(7,l7,3,3,"mat-error")(8,p7,3,3,"mat-error")(9,c7,3,3,"mat-error"),t.ɵɵelementStart(10,"mat-icon",16),t.ɵɵpipe(11,"translate"),t.ɵɵtext(12,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(13,"mat-form-field",38)(14,"mat-label",14),t.ɵɵtext(15,"gateway.statistics.timeout"),t.ɵɵelementEnd(),t.ɵɵelement(16,"input",40),t.ɵɵtemplate(17,d7,3,3,"mat-error")(18,u7,3,3,"mat-error")(19,m7,3,3,"mat-error"),t.ɵɵelementStart(20,"mat-icon",16),t.ɵɵpipe(21,"translate"),t.ɵɵtext(22,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(23,"section")(24,"mat-form-field",41)(25,"mat-label",14),t.ɵɵtext(26,"gateway.statistics.command"),t.ɵɵelementEnd(),t.ɵɵelement(27,"input",42),t.ɵɵtemplate(28,h7,3,3,"mat-error")(29,g7,3,3,"mat-error"),t.ɵɵelementStart(30,"mat-icon",16),t.ɵɵpipe(31,"translate"),t.ɵɵtext(32,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(33,"section")(34,"mat-expansion-panel",43)(35,"mat-expansion-panel-header")(36,"mat-panel-title")(37,"div",28),t.ɵɵtext(38,"gateway.advanced-settings"),t.ɵɵelementEnd()()(),t.ɵɵelementStart(39,"mat-form-field",38)(40,"mat-label",14),t.ɵɵtext(41,"gateway.statistics.install-cmd"),t.ɵɵelementEnd(),t.ɵɵelement(42,"input",44),t.ɵɵelementStart(43,"mat-icon",45),t.ɵɵpipe(44,"translate"),t.ɵɵtext(45,"info_outlined "),t.ɵɵelementEnd()()()()(),t.ɵɵelementStart(46,"button",46),t.ɵɵpipe(47,"translate"),t.ɵɵlistener("click",(function(n){const a=t.ɵɵrestoreView(e).index,i=t.ɵɵnextContext(2);return t.ɵɵresetView(i.removeCommandControl(a,n))})),t.ɵɵelementStart(48,"mat-icon"),t.ɵɵtext(49,"delete"),t.ɵɵelementEnd()()()}if(2&e){const e=n.$implicit,a=n.index,i=t.ɵɵnextContext(2);t.ɵɵadvance(),t.ɵɵproperty("formGroupName",a),t.ɵɵadvance(6),t.ɵɵconditional(e.get("attributeOnGateway").hasError("required")?7:e.get("attributeOnGateway").hasError("pattern")?8:e.get("attributeOnGateway").hasError("duplicateName")?9:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(11,10,"gateway.hints.attribute")),t.ɵɵadvance(7),t.ɵɵconditional(e.get("timeout").hasError("required")?17:e.get("timeout").hasError("min")?18:e.get("timeout").hasError("pattern")?19:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(21,12,"gateway.hints.timeout")),t.ɵɵadvance(8),t.ɵɵconditional(e.get("command").hasError("required")?28:e.get("command").hasError("pattern")?29:-1),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(31,14,"gateway.hints.command")),t.ɵɵadvance(13),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(44,16,"gateway.hints.install-cmd")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(47,18,"gateway.statistics.remove")),t.ɵɵproperty("disabled",!i.basicFormGroup.get("thingsboard.remoteConfiguration").value)}}function y7(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",7)(1,"div",22),t.ɵɵtemplate(2,e7,10,12)(3,t7,3,3,"mat-slide-toggle",23),t.ɵɵelementStart(4,"mat-form-field",24)(5,"mat-label",14),t.ɵɵtext(6,"gateway.statistics.send-period"),t.ɵɵelementEnd(),t.ɵɵelement(7,"input",25),t.ɵɵtemplate(8,n7,3,3,"mat-error")(9,a7,3,3,"mat-error")(10,i7,3,3,"mat-error"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-form-field",24)(12,"mat-label",14),t.ɵɵtext(13,"gateway.statistics.custom-send-period"),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",26),t.ɵɵtemplate(15,r7,3,3,"mat-error")(16,o7,3,3,"mat-error")(17,s7,3,3,"mat-error"),t.ɵɵelementEnd()(),t.ɵɵelementStart(18,"div",27)(19,"div",28),t.ɵɵtext(20,"gateway.statistics.commands"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"div",29),t.ɵɵtext(22,"gateway.hints.commands"),t.ɵɵelementEnd(),t.ɵɵelementContainerStart(23,30),t.ɵɵtemplate(24,f7,50,20,"div",31),t.ɵɵelementStart(25,"button",32),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.addCommand())})),t.ɵɵtext(26),t.ɵɵpipe(27,"translate"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵconditional(e.hasUpdatedStatistics?2:3),t.ɵɵadvance(6),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.statistics.statsSendPeriodInSeconds").hasError("required")?8:e.basicFormGroup.get("thingsboard.statistics.statsSendPeriodInSeconds").hasError("min")?9:e.basicFormGroup.get("thingsboard.statistics.statsSendPeriodInSeconds").hasError("pattern")?10:-1),t.ɵɵadvance(7),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.statistics.customStatsSendPeriodInSeconds").hasError("required")?15:e.basicFormGroup.get("thingsboard.statistics.customStatsSendPeriodInSeconds").hasError("min")?16:e.basicFormGroup.get("thingsboard.statistics.customStatsSendPeriodInSeconds").hasError("pattern")?17:-1),t.ɵɵadvance(9),t.ɵɵproperty("ngForOf",e.commandFormArray().controls),t.ɵɵadvance(),t.ɵɵproperty("disabled",!e.basicFormGroup.get("thingsboard.remoteConfiguration").value),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(27,6,"gateway.statistics.add")," ")}}function v7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-timeout-seconds-required")))}function b7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-timeout-seconds-min")))}function x7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-timeout-seconds-pattern")))}function w7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-check-period-seconds-required")))}function S7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-check-period-seconds-min")))}function C7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.inactivity-check-period-seconds-pattern")))}function _7(e,n){if(1&e&&(t.ɵɵelementStart(0,"section",37)(1,"mat-form-field",38)(2,"mat-label",14),t.ɵɵtext(3,"gateway.inactivity-timeout-seconds"),t.ɵɵelementEnd(),t.ɵɵelement(4,"input",56),t.ɵɵtemplate(5,v7,3,3,"mat-error")(6,b7,3,3,"mat-error")(7,x7,3,3,"mat-error"),t.ɵɵelementStart(8,"mat-icon",16),t.ɵɵpipe(9,"translate"),t.ɵɵtext(10,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-form-field",38)(12,"mat-label",14),t.ɵɵtext(13,"gateway.inactivity-check-period-seconds"),t.ɵɵelementEnd(),t.ɵɵelement(14,"input",57),t.ɵɵtemplate(15,w7,3,3,"mat-error")(16,S7,3,3,"mat-error")(17,C7,3,3,"mat-error"),t.ɵɵelementStart(18,"mat-icon",16),t.ɵɵpipe(19,"translate"),t.ɵɵtext(20,"info_outlined "),t.ɵɵelementEnd()()()),2&e){const e=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityTimeoutSeconds").hasError("required")?5:e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityTimeoutSeconds").hasError("min")?6:e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityTimeoutSeconds").hasError("pattern")?7:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(9,4,"gateway.hints.inactivity-timeout")),t.ɵɵadvance(7),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityCheckPeriodSeconds").hasError("required")?15:e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityCheckPeriodSeconds").hasError("min")?16:e.basicFormGroup.get("thingsboard.checkingDeviceActivity.inactivityCheckPeriodSeconds").hasError("pattern")?17:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(19,6,"gateway.hints.inactivity-period"))}}function T7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.min-pack-send-delay-required")))}function I7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.min-pack-send-delay-min")))}function E7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.min-pack-send-delay-pattern")))}function M7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.mqtt-qos-required")))}function k7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.mqtt-qos-range")))}function P7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.mqtt-qos-range")))}function D7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.check-connectors-configuration-required")))}function O7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.check-connectors-configuration-min")))}function A7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.check-connectors-configuration-pattern")))}function F7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.max-payload-size-bytes-required")))}function R7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.max-payload-size-bytes-min")))}function B7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.max-payload-size-bytes-pattern")))}function N7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.min-pack-size-to-send-required")))}function L7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.min-pack-size-to-send-min")))}function V7(e,n){1&e&&(t.ɵɵelementStart(0,"mat-error"),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,"gateway.statistics.min-pack-size-to-send-pattern")))}function q7(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",7)(1,"div",47)(2,"div",9),t.ɵɵpipe(3,"translate"),t.ɵɵelementStart(4,"mat-slide-toggle",48),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()(),t.ɵɵtemplate(7,_7,21,8,"section",49),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"div",8)(9,"div",28),t.ɵɵtext(10,"gateway.advanced"),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"section",37)(12,"mat-form-field",38)(13,"mat-label",14),t.ɵɵtext(14,"gateway.min-pack-send-delay"),t.ɵɵelementEnd(),t.ɵɵelement(15,"input",50),t.ɵɵtemplate(16,T7,3,3,"mat-error")(17,I7,3,3,"mat-error")(18,E7,3,3,"mat-error"),t.ɵɵelementStart(19,"mat-icon",16),t.ɵɵpipe(20,"translate"),t.ɵɵtext(21,"info_outlined "),t.ɵɵelementEnd()(),t.ɵɵelementStart(22,"mat-form-field",38)(23,"mat-label",14),t.ɵɵtext(24,"gateway.mqtt-qos"),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"mat-select",51)(26,"mat-option",52),t.ɵɵtext(27,"0"),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"mat-option",52),t.ɵɵtext(29,"1"),t.ɵɵelementEnd()(),t.ɵɵtemplate(30,M7,3,3,"mat-error")(31,k7,3,3,"mat-error")(32,P7,3,3,"mat-error"),t.ɵɵelementStart(33,"mat-icon",16),t.ɵɵpipe(34,"translate"),t.ɵɵtext(35,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(36,"section",37)(37,"mat-form-field",38)(38,"mat-label",14),t.ɵɵtext(39,"gateway.statistics.check-connectors-configuration"),t.ɵɵelementEnd(),t.ɵɵelement(40,"input",53),t.ɵɵtemplate(41,D7,3,3,"mat-error")(42,O7,3,3,"mat-error")(43,A7,3,3,"mat-error"),t.ɵɵelementEnd(),t.ɵɵelementStart(44,"mat-form-field",38)(45,"mat-label",14),t.ɵɵtext(46,"gateway.statistics.max-payload-size-bytes"),t.ɵɵelementEnd(),t.ɵɵelement(47,"input",54),t.ɵɵtemplate(48,F7,3,3,"mat-error")(49,R7,3,3,"mat-error")(50,B7,3,3,"mat-error"),t.ɵɵelementStart(51,"mat-icon",16),t.ɵɵpipe(52,"translate"),t.ɵɵtext(53,"info_outlined "),t.ɵɵelementEnd()()(),t.ɵɵelementStart(54,"section",37)(55,"mat-form-field",38)(56,"mat-label",14),t.ɵɵtext(57,"gateway.statistics.min-pack-size-to-send"),t.ɵɵelementEnd(),t.ɵɵelement(58,"input",55),t.ɵɵtemplate(59,N7,3,3,"mat-error")(60,L7,3,3,"mat-error")(61,V7,3,3,"mat-error"),t.ɵɵelementStart(62,"mat-icon",16),t.ɵɵpipe(63,"translate"),t.ɵɵtext(64,"info_outlined "),t.ɵɵelementEnd()()()()()),2&e){const e=t.ɵɵnextContext();t.ɵɵadvance(),t.ɵɵclassProp("no-padding-bottom",e.basicFormGroup.get("thingsboard.checkingDeviceActivity.checkDeviceInactivity").value),t.ɵɵadvance(),t.ɵɵpropertyInterpolate("tb-hint-tooltip-icon",t.ɵɵpipeBind1(3,16,"gateway.hints.check-device-activity")),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(6,18,"gateway.checking-device-activity")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",e.basicFormGroup.get("thingsboard.checkingDeviceActivity.checkDeviceInactivity").value),t.ɵɵadvance(9),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.minPackSendDelayMS").hasError("required")?16:e.basicFormGroup.get("thingsboard.minPackSendDelayMS").hasError("min")?17:e.basicFormGroup.get("thingsboard.minPackSendDelayMS").hasError("pattern")?18:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(20,20,"gateway.hints.minimal-pack-delay")),t.ɵɵadvance(7),t.ɵɵproperty("value",0),t.ɵɵadvance(2),t.ɵɵproperty("value",1),t.ɵɵadvance(2),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.qos").hasError("required")?30:e.basicFormGroup.get("thingsboard.qos").hasError("min")?31:e.basicFormGroup.get("thingsboard.qos").hasError("max")?32:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(34,22,"gateway.hints.qos")),t.ɵɵadvance(8),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.checkConnectorsConfigurationInSeconds").hasError("required")?41:e.basicFormGroup.get("thingsboard.checkConnectorsConfigurationInSeconds").hasError("min")?42:e.basicFormGroup.get("thingsboard.checkConnectorsConfigurationInSeconds").hasError("pattern")?43:-1),t.ɵɵadvance(7),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.maxPayloadSizeBytes").hasError("required")?48:e.basicFormGroup.get("thingsboard.maxPayloadSizeBytes").hasError("min")?49:e.basicFormGroup.get("thingsboard.maxPayloadSizeBytes").hasError("pattern")?50:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(52,24,"gateway.hints.max-payload-size-bytes")),t.ɵɵadvance(8),t.ɵɵconditional(e.basicFormGroup.get("thingsboard.minPackSizeToSend").hasError("required")?59:e.basicFormGroup.get("thingsboard.minPackSizeToSend").hasError("min")?60:e.basicFormGroup.get("thingsboard.minPackSizeToSend").hasError("pattern")?61:-1),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("matTooltip",t.ɵɵpipeBind1(63,26,"gateway.hints.min-pack-size-to-send"))}}class G7{constructor(e,t,n,a,i){this.fb=e,this.deviceService=t,this.gatewayCredentialsService=n,this.destroyRef=a,this.dialog=i,this.gatewayVersion=pt.Legacy,this.dialogMode=!1,this.withReportStrategy=!1,this.initialized=new u,this.ReportStrategyDefaultValue=en,this.initialCredentials$=this.gatewayCredentialsService.initialCredentials$,this.onChange=()=>{},this.destroy$=new te,this.initBasicFormGroup(),this.observeFormChanges(),this.basicFormGroup.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e)}))}ngOnChanges(e){e.withReportStrategy&&!e.withReportStrategy.firstChange&&this.withReportStrategy&&this.basicFormGroup.get("thingsboard.reportStrategy").enable({emitEvent:!1}),e.gatewayVersion?.previousValue!==e.gatewayVersion.currentValue&&this.onVersionChange()}ngAfterViewInit(){this.defaultTab&&(this.configGroup.selectedIndex=o5[this.defaultTab])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}writeValue(e){this.basicFormGroup.patchValue(e,{emitEvent:!1});const t=e?.thingsboard?.statistics?.commands??[];this.commandFormArray().clear({emitEvent:!1}),t.forEach((e=>this.addCommand(e,!1)))}validate(){return this.basicFormGroup.valid?null:{basicFormGroup:{valid:!1}}}commandFormArray(){return this.basicFormGroup.get("thingsboard.statistics.commands")}removeCommandControl(e,t){""!==t.pointerType&&(this.commandFormArray().removeAt(e),this.basicFormGroup.markAsDirty())}openConfigurationConfirmDialog(){this.deviceService.getDevice(this.device.id).pipe(le(this.destroy$)).subscribe((e=>{this.dialog.open(yW,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{gatewayName:e.name}}).afterClosed().pipe(ye(1)).subscribe((e=>{e||this.basicFormGroup.get("thingsboard.remoteConfiguration").setValue(!0,{emitEvent:!1})}))}))}addCommand(e,t=!0){const{attributeOnGateway:n=null,command:a=null,timeout:i=10,installCmd:r=""}=e||{},o=this.fb.group({attributeOnGateway:[n,[$.required,$.pattern(an),this.uniqNameRequired()]],command:[a,[$.required,$.pattern(/^(?=\S).*\S$/)]],timeout:[i,[$.required,$.min(1),$.pattern(nn),$.pattern(/^[^.\s]+$/)]],installCmd:[r,$.pattern(an)]});this.commandFormArray().push(o,{emitEvent:t})}uniqNameRequired(){return e=>{const t=e.value?.trim().toLowerCase(),n=e.dirty&&t&&this.commandFormArray().value.some((e=>e.attributeOnGateway?.toLowerCase()===t));return n?{duplicateName:{valid:!1}}:null}}onInitialized(e){this.basicFormGroup.patchValue(e,{emitEvent:!1}),this.initialized.emit(this.basicFormGroup.value)}initBasicFormGroup(){this.basicFormGroup=this.fb.group({thingsboard:this.initThingsboardFormGroup(),storage:[],grpc:[],connectors:this.fb.array([]),logs:[]})}initThingsboardFormGroup(){return this.fb.group({host:[window.location.hostname,[$.required,$.pattern(/^[^\s]+$/)]],port:[1883,[$.required,$.min(1),$.max(65535),$.pattern(nn)]],remoteShell:[!1],remoteConfiguration:[!0],checkConnectorsConfigurationInSeconds:[60,[$.required,$.min(1),$.pattern(nn)]],statistics:this.fb.group({enable:[!0],enableCustom:[{value:!1,disabled:!0}],statsSendPeriodInSeconds:[3600,[$.required,$.min(60),$.pattern(nn)]],customStatsSendPeriodInSeconds:[3600,[$.required,$.min(60),$.pattern(nn)]],commands:this.fb.array([])}),maxPayloadSizeBytes:[8196,[$.required,$.min(100),$.pattern(nn)]],minPackSendDelayMS:[50,[$.required,$.min(10),$.pattern(nn)]],minPackSizeToSend:[500,[$.required,$.min(100),$.pattern(nn)]],handleDeviceRenaming:[!0],checkingDeviceActivity:this.initCheckingDeviceActivityFormGroup(),security:[],qos:[1],reportStrategy:[{value:{type:Jt.OnReceived},disabled:!0}]})}initCheckingDeviceActivityFormGroup(){return this.fb.group({checkDeviceInactivity:[!1],inactivityTimeoutSeconds:[300,[$.min(1),$.pattern(nn)]],inactivityCheckPeriodSeconds:[10,[$.min(1),$.pattern(nn)]]})}onVersionChange(){if(this.hasUpdatedStatistics=Yi.parseVersion(this.gatewayVersion)>=Yi.parseVersion(pt.v3_7_3),this.hasUpdatedStatistics){const e=this.basicFormGroup.get("thingsboard.statistics.enableCustom");e.enable({emitEvent:!1}),this.basicFormGroup.get("thingsboard.statistics.enable").valueChanges.pipe(xn(this.destroyRef)).subscribe((t=>{t||e.patchValue(!1,{emitEvent:!1}),e[t?"enable":"disable"]({emitEvent:!1})}))}}observeFormChanges(){this.observeRemoteConfigurationChanges(),this.observeDeviceActivityChanges()}observeRemoteConfigurationChanges(){this.basicFormGroup.get("thingsboard.remoteConfiguration").valueChanges.pipe(le(this.destroy$)).subscribe((e=>{e||this.openConfigurationConfirmDialog()}))}observeDeviceActivityChanges(){const e=this.basicFormGroup.get("thingsboard.checkingDeviceActivity");e.get("checkDeviceInactivity").valueChanges.pipe(le(this.destroy$)).subscribe((t=>{e.updateValueAndValidity();const n=[$.min(1),$.required,$.pattern(nn)];t?(e.get("inactivityTimeoutSeconds").setValidators(n),e.get("inactivityCheckPeriodSeconds").setValidators(n)):(e.get("inactivityTimeoutSeconds").clearValidators(),e.get("inactivityCheckPeriodSeconds").clearValidators()),e.get("inactivityTimeoutSeconds").updateValueAndValidity({emitEvent:!1}),e.get("inactivityCheckPeriodSeconds").updateValueAndValidity({emitEvent:!1})}))}static{this.ɵfac=function(e){return new(e||G7)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(_e.DeviceService),t.ɵɵdirectiveInject(N6),t.ɵɵdirectiveInject(t.DestroyRef),t.ɵɵdirectiveInject(qe.MatDialog))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:G7,selectors:[["tb-gateway-basic-configuration"]],viewQuery:function(e,n){if(1&e&&t.ɵɵviewQuery(H6,5),2&e){let e;t.ɵɵqueryRefresh(e=t.ɵɵloadQuery())&&(n.configGroup=e.first)}},inputs:{device:"device",defaultTab:"defaultTab",gatewayVersion:"gatewayVersion",dialogMode:"dialogMode",withReportStrategy:"withReportStrategy"},outputs:{initialized:"initialized"},standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>G7)),multi:!0},{provide:K,useExisting:c((()=>G7)),multi:!0}]),t.ɵɵNgOnChangesFeature,t.ɵɵStandaloneFeature],decls:20,vars:21,consts:[["configGroup",""],[1,"tab-group-block",3,"formGroup"],[3,"label"],["matTabContent",""],["formControlName","logs",1,"configuration-block",3,"initialized"],["formControlName","storage",3,"initialized"],["formControlName","grpc",3,"initialized"],["formGroupName","thingsboard",1,"mat-content","mat-padding","configuration-block"],[1,"tb-form-panel","no-padding-bottom"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["color","primary","formControlName","remoteConfiguration",1,"mat-slide"],["color","primary","formControlName","remoteShell",1,"mat-slide"],[1,"no-border","no-padding","tb-standard-fields","xs:flex-col","flex","gap-2"],["appearance","outline",1,"flex","flex-1"],["translate",""],["matInput","","formControlName","host"],["matIconSuffix","",2,"cursor","pointer",3,"matTooltip"],["matInput","","formControlName","port","type","number","min","0"],["formControlName","security",3,"initialized",4,"ngIf"],["class","tb-form-panel","formControlName","reportStrategy",3,"defaultValue",4,"ngIf"],["formControlName","security",3,"initialized"],["formControlName","reportStrategy",1,"tb-form-panel",3,"defaultValue"],["formGroupName","statistics",1,"tb-form-panel","no-padding-bottom"],["color","primary","formControlName","enable",1,"mat-slide"],["appearance","outline"],["matInput","","formControlName","statsSendPeriodInSeconds","type","number","min","60"],["matInput","","formControlName","customStatsSendPeriodInSeconds","type","number","min","60"],[1,"tb-form-panel"],["translate","",1,"tb-form-panel-title"],["translate","",1,"tb-form-panel-hint"],["formGroupName","statistics"],["formArrayName","commands","class","statistics-container flex flex-row",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary","type","button",2,"width","fit-content",3,"click","disabled"],[3,"tb-hint-tooltip-icon"],["color","primary","formControlName","enableCustom",1,"mat-slide"],["formArrayName","commands",1,"statistics-container","flex","flex-row"],[1,"tb-form-panel","stroked","no-padding-bottom","no-gap","command-container",3,"formGroupName"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],["appearance","outline",1,"flex"],["matInput","","formControlName","attributeOnGateway"],["matInput","","formControlName","timeout","type","number","min","0"],["appearance","outline",1,"mat-block"],["matInput","","formControlName","command"],[1,"tb-settings","pb-4"],["matInput","","formControlName","installCmd"],["matIconSuffix","",1,"cursor-pointer",3,"matTooltip"],["mat-icon-button","","matTooltipPosition","above",1,"tb-box-button",3,"click","disabled","matTooltip"],["formGroupName","checkingDeviceActivity",1,"tb-form-panel"],["color","primary","formControlName","checkDeviceInactivity",1,"mat-slide"],["class","tb-form-row no-border no-padding tb-standard-fields column-xs",4,"ngIf"],["matInput","","formControlName","minPackSendDelayMS","type","number","min","0"],["formControlName","qos"],[3,"value"],["matInput","","formControlName","checkConnectorsConfigurationInSeconds","type","number","min","0"],["matInput","","formControlName","maxPayloadSizeBytes","type","number","min","0"],["matInput","","formControlName","minPackSizeToSend","type","number","min","0"],["matInput","","formControlName","inactivityTimeoutSeconds","type","number","min","0"],["matInput","","type","number","min","0","formControlName","inactivityCheckPeriodSeconds"]],template:function(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-tab-group",1,0)(2,"mat-tab",2),t.ɵɵpipe(3,"translate"),t.ɵɵtemplate(4,J6,35,24,"ng-template",3),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"mat-tab",2),t.ɵɵpipe(6,"translate"),t.ɵɵelementStart(7,"tb-gateway-logs-configuration",4),t.ɵɵlistener("initialized",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.onInitialized(a))})),t.ɵɵelementEnd()(),t.ɵɵelementStart(8,"mat-tab",2),t.ɵɵpipe(9,"translate"),t.ɵɵelementStart(10,"tb-gateway-storage-configuration",5),t.ɵɵlistener("initialized",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.onInitialized(a))})),t.ɵɵelementEnd()(),t.ɵɵelementStart(11,"mat-tab",2),t.ɵɵpipe(12,"translate"),t.ɵɵelementStart(13,"tb-gateway-grpc-configuration",6),t.ɵɵlistener("initialized",(function(a){return t.ɵɵrestoreView(e),t.ɵɵresetView(n.onInitialized(a))})),t.ɵɵelementEnd()(),t.ɵɵelementStart(14,"mat-tab",2),t.ɵɵpipe(15,"translate"),t.ɵɵtemplate(16,y7,28,8,"ng-template",3),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"mat-tab",2),t.ɵɵpipe(18,"translate"),t.ɵɵtemplate(19,q7,65,28,"ng-template",3),t.ɵɵelementEnd()()}2&e&&(t.ɵɵclassProp("dialog-mode",n.dialogMode),t.ɵɵproperty("formGroup",n.basicFormGroup),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(3,9,"gateway.general")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(6,11,"gateway.logs.logs")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(9,13,"gateway.storage")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(12,15,"gateway.grpc")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(15,17,"gateway.statistics.statistics")),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(18,19,"gateway.other")))},dependencies:t.ɵɵgetComponentDepsFactory(G7,[j,_,Xn,$5,m6,T6,j6]),styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:grid;grid-template-rows:min-content minmax(auto,1fr) min-content}[_nghost-%COMP%]   .configuration-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{grid-row:1;background:transparent;color:#000000de!important}[_nghost-%COMP%]   .tab-group-block[_ngcontent-%COMP%]{min-width:0;height:100%;min-height:0;grid-row:2}[_nghost-%COMP%]   .toggle-group[_ngcontent-%COMP%]{margin-right:auto}[_nghost-%COMP%]   .first-capital[_ngcontent-%COMP%]{text-transform:capitalize}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]   .saving-period[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .statistics-container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .statistics-container[_ngcontent-%COMP%]   .command-container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]:first-child{display:block!important}[_nghost-%COMP%]     .pointer-event{pointer-events:all}[_nghost-%COMP%]     .toggle-group span{padding:0 25px}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{color:#e0e0e0}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix:hover{color:#9e9e9e}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex;align-items:center}']})}}e("GatewayBasicConfigurationComponent",G7),Ge([I()],G7.prototype,"dialogMode",void 0),Ge([I()],G7.prototype,"withReportStrategy",void 0);class z7{constructor(e){this.fb=e,this.destroy$=new te,this.advancedFormControl=this.fb.control(""),this.advancedFormControl.valueChanges.pipe(le(this.destroy$)).subscribe((e=>{this.onChange(e),this.onTouched()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.advancedFormControl.reset(e,{emitEvent:!1})}validate(){return this.advancedFormControl.valid?null:{advancedFormControl:{valid:!1}}}static{this.ɵfac=function(e){return new(e||z7)(t.ɵɵdirectiveInject(H.FormBuilder))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:z7,selectors:[["tb-gateway-advanced-configuration"]],standalone:!0,features:[t.ɵɵProvidersFeature([{provide:W,useExisting:c((()=>z7)),multi:!0},{provide:K,useExisting:c((()=>z7)),multi:!0}]),t.ɵɵStandaloneFeature],decls:2,vars:4,consts:[["fillHeight","true","jsonRequired","",1,"flex","h-full","flex-col","p-2",3,"label","formControl"]],template:function(e,n){1&e&&(t.ɵɵelement(0,"tb-json-object-edit",0),t.ɵɵpipe(1,"translate")),2&e&&(t.ɵɵpropertyInterpolate("label",t.ɵɵpipeBind1(1,2,"gateway.configuration")),t.ɵɵproperty("formControl",n.advancedFormControl))},dependencies:t.ɵɵgetComponentDepsFactory(z7,[j,_]),encapsulation:2})}}function U7(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.cancel())})),t.ɵɵelementStart(1,"mat-icon",15),t.ɵɵtext(2,"close"),t.ɵɵelementEnd()()}}function j7(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tb-gateway-basic-configuration",16),t.ɵɵpipe(1,"withReportStrategy"),t.ɵɵlistener("initialized",(function(n){t.ɵɵrestoreView(e);const a=t.ɵɵnextContext();return t.ɵɵresetView(a.onInitialized(n))})),t.ɵɵelementEnd()}if(2&e){const e=t.ɵɵnextContext();t.ɵɵproperty("device",e.device)("defaultTab",e.defaultTab)("gatewayVersion",e.gatewayVersion)("dialogMode",!!e.dialogRef)("withReportStrategy",t.ɵɵpipeBind1(1,5,e.gatewayVersion))}}function H7(e,n){1&e&&t.ɵɵelement(0,"tb-gateway-advanced-configuration",10)}function W7(e,n){if(1&e){const e=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",17),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(e);const n=t.ɵɵnextContext();return t.ɵɵresetView(n.cancel())})),t.ɵɵtext(1),t.ɵɵpipe(2,"translate"),t.ɵɵelementEnd()}2&e&&(t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,"action.cancel")," "))}e("GatewayAdvancedConfigurationComponent",z7);class $7{constructor(e,t,n,a,i){this.fb=e,this.attributeService=t,this.cd=n,this.gatewayCredentialsService=a,this.destroyRef=i,this.ConfigurationModes=Qt,this.gatewayConfigAttributeKeys=["general_configuration","grpc_configuration","logs_configuration","storage_configuration","RemoteLoggingLevel","mode"],this.useUpdatedLogs=!1,this.gatewayConfigGroup=this.fb.group({basicConfig:[],advancedConfig:[],mode:[Qt.BASIC]}),this.observeAlignConfigs()}ngAfterViewInit(){this.fetchConfigAttribute(this.device)}saveConfig(){const{mode:e,advancedConfig:t}=Ne(this.removeEmpty(this.gatewayConfigGroup.value)),n={mode:e,...t};n.thingsboard.statistics.commands=Object.values(n.thingsboard.statistics.commands??[]);const a=this.generateAttributes(n);this.attributeService.saveEntityAttributes(this.device,D.SHARED_SCOPE,a).pipe(be((e=>this.gatewayCredentialsService.updateCredentials(n.thingsboard.security))),xn(this.destroyRef)).subscribe((()=>{this.dialogRef?this.dialogRef.close():(this.gatewayConfigGroup.markAsPristine(),this.cd.detectChanges())}))}onInitialized(e){this.gatewayConfigGroup.get("basicConfig").patchValue(e,{emitEvent:!1}),this.gatewayConfigGroup.get("advancedConfig").patchValue(e,{emitEvent:!1})}observeAlignConfigs(){this.gatewayConfigGroup.get("basicConfig").valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>{const t=this.gatewayConfigGroup.get("advancedConfig");Se(t.value,e)||this.gatewayConfigGroup.get("mode").value!==Qt.BASIC||t.patchValue(e,{emitEvent:!1})})),this.gatewayConfigGroup.get("advancedConfig").valueChanges.pipe(xn(this.destroyRef)).subscribe((e=>{const t=this.gatewayConfigGroup.get("basicConfig");Se(t.value,e)||this.gatewayConfigGroup.get("mode").value!==Qt.ADVANCED||t.patchValue(e,{emitEvent:!1})}))}generateAttributes(e){const t=[],n=(e,n)=>{t.push({key:e,value:n})},a=(e,t)=>{t={...t,ts:(new Date).getTime()},n(e,t)};return n("RemoteLoggingLevel",e.logs?.logLevel??lt.NONE),delete e.connectors,n("logs_configuration",this.generateLogsFile(e.logs)),a("grpc_configuration",e.grpc),a("storage_configuration",e.storage),a("general_configuration",e.thingsboard),n("mode",e.mode),t}cancel(){this.dialogRef&&this.dialogRef.close()}removeEmpty(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>null!=t)).map((([e,t])=>[e,t===Object(t)?this.removeEmpty(t):t])))}generateLogsFile(e){const t={version:1,disable_existing_loggers:!1,formatters:{LogFormatter:{class:"logging.Formatter",format:e.logFormat,datefmt:e.dateFormat}},handlers:{consoleHandler:{class:"logging.StreamHandler",formatter:"LogFormatter",level:0,stream:"ext://sys.stdout"},...this.useUpdatedLogs?{}:{databaseHandler:{class:this.useUpdatedLogs?g5:f5,formatter:"LogFormatter",filename:"./logs/database.log",backupCount:1,encoding:"utf-8"}}},loggers:{...this.useUpdatedLogs?{}:{database:{handlers:["databaseHandler","consoleHandler"],level:"DEBUG",propagate:!1}}},root:{level:"ERROR",handlers:["consoleHandler"]},ts:(new Date).getTime()};return this.addLocalLoggers(t,e?.local),t}addLocalLoggers(e,t){if(t)for(const n of Object.keys(t))e.handlers[n+"Handler"]=this.createHandlerObj(t[n],n),e.loggers[n]=this.createLoggerObj(t[n],n)}createHandlerObj(e,t){return{class:this.useUpdatedLogs?g5:f5,formatter:"LogFormatter",filename:`${e.filePath}/${t}.log`,backupCount:e.backupCount,interval:e.savingTime,when:e.savingPeriod,encoding:"utf-8"}}createLoggerObj(e,t){return{handlers:[`${t}Handler`,"consoleHandler"],level:e.logLevel,propagate:!1}}fetchConfigAttribute(e){e.id!==B&&this.attributeService.getEntityAttributes(e,D.CLIENT_SCOPE).pipe(we((t=>t.length?ie(t):this.attributeService.getEntityAttributes(e,D.SHARED_SCOPE,this.gatewayConfigAttributeKeys))),xn(this.destroyRef)).subscribe((e=>{this.gatewayVersion=e.find((e=>"Version"===e.key))?.value,this.useUpdatedLogs=Yi.parseVersion(this.gatewayVersion??pt.Legacy)>=Yi.parseVersion(pt.v3_6_3),this.updateConfigs(e),this.cd.detectChanges()}))}updateConfigs(e){let t={},n=lt.NONE;this.gatewayCredentialsService.setInitialCredentials(this.device),e.forEach((e=>{switch(e.key){case"general_configuration":e.value&&(t={...t,thingsboard:e.value});break;case"grpc_configuration":e.value&&(t={...t,grpc:e.value});break;case"logs_configuration":e.value&&(t={...t,logs:this.logsToObj(e.value)});break;case"storage_configuration":e.value&&(t={...t,storage:e.value});break;case"mode":t={...t,mode:e.value??Qt.BASIC};break;case"RemoteLoggingLevel":e.value&&(n=e.value)}})),t.logs&&(t={...t,logs:{...t.logs,logLevel:n}}),t.thingsboard?.security?this.gatewayCredentialsService.initialCredentials$.pipe(ue(Boolean),ye(1),xn(this.destroyRef)).subscribe((e=>{this.gatewayCredentialsService.shouldUpdateSecurityConfig(t.thingsboard.security)&&(t.thingsboard.security=this.gatewayCredentialsService.credentialsToSecurityConfig(e)),this.gatewayConfigGroup.get("basicConfig").patchValue(t,{emitEvent:!1}),this.gatewayConfigGroup.get("advancedConfig").patchValue(t,{emitEvent:!1})})):(this.gatewayConfigGroup.get("basicConfig").patchValue(t,{emitEvent:!1}),this.gatewayConfigGroup.get("advancedConfig").patchValue(t,{emitEvent:!1}))}logsToObj(e){const{format:t,datefmt:n}=e.formatters.LogFormatter;return{local:Object.keys(l5).reduce(((t,n)=>{const a=e.handlers[`${n}Handler`]||{},i=e.loggers[n]||{};return t[n]={logLevel:i.level||lt.INFO,filePath:a.filename?.split(`/${n}`)[0]||"./logs",backupCount:a.backupCount||7,savingTime:a.interval||3,savingPeriod:a.when||d5.days},t}),{}),logFormat:t,dateFormat:n}}static{this.ɵfac=function(e){return new(e||$7)(t.ɵɵdirectiveInject(H.FormBuilder),t.ɵɵdirectiveInject(_e.AttributeService),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(N6),t.ɵɵdirectiveInject(t.DestroyRef))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:$7,selectors:[["tb-gateway-configuration"]],inputs:{device:"device",defaultTab:"defaultTab",dialogRef:"dialogRef"},standalone:!0,features:[t.ɵɵProvidersFeature([N6]),t.ɵɵStandaloneFeature],decls:24,vars:24,consts:[[1,"flex","size-full","max-w-full","flex-col",3,"formGroup"],["color","primary"],[1,"tb-flex","space-between","align-center","h-16"],["tbTruncateWithTooltip",""],[1,"flex","items-center"],["formControlName","mode",3,"appearance"],[3,"value"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"content-wrapper","flex-1"],["formControlName","basicConfig",3,"device","defaultTab","gatewayVersion","dialogMode","withReportStrategy"],["formControlName","advancedConfig"],[1,"flex","h-full","items-center","justify-end","gap-2","pr-4"],["mat-button","","color","primary","type","button"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["formControlName","basicConfig",3,"initialized","device","defaultTab","gatewayVersion","dialogMode","withReportStrategy"],["mat-button","","color","primary","type","button",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"h2")(4,"div",3),t.ɵɵtext(5),t.ɵɵpipe(6,"translate"),t.ɵɵelementEnd()(),t.ɵɵelementStart(7,"div",4)(8,"tb-toggle-select",5)(9,"tb-toggle-option",6),t.ɵɵtext(10),t.ɵɵpipe(11,"translate"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"tb-toggle-option",6),t.ɵɵtext(13),t.ɵɵpipe(14,"translate"),t.ɵɵelementEnd()(),t.ɵɵtemplate(15,U7,3,0,"button",7),t.ɵɵelementEnd()()(),t.ɵɵelementStart(16,"div",8),t.ɵɵtemplate(17,j7,2,7,"tb-gateway-basic-configuration",9)(18,H7,1,0,"tb-gateway-advanced-configuration",10),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"div",11),t.ɵɵtemplate(20,W7,3,3,"button",12),t.ɵɵelementStart(21,"button",13),t.ɵɵlistener("click",(function(){return n.saveConfig()})),t.ɵɵtext(22),t.ɵɵpipe(23,"translate"),t.ɵɵelementEnd()()()),2&e&&(t.ɵɵproperty("formGroup",n.gatewayConfigGroup),t.ɵɵadvance(),t.ɵɵclassProp("page-header",!n.dialogRef),t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(6,16,"gateway.gateway-configuration")),t.ɵɵadvance(3),t.ɵɵclassProp("dialog-toggle",!!n.dialogRef),t.ɵɵpropertyInterpolate("appearance",n.dialogRef?"stroked":"fill"),t.ɵɵadvance(),t.ɵɵproperty("value",n.ConfigurationModes.BASIC),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(11,18,"gateway.basic")," "),t.ɵɵadvance(2),t.ɵɵproperty("value",n.ConfigurationModes.ADVANCED),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(14,20,"gateway.advanced")," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.dialogRef),t.ɵɵadvance(2),t.ɵɵconditional(n.gatewayConfigGroup.get("mode").value===n.ConfigurationModes.BASIC?17:18),t.ɵɵadvance(3),t.ɵɵconditional(n.dialogRef?20:-1),t.ɵɵadvance(),t.ɵɵproperty("disabled",n.gatewayConfigGroup.invalid||!n.gatewayConfigGroup.dirty),t.ɵɵadvance(),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(23,22,"action.save")," "))},dependencies:t.ɵɵgetComponentDepsFactory($7,[j,_,nr,G7,z7]),styles:['@charset "UTF-8";[_nghost-%COMP%]{overflow:hidden;padding:0!important;max-height:75vh;height:75vh;width:800px;max-width:80vw}@media screen and (max-width: 599px){[_nghost-%COMP%]{max-height:100%;height:100%;width:100%;max-width:100%}}[_nghost-%COMP%]   .page-header.mat-toolbar[_ngcontent-%COMP%]{background:transparent;color:#000000de!important}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{min-height:calc(100% - 116px)}.dialog-toggle[_ngcontent-%COMP%]     .mat-button-toggle-button{color:#ffffffbf}']})}}e("GatewayConfigurationComponent",$7);class K7{constructor(){}static{this.ɵfac=function(e){return new(e||K7)}}static{this.ɵcmp=t.ɵɵdefineComponent({type:K7,selectors:[["tb-lib-styles-entry"]],standalone:!0,features:[t.ɵɵStandaloneFeature],decls:0,vars:0,template:function(e,t){},styles:['@charset "UTF-8";.gw-delete-icon-button{color:#0000008a}.gw-connector-table .mat-mdc-table{table-layout:fixed}.gw-toggle-select{height:40px;display:flex;align-items:center}.gw-chip-list .mdc-evolution-chip-set__chips{justify-content:flex-end;align-items:center}.gw-table-toolbar.mat-mdc-table-toolbar.mat-mdc-table-toolbar{padding:0 8px}.tb-default .h-16{height:4rem}.tb-default .h-\\[500px\\]{height:500px}.tb-default .max-h-full{max-height:100%}.tb-default .min-h-10{min-height:2.5rem}.tb-default .\\!w-1\\/5{width:20%!important}.tb-default .w-1\\/2{width:50%}.tb-default .w-12{width:3rem}.tb-default .w-\\[77vw\\]{width:77vw}.tb-default .min-w-16{min-width:4rem}.tb-default .min-w-24{min-width:6rem}.tb-default .max-w-2xl{max-width:42rem}.tb-default .max-w-3xl{max-width:48rem}.tb-default .max-w-4\\/12{max-width:33.333333%}.tb-default .max-w-\\[11vw\\]{max-width:11vw}.tb-default .max-w-full{max-width:100%}.tb-default .flex-\\[1_1_30px\\]{flex:1 1 30px}.tb-default .flex-\\[1_1_33\\%\\]{flex:1 1 33%}.tb-default .flex-grow{flex-grow:1}.tb-default .gap-1\\.25{gap:.3125rem}.tb-default .p-1{padding:.25rem}.tb-default .\\!pl-0{padding-left:0!important}.tb-default .pr-4{padding-right:1rem}.tb-default .pt-4{padding-top:1rem}.tb-default .text-center{text-align:center}@media (max-width: 599px){.tb-default .lt-sm\\:flex-col{flex-direction:column}}\n'],encapsulation:2})}}const Y7=(e,t)=>{const n=e[y];if(n.styles?.length){const e=n.styles[0];let a=document.getElementById(t);if(!a){a=document.createElement("style"),a.id=t;(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}a.innerHTML=e}};class X7{constructor(e){this.translate=e,function(e){e.setTranslation("en_US",gt,!0),e.setTranslation("ar_AE",ft,!0),e.setTranslation("ca_ES",yt,!0),e.setTranslation("cs_CZ",vt,!0),e.setTranslation("da_DK",bt,!0),e.setTranslation("es_ES",xt,!0),e.setTranslation("ko_KR",wt,!0),e.setTranslation("lt_LT",St,!0),e.setTranslation("nl_BE",Ct,!0),e.setTranslation("pl_PL",_t,!0),e.setTranslation("pt_BR",Tt,!0),e.setTranslation("sl_SI",It,!0),e.setTranslation("tr_TR",Et,!0),e.setTranslation("zh_CN",Mt,!0),e.setTranslation("zh_TW",kt,!0)}(e),(e=>{Y7(K7,e)})("tb-gateway-css")}static{this.ɵfac=function(e){return new(e||X7)(t.ɵɵinject(He.TranslateService))}}static{this.ɵmod=t.ɵɵdefineNgModule({type:X7})}static{this.ɵinj=t.ɵɵdefineInjector({imports:[j,_,$e,Sj,gW,d$,$7,bn,r5,i5]})}}e("GatewayExtensionModule",X7),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(X7,{imports:[j,_,$e,Sj,gW,d$,$7,bn,r5,i5]})}}}));//# sourceMappingURL=gateway-management-extension.js.map
